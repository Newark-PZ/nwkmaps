(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){t.exports=n("zUnb")},"4ZJM":function(t,e,n){t.exports=function(){"use strict";var t,e,n;function i(i,r){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",a={};t(a),(n=r(a)).workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))}else e=r;else t=r}return i(0,(function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=i;function i(t,e,n,i){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=n,this.p2y=i}i.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},i.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},i.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},i.prototype.solveCurveX=function(t,e){var n,i,r,o,a;for(void 0===e&&(e=1e-6),r=t,a=0;a<8;a++){if(o=this.sampleCurveX(r)-t,Math.abs(o)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=o/s}if((r=t)<(n=0))return n;if(r>(i=1))return i;for(;n<i;){if(o=this.sampleCurveX(r),Math.abs(o-t)<e)return r;t>o?n=r:i=r,r=.5*(i-n)+n}return r},i.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var r=o;function o(t,e){this.x=t,this.y=e}function a(t,e,i,r){var o=new n(t,e,i,r);return function(t){return o.solve(t)}}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),i=Math.sin(t),r=e.y+i*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-i*(this.y-e.y),this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t};var s=a(.25,.1,.25,1);function u(t,e,n){return Math.min(n,Math.max(e,t))}function l(t,e,n){var i=n-e,r=((t-e)%i+i)%i+e;return r===e?n:r}function c(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var i=0,r=e;i<r.length;i+=1){var o=r[i];for(var a in o)t[a]=o[a]}return t}var h=1;function d(){return h++}function p(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function f(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function g(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}function m(t,e){return-1!==t.indexOf(e,t.length-e.length)}function y(t,e,n){var i={};for(var r in t)i[r]=e.call(n||this,t[r],r,t);return i}function _(t,e,n){var i={};for(var r in t)e.call(n||this,t[r],r,t)&&(i[r]=t[r]);return i}function v(t){return Array.isArray(t)?t.map(v):"object"==typeof t&&t?y(t,v):t}var b={};function x(t){b[t]||("undefined"!=typeof console&&console.warn(t),b[t]=!0)}function w(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function C(t){for(var e=0,n=0,i=t.length,r=i-1,o=void 0,a=void 0;n<i;r=n++)e+=((a=t[r]).x-(o=t[n]).x)*(o.y+a.y);return e}function P(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function M(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(t,n,i,r){var o=i||r;return e[n]=!o||o.toLowerCase(),""})),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}var O=null;function k(t){if(null==O){var e=t.navigator?t.navigator.userAgent:null;O=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return O}function E(t){try{var e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var S,T,A,I,D=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),R=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,F=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,L={now:D,frame:function(t){var e=R(t);return{cancel:function(){return F(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var n=self.document.createElement("canvas"),i=n.getContext("2d");if(!i)throw new Error("failed to create canvas 2d context");return n.width=t.width,n.height=t.height,i.drawImage(t,0,0,t.width,t.height),i.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return S||(S=self.document.createElement("a")),S.href=t,S.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==T&&(T=self.matchMedia("(prefers-reduced-motion: reduce)")),T.matches)}},z={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},N={supported:!1,testSupport:function(t){!B&&I&&(V?U(t):A=t)}},B=!1,V=!1;function U(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,I),t.isContextLost())return;N.supported=!0}catch(t){}t.deleteTexture(e),B=!0}self.document&&((I=self.document.createElement("img")).onload=function(){A&&U(A),A=null,V=!0},I.onerror=function(){B=!0,A=null},I.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var j="01",q=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function G(t){return 0===t.indexOf("mapbox:")}q.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",j,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},q.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},q.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},q.prototype.normalizeStyleURL=function(t,e){if(!G(t))return t;var n=K(t);return n.path="/styles/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)},q.prototype.normalizeGlyphsURL=function(t,e){if(!G(t))return t;var n=K(t);return n.path="/fonts/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)},q.prototype.normalizeSourceURL=function(t,e){if(!G(t))return t;var n=K(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||e)},q.prototype.normalizeSpriteURL=function(t,e,n,i){var r=K(t);return G(t)?(r.path="/styles/v1"+r.path+"/sprite"+e+n,this._makeAPIURL(r,this._customAccessToken||i)):(r.path+=""+e+n,X(r))},q.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!G(t))return t;var n=K(t);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,(L.devicePixelRatio>=2||512===e?"@2x":"")+(N.supported?".webp":"$1")),n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/v4"+n.path;var i=this._customAccessToken||function(t){for(var e=0,n=t;e<n.length;e+=1){var i=n[e].match(/^access_token=(.*)$/);if(i)return i[1]}return null}(n.params)||z.ACCESS_TOKEN;return z.REQUIRE_ACCESS_TOKEN&&i&&this._skuToken&&n.params.push("sku="+this._skuToken),this._makeAPIURL(n,i)},q.prototype.canonicalizeTileURL=function(t,e){var n=K(t);if(!n.path.match(/(^\/v4\/)/)||!n.path.match(/\.[\w]+$/))return t;var i="mapbox://tiles/";i+=n.path.replace("/v4/","");var r=n.params;return e&&(r=r.filter((function(t){return!t.match(/^access_token=/)}))),r.length&&(i+="?"+r.join("&")),i},q.prototype.canonicalizeTileset=function(t,e){for(var n=!!e&&G(e),i=[],r=0,o=t.tiles||[];r<o.length;r+=1){var a=o[r];Z(a)?i.push(this.canonicalizeTileURL(a,n)):i.push(a)}return i},q.prototype._makeAPIURL=function(t,e){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",i=K(z.API_URL);if(t.protocol=i.protocol,t.authority=i.authority,"/"!==i.path&&(t.path=""+i.path+t.path),!z.REQUIRE_ACCESS_TOKEN)return X(t);if(!(e=e||z.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+n);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+n);return t.params=t.params.filter((function(t){return-1===t.indexOf("access_token")})),t.params.push("access_token="+e),X(t)};var H=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Z(t){return H.test(t)}var W=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function K(t){var e=t.match(W);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function X(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function $(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(e[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(t){return null}}var Y=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Y.prototype.getStorageKey=function(t){var e,n=$(z.ACCESS_TOKEN);return e=n&&n.u?self.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))}))):z.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},Y.prototype.fetchEventData=function(){var t=E("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{var i=self.localStorage.getItem(e);i&&(this.eventData=JSON.parse(i));var r=self.localStorage.getItem(n);r&&(this.anonId=r)}catch(t){x("Unable to read from LocalStorage")}},Y.prototype.saveEventData=function(){var t=E("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{self.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){x("Unable to write to LocalStorage")}},Y.prototype.processRequests=function(t){},Y.prototype.postEvent=function(t,e,n,i){var r=this;if(z.EVENTS_URL){var o=K(z.EVENTS_URL);o.params.push("access_token="+(i||z.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.8.1",skuId:j,userId:this.anonId},s=e?c(a,e):a,u={url:X(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=bt(u,(function(t){r.pendingRequest=null,n(t),r.saveEventData(),r.processRequests(i)}))}},Y.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var Q,J,tt=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(t,e,n,i){this.skuToken=n,(z.EVENTS_URL&&i||z.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return G(t)||Z(t)})))&&this.queueRequest({id:e,timestamp:Date.now()},i)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),i=n.id,r=n.timestamp;i&&this.success[i]||(this.anonId||this.fetchEventData(),f(this.anonId)||(this.anonId=p()),this.postEvent(r,{skuToken:this.skuToken},(function(t){t||i&&(e.success[i]=!0)}),t))}},e}(Y),et=new(function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(t,e){z.EVENTS_URL&&z.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return G(t)||Z(t)}))&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=$(z.ACCESS_TOKEN),i=n?n.u:z.ACCESS_TOKEN,r=i!==this.eventData.tokenU;f(this.anonId)||(this.anonId=p(),r=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),s=new Date(o),u=(o-this.eventData.lastSuccess)/864e5;r=r||u>=1||u<-1||a.getDate()!==s.getDate()}else r=!0;if(!r)return this.processRequests();this.postEvent(o,{"enabled.telemetry":!1},(function(t){t||(e.eventData.lastSuccess=o,e.eventData.tokenU=i)}),t)}},e}(Y)),nt=et.postTurnstileEvent.bind(et),it=new tt,rt=it.postMapLoadEvent.bind(it),ot="mapbox-tiles",at=500,st=50;function ut(){self.caches&&!Q&&(Q=self.caches.open(ot))}function lt(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var ct,ht=1/0;function dt(){return null==ct&&(ct=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),ct}var pt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(pt);var ft,gt,mt=function(t){function e(e,n,i){401===n&&Z(i)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=n,this.url=i,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),yt=P()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href},_t=function(t,e){if(!(/^file:/.test(n=t.url)||/^file:/.test(yt())&&!/^\w+:/.test(n))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return function(t,e){var n,i=new self.AbortController,r=new self.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:yt(),signal:i.signal}),o=!1,a=!1,s=(n=r.url).indexOf("sku=")>0&&Z(n);"json"===t.type&&r.headers.set("Accept","application/json");var u=function(n,i,o){if(!a){if(n&&"SecurityError"!==n.message&&x(n),i&&o)return l(i);var u=Date.now();self.fetch(r).then((function(n){if(n.ok){var i=s?n.clone():null;return l(n,i,u)}return e(new mt(n.statusText,n.status,t.url))})).catch((function(t){20!==t.code&&e(new Error(t.message))}))}},l=function(n,i,s){("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then((function(t){a||(i&&s&&function(t,e,n){if(ut(),Q){var i={status:e.status,statusText:e.statusText,headers:new self.Headers};e.headers.forEach((function(t,e){return i.headers.set(e,t)}));var r=M(e.headers.get("Cache-Control")||"");r["no-store"]||(r["max-age"]&&i.headers.set("Expires",new Date(n+1e3*r["max-age"]).toUTCString()),new Date(i.headers.get("Expires")).getTime()-n<42e4||function(t,e){if(void 0===J)try{new Response(new ReadableStream),J=!0}catch(t){J=!1}J?e(t.body):t.blob().then(e)}(e,(function(e){var n=new self.Response(e,i);ut(),Q&&Q.then((function(e){return e.put(lt(t.url),n)})).catch((function(t){return x(t.message)}))})))}}(r,i,s),o=!0,e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((function(t){a||e(new Error(t.message))}))};return s?function(t,e){if(ut(),!Q)return e(null);var n=lt(t.url);Q.then((function(t){t.match(n).then((function(i){var r=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),n=M(t.headers.get("Cache-Control")||"");return e>Date.now()&&!n["no-cache"]}(i);t.delete(n),r&&t.put(n,i.clone()),e(null,i,r)})).catch(e)})).catch(e)}(r,u):u(null,null),{cancel:function(){a=!0,o||i.abort()}}}(t,e);if(P()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var n;return function(t,e){var n=new self.XMLHttpRequest;for(var i in n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer"),t.headers)n.setRequestHeader(i,t.headers[i]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var i=n.response;if("json"===t.type)try{i=JSON.parse(n.response)}catch(t){return e(t)}e(null,i,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else e(new mt(n.statusText,n.status,t.url))},n.send(t.body),{cancel:function(){return n.abort()}}}(t,e)},vt=function(t,e){return _t(c(t,{type:"arrayBuffer"}),e)},bt=function(t,e){return _t(c(t,{method:"POST"}),e)};ft=[],gt=0;var xt=function(t,e){if(N.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),gt>=z.MAX_PARALLEL_IMAGE_REQUESTS){var n={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return ft.push(n),n}gt++;var i=!1,r=function(){if(!i)for(i=!0,gt--;ft.length&&gt<z.MAX_PARALLEL_IMAGE_REQUESTS;){var t=ft.shift();t.cancelled||(t.cancel=xt(t.requestParameters,t.callback).cancel)}},o=vt(t,(function(t,n,i,o){r(),t?e(t):n&&(dt()?function(t,e){var n=new self.Blob([new Uint8Array(t)],{type:"image/png"});self.createImageBitmap(n).then((function(t){e(null,t)})).catch((function(t){e(new Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}(n,e):function(t,e,n,i){var r=new self.Image,o=self.URL;r.onload=function(){e(null,r),o.revokeObjectURL(r.src)},r.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var a=new self.Blob([new Uint8Array(t)],{type:"image/png"});r.cacheControl=n,r.expires=i,r.src=t.byteLength?o.createObjectURL(a):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(n,e,i,o))}));return{cancel:function(){o.cancel(),r()}}};function wt(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function Ct(t,e,n){if(n&&n[t]){var i=n[t].indexOf(e);-1!==i&&n[t].splice(i,1)}}var Pt=function(t,e){void 0===e&&(e={}),c(this,e),this.type=t},Mt=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,"error",c({error:e},n))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Pt),Ot=function(){};Ot.prototype.on=function(t,e){return this._listeners=this._listeners||{},wt(t,e,this._listeners),this},Ot.prototype.off=function(t,e){return Ct(t,e,this._listeners),Ct(t,e,this._oneTimeListeners),this},Ot.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},wt(t,e,this._oneTimeListeners),this},Ot.prototype.fire=function(t,e){"string"==typeof t&&(t=new Pt(t,e||{}));var n=t.type;if(this.listens(n)){t.target=this;for(var i=0,r=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];i<r.length;i+=1)r[i].call(this,t);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];o<a.length;o+=1){var s=a[o];Ct(n,s,this._oneTimeListeners),s.call(this,t)}var u=this._eventedParent;u&&(c(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(t))}else t instanceof Mt&&console.error(t.error);return this},Ot.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},Ot.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var kt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Et=function(t,e,n,i){this.message=(t?t+": ":"")+n,i&&(this.identifier=i),null!=e&&e.__line__&&(this.line=e.__line__)};function St(t){var e=t.value;return e?[new Et(t.key,e,"constants have been deprecated as of v8")]:[]}function Tt(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var i=0,r=e;i<r.length;i+=1){var o=r[i];for(var a in o)t[a]=o[a]}return t}function At(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function It(t){if(Array.isArray(t))return t.map(It);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var n in t)e[n]=It(t[n]);return e}return At(t)}var Dt=function(t){function e(e,n){t.call(this,n),this.message=n,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Rt=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,i=e;n<i.length;n+=1){var r=i[n];this.bindings[r[0]]=r[1]}};Rt.prototype.concat=function(t){return new Rt(this,t)},Rt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Rt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Ft={kind:"null"},Lt={kind:"number"},zt={kind:"string"},Nt={kind:"boolean"},Bt={kind:"color"},Vt={kind:"object"},Ut={kind:"value"},jt={kind:"collator"},qt={kind:"formatted"},Gt={kind:"resolvedImage"};function Ht(t,e){return{kind:"array",itemType:t,N:e}}function Zt(t){if("array"===t.kind){var e=Zt(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var Wt=[Ft,Lt,zt,Nt,Bt,qt,Vt,Ht(Ut),Gt];function Kt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Kt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,i=Wt;n<i.length;n+=1)if(!Kt(i[n],e))return null}return"Expected "+Zt(t)+" but found "+Zt(e)+" instead."}var Xt=e((function(t,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function i(t){return(t=Math.round(t))<0?0:t>255?255:t}function r(t){return i("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return function(t){return t<0?0:t>1?1:t}("%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))}function a(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in n)return n[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=s.indexOf("("),l=s.indexOf(")");if(-1!==u&&l+1===s.length){var c=s.substr(0,u),h=s.substr(u+1,l-(u+1)).split(","),d=1;switch(c){case"rgba":if(4!==h.length)return null;d=o(h.pop());case"rgb":return 3!==h.length?null:[r(h[0]),r(h[1]),r(h[2]),d];case"hsla":if(4!==h.length)return null;d=o(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,f=o(h[1]),g=o(h[2]),m=g<=.5?g*(f+1):g+f-g*f,y=2*g-m;return[i(255*a(y,m,p+1/3)),i(255*a(y,m,p)),i(255*a(y,m,p-1/3)),d];default:return null}}return null}}catch(t){}})).parseCSSColor,$t=function(t,e,n,i){void 0===i&&(i=1),this.r=t,this.g=e,this.b=n,this.a=i};$t.parse=function(t){if(t){if(t instanceof $t)return t;if("string"==typeof t){var e=Xt(t);if(e)return new $t(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},$t.prototype.toString=function(){var t=this.toArray(),e=t[1],n=t[2],i=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(n)+","+i+")"},$t.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},$t.black=new $t(0,0,0,1),$t.white=new $t(1,1,1,1),$t.transparent=new $t(0,0,0,0),$t.red=new $t(1,0,0,1);var Yt=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Yt.prototype.compare=function(t,e){return this.collator.compare(t,e)},Yt.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Qt=function(t,e,n,i,r){this.text=t,this.image=e,this.scale=n,this.fontStack=i,this.textColor=r},Jt=function(t){this.sections=t};Jt.fromString=function(t){return new Jt([new Qt(t,null,null,null,null)])},Jt.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))},Jt.factory=function(t){return t instanceof Jt?t:Jt.fromString(t)},Jt.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")},Jt.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var i=n[e];if(i.image)t.push(["image",i.image.name]);else{t.push(i.text);var r={};i.fontStack&&(r["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(r["font-scale"]=i.scale),i.textColor&&(r["text-color"]=["rgba"].concat(i.textColor.toArray())),t.push(r)}}return t};var te=function(t){this.name=t.name,this.available=t.available};function ee(t,e,n,i){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:"Invalid rgba value ["+[t,e,n,i].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof i?[t,e,n,i]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ne(t){if(null===t)return Ft;if("string"==typeof t)return zt;if("boolean"==typeof t)return Nt;if("number"==typeof t)return Lt;if(t instanceof $t)return Bt;if(t instanceof Yt)return jt;if(t instanceof Jt)return qt;if(t instanceof te)return Gt;if(Array.isArray(t)){for(var e,n=t.length,i=0,r=t;i<r.length;i+=1){var o=ne(r[i]);if(e){if(e===o)continue;e=Ut;break}e=o}return Ht(e||Ut,n)}return Vt}function ie(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof $t||t instanceof Jt||t instanceof te?t.toString():JSON.stringify(t)}te.prototype.toString=function(){return this.name},te.fromString=function(t){return new te({name:t,available:!1})},te.prototype.serialize=function(){return["image",this.name]};var re=function(t,e){this.type=t,this.value=e};re.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof $t)return!0;if(e instanceof Yt)return!0;if(e instanceof Jt)return!0;if(e instanceof te)return!0;if(Array.isArray(e)){for(var n=0,i=e;n<i.length;n+=1)if(!t(i[n]))return!1;return!0}if("object"==typeof e){for(var r in e)if(!t(e[r]))return!1;return!0}return!1}(t[1]))return e.error("invalid value");var n=t[1],i=ne(n),r=e.expectedType;return"array"!==i.kind||0!==i.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(i=r),new re(i,n)},re.prototype.evaluate=function(){return this.value},re.prototype.eachChild=function(){},re.prototype.possibleOutputs=function(){return[this.value]},re.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof $t?["rgba"].concat(this.value.toArray()):this.value instanceof Jt?this.value.serialize():this.value};var oe=function(t){this.name="ExpressionEvaluationError",this.message=t};oe.prototype.toJSON=function(){return this.message};var ae={string:zt,number:Lt,boolean:Nt,object:Vt},se=function(t,e){this.type=t,this.args=e};se.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n,i=1,r=t[0];if("array"===r){var o,a;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in ae)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=ae[s],i++}else o=Ut;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],i++}n=Ht(o,a)}else n=ae[r];for(var u=[];i<t.length;i++){var l=e.parse(t[i],i,Ut);if(!l)return null;u.push(l)}return new se(n,u)},se.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!Kt(this.type,ne(n)))return n;if(e===this.args.length-1)throw new oe("Expected value to be of type "+Zt(this.type)+", but found "+Zt(ne(n))+" instead.")}return null},se.prototype.eachChild=function(t){this.args.forEach(t)},se.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map((function(t){return t.possibleOutputs()})))},se.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);var i=t.N;("number"==typeof i||this.args.length>1)&&e.push(i)}}return e.concat(this.args.map((function(t){return t.serialize()})))};var ue=function(t){this.type=qt,this.sections=t};ue.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");for(var i=[],r=!1,o=1;o<=t.length-1;++o){var a=t[o];if(r&&"object"==typeof a&&!Array.isArray(a)){r=!1;var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,Lt)))return null;var u=null;if(a["text-font"]&&!(u=e.parse(a["text-font"],1,Ht(zt))))return null;var l=null;if(a["text-color"]&&!(l=e.parse(a["text-color"],1,Bt)))return null;var c=i[i.length-1];c.scale=s,c.font=u,c.textColor=l}else{var h=e.parse(t[o],1,Ut);if(!h)return null;var d=h.type.kind;if("string"!==d&&"value"!==d&&"null"!==d&&"resolvedImage"!==d)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,i.push({content:h,scale:null,font:null,textColor:null})}}return new ue(i)},ue.prototype.evaluate=function(t){return new Jt(this.sections.map((function(e){var n=e.content.evaluate(t);return ne(n)===Gt?new Qt("",n,null,null,null):new Qt(ie(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))},ue.prototype.eachChild=function(t){for(var e=0,n=this.sections;e<n.length;e+=1){var i=n[e];t(i.content),i.scale&&t(i.scale),i.font&&t(i.font),i.textColor&&t(i.textColor)}},ue.prototype.possibleOutputs=function(){return[void 0]},ue.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var i=n[e];t.push(i.content.serialize());var r={};i.scale&&(r["font-scale"]=i.scale.serialize()),i.font&&(r["text-font"]=i.font.serialize()),i.textColor&&(r["text-color"]=i.textColor.serialize()),t.push(r)}return t};var le=function(t){this.type=Gt,this.input=t};le.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,zt);return n?new le(n):e.error("No image name provided.")},le.prototype.evaluate=function(t){var e=this.input.evaluate(t),n=!1;return t.availableImages&&t.availableImages.indexOf(e)>-1&&(n=!0),new te({name:e,available:n})},le.prototype.eachChild=function(t){t(this.input)},le.prototype.possibleOutputs=function(){return[void 0]},le.prototype.serialize=function(){return["image",this.input.serialize()]};var ce={"to-boolean":Nt,"to-color":Bt,"to-number":Lt,"to-string":zt},he=function(t,e){this.type=t,this.args=e};he.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");for(var i=ce[n],r=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,Ut);if(!a)return null;r.push(a)}return new he(i,r)},he.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,n,i=0,r=this.args;i<r.length;i+=1){if(n=null,(e=r[i].evaluate(t))instanceof $t)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":ee(e[0],e[1],e[2],e[3])))return new $t(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new oe(n||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,u=this.args;s<u.length;s+=1){if(null===(a=u[s].evaluate(t)))return 0;var l=Number(a);if(!isNaN(l))return l}throw new oe("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?Jt.fromString(ie(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?te.fromString(ie(this.args[0].evaluate(t))):ie(this.args[0].evaluate(t))},he.prototype.eachChild=function(t){this.args.forEach(t)},he.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map((function(t){return t.possibleOutputs()})))},he.prototype.serialize=function(){if("formatted"===this.type.kind)return new ue([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new le(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(e){t.push(e.serialize())})),t};var de=["Unknown","Point","LineString","Polygon"],pe=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null};pe.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},pe.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?de[this.feature.type]:this.feature.type:null},pe.prototype.properties=function(){return this.feature&&this.feature.properties||{}},pe.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=$t.parse(t)),e};var fe=function(t,e,n,i){this.name=t,this.type=e,this._evaluate=n,this.args=i};fe.prototype.evaluate=function(t){return this._evaluate(t,this.args)},fe.prototype.eachChild=function(t){this.args.forEach(t)},fe.prototype.possibleOutputs=function(){return[void 0]},fe.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},fe.parse=function(t,e){var n,i=t[0],r=fe.definitions[i];if(!r)return e.error('Unknown expression "'+i+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(r)?r[0]:r.type,a=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,s=a.filter((function(e){var n=e[0];return!Array.isArray(n)||n.length===t.length-1})),u=null,l=0,c=s;l<c.length;l+=1){var h=c[l],d=h[0],p=h[1];u=new be(e.registry,e.path,null,e.scope);for(var f=[],g=!1,m=1;m<t.length;m++){var y=t[m],_=Array.isArray(d)?d[m-1]:d.type,v=u.parse(y,1+f.length,_);if(!v){g=!0;break}f.push(v)}if(!g)if(Array.isArray(d)&&d.length!==f.length)u.error("Expected "+d.length+" arguments, but found "+f.length+" instead.");else{for(var b=0;b<f.length;b++){var x=Array.isArray(d)?d[b]:d.type,w=f[b];u.concat(b+1).checkSubtype(x,w.type)}if(0===u.errors.length)return new fe(i,o,p,f)}}if(1===s.length)(n=e.errors).push.apply(n,u.errors);else{for(var C=(s.length?s:a).map((function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Zt).join(", ")+")":"("+Zt(e.type)+"...)"})).join(" | "),P=[],M=1;M<t.length;M++){var O=e.parse(t[M],1+P.length);if(!O)return null;P.push(Zt(O.type))}e.error("Expected arguments of type "+C+", but found ("+P.join(", ")+") instead.")}return null},fe.register=function(t,e){for(var n in fe.definitions=e,e)t[n]=fe};var ge=function(t,e,n){this.type=jt,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e};function me(t){if(t instanceof fe){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var e=!0;return t.eachChild((function(t){e&&!me(t)&&(e=!1)})),e}function ye(t){if(t instanceof fe&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!ye(t)&&(e=!1)})),e}function _e(t,e){if(t instanceof fe&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild((function(t){n&&!_e(t,e)&&(n=!1)})),n}ge.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");var i=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Nt);if(!i)return null;var r=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Nt);if(!r)return null;var o=null;return n.locale&&!(o=e.parse(n.locale,1,zt))?null:new ge(i,r,o)},ge.prototype.evaluate=function(t){return new Yt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},ge.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},ge.prototype.possibleOutputs=function(){return[void 0]},ge.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var ve=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};ve.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new ve(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},ve.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},ve.prototype.eachChild=function(){},ve.prototype.possibleOutputs=function(){return[void 0]},ve.prototype.serialize=function(){return["var",this.name]};var be=function(t,e,n,i,r){void 0===e&&(e=[]),void 0===i&&(i=new Rt),void 0===r&&(r=[]),this.registry=t,this.path=e,this.key=e.map((function(t){return"["+t+"]"})).join(""),this.scope=i,this.errors=r,this.expectedType=n};function xe(t,e){for(var n,i=t.length-1,r=0,o=i,a=0;r<=o;)if((n=t[a=Math.floor((r+o)/2)])<=e){if(a===i||e<t[a+1])return a;r=a+1}else{if(!(n>e))throw new oe("Input is not a number.");o=a-1}return 0}be.prototype.parse=function(t,e,n,i,r){return void 0===r&&(r={}),e?this.concat(e,n,i)._parse(t,r):this._parse(t,r)},be.prototype._parse=function(t,e){function n(t,e,n){return"assert"===n?new se(e,[t]):"coerce"===n?new he(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var i=t[0];if("string"!=typeof i)return this.error("Expression name must be a string, but found "+typeof i+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var r=this.registry[i];if(r){var o=r.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=n(o,a,e.typeAnnotation||"coerce");else o=n(o,a,e.typeAnnotation||"assert")}if(!(o instanceof re)&&"resolvedImage"!==o.type.kind&&function t(e){if(e instanceof ve)return t(e.boundExpression);if(e instanceof fe&&"error"===e.name)return!1;if(e instanceof ge)return!1;var n=e instanceof he||e instanceof se,i=!0;return e.eachChild((function(e){i=n?i&&t(e):i&&e instanceof re})),!!i&&me(e)&&_e(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var u=new pe;try{o=new re(o.type,o.evaluate(u))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+i+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},be.prototype.concat=function(t,e,n){var i="number"==typeof t?this.path.concat(t):this.path,r=n?this.scope.concat(n):this.scope;return new be(this.registry,i,e||null,r,this.errors)},be.prototype.error=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var i=""+this.key+e.map((function(t){return"["+t+"]"})).join("");this.errors.push(new Dt(i,t))},be.prototype.checkSubtype=function(t,e){var n=Kt(t,e);return n&&this.error(n),n};var we=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var i=0,r=n;i<r.length;i+=1){var o=r[i],a=o[1];this.labels.push(o[0]),this.outputs.push(a)}};function Ce(t,e,n){return t*(1-n)+e*n}we.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var n=e.parse(t[1],1,Lt);if(!n)return null;var i=[],r=null;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var o=1;o<t.length;o+=2){var a=1===o?-1/0:t[o],s=t[o+1],u=o,l=o+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(i.length&&i[i.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var c=e.parse(s,l,r);if(!c)return null;r=r||c.type,i.push([a,c])}return new we(r,n,i)},we.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);var r=e.length;return i>=e[r-1]?n[r-1].evaluate(t):n[xe(e,i)].evaluate(t)},we.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},we.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map((function(t){return t.possibleOutputs()})))},we.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Pe=Object.freeze({__proto__:null,number:Ce,color:function(t,e,n){return new $t(Ce(t.r,e.r,n),Ce(t.g,e.g,n),Ce(t.b,e.b,n),Ce(t.a,e.a,n))},array:function(t,e,n){return t.map((function(t,i){return Ce(t,e[i],n)}))}}),Me=6/29*3*(6/29),Oe=Math.PI/180,ke=180/Math.PI;function Ee(t){return t>.008856451679035631?Math.pow(t,1/3):t/Me+4/29}function Se(t){return t>6/29?t*t*t:Me*(t-4/29)}function Te(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ae(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ie(t){var e=Ae(t.r),n=Ae(t.g),i=Ae(t.b),r=Ee((.4124564*e+.3575761*n+.1804375*i)/.95047),o=Ee((.2126729*e+.7151522*n+.072175*i)/1);return{l:116*o-16,a:500*(r-o),b:200*(o-Ee((.0193339*e+.119192*n+.9503041*i)/1.08883)),alpha:t.a}}function De(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,i=isNaN(t.b)?e:e-t.b/200;return e=1*Se(e),n=.95047*Se(n),i=1.08883*Se(i),new $t(Te(3.2404542*n-1.5371385*e-.4985314*i),Te(-.969266*n+1.8760108*e+.041556*i),Te(.0556434*n-.2040259*e+1.0572252*i),t.alpha)}function Re(t,e,n){var i=e-t;return t+n*(i>180||i<-180?i-360*Math.round(i/360):i)}var Fe={forward:Ie,reverse:De,interpolate:function(t,e,n){return{l:Ce(t.l,e.l,n),a:Ce(t.a,e.a,n),b:Ce(t.b,e.b,n),alpha:Ce(t.alpha,e.alpha,n)}}},Le={forward:function(t){var e=Ie(t),n=e.l,i=e.a,r=e.b,o=Math.atan2(r,i)*ke;return{h:o<0?o+360:o,c:Math.sqrt(i*i+r*r),l:n,alpha:t.a}},reverse:function(t){var e=t.h*Oe,n=t.c;return De({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:Re(t.h,e.h,n),c:Ce(t.c,e.c,n),l:Ce(t.l,e.l,n),alpha:Ce(t.alpha,e.alpha,n)}}},ze=Object.freeze({__proto__:null,lab:Fe,hcl:Le}),Ne=function(t,e,n,i,r){this.type=t,this.operator=e,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(var o=0,a=r;o<a.length;o+=1){var s=a[o],u=s[1];this.labels.push(s[0]),this.outputs.push(u)}};function Be(t,e,n,i){var r=i-n,o=t-n;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}Ne.interpolationFactor=function(t,e,i,r){var o=0;if("exponential"===t.name)o=Be(e,t.base,i,r);else if("linear"===t.name)o=Be(e,1,i,r);else if("cubic-bezier"===t.name){var a=t.controlPoints;o=new n(a[0],a[1],a[2],a[3]).solve(Be(e,1,i,r))}return o},Ne.parse=function(t,e){var n=t[0],i=t[1],r=t[2],o=t.slice(3);if(!Array.isArray(i)||0===i.length)return e.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){var a=i[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:a}}else{if("cubic-bezier"!==i[0])return e.error("Unknown interpolation type "+String(i[0]),1,0);var s=i.slice(1);if(4!==s.length||s.some((function(t){return"number"!=typeof t||t<0||t>1})))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(r=e.parse(r,2,Lt)))return null;var u=[],l=null;"interpolate-hcl"===n||"interpolate-lab"===n?l=Bt:e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);for(var c=0;c<o.length;c+=2){var h=o[c],d=o[c+1],p=c+3,f=c+4;if("number"!=typeof h)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',p);if(u.length&&u[u.length-1][0]>=h)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',p);var g=e.parse(d,f,l);if(!g)return null;l=l||g.type,u.push([h,g])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new Ne(l,n,i,r,u):e.error("Type "+Zt(l)+" is not interpolatable.")},Ne.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);var r=e.length;if(i>=e[r-1])return n[r-1].evaluate(t);var o=xe(e,i),a=Ne.interpolationFactor(this.interpolation,i,e[o],e[o+1]),s=n[o].evaluate(t),u=n[o+1].evaluate(t);return"interpolate"===this.operator?Pe[this.type.kind.toLowerCase()](s,u,a):"interpolate-hcl"===this.operator?Le.reverse(Le.interpolate(Le.forward(s),Le.forward(u),a)):Fe.reverse(Fe.interpolate(Fe.forward(s),Fe.forward(u),a))},Ne.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},Ne.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map((function(t){return t.possibleOutputs()})))},Ne.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e};var Ve=function(t,e){this.type=t,this.args=e};Ve.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,i=e.expectedType;i&&"value"!==i.kind&&(n=i);for(var r=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=e.parse(a[o],1+r.length,n,void 0,{typeAnnotation:"omit"});if(!s)return null;n=n||s.type,r.push(s)}var u=i&&r.some((function(t){return Kt(i,t.type)}));return new Ve(u?Ut:n,r)},Ve.prototype.evaluate=function(t){for(var e,n=null,i=0,r=0,o=this.args;r<o.length&&(i++,(n=o[r].evaluate(t))&&n instanceof te&&!n.available&&(e||(e=n.name),n=null,i===this.args.length&&(n=e)),null===n);r+=1);return n},Ve.prototype.eachChild=function(t){this.args.forEach(t)},Ve.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map((function(t){return t.possibleOutputs()})))},Ve.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t};var Ue=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};Ue.prototype.evaluate=function(t){return this.result.evaluate(t)},Ue.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},Ue.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],i=1;i<t.length-1;i+=2){var r=t[i];if("string"!=typeof r)return e.error("Expected string, but found "+typeof r+" instead.",i);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);var o=e.parse(t[i+1],i+1);if(!o)return null;n.push([r,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return a?new Ue(n,a):null},Ue.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},Ue.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var i=n[e];t.push(i[0],i[1].serialize())}return t.push(this.result.serialize()),t};var je=function(t,e,n){this.type=t,this.index=e,this.input=n};je.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,Lt),i=e.parse(t[2],2,Ht(e.expectedType||Ut));return n&&i?new je(i.type.itemType,n,i):null},je.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new oe("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new oe("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new oe("Array index must be an integer, but found "+e+" instead.");return n[e]},je.prototype.eachChild=function(t){t(this.index),t(this.input)},je.prototype.possibleOutputs=function(){return[void 0]},je.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var qe=function(t,e){this.type=Nt,this.needle=t,this.haystack=e};qe.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n,i=e.parse(t[1],1,Ut),r=e.parse(t[2],2,Ut);return i&&r?"boolean"!==(n=i.type).kind&&"string"!==n.kind&&"number"!==n.kind&&"null"!==n.kind&&"value"!==n.kind?e.error("Expected first argument to be of type boolean, string, number or null, but found "+Zt(i.type)+" instead"):new qe(i,r):null},qe.prototype.evaluate=function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!e||!n)return!1;if(!function(t){return"boolean"==typeof t||"string"==typeof t||"number"==typeof t}(e))throw new oe("Expected first argument to be of type boolean, string or number, but found "+Zt(ne(e))+" instead.");if(!function(t){return Array.isArray(t)||"string"==typeof t}(n))throw new oe("Expected second argument to be of type array or string, but found "+Zt(ne(n))+" instead.");return n.indexOf(e)>=0},qe.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},qe.prototype.possibleOutputs=function(){return[!0,!1]},qe.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ge=function(t,e,n,i,r,o){this.inputType=t,this.type=e,this.input=n,this.cases=i,this.outputs=r,this.otherwise=o};Ge.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var r={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],u=t[a+1];Array.isArray(s)||(s=[s]);var l=e.concat(a);if(0===s.length)return l.error("Expected at least one branch label.");for(var c=0,h=s;c<h.length;c+=1){var d=h[c];if("number"!=typeof d&&"string"!=typeof d)return l.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof d&&Math.floor(d)!==d)return l.error("Numeric branch labels must be integer values.");if(n){if(l.checkSubtype(n,ne(d)))return null}else n=ne(d);if(void 0!==r[String(d)])return l.error("Branch labels must be unique.");r[String(d)]=o.length}var p=e.parse(u,a,i);if(!p)return null;i=i||p.type,o.push(p)}var f=e.parse(t[1],1,Ut);if(!f)return null;var g=e.parse(t[t.length-1],t.length-1,i);return g?"value"!==f.type.kind&&e.concat(1).checkSubtype(n,f.type)?null:new Ge(n,i,f,r,o,g):null},Ge.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(ne(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},Ge.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},Ge.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map((function(t){return t.possibleOutputs()}))).concat(this.otherwise.possibleOutputs())},Ge.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],n=[],i={},r=0,o=Object.keys(this.cases).sort();r<o.length;r+=1){var a=o[r];void 0===(h=i[this.cases[a]])?(i[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[h][1].push(a)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},u=0,l=n;u<l.length;u+=1){var c=l[u],h=c[0],d=c[1];e.push(1===d.length?s(d[0]):d.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var He=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n};function Ze(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function We(t,e,n,i){return 0===i.compare(e,n)}function Ke(t,e,n){var i="=="!==t&&"!="!==t;return function(){function r(t,e,n){this.type=Nt,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return r.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],o=e.parse(t[1],1,Ut);if(!o)return null;if(!Ze(n,o.type))return e.concat(1).error('"'+n+"\" comparisons are not supported for type '"+Zt(o.type)+"'.");var a=e.parse(t[2],2,Ut);if(!a)return null;if(!Ze(n,a.type))return e.concat(2).error('"'+n+"\" comparisons are not supported for type '"+Zt(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+Zt(o.type)+"' and '"+Zt(a.type)+"'.");i&&("value"===o.type.kind&&"value"!==a.type.kind?o=new se(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new se(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,jt)))return null}return new r(o,a,s)},r.prototype.evaluate=function(r){var o=this.lhs.evaluate(r),a=this.rhs.evaluate(r);if(i&&this.hasUntypedArgument){var s=ne(o),u=ne(a);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new oe('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!i&&this.hasUntypedArgument){var l=ne(o),c=ne(a);if("string"!==l.kind||"string"!==c.kind)return e(r,o,a)}return this.collator?n(r,o,a,this.collator.evaluate(r)):e(r,o,a)},r.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},r.prototype.possibleOutputs=function(){return[!0,!1]},r.prototype.serialize=function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e},r}()}He.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var i=[],r=1;r<t.length-1;r+=2){var o=e.parse(t[r],r,Nt);if(!o)return null;var a=e.parse(t[r+1],r+1,n);if(!a)return null;i.push([o,a]),n=n||a.type}var s=e.parse(t[t.length-1],t.length-1,n);return s?new He(n,i,s):null},He.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var i=n[e],r=i[1];if(i[0].evaluate(t))return r.evaluate(t)}return this.otherwise.evaluate(t)},He.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var i=n[e],r=i[1];t(i[0]),t(r)}t(this.otherwise)},He.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.branches.map((function(t){return t[1].possibleOutputs()}))).concat(this.otherwise.possibleOutputs())},He.prototype.serialize=function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t};var Xe=Ke("==",(function(t,e,n){return e===n}),We),$e=Ke("!=",(function(t,e,n){return e!==n}),(function(t,e,n,i){return!We(0,e,n,i)})),Ye=Ke("<",(function(t,e,n){return e<n}),(function(t,e,n,i){return i.compare(e,n)<0})),Qe=Ke(">",(function(t,e,n){return e>n}),(function(t,e,n,i){return i.compare(e,n)>0})),Je=Ke("<=",(function(t,e,n){return e<=n}),(function(t,e,n,i){return i.compare(e,n)<=0})),tn=Ke(">=",(function(t,e,n){return e>=n}),(function(t,e,n,i){return i.compare(e,n)>=0})),en=function(t,e,n,i,r){this.type=zt,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=i,this.maxFractionDigits=r};en.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,Lt);if(!n)return null;var i=t[2];if("object"!=typeof i||Array.isArray(i))return e.error("NumberFormat options argument must be an object.");var r=null;if(i.locale&&!(r=e.parse(i.locale,1,zt)))return null;var o=null;if(i.currency&&!(o=e.parse(i.currency,1,zt)))return null;var a=null;if(i["min-fraction-digits"]&&!(a=e.parse(i["min-fraction-digits"],1,Lt)))return null;var s=null;return i["max-fraction-digits"]&&!(s=e.parse(i["max-fraction-digits"],1,Lt))?null:new en(n,r,o,a,s)},en.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},en.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},en.prototype.possibleOutputs=function(){return[void 0]},en.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var nn=function(t){this.type=Lt,this.input=t};nn.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+Zt(n.type)+" instead."):new nn(n):null},nn.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new oe("Expected value to be of type string or array, but found "+Zt(ne(e))+" instead.")},nn.prototype.eachChild=function(t){t(this.input)},nn.prototype.possibleOutputs=function(){return[void 0]},nn.prototype.serialize=function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t};var rn={"==":Xe,"!=":$e,">":Qe,"<":Ye,">=":tn,"<=":Je,array:se,at:je,boolean:se,case:He,coalesce:Ve,collator:ge,format:ue,image:le,in:qe,interpolate:Ne,"interpolate-hcl":Ne,"interpolate-lab":Ne,length:nn,let:Ue,literal:re,match:Ge,number:se,"number-format":en,object:se,step:we,string:se,"to-boolean":he,"to-color":he,"to-number":he,"to-string":he,var:ve};function on(t,e){var n=e[0],i=e[1],r=e[2],o=e[3];n=n.evaluate(t),i=i.evaluate(t),r=r.evaluate(t);var a=o?o.evaluate(t):1,s=ee(n,i,r,a);if(s)throw new oe(s);return new $t(n/255*a,i/255*a,r/255*a,a)}function an(t,e){return t in e}function sn(t,e){var n=e[t];return void 0===n?null:n}function un(t){return{type:t}}function ln(t){return{result:"success",value:t}}function cn(t){return{result:"error",value:t}}function hn(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function dn(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function pn(t){return!!t.expression&&t.expression.interpolated}function fn(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function gn(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function mn(t){return t}function yn(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function _n(t,e,n,i,r){return yn(typeof n===r?i[n]:void 0,t.default,e.default)}function vn(t,e,n){if("number"!==fn(n))return yn(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var r=xe(t.stops.map((function(t){return t[0]})),n);return t.stops[r][1]}function bn(t,e,n){var i=void 0!==t.base?t.base:1;if("number"!==fn(n))return yn(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var o=xe(t.stops.map((function(t){return t[0]})),n),a=function(t,e,n,i){var r=i-n,o=t-n;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}(n,i,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],u=t.stops[o+1][1],l=Pe[e.type]||mn;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=ze[t.colorSpace];l=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=s.evaluate.apply(void 0,t),i=u.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==i)return l(n,i,a)}}:l(s,u,a)}function xn(t,e,n){return"color"===e.type?n=$t.parse(n):"formatted"===e.type?n=Jt.fromString(n.toString()):"resolvedImage"===e.type?n=te.fromString(n.toString()):fn(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),yn(n,t.default,e.default)}fe.register(rn,{error:[{kind:"error"},[zt],function(t,e){throw new oe(e[0].evaluate(t))}],typeof:[zt,[Ut],function(t,e){return Zt(ne(e[0].evaluate(t)))}],"to-rgba":[Ht(Lt,4),[Bt],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Bt,[Lt,Lt,Lt],on],rgba:[Bt,[Lt,Lt,Lt,Lt],on],has:{type:Nt,overloads:[[[zt],function(t,e){return an(e[0].evaluate(t),t.properties())}],[[zt,Vt],function(t,e){var n=e[1];return an(e[0].evaluate(t),n.evaluate(t))}]]},get:{type:Ut,overloads:[[[zt],function(t,e){return sn(e[0].evaluate(t),t.properties())}],[[zt,Vt],function(t,e){var n=e[1];return sn(e[0].evaluate(t),n.evaluate(t))}]]},"feature-state":[Ut,[zt],function(t,e){return sn(e[0].evaluate(t),t.featureState||{})}],properties:[Vt,[],function(t){return t.properties()}],"geometry-type":[zt,[],function(t){return t.geometryType()}],id:[Ut,[],function(t){return t.id()}],zoom:[Lt,[],function(t){return t.globals.zoom}],"heatmap-density":[Lt,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Lt,[],function(t){return t.globals.lineProgress||0}],accumulated:[Ut,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Lt,un(Lt),function(t,e){for(var n=0,i=0,r=e;i<r.length;i+=1)n+=r[i].evaluate(t);return n}],"*":[Lt,un(Lt),function(t,e){for(var n=1,i=0,r=e;i<r.length;i+=1)n*=r[i].evaluate(t);return n}],"-":{type:Lt,overloads:[[[Lt,Lt],function(t,e){var n=e[1];return e[0].evaluate(t)-n.evaluate(t)}],[[Lt],function(t,e){return-e[0].evaluate(t)}]]},"/":[Lt,[Lt,Lt],function(t,e){var n=e[1];return e[0].evaluate(t)/n.evaluate(t)}],"%":[Lt,[Lt,Lt],function(t,e){var n=e[1];return e[0].evaluate(t)%n.evaluate(t)}],ln2:[Lt,[],function(){return Math.LN2}],pi:[Lt,[],function(){return Math.PI}],e:[Lt,[],function(){return Math.E}],"^":[Lt,[Lt,Lt],function(t,e){var n=e[1];return Math.pow(e[0].evaluate(t),n.evaluate(t))}],sqrt:[Lt,[Lt],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[Lt,[Lt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[Lt,[Lt],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[Lt,[Lt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[Lt,[Lt],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[Lt,[Lt],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[Lt,[Lt],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[Lt,[Lt],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[Lt,[Lt],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[Lt,[Lt],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[Lt,un(Lt),function(t,e){return Math.min.apply(Math,e.map((function(e){return e.evaluate(t)})))}],max:[Lt,un(Lt),function(t,e){return Math.max.apply(Math,e.map((function(e){return e.evaluate(t)})))}],abs:[Lt,[Lt],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[Lt,[Lt],function(t,e){var n=e[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[Lt,[Lt],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[Lt,[Lt],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[Nt,[zt,Ut],function(t,e){var n=e[0],i=e[1];return t.properties()[n.value]===i.value}],"filter-id-==":[Nt,[Ut],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[Nt,[zt],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[Nt,[zt,Ut],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],o=i.value;return typeof r==typeof o&&r<o}],"filter-id-<":[Nt,[Ut],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i<r}],"filter->":[Nt,[zt,Ut],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],o=i.value;return typeof r==typeof o&&r>o}],"filter-id->":[Nt,[Ut],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i>r}],"filter-<=":[Nt,[zt,Ut],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],o=i.value;return typeof r==typeof o&&r<=o}],"filter-id-<=":[Nt,[Ut],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i<=r}],"filter->=":[Nt,[zt,Ut],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],o=i.value;return typeof r==typeof o&&r>=o}],"filter-id->=":[Nt,[Ut],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i>=r}],"filter-has":[Nt,[Ut],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Nt,[],function(t){return null!==t.id()}],"filter-type-in":[Nt,[Ht(zt)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Nt,[Ht(Ut)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[Nt,[zt,Ht(Ut)],function(t,e){var n=e[0];return e[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[Nt,[zt,Ht(Ut)],function(t,e){var n=e[0],i=e[1];return function(t,e,n,i){for(;n<=i;){var r=n+i>>1;if(e[r]===t)return!0;e[r]>t?i=r-1:n=r+1}return!1}(t.properties()[n.value],i.value,0,i.value.length-1)}],all:{type:Nt,overloads:[[[Nt,Nt],function(t,e){var n=e[1];return e[0].evaluate(t)&&n.evaluate(t)}],[un(Nt),function(t,e){for(var n=0,i=e;n<i.length;n+=1)if(!i[n].evaluate(t))return!1;return!0}]]},any:{type:Nt,overloads:[[[Nt,Nt],function(t,e){var n=e[1];return e[0].evaluate(t)||n.evaluate(t)}],[un(Nt),function(t,e){for(var n=0,i=e;n<i.length;n+=1)if(i[n].evaluate(t))return!0;return!1}]]},"!":[Nt,[Nt],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Nt,[zt],function(t,e){var n=t.globals&&t.globals.isSupportedScript;return!n||n(e[0].evaluate(t))}],upcase:[zt,[zt],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[zt,[zt],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[zt,un(Ut),function(t,e){return e.map((function(e){return ie(e.evaluate(t))})).join("")}],"resolved-locale":[zt,[jt],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var wn=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new pe,this._defaultValue=e?function(t){return"color"===t.type&&gn(t.default)?new $t(0,0,0,0):"color"===t.type?$t.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function Cn(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in rn}function Pn(t,e){var n=new be(rn,[],e?function(t){var e={color:Bt,string:zt,number:Lt,enum:zt,boolean:Nt,formatted:qt,resolvedImage:Gt};return"array"===t.type?Ht(e[t.value]||Ut,t.length):e[t.type]}(e):void 0),i=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return i?ln(new wn(i,e)):cn(n.errors)}wn.prototype.evaluateWithoutErrorHandling=function(t,e,n,i,r){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=r,this.expression.evaluate(this._evaluator)},wn.prototype.evaluate=function(t,e,n,i,r){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=r||null;try{var o=this.expression.evaluate(this._evaluator);if(null==o||"number"==typeof o&&o!=o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new oe("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(o)+" instead.");return o}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Mn=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!ye(e.expression)};Mn.prototype.evaluateWithoutErrorHandling=function(t,e,n,i,r){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,r)},Mn.prototype.evaluate=function(t,e,n,i,r){return this._styleExpression.evaluate(t,e,n,i,r)};var On=function(t,e,n,i){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!ye(e.expression),this.interpolationType=i};function kn(t,e){if("error"===(t=Pn(t,e)).result)return t;var n=t.value.expression,i=me(n);if(!i&&!hn(e))return cn([new Dt("","data expressions not supported")]);var r=_e(n,["zoom"]);if(!r&&!dn(e))return cn([new Dt("","zoom expressions not supported")]);var o=function t(e){var n=null;if(e instanceof Ue)n=t(e.result);else if(e instanceof Ve)for(var i=0,r=e.args;i<r.length&&!(n=t(r[i]));i+=1);else(e instanceof we||e instanceof Ne)&&e.input instanceof fe&&"zoom"===e.input.name&&(n=e);return n instanceof Dt||e.eachChild((function(e){var i=t(e);i instanceof Dt?n=i:!n&&i?n=new Dt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&i&&n!==i&&(n=new Dt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}(n);return o||r?o instanceof Dt?cn([o]):o instanceof Ne&&!pn(e)?cn([new Dt("",'"interpolate" expressions cannot be used with this property')]):ln(o?new On(i?"camera":"composite",t.value,o.labels,o instanceof Ne?o.interpolation:void 0):new Mn(i?"constant":"source",t.value)):cn([new Dt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}On.prototype.evaluateWithoutErrorHandling=function(t,e,n,i,r){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,r)},On.prototype.evaluate=function(t,e,n,i,r){return this._styleExpression.evaluate(t,e,n,i,r)},On.prototype.interpolationFactor=function(t,e,n){return this.interpolationType?Ne.interpolationFactor(this.interpolationType,t,e,n):0};var En=function(t,e){this._parameters=t,this._specification=e,Tt(this,function t(e,n){var i,r,o,a="color"===n.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||!(s||void 0!==e.property),l=e.type||(pn(n)?"exponential":"interval");if(a&&((e=Tt({},e)).stops&&(e.stops=e.stops.map((function(t){return[t[0],$t.parse(t[1])]}))),e.default=$t.parse(e.default?e.default:n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!ze[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===l)i=bn;else if("interval"===l)i=vn;else if("categorical"===l){i=_n,r=Object.create(null);for(var c=0,h=e.stops;c<h.length;c+=1){var d=h[c];r[d[0]]=d[1]}o=typeof e.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'+l+'"');i=xn}if(s){for(var p={},f=[],g=0;g<e.stops.length;g++){var m=e.stops[g],y=m[0].zoom;void 0===p[y]&&(p[y]={zoom:y,type:e.type,property:e.property,default:e.default,stops:[]},f.push(y)),p[y].stops.push([m[0].value,m[1]])}for(var _=[],v=0,b=f;v<b.length;v+=1){var x=b[v];_.push([p[x].zoom,t(p[x],n)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:Ne.interpolationFactor.bind(void 0,w),zoomStops:_.map((function(t){return t[0]})),evaluate:function(t,i){var r=t.zoom;return bn({stops:_,base:e.base},n,r).evaluate(r,i)}}}if(u){var C="exponential"===l?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:C,interpolationFactor:Ne.interpolationFactor.bind(void 0,C),zoomStops:e.stops.map((function(t){return t[0]})),evaluate:function(t){return i(e,n,t.zoom,r,o)}}}return{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?yn(e.default,n.default):i(e,n,s,r,o)}}}(this._parameters,this._specification))};function Sn(t){var e=t.key,n=t.value,i=t.valueSpec||{},r=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],u=fn(n);if("object"!==u)return[new Et(e,n,"object expected, "+u+" found")];for(var l in n){var c=l.split(".")[0],h=i[c]||i["*"],d=void 0;if(r[c])d=r[c];else if(i[c])d=ti;else if(r["*"])d=r["*"];else{if(!i["*"]){s.push(new Et(e,n[l],'unknown property "'+l+'"'));continue}d=ti}s=s.concat(d({key:(e?e+".":e)+l,value:n[l],valueSpec:h,style:o,styleSpec:a,object:n,objectKey:l},n))}for(var p in i)r[p]||i[p].required&&void 0===i[p].default&&void 0===n[p]&&s.push(new Et(e,n,'missing required property "'+p+'"'));return s}function Tn(t){var e=t.value,n=t.valueSpec,i=t.style,r=t.styleSpec,o=t.key,a=t.arrayElementValidator||ti;if("array"!==fn(e))return[new Et(o,e,"array expected, "+fn(e)+" found")];if(n.length&&e.length!==n.length)return[new Et(o,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new Et(o,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var s={type:n.value,values:n.values};r.$version<7&&(s.function=n.function),"object"===fn(n.value)&&(s=n.value);for(var u=[],l=0;l<e.length;l++)u=u.concat(a({array:e,arrayIndex:l,value:e[l],valueSpec:s,style:i,styleSpec:r,key:o+"["+l+"]"}));return u}function An(t){var e=t.key,n=t.value,i=t.valueSpec,r=fn(n);return"number"===r&&n!=n&&(r="NaN"),"number"!==r?[new Et(e,n,"number expected, "+r+" found")]:"minimum"in i&&n<i.minimum?[new Et(e,n,n+" is less than the minimum value "+i.minimum)]:"maximum"in i&&n>i.maximum?[new Et(e,n,n+" is greater than the maximum value "+i.maximum)]:[]}function In(t){var e,n,i,r=t.valueSpec,o=At(t.value.type),a={},s="categorical"!==o&&void 0===t.value.property,u=!s,l="array"===fn(t.value.stops)&&"array"===fn(t.value.stops[0])&&"object"===fn(t.value.stops[0][0]),c=Sn({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new Et(t.key,t.value,'identity function may not have a "stops" property')];var e=[],n=t.value;return e=e.concat(Tn({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===fn(n)&&0===n.length&&e.push(new Et(t.key,n,"array must have at least one stop")),e},default:function(t){return ti({key:t.key,value:t.value,valueSpec:r,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&s&&c.push(new Et(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||c.push(new Et(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!pn(t.valueSpec)&&c.push(new Et(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(u&&!hn(t.valueSpec)?c.push(new Et(t.key,t.value,"property functions not supported")):s&&!dn(t.valueSpec)&&c.push(new Et(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!l||void 0!==t.value.property||c.push(new Et(t.key,t.value,'"property" property is required')),c;function h(t){var e=[],o=t.value,s=t.key;if("array"!==fn(o))return[new Et(s,o,"array expected, "+fn(o)+" found")];if(2!==o.length)return[new Et(s,o,"array length 2 expected, length "+o.length+" found")];if(l){if("object"!==fn(o[0]))return[new Et(s,o,"object expected, "+fn(o[0])+" found")];if(void 0===o[0].zoom)return[new Et(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new Et(s,o,"object stop key must have value")];if(i&&i>At(o[0].zoom))return[new Et(s,o[0].zoom,"stop zoom values must appear in ascending order")];At(o[0].zoom)!==i&&(i=At(o[0].zoom),n=void 0,a={}),e=e.concat(Sn({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:An,value:d}}))}else e=e.concat(d({key:s+"[0]",value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return Cn(It(o[1]))?e.concat([new Et(s+"[1]",o[1],"expressions are not allowed in function stops.")]):e.concat(ti({key:s+"[1]",value:o[1],valueSpec:r,style:t.style,styleSpec:t.styleSpec}))}function d(t,i){var s=fn(t.value),u=At(t.value),l=null!==t.value?t.value:i;if(e){if(s!==e)return[new Et(t.key,l,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Et(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var c="number expected, "+s+" found";return hn(r)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Et(t.key,l,c)]}return"categorical"!==o||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==o&&"number"===s&&void 0!==n&&u<n?[new Et(t.key,l,"stop domain values must appear in ascending order")]:(n=u,"categorical"===o&&u in a?[new Et(t.key,l,"stop domain values must be unique")]:(a[u]=!0,[])):[new Et(t.key,l,"integer expected, found "+u)]}}function Dn(t){var e=("property"===t.expressionContext?kn:Pn)(It(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new Et(""+t.key+e.key,t.value,e.message)}));var n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==n.possibleOutputs().indexOf(void 0))return[new Et(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!ye(n))return[new Et(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!ye(n))return[new Et(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!_e(n,["zoom","feature-state"]))return[new Et(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!me(n))return[new Et(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Rn(t){var e=t.key,n=t.value,i=t.valueSpec,r=[];return Array.isArray(i.values)?-1===i.values.indexOf(At(n))&&r.push(new Et(e,n,"expected one of ["+i.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(i.values).indexOf(At(n))&&r.push(new Et(e,n,"expected one of ["+Object.keys(i.values).join(", ")+"], "+JSON.stringify(n)+" found")),r}function Fn(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&Array.isArray(t[2]);case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var i=n[e];if(!Fn(i)&&"boolean"!=typeof i)return!1}return!0;default:return!0}}En.deserialize=function(t){return new En(t._parameters,t._specification)},En.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var Ln={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function zn(t){if(null==t)return function(){return!0};Fn(t)||(t=Bn(t));var e=Pn(t,Ln);if("error"===e.result)throw new Error(e.value.map((function(t){return t.key+": "+t.message})).join(", "));return function(t,n){return e.value.evaluate(t,n)}}function Nn(t,e){return t<e?-1:t>e?1:0}function Bn(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?Vn(t[1],t[2],"=="):"!="===n?qn(Vn(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?Vn(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(Bn))):"all"===n?["all"].concat(t.slice(1).map(Bn)):"none"===n?["all"].concat(t.slice(1).map(Bn).map(qn)):"in"===n?Un(t[1],t.slice(2)):"!in"===n?qn(Un(t[1],t.slice(2))):"has"===n?jn(t[1]):"!has"!==n||qn(jn(t[1]))}function Vn(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function Un(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return typeof t!=typeof e[0]}))?["filter-in-large",t,["literal",e.sort(Nn)]]:["filter-in-small",t,["literal",e]]}}function jn(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function qn(t){return["!",t]}function Gn(t){return Fn(It(t.value))?Dn(Tt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,i=e.key;if("array"!==fn(n))return[new Et(i,n,"array expected, "+fn(n)+" found")];var r,o=e.styleSpec,a=[];if(n.length<1)return[new Et(i,n,"filter array must have at least 1 element")];switch(a=a.concat(Rn({key:i+"[0]",value:n[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),At(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===At(n[1])&&a.push(new Et(i,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new Et(i,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(r=fn(n[1]))&&a.push(new Et(i+"[1]",n[1],"string expected, "+r+" found"));for(var s=2;s<n.length;s++)r=fn(n[s]),"$type"===At(n[1])?a=a.concat(Rn({key:i+"["+s+"]",value:n[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&a.push(new Et(i+"["+s+"]",n[s],"string, number, or boolean expected, "+r+" found"));break;case"any":case"all":case"none":for(var u=1;u<n.length;u++)a=a.concat(t({key:i+"["+u+"]",value:n[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":r=fn(n[1]),2!==n.length?a.push(new Et(i,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==r&&a.push(new Et(i+"[1]",n[1],"string expected, "+r+" found"))}return a}(t)}function Hn(t,e){var n=t.key,i=t.style,r=t.styleSpec,o=t.value,a=t.objectKey,s=r[e+"_"+t.layerType];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return ti({key:n,value:o,valueSpec:r.transition,style:i,styleSpec:r});var l,c=t.valueSpec||s[a];if(!c)return[new Et(n,o,'unknown property "'+a+'"')];if("string"===fn(o)&&hn(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(o)))return[new Et(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var h=[];return"symbol"===t.layerType&&("text-field"===a&&i&&!i.glyphs&&h.push(new Et(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&gn(It(o))&&"identity"===At(o.type)&&h.push(new Et(n,o,'"text-font" does not support identity functions'))),h.concat(ti({key:t.key,value:o,valueSpec:c,style:i,styleSpec:r,expressionContext:"property",propertyType:e,propertyKey:a}))}function Zn(t){return Hn(t,"paint")}function Wn(t){return Hn(t,"layout")}function Kn(t){var e=[],n=t.value,i=t.key,r=t.style,o=t.styleSpec;n.type||n.ref||e.push(new Et(i,n,'either "type" or "ref" is required'));var a,s=At(n.type),u=At(n.ref);if(n.id)for(var l=At(n.id),c=0;c<t.arrayIndex;c++){var h=r.layers[c];At(h.id)===l&&e.push(new Et(i,n.id,'duplicate layer id "'+n.id+'", previously used at line '+h.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(t){t in n&&e.push(new Et(i,n[t],'"'+t+'" is prohibited for ref layers'))})),r.layers.forEach((function(t){At(t.id)===u&&(a=t)})),a?a.ref?e.push(new Et(i,n.ref,"ref cannot reference another ref layer")):s=At(a.type):e.push(new Et(i,n.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(n.source){var d=r.sources&&r.sources[n.source],p=d&&At(d.type);d?"vector"===p&&"raster"===s?e.push(new Et(i,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===p&&"raster"!==s?e.push(new Et(i,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==p||n["source-layer"]?"raster-dem"===p&&"hillshade"!==s?e.push(new Et(i,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===p&&d.lineMetrics||e.push(new Et(i,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new Et(i,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new Et(i,n.source,'source "'+n.source+'" not found'))}else e.push(new Et(i,n,'missing required property "source"'));return e=e.concat(Sn({key:i,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ti({key:i+".type",value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:Gn,layout:function(t){return Sn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Wn(Tt({layerType:s},t))}}})},paint:function(t){return Sn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Zn(Tt({layerType:s},t))}}})}}}))}function Xn(t){var e=t.value,n=t.key,i=fn(e);return"string"!==i?[new Et(n,e,"string expected, "+i+" found")]:[]}var $n={promoteId:function(t){var e=t.key,n=t.value;if("string"===fn(n))return Xn({key:e,value:n});var i=[];for(var r in n)i.push.apply(i,Xn({key:e+"."+r,value:n[r]}));return i}};function Yn(t){var e=t.value,n=t.key,i=t.styleSpec,r=t.style;if(!e.type)return[new Et(n,e,'"type" is required')];var o,a=At(e.type);switch(a){case"vector":case"raster":case"raster-dem":return Sn({key:n,value:e,valueSpec:i["source_"+a.replace("-","_")],style:t.style,styleSpec:i,objectElementValidators:$n});case"geojson":if(o=Sn({key:n,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i,objectElementValidators:$n}),e.cluster)for(var s in e.clusterProperties){var u=e.clusterProperties[s],l=u[0],c="string"==typeof l?[l,["accumulated"],["get",s]]:l;o.push.apply(o,Dn({key:n+"."+s+".map",value:u[1],expressionContext:"cluster-map"})),o.push.apply(o,Dn({key:n+"."+s+".reduce",value:c,expressionContext:"cluster-reduce"}))}return o;case"video":return Sn({key:n,value:e,valueSpec:i.source_video,style:r,styleSpec:i});case"image":return Sn({key:n,value:e,valueSpec:i.source_image,style:r,styleSpec:i});case"canvas":return[new Et(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Rn({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,styleSpec:i})}}function Qn(t){var e=t.value,n=t.styleSpec,i=n.light,r=t.style,o=[],a=fn(e);if(void 0===e)return o;if("object"!==a)return o.concat([new Et("light",e,"object expected, "+a+" found")]);for(var s in e){var u=s.match(/^(.*)-transition$/);o=o.concat(u&&i[u[1]]&&i[u[1]].transition?ti({key:s,value:e[s],valueSpec:n.transition,style:r,styleSpec:n}):i[s]?ti({key:s,value:e[s],valueSpec:i[s],style:r,styleSpec:n}):[new Et(s,e[s],'unknown property "'+s+'"')])}return o}var Jn={"*":function(){return[]},array:Tn,boolean:function(t){var e=t.value,n=t.key,i=fn(e);return"boolean"!==i?[new Et(n,e,"boolean expected, "+i+" found")]:[]},number:An,color:function(t){var e=t.key,n=t.value,i=fn(n);return"string"!==i?[new Et(e,n,"color expected, "+i+" found")]:null===Xt(n)?[new Et(e,n,'color expected, "'+n+'" found')]:[]},constants:St,enum:Rn,filter:Gn,function:In,layer:Kn,object:Sn,source:Yn,light:Qn,string:Xn,formatted:function(t){return 0===Xn(t).length?[]:Dn(t)},resolvedImage:function(t){return 0===Xn(t).length?[]:Dn(t)}};function ti(t){var e=t.value,n=t.valueSpec,i=t.styleSpec;return n.expression&&gn(At(e))?In(t):n.expression&&Cn(It(e))?Dn(t):n.type&&Jn[n.type]?Jn[n.type](t):Sn(Tt({},t,{valueSpec:n.type?i[n.type]:n}))}function ei(t){var e=t.value,n=t.key,i=Xn(t);return i.length||(-1===e.indexOf("{fontstack}")&&i.push(new Et(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&i.push(new Et(n,e,'"glyphs" url must include a "{range}" token'))),i}function ni(t,e){void 0===e&&(e=kt);var n=[];return n=n.concat(ti({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:ei,"*":function(){return[]}}})),t.constants&&(n=n.concat(St({key:"constants",value:t.constants,style:t,styleSpec:e}))),ii(n)}function ii(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function ri(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return ii(t.apply(this,e))}}ni.source=ri(Yn),ni.light=ri(Qn),ni.layer=ri(Kn),ni.filter=ri(Gn),ni.paintProperty=ri(Zn),ni.layoutProperty=ri(Wn);var oi=ni,ai=oi.light,si=oi.paintProperty,ui=oi.layoutProperty;function li(t,e){var n=!1;if(e&&e.length)for(var i=0,r=e;i<r.length;i+=1)t.fire(new Mt(new Error(r[i].message))),n=!0;return n}var ci=hi;function hi(t,e,n){var i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var r=new Int32Array(this.arrayBuffer);t=r[0],this.d=(e=r[1])+2*(n=r[2]);for(var o=0;o<this.d*this.d;o++){var a=r[3+o],s=r[3+o+1];i.push(a===s?null:r.subarray(a,s))}var u=r[3+i.length+1];this.keys=r.subarray(r[3+i.length],u),this.bboxes=r.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var l=0;l<this.d*this.d;l++)i.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var c=n/e*t;this.min=-c,this.max=t+c}hi.prototype.insert=function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},hi.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},hi.prototype._insertCell=function(t,e,n,i,r,o){this.cells[r].push(o)},hi.prototype.query=function(t,e,n,i,r){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=n&&a<=i&&!r)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,n,i,this._queryCell,s,{},r),s},hi.prototype._queryCell=function(t,e,n,i,r,o,a,s){var u=this.cells[r];if(null!==u)for(var l=this.keys,c=this.bboxes,h=0;h<u.length;h++){var d=u[h];if(void 0===a[d]){var p=4*d;(s?s(c[p+0],c[p+1],c[p+2],c[p+3]):t<=c[p+2]&&e<=c[p+3]&&n>=c[p+0]&&i>=c[p+1])?(a[d]=!0,o.push(l[d])):a[d]=!1}}},hi.prototype._forEachCell=function(t,e,n,i,r,o,a,s){for(var u=this._convertToCellCoord(t),l=this._convertToCellCoord(e),c=this._convertToCellCoord(n),h=this._convertToCellCoord(i),d=u;d<=c;d++)for(var p=l;p<=h;p++){var f=this.d*p+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(p),this._convertFromCellCoord(d+1),this._convertFromCellCoord(p+1)))&&r.call(this,t,e,n,i,f,o,a,s))return}},hi.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},hi.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},hi.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,n=0,i=0;i<this.cells.length;i++)n+=this.cells[i].length;var r=new Int32Array(e+n+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];r[3+a]=o,r.set(s,o),o+=s.length}return r[3+t.length]=o,r.set(this.keys,o),r[3+t.length+1]=o+=this.keys.length,r.set(this.bboxes,o),o+=this.bboxes.length,r.buffer};var di=self.ImageData,pi=self.ImageBitmap,fi={};function gi(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),fi[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}for(var mi in gi("Object",Object),ci.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},ci.deserialize=function(t){return new ci(t.buffer)},gi("Grid",ci),gi("Color",$t),gi("Error",Error),gi("ResolvedImage",te),gi("StylePropertyFunction",En),gi("StyleExpression",wn,{omit:["_evaluator"]}),gi("ZoomDependentExpression",On),gi("ZoomConstantExpression",Mn),gi("CompoundExpression",fe,{omit:["_evaluate"]}),rn)rn[mi]._classRegistryKey||gi("Expression_"+mi,rn[mi]);function yi(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function _i(t){return pi&&t instanceof pi}function vi(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(yi(t)||_i(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof di)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var i=[],r=0,o=t;r<o.length;r+=1)i.push(vi(o[r],e));return i}if("object"==typeof t){var a=t.constructor,s=a._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var u=a.serialize?a.serialize(t,e):{};if(!a.serialize){for(var l in t)if(t.hasOwnProperty(l)&&!(fi[s].omit.indexOf(l)>=0)){var c=t[l];u[l]=fi[s].shallow.indexOf(l)>=0?c:vi(c,e)}t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(u.$name=s),u}throw new Error("can't serialize object of type "+typeof t)}function bi(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||yi(t)||_i(t)||ArrayBuffer.isView(t)||t instanceof di)return t;if(Array.isArray(t))return t.map(bi);if("object"==typeof t){var e=t.$name||"Object",n=fi[e].klass;if(!n)throw new Error("can't deserialize unregistered class "+e);if(n.deserialize)return n.deserialize(t);for(var i=Object.create(n.prototype),r=0,o=Object.keys(t);r<o.length;r+=1){var a=o[r];if("$name"!==a){var s=t[a];i[a]=fi[e].shallow.indexOf(a)>=0?s:bi(s)}}return i}throw new Error("can't deserialize object of type "+typeof t)}var xi=function(){this.first=!0};xi.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))};var wi={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function Ci(t){for(var e=0,n=t;e<n.length;e+=1)if(Mi(n[e].charCodeAt(0)))return!0;return!1}function Pi(t){return!(wi.Arabic(t)||wi["Arabic Supplement"](t)||wi["Arabic Extended-A"](t)||wi["Arabic Presentation Forms-A"](t)||wi["Arabic Presentation Forms-B"](t))}function Mi(t){return!(746!==t&&747!==t&&(t<4352||!(wi["Bopomofo Extended"](t)||wi.Bopomofo(t)||wi["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||wi["CJK Compatibility Ideographs"](t)||wi["CJK Compatibility"](t)||wi["CJK Radicals Supplement"](t)||wi["CJK Strokes"](t)||!(!wi["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||wi["CJK Unified Ideographs Extension A"](t)||wi["CJK Unified Ideographs"](t)||wi["Enclosed CJK Letters and Months"](t)||wi["Hangul Compatibility Jamo"](t)||wi["Hangul Jamo Extended-A"](t)||wi["Hangul Jamo Extended-B"](t)||wi["Hangul Jamo"](t)||wi["Hangul Syllables"](t)||wi.Hiragana(t)||wi["Ideographic Description Characters"](t)||wi.Kanbun(t)||wi["Kangxi Radicals"](t)||wi["Katakana Phonetic Extensions"](t)||wi.Katakana(t)&&12540!==t||!(!wi["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!wi["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||wi["Unified Canadian Aboriginal Syllabics"](t)||wi["Unified Canadian Aboriginal Syllabics Extended"](t)||wi["Vertical Forms"](t)||wi["Yijing Hexagram Symbols"](t)||wi["Yi Syllables"](t)||wi["Yi Radicals"](t))))}function Oi(t){return!(Mi(t)||function(t){return!!(wi["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||wi["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||wi["Letterlike Symbols"](t)||wi["Number Forms"](t)||wi["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||wi["Control Pictures"](t)&&9251!==t||wi["Optical Character Recognition"](t)||wi["Enclosed Alphanumerics"](t)||wi["Geometric Shapes"](t)||wi["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||wi["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||wi["CJK Symbols and Punctuation"](t)||wi.Katakana(t)||wi["Private Use Area"](t)||wi["CJK Compatibility Forms"](t)||wi["Small Form Variants"](t)||wi["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function ki(t){return t>=1424&&t<=2303||wi["Arabic Presentation Forms-A"](t)||wi["Arabic Presentation Forms-B"](t)}function Ei(t,e){return!(!e&&ki(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||wi.Khmer(t))}function Si(t){for(var e=0,n=t;e<n.length;e+=1)if(ki(n[e].charCodeAt(0)))return!0;return!1}var Ti="deferred",Ai="loading",Ii="loaded",Di=null,Ri="unavailable",Fi=null,Li=function(t){Di&&Di(t)};function zi(){Ni.fire(new Pt("pluginStateChange",{pluginStatus:Ri,pluginURL:Fi}))}var Ni=new Ot,Bi=function(){return Ri},Vi=function(){if(Ri!==Ti||!Fi)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ri=Ai,zi(),Fi&&vt({url:Fi},(function(t){t?Li(t):(Ri=Ii,zi())}))},Ui={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ri===Ii||null!=Ui.applyArabicShaping},isLoading:function(){return Ri===Ai},setState:function(t){Ri=t.pluginStatus,Fi=t.pluginURL},isParsed:function(){return null!=Ui.applyArabicShaping&&null!=Ui.processBidirectionalText&&null!=Ui.processStyledBidirectionalText},getPluginURL:function(){return Fi}},ji=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new xi,this.transition={})};ji.prototype.isSupportedScript=function(t){return function(t,e){for(var n=0,i=t;n<i.length;n+=1)if(!Ei(i[n].charCodeAt(0),e))return!1;return!0}(t,Ui.isLoaded())},ji.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ji.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}};var qi=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(gn(t))return new En(t,e);if(Cn(t)){var n=kn(t,e);if("error"===n.result)throw new Error(n.value.map((function(t){return t.key+": "+t.message})).join(", "));return n.value}var i=t;return"string"==typeof t&&"color"===e.type&&(i=$t.parse(t)),{kind:"constant",evaluate:function(){return i}}}(void 0===e?t.specification.default:e,t.specification)};qi.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},qi.prototype.possiblyEvaluate=function(t,e){return this.property.possiblyEvaluate(this,t,e)};var Gi=function(t){this.property=t,this.value=new qi(t,void 0)};Gi.prototype.transitioned=function(t,e){return new Zi(this.property,this.value,e,c({},t.transition,this.transition),t.now)},Gi.prototype.untransitioned=function(){return new Zi(this.property,this.value,null,{},0)};var Hi=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};Hi.prototype.getValue=function(t){return v(this._values[t].value.value)},Hi.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Gi(this._values[t].property)),this._values[t].value=new qi(this._values[t].property,null===e?void 0:v(e))},Hi.prototype.getTransition=function(t){return v(this._values[t].transition)},Hi.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Gi(this._values[t].property)),this._values[t].transition=v(e)||void 0},Hi.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e],r=this.getValue(i);void 0!==r&&(t[i]=r);var o=this.getTransition(i);void 0!==o&&(t[i+"-transition"]=o)}return t},Hi.prototype.transitioned=function(t,e){for(var n=new Wi(this._properties),i=0,r=Object.keys(this._values);i<r.length;i+=1){var o=r[i];n._values[o]=this._values[o].transitioned(t,e._values[o])}return n},Hi.prototype.untransitioned=function(){for(var t=new Wi(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e];t._values[i]=this._values[i].untransitioned()}return t};var Zi=function(t,e,n,i,r){this.property=t,this.value=e,this.begin=r+i.delay||0,this.end=this.begin+i.duration||0,t.specification.transition&&(i.delay||i.duration)&&(this.prior=n)};Zi.prototype.possiblyEvaluate=function(t,e){var n=t.now||0,i=this.value.possiblyEvaluate(t,e),r=this.prior;if(r){if(n>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(n<this.begin)return r.possiblyEvaluate(t,e);var o=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(t,e),i,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(o))}return i};var Wi=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};Wi.prototype.possiblyEvaluate=function(t,e){for(var n=new $i(this._properties),i=0,r=Object.keys(this._values);i<r.length;i+=1){var o=r[i];n._values[o]=this._values[o].possiblyEvaluate(t,e)}return n},Wi.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var Ki=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};Ki.prototype.getValue=function(t){return v(this._values[t].value)},Ki.prototype.setValue=function(t,e){this._values[t]=new qi(this._values[t].property,null===e?void 0:v(e))},Ki.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e],r=this.getValue(i);void 0!==r&&(t[i]=r)}return t},Ki.prototype.possiblyEvaluate=function(t,e){for(var n=new $i(this._properties),i=0,r=Object.keys(this._values);i<r.length;i+=1){var o=r[i];n._values[o]=this._values[o].possiblyEvaluate(t,e)}return n};var Xi=function(t,e,n){this.property=t,this.value=e,this.parameters=n};Xi.prototype.isConstant=function(){return"constant"===this.value.kind},Xi.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},Xi.prototype.evaluate=function(t,e,n){return this.property.evaluate(this.value,this.parameters,t,e,n)};var $i=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};$i.prototype.get=function(t){return this._values[t]};var Yi=function(t){this.specification=t};Yi.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},Yi.prototype.interpolate=function(t,e,n){var i=Pe[this.specification.type];return i?i(t,e,n):t};var Qi=function(t,e){this.specification=t,this.overrides=e};Qi.prototype.possiblyEvaluate=function(t,e,n){return new Xi(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n)}:t.expression,e)},Qi.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Xi(this,{kind:"constant",value:void 0},t.parameters);var i=Pe[this.specification.type];return i?new Xi(this,{kind:"constant",value:i(t.value.value,e.value.value,n)},t.parameters):t},Qi.prototype.evaluate=function(t,e,n,i,r){return"constant"===t.kind?t.value:t.evaluate(e,n,i,r)};var Ji=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(t,e,n){if(void 0===t.value)return new Xi(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},n),r="resolvedImage"===t.property.specification.type&&"string"!=typeof i?i.name:i,o=this._calculate(r,r,r,e);return new Xi(this,{kind:"constant",value:o},e)}if("camera"===t.expression.kind){var a=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new Xi(this,{kind:"constant",value:a},e)}return new Xi(this,t.expression,e)},e.prototype.evaluate=function(t,e,n,i,r){if("source"===t.kind){var o=t.evaluate(e,n,i,r);return this._calculate(o,o,o,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,i),t.evaluate({zoom:Math.floor(e.zoom)},n,i),t.evaluate({zoom:Math.floor(e.zoom)+1},n,i),e):t.value},e.prototype._calculate=function(t,e,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},e.prototype.interpolate=function(t){return t},e}(Qi),tr=function(t){this.specification=t};tr.prototype.possiblyEvaluate=function(t,e,n){if(void 0!==t.value){if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},n);return this._calculate(i,i,i,e)}return this._calculate(t.expression.evaluate(new ji(Math.floor(e.zoom-1),e)),t.expression.evaluate(new ji(Math.floor(e.zoom),e)),t.expression.evaluate(new ji(Math.floor(e.zoom+1),e)),e)}},tr.prototype._calculate=function(t,e,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},tr.prototype.interpolate=function(t){return t};var er=function(t){this.specification=t};er.prototype.possiblyEvaluate=function(t,e,n){return!!t.expression.evaluate(e,null,{},n)},er.prototype.interpolate=function(){return!1};var nr=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var n=t[e];n.specification.overridable&&this.overridableProperties.push(e);var i=this.defaultPropertyValues[e]=new qi(n,void 0),r=this.defaultTransitionablePropertyValues[e]=new Gi(n);this.defaultTransitioningPropertyValues[e]=r.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=i.possiblyEvaluate({})}};gi("DataDrivenProperty",Qi),gi("DataConstantProperty",Yi),gi("CrossFadedDataDrivenProperty",Ji),gi("CrossFadedProperty",tr),gi("ColorRampProperty",er);var ir=function(t){function e(e,n){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter=function(){return!0},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),n.layout&&(this._unevaluatedLayout=new Ki(n.layout)),n.paint)){for(var i in this._transitionablePaint=new Hi(n.paint),e.paint)this.setPaintProperty(i,e.paint[i],{validate:!1});for(var r in e.layout)this.setLayoutProperty(r,e.layout[r],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,n){void 0===n&&(n={}),null!=e&&this._validate(ui,"layers."+this.id+".layout."+t,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)},e.prototype.getPaintProperty=function(t){return m(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,n){if(void 0===n&&(n={}),null!=e&&this._validate(si,"layers."+this.id+".paint."+t,t,e,n))return!1;if(m(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var i=this._transitionablePaint._values[t],r="cross-faded-data-driven"===i.property.specification["property-type"],o=i.value.isDataDriven(),a=i.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||o||r||this._handleOverridablePaintPropertyUpdate(t,a,s)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,n){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),_(t,(function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)}))},e.prototype._validate=function(t,e,n,i,r){return void 0===r&&(r={}),(!r||!1!==r.validate)&&li(this,t.call(oi,{key:e,layerType:this.type,objectKey:n,value:i,styleSpec:kt,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof Xi&&hn(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(Ot),rr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},or=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ar=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function sr(t,e){void 0===e&&(e=1);var n=0,i=0;return{members:t.map((function(t){var r=rr[t.type].BYTES_PER_ELEMENT,o=n=ur(n,Math.max(e,r)),a=t.components||1;return i=Math.max(i,r),n+=r*a,{name:t.name,type:t.type,components:a,offset:o}})),size:ur(n,Math.max(i,e)),alignment:e}}function ur(t,e){return Math.ceil(t/e)*e}ar.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},ar.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},ar.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},ar.prototype.clear=function(){this.length=0},ar.prototype.resize=function(t){this.reserve(t),this.length=t},ar.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},ar.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var lr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var i=2*t;return this.int16[i+0]=e,this.int16[i+1]=n,t},e}(ar);lr.prototype.bytesPerElement=4,gi("StructArrayLayout2i4",lr);var cr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)},e.prototype.emplace=function(t,e,n,i,r){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=i,this.int16[o+3]=r,t},e}(ar);cr.prototype.bytesPerElement=8,gi("StructArrayLayout4i8",cr);var hr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,i,r,o)},e.prototype.emplace=function(t,e,n,i,r,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=r,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(ar);hr.prototype.bytesPerElement=12,gi("StructArrayLayout2i4i12",hr);var dr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,i,r,o)},e.prototype.emplace=function(t,e,n,i,r,o,a){var s=4*t,u=8*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.uint8[u+4]=i,this.uint8[u+5]=r,this.uint8[u+6]=o,this.uint8[u+7]=a,t},e}(ar);dr.prototype.bytesPerElement=8,gi("StructArrayLayout2i4ub8",dr);var pr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o,a,s){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,n,i,r,o,a,s)},e.prototype.emplace=function(t,e,n,i,r,o,a,s,u){var l=8*t;return this.uint16[l+0]=e,this.uint16[l+1]=n,this.uint16[l+2]=i,this.uint16[l+3]=r,this.uint16[l+4]=o,this.uint16[l+5]=a,this.uint16[l+6]=s,this.uint16[l+7]=u,t},e}(ar);pr.prototype.bytesPerElement=16,gi("StructArrayLayout8ui16",pr);var fr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o,a,s,u,l,c,h){var d=this.length;return this.resize(d+1),this.emplace(d,t,e,n,i,r,o,a,s,u,l,c,h)},e.prototype.emplace=function(t,e,n,i,r,o,a,s,u,l,c,h,d){var p=12*t;return this.int16[p+0]=e,this.int16[p+1]=n,this.int16[p+2]=i,this.int16[p+3]=r,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=u,this.int16[p+8]=l,this.int16[p+9]=c,this.int16[p+10]=h,this.int16[p+11]=d,t},e}(ar);fr.prototype.bytesPerElement=24,gi("StructArrayLayout4i4ui4i24",fr);var gr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)},e.prototype.emplace=function(t,e,n,i){var r=3*t;return this.float32[r+0]=e,this.float32[r+1]=n,this.float32[r+2]=i,t},e}(ar);gr.prototype.bytesPerElement=12,gi("StructArrayLayout3f12",gr);var mr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(ar);mr.prototype.bytesPerElement=4,gi("StructArrayLayout1ul4",mr);var yr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o,a,s,u,l,c){var h=this.length;return this.resize(h+1),this.emplace(h,t,e,n,i,r,o,a,s,u,l,c)},e.prototype.emplace=function(t,e,n,i,r,o,a,s,u,l,c,h){var d=12*t,p=6*t;return this.int16[d+0]=e,this.int16[d+1]=n,this.int16[d+2]=i,this.int16[d+3]=r,this.int16[d+4]=o,this.int16[d+5]=a,this.uint32[p+3]=s,this.uint16[d+8]=u,this.uint16[d+9]=l,this.int16[d+10]=c,this.int16[d+11]=h,t},e}(ar);yr.prototype.bytesPerElement=24,gi("StructArrayLayout6i1ul2ui2i24",yr);var _r=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,i,r,o)},e.prototype.emplace=function(t,e,n,i,r,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=r,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(ar);_r.prototype.bytesPerElement=12,gi("StructArrayLayout2i2i2i12",_r);var vr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)},e.prototype.emplace=function(t,e,n,i,r){var o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=n,this.float32[a+1]=i,this.float32[a+2]=r,t},e}(ar);vr.prototype.bytesPerElement=12,gi("StructArrayLayout2ub2f12",vr);var br=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o,a,s,u,l,c,h,d,p,f,g,m){var y=this.length;return this.resize(y+1),this.emplace(y,t,e,n,i,r,o,a,s,u,l,c,h,d,p,f,g,m)},e.prototype.emplace=function(t,e,n,i,r,o,a,s,u,l,c,h,d,p,f,g,m,y){var _=24*t,v=12*t,b=48*t;return this.int16[_+0]=e,this.int16[_+1]=n,this.uint16[_+2]=i,this.uint16[_+3]=r,this.uint32[v+2]=o,this.uint32[v+3]=a,this.uint32[v+4]=s,this.uint16[_+10]=u,this.uint16[_+11]=l,this.uint16[_+12]=c,this.float32[v+7]=h,this.float32[v+8]=d,this.uint8[b+36]=p,this.uint8[b+37]=f,this.uint8[b+38]=g,this.uint32[v+10]=m,this.int16[_+22]=y,t},e}(ar);br.prototype.bytesPerElement=48,gi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",br);var xr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o,a,s,u,l,c,h,d,p,f,g,m,y,_,v,b,x,w,C,P,M){var O=this.length;return this.resize(O+1),this.emplace(O,t,e,n,i,r,o,a,s,u,l,c,h,d,p,f,g,m,y,_,v,b,x,w,C,P,M)},e.prototype.emplace=function(t,e,n,i,r,o,a,s,u,l,c,h,d,p,f,g,m,y,_,v,b,x,w,C,P,M,O){var k=30*t,E=15*t;return this.int16[k+0]=e,this.int16[k+1]=n,this.int16[k+2]=i,this.int16[k+3]=r,this.int16[k+4]=o,this.int16[k+5]=a,this.int16[k+6]=s,this.int16[k+7]=u,this.uint16[k+8]=l,this.uint16[k+9]=c,this.uint16[k+10]=h,this.uint16[k+11]=d,this.uint16[k+12]=p,this.uint16[k+13]=f,this.uint16[k+14]=g,this.uint16[k+15]=m,this.uint16[k+16]=y,this.uint16[k+17]=_,this.uint16[k+18]=v,this.uint16[k+19]=b,this.uint16[k+20]=x,this.uint16[k+21]=w,this.uint32[E+11]=C,this.float32[E+12]=P,this.float32[E+13]=M,this.float32[E+14]=O,t},e}(ar);xr.prototype.bytesPerElement=60,gi("StructArrayLayout8i14ui1ul3f60",xr);var wr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(ar);wr.prototype.bytesPerElement=4,gi("StructArrayLayout1f4",wr);var Cr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)},e.prototype.emplace=function(t,e,n,i){var r=3*t;return this.int16[r+0]=e,this.int16[r+1]=n,this.int16[r+2]=i,t},e}(ar);Cr.prototype.bytesPerElement=6,gi("StructArrayLayout3i6",Cr);var Pr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)},e.prototype.emplace=function(t,e,n,i){var r=4*t;return this.uint32[2*t+0]=e,this.uint16[r+2]=n,this.uint16[r+3]=i,t},e}(ar);Pr.prototype.bytesPerElement=8,gi("StructArrayLayout1ul2ui8",Pr);var Mr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)},e.prototype.emplace=function(t,e,n,i){var r=3*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,this.uint16[r+2]=i,t},e}(ar);Mr.prototype.bytesPerElement=6,gi("StructArrayLayout3ui6",Mr);var Or=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var i=2*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,t},e}(ar);Or.prototype.bytesPerElement=4,gi("StructArrayLayout2ui4",Or);var kr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(ar);kr.prototype.bytesPerElement=2,gi("StructArrayLayout1ui2",kr);var Er=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var i=2*t;return this.float32[i+0]=e,this.float32[i+1]=n,t},e}(ar);Er.prototype.bytesPerElement=8,gi("StructArrayLayout2f8",Er);var Sr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)},e.prototype.emplace=function(t,e,n,i,r){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=i,this.float32[o+3]=r,t},e}(ar);Sr.prototype.bytesPerElement=16,gi("StructArrayLayout4f16",Sr);var Tr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},n.anchorPoint.get=function(){return new r(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(or);Tr.prototype.size=24;var Ar=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Tr(this,t)},e}(yr);gi("CollisionBoxArray",Ar);var Ir=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},n.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},n.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},n.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},n.associatedIconIndex.set=function(t){this._structArray.int16[this._pos2+22]=t},Object.defineProperties(e.prototype,n),e}(or);Ir.prototype.size=48;var Dr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Ir(this,t)},e}(br);gi("PlacedSymbolArray",Dr);var Rr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.rightJustifiedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+2]=t},n.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.centerJustifiedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+3]=t},n.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},n.leftJustifiedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+4]=t},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},n.verticalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+5]=t},n.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},n.placedIconSymbolIndex.set=function(t){this._structArray.int16[this._pos2+6]=t},n.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},n.verticalPlacedIconSymbolIndex.set=function(t){this._structArray.int16[this._pos2+7]=t},n.key.get=function(){return this._structArray.uint16[this._pos2+8]},n.key.set=function(t){this._structArray.uint16[this._pos2+8]=t},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.textBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},n.textBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+10]=t},n.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},n.verticalTextBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+11]=t},n.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},n.verticalTextBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+12]=t},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},n.iconBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+13]=t},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},n.iconBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+14]=t},n.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},n.verticalIconBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+15]=t},n.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},n.verticalIconBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+16]=t},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},n.featureIndex.set=function(t){this._structArray.uint16[this._pos2+17]=t},n.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},n.numHorizontalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+18]=t},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},n.numVerticalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+19]=t},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},n.numIconVertices.set=function(t){this._structArray.uint16[this._pos2+20]=t},n.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},n.numVerticalIconVertices.set=function(t){this._structArray.uint16[this._pos2+21]=t},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+11]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+11]=t},n.textBoxScale.get=function(){return this._structArray.float32[this._pos4+12]},n.textBoxScale.set=function(t){this._structArray.float32[this._pos4+12]=t},n.textOffset0.get=function(){return this._structArray.float32[this._pos4+13]},n.textOffset0.set=function(t){this._structArray.float32[this._pos4+13]=t},n.textOffset1.get=function(){return this._structArray.float32[this._pos4+14]},n.textOffset1.set=function(t){this._structArray.float32[this._pos4+14]=t},Object.defineProperties(e.prototype,n),e}(or);Rr.prototype.size=60;var Fr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Rr(this,t)},e}(xr);gi("SymbolInstanceArray",Fr);var Lr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={offsetX:{configurable:!0}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,n),e}(or);Lr.prototype.size=4;var zr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return new Lr(this,t)},e}(wr);gi("GlyphOffsetArray",zr);var Nr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(t){this._structArray.int16[this._pos2+0]=t},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(t){this._structArray.int16[this._pos2+1]=t},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,n),e}(or);Nr.prototype.size=6;var Br=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return new Nr(this,t)},e}(Cr);gi("SymbolLineVertexArray",Br);var Vr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,n),e}(or);Vr.prototype.size=8;var Ur=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Vr(this,t)},e}(Pr);gi("FeatureIndexArray",Ur);var jr=sr([{name:"a_pos",components:2,type:"Int16"}],4).members,qr=function(t){void 0===t&&(t=[]),this.segments=t};function Gr(t,e){return 256*(t=u(Math.floor(t),0,255))+u(Math.floor(e),0,255)}qr.prototype.prepareSegment=function(t,e,n,i){var r=this.segments[this.segments.length-1];return t>qr.MAX_VERTEX_ARRAY_LENGTH&&x("Max vertices per segment is "+qr.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!r||r.vertexLength+t>qr.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==i)&&(r={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==i&&(r.sortKey=i),this.segments.push(r)),r},qr.prototype.get=function(){return this.segments},qr.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var i in n.vaos)n.vaos[i].destroy()}},qr.simpleSegment=function(t,e,n,i){return new qr([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:i,vaos:{},sortKey:0}])},qr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,gi("SegmentVector",qr);var Hr=e((function(t){t.exports=function(t,e){var n,i,r,o,a,s,u,l;for(i=t.length-(n=3&t.length),r=e,a=3432918353,s=461845907,l=0;l<i;)u=255&t.charCodeAt(l)|(255&t.charCodeAt(++l))<<8|(255&t.charCodeAt(++l))<<16|(255&t.charCodeAt(++l))<<24,++l,r=27492+(65535&(o=5*(65535&(r=(r^=u=(65535&(u=(u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&t.charCodeAt(l+2))<<16;case 2:u^=(255&t.charCodeAt(l+1))<<8;case 1:r^=u=(65535&(u=(u=(65535&(u^=255&t.charCodeAt(l)))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}})),Zr=e((function(t){t.exports=function(t,e){for(var n,i=t.length,r=e^i,o=0;i>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),i-=4,++o;switch(i){case 3:r^=(255&t.charCodeAt(o+2))<<16;case 2:r^=(255&t.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}})),Wr=Hr,Kr=Zr;Wr.murmur3=Hr,Wr.murmur2=Kr;var Xr=function(){this.ids=[],this.positions=[],this.indexed=!1};Xr.prototype.add=function(t,e,n,i){this.ids.push(Yr(t)),this.positions.push(e,n,i)},Xr.prototype.getPositions=function(t){for(var e=Yr(t),n=0,i=this.ids.length-1;n<i;){var r=n+i>>1;this.ids[r]>=e?i=r:n=r+1}for(var o=[];this.ids[n]===e;)o.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return o},Xr.serialize=function(t,e){var n=new Float64Array(t.ids),i=new Uint32Array(t.positions);return function t(e,n,i,r){if(!(i>=r)){for(var o=e[i+r>>1],a=i-1,s=r+1;;){do{a++}while(e[a]<o);do{s--}while(e[s]>o);if(a>=s)break;Qr(e,a,s),Qr(n,3*a,3*s),Qr(n,3*a+1,3*s+1),Qr(n,3*a+2,3*s+2)}t(e,n,i,s),t(e,n,s+1,r)}}(n,i,0,n.length-1),e&&e.push(n.buffer,i.buffer),{ids:n,positions:i}},Xr.deserialize=function(t){var e=new Xr;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var $r=Math.pow(2,53)-1;function Yr(t){var e=+t;return!isNaN(e)&&e<=$r?e:Wr(String(t))}function Qr(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}gi("FeaturePositionMap",Xr);var Jr=function(t,e){this.gl=t.gl,this.location=e},to=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(Jr),eo=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(Jr),no=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(Jr),io=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(Jr),ro=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(Jr),oo=function(t){function e(e,n){t.call(this,e,n),this.current=$t.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(Jr),ao=new Float32Array(16),so=function(t){function e(e,n){t.call(this,e,n),this.current=ao}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(Jr);function uo(t){return[Gr(255*t.r,255*t.g),Gr(255*t.b,255*t.a)]}var lo=function(t,e,n){this.value=t,this.uniformNames=e.map((function(t){return"u_"+t})),this.type=n};lo.prototype.setUniform=function(t,e,n){t.set(n.constantOr(this.value))},lo.prototype.getBinding=function(t,e){return"color"===this.type?new oo(t,e):new eo(t,e)};var co=function(t,e){this.uniformNames=e.map((function(t){return"u_"+t})),this.patternFrom=null,this.patternTo=null};co.prototype.setConstantPatternPositions=function(t,e){this.patternTo=t.tlbr,this.patternFrom=e.tlbr},co.prototype.setUniform=function(t,e,n,i){var r="u_pattern_to"===i?this.patternTo:"u_pattern_from"===i?this.patternFrom:null;r&&t.set(r)},co.prototype.getBinding=function(t,e){return new ro(t,e)};var ho=function(t,e,n,i){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0}})),this.paintVertexArray=new i};ho.prototype.populatePaintArray=function(t,e,n,i){var r=this.paintVertexArray.length,o=this.expression.evaluate(new ji(0),e,{},[],i);this.paintVertexArray.resize(t),this._setPaintValue(r,t,o)},ho.prototype.updatePaintArray=function(t,e,n,i){var r=this.expression.evaluate({zoom:0},n,i);this._setPaintValue(t,e,r)},ho.prototype._setPaintValue=function(t,e,n){if("color"===this.type)for(var i=uo(n),r=t;r<e;r++)this.paintVertexArray.emplace(r,i[0],i[1]);else{for(var o=t;o<e;o++)this.paintVertexArray.emplace(o,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}},ho.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ho.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var po=function(t,e,n,i,r,o){this.expression=t,this.uniformNames=e.map((function(t){return"u_"+t+"_t"})),this.type=n,this.useIntegerZoom=i,this.zoom=r,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0}})),this.paintVertexArray=new o};po.prototype.populatePaintArray=function(t,e,n,i){var r=this.expression.evaluate(new ji(this.zoom),e,{},[],i),o=this.expression.evaluate(new ji(this.zoom+1),e,{},[],i),a=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(a,t,r,o)},po.prototype.updatePaintArray=function(t,e,n,i){var r=this.expression.evaluate({zoom:this.zoom},n,i),o=this.expression.evaluate({zoom:this.zoom+1},n,i);this._setPaintValue(t,e,r,o)},po.prototype._setPaintValue=function(t,e,n,i){if("color"===this.type)for(var r=uo(n),o=uo(i),a=t;a<e;a++)this.paintVertexArray.emplace(a,r[0],r[1],o[0],o[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,n,i);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(i))}},po.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},po.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},po.prototype.setUniform=function(t,e){var n=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,i=u(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(i)},po.prototype.getBinding=function(t,e){return new eo(t,e)};var fo=function(t,e,n,i,r,o,a){this.expression=t,this.type=n,this.useIntegerZoom=i,this.zoom=r,this.layerId=a,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Uint16",components:4,offset:0}})),this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o};fo.prototype.populatePaintArray=function(t,e,n){var i=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(i,t,e.patterns&&e.patterns[this.layerId],n)},fo.prototype.updatePaintArray=function(t,e,n,i,r){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],r)},fo.prototype._setPaintValues=function(t,e,n,i){if(i&&n){var r=i[n.min],o=i[n.mid],a=i[n.max];if(r&&o&&a)for(var s=t;s<e;s++)this.zoomInPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],r.tl[0],r.tl[1],r.br[0],r.br[1]),this.zoomOutPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1])}},fo.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},fo.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var go=function(t,e,n,i){this.binders={},this.layoutAttributes=i,this._buffers=[];var r=[];for(var o in t.paint._values)if(n(o)){var a=t.paint.get(o);if(a instanceof Xi&&hn(a.property.specification)){var s=yo(o,t.type),u=a.value,l=a.property.specification.type,c=a.property.useIntegerZoom,h=a.property.specification["property-type"],d="cross-faded"===h||"cross-faded-data-driven"===h;if("constant"===u.kind)this.binders[o]=d?new co(u.value,s):new lo(u.value,s,l),r.push("/u_"+o);else if("source"===u.kind||d){var p=_o(o,l,"source");this.binders[o]=d?new fo(u,s,l,c,e,p,t.id):new ho(u,s,l,p),r.push("/a_"+o)}else{var f=_o(o,l,"composite");this.binders[o]=new po(u,s,l,c,e,f),r.push("/z_"+o)}}}this.cacheKey=r.sort().join("")};go.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof ho||e instanceof po?e.maxValue:0},go.prototype.populatePaintArrays=function(t,e,n,i){for(var r in this.binders){var o=this.binders[r];(o instanceof ho||o instanceof po||o instanceof fo)&&o.populatePaintArray(t,e,n,i)}},go.prototype.setConstantPatternPositions=function(t,e){for(var n in this.binders){var i=this.binders[n];i instanceof co&&i.setConstantPatternPositions(t,e)}},go.prototype.updatePaintArrays=function(t,e,n,i,r){var o=!1;for(var a in t)for(var s=0,u=e.getPositions(a);s<u.length;s+=1){var l=u[s],c=n.feature(l.index);for(var h in this.binders){var d=this.binders[h];if((d instanceof ho||d instanceof po||d instanceof fo)&&!0===d.expression.isStateDependent){var p=i.paint.get(h);d.expression=p.value,d.updatePaintArray(l.start,l.end,c,t[a],r),o=!0}}}return o},go.prototype.defines=function(){var t=[];for(var e in this.binders){var n=this.binders[e];(n instanceof lo||n instanceof co)&&t.push.apply(t,n.uniformNames.map((function(t){return"#define HAS_UNIFORM_"+t})))}return t},go.prototype.getPaintVertexBuffers=function(){return this._buffers},go.prototype.getUniforms=function(t,e){var n=[];for(var i in this.binders){var r=this.binders[i];if(r instanceof lo||r instanceof co||r instanceof po)for(var o=0,a=r.uniformNames;o<a.length;o+=1){var s=a[o];if(e[s]){var u=r.getBinding(t,e[s]);n.push({name:s,property:i,binding:u})}}}return n},go.prototype.setUniforms=function(t,e,n,i){for(var r=0,o=e;r<o.length;r+=1){var a=o[r],s=a.name,u=a.property;this.binders[u].setUniform(a.binding,i,n.get(u),s)}},go.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var n=this.binders[e];if(t&&n instanceof fo){var i=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;i&&this._buffers.push(i)}else(n instanceof ho||n instanceof po)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}},go.prototype.upload=function(t){for(var e in this.binders){var n=this.binders[e];(n instanceof ho||n instanceof po||n instanceof fo)&&n.upload(t)}this.updatePaintBuffers()},go.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof ho||e instanceof po||e instanceof fo)&&e.destroy()}};var mo=function(t,e,n,i){void 0===i&&(i=function(){return!0}),this.programConfigurations={};for(var r=0,o=e;r<o.length;r+=1){var a=o[r];this.programConfigurations[a.id]=new go(a,n,i,t)}this.needsUpload=!1,this._featureMap=new Xr,this._bufferOffset=0};function yo(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function _o(t,e,n){var i={color:{source:Er,composite:Sr},number:{source:wr,composite:Er}},r=function(t){return{"line-pattern":{source:pr,composite:pr},"fill-pattern":{source:pr,composite:pr},"fill-extrusion-pattern":{source:pr,composite:pr}}[t]}(t);return r&&r[n]||i[e][n]}mo.prototype.populatePaintArrays=function(t,e,n,i,r){for(var o in this.programConfigurations)this.programConfigurations[o].populatePaintArrays(t,e,i,r);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},mo.prototype.updatePaintArrays=function(t,e,n,i){for(var r=0,o=n;r<o.length;r+=1){var a=o[r];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,this._featureMap,e,a,i)||this.needsUpload}},mo.prototype.get=function(t){return this.programConfigurations[t]},mo.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},mo.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},gi("ConstantBinder",lo),gi("CrossFadedConstantBinder",co),gi("SourceExpressionBinder",ho),gi("CrossFadedCompositeBinder",fo),gi("CompositeExpressionBinder",po),gi("ProgramConfiguration",go,{omit:["_buffers"]}),gi("ProgramConfigurationSet",mo);var vo=8192,bo={min:-1*Math.pow(2,14),max:Math.pow(2,14)-1};function xo(t){for(var e=vo/t.extent,n=t.loadGeometry(),i=0;i<n.length;i++)for(var r=n[i],o=0;o<r.length;o++){var a=r[o];a.x=Math.round(a.x*e),a.y=Math.round(a.y*e),(a.x<bo.min||a.x>bo.max||a.y<bo.min||a.y>bo.max)&&(x("Geometry exceeds allowed extent, reduce your vector tile buffer size"),a.x=u(a.x,bo.min,bo.max),a.y=u(a.y,bo.min,bo.max))}return n}function wo(t,e,n,i,r){t.emplaceBack(2*e+(i+1)/2,2*n+(r+1)/2)}var Co=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new lr,this.indexArray=new Mr,this.segments=new qr,this.programConfigurations=new mo(jr,t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function Po(t,e){for(var n=0;n<t.length;n++)if(Do(e,t[n]))return!0;for(var i=0;i<e.length;i++)if(Do(t,e[i]))return!0;return!!Eo(t,e)}function Mo(t,e,n){return!!Do(t,e)||!!To(e,t,n)}function Oo(t,e){if(1===t.length)return Io(e,t[0]);for(var n=0;n<e.length;n++)for(var i=e[n],r=0;r<i.length;r++)if(Do(t,i[r]))return!0;for(var o=0;o<t.length;o++)if(Io(e,t[o]))return!0;for(var a=0;a<e.length;a++)if(Eo(t,e[a]))return!0;return!1}function ko(t,e,n){if(t.length>1){if(Eo(t,e))return!0;for(var i=0;i<e.length;i++)if(To(e[i],t,n))return!0}for(var r=0;r<t.length;r++)if(To(t[r],e,n))return!0;return!1}function Eo(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var i=t[n],r=t[n+1],o=0;o<e.length-1;o++)if(So(i,r,e[o],e[o+1]))return!0;return!1}function So(t,e,n,i){return w(t,n,i)!==w(e,n,i)&&w(t,e,n)!==w(t,e,i)}function To(t,e,n){var i=n*n;if(1===e.length)return t.distSqr(e[0])<i;for(var r=1;r<e.length;r++)if(Ao(t,e[r-1],e[r])<i)return!0;return!1}function Ao(t,e,n){var i=e.distSqr(n);if(0===i)return t.distSqr(e);var r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return t.distSqr(r<0?e:r>1?n:n.sub(e)._mult(r)._add(e))}function Io(t,e){for(var n,i,r,o=!1,a=0;a<t.length;a++)for(var s=0,u=(n=t[a]).length-1;s<n.length;u=s++)(i=n[s]).y>e.y!=(r=n[u]).y>e.y&&e.x<(r.x-i.x)*(e.y-i.y)/(r.y-i.y)+i.x&&(o=!o);return o}function Do(t,e){for(var n=!1,i=0,r=t.length-1;i<t.length;r=i++){var o=t[i],a=t[r];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function Ro(t,e,n){var i=n[0],r=n[2];if(t.x<i.x&&e.x<i.x||t.x>r.x&&e.x>r.x||t.y<i.y&&e.y<i.y||t.y>r.y&&e.y>r.y)return!1;var o=w(t,e,n[0]);return o!==w(t,e,n[1])||o!==w(t,e,n[2])||o!==w(t,e,n[3])}function Fo(t,e,n){var i=e.paint.get(t).value;return"constant"===i.kind?i.value:n.programConfigurations.get(e.id).getMaxValue(t)}function Lo(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function zo(t,e,n,i,o){if(!e[0]&&!e[1])return t;var a=r.convert(e)._mult(o);"viewport"===n&&a._rotate(-i);for(var s=[],u=0;u<t.length;u++)s.push(t[u].sub(a));return s}Co.prototype.populate=function(t,e){var n=this.layers[0],i=[],r=null;"circle"===n.type&&(r=n.layout.get("circle-sort-key"));for(var o=0,a=t;o<a.length;o+=1){var s=a[o],u=s.feature,l=s.id,c=s.index,h=s.sourceLayerIndex;if(this.layers[0]._featureFilter(new ji(this.zoom),u)){var d=xo(u),p=r?r.evaluate(u,{}):void 0;i.push({id:l,properties:u.properties,type:u.type,sourceLayerIndex:h,index:c,geometry:d,patterns:{},sortKey:p})}}r&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var f=0,g=i;f<g.length;f+=1){var m=g[f],y=m.geometry,_=m.index,v=m.sourceLayerIndex,b=t[_].feature;this.addFeature(m,y,_),e.featureIndex.insert(b,y,_,v,this.index)}},Co.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Co.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Co.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Co.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,jr),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Co.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Co.prototype.addFeature=function(t,e,n){for(var i=0,r=e;i<r.length;i+=1)for(var o=0,a=r[i];o<a.length;o+=1){var s=a[o],u=s.x,l=s.y;if(!(u<0||u>=vo||l<0||l>=vo)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),h=c.vertexLength;wo(this.layoutVertexArray,u,l,-1,-1),wo(this.layoutVertexArray,u,l,1,-1),wo(this.layoutVertexArray,u,l,1,1),wo(this.layoutVertexArray,u,l,-1,1),this.indexArray.emplaceBack(h,h+1,h+2),this.indexArray.emplaceBack(h,h+3,h+2),c.vertexLength+=4,c.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{})},gi("CircleBucket",Co,{omit:["layers"]});var No,Bo=new nr({"circle-sort-key":new Qi(kt.layout_circle["circle-sort-key"])}),Vo={paint:new nr({"circle-radius":new Qi(kt.paint_circle["circle-radius"]),"circle-color":new Qi(kt.paint_circle["circle-color"]),"circle-blur":new Qi(kt.paint_circle["circle-blur"]),"circle-opacity":new Qi(kt.paint_circle["circle-opacity"]),"circle-translate":new Yi(kt.paint_circle["circle-translate"]),"circle-translate-anchor":new Yi(kt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Yi(kt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Yi(kt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Qi(kt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Qi(kt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Qi(kt.paint_circle["circle-stroke-opacity"])}),layout:Bo},Uo="undefined"!=typeof Float32Array?Float32Array:Array;function jo(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*a,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*a,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*a,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*a,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,n=arguments.length;n--;)e+=t[n]*t[n];return Math.sqrt(e)}),No=new Uo(3),Uo!=Float32Array&&(No[0]=0,No[1]=0,No[2]=0),function(){var t=new Uo(4);Uo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var qo=(function(){var t=new Uo(2);Uo!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t){function e(e){t.call(this,e,Vo)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new Co(t)},e.prototype.queryRadius=function(t){var e=t;return Fo("circle-radius",this,e)+Fo("circle-stroke-width",this,e)+Lo(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,r,o,a,s){for(var u=zo(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),l=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),c="map"===this.paint.get("circle-pitch-alignment"),h=c?u:function(t,e){return t.map((function(t){return Go(t,e)}))}(u,s),d=c?l*a:l,p=0,f=i;p<f.length;p+=1)for(var g=0,m=f[p];g<m.length;g+=1){var y=m[g],_=c?y:Go(y,s),v=d,b=jo([],[y.x,y.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?v*=b[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(v*=o.cameraToCenterDistance/b[3]),Mo(h,_,v))return!0}return!1},e}(ir));function Go(t,e){var n=jo([],[t.x,t.y,0,1],e);return new r(n[0]/n[3],n[1]/n[3])}var Ho=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Co);function Zo(t,e,n,i){var r=e.width,o=e.height;if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==r*o*n)throw new RangeError("mismatched image size")}else i=new Uint8Array(r*o*n);return t.width=r,t.height=o,t.data=i,t}function Wo(t,e,n){var i=e.width,r=e.height;if(i!==t.width||r!==t.height){var o=Zo({},{width:i,height:r},n);Ko(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,i),height:Math.min(t.height,r)},n),t.width=i,t.height=r,t.data=o.data}}function Ko(t,e,n,i,r,o){if(0===r.width||0===r.height)return e;if(r.width>t.width||r.height>t.height||n.x>t.width-r.width||n.y>t.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>e.width||r.height>e.height||i.x>e.width-r.width||i.y>e.height-r.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,u=0;u<r.height;u++)for(var l=((n.y+u)*t.width+n.x)*o,c=((i.y+u)*e.width+i.x)*o,h=0;h<r.width*o;h++)s[c+h]=a[l+h];return e}gi("HeatmapBucket",Ho,{omit:["layers"]});var Xo=function(t,e){Zo(this,t,1,e)};Xo.prototype.resize=function(t){Wo(this,t,1)},Xo.prototype.clone=function(){return new Xo({width:this.width,height:this.height},new Uint8Array(this.data))},Xo.copy=function(t,e,n,i,r){Ko(t,e,n,i,r,1)};var $o=function(t,e){Zo(this,t,4,e)};$o.prototype.resize=function(t){Wo(this,t,4)},$o.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},$o.prototype.clone=function(){return new $o({width:this.width,height:this.height},new Uint8Array(this.data))},$o.copy=function(t,e,n,i,r){Ko(t,e,n,i,r,4)},gi("AlphaImage",Xo),gi("RGBAImage",$o);var Yo={paint:new nr({"heatmap-radius":new Qi(kt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Qi(kt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Yi(kt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new er(kt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Yi(kt.paint_heatmap["heatmap-opacity"])})};function Qo(t,e){for(var n=new Uint8Array(1024),i={},r=0,o=0;r<256;r++,o+=4){i[e]=r/255;var a=t.evaluate(i);n[o+0]=Math.floor(255*a.r/a.a),n[o+1]=Math.floor(255*a.g/a.a),n[o+2]=Math.floor(255*a.b/a.a),n[o+3]=Math.floor(255*a.a)}return new $o({width:256,height:1},n)}var Jo=function(t){function e(e){t.call(this,e,Yo),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new Ho(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=Qo(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(ir),ta={paint:new nr({"hillshade-illumination-direction":new Yi(kt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Yi(kt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Yi(kt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Yi(kt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Yi(kt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Yi(kt.paint_hillshade["hillshade-accent-color"])})},ea=function(t){function e(e){t.call(this,e,ta)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(ir),na=sr([{name:"a_pos",components:2,type:"Int16"}],4).members,ia=oa,ra=oa;function oa(t,e,n){n=n||2;var i,r,o,a,s,u,l,c=e&&e.length,h=c?e[0]*n:t.length,d=aa(t,0,h,n,!0),p=[];if(!d||d.next===d.prev)return p;if(c&&(d=function(t,e,n,i){var r,o,a,s=[];for(r=0,o=e.length;r<o;r++)(a=aa(t,e[r]*i,r<o-1?e[r+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),s.push(ya(a));for(s.sort(pa),r=0;r<s.length;r++)fa(s[r],n),n=sa(n,n.next);return n}(t,e,d,n)),t.length>80*n){i=o=t[0],r=a=t[1];for(var f=n;f<h;f+=n)(s=t[f])<i&&(i=s),(u=t[f+1])<r&&(r=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-i,a-r))?1/l:0}return ua(d,p,n,i,r,l),p}function aa(t,e,n,i,r){var o,a;if(r===Ta(t,e,n,i)>0)for(o=e;o<n;o+=i)a=ka(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=ka(o,t[o],t[o+1],a);return a&&xa(a,a.next)&&(Ea(a),a=a.next),a}function sa(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!xa(i,i.next)&&0!==ba(i.prev,i,i.next))i=i.next;else{if(Ea(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function ua(t,e,n,i,r,o,a){if(t){!a&&o&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=ma(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<l&&(s++,i=i.nextZ);e++);for(u=l;s>0||u>0&&i;)0!==s&&(0===u||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,u--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(a>1)}(r)}(t,i,r,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?ca(t,i,r,o):la(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),Ea(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?ua(t=ha(sa(t),e,n),e,n,i,r,o,2):2===a&&da(t,e,n,i,r,o):ua(sa(t),e,n,i,r,o,1);break}}}function la(t){var e=t.prev,n=t,i=t.next;if(ba(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(_a(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&ba(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function ca(t,e,n,i){var r=t.prev,o=t,a=t.next;if(ba(r,o,a)>=0)return!1;for(var s=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,l=ma(r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,e,n,i),c=ma(s,u,e,n,i),h=t.prevZ,d=t.nextZ;h&&h.z>=l&&d&&d.z<=c;){if(h!==t.prev&&h!==t.next&&_a(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&ba(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,d!==t.prev&&d!==t.next&&_a(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&ba(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;h&&h.z>=l;){if(h!==t.prev&&h!==t.next&&_a(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&ba(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;d&&d.z<=c;){if(d!==t.prev&&d!==t.next&&_a(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&ba(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function ha(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!xa(r,o)&&wa(r,i,i.next,o)&&Ma(r,o)&&Ma(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),Ea(i),Ea(i.next),i=t=o),i=i.next}while(i!==t);return sa(i)}function da(t,e,n,i,r,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&va(a,s)){var u=Oa(a,s);return a=sa(a,a.next),u=sa(u,u.next),ua(a,e,n,i,r,o),void ua(u,e,n,i,r,o)}s=s.next}a=a.next}while(a!==t)}function pa(t,e){return t.x-e.x}function fa(t,e){if(e=function(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n;var u,l=n,c=n.x,h=n.y,d=1/0;i=n;do{r>=i.x&&i.x>=c&&r!==i.x&&_a(o<h?r:a,o,c,h,o<h?a:r,o,i.x,i.y)&&(u=Math.abs(o-i.y)/(r-i.x),Ma(i,t)&&(u<d||u===d&&(i.x>n.x||i.x===n.x&&ga(n,i)))&&(n=i,d=u)),i=i.next}while(i!==l);return n}(t,e)){var n=Oa(e,t);sa(e,e.next),sa(n,n.next)}}function ga(t,e){return ba(t.prev,t,e.prev)<0&&ba(e.next,t,t.next)<0}function ma(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ya(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function _a(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function va(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&wa(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Ma(t,e)&&Ma(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(ba(t.prev,t,e.prev)||ba(t,e.prev,e))||xa(t,e)&&ba(t.prev,t,t.next)>0&&ba(e.prev,e,e.next)>0)}function ba(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function xa(t,e){return t.x===e.x&&t.y===e.y}function wa(t,e,n,i){var r=Pa(ba(t,e,n)),o=Pa(ba(t,e,i)),a=Pa(ba(n,i,t)),s=Pa(ba(n,i,e));return r!==o&&a!==s||!(0!==r||!Ca(t,n,e))||!(0!==o||!Ca(t,i,e))||!(0!==a||!Ca(n,t,i))||!(0!==s||!Ca(n,e,i))}function Ca(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Pa(t){return t>0?1:t<0?-1:0}function Ma(t,e){return ba(t.prev,t,t.next)<0?ba(t,e,t.next)>=0&&ba(t,t.prev,e)>=0:ba(t,e,t.prev)<0||ba(t,t.next,e)<0}function Oa(t,e){var n=new Sa(t.i,t.x,t.y),i=new Sa(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function ka(t,e,n,i){var r=new Sa(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Ea(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Sa(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ta(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}function Aa(t,e,n,i,r){!function t(e,n,i,r,o){for(;r>i;){if(r-i>600){var a=r-i+1,s=n-i+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(i,Math.floor(n-s*l/a+c)),Math.min(r,Math.floor(n+(a-s)*l/a+c)),o)}var h=e[n],d=i,p=r;for(Ia(e,i,n),o(e[r],h)>0&&Ia(e,i,r);d<p;){for(Ia(e,d,p),d++,p--;o(e[d],h)<0;)d++;for(;o(e[p],h)>0;)p--}0===o(e[i],h)?Ia(e,i,p):Ia(e,++p,r),p<=n&&(i=p+1),n<=p&&(r=p-1)}}(t,e,n||0,i||t.length-1,r||Da)}function Ia(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function Da(t,e){return t<e?-1:t>e?1:0}function Ra(t,e){var n=t.length;if(n<=1)return[t];for(var i,r,o=[],a=0;a<n;a++){var s=C(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===r&&(r=s<0),r===s<0?(i&&o.push(i),i=[t[a]]):i.push(t[a]))}if(i&&o.push(i),e>1)for(var u=0;u<o.length;u++)o[u].length<=e||(Aa(o[u],e,1,o[u].length-1,Fa),o[u]=o[u].slice(0,e));return o}function Fa(t,e){return e.area-t.area}function La(t,e,n){for(var i=n.patternDependencies,r=!1,o=0,a=e;o<a.length;o+=1){var s=a[o].paint.get(t+"-pattern");s.isConstant()||(r=!0);var u=s.constantOr(null);u&&(r=!0,i[u.to]=!0,i[u.from]=!0)}return r}function za(t,e,n,i,r){for(var o=r.patternDependencies,a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.paint.get(t+"-pattern").value;if("constant"!==l.kind){var c=l.evaluate({zoom:i-1},n,{},r.availableImages),h=l.evaluate({zoom:i},n,{},r.availableImages),d=l.evaluate({zoom:i+1},n,{},r.availableImages);h=h&&h.name?h.name:h,d=d&&d.name?d.name:d,o[c=c&&c.name?c.name:c]=!0,o[h]=!0,o[d]=!0,n.patterns[u.id]={min:c,mid:h,max:d}}}return n}oa.deviation=function(t,e,n,i){var r=e&&e.length,o=Math.abs(Ta(t,0,r?e[0]*n:t.length,n));if(r)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(Ta(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var u=0;for(a=0;a<i.length;a+=3){var l=i[a]*n,c=i[a+1]*n,h=i[a+2]*n;u+=Math.abs((t[l]-t[h])*(t[c+1]-t[l+1])-(t[l]-t[c])*(t[h+1]-t[l+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},oa.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[r][o][a]);r>0&&n.holes.push(i+=t[r-1].length)}return n},ia.default=ra;var Na=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new lr,this.indexArray=new Mr,this.indexArray2=new Or,this.programConfigurations=new mo(na,t.layers,t.zoom),this.segments=new qr,this.segments2=new qr,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};Na.prototype.populate=function(t,e){this.hasPattern=La("fill",this.layers,e);for(var n=this.layers[0].layout.get("fill-sort-key"),i=[],r=0,o=t;r<o.length;r+=1){var a=o[r],s=a.feature,u=a.id,l=a.index,c=a.sourceLayerIndex;if(this.layers[0]._featureFilter(new ji(this.zoom),s)){var h=xo(s),d=n?n.evaluate(s,{},e.availableImages):void 0;i.push({id:u,properties:s.properties,type:s.type,sourceLayerIndex:c,index:l,geometry:h,patterns:{},sortKey:d})}}n&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var p=0,f=i;p<f.length;p+=1){var g=f[p],m=g.geometry,y=g.index,_=g.sourceLayerIndex;if(this.hasPattern){var v=za("fill",this.layers,g,this.zoom,e);this.patternFeatures.push(v)}else this.addFeature(g,m,y,{});e.featureIndex.insert(t[y].feature,m,y,_,this.index)}},Na.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Na.prototype.addFeatures=function(t,e){for(var n=0,i=this.patternFeatures;n<i.length;n+=1){var r=i[n];this.addFeature(r,r.geometry,r.index,e)}},Na.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Na.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Na.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,na),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},Na.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Na.prototype.addFeature=function(t,e,n,i){for(var r=0,o=Ra(e,500);r<o.length;r+=1){for(var a=o[r],s=0,u=0,l=a;u<l.length;u+=1)s+=l[u].length;for(var c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray),h=c.vertexLength,d=[],p=[],f=0,g=a;f<g.length;f+=1){var m=g[f];if(0!==m.length){m!==a[0]&&p.push(d.length/2);var y=this.segments2.prepareSegment(m.length,this.layoutVertexArray,this.indexArray2),_=y.vertexLength;this.layoutVertexArray.emplaceBack(m[0].x,m[0].y),this.indexArray2.emplaceBack(_+m.length-1,_),d.push(m[0].x),d.push(m[0].y);for(var v=1;v<m.length;v++)this.layoutVertexArray.emplaceBack(m[v].x,m[v].y),this.indexArray2.emplaceBack(_+v-1,_+v),d.push(m[v].x),d.push(m[v].y);y.vertexLength+=m.length,y.primitiveLength+=m.length}}for(var b=ia(d,p),x=0;x<b.length;x+=3)this.indexArray.emplaceBack(h+b[x],h+b[x+1],h+b[x+2]);c.vertexLength+=s,c.primitiveLength+=b.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i)},gi("FillBucket",Na,{omit:["layers","patternFeatures"]});var Ba=new nr({"fill-sort-key":new Qi(kt.layout_fill["fill-sort-key"])}),Va={paint:new nr({"fill-antialias":new Yi(kt.paint_fill["fill-antialias"]),"fill-opacity":new Qi(kt.paint_fill["fill-opacity"]),"fill-color":new Qi(kt.paint_fill["fill-color"]),"fill-outline-color":new Qi(kt.paint_fill["fill-outline-color"]),"fill-translate":new Yi(kt.paint_fill["fill-translate"]),"fill-translate-anchor":new Yi(kt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ji(kt.paint_fill["fill-pattern"])}),layout:Ba},Ua=function(t){function e(e){t.call(this,e,Va)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,n){t.prototype.recalculate.call(this,e,n);var i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new Na(t)},e.prototype.queryRadius=function(){return Lo(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,r,o,a){return Oo(zo(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),i)},e.prototype.isTileClipped=function(){return!0},e}(ir),ja=sr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,qa=Ga;function Ga(t,e,n,i,r){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=r,t.readFields(Ha,this,e)}function Ha(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var i=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[i]=r}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function Za(t){for(var e,n,i=0,r=0,o=t.length,a=o-1;r<o;a=r++)i+=((n=t[a]).x-(e=t[r]).x)*(e.y+n.y);return i}Ga.types=["Unknown","Point","LineString","Polygon"],Ga.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,i=1,o=0,a=0,s=0,u=[];t.pos<n;){if(o<=0){var l=t.readVarint();i=7&l,o=l>>3}if(o--,1===i||2===i)a+=t.readSVarint(),s+=t.readSVarint(),1===i&&(e&&u.push(e),e=[]),e.push(new r(a,s));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&u.push(e),u},Ga.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,i=0,r=0,o=0,a=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;){if(i<=0){var c=t.readVarint();n=7&c,i=c>>3}if(i--,1===n||2===n)(r+=t.readSVarint())<a&&(a=r),r>s&&(s=r),(o+=t.readSVarint())<u&&(u=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,l]},Ga.prototype.toGeoJSON=function(t,e,n){var i,r,o=this.extent*Math.pow(2,n),a=this.extent*t,s=this.extent*e,u=this.loadGeometry(),l=Ga.types[this.type];function c(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(i=0;i<u.length;i++)h[i]=u[i][0];c(u=h);break;case 2:for(i=0;i<u.length;i++)c(u[i]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var n,i,r=[],o=0;o<e;o++){var a=Za(t[o]);0!==a&&(void 0===i&&(i=a<0),i===a<0?(n&&r.push(n),n=[t[o]]):n.push(t[o]))}return n&&r.push(n),r}(u),i=0;i<u.length;i++)for(r=0;r<u[i].length;r++)c(u[i][r])}1===u.length?u=u[0]:l="Multi"+l;var d={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(d.id=this.id),d};var Wa=Ka;function Ka(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Xa,this,e),this.length=this._features.length}function Xa(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}(n))}function $a(t,e,n){if(3===t){var i=new Wa(n,n.readVarint()+n.pos);i.length&&(e[i.name]=i)}}Ka.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new qa(this._pbf,e,this.extent,this._keys,this._values)};var Ya={VectorTile:function(t,e){this.layers=t.readFields($a,{},e)},VectorTileFeature:qa,VectorTileLayer:Wa},Qa=Ya.VectorTileFeature.types,Ja=Math.pow(2,13);function ts(t,e,n,i,r,o,a,s){t.emplaceBack(e,n,2*Math.floor(i*Ja)+a,r*Ja*2,o*Ja*2,Math.round(s))}var es=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new hr,this.indexArray=new Mr,this.programConfigurations=new mo(ja,t.layers,t.zoom),this.segments=new qr,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function ns(t,e){return t.x===e.x&&(t.x<0||t.x>vo)||t.y===e.y&&(t.y<0||t.y>vo)}function is(t){return t.every((function(t){return t.x<0}))||t.every((function(t){return t.x>vo}))||t.every((function(t){return t.y<0}))||t.every((function(t){return t.y>vo}))}es.prototype.populate=function(t,e){this.features=[],this.hasPattern=La("fill-extrusion",this.layers,e);for(var n=0,i=t;n<i.length;n+=1){var r=i[n],o=r.feature,a=r.id,s=r.index,u=r.sourceLayerIndex;if(this.layers[0]._featureFilter(new ji(this.zoom),o)){var l=xo(o),c={id:a,sourceLayerIndex:u,index:s,geometry:l,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(c.id=o.id),this.hasPattern?this.features.push(za("fill-extrusion",this.layers,c,this.zoom,e)):this.addFeature(c,l,s,{}),e.featureIndex.insert(o,l,s,u,this.index,!0)}}},es.prototype.addFeatures=function(t,e){for(var n=0,i=this.features;n<i.length;n+=1){var r=i[n];this.addFeature(r,r.geometry,r.index,e)}},es.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},es.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},es.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},es.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ja),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},es.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},es.prototype.addFeature=function(t,e,n,i){for(var r=0,o=Ra(e,500);r<o.length;r+=1){for(var a=o[r],s=0,u=0,l=a;u<l.length;u+=1)s+=l[u].length;for(var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=0,d=a;h<d.length;h+=1){var p=d[h];if(0!==p.length&&!is(p))for(var f=0,g=0;g<p.length;g++){var m=p[g];if(g>=1){var y=p[g-1];if(!ns(m,y)){c.vertexLength+4>qr.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var _=m.sub(y)._perp()._unit(),v=y.dist(m);f+v>32768&&(f=0),ts(this.layoutVertexArray,m.x,m.y,_.x,_.y,0,0,f),ts(this.layoutVertexArray,m.x,m.y,_.x,_.y,0,1,f),ts(this.layoutVertexArray,y.x,y.y,_.x,_.y,0,0,f+=v),ts(this.layoutVertexArray,y.x,y.y,_.x,_.y,0,1,f);var b=c.vertexLength;this.indexArray.emplaceBack(b,b+2,b+1),this.indexArray.emplaceBack(b+1,b+2,b+3),c.vertexLength+=4,c.primitiveLength+=2}}}}if(c.vertexLength+s>qr.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray)),"Polygon"===Qa[t.type]){for(var x=[],w=[],C=c.vertexLength,P=0,M=a;P<M.length;P+=1){var O=M[P];if(0!==O.length){O!==a[0]&&w.push(x.length/2);for(var k=0;k<O.length;k++){var E=O[k];ts(this.layoutVertexArray,E.x,E.y,0,0,1,1,0),x.push(E.x),x.push(E.y)}}}for(var S=ia(x,w),T=0;T<S.length;T+=3)this.indexArray.emplaceBack(C+S[T],C+S[T+2],C+S[T+1]);c.primitiveLength+=S.length/3,c.vertexLength+=s}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i)},gi("FillExtrusionBucket",es,{omit:["layers","features"]});var rs={paint:new nr({"fill-extrusion-opacity":new Yi(kt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Qi(kt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Yi(kt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Yi(kt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ji(kt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Qi(kt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Qi(kt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Yi(kt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},os=function(t){function e(e){t.call(this,e,rs)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new es(t)},e.prototype.queryRadius=function(){return Lo(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,n,i,o,a,s,u){var l=zo(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),c=this.paint.get("fill-extrusion-height").evaluate(e,n),h=this.paint.get("fill-extrusion-base").evaluate(e,n),d=function(t,e,n,i){for(var o=[],a=0,s=t;a<s.length;a+=1){var u=s[a],l=[u.x,u.y,0,1];jo(l,l,e),o.push(new r(l[0]/l[3],l[1]/l[3]))}return o}(l,u),p=function(t,e,n,i){for(var o=[],a=[],s=i[8]*e,u=i[9]*e,l=i[10]*e,c=i[11]*e,h=i[8]*n,d=i[9]*n,p=i[10]*n,f=i[11]*n,g=0,m=t;g<m.length;g+=1){for(var y=[],_=[],v=0,b=m[g];v<b.length;v+=1){var x=b[v],w=x.x,C=x.y,P=i[0]*w+i[4]*C+i[12],M=i[1]*w+i[5]*C+i[13],O=i[2]*w+i[6]*C+i[14],k=i[3]*w+i[7]*C+i[15],E=O+l,S=k+c,T=P+h,A=M+d,I=O+p,D=k+f,R=new r((P+s)/S,(M+u)/S);R.z=E/S,y.push(R);var F=new r(T/D,A/D);F.z=I/D,_.push(F)}o.push(y),a.push(_)}return[o,a]}(i,h,c,u);return function(t,e,n){var i=1/0;Oo(n,e)&&(i=ss(n,e[0]));for(var r=0;r<e.length;r++)for(var o=e[r],a=t[r],s=0;s<o.length-1;s++){var u=o[s],l=[u,o[s+1],a[s+1],a[s],u];Po(n,l)&&(i=Math.min(i,ss(n,l)))}return i!==1/0&&i}(p[0],p[1],d)},e}(ir);function as(t,e){return t.x*e.x+t.y*e.y}function ss(t,e){if(1===t.length){for(var n,i,r=0,o=e[r++];!n||o.equals(n);)if(!(n=e[r++]))return 1/0;for(;!i||o.equals(i)||n.equals(i);)if(!(i=e[r++]))return 1/0;var a=t[0],s=n.sub(o),u=i.sub(o),l=a.sub(o),c=as(s,s),h=as(s,u),d=as(u,u),p=as(l,s),f=as(l,u),g=c*d-h*h,m=(d*p-h*f)/g,y=(c*f-h*p)/g;return o.z*(1-m-y)+n.z*m+i.z*y}for(var _=1/0,v=0,b=e;v<b.length;v+=1)_=Math.min(_,b[v].z);return _}var us=sr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ls=Ya.VectorTileFeature.types,cs=Math.cos(Math.PI/180*37.5),hs=Math.pow(2,14)/.5,ds=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new dr,this.indexArray=new Mr,this.programConfigurations=new mo(us,t.layers,t.zoom),this.segments=new qr,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};ds.prototype.populate=function(t,e){this.hasPattern=La("line",this.layers,e);for(var n=this.layers[0].layout.get("line-sort-key"),i=[],r=0,o=t;r<o.length;r+=1){var a=o[r],s=a.feature,u=a.id,l=a.index,c=a.sourceLayerIndex;if(this.layers[0]._featureFilter(new ji(this.zoom),s)){var h=xo(s),d=n?n.evaluate(s,{}):void 0;i.push({id:u,properties:s.properties,type:s.type,sourceLayerIndex:c,index:l,geometry:h,patterns:{},sortKey:d})}}n&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var p=0,f=i;p<f.length;p+=1){var g=f[p],m=g.geometry,y=g.index,_=g.sourceLayerIndex;if(this.hasPattern){var v=za("line",this.layers,g,this.zoom,e);this.patternFeatures.push(v)}else this.addFeature(g,m,y,{});e.featureIndex.insert(t[y].feature,m,y,_,this.index)}},ds.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},ds.prototype.addFeatures=function(t,e){for(var n=0,i=this.patternFeatures;n<i.length;n+=1){var r=i[n];this.addFeature(r,r.geometry,r.index,e)}},ds.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ds.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ds.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,us),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ds.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ds.prototype.addFeature=function(t,e,n,i){for(var r=this.layers[0].layout,o=r.get("line-join").evaluate(t,{}),a=r.get("line-cap"),s=r.get("line-miter-limit"),u=r.get("line-round-limit"),l=0,c=e;l<c.length;l+=1)this.addLine(c[l],t,o,a,s,u,n,i)},ds.prototype.addLine=function(t,e,n,i,r,o,a,s){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+e.properties.mapbox_clip_start,this.clipEnd=+e.properties.mapbox_clip_end;for(var u=0;u<t.length-1;u++)this.totalDistance+=t[u].dist(t[u+1]);this.updateScaledDistance()}for(var l="Polygon"===ls[e.type],c=t.length;c>=2&&t[c-1].equals(t[c-2]);)c--;for(var h=0;h<c-1&&t[h].equals(t[h+1]);)h++;if(!(c<(l?3:2))){"bevel"===n&&(r=1.05);var d,p=this.overscaling<=16?15*vo/(512*this.overscaling):0,f=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray),g=void 0,m=void 0,y=void 0,_=void 0;this.e1=this.e2=-1,l&&(_=t[h].sub(d=t[c-2])._unit()._perp());for(var v=h;v<c;v++)if(!(m=v===c-1?l?t[h+1]:void 0:t[v+1])||!t[v].equals(m)){_&&(y=_),d&&(g=d),d=t[v],_=m?m.sub(d)._unit()._perp():y;var b=(y=y||_).add(_);0===b.x&&0===b.y||b._unit();var x=y.x*_.x+y.y*_.y,w=b.x*_.x+b.y*_.y,C=0!==w?1/w:1/0,P=2*Math.sqrt(2-2*w),M=w<cs&&g&&m,O=y.x*_.y-y.y*_.x>0;if(M&&v>h){var k=d.dist(g);if(k>2*p){var E=d.sub(d.sub(g)._mult(p/k)._round());this.updateDistance(g,E),this.addCurrentVertex(E,y,0,0,f),g=E}}var S=g&&m,T=S?n:l?"butt":i;if(S&&"round"===T&&(C<o?T="miter":C<=2&&(T="fakeround")),"miter"===T&&C>r&&(T="bevel"),"bevel"===T&&(C>2&&(T="flipbevel"),C<r&&(T="miter")),g&&this.updateDistance(g,d),"miter"===T)b._mult(C),this.addCurrentVertex(d,b,0,0,f);else if("flipbevel"===T){if(C>100)b=_.mult(-1);else{var A=C*y.add(_).mag()/y.sub(_).mag();b._perp()._mult(A*(O?-1:1))}this.addCurrentVertex(d,b,0,0,f),this.addCurrentVertex(d,b.mult(-1),0,0,f)}else if("bevel"===T||"fakeround"===T){var I=-Math.sqrt(C*C-1),D=O?I:0,R=O?0:I;if(g&&this.addCurrentVertex(d,y,D,R,f),"fakeround"===T)for(var F=Math.round(180*P/Math.PI/20),L=1;L<F;L++){var z=L/F;if(.5!==z){var N=z-.5;z+=z*N*(z-1)*((1.0904+x*(x*(3.55645-1.43519*x)-3.2452))*N*N+(.848013+x*(.215638*x-1.06021)))}var B=_.sub(y)._mult(z)._add(y)._unit()._mult(O?-1:1);this.addHalfVertex(d,B.x,B.y,!1,O,0,f)}m&&this.addCurrentVertex(d,_,-D,-R,f)}else if("butt"===T)this.addCurrentVertex(d,b,0,0,f);else if("square"===T){var V=g?1:-1;this.addCurrentVertex(d,b,V,V,f)}else"round"===T&&(g&&(this.addCurrentVertex(d,y,0,0,f),this.addCurrentVertex(d,y,1,1,f,!0)),m&&(this.addCurrentVertex(d,_,-1,-1,f,!0),this.addCurrentVertex(d,_,0,0,f)));if(M&&v<c-1){var U=d.dist(m);if(U>2*p){var j=d.add(m.sub(d)._mult(p/U)._round());this.updateDistance(d,j),this.addCurrentVertex(j,_,0,0,f),d=j}}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,s)}},ds.prototype.addCurrentVertex=function(t,e,n,i,r,o){void 0===o&&(o=!1);var a=e.y*i-e.x,s=-e.y-e.x*i;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,o,!1,n,r),this.addHalfVertex(t,a,s,o,!0,-i,r),this.distance>hs/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,n,i,r,o))},ds.prototype.addHalfVertex=function(t,e,n,i,r,o,a){var s=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((t.x<<1)+(i?1:0),(t.y<<1)+(r?1:0),Math.round(63*e)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1)|(63&s)<<2,s>>6);var u=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),a.primitiveLength++),r?this.e2=u:this.e1=u},ds.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(hs-1):this.distance},ds.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},gi("LineBucket",ds,{omit:["layers","patternFeatures"]});var ps=new nr({"line-cap":new Yi(kt.layout_line["line-cap"]),"line-join":new Qi(kt.layout_line["line-join"]),"line-miter-limit":new Yi(kt.layout_line["line-miter-limit"]),"line-round-limit":new Yi(kt.layout_line["line-round-limit"]),"line-sort-key":new Qi(kt.layout_line["line-sort-key"])}),fs={paint:new nr({"line-opacity":new Qi(kt.paint_line["line-opacity"]),"line-color":new Qi(kt.paint_line["line-color"]),"line-translate":new Yi(kt.paint_line["line-translate"]),"line-translate-anchor":new Yi(kt.paint_line["line-translate-anchor"]),"line-width":new Qi(kt.paint_line["line-width"]),"line-gap-width":new Qi(kt.paint_line["line-gap-width"]),"line-offset":new Qi(kt.paint_line["line-offset"]),"line-blur":new Qi(kt.paint_line["line-blur"]),"line-dasharray":new tr(kt.paint_line["line-dasharray"]),"line-pattern":new Ji(kt.paint_line["line-pattern"]),"line-gradient":new er(kt.paint_line["line-gradient"])}),layout:ps},gs=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new ji(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,i,r){return n=c({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,i,r)},e}(Qi))(fs.paint.properties["line-width"].specification);gs.useIntegerZoom=!0;var ms=function(t){function e(e){t.call(this,e,fs)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},e.prototype._updateGradient=function(){this.gradient=Qo(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e,n){t.prototype.recalculate.call(this,e,n),this.paint._values["line-floorwidth"]=gs.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new ds(t)},e.prototype.queryRadius=function(t){var e=t,n=ys(Fo("line-width",this,e),Fo("line-gap-width",this,e)),i=Fo("line-offset",this,e);return n/2+Math.abs(i)+Lo(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,o,a,s){var u=zo(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),l=s/2*ys(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),c=this.paint.get("line-offset").evaluate(e,n);return c&&(i=function(t,e){for(var n=[],i=new r(0,0),o=0;o<t.length;o++){for(var a=t[o],s=[],u=0;u<a.length;u++){var l=a[u],c=a[u+1],h=0===u?i:l.sub(a[u-1])._unit()._perp(),d=u===a.length-1?i:c.sub(l)._unit()._perp(),p=h._add(d)._unit();p._mult(1/(p.x*d.x+p.y*d.y)),s.push(p._mult(e)._add(l))}n.push(s)}return n}(i,c*s)),function(t,e,n){for(var i=0;i<e.length;i++){var r=e[i];if(t.length>=3)for(var o=0;o<r.length;o++)if(Do(t,r[o]))return!0;if(ko(t,r,n))return!0}return!1}(u,i,l)},e.prototype.isTileClipped=function(){return!0},e}(ir);function ys(t,e){return e>0?e+2*t:t}var _s=sr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),vs=sr([{name:"a_projected_pos",components:3,type:"Float32"}],4),bs=(sr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),sr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),xs=(sr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),sr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ws=sr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function Cs(t,e,n){return t.sections.forEach((function(t){t.text=function(t,e,n){var i=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===i?t=t.toLocaleUpperCase():"lowercase"===i&&(t=t.toLocaleLowerCase()),Ui.applyArabicShaping&&(t=Ui.applyArabicShaping(t)),t}(t.text,e,n)})),t}sr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),sr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"}]),sr([{type:"Float32",name:"offsetX"}]),sr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ps={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Ms=function(t,e,n,i,r){var o,a,s=8*r-i-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?r-1:0,d=n?-1:1,p=t[e+h];for(h+=d,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;c>0;a=256*a+t[e+h],h+=d,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),o-=l}return(p?-1:1)*a*Math.pow(2,o-i)},Os=function(t,e,n,i,r,o){var a,s,u,l=8*o-r-1,c=(1<<l)-1,h=c>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?d/u:d*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[n+p]=255&s,p+=f,s/=256,r-=8);for(a=a<<r|s,l+=r;l>0;t[n+p]=255&a,p+=f,a/=256,l-=8);t[n+p-f]|=128*g},ks=Es;function Es(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Es.Varint=0,Es.Fixed64=1,Es.Bytes=2,Es.Fixed32=5;var Ss="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Ts(t){return t.type===Es.Bytes?t.readVarint()+t.pos:t.pos+1}function As(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Is(t,e,n){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;r>=t;r--)n.buf[r+i]=n.buf[r]}function Ds(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function Rs(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function Fs(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function Ls(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function zs(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function Ns(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function Bs(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function Vs(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function Us(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function js(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function qs(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function Gs(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Hs(t,e,n){1===t&&n.readMessage(Zs,e)}function Zs(t,e,n){if(3===t){var i=n.readMessage(Ws,{}),r=i.width,o=i.height,a=i.left,s=i.top,u=i.advance;e.push({id:i.id,bitmap:new Xo({width:r+6,height:o+6},i.bitmap),metrics:{width:r,height:o,left:a,top:s,advance:u}})}}function Ws(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function Ks(t){for(var e=0,n=0,i=0,r=t;i<r.length;i+=1){var o=r[i];e+=o.w*o.h,n=Math.max(n,o.w)}t.sort((function(t,e){return e.h-t.h}));for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}],s=0,u=0,l=0,c=t;l<c.length;l+=1)for(var h=c[l],d=a.length-1;d>=0;d--){var p=a[d];if(!(h.w>p.w||h.h>p.h)){if(h.x=p.x,h.y=p.y,u=Math.max(u,h.y+h.h),s=Math.max(s,h.x+h.w),h.w===p.w&&h.h===p.h){var f=a.pop();d<a.length&&(a[d]=f)}else h.h===p.h?(p.x+=h.w,p.w-=h.w):h.w===p.w?(p.y+=h.h,p.h-=h.h):(a.push({x:p.x+h.w,y:p.y,w:p.w-h.w,h:h.h}),p.y+=h.h,p.h-=h.h);break}}return{w:s,h:u,fill:e/(s*u)||0}}Es.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,o=this.pos;this.type=7&i,t(r,e,this),this.pos===o&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=js(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Gs(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=js(this.buf,this.pos)+4294967296*js(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=js(this.buf,this.pos)+4294967296*Gs(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Ms(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Ms(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,i=this.buf;return e=127&(n=i[this.pos++]),n<128?e:(e|=(127&(n=i[this.pos++]))<<7,n<128?e:(e|=(127&(n=i[this.pos++]))<<14,n<128?e:(e|=(127&(n=i[this.pos++]))<<21,n<128?e:function(t,e,n){var i,r,o=n.buf;if(i=(112&(r=o[n.pos++]))>>4,r<128)return As(t,i,e);if(i|=(127&(r=o[n.pos++]))<<3,r<128)return As(t,i,e);if(i|=(127&(r=o[n.pos++]))<<10,r<128)return As(t,i,e);if(i|=(127&(r=o[n.pos++]))<<17,r<128)return As(t,i,e);if(i|=(127&(r=o[n.pos++]))<<24,r<128)return As(t,i,e);if(i|=(1&(r=o[n.pos++]))<<31,r<128)return As(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Ss?function(t,e,n){return Ss.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var i="",r=e;r<n;){var o,a,s,u=t[r],l=null,c=u>239?4:u>223?3:u>191?2:1;if(r+c>n)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[r+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(a=t[r+2],128==(192&(o=t[r+1]))&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(a=t[r+2],s=t[r+3],128==(192&(o=t[r+1]))&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,i+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),i+=String.fromCharCode(l),r+=c}return i}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Es.Bytes)return t.push(this.readVarint(e));var n=Ts(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Es.Bytes)return t.push(this.readSVarint());var e=Ts(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Es.Bytes)return t.push(this.readBoolean());var e=Ts(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Es.Bytes)return t.push(this.readFloat());var e=Ts(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Es.Bytes)return t.push(this.readDouble());var e=Ts(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Es.Bytes)return t.push(this.readFixed32());var e=Ts(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Es.Bytes)return t.push(this.readSFixed32());var e=Ts(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Es.Bytes)return t.push(this.readFixed64());var e=Ts(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Es.Bytes)return t.push(this.readSFixed64());var e=Ts(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Es.Varint)for(;this.buf[this.pos++]>127;);else if(e===Es.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Es.Fixed32)this.pos+=4;else{if(e!==Es.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),qs(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),qs(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),qs(this.buf,-1&t,this.pos),qs(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),qs(this.buf,-1&t,this.pos),qs(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,i;if(t>=0?(n=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,i=i+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(i,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var i,r,o=0;o<e.length;o++){if((i=e.charCodeAt(o))>55295&&i<57344){if(!r){i>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):r=i;continue}if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(t[n++]=239,t[n++]=191,t[n++]=189,r=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&Is(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Os(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Os(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var i=this.pos-n;i>=128&&Is(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,n){this.writeTag(t,Es.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Ds,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Rs,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,zs,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Fs,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Ls,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Ns,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Bs,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Vs,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Us,e)},writeBytesField:function(t,e){this.writeTag(t,Es.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Es.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Es.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Es.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Es.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Es.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Es.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Es.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Es.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Es.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var Xs=function(t,e){var n=e.pixelRatio,i=e.version,r=e.stretchX,o=e.stretchY,a=e.content;this.paddedRect=t,this.pixelRatio=n,this.stretchX=r,this.stretchY=o,this.content=a,this.version=i},$s={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};$s.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},$s.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},$s.tlbr.get=function(){return this.tl.concat(this.br)},$s.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Xs.prototype,$s);var Ys=function(t,e){var n={},i={};this.haveRenderCallbacks=[];var r=[];this.addImages(t,n,r),this.addImages(e,i,r);var o=Ks(r),a=new $o({width:o.w||1,height:o.h||1});for(var s in t){var u=t[s],l=n[s].paddedRect;$o.copy(u.data,a,{x:0,y:0},{x:l.x+1,y:l.y+1},u.data)}for(var c in e){var h=e[c],d=i[c].paddedRect,p=d.x+1,f=d.y+1,g=h.data.width,m=h.data.height;$o.copy(h.data,a,{x:0,y:0},{x:p,y:f},h.data),$o.copy(h.data,a,{x:0,y:m-1},{x:p,y:f-1},{width:g,height:1}),$o.copy(h.data,a,{x:0,y:0},{x:p,y:f+m},{width:g,height:1}),$o.copy(h.data,a,{x:g-1,y:0},{x:p-1,y:f},{width:1,height:m}),$o.copy(h.data,a,{x:0,y:0},{x:p+g,y:f},{width:1,height:m})}this.image=a,this.iconPositions=n,this.patternPositions=i};Ys.prototype.addImages=function(t,e,n){for(var i in t){var r=t[i],o={x:0,y:0,w:r.data.width+2,h:r.data.height+2};n.push(o),e[i]=new Xs(o,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(i)}},Ys.prototype.patchUpdatedImages=function(t,e){for(var n in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)},Ys.prototype.patchUpdatedImage=function(t,e,n){if(t&&e&&t.version!==e.version){t.version=e.version;var i=t.tl;n.update(e.data,void 0,{x:i[0],y:i[1]})}},gi("ImagePosition",Xs),gi("ImageAtlas",Ys);var Qs={horizontal:1,vertical:2,horizontalOnly:3},Js=function(){this.scale=1,this.fontStack="",this.imageName=null};Js.forText=function(t,e){var n=new Js;return n.scale=t||1,n.fontStack=e,n},Js.forImage=function(t){var e=new Js;return e.imageName=t,e};var tu=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function eu(t,e,n,i,r,o,a,s,u,l,c,h,d,p,f,g){var m,y=tu.fromFeature(t,r);h===Qs.vertical&&y.verticalizePunctuation();var _=Ui.processBidirectionalText,v=Ui.processStyledBidirectionalText;if(_&&1===y.sections.length){m=[];for(var b=0,x=_(y.toString(),uu(y,l,o,e,i,p,f));b<x.length;b+=1){var w=x[b],C=new tu;C.text=w,C.sections=y.sections;for(var P=0;P<w.length;P++)C.sectionIndex.push(0);m.push(C)}}else if(v){m=[];for(var M=0,O=v(y.text,y.sectionIndex,uu(y,l,o,e,i,p,f));M<O.length;M+=1){var k=O[M],E=new tu;E.text=k[0],E.sectionIndex=k[1],E.sections=y.sections,m.push(E)}}else m=function(t,e){for(var n=[],i=t.text,r=0,o=0,a=e;o<a.length;o+=1){var s=a[o];n.push(t.substring(r,s)),r=s}return r<i.length&&n.push(t.substring(r,i.length)),n}(y,uu(y,l,o,e,i,p,f));var S=[],T={positionedLines:S,text:y.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:h,iconsInText:!1,verticalizable:!1};return function(t,e,n,i,r,o,a,s,u,l,c,h){for(var d=0,p=-17,f=0,g=0,m="right"===s?1:"left"===s?0:.5,y=0,_=0,v=r;_<v.length;_+=1){var b=v[_];b.trim();var x=b.getMaxScale(),w=24*(x-1),C={positionedGlyphs:[],lineOffset:0};t.positionedLines[y]=C;var P=C.positionedGlyphs,M=0;if(b.length()){for(var O=0;O<b.length();O++){var k=b.getSection(O),E=b.getSectionIndex(O),S=b.getCharCode(O),T=0,A=null,I=null,D=null,R=24,F=!(u===Qs.horizontal||!c&&!Mi(S)||c&&(nu[S]||(G=S,wi.Arabic(G)||wi["Arabic Supplement"](G)||wi["Arabic Extended-A"](G)||wi["Arabic Presentation Forms-A"](G)||wi["Arabic Presentation Forms-B"](G))));if(k.imageName){var L=i[k.imageName];if(!L)continue;D=k.imageName,t.iconsInText=t.iconsInText||!0,I=L.paddedRect;var z=L.displaySize;k.scale=24*k.scale/h,T=w+(24-z[1]*k.scale),R=(A={width:z[0],height:z[1],left:1,top:-3,advance:F?z[1]:z[0]}).advance;var N=F?z[0]*k.scale-24*x:z[1]*k.scale-24*x;N>0&&N>M&&(M=N)}else{var B=n[k.fontStack],V=B&&B[S];if(V&&V.rect)I=V.rect,A=V.metrics;else{var U=e[k.fontStack],j=U&&U[S];if(!j)continue;A=j.metrics}T=24*(x-k.scale)}F?(t.verticalizable=!0,P.push({glyph:S,imageName:D,x:d,y:p+T,vertical:F,scale:k.scale,fontStack:k.fontStack,sectionIndex:E,metrics:A,rect:I}),d+=R*k.scale+l):(P.push({glyph:S,imageName:D,x:d,y:p+T,vertical:F,scale:k.scale,fontStack:k.fontStack,sectionIndex:E,metrics:A,rect:I}),d+=A.advance*k.scale+l)}0!==P.length&&(f=Math.max(d-l,f),cu(P,0,P.length-1,m,M)),d=0;var q=o*x+M;C.lineOffset=Math.max(M,w),p+=q,g=Math.max(q,g),++y}else p+=o,++y}var G,H=p- -17,Z=lu(a),W=Z.horizontalAlign,K=Z.verticalAlign;(function(t,e,n,i,r,o,a,s,u){var l,c=(e-n)*r;l=o!==a?-s*i- -17:(-i*u+.5)*a;for(var h=0,d=t;h<d.length;h+=1)for(var p=0,f=d[h].positionedGlyphs;p<f.length;p+=1){var g=f[p];g.x+=c,g.y+=l}})(t.positionedLines,m,W,K,f,g,o,H,r.length),t.top+=-K*H,t.bottom=t.top+H,t.left+=-W*f,t.right=t.left+f}(T,e,n,i,m,a,s,u,h,l,d,g),!function(t){for(var e=0,n=t;e<n.length;e+=1)if(0!==n[e].positionedGlyphs.length)return!1;return!0}(S)&&T}tu.fromFeature=function(t,e){for(var n=new tu,i=0;i<t.sections.length;i++){var r=t.sections[i];r.image?n.addImageSection(r):n.addTextSection(r,e)}return n},tu.prototype.length=function(){return this.text.length},tu.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},tu.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},tu.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},tu.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n+1)||null,r=t.charCodeAt(n-1)||null;i&&Oi(i)&&!Ps[t[n+1]]||r&&Oi(r)&&!Ps[t[n-1]]||!Ps[t[n]]?e+=t[n]:e+=Ps[t[n]]}return e}(this.text)},tu.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&nu[this.text.charCodeAt(e)];e++)t++;for(var n=this.text.length,i=this.text.length-1;i>=0&&i>=t&&nu[this.text.charCodeAt(i)];i--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)},tu.prototype.substring=function(t,e){var n=new tu;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n},tu.prototype.toString=function(){return this.text},tu.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce((function(e,n){return Math.max(e,t.sections[n].scale)}),0)},tu.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(Js.forText(t.scale,t.fontStack||e));for(var n=this.sections.length-1,i=0;i<t.text.length;++i)this.sectionIndex.push(n)},tu.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Js.forImage(e)),this.sectionIndex.push(this.sections.length-1)):x("Reached maximum number of images 6401")}else x("Can't add FormattedSection with an empty image.")},tu.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var nu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},iu={};function ru(t,e,n,i,r,o){if(e.imageName){var a=i[e.imageName];return a?a.displaySize[0]*e.scale*24/o+r:0}var s=n[e.fontStack],u=s&&s[t];return u?u.metrics.advance*e.scale+r:0}function ou(t,e,n,i){var r=Math.pow(t-e,2);return i?t<e?r/2:2*r:r+Math.abs(n)*n}function au(t,e,n){var i=0;return 10===t&&(i-=1e4),n&&(i+=150),40!==t&&65288!==t||(i+=50),41!==e&&65289!==e||(i+=50),i}function su(t,e,n,i,r,o){for(var a=null,s=ou(e,n,r,o),u=0,l=i;u<l.length;u+=1){var c=l[u],h=ou(e-c.x,n,r,o)+c.badness;h<=s&&(a=c,s=h)}return{index:t,x:e,priorBreak:a,badness:s}}function uu(t,e,n,i,r,o,a){if("point"!==o)return[];if(!t)return[];for(var s,u=[],l=function(t,e,n,i,r,o){for(var a=0,s=0;s<t.length();s++){var u=t.getSection(s);a+=ru(t.getCharCode(s),u,i,r,e,o)}return a/Math.max(1,Math.ceil(a/n))}(t,e,n,i,r,a),c=t.text.indexOf("\u200b")>=0,h=0,d=0;d<t.length();d++){var p=t.getSection(d),f=t.getCharCode(d);if(nu[f]||(h+=ru(f,p,i,r,e,a)),d<t.length()-1){var g=!((s=f)<11904||!(wi["Bopomofo Extended"](s)||wi.Bopomofo(s)||wi["CJK Compatibility Forms"](s)||wi["CJK Compatibility Ideographs"](s)||wi["CJK Compatibility"](s)||wi["CJK Radicals Supplement"](s)||wi["CJK Strokes"](s)||wi["CJK Symbols and Punctuation"](s)||wi["CJK Unified Ideographs Extension A"](s)||wi["CJK Unified Ideographs"](s)||wi["Enclosed CJK Letters and Months"](s)||wi["Halfwidth and Fullwidth Forms"](s)||wi.Hiragana(s)||wi["Ideographic Description Characters"](s)||wi["Kangxi Radicals"](s)||wi["Katakana Phonetic Extensions"](s)||wi.Katakana(s)||wi["Vertical Forms"](s)||wi["Yi Radicals"](s)||wi["Yi Syllables"](s)));(iu[f]||g||p.imageName)&&u.push(su(d+1,h,l,u,au(f,t.getCharCode(d+1),g&&c),!1))}}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(su(t.length(),h,l,u,0,!0))}function lu(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function cu(t,e,n,i,r){if(i||r)for(var o=t[n],a=(t[n].x+o.metrics.advance*o.scale)*i,s=e;s<=n;s++)t[s].x-=a,t[s].y+=r}function hu(t,e,n,i,r,o){var a,s=t.image;if(s.content){var u=s.content,l=s.pixelRatio||1;a=[u[0]/l,u[1]/l,s.displaySize[0]-u[2]/l,s.displaySize[1]-u[3]/l]}var c,h,d,p,f=e.left*o,g=e.right*o;"width"===n||"both"===n?(p=r[0]+f-i[3],h=r[0]+g+i[1]):h=(p=r[0]+(f+g-s.displaySize[0])/2)+s.displaySize[0];var m=e.top*o,y=e.bottom*o;return"height"===n||"both"===n?(c=r[1]+m-i[0],d=r[1]+y+i[2]):d=(c=r[1]+(m+y-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:c,right:h,bottom:d,left:p,collisionPadding:a}}iu[10]=!0,iu[32]=!0,iu[38]=!0,iu[40]=!0,iu[41]=!0,iu[43]=!0,iu[45]=!0,iu[47]=!0,iu[173]=!0,iu[183]=!0,iu[8203]=!0,iu[8208]=!0,iu[8211]=!0,iu[8231]=!0;var du=function(t){function e(e,n,i,r){t.call(this,e,n),this.angle=i,void 0!==r&&(this.segment=r)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(r);gi("Anchor",du);var pu=128;function fu(t,e){var n=e.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new ji(t+1))};if("source"===n.kind)return{kind:"source"};for(var i=n.zoomStops,r=n.interpolationType,o=0;o<i.length&&i[o]<=t;)o++;for(var a=o=Math.max(0,o-1);a<i.length&&i[a]<t+1;)a++;a=Math.min(i.length-1,a);var s=i[o],u=i[a];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:u,interpolationType:r}:{kind:"camera",minZoom:s,maxZoom:u,minSize:n.evaluate(new ji(s)),maxSize:n.evaluate(new ji(u)),interpolationType:r}}function gu(t,e,n){var i=e.uSize,r=n.lowerSize;return"source"===t.kind?r/pu:"composite"===t.kind?Ce(r/pu,n.upperSize/pu,e.uSizeT):i}function mu(t,e){var n=0,i=0;if("constant"===t.kind)i=t.layoutSize;else if("source"!==t.kind){var r=t.interpolationType,o=r?u(Ne.interpolationFactor(r,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?i=Ce(t.minSize,t.maxSize,o):n=o}return{uSizeT:n,uSize:i}}var yu=Object.freeze({__proto__:null,getSizeData:fu,evaluateSizeForFeature:gu,evaluateSizeForZoom:mu,SIZE_PACK_FACTOR:pu});function _u(t,e,n,i,r){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var u=[],l=0;s<n/2;){var c=t[a],h=t[a+1];if(!h)return!1;var d=t[a-1].angleTo(c)-c.angleTo(h);for(d=Math.abs((d+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:d}),l+=d;s-u[0].distance>i;)l-=u.shift().angleDelta;if(l>r)return!1;a++,s+=c.dist(h)}return!0}function vu(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function bu(t,e,n){return t?.6*e*n:0}function xu(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function wu(t,e,n,i,r,o){for(var a=bu(n,r,o),s=xu(n,i)*o,u=0,l=vu(t)/2,c=0;c<t.length-1;c++){var h=t[c],d=t[c+1],p=h.dist(d);if(u+p>l){var f=(l-u)/p,g=Ce(h.x,d.x,f),m=Ce(h.y,d.y,f),y=new du(g,m,d.angleTo(h),c);return y._round(),!a||_u(t,y,s,a,e)?y:void 0}u+=p}}function Cu(t,e,n,i,r,o,a,s,u){var l=bu(i,o,a),c=xu(i,r),h=c*a,d=0===t[0].x||t[0].x===u||0===t[0].y||t[0].y===u;return e-h<e/4&&(e=h+e/4),function t(e,n,i,r,o,a,s,u,l){for(var c=a/2,h=vu(e),d=0,p=n-i,f=[],g=0;g<e.length-1;g++){for(var m=e[g],y=e[g+1],_=m.dist(y),v=y.angleTo(m);p+i<d+_;){var b=((p+=i)-d)/_,x=Ce(m.x,y.x,b),w=Ce(m.y,y.y,b);if(x>=0&&x<l&&w>=0&&w<l&&p-c>=0&&p+c<=h){var C=new du(x,w,v,g);C._round(),r&&!_u(e,C,a,r,o)||f.push(C)}}d+=_}return u||f.length||s||(f=t(e,d/2,i,r,o,a,s,!0,l)),f}(t,d?e/2*s%e:(c/2+2*o)*a*s%e,e,l,n,h,d,!1,u)}function Pu(t,e,n,i){var o=[],a=t.image,s=a.pixelRatio,u=a.paddedRect.w-2,l=a.paddedRect.h-2,c=t.right-t.left,h=t.bottom-t.top,d=a.stretchX||[[0,u]],p=a.stretchY||[[0,l]],f=function(t,e){return t+e[1]-e[0]},g=d.reduce(f,0),m=p.reduce(f,0),y=u-g,_=l-m,v=0,b=g,x=0,w=m,C=0,P=y,M=0,O=_;if(a.content&&i){var k=a.content;v=Mu(d,0,k[0]),x=Mu(p,0,k[1]),b=Mu(d,k[0],k[2]),w=Mu(p,k[1],k[3]),C=k[0]-v,M=k[1]-x,P=k[2]-k[0]-b,O=k[3]-k[1]-w}var E=function(i,o,u,l){var d=ku(i.stretch-v,b,c,t.left),p=Eu(i.fixed-C,P,i.stretch,g),f=ku(o.stretch-x,w,h,t.top),y=Eu(o.fixed-M,O,o.stretch,m),_=ku(u.stretch-v,b,c,t.left),k=Eu(u.fixed-C,P,u.stretch,g),E=ku(l.stretch-x,w,h,t.top),S=Eu(l.fixed-M,O,l.stretch,m),T=new r(d,f),A=new r(_,f),I=new r(_,E),D=new r(d,E),R=new r(p/s,y/s),F=new r(k/s,S/s),L=e*Math.PI/180;if(L){var z=Math.sin(L),N=Math.cos(L),B=[N,-z,z,N];T._matMult(B),A._matMult(B),D._matMult(B),I._matMult(B)}var V=i.stretch+i.fixed,U=o.stretch+o.fixed;return{tl:T,tr:A,bl:D,br:I,tex:{x:a.paddedRect.x+1+V,y:a.paddedRect.y+1+U,w:u.stretch+u.fixed-V,h:l.stretch+l.fixed-U},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:R,pixelOffsetBR:F,minFontScaleX:P/s/c,minFontScaleY:O/s/h,isSDF:n}};if(i&&(a.stretchX||a.stretchY))for(var S=Ou(d,y,g),T=Ou(p,_,m),A=0;A<S.length-1;A++)for(var I=S[A],D=S[A+1],R=0;R<T.length-1;R++)o.push(E(I,T[R],D,T[R+1]));else o.push(E({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:u+1},{fixed:0,stretch:l+1}));return o}function Mu(t,e,n){for(var i=0,r=0,o=t;r<o.length;r+=1){var a=o[r];i+=Math.max(e,Math.min(n,a[1]))-Math.max(e,Math.min(n,a[0]))}return i}function Ou(t,e,n){for(var i=[{fixed:-1,stretch:0}],r=0,o=t;r<o.length;r+=1){var a=o[r],s=a[0],u=a[1],l=i[i.length-1];i.push({fixed:s-l.stretch,stretch:l.stretch}),i.push({fixed:s-l.stretch,stretch:l.stretch+(u-s)})}return i.push({fixed:e+1,stretch:n}),i}function ku(t,e,n,i){return t/e*n+i}function Eu(t,e,n,i){return t-e*n/i}var Su=function(t,e,n,i,o,a,s,u,l,c,h,d){var p=s.top*u-l,f=s.bottom*u+l,g=s.left*u-l,m=s.right*u+l,y=s.collisionPadding;if(y&&(g-=y[0]*u,p-=y[1]*u,m+=y[2]*u,f+=y[3]*u),this.boxStartIndex=t.length,c){var _=f-p,v=m-g;_>0&&(_=Math.max(10*u,_),this._addLineCollisionCircles(t,e,n,n.segment,v,_,i,o,a,h))}else{if(d){var b=new r(g,p),x=new r(m,p),w=new r(g,f),C=new r(m,f),P=d*Math.PI/180;b._rotate(P),x._rotate(P),w._rotate(P),C._rotate(P),g=Math.min(b.x,x.x,w.x,C.x),m=Math.max(b.x,x.x,w.x,C.x),p=Math.min(b.y,x.y,w.y,C.y),f=Math.max(b.y,x.y,w.y,C.y)}t.emplaceBack(n.x,n.y,g,p,m,f,i,o,a,0,0)}this.boxEndIndex=t.length};Su.prototype._addLineCollisionCircles=function(t,e,n,i,r,o,a,s,u,l){var c=o/2,h=Math.floor(r/c)||1,d=1+.4*Math.log(l)/Math.LN2,p=Math.floor(h*d/2),f=-o/2,g=n,m=i+1,y=f,_=-r/2,v=_-r/4;do{if(--m<0){if(y>_)return;m=0;break}y-=e[m].dist(g),g=e[m]}while(y>v);for(var b=e[m].dist(e[m+1]),x=-p;x<h+p;x++){var w=x*c,C=_+w;if(w<0&&(C+=w),w>r&&(C+=w-r),!(C<y)){for(;y+b<C;){if(y+=b,++m+1>=e.length)return;b=e[m].dist(e[m+1])}var P=C-y,M=e[m],O=e[m+1].sub(M)._unit()._mult(P)._add(M)._round(),k=Math.abs(C-f)<c?0:.8*(C-f);t.emplaceBack(O.x,O.y,-o/2,-o/2,o/2,o/2,a,s,u,o/2,k)}}};var Tu=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=Au),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function Au(t,e){return t<e?-1:t>e?1:0}function Iu(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);for(var i=1/0,o=1/0,a=-1/0,s=-1/0,u=t[0],l=0;l<u.length;l++){var c=u[l];(!l||c.x<i)&&(i=c.x),(!l||c.y<o)&&(o=c.y),(!l||c.x>a)&&(a=c.x),(!l||c.y>s)&&(s=c.y)}var h=Math.min(a-i,s-o),d=h/2,p=new Tu([],Du);if(0===h)return new r(i,o);for(var f=i;f<a;f+=h)for(var g=o;g<s;g+=h)p.push(new Ru(f+d,g+d,d,t));for(var m=function(t){for(var e=0,n=0,i=0,r=t[0],o=0,a=r.length,s=a-1;o<a;s=o++){var u=r[o],l=r[s],c=u.x*l.y-l.x*u.y;n+=(u.x+l.x)*c,i+=(u.y+l.y)*c,e+=3*c}return new Ru(n/e,i/e,0,t)}(t),y=p.length;p.length;){var _=p.pop();(_.d>m.d||!m.d)&&(m=_,n&&console.log("found best %d after %d probes",Math.round(1e4*_.d)/1e4,y)),_.max-m.d<=e||(p.push(new Ru(_.p.x-(d=_.h/2),_.p.y-d,d,t)),p.push(new Ru(_.p.x+d,_.p.y-d,d,t)),p.push(new Ru(_.p.x-d,_.p.y+d,d,t)),p.push(new Ru(_.p.x+d,_.p.y+d,d,t)),y+=4)}return n&&(console.log("num probes: "+y),console.log("best distance: "+m.d)),m.p}function Du(t,e){return e.max-t.max}function Ru(t,e,n,i){this.p=new r(t,e),this.h=n,this.d=function(t,e){for(var n=!1,i=1/0,r=0;r<e.length;r++)for(var o=e[r],a=0,s=o.length,u=s-1;a<s;u=a++){var l=o[a],c=o[u];l.y>t.y!=c.y>t.y&&t.x<(c.x-l.x)*(t.y-l.y)/(c.y-l.y)+l.x&&(n=!n),i=Math.min(i,Ao(t,l,c))}return(n?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}Tu.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},Tu.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},Tu.prototype.peek=function(){return this.data[0]},Tu.prototype._up=function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i},Tu.prototype._down=function(t){for(var e=this.data,n=this.compare,i=this.length>>1,r=e[t];t<i;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,r)>=0)break;e[t]=a,t=o}e[t]=r};var Fu=Number.POSITIVE_INFINITY;function Lu(t,e){return e[1]!==Fu?function(t,e,n){var i=0,r=0;switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":r=n-7;break;case"bottom-right":case"bottom-left":case"bottom":r=7-n}switch(t){case"top-right":case"bottom-right":case"right":i=-e;break;case"top-left":case"bottom-left":case"left":i=e}return[i,r]}(t,e[0],e[1]):function(t,e){var n=0,i=0;e<0&&(e=0);var r=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":i=r-7;break;case"bottom-right":case"bottom-left":i=7-r;break;case"bottom":i=7-e;break;case"top":i=e-7}switch(t){case"top-right":case"bottom-right":n=-r;break;case"top-left":case"bottom-left":n=r;break;case"left":n=e;break;case"right":n=-e}return[n,i]}(t,e[0])}function zu(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var Nu=32640;function Bu(t,e,n,i,o,a,s,u,l,c,h,d,p,f){var g=function(t,e,n,i,o,a,s,u){for(var l=i.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,c=[],h=0,d=e.positionedLines;h<d.length;h+=1)for(var p=d[h],f=0,g=p.positionedGlyphs;f<g.length;f+=1){var m=g[f];if(m.rect){var y=m.rect||{},_=4,v=!0,b=1,x=0,w=(o||u)&&m.vertical,C=m.metrics.advance*m.scale/2;if(u&&e.verticalizable&&(x=p.lineOffset/2-(m.imageName?-(24-m.metrics.width*m.scale)/2:24*(m.scale-1))),m.imageName){var P=s[m.imageName];v=P.sdf,_=1/(b=P.pixelRatio)}var M=o?[m.x+C,m.y]:[0,0],O=o?[0,0]:[m.x+C+n[0],m.y+n[1]-x],k=[0,0];w&&(k=O,O=[0,0]);var E=(m.metrics.left-_)*m.scale-C+O[0],S=(-m.metrics.top-_)*m.scale+O[1],T=E+y.w*m.scale/b,A=S+y.h*m.scale/b,I=new r(E,S),D=new r(T,S),R=new r(E,A),F=new r(T,A);if(w){var L=new r(-C,C- -17),z=-Math.PI/2,N=12-C,B=new r(22-N,-(m.imageName?N:0)),V=new(Function.prototype.bind.apply(r,[null].concat(k)));I._rotateAround(z,L)._add(B)._add(V),D._rotateAround(z,L)._add(B)._add(V),R._rotateAround(z,L)._add(B)._add(V),F._rotateAround(z,L)._add(B)._add(V)}if(l){var U=Math.sin(l),j=Math.cos(l),q=[j,-U,U,j];I._matMult(q),D._matMult(q),R._matMult(q),F._matMult(q)}var G=new r(0,0),H=new r(0,0);c.push({tl:I,tr:D,bl:R,br:F,tex:y,writingMode:e.writingMode,glyphOffset:M,sectionIndex:m.sectionIndex,isSDF:v,pixelOffsetTL:G,pixelOffsetBR:H,minFontScaleX:0,minFontScaleY:0})}}return c}(0,n,u,o,a,s,i,t.allowVerticalPlacement),m=t.textSizeData,y=null;"source"===m.kind?(y=[pu*o.layout.get("text-size").evaluate(s,{})])[0]>Nu&&x(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===m.kind&&((y=[pu*f.compositeTextSizes[0].evaluate(s,{}),pu*f.compositeTextSizes[1].evaluate(s,{})])[0]>Nu||y[1]>Nu)&&x(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),t.addSymbols(t.text,g,y,u,a,s,c,e,l.lineStartIndex,l.lineLength,p);for(var _=0,v=h;_<v.length;_+=1)d[v[_]]=t.text.placedSymbolArray.length-1;return 4*g.length}function Vu(t){for(var e in t)return t[e];return null}function Uu(t,e,n,i){var r=t.compareText;if(e in r){for(var o=r[e],a=o.length-1;a>=0;a--)if(i.dist(o[a])<n)return!0}else r[e]=[];return r[e].push(i),!1}var ju=Ya.VectorTileFeature.types,qu=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Gu(t,e,n,i,r,o,a,s,u,l,c,h,d){var p=s?Math.min(Nu,Math.round(s[0])):0,f=s?Math.min(Nu,Math.round(s[1])):0;t.emplaceBack(e,n,Math.round(32*i),Math.round(32*r),o,a,(p<<1)+(u?1:0),f,16*l,16*c,256*h,256*d)}function Hu(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function Zu(t){for(var e=0,n=t.sections;e<n.length;e+=1)if(Si(n[e].text))return!0;return!1}var Wu=function(t){this.layoutVertexArray=new fr,this.indexArray=new Mr,this.programConfigurations=t,this.segments=new qr,this.dynamicLayoutVertexArray=new gr,this.opacityVertexArray=new mr,this.placedSymbolArray=new Dr};Wu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},Wu.prototype.upload=function(t,e,n,i){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,_s.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,vs.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,qu,!0),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(t))},Wu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},gi("SymbolBuffers",Wu);var Ku=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new qr,this.collisionVertexArray=new vr};Ku.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,bs.members,!0)},Ku.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},gi("CollisionBuffers",Ku);var Xu=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[];var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=fu(this.zoom,e["text-size"]),this.iconSizeData=fu(this.zoom,e["icon-size"]);var n=this.layers[0].layout,i=n.get("symbol-sort-key"),r=n.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==r&&void 0!==i.constantOr(1),this.sortFeaturesByY=("viewport-y"===r||"auto"===r&&!this.sortFeaturesByKey)&&(n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")),"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map((function(t){return Qs[t]}))),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.sourceID=t.sourceID};Xu.prototype.createArrays=function(){this.text=new Wu(new mo(_s.members,this.layers,this.zoom,(function(t){return/^text/.test(t)}))),this.icon=new Wu(new mo(_s.members,this.layers,this.zoom,(function(t){return/^icon/.test(t)}))),this.glyphOffsetArray=new zr,this.lineVertexArray=new Br,this.symbolInstances=new Fr},Xu.prototype.calculateGlyphDependencies=function(t,e,n,i,r){for(var o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(n||i)&&r){var a=Ps[t.charAt(o)];a&&(e[a.charCodeAt(0)]=!0)}},Xu.prototype.populate=function(t,e){var n=this.layers[0],i=n.layout,r=i.get("text-font"),o=i.get("text-field"),a=i.get("icon-image"),s=("constant"!==o.value.kind||o.value.value instanceof Jt&&!o.value.value.isEmpty()||o.value.value.toString().length>0)&&("constant"!==r.value.kind||r.value.value.length>0),u=("constant"!==a.value.kind||!!a.value.value)&&Object.keys(a.parameters).length>0,l=i.get("symbol-sort-key");if(this.features=[],s||u){for(var c=e.iconDependencies,h=e.glyphDependencies,d=e.availableImages,p=new ji(this.zoom),f=0,g=t;f<g.length;f+=1){var m=g[f],y=m.feature,_=m.id,v=m.index,b=m.sourceLayerIndex;if(n._featureFilter(p,y)){var x=void 0;if(s){var w=n.getValueAndResolveTokens("text-field",y,d),C=Jt.factory(w);Zu(C)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Bi()||this.hasRTLText&&Ui.isParsed())&&(x=Cs(C,n,y))}var P=void 0;if(u){var M=n.getValueAndResolveTokens("icon-image",y,d);P=M instanceof te?M:te.fromString(M)}if(x||P){var O=this.sortFeaturesByKey?l.evaluate(y,{}):void 0,k={id:_,text:x,icon:P,index:v,sourceLayerIndex:b,geometry:xo(y),properties:y.properties,type:ju[y.type],sortKey:O};if(this.features.push(k),P&&(c[P.name]=!0),x){var E=r.evaluate(y,{}).join(","),S="map"===i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Qs.vertical)>=0;for(var T=0,A=x.sections;T<A.length;T+=1){var I=A[T];if(I.image)c[I.image.name]=!0;else{var D=Ci(x.toString()),R=I.fontStack||E,F=h[R]=h[R]||{};this.calculateGlyphDependencies(I.text,F,S,this.allowVerticalPlacement,D)}}}}}}"line"===i.get("symbol-placement")&&(this.features=function(t){var e={},n={},i=[],r=0;function o(e){i.push(t[e]),r++}function a(t,e,r){var o=n[t];return delete n[t],n[e]=o,i[o].geometry[0].pop(),i[o].geometry[0]=i[o].geometry[0].concat(r[0]),o}function s(t,n,r){var o=e[n];return delete e[n],e[t]=o,i[o].geometry[0].shift(),i[o].geometry[0]=r[0].concat(i[o].geometry[0]),o}function u(t,e,n){var i=n?e[0][e[0].length-1]:e[0][0];return t+":"+i.x+":"+i.y}for(var l=0;l<t.length;l++){var c=t[l],h=c.geometry,d=c.text?c.text.toString():null;if(d){var p=u(d,h),f=u(d,h,!0);if(p in n&&f in e&&n[p]!==e[f]){var g=s(p,f,h),m=a(p,f,i[g].geometry);delete e[p],delete n[f],n[u(d,i[m].geometry,!0)]=m,i[g].geometry=null}else p in n?a(p,f,h):f in e?s(p,f,h):(o(l),e[p]=r-1,n[f]=r-1)}else o(l)}return i.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(t,e){return t.sortKey-e.sortKey}))}},Xu.prototype.update=function(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))},Xu.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},Xu.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Xu.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t),this.textCollisionCircle.upload(t),this.iconCollisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Xu.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy(),this.textCollisionCircle.destroy(),this.iconCollisionCircle.destroy()},Xu.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Xu.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var i=t.dist(e[t.segment+1]),r=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:i},a<e.length-1&&(i+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:r},s>0&&(r+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var l=o[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},Xu.prototype.addSymbols=function(t,e,n,i,r,o,a,s,u,l,c){for(var h=t.indexArray,d=t.layoutVertexArray,p=t.segments.prepareSegment(4*e.length,d,h,o.sortKey),f=this.glyphOffsetArray.length,g=p.vertexLength,m=this.allowVerticalPlacement&&a===Qs.vertical?Math.PI/2:0,y=o.text&&o.text.sections,_=0;_<e.length;_++){var v=e[_],b=v.tl,x=v.tr,w=v.bl,C=v.br,P=v.tex,M=v.pixelOffsetTL,O=v.pixelOffsetBR,k=v.minFontScaleX,E=v.minFontScaleY,S=v.glyphOffset,T=v.isSDF,A=v.sectionIndex,I=p.vertexLength,D=S[1];Gu(d,s.x,s.y,b.x,D+b.y,P.x,P.y,n,T,M.x,M.y,k,E),Gu(d,s.x,s.y,x.x,D+x.y,P.x+P.w,P.y,n,T,O.x,M.y,k,E),Gu(d,s.x,s.y,w.x,D+w.y,P.x,P.y+P.h,n,T,M.x,O.y,k,E),Gu(d,s.x,s.y,C.x,D+C.y,P.x+P.w,P.y+P.h,n,T,O.x,O.y,k,E),Hu(t.dynamicLayoutVertexArray,s,m),h.emplaceBack(I,I+1,I+2),h.emplaceBack(I+1,I+2,I+3),p.vertexLength+=4,p.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(S[0]),_!==e.length-1&&A===e[_+1].sectionIndex||t.programConfigurations.populatePaintArrays(d.length,o,o.index,{},y&&y[A])}t.placedSymbolArray.emplaceBack(s.x,s.y,f,this.glyphOffsetArray.length-f,g,u,l,s.segment,n?n[0]:0,n?n[1]:0,i[0],i[1],a,0,!1,0,c)},Xu.prototype._addCollisionDebugVertex=function(t,e,n,i,r,o){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,i,r,Math.round(o.x),Math.round(o.y))},Xu.prototype.addCollisionDebugVertices=function(t,e,n,i,o,a,s,u){var l=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),c=l.vertexLength,h=o.layoutVertexArray,d=o.collisionVertexArray,p=s.anchorX,f=s.anchorY;if(this._addCollisionDebugVertex(h,d,a,p,f,new r(t,e)),this._addCollisionDebugVertex(h,d,a,p,f,new r(n,e)),this._addCollisionDebugVertex(h,d,a,p,f,new r(n,i)),this._addCollisionDebugVertex(h,d,a,p,f,new r(t,i)),l.vertexLength+=4,u){var g=o.indexArray;g.emplaceBack(c,c+1,c+2),g.emplaceBack(c,c+2,c+3),l.primitiveLength+=2}else{var m=o.indexArray;m.emplaceBack(c,c+1),m.emplaceBack(c+1,c+2),m.emplaceBack(c+2,c+3),m.emplaceBack(c+3,c),l.primitiveLength+=4}},Xu.prototype.addDebugCollisionBoxes=function(t,e,n,i){for(var r=t;r<e;r++){var o=this.collisionBoxArray.get(r),a=o.radius>0;this.addCollisionDebugVertices(o.x1,o.y1,o.x2,o.y2,a?i?this.textCollisionCircle:this.iconCollisionCircle:i?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,n,a)}},Xu.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ku(_r,xs.members,Or),this.iconCollisionBox=new Ku(_r,xs.members,Or),this.textCollisionCircle=new Ku(_r,ws.members,Mr),this.iconCollisionCircle=new Ku(_r,ws.members,Mr);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},Xu.prototype._deserializeCollisionBoxesForSymbol=function(t,e,n,i,r,o,a,s,u){for(var l={},c=e;c<n;c++){var h=t.get(c);if(0===h.radius){l.textBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,anchorPointX:h.anchorPointX,anchorPointY:h.anchorPointY},l.textFeatureIndex=h.featureIndex;break}l.textCircles||(l.textCircles=[],l.textFeatureIndex=h.featureIndex),l.textCircles.push(h.anchorPointX,h.anchorPointY,h.radius,h.signedDistanceFromAnchor,1)}for(var d=i;d<r;d++){var p=t.get(d);if(0===p.radius){l.verticalTextBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},l.verticalTextFeatureIndex=p.featureIndex;break}}for(var f=o;f<a;f++){var g=t.get(f);if(0===g.radius){l.iconBox={x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2,anchorPointX:g.anchorPointX,anchorPointY:g.anchorPointY},l.iconFeatureIndex=g.featureIndex;break}}for(var m=s;m<u;m++){var y=t.get(m);if(0===y.radius){l.verticalIconBox={x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,anchorPointX:y.anchorPointX,anchorPointY:y.anchorPointY},l.verticalIconFeatureIndex=y.featureIndex;break}}return l},Xu.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}},Xu.prototype.hasTextData=function(){return this.text.segments.get().length>0},Xu.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Xu.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox&&this.textCollisionCircle&&this.iconCollisionCircle},Xu.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Xu.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Xu.prototype.hasTextCollisionCircleData=function(){return this.hasDebugData()&&this.textCollisionCircle.segments.get().length>0},Xu.prototype.hasIconCollisionCircleData=function(){return this.hasDebugData()&&this.iconCollisionCircle.segments.get().length>0},Xu.prototype.addIndicesForPlacedSymbol=function(t,e){for(var n=t.placedSymbolArray.get(e),i=n.vertexStartIndex+4*n.numGlyphs,r=n.vertexStartIndex;r<i;r+=4)t.indexArray.emplaceBack(r,r+1,r+2),t.indexArray.emplaceBack(r+1,r+2,r+3)},Xu.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),n=Math.cos(t),i=[],r=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);i.push(0|Math.round(e*s.anchorX+n*s.anchorY)),r.push(s.featureIndex)}return o.sort((function(t,e){return i[t]-i[e]||r[e]-r[t]})),o},Xu.prototype.addToSortKeyRanges=function(t,e){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},Xu.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var n=0,i=this.symbolInstanceIndexes;n<i.length;n+=1){var r=this.symbolInstances.get(i[n]);this.featureSortOrder.push(r.featureIndex),[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((function(t,n,i){t>=0&&i.indexOf(t)===n&&e.addIndicesForPlacedSymbol(e.text,t)})),r.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,r.verticalPlacedTextSymbolIndex),r.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,r.placedIconSymbolIndex),r.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,r.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},gi("SymbolBucket",Xu,{omit:["layers","collisionBoxArray","features","compareText"]}),Xu.MAX_GLYPHS=65535,Xu.addDynamicAttributes=Hu;var $u=new nr({"symbol-placement":new Yi(kt.layout_symbol["symbol-placement"]),"symbol-spacing":new Yi(kt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Yi(kt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Qi(kt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Yi(kt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Yi(kt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Yi(kt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Yi(kt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Yi(kt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Qi(kt.layout_symbol["icon-size"]),"icon-text-fit":new Yi(kt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Yi(kt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Qi(kt.layout_symbol["icon-image"]),"icon-rotate":new Qi(kt.layout_symbol["icon-rotate"]),"icon-padding":new Yi(kt.layout_symbol["icon-padding"]),"icon-keep-upright":new Yi(kt.layout_symbol["icon-keep-upright"]),"icon-offset":new Qi(kt.layout_symbol["icon-offset"]),"icon-anchor":new Qi(kt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Yi(kt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Yi(kt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Yi(kt.layout_symbol["text-rotation-alignment"]),"text-field":new Qi(kt.layout_symbol["text-field"]),"text-font":new Qi(kt.layout_symbol["text-font"]),"text-size":new Qi(kt.layout_symbol["text-size"]),"text-max-width":new Qi(kt.layout_symbol["text-max-width"]),"text-line-height":new Yi(kt.layout_symbol["text-line-height"]),"text-letter-spacing":new Qi(kt.layout_symbol["text-letter-spacing"]),"text-justify":new Qi(kt.layout_symbol["text-justify"]),"text-radial-offset":new Qi(kt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Yi(kt.layout_symbol["text-variable-anchor"]),"text-anchor":new Qi(kt.layout_symbol["text-anchor"]),"text-max-angle":new Yi(kt.layout_symbol["text-max-angle"]),"text-writing-mode":new Yi(kt.layout_symbol["text-writing-mode"]),"text-rotate":new Qi(kt.layout_symbol["text-rotate"]),"text-padding":new Yi(kt.layout_symbol["text-padding"]),"text-keep-upright":new Yi(kt.layout_symbol["text-keep-upright"]),"text-transform":new Qi(kt.layout_symbol["text-transform"]),"text-offset":new Qi(kt.layout_symbol["text-offset"]),"text-allow-overlap":new Yi(kt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Yi(kt.layout_symbol["text-ignore-placement"]),"text-optional":new Yi(kt.layout_symbol["text-optional"])}),Yu={paint:new nr({"icon-opacity":new Qi(kt.paint_symbol["icon-opacity"]),"icon-color":new Qi(kt.paint_symbol["icon-color"]),"icon-halo-color":new Qi(kt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Qi(kt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Qi(kt.paint_symbol["icon-halo-blur"]),"icon-translate":new Yi(kt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Yi(kt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Qi(kt.paint_symbol["text-opacity"]),"text-color":new Qi(kt.paint_symbol["text-color"],{runtimeType:Bt,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new Qi(kt.paint_symbol["text-halo-color"]),"text-halo-width":new Qi(kt.paint_symbol["text-halo-width"]),"text-halo-blur":new Qi(kt.paint_symbol["text-halo-blur"]),"text-translate":new Yi(kt.paint_symbol["text-translate"]),"text-translate-anchor":new Yi(kt.paint_symbol["text-translate-anchor"])}),layout:$u},Qu=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Ft,this.defaultValue=t};Qu.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},Qu.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},Qu.prototype.possibleOutputs=function(){return[void 0]},Qu.prototype.serialize=function(){return null},gi("FormatSectionOverride",Qu,{omit:["defaultValue"]});var Ju=function(t){function e(e){t.call(this,e,Yu)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,n){if(t.prototype.recalculate.call(this,e,n),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var i=this.layout.get("text-writing-mode");if(i){for(var r=[],o=0,a=i;o<a.length;o+=1){var s=a[o];r.indexOf(s)<0&&r.push(s)}this.layout._values["text-writing-mode"]=r}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,n){var i=this.layout.get(t).evaluate(e,{},n),r=this._unevaluatedLayout._values[t];return r.isDataDriven()||Cn(r.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,(function(e,n){return n in t?String(t[n]):""}))}(e.properties,i)},e.prototype.createBucket=function(t){return new Xu(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var t=0,n=Yu.paint.overridableProperties;t<n.length;t+=1){var i=n[t];if(e.hasPaintOverride(this.layout,i)){var r,o=this.paint.get(i),a=new Qu(o),s=new wn(a,o.property.specification);r="constant"===o.value.kind||"source"===o.value.kind?new Mn("source",s):new On("composite",s,o.value.zoomStops,o.value._interpolationType),this.paint._values[i]=new Xi(o.property,r,o.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,n,i){return!(!this.layout||n.isDataDriven()||i.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var n=t.get("text-field"),i=Yu.paint.properties[e],r=!1,o=function(t){for(var e=0,n=t;e<n.length;e+=1)if(i.overrides&&i.overrides.hasOverride(n[e]))return void(r=!0)};if("constant"===n.value.kind&&n.value.value instanceof Jt)o(n.value.value.sections);else if("source"===n.value.kind){var a=function(t){r||(t instanceof re&&ne(t.value)===qt?o(t.value.sections):t instanceof ue?o(t.sections):t.eachChild(a))},s=n.value;s._styleExpression&&a(s._styleExpression.expression)}return r},e}(ir),tl={paint:new nr({"background-color":new Yi(kt.paint_background["background-color"]),"background-pattern":new tr(kt.paint_background["background-pattern"]),"background-opacity":new Yi(kt.paint_background["background-opacity"])})},el=function(t){function e(e){t.call(this,e,tl)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(ir),nl={paint:new nr({"raster-opacity":new Yi(kt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Yi(kt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Yi(kt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Yi(kt.paint_raster["raster-brightness-max"]),"raster-saturation":new Yi(kt.paint_raster["raster-saturation"]),"raster-contrast":new Yi(kt.paint_raster["raster-contrast"]),"raster-resampling":new Yi(kt.paint_raster["raster-resampling"]),"raster-fade-duration":new Yi(kt.paint_raster["raster-fade-duration"])})},il=function(t){function e(e){t.call(this,e,nl)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(ir),rl=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(ir),ol={circle:qo,heatmap:Jo,hillshade:ea,fill:Ua,"fill-extrusion":os,line:ms,symbol:Ju,background:el,raster:il},al=self.HTMLImageElement,sl=self.HTMLCanvasElement,ul=self.HTMLVideoElement,ll=self.ImageData,cl=self.ImageBitmap,hl=function(t,e,n,i){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,i)};hl.prototype.update=function(t,e,n){var i=t.width,r=t.height,o=!(this.size&&this.size[0]===i&&this.size[1]===r||n),a=this.context,s=a.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[i,r],t instanceof al||t instanceof sl||t instanceof ul||t instanceof ll||cl&&t instanceof cl?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,i,r,0,this.format,s.UNSIGNED_BYTE,t.data);else{var u=n||{x:0,y:0},l=u.x,c=u.y;t instanceof al||t instanceof sl||t instanceof ul||t instanceof ll||cl&&t instanceof cl?s.texSubImage2D(s.TEXTURE_2D,0,l,c,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,l,c,i,r,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},hl.prototype.bind=function(t,e,n){var i=this.context.gl;i.bindTexture(i.TEXTURE_2D,this.texture),n!==i.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=i.LINEAR),t!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e),this.wrap=e)},hl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},hl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var dl=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};dl.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){t._triggered=!1,t._callback()}),0))},dl.prototype.remove=function(){delete this._channel,this._callback=function(){}};var pl=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},g(["receive","process"],this),this.invoker=new dl(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=P()?t:self};function fl(t,e,n){var i=2*Math.PI*6378137/256/Math.pow(2,n);return[t*i-2*Math.PI*6378137/2,e*i-2*Math.PI*6378137/2]}pl.prototype.send=function(t,e,n,i,r){var o=this;void 0===r&&(r=!1);var a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[a]=n);var s=k(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!n,targetMapId:i,mustQueue:r,sourceMapId:this.mapId,data:vi(e,s)},s),{cancel:function(){n&&delete o.callbacks[a],o.target.postMessage({id:a,type:"<cancel>",targetMapId:i,sourceMapId:o.mapId})}}},pl.prototype.receive=function(t){var e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[n];var i=this.cancelCallbacks[n];delete this.cancelCallbacks[n],i&&i()}else P()||e.mustQueue?(this.tasks[n]=e,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,e)},pl.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},pl.prototype.processTask=function(t,e){var n=this;if("<response>"===e.type){var i=this.callbacks[t];delete this.callbacks[t],i&&(e.error?i(bi(e.error)):i(null,bi(e.data)))}else{var r=!1,o=k(this.globalScope)?void 0:[],a=e.hasCallback?function(e,i){r=!0,delete n.cancelCallbacks[t],n.target.postMessage({id:t,type:"<response>",sourceMapId:n.mapId,error:e?vi(e):null,data:vi(i,o)},o)}:function(t){r=!0},s=null,u=bi(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,u,a);else if(this.parent.getWorkerSource){var l=e.type.split(".");s=this.parent.getWorkerSource(e.sourceMapId,l[0],u.source)[l[1]](u,a)}else a(new Error("Could not find function "+e.type));!r&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}},pl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var gl=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};gl.prototype.setNorthEast=function(t){return this._ne=t instanceof ml?new ml(t.lng,t.lat):ml.convert(t),this},gl.prototype.setSouthWest=function(t){return this._sw=t instanceof ml?new ml(t.lng,t.lat):ml.convert(t),this},gl.prototype.extend=function(t){var e,n,i=this._sw,r=this._ne;if(t instanceof ml)e=t,n=t;else{if(!(t instanceof gl))return Array.isArray(t)?t.every(Array.isArray)?this.extend(gl.convert(t)):this.extend(ml.convert(t)):this;if(n=t._ne,!(e=t._sw)||!n)return this}return i||r?(i.lng=Math.min(e.lng,i.lng),i.lat=Math.min(e.lat,i.lat),r.lng=Math.max(n.lng,r.lng),r.lat=Math.max(n.lat,r.lat)):(this._sw=new ml(e.lng,e.lat),this._ne=new ml(n.lng,n.lat)),this},gl.prototype.getCenter=function(){return new ml((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},gl.prototype.getSouthWest=function(){return this._sw},gl.prototype.getNorthEast=function(){return this._ne},gl.prototype.getNorthWest=function(){return new ml(this.getWest(),this.getNorth())},gl.prototype.getSouthEast=function(){return new ml(this.getEast(),this.getSouth())},gl.prototype.getWest=function(){return this._sw.lng},gl.prototype.getSouth=function(){return this._sw.lat},gl.prototype.getEast=function(){return this._ne.lng},gl.prototype.getNorth=function(){return this._ne.lat},gl.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},gl.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},gl.prototype.isEmpty=function(){return!(this._sw&&this._ne)},gl.prototype.contains=function(t){var e=ml.convert(t),n=e.lng,i=e.lat,r=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&r},gl.convert=function(t){return!t||t instanceof gl?t:new gl(t)};var ml=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};ml.prototype.wrap=function(){return new ml(l(this.lng,-180,180),this.lat)},ml.prototype.toArray=function(){return[this.lng,this.lat]},ml.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},ml.prototype.distanceTo=function(t){var e=Math.PI/180,n=this.lat*e,i=t.lat*e,r=Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(r,1))},ml.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new gl(new ml(this.lng-n,this.lat-e),new ml(this.lng+n,this.lat+e))},ml.convert=function(t){if(t instanceof ml)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new ml(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new ml(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var yl=2*Math.PI*6371008.8;function _l(t){return yl*Math.cos(t*Math.PI/180)}function vl(t){return(180+t)/360}function bl(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function xl(t,e){return t/_l(e)}function wl(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var Cl=function(t,e,n){void 0===n&&(n=0),this.x=+t,this.y=+e,this.z=+n};Cl.fromLngLat=function(t,e){void 0===e&&(e=0);var n=ml.convert(t);return new Cl(vl(n.lng),bl(n.lat),xl(e,n.lat))},Cl.prototype.toLngLat=function(){return new ml(360*this.x-180,wl(this.y))},Cl.prototype.toAltitude=function(){return this.z*_l(wl(this.y))},Cl.prototype.meterInMercatorCoordinateUnits=function(){return 1/yl*(t=wl(this.y),1/Math.cos(t*Math.PI/180));var t};var Pl=function(t,e,n){this.z=t,this.x=e,this.y=n,this.key=kl(0,t,t,e,n)};Pl.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Pl.prototype.url=function(t,e){var n,i,r,o,a,s=(i=this.y,r=this.z,o=fl(256*(n=this.x),256*(i=Math.pow(2,r)-i-1),r),a=fl(256*(n+1),256*(i+1),r),o[0]+","+o[1]+","+a[0]+","+a[1]),u=function(t,e,n){for(var i,r="",o=t;o>0;o--)r+=(e&(i=1<<o-1)?1:0)+(n&i?2:0);return r}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)},Pl.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new r((t.x*e-this.x)*vo,(t.y*e-this.y)*vo)},Pl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Ml=function(t,e){this.wrap=t,this.canonical=e,this.key=kl(t,e.z,e.z,e.x,e.y)},Ol=function(t,e,n,i,r){this.overscaledZ=t,this.wrap=e,this.canonical=new Pl(n,+i,+r),this.key=kl(e,t,n,i,r)};function kl(t,e,n,i,r){(t*=2)<0&&(t=-1*t-1);var o=1<<n;return(o*o*t+o*r+i).toString(36)+n.toString(36)+e.toString(36)}Ol.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Ol.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Ol(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ol(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Ol.prototype.calculateScaledKey=function(t,e){var n=this.canonical.z-t;return t>this.canonical.z?kl(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):kl(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)},Ol.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Ol.prototype.children=function(t){if(this.overscaledZ>=t)return[new Ol(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,i=2*this.canonical.y;return[new Ol(e,this.wrap,e,n,i),new Ol(e,this.wrap,e,n+1,i),new Ol(e,this.wrap,e,n,i+1),new Ol(e,this.wrap,e,n+1,i+1)]},Ol.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Ol.prototype.wrapped=function(){return new Ol(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Ol.prototype.unwrapTo=function(t){return new Ol(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Ol.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Ol.prototype.toUnwrapped=function(){return new Ml(this.wrap,this.canonical)},Ol.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Ol.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new Cl(t.x-this.wrap,t.y))},gi("CanonicalTileID",Pl),gi("OverscaledTileID",Ol,{omit:["posMatrix"]});var El=function(t,e,n){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return x('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var i=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=n||"mapbox";for(var r=0;r<i;r++)this.data[this._idx(-1,r)]=this.data[this._idx(0,r)],this.data[this._idx(i,r)]=this.data[this._idx(i-1,r)],this.data[this._idx(r,-1)]=this.data[this._idx(r,0)],this.data[this._idx(r,i)]=this.data[this._idx(r,i-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(i,-1)]=this.data[this._idx(i-1,0)],this.data[this._idx(-1,i)]=this.data[this._idx(0,i-1)],this.data[this._idx(i,i)]=this.data[this._idx(i-1,i-1)]};El.prototype.get=function(t,e){var n=new Uint8Array(this.data.buffer),i=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[i],n[i+1],n[i+2])},El.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},El.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},El.prototype._unpackMapbox=function(t,e,n){return(256*t*256+256*e+n)/10-1e4},El.prototype._unpackTerrarium=function(t,e,n){return 256*t+e+n/256-32768},El.prototype.getPixels=function(){return new $o({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},El.prototype.backfillBorder=function(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var i=e*this.dim,r=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:i=r-1;break;case 1:r=i+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,u=-n*this.dim,l=o;l<a;l++)for(var c=i;c<r;c++)this.data[this._idx(c,l)]=t.data[this._idx(c+s,l+u)]},gi("DEMData",El);var Sl=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};Sl.prototype.encode=function(t){return this._stringToNumber[t]},Sl.prototype.decode=function(t){return this._numberToString[t]};var Tl=function(t,e,n,i,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=i,this.properties=t.properties,this.id=r},Al={geometry:{configurable:!0}};Al.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Al.geometry.set=function(t){this._geometry=t},Tl.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Tl.prototype,Al);var Il=function(){this.state={},this.stateChanges={},this.deletedStates={}};Il.prototype.updateState=function(t,e,n){var i=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][i]=this.stateChanges[t][i]||{},c(this.stateChanges[t][i],n),null===this.deletedStates[t])for(var r in this.deletedStates[t]={},this.state[t])r!==i&&(this.deletedStates[t][r]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][i])for(var o in this.deletedStates[t][i]={},this.state[t][i])n[o]||(this.deletedStates[t][i][o]=null);else for(var a in n)this.deletedStates[t]&&this.deletedStates[t][i]&&null===this.deletedStates[t][i][a]&&delete this.deletedStates[t][i][a]},Il.prototype.removeFeatureState=function(t,e,n){if(null!==this.deletedStates[t]){var i=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][i]&&(this.deletedStates[t][i]=this.deletedStates[t][i]||{},this.deletedStates[t][i][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][i])for(n in this.deletedStates[t][i]={},this.stateChanges[t][i])this.deletedStates[t][i][n]=null;else this.deletedStates[t][i]=null;else this.deletedStates[t]=null}},Il.prototype.getState=function(t,e){var n=String(e),i=c({},(this.state[t]||{})[n],(this.stateChanges[t]||{})[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var r=this.deletedStates[t][e];if(null===r)return{};for(var o in r)delete i[o]}return i},Il.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},Il.prototype.coalesceChanges=function(t,e){var n={};for(var i in this.stateChanges){this.state[i]=this.state[i]||{};var r={};for(var o in this.stateChanges[i])this.state[i][o]||(this.state[i][o]={}),c(this.state[i][o],this.stateChanges[i][o]),r[o]=this.state[i][o];n[i]=r}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a])for(var u in this.state[a])s[u]={},this.state[a][u]={};else for(var l in this.deletedStates[a]){if(null===this.deletedStates[a][l])this.state[a][l]={};else for(var h=0,d=Object.keys(this.deletedStates[a][l]);h<d.length;h+=1)delete this.state[a][l][d[h]];s[l]=this.state[a][l]}n[a]=n[a]||{},c(n[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var p in t)t[p].setFeatureState(n,e)};var Dl=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new ci(vo,16,0),this.grid3D=new ci(vo,16,0),this.featureIndexArray=new Ur,this.promoteId=e};function Rl(t){for(var e=1/0,n=1/0,i=-1/0,r=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),n=Math.min(n,s.y),i=Math.max(i,s.x),r=Math.max(r,s.y)}return{minX:e,minY:n,maxX:i,maxY:r}}function Fl(t,e){return e-t}Dl.prototype.insert=function(t,e,n,i,r,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,r);for(var s=o?this.grid3D:this.grid,u=0;u<e.length;u++){for(var l=e[u],c=[1/0,1/0,-1/0,-1/0],h=0;h<l.length;h++){var d=l[h];c[0]=Math.min(c[0],d.x),c[1]=Math.min(c[1],d.y),c[2]=Math.max(c[2],d.x),c[3]=Math.max(c[3],d.y)}c[0]<vo&&c[1]<vo&&c[2]>=0&&c[3]>=0&&s.insert(a,c[0],c[1],c[2],c[3])}},Dl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ya.VectorTile(new ks(this.rawTileData)).layers,this.sourceLayerCoder=new Sl(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Dl.prototype.query=function(t,e,n){var i=this;this.loadVTLayers();for(var o=t.params||{},a=vo/t.tileSize/t.scale,s=zn(o.filter),u=t.queryGeometry,l=t.queryPadding*a,c=Rl(u),h=this.grid.query(c.minX-l,c.minY-l,c.maxX+l,c.maxY+l),d=Rl(t.cameraQueryGeometry),p=0,f=this.grid3D.query(d.minX-l,d.minY-l,d.maxX+l,d.maxY+l,(function(e,n,i,o){return function(t,e,n,i,o){for(var a=0,s=t;a<s.length;a+=1){var u=s[a];if(e<=u.x&&n<=u.y&&i>=u.x&&o>=u.y)return!0}var l=[new r(e,n),new r(e,o),new r(i,o),new r(i,n)];if(t.length>2)for(var c=0,h=l;c<h.length;c+=1)if(Do(t,h[c]))return!0;for(var d=0;d<t.length-1;d++)if(Ro(t[d],t[d+1],l))return!0;return!1}(t.cameraQueryGeometry,e-l,n-l,i+l,o+l)}));p<f.length;p+=1)h.push(f[p]);h.sort(Fl);for(var g,m={},y=function(r){var l=h[r];if(l!==g){g=l;var c=i.featureIndexArray.get(l),d=null;i.loadMatchingFeature(m,c.bucketIndex,c.sourceLayerIndex,c.featureIndex,s,o.layers,e,(function(e,r,o){d||(d=xo(e));var s={};return void 0!==o&&(s=n.getState(r.sourceLayer||"_geojsonTileLayer",o)),r.queryIntersectsFeature(u,e,s,d,i.z,t.transform,a,t.pixelPosMatrix)}))}},_=0;_<h.length;_++)y(_);return m},Dl.prototype.loadMatchingFeature=function(t,e,n,i,r,o,a,s){var u=this.bucketLayerIDs[e];if(!o||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(o,u)){var l=this.sourceLayerCoder.decode(n),c=this.vtLayers[l].feature(i);if(r(new ji(this.tileID.overscaledZ),c))for(var h=this.getId(c,l),d=0;d<u.length;d++){var p=u[d];if(!(o&&o.indexOf(p)<0)){var f=a[p];if(f){var g=!s||s(c,f,h);if(g){var m=new Tl(c,this.z,this.x,this.y,h);m.layer=f.serialize();var y=t[p];void 0===y&&(y=t[p]=[]),y.push({featureIndex:i,feature:m,intersectionZ:g})}}}}}},Dl.prototype.lookupSymbolFeatures=function(t,e,n,i,r,o){var a={};this.loadVTLayers();for(var s=zn(i),u=0,l=t;u<l.length;u+=1)this.loadMatchingFeature(a,e,n,l[u],s,r,o);return a},Dl.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var i=0,r=n[e];i<r.length;i+=1)if(t===r[i])return!0;return!1},Dl.prototype.getId=function(t,e){var n=t.id;return this.promoteId&&"boolean"==typeof(n=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(n=Number(n)),n},gi("FeatureIndex",Dl,{omit:["rawTileData","sourceLayerCoder"]});var Ll=function(t,e){this.tileID=t,this.uid=d(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Ll.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<L.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},Ll.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Ll.prototype.loadVectorData=function(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var i in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;for(var i=function(){var t=o[r],i=t.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==i.length){t.layers=i,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map((function(t){return i.filter((function(e){return e.id===t}))[0]})));for(var a=0,s=i;a<s.length;a+=1)n[s[a].id]=t}},r=0,o=t;r<o.length;r+=1)i();return n}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var r=this.buckets[i];if(r instanceof Xu){if(this.hasSymbolBuckets=!0,!n)break;r.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var a=this.buckets[o];if(a instanceof Xu&&a.hasRTLText){this.hasRTLText=!0,Ui.isLoading()||Ui.isLoaded()||"deferred"!==Bi()||Vi();break}}for(var s in this.queryPadding=0,this.buckets){var u=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(u))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new Ar},Ll.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ll.prototype.getBucket=function(t){return this.buckets[t.id]},Ll.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var i=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new hl(t,this.imageAtlas.image,i.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new hl(t,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null)},Ll.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},Ll.prototype.queryRenderedFeatures=function(t,e,n,i,r,o,a,s,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,cameraQueryGeometry:i,scale:r,tileSize:this.tileSize,pixelPosMatrix:u,transform:a,params:o,queryPadding:this.queryPadding*s},t,e):{}},Ll.prototype.querySourceFeatures=function(t,e){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var i=n.loadVTLayers(),r=e?e.sourceLayer:"",o=i._geojsonTileLayer||i[r];if(o)for(var a=zn(e&&e.filter),s=this.tileID.canonical,u=s.z,l=s.x,c=s.y,h={z:u,x:l,y:c},d=0;d<o.length;d++){var p=o.feature(d);if(a(new ji(this.tileID.overscaledZ),p)){var f=n.getId(p,r),g=new Tl(p,u,l,c,f);g.tile=h,t.push(g)}}}},Ll.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Ll.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ll.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=M(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var i=Date.now(),r=!1;if(this.expirationTime>i)r=!1;else if(e)if(this.expirationTime<e)r=!0;else{var o=this.expirationTime-e;o?this.expirationTime=i+Math.max(o,3e4):r=!0}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ll.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Ll.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var n=this.latestFeatureIndex.loadVTLayers();for(var i in this.buckets){var r=this.buckets[i],o=r.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=t[o];a&&s&&0!==Object.keys(s).length&&(r.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{}),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(i).queryRadius(r))))}}},Ll.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Ll.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<L.now()},Ll.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ll.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=L.now()+t},Ll.prototype.setDependencies=function(t,e){for(var n={},i=0,r=e;i<r.length;i+=1)n[r[i]]=!0;this.dependencies[t]=n},Ll.prototype.hasDependency=function(t,e){for(var n=0,i=t;n<i.length;n+=1){var r=this.dependencies[i[n]];if(r)for(var o=0,a=e;o<a.length;o+=1)if(r[a[o]])return!0}return!1};var zl=self.performance,Nl=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},zl.mark(this._marks.start)};Nl.prototype.finish=function(){zl.mark(this._marks.end);var t=zl.getEntriesByName(this._marks.measure);return 0===t.length&&(zl.measure(this._marks.measure,this._marks.start,this._marks.end),t=zl.getEntriesByName(this._marks.measure),zl.clearMarks(this._marks.start),zl.clearMarks(this._marks.end),zl.clearMeasures(this._marks.measure)),t},t.Actor=pl,t.AlphaImage=Xo,t.CanonicalTileID=Pl,t.CollisionBoxArray=Ar,t.Color=$t,t.DEMData=El,t.DataConstantProperty=Yi,t.DictionaryCoder=Sl,t.EXTENT=vo,t.ErrorEvent=Mt,t.EvaluationParameters=ji,t.Event=Pt,t.Evented=Ot,t.FeatureIndex=Dl,t.FillBucket=Na,t.FillExtrusionBucket=es,t.ImageAtlas=Ys,t.ImagePosition=Xs,t.LineBucket=ds,t.LngLat=ml,t.LngLatBounds=gl,t.MercatorCoordinate=Cl,t.ONE_EM=24,t.OverscaledTileID=Ol,t.Point=r,t.Point$1=r,t.Properties=nr,t.Protobuf=ks,t.RGBAImage=$o,t.RequestManager=q,t.RequestPerformance=Nl,t.ResourceType=pt,t.SegmentVector=qr,t.SourceFeatureState=Il,t.StructArrayLayout1ui2=kr,t.StructArrayLayout2i4=lr,t.StructArrayLayout2ui4=Or,t.StructArrayLayout3ui6=Mr,t.StructArrayLayout4i8=cr,t.SymbolBucket=Xu,t.Texture=hl,t.Tile=Ll,t.Transitionable=Hi,t.Uniform1f=eo,t.Uniform1i=to,t.Uniform2f=no,t.Uniform3f=io,t.Uniform4f=ro,t.UniformColor=oo,t.UniformMatrix4f=so,t.UnwrappedTileID=Ml,t.ValidationError=Et,t.WritingMode=Qs,t.ZoomHistory=xi,t.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},t.addDynamicAttributes=Hu,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var i=t.length,r=new Array(t.length),o=null;t.forEach((function(t,a){e(t,(function(t,e){t&&(o=t),r[a]=e,0==--i&&n(o,r)}))}))},t.bezier=a,t.bindAll=g,t.browser=L,t.cacheEntryPossiblyAdded=function(t){++ht>st&&(t.getActor().send("enforceCacheSizeLimit",at),ht=0)},t.clamp=u,t.clearTileCache=function(t){var e=self.caches.delete(ot);t&&e.catch(t).then((function(){return t()}))},t.clone=function(t){var e=new Uo(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=v,t.clone$2=function(t){var e=new Uo(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.config=z,t.create=function(){var t=new Uo(16);return Uo!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=function(){var t=new Uo(9);return Uo!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},t.create$2=function(){var t=new Uo(4);return Uo!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Pn,t.createLayout=sr,t.createStyleLayer=function(t){return"custom"===t.type?new rl(t):new ol[t.type](t)},t.cross=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=r*u-o*s,t[1]=o*a-i*u,t[2]=i*s-r*a,t},t.deepEqual=function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(!t(e[i],n[i]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var r in e)if(!t(e[r],n[r]))return!1;return!0}return e===n},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=s,t.emitValidationErrors=li,t.endsWith=m,t.enforceCacheSizeLimit=function(t){ut(),Q&&Q.then((function(e){e.keys().then((function(n){for(var i=0;i<n.length-t;i++)e.delete(n[i])}))}))},t.evaluateSizeForFeature=gu,t.evaluateSizeForZoom=mu,t.evaluateVariableOffset=Lu,t.evented=Ni,t.extend=c,t.featureFilter=zn,t.filterObject=_,t.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=lu,t.getAnchorJustification=zu,t.getArrayBuffer=vt,t.getImage=xt,t.getJSON=function(t,e){return _t(c(t,{type:"json"}),e)},t.getRTLTextPluginStatus=Bi,t.getReferrer=yt,t.getVideo=function(t,e){var n,i,r=self.document.createElement("video");r.muted=!0,r.onloadstart=function(){e(null,r)};for(var o=0;o<t.length;o++){var a=self.document.createElement("source");n=t[o],i=void 0,(i=self.document.createElement("a")).href=n,(i.protocol!==self.document.location.protocol||i.host!==self.document.location.host)&&(r.crossOrigin="Anonymous"),a.src=t[o],r.appendChild(a)}return{cancel:function(){}}},t.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],d=e[10],p=e[11],f=e[12],g=e[13],m=e[14],y=e[15],_=n*s-i*a,v=n*u-r*a,b=n*l-o*a,x=i*u-r*s,w=i*l-o*s,C=r*l-o*u,P=c*g-h*f,M=c*m-d*f,O=c*y-p*f,k=h*m-d*g,E=h*y-p*g,S=d*y-p*m,T=_*S-v*E+b*k+x*O-w*M+C*P;return T?(t[0]=(s*S-u*E+l*k)*(T=1/T),t[1]=(r*E-i*S-o*k)*T,t[2]=(g*C-m*w+y*x)*T,t[3]=(d*w-h*C-p*x)*T,t[4]=(u*O-a*S-l*M)*T,t[5]=(n*S-r*O+o*M)*T,t[6]=(m*b-f*C-y*v)*T,t[7]=(c*C-d*b+p*v)*T,t[8]=(a*E-s*O+l*P)*T,t[9]=(i*O-n*E-o*P)*T,t[10]=(f*w-g*b+y*_)*T,t[11]=(h*b-c*w-p*_)*T,t[12]=(s*M-a*k-u*P)*T,t[13]=(n*k-i*M+r*P)*T,t[14]=(g*v-f*x-m*_)*T,t[15]=(c*x-h*v+d*_)*T,t):null},t.isChar=wi,t.isMapboxURL=G,t.keysDifference=function(t,e){var n=[];for(var i in t)i in e||n.push(i);return n},t.makeRequest=_t,t.mapObject=y,t.mercatorXfromLng=vl,t.mercatorYfromLat=bl,t.mercatorZfromAltitude=xl,t.multiply=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],d=e[9],p=e[10],f=e[11],g=e[12],m=e[13],y=e[14],_=e[15],v=n[0],b=n[1],x=n[2],w=n[3];return t[0]=v*i+b*s+x*h+w*g,t[1]=v*r+b*u+x*d+w*m,t[2]=v*o+b*l+x*p+w*y,t[3]=v*a+b*c+x*f+w*_,t[4]=(v=n[4])*i+(b=n[5])*s+(x=n[6])*h+(w=n[7])*g,t[5]=v*r+b*u+x*d+w*m,t[6]=v*o+b*l+x*p+w*y,t[7]=v*a+b*c+x*f+w*_,t[8]=(v=n[8])*i+(b=n[9])*s+(x=n[10])*h+(w=n[11])*g,t[9]=v*r+b*u+x*d+w*m,t[10]=v*o+b*l+x*p+w*y,t[11]=v*a+b*c+x*f+w*_,t[12]=(v=n[12])*i+(b=n[13])*s+(x=n[14])*h+(w=n[15])*g,t[13]=v*r+b*u+x*d+w*m,t[14]=v*o+b*l+x*p+w*y,t[15]=v*a+b*c+x*f+w*_,t},t.mvt=Ya,t.normalize=function(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t},t.number=Ce,t.offscreenCanvasSupported=dt,t.ortho=function(t,e,n,i,r,o,a){var s=1/(e-n),u=1/(i-r),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(r+i)*u,t[14]=(a+o)*l,t[15]=1,t},t.parseGlyphPBF=function(t){return new ks(t).readFields(Hs,[])},t.pbf=ks,t.performSymbolLayout=function(t,e,n,i,o,a){t.createArrays(),t.tilePixelRatio=vo/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var s=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,l={};if("composite"===t.textSizeData.kind){var c=t.textSizeData,h=c.maxZoom;l.compositeTextSizes=[u["text-size"].possiblyEvaluate(new ji(c.minZoom)),u["text-size"].possiblyEvaluate(new ji(h))]}if("composite"===t.iconSizeData.kind){var d=t.iconSizeData,p=d.maxZoom;l.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new ji(d.minZoom)),u["icon-size"].possiblyEvaluate(new ji(p))]}l.layoutTextSize=u["text-size"].possiblyEvaluate(new ji(t.zoom+1)),l.layoutIconSize=u["icon-size"].possiblyEvaluate(new ji(t.zoom+1)),l.textMaxSize=u["text-size"].possiblyEvaluate(new ji(18));for(var f=24*s.get("text-line-height"),g="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),m=s.get("text-keep-upright"),y=s.get("text-size"),_=function(){var a=b[v],u=s.get("text-font").evaluate(a,{}).join(","),c=y.evaluate(a,{}),h=l.layoutTextSize.evaluate(a,{}),d=l.layoutIconSize.evaluate(a,{}),p={horizontal:{},vertical:void 0},_=a.text,w=[0,0];if(_){var C=_.toString(),P=24*s.get("text-letter-spacing").evaluate(a,{}),M=function(t){for(var e=0,n=t;e<n.length;e+=1)if(!Pi(n[e].charCodeAt(0)))return!1;return!0}(C)?P:0,O=s.get("text-anchor").evaluate(a,{}),k=s.get("text-variable-anchor");if(!k){var E=s.get("text-radial-offset").evaluate(a,{});w=E?Lu(O,[24*E,Fu]):s.get("text-offset").evaluate(a,{}).map((function(t){return 24*t}))}var S=g?"center":s.get("text-justify").evaluate(a,{}),T=s.get("symbol-placement"),A="point"===T?24*s.get("text-max-width").evaluate(a,{}):0,I=function(){t.allowVerticalPlacement&&Ci(C)&&(p.vertical=eu(_,e,n,o,u,A,f,O,"left",M,w,Qs.vertical,!0,T,h,c))};if(!g&&k){for(var D="auto"===S?k.map((function(t){return zu(t)})):[S],R=!1,F=0;F<D.length;F++){var L=D[F];if(!p.horizontal[L])if(R)p.horizontal[L]=p.horizontal[0];else{var z=eu(_,e,n,o,u,A,f,"center",L,M,w,Qs.horizontal,!1,T,h,c);z&&(p.horizontal[L]=z,R=1===z.positionedLines.length)}}I()}else{"auto"===S&&(S=zu(O));var N=eu(_,e,n,o,u,A,f,O,S,M,w,Qs.horizontal,!1,T,h,c);N&&(p.horizontal[S]=N),I(),Ci(C)&&g&&m&&(p.vertical=eu(_,e,n,o,u,A,f,O,S,M,w,Qs.vertical,!1,T,h,c))}}var B=void 0,V=!1;if(a.icon&&a.icon.name){var U=i[a.icon.name];U&&(B=function(t,e,n){var i=lu(n),r=e[0]-t.displaySize[0]*i.horizontalAlign,o=e[1]-t.displaySize[1]*i.verticalAlign;return{image:t,top:o,bottom:o+t.displaySize[1],left:r,right:r+t.displaySize[0]}}(o[a.icon.name],s.get("icon-offset").evaluate(a,{}),s.get("icon-anchor").evaluate(a,{})),V=U.sdf,void 0===t.sdfIcons?t.sdfIcons=U.sdf:t.sdfIcons!==U.sdf&&x("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(U.pixelRatio!==t.pixelRatio||0!==s.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}var j=Vu(p.horizontal)||p.vertical;t.iconsInText=!!j&&j.iconsInText,(j||B)&&function(t,e,n,i,o,a,s,u,l,c){var h=a.textMaxSize.evaluate(e,{});void 0===h&&(h=s);var d,p=t.layers[0].layout,f=p.get("icon-offset").evaluate(e,{}),g=Vu(n.horizontal),m=s/24,y=t.tilePixelRatio*m,_=t.tilePixelRatio*h/24,v=t.tilePixelRatio*u,b=t.tilePixelRatio*p.get("symbol-spacing"),w=p.get("text-padding")*t.tilePixelRatio,C=p.get("icon-padding")*t.tilePixelRatio,P=p.get("text-max-angle")/180*Math.PI,M="map"===p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),O="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),k=p.get("symbol-placement"),E=b/2,S=p.get("icon-text-fit");i&&"none"!==S&&(t.allowVerticalPlacement&&n.vertical&&(d=hu(i,n.vertical,S,p.get("icon-text-fit-padding"),f,m)),g&&(i=hu(i,g,S,p.get("icon-text-fit-padding"),f,m)));var T=function(r,s){s.x<0||s.x>=vo||s.y<0||s.y>=vo||function(t,e,n,i,r,o,a,s,u,l,c,h,d,p,f,g,m,y,_,v,b,w,C){var P,M,O,k,E,S=t.addToLineVertexArray(e,n),T=0,A=0,I=0,D=0,R=-1,F=-1,L={},z=Wr(""),N=0,B=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(N=(P=s.layout.get("text-offset").evaluate(b,{}).map((function(t){return 24*t})))[0],B=P[1]):(N=24*s.layout.get("text-radial-offset").evaluate(b,{}),B=Fu),t.allowVerticalPlacement&&i.vertical){var V=s.layout.get("text-rotate").evaluate(b,{})+90;k=new Su(u,n,e,l,c,h,i.vertical,d,p,f,t.overscaling,V),a&&(E=new Su(u,n,e,l,c,h,a,m,y,f,t.overscaling,V))}if(r){var U=s.layout.get("icon-rotate").evaluate(b,{}),j="none"!==s.layout.get("icon-text-fit"),q=Pu(r,U,C,j),G=a?Pu(a,U,C,j):void 0;O=new Su(u,n,e,l,c,h,r,m,y,!1,t.overscaling,U),T=4*q.length;var H=t.iconSizeData,Z=null;"source"===H.kind?(Z=[pu*s.layout.get("icon-size").evaluate(b,{})])[0]>Nu&&x(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===H.kind&&((Z=[pu*w.compositeIconSizes[0].evaluate(b,{}),pu*w.compositeIconSizes[1].evaluate(b,{})])[0]>Nu||Z[1]>Nu)&&x(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),t.addSymbols(t.icon,q,Z,v,_,b,!1,e,S.lineStartIndex,S.lineLength,-1),R=t.icon.placedSymbolArray.length-1,G&&(A=4*G.length,t.addSymbols(t.icon,G,Z,v,_,b,Qs.vertical,e,S.lineStartIndex,S.lineLength,-1),F=t.icon.placedSymbolArray.length-1)}for(var W in i.horizontal){var K=i.horizontal[W];if(!M){z=Wr(K.text);var X=s.layout.get("text-rotate").evaluate(b,{});M=new Su(u,n,e,l,c,h,K,d,p,f,t.overscaling,X)}var $=1===K.positionedLines.length;if(I+=Bu(t,e,K,o,s,f,b,g,S,i.vertical?Qs.horizontal:Qs.horizontalOnly,$?Object.keys(i.horizontal):[W],L,R,w),$)break}i.vertical&&(D+=Bu(t,e,i.vertical,o,s,f,b,g,S,Qs.vertical,["vertical"],L,F,w));var Y=M?M.boxStartIndex:t.collisionBoxArray.length,Q=M?M.boxEndIndex:t.collisionBoxArray.length,J=k?k.boxStartIndex:t.collisionBoxArray.length,tt=k?k.boxEndIndex:t.collisionBoxArray.length,et=O?O.boxStartIndex:t.collisionBoxArray.length,nt=O?O.boxEndIndex:t.collisionBoxArray.length,it=E?E.boxStartIndex:t.collisionBoxArray.length,rt=E?E.boxEndIndex:t.collisionBoxArray.length;t.glyphOffsetArray.length>=Xu.MAX_GLYPHS&&x("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,b.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,L.right>=0?L.right:-1,L.center>=0?L.center:-1,L.left>=0?L.left:-1,L.vertical||-1,R,F,z,Y,Q,J,tt,et,nt,it,rt,l,I,D,T,A,0,d,N,B)}(t,s,r,n,i,o,d,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,y,w,M,l,v,C,O,f,e,a,c)};if("line"===k)for(var A=0,I=function(t,e,n,i,o){for(var a=[],s=0;s<t.length;s++)for(var u=t[s],l=void 0,c=0;c<u.length-1;c++){var h=u[c],d=u[c+1];h.x<0&&d.x<0||(h.x<0?h=new r(0,h.y+(0-h.x)/(d.x-h.x)*(d.y-h.y))._round():d.x<0&&(d=new r(0,h.y+(0-h.x)/(d.x-h.x)*(d.y-h.y))._round()),h.y<0&&d.y<0||(h.y<0?h=new r(h.x+(0-h.y)/(d.y-h.y)*(d.x-h.x),0)._round():d.y<0&&(d=new r(h.x+(0-h.y)/(d.y-h.y)*(d.x-h.x),0)._round()),h.x>=i&&d.x>=i||(h.x>=i?h=new r(i,h.y+(i-h.x)/(d.x-h.x)*(d.y-h.y))._round():d.x>=i&&(d=new r(i,h.y+(i-h.x)/(d.x-h.x)*(d.y-h.y))._round()),h.y>=o&&d.y>=o||(h.y>=o?h=new r(h.x+(o-h.y)/(d.y-h.y)*(d.x-h.x),o)._round():d.y>=o&&(d=new r(h.x+(o-h.y)/(d.y-h.y)*(d.x-h.x),o)._round()),l&&h.equals(l[l.length-1])||a.push(l=[h]),l.push(d)))))}return a}(e.geometry,0,0,vo,vo);A<I.length;A+=1)for(var D=I[A],R=0,F=Cu(D,b,P,n.vertical||g,i,24,_,t.overscaling,vo);R<F.length;R+=1){var L=F[R];g&&Uu(t,g.text,E,L)||T(D,L)}else if("line-center"===k)for(var z=0,N=e.geometry;z<N.length;z+=1){var B=N[z];if(B.length>1){var V=wu(B,P,n.vertical||g,i,24,_);V&&T(B,V)}}else if("Polygon"===e.type)for(var U=0,j=Ra(e.geometry,0);U<j.length;U+=1){var q=j[U],G=Iu(q,16);T(q[0],new du(G.x,G.y,0))}else if("LineString"===e.type)for(var H=0,Z=e.geometry;H<Z.length;H+=1){var W=Z[H];T(W,new du(W[0].x,W[0].y,0))}else if("Point"===e.type)for(var K=0,X=e.geometry;K<X.length;K+=1)for(var $=0,Y=X[K];$<Y.length;$+=1){var Q=Y[$];T([Q],new du(Q.x,Q.y,0))}}(t,a,p,B,i,l,h,d,w,V)},v=0,b=t.features;v<b.length;v+=1)_();a&&t.generateCollisionDebugBuffers()},t.perspective=function(t,e,n,i,r){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+i)*(o=1/(i-r)),t[14]=2*r*i*o):(t[10]=-1,t[14]=-2*i),t},t.pick=function(t,e){for(var n={},i=0;i<e.length;i++){var r=e[i];r in t&&(n[r]=t[r])}return n},t.plugin=Ui,t.polygonIntersectsPolygon=Po,t.postMapLoadEvent=rt,t.postTurnstileEvent=nt,t.potpack=Ks,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=gi,t.registerForPluginStateChange=function(t){return t({pluginStatus:Ri,pluginURL:Fi}),Ni.on("pluginStateChange",t),t},t.rotate=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=i*u+o*s,t[1]=r*u+a*s,t[2]=i*-s+o*u,t[3]=r*-s+a*u,t},t.rotateX=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+l*i,t[5]=a*r+c*i,t[6]=s*r+h*i,t[7]=u*r+d*i,t[8]=l*r-o*i,t[9]=c*r-a*i,t[10]=h*r-s*i,t[11]=d*r-u*i,t},t.rotateZ=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+l*i,t[1]=a*r+c*i,t[2]=s*r+h*i,t[3]=u*r+d*i,t[4]=l*r-o*i,t[5]=c*r-a*i,t[6]=h*r-s*i,t[7]=d*r-u*i,t},t.scale=function(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},t.scale$2=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},t.setCacheLimits=function(t,e){at=t,st=e},t.setRTLTextPlugin=function(t,e,n){if(void 0===n&&(n=!1),Ri===Ti||Ri===Ai||Ri===Ii)throw new Error("setRTLTextPlugin cannot be called multiple times.");Fi=L.resolveURL(t),Ri=Ti,Di=e,zi(),n||Vi()},t.sphericalToCartesian=function(t){var e=t[0],n=t[1],i=t[2];return n+=90,n*=Math.PI/180,i*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(i),y:e*Math.sin(n)*Math.sin(i),z:e*Math.cos(i)}},t.sqrLen=function(t){var e=t[0],n=t[1];return e*e+n*n},t.styleSpec=kt,t.sub=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},t.symbolSize=yu,t.transformMat3=function(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t},t.transformMat4=jo,t.translate=function(t,e,n){var i,r,o,a,s,u,l,c,h,d,p,f,g=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*y+e[12],t[13]=e[1]*g+e[5]*m+e[9]*y+e[13],t[14]=e[2]*g+e[6]*m+e[10]*y+e[14],t[15]=e[3]*g+e[7]*m+e[11]*y+e[15]):(r=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],d=e[9],p=e[10],f=e[11],t[0]=i=e[0],t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=h,t[9]=d,t[10]=p,t[11]=f,t[12]=i*g+s*m+h*y+e[12],t[13]=r*g+u*m+d*y+e[13],t[14]=o*g+l*m+p*y+e[14],t[15]=a*g+c*m+f*y+e[15]),t},t.triggerPluginCompletionEvent=Li,t.uniqueId=d,t.validateCustomStyleLayer=function(t){var e=[],n=t.id;return void 0===n&&e.push({message:"layers."+n+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+n+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=ai,t.validateStyle=oi,t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.vectorTile=Ya,t.version="1.8.1",t.warnOnce=x,t.webpSupported=N,t.window=self,t.wrap=l})),i(0,(function(t){function e(t){var n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var i="[",r=0,o=t;r<o.length;r+=1)i+=e(o[r])+",";return i+"]"}for(var a=Object.keys(t).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+e(t[a[u]])+",";return s+"}"}function n(n){for(var i="",r=0,o=t.refProperties;r<o.length;r+=1)i+="/"+e(n[o[r]]);return i}var i=function(t){this.keyCache={},t&&this.replace(t)};i.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},i.prototype.update=function(e,i){for(var r=this,o=0,a=e;o<a.length;o+=1){var s=a[o];this._layerConfigs[s.id]=s;var u=this._layers[s.id]=t.createStyleLayer(s);u._featureFilter=t.featureFilter(u.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var l=0,c=i;l<c.length;l+=1){var h=c[l];delete this.keyCache[h],delete this._layerConfigs[h],delete this._layers[h]}this.familiesBySource={};for(var d=0,p=function(t,e){for(var i={},r=0;r<t.length;r++){var o=e&&e[t[r].id]||n(t[r]);e&&(e[t[r].id]=o);var a=i[o];a||(a=i[o]=[]),a.push(t[r])}var s=[];for(var u in i)s.push(i[u]);return s}(t.values(this._layerConfigs),this.keyCache);d<p.length;d+=1){var f=p[d].map((function(t){return r._layers[t.id]})),g=f[0];if("none"!==g.visibility){var m=g.source||"",y=this.familiesBySource[m];y||(y=this.familiesBySource[m]={});var _=g.sourceLayer||"_geojsonTileLayer",v=y[_];v||(v=y[_]=[]),v.push(f)}}};var r=function(e){var n={},i=[];for(var r in e){var o=e[r],a=n[r]={};for(var s in o){var u=o[+s];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var l={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2};i.push(l),a[s]={rect:l,metrics:u.metrics}}}}var c=t.potpack(i),h=new t.AlphaImage({width:c.w||1,height:c.h||1});for(var d in e){var p=e[d];for(var f in p){var g=p[+f];if(g&&0!==g.bitmap.width&&0!==g.bitmap.height){var m=n[d][f].rect;t.AlphaImage.copy(g.bitmap,h,{x:0,y:0},{x:m.x+1,y:m.y+1},g.bitmap)}}}this.image=h,this.positions=n};t.register("GlyphAtlas",r);var o=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId};function a(e,n,i){for(var r=new t.EvaluationParameters(n),o=0,a=e;o<a.length;o+=1)a[o].recalculate(r,i)}function s(e,n){var i=t.getArrayBuffer(e.request,(function(e,i,r,o){e?n(e):i&&n(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(i)),rawData:i,cacheControl:r,expires:o})}));return function(){i.cancel(),n()}}o.prototype.parse=function(e,n,i,o,s){var u=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var l=new t.DictionaryCoder(Object.keys(e.layers).sort()),c=new t.FeatureIndex(this.tileID,this.promoteId);c.bucketLayerIDs=[];var h,d,p,f,g={},m={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:i},y=n.familiesBySource[this.source];for(var _ in y){var v=e.layers[_];if(v){1===v.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+_+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var b=l.encode(_),x=[],w=0;w<v.length;w++){var C=v.feature(w),P=c.getId(C,_);x.push({feature:C,id:P,index:w,sourceLayerIndex:b})}for(var M=0,O=y[_];M<O.length;M+=1){var k=O[M],E=k[0];E.minzoom&&this.zoom<Math.floor(E.minzoom)||E.maxzoom&&this.zoom>=E.maxzoom||"none"!==E.visibility&&(a(k,this.zoom,i),(g[E.id]=E.createBucket({index:c.bucketLayerIDs.length,layers:k,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:b,sourceID:this.source})).populate(x,m),c.bucketLayerIDs.push(k.map((function(t){return t.id}))))}}}var S=t.mapObject(m.glyphDependencies,(function(t){return Object.keys(t).map(Number)}));Object.keys(S).length?o.send("getGlyphs",{uid:this.uid,stacks:S},(function(t,e){h||(h=t,d=e,I.call(u))})):d={};var T=Object.keys(m.iconDependencies);T.length?o.send("getImages",{icons:T,source:this.source,tileID:this.tileID,type:"icons"},(function(t,e){h||(h=t,p=e,I.call(u))})):p={};var A=Object.keys(m.patternDependencies);function I(){if(h)return s(h);if(d&&p&&f){var e=new r(d),n=new t.ImageAtlas(p,f);for(var o in g){var u=g[o];u instanceof t.SymbolBucket?(a(u.layers,this.zoom,i),t.performSymbolLayout(u,d,e.positions,p,n.iconPositions,this.showCollisionBoxes)):u.hasPattern&&(u instanceof t.LineBucket||u instanceof t.FillBucket||u instanceof t.FillExtrusionBucket)&&(a(u.layers,this.zoom,i),u.addFeatures(m,n.patternPositions))}this.status="done",s(null,{buckets:t.values(g).filter((function(t){return!t.isEmpty()})),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:n,glyphMap:this.returnDependencies?d:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?e.positions:null})}}A.length?o.send("getImages",{icons:A,source:this.source,tileID:this.tileID,type:"patterns"},(function(t,e){h||(h=t,f=e,I.call(u))})):f={},I.call(this)};var u=function(t,e,n,i){this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=i||s,this.loading={},this.loaded={}};u.prototype.loadTile=function(e,n){var i=this,r=e.uid;this.loading||(this.loading={});var a=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),s=this.loading[r]=new o(e);s.abort=this.loadVectorData(e,(function(e,o){if(delete i.loading[r],e||!o)return s.status="done",i.loaded[r]=s,n(e);var u=o.rawData,l={};o.expires&&(l.expires=o.expires),o.cacheControl&&(l.cacheControl=o.cacheControl);var c={};if(a){var h=a.finish();h&&(c.resourceTiming=JSON.parse(JSON.stringify(h)))}s.vectorTile=o.vectorTile,s.parse(o.vectorTile,i.layerIndex,i.availableImages,i.actor,(function(e,i){if(e||!i)return n(e);n(null,t.extend({rawTileData:u.slice(0)},i,l,c))})),i.loaded=i.loaded||{},i.loaded[r]=s}))},u.prototype.reloadTile=function(t,e){var n=this,i=this.loaded,r=t.uid,o=this;if(i&&i[r]){var a=i[r];a.showCollisionBoxes=t.showCollisionBoxes;var s=function(t,i){var r=a.reloadCallback;r&&(delete a.reloadCallback,a.parse(a.vectorTile,o.layerIndex,n.availableImages,o.actor,r)),e(t,i)};"parsing"===a.status?a.reloadCallback=s:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},u.prototype.abortTile=function(t,e){var n=this.loading,i=t.uid;n&&n[i]&&n[i].abort&&(n[i].abort(),delete n[i]),e()},u.prototype.removeTile=function(t,e){var n=this.loaded,i=t.uid;n&&n[i]&&delete n[i],e()};var l=t.window.ImageBitmap,c=function(){this.loaded={}};function h(t){var e=0;if(t&&t.length>0){e+=Math.abs(d(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(d(t[n]))}return e}function d(t){var e,n,i,r,o,a,s=0,u=t.length;if(u>2){for(a=0;a<u;a++)a===u-2?(i=u-2,r=u-1,o=0):a===u-1?(i=u-1,r=0,o=1):(i=a,r=a+1,o=a+2),e=t[i],n=t[r],s+=(p(t[o][0])-p(e[0]))*Math.sin(p(n[1]));s=6378137*s*6378137/2}return s}function p(t){return t*Math.PI/180}c.prototype.loadTile=function(e,n){var i=e.uid,r=e.encoding,o=e.rawImageData,a=l&&o instanceof l?this.getImageData(o):o,s=new t.DEMData(i,a,r);this.loaded=this.loaded||{},this.loaded[i]=s,n(null,s)},c.prototype.getImageData=function(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var n=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:n.width,height:n.height},n.data)},c.prototype.removeTile=function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]};var f={geometry:function t(e){var n,i=0;switch(e.type){case"Polygon":return h(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)i+=h(e.coordinates[n]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)i+=t(e.geometries[n]);return i}},ring:d};function g(t,e){return function(n){return t(n,e)}}function m(t,e){t[0]=y(t[0],e=!!e);for(var n=1;n<t.length;n++)t[n]=y(t[n],!e);return t}function y(t,e){return function(t){return f.ring(t)>=0}(t)===e?t:t.reverse()}var _=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,v=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};v.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],n=0,i=this._feature.geometry;n<i.length;n+=1){var r=i[n];e.push([new t.Point$1(r[0],r[1])])}return e}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var u=[],l=0,c=s[a];l<c.length;l+=1){var h=c[l];u.push(new t.Point$1(h[0],h[1]))}o.push(u)}return o},v.prototype.toGeoJSON=function(t,e,n){return _.call(this,t,e,n)};var b=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};b.prototype.feature=function(t){return new v(this._features[t])};var x=t.vectorTile.VectorTileFeature,w=C;function C(t,e){this.options=e||{},this.features=t,this.length=t.length}function P(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}C.prototype.feature=function(t){return new P(this.features[t],this.options.extent)},P.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var i=e[n],r=[],o=0;o<i.length;o++)r.push(new t.Point$1(i[o][0],i[o][1]));this.geometry.push(r)}return this.geometry},P.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,i=1/0,r=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),n=Math.max(n,u.x),i=Math.min(i,u.y),r=Math.max(r,u.y)}return[e,i,n,r]},P.prototype.toGeoJSON=x.prototype.toGeoJSON;var M=k,O=w;function k(e){var n=new t.pbf;return function(t,e){for(var n in t.layers)e.writeMessage(3,E,t.layers[n])}(e,n),n.finish()}function E(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)i.feature=t.feature(n),e.writeMessage(2,S,i);var r=i.keys;for(n=0;n<r.length;n++)e.writeStringField(3,r[n]);var o=i.values;for(n=0;n<o.length;n++)e.writeMessage(4,R,o[n])}function S(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,T,t),e.writeVarintField(3,n.type),e.writeMessage(4,D,n)}function T(t,e){var n=t.feature,i=t.keys,r=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var u=o[s];void 0===u&&(i.push(s),o[s]=u=i.length-1),e.writeVarint(u);var l=n.properties[s],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var h=c+":"+l,d=a[h];void 0===d&&(r.push(l),a[h]=d=r.length-1),e.writeVarint(d)}}function A(t,e){return(e<<3)+(7&t)}function I(t){return t<<1^t>>31}function D(t,e){for(var n=t.loadGeometry(),i=t.type,r=0,o=0,a=n.length,s=0;s<a;s++){var u=n[s],l=1;1===i&&(l=u.length),e.writeVarint(A(1,l));for(var c=3===i?u.length-1:u.length,h=0;h<c;h++){1===h&&1!==i&&e.writeVarint(A(2,c-1));var d=u[h].x-r,p=u[h].y-o;e.writeVarint(I(d)),e.writeVarint(I(p)),r+=d,o+=p}3===i&&e.writeVarint(A(7,1))}}function R(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function F(t,e,n,i){L(t,n,i),L(e,2*n,2*i),L(e,2*n+1,2*i+1)}function L(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function z(t,e,n,i){var r=t-n,o=e-i;return r*r+o*o}M.fromVectorTileJs=k,M.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var i in t)n[i]=new w(t[i].features,e),n[i].name=i,n[i].version=e.version,n[i].extent=e.extent;return k({layers:n})},M.GeoJSONWrapper=O;var N=function(t){return t[0]},B=function(t){return t[1]},V=function(t,e,n,i,r){void 0===e&&(e=N),void 0===n&&(n=B),void 0===i&&(i=64),void 0===r&&(r=Float64Array),this.nodeSize=i,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new r(2*t.length),u=0;u<t.length;u++)a[u]=u,s[2*u]=e(t[u]),s[2*u+1]=n(t[u]);!function t(e,n,i,r,o,a){if(!(o-r<=i)){var s=r+o>>1;!function t(e,n,i,r,o,a){for(;o>r;){if(o-r>600){var s=o-r+1,u=i-r+1,l=Math.log(s),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);t(e,n,i,Math.max(r,Math.floor(i-u*c/s+h)),Math.min(o,Math.floor(i+(s-u)*c/s+h)),a)}var d=n[2*i+a],p=r,f=o;for(F(e,n,r,i),n[2*o+a]>d&&F(e,n,r,o);p<f;){for(F(e,n,p,f),p++,f--;n[2*p+a]<d;)p++;for(;n[2*f+a]>d;)f--}n[2*r+a]===d?F(e,n,r,f):F(e,n,++f,o),f<=i&&(r=f+1),i<=f&&(o=f-1)}}(e,n,s,r,o,a%2),t(e,n,i,r,s-1,a+1),t(e,n,i,s+1,o,a+1)}}(a,s,i,0,a.length-1,0)};V.prototype.range=function(t,e,n,i){return function(t,e,n,i,r,o,a){for(var s,u,l=[0,t.length-1,0],c=[];l.length;){var h=l.pop(),d=l.pop(),p=l.pop();if(d-p<=a)for(var f=p;f<=d;f++)u=e[2*f+1],(s=e[2*f])>=n&&s<=r&&u>=i&&u<=o&&c.push(t[f]);else{var g=Math.floor((p+d)/2);u=e[2*g+1],(s=e[2*g])>=n&&s<=r&&u>=i&&u<=o&&c.push(t[g]);var m=(h+1)%2;(0===h?n<=s:i<=u)&&(l.push(p),l.push(g-1),l.push(m)),(0===h?r>=s:o>=u)&&(l.push(g+1),l.push(d),l.push(m))}}return c}(this.ids,this.coords,t,e,n,i,this.nodeSize)},V.prototype.within=function(t,e,n){return function(t,e,n,i,r,o){for(var a=[0,t.length-1,0],s=[],u=r*r;a.length;){var l=a.pop(),c=a.pop(),h=a.pop();if(c-h<=o)for(var d=h;d<=c;d++)z(e[2*d],e[2*d+1],n,i)<=u&&s.push(t[d]);else{var p=Math.floor((h+c)/2),f=e[2*p],g=e[2*p+1];z(f,g,n,i)<=u&&s.push(t[p]);var m=(l+1)%2;(0===l?n-r<=f:i-r<=g)&&(a.push(h),a.push(p-1),a.push(m)),(0===l?n+r>=f:i+r>=g)&&(a.push(p+1),a.push(c),a.push(m))}}return s}(this.ids,this.coords,t,e,n,this.nodeSize)};var U={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},j=function(t){this.options=X(Object.create(U),t),this.trees=new Array(this.options.maxZoom+1)};function q(t,e,n,i,r){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:i,properties:r}}function G(t,e){var n=t.geometry.coordinates,i=n[1];return{x:W(n[0]),y:K(i),zoom:1/0,index:e,parentId:-1}}function H(t){return{type:"Feature",id:t.id,properties:Z(t),geometry:{type:"Point",coordinates:[(i=t.x,360*(i-.5)),(e=t.y,n=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var e,n,i}function Z(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return X(X({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function W(t){return t/360+.5}function K(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function X(t,e){for(var n in e)t[n]=e[n];return t}function $(t){return t.x}function Y(t){return t.y}function Q(t,e,n,i,r,o){var a=r-n,s=o-i;if(0!==a||0!==s){var u=((t-n)*a+(e-i)*s)/(a*a+s*s);u>1?(n=r,i=o):u>0&&(n+=a*u,i+=s*u)}return(a=t-n)*a+(s=e-i)*s}function J(t,e,n,i){var r={id:void 0===t?null:t,type:e,geometry:n,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)tt(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var i=0;i<e.length;i++)tt(t,e[i]);else if("MultiPolygon"===n)for(i=0;i<e.length;i++)for(var r=0;r<e[i].length;r++)tt(t,e[i][r])}(r),r}function tt(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function et(t,e,n,i){if(e.geometry){var r=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],u=e.id;if(n.promoteId?u=e.properties[n.promoteId]:n.generateId&&(u=i||0),"Point"===o)nt(r,s);else if("MultiPoint"===o)for(var l=0;l<r.length;l++)nt(r[l],s);else if("LineString"===o)it(r,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(l=0;l<r.length;l++)it(r[l],s=[],a,!1),t.push(J(u,"LineString",s,e.properties));return}rt(r,s,a,!1)}else if("Polygon"===o)rt(r,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(l=0;l<e.geometry.geometries.length;l++)et(t,{id:u,geometry:e.geometry.geometries[l],properties:e.properties},n,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(l=0;l<r.length;l++){var c=[];rt(r[l],c,a,!0),s.push(c)}}t.push(J(u,o,s,e.properties))}}function nt(t,e){e.push(ot(t[0])),e.push(at(t[1])),e.push(0)}function it(t,e,n,i){for(var r,o,a=0,s=0;s<t.length;s++){var u=ot(t[s][0]),l=at(t[s][1]);e.push(u),e.push(l),e.push(0),s>0&&(a+=i?(r*l-u*o)/2:Math.sqrt(Math.pow(u-r,2)+Math.pow(l-o,2))),r=u,o=l}var c=e.length-3;e[2]=1,function t(e,n,i,r){for(var o,a=r,s=i-n>>1,u=i-n,l=e[n],c=e[n+1],h=e[i],d=e[i+1],p=n+3;p<i;p+=3){var f=Q(e[p],e[p+1],l,c,h,d);if(f>a)o=p,a=f;else if(f===a){var g=Math.abs(p-s);g<u&&(o=p,u=g)}}a>r&&(o-n>3&&t(e,n,o,r),e[o+2]=a,i-o>3&&t(e,o,i,r))}(e,0,c,n),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function rt(t,e,n,i){for(var r=0;r<t.length;r++){var o=[];it(t[r],o,n,i),e.push(o)}}function ot(t){return t/360+.5}function at(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function st(t,e,n,i,r,o,a,s){if(i/=e,o>=(n/=e)&&a<i)return t;if(a<n||o>=i)return null;for(var u=[],l=0;l<t.length;l++){var c=t[l],h=c.geometry,d=c.type,p=0===r?c.minX:c.minY,f=0===r?c.maxX:c.maxY;if(p>=n&&f<i)u.push(c);else if(!(f<n||p>=i)){var g=[];if("Point"===d||"MultiPoint"===d)ut(h,g,n,i,r);else if("LineString"===d)lt(h,g,n,i,r,!1,s.lineMetrics);else if("MultiLineString"===d)ht(h,g,n,i,r,!1);else if("Polygon"===d)ht(h,g,n,i,r,!0);else if("MultiPolygon"===d)for(var m=0;m<h.length;m++){var y=[];ht(h[m],y,n,i,r,!0),y.length&&g.push(y)}if(g.length){if(s.lineMetrics&&"LineString"===d){for(m=0;m<g.length;m++)u.push(J(c.id,d,g[m],c.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===g.length?(d="LineString",g=g[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===g.length?"Point":"MultiPoint"),u.push(J(c.id,d,g,c.tags))}}}return u.length?u:null}function ut(t,e,n,i,r){for(var o=0;o<t.length;o+=3){var a=t[o+r];a>=n&&a<=i&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function lt(t,e,n,i,r,o,a){for(var s,u,l=ct(t),c=0===r?pt:ft,h=t.start,d=0;d<t.length-3;d+=3){var p=t[d],f=t[d+1],g=t[d+2],m=t[d+3],y=t[d+4],_=0===r?p:f,v=0===r?m:y,b=!1;a&&(s=Math.sqrt(Math.pow(p-m,2)+Math.pow(f-y,2))),_<n?v>n&&(u=c(l,p,f,m,y,n),a&&(l.start=h+s*u)):_>i?v<i&&(u=c(l,p,f,m,y,i),a&&(l.start=h+s*u)):dt(l,p,f,g),v<n&&_>=n&&(u=c(l,p,f,m,y,n),b=!0),v>i&&_<=i&&(u=c(l,p,f,m,y,i),b=!0),!o&&b&&(a&&(l.end=h+s*u),e.push(l),l=ct(t)),a&&(h+=s)}var x=t.length-3;p=t[x],f=t[x+1],g=t[x+2],(_=0===r?p:f)>=n&&_<=i&&dt(l,p,f,g),x=l.length-3,o&&x>=3&&(l[x]!==l[0]||l[x+1]!==l[1])&&dt(l,l[0],l[1],l[2]),l.length&&e.push(l)}function ct(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function ht(t,e,n,i,r,o){for(var a=0;a<t.length;a++)lt(t[a],e,n,i,r,o,!1)}function dt(t,e,n,i){t.push(e),t.push(n),t.push(i)}function pt(t,e,n,i,r,o){var a=(o-e)/(i-e);return t.push(o),t.push(n+(r-n)*a),t.push(1),a}function ft(t,e,n,i,r,o){var a=(o-n)/(r-n);return t.push(e+(i-e)*a),t.push(o),t.push(1),a}function gt(t,e){for(var n=[],i=0;i<t.length;i++){var r,o=t[i],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)r=mt(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){r=[];for(var s=0;s<o.geometry.length;s++)r.push(mt(o.geometry[s],e))}else if("MultiPolygon"===a)for(r=[],s=0;s<o.geometry.length;s++){for(var u=[],l=0;l<o.geometry[s].length;l++)u.push(mt(o.geometry[s][l],e));r.push(u)}n.push(J(o.id,a,r,o.tags))}return n}function mt(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var i=0;i<t.length;i+=3)n.push(t[i]+e,t[i+1],t[i+2]);return n}function yt(t,e){if(t.transformed)return t;var n,i,r,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var u=t.features[n],l=u.geometry,c=u.type;if(u.geometry=[],1===c)for(i=0;i<l.length;i+=2)u.geometry.push(_t(l[i],l[i+1],e,o,a,s));else for(i=0;i<l.length;i++){var h=[];for(r=0;r<l[i].length;r+=2)h.push(_t(l[i][r],l[i][r+1],e,o,a,s));u.geometry.push(h)}}return t.transformed=!0,t}function _t(t,e,n,i,r,o){return[Math.round(n*(t*i-r)),Math.round(n*(e*i-o))]}function vt(t,e,n,i,r){for(var o=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:i,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,bt(a,t[s],o,r);var u=t[s].minX,l=t[s].minY,c=t[s].maxX,h=t[s].maxY;u<a.minX&&(a.minX=u),l<a.minY&&(a.minY=l),c>a.maxX&&(a.maxX=c),h>a.maxY&&(a.maxY=h)}return a}function bt(t,e,n,i){var r=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<r.length;s+=3)a.push(r[s]),a.push(r[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)xt(a,r,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<r.length;s++)xt(a,r[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<r.length;u++){var l=r[u];for(s=0;s<l.length;s++)xt(a,l[s],t,n,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&i.lineMetrics){for(var h in c={},e.tags)c[h]=e.tags[h];c.mapbox_clip_start=r.start/r.size,c.mapbox_clip_end=r.end/r.size}var d={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(d.id=e.id),t.features.push(d)}}function xt(t,e,n,i,r,o){var a=i*i;if(i>0&&e.size<(r?a:i))n.numPoints+=e.length/3;else{for(var s=[],u=0;u<e.length;u+=3)(0===i||e[u+2]>a)&&(n.numSimplified++,s.push(e[u]),s.push(e[u+1])),n.numPoints++;r&&function(t,e){for(var n=0,i=0,r=t.length,o=r-2;i<r;o=i,i+=2)n+=(t[i]-t[o])*(t[i+1]+t[o+1]);if(n>0===e)for(i=0,r=t.length;i<r/2;i+=2){var a=t[i],s=t[i+1];t[i]=t[r-2-i],t[i+1]=t[r-1-i],t[r-2-i]=a,t[r-1-i]=s}}(s,o),t.push(s)}}function wt(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var i=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)et(n,t.features[i],e,i);else et(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=function(t,e){var n=e.buffer/e.extent,i=t,r=st(t,1,-1-n,n,0,-1,2,e),o=st(t,1,1-n,2+n,0,-1,2,e);return(r||o)&&(i=st(t,1,-n,1+n,0,-1,2,e)||[],r&&(i=gt(r,1).concat(i)),o&&(i=i.concat(gt(o,-1)))),i}(i,e)).length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ct(t,e,n){return 32*((1<<t)*n+e)+t}function Pt(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var i=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!i)return e(null,null);var r=new b(i.features),o=M(r);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:r,rawData:o.buffer})}j.prototype.load=function(t){var e=this.options,n=e.log,i=e.minZoom,r=e.maxZoom,o=e.nodeSize;n&&console.time("total time");var a="prepare "+t.length+" points";n&&console.time(a),this.points=t;for(var s=[],u=0;u<t.length;u++)t[u].geometry&&s.push(G(t[u],u));this.trees[r+1]=new V(s,$,Y,o,Float32Array),n&&console.timeEnd(a);for(var l=r;l>=i;l--){var c=+Date.now();s=this._cluster(s,l),this.trees[l]=new V(s,$,Y,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",l,s.length,+Date.now()-c)}return n&&console.timeEnd("total time"),this},j.prototype.getClusters=function(t,e){var n=((t[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,t[1])),r=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,r=180;else if(n>r){var a=this.getClusters([n,i,180,o],e),s=this.getClusters([-180,i,r,o],e);return a.concat(s)}for(var u=this.trees[this._limitZoom(e)],l=[],c=0,h=u.range(W(n),K(o),W(r),K(i));c<h.length;c+=1){var d=u.points[h[c]];l.push(d.numPoints?H(d):this.points[d.index])}return l},j.prototype.getChildren=function(t){var e=this._getOriginId(t),n=this._getOriginZoom(t),i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);var o=r.points[e];if(!o)throw new Error(i);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=[],u=0,l=r.within(o.x,o.y,a);u<l.length;u+=1){var c=r.points[l[u]];c.parentId===t&&s.push(c.numPoints?H(c):this.points[c.index])}if(0===s.length)throw new Error(i);return s},j.prototype.getLeaves=function(t,e,n){var i=[];return this._appendLeaves(i,t,e=e||10,n=n||0,0),i},j.prototype.getTile=function(t,e,n){var i=this.trees[this._limitZoom(t)],r=Math.pow(2,t),o=this.options,a=o.radius/o.extent,s=(n-a)/r,u=(n+1+a)/r,l={features:[]};return this._addTileFeatures(i.range((e-a)/r,s,(e+1+a)/r,u),i.points,e,n,r,l),0===e&&this._addTileFeatures(i.range(1-a/r,s,1,u),i.points,r,n,r,l),e===r-1&&this._addTileFeatures(i.range(0,s,a/r,u),i.points,-1,n,r,l),l.features.length?l:null},j.prototype.getClusterExpansionZoom=function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},j.prototype._appendLeaves=function(t,e,n,i,r){for(var o=0,a=this.getChildren(e);o<a.length;o+=1){var s=a[o],u=s.properties;if(u&&u.cluster?r+u.point_count<=i?r+=u.point_count:r=this._appendLeaves(t,u.cluster_id,n,i,r):r<i?r++:t.push(s),t.length===n)break}return r},j.prototype._addTileFeatures=function(t,e,n,i,r,o){for(var a=0,s=t;a<s.length;a+=1){var u=e[s[a]],l=u.numPoints,c={type:1,geometry:[[Math.round(this.options.extent*(u.x*r-n)),Math.round(this.options.extent*(u.y*r-i))]],tags:l?Z(u):this.points[u.index].properties},h=void 0;l?h=u.id:this.options.generateId?h=u.index:this.points[u.index].id&&(h=this.points[u.index].id),void 0!==h&&(c.id=h),o.features.push(c)}},j.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},j.prototype._cluster=function(t,e){for(var n=[],i=this.options,r=i.reduce,o=i.radius/(i.extent*Math.pow(2,e)),a=0;a<t.length;a++){var s=t[a];if(!(s.zoom<=e)){s.zoom=e;for(var u=this.trees[e+1],l=u.within(s.x,s.y,o),c=s.numPoints||1,h=s.x*c,d=s.y*c,p=r&&c>1?this._map(s,!0):null,f=(a<<5)+(e+1)+this.points.length,g=0,m=l;g<m.length;g+=1){var y=u.points[m[g]];if(!(y.zoom<=e)){y.zoom=e;var _=y.numPoints||1;h+=y.x*_,d+=y.y*_,c+=_,y.parentId=f,r&&(p||(p=this._map(s,!0)),r(p,this._map(y)))}}1===c?n.push(s):(s.parentId=f,n.push(q(h/c,d/c,f,c,p)))}}return n},j.prototype._getOriginId=function(t){return t-this.points.length>>5},j.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},j.prototype._map=function(t,e){if(t.numPoints)return e?X({},t.properties):t.properties;var n=this.points[t.index].properties,i=this.options.map(n);return e&&i===n?X({},i):i},wt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},wt.prototype.splitTile=function(t,e,n,i,r,o,a){for(var s=[t,e,n,i],u=this.options,l=u.debug;s.length;){i=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,h=Ct(e,n,i),d=this.tiles[h];if(!d&&(l>1&&console.time("creation"),d=this.tiles[h]=vt(t,e,n,i,u),this.tileCoords.push({z:e,x:n,y:i}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,i,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(d.source=t,r){if(e===u.maxZoom||e===r)continue;var f=1<<r-e;if(n!==Math.floor(o/f)||i!==Math.floor(a/f))continue}else if(e===u.indexMaxZoom||d.numPoints<=u.indexMaxPoints)continue;if(d.source=null,0!==t.length){l>1&&console.time("clipping");var g,m,y,_,v,b,x=.5*u.buffer/u.extent,w=.5-x,C=.5+x,P=1+x;g=m=y=_=null,v=st(t,c,n-x,n+C,0,d.minX,d.maxX,u),b=st(t,c,n+w,n+P,0,d.minX,d.maxX,u),t=null,v&&(g=st(v,c,i-x,i+C,1,d.minY,d.maxY,u),m=st(v,c,i+w,i+P,1,d.minY,d.maxY,u),v=null),b&&(y=st(b,c,i-x,i+C,1,d.minY,d.maxY,u),_=st(b,c,i+w,i+P,1,d.minY,d.maxY,u),b=null),l>1&&console.timeEnd("clipping"),s.push(g||[],e+1,2*n,2*i),s.push(m||[],e+1,2*n,2*i+1),s.push(y||[],e+1,2*n+1,2*i),s.push(_||[],e+1,2*n+1,2*i+1)}}},wt.prototype.getTile=function(t,e,n){var i=this.options,r=i.extent,o=i.debug;if(t<0||t>24)return null;var a=1<<t,s=Ct(t,e=(e%a+a)%a,n);if(this.tiles[s])return yt(this.tiles[s],r);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var u,l=t,c=e,h=n;!u&&l>0;)l--,c=Math.floor(c/2),h=Math.floor(h/2),u=this.tiles[Ct(l,c,h)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",l,c,h),o>1&&console.time("drilling down"),this.splitTile(u.source,l,c,h,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?yt(this.tiles[s],r):null):null};var Mt=function(e){function n(t,n,i,r){e.call(this,t,n,i,Pt),r&&(this.loadGeoJSON=r)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var n=this._pendingCallback,i=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var r=!!(i&&i.request&&i.request.collectResourceTiming)&&new t.RequestPerformance(i.request);this.loadGeoJSON(i,(function(o,a){if(o||!a)return n(o);if("object"!=typeof a)return n(new Error("Input data given to '"+i.source+"' is not a valid GeoJSON object."));!function t(e,n){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(g(t,n)),e;case"GeometryCollection":return e.geometries=e.geometries.map(g(t,n)),e;case"Feature":return e.geometry=t(e.geometry,n),e;case"Polygon":case"MultiPolygon":return function(t,e){return"Polygon"===t.type?t.coordinates=m(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(g(m,e))),t}(e,n);default:return e}}(a,!0);try{e._geoJSONIndex=i.cluster?new j(function(e){var n=e.superclusterOptions,i=e.clusterProperties;if(!i||!n)return n;for(var r={},o={},a={accumulated:null,zoom:0},s={properties:null},u=Object.keys(i),l=0,c=u;l<c.length;l+=1){var h=c[l],d=i[h],p=d[0],f=t.createExpression(d[1]),g=t.createExpression("string"==typeof p?[p,["accumulated"],["get",h]]:p);r[h]=f.value,o[h]=g.value}return n.map=function(t){s.properties=t;for(var e={},n=0,i=u;n<i.length;n+=1){var o=i[n];e[o]=r[o].evaluate(a,s)}return e},n.reduce=function(t,e){s.properties=e;for(var n=0,i=u;n<i.length;n+=1){var r=i[n];a.accumulated=t[r],t[r]=o[r].evaluate(a,s)}},n}(i)).load(a.features):function(t,e){return new wt(t,e)}(a,i.geojsonVtOptions)}catch(o){return n(o)}e.loaded={};var s={};if(r){var u=r.finish();u&&(s.resourceTiming={},s.resourceTiming[i.source]=JSON.parse(JSON.stringify(u)))}n(null,s)}))}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(t,n){var i=this.loaded;return i&&i[t.uid]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},n.prototype.loadGeoJSON=function(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},n.prototype.getClusterExpansionZoom=function(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}},n.prototype.getClusterChildren=function(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}},n.prototype.getClusterLeaves=function(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}},n}(u),Ot=function(e){var n=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:u,geojson:Mt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return Ot.prototype.setReferrer=function(t,e){this.referrer=e},Ot.prototype.setImages=function(t,e,n){this.availableImages[t]=e,n()},Ot.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},Ot.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},Ot.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)},Ot.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)},Ot.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)},Ot.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)},Ot.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)},Ot.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},Ot.prototype.removeSource=function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var i=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==i.removeSource?i.removeSource(e,n):n()}},Ot.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}},Ot.prototype.syncRTLPluginState=function(e,n,i){try{t.plugin.setState(n);var r=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=r){this.self.importScripts(r);var o=t.plugin.isParsed();i(o?void 0:new Error("RTL Text Plugin failed to import scripts from "+r),o)}}catch(t){i(t.toString())}},Ot.prototype.getAvailableImages=function(t){var e=this.availableImages[t];return e||(e=[]),e},Ot.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new i),e},Ot.prototype.getWorkerSource=function(t,e,n){var i=this;return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][n]||(this.workerSources[t][e][n]=new this.workerSourceTypes[e]({send:function(e,n,r){i.actor.send(e,n,r,t)}},this.getLayerIndex(t),this.getAvailableImages(t))),this.workerSources[t][e][n]},Ot.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new c),this.demWorkerSources[t][e]},Ot.prototype.enforceCacheSizeLimit=function(e,n){t.enforceCacheSizeLimit(n)},"undefined"!=typeof WorkerGlobalScope&&void 0!==t.window&&t.window instanceof WorkerGlobalScope&&(t.window.worker=new Ot(t.window)),Ot})),i(0,(function(t){var e=t.createCommonjsModule((function(t){function e(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(n);try{e=new Worker(i),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(i),t}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(t){return void 0===n[t]&&(n[t]=function(t){var n=document.createElement("canvas"),i=Object.create(e.webGLContextAttributes);return i.failIfMajorPerformanceCaveat=t,n.probablySupportsContext?n.probablySupportsContext("webgl",i)||n.probablySupportsContext("experimental-webgl",i):n.supportsContext?n.supportsContext("webgl",i)||n.supportsContext("experimental-webgl",i):n.getContext("webgl",i)||n.getContext("experimental-webgl",i)}(t)),n[t]}(t&&t.failIfMajorPerformanceCaveat))}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var n={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),n={create:function(e,n,i){var r=t.window.document.createElement(e);return void 0!==n&&(r.className=n),i&&i.appendChild(r),r},createNS:function(e,n){return t.window.document.createElementNS(e,n)}},i=t.window.document.documentElement.style;function r(t){if(!i)return t[0];for(var e=0;e<t.length;e++)if(t[e]in i)return t[e];return t[0]}var o,a=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){i&&a&&(o=i[a],i[a]="none")},n.enableDrag=function(){i&&a&&(i[a]=o)};var s=r(["transform","WebkitTransform"]);n.setTransform=function(t,e){t.style[s]=e};var u=!1;try{var l=Object.defineProperty({},"passive",{get:function(){u=!0}});t.window.addEventListener("test",l,l),t.window.removeEventListener("test",l,l)}catch(t){u=!1}n.addEventListener=function(t,e,n,i){void 0===i&&(i={}),t.addEventListener(e,n,"passive"in i&&u?i:i.capture)},n.removeEventListener=function(t,e,n,i){void 0===i&&(i={}),t.removeEventListener(e,n,"passive"in i&&u?i:i.capture)};var c=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",c,!0)};function h(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}n.suppressClick=function(){t.window.addEventListener("click",c,!0),t.window.setTimeout((function(){t.window.removeEventListener("click",c,!0)}),0)},n.mousePos=function(e,n){var i=e.getBoundingClientRect(),r=t.window.TouchEvent&&n instanceof t.window.TouchEvent?n.touches[0]:n;return new t.Point(r.clientX-i.left-e.clientLeft,r.clientY-i.top-e.clientTop)},n.touchPos=function(e,n){for(var i=e.getBoundingClientRect(),r=[],o="touchend"===n.type?n.changedTouches:n.touches,a=0;a<o.length;a++)r.push(new t.Point(o[a].clientX-i.left-e.clientLeft,o[a].clientY-i.top-e.clientTop));return r},n.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},n.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var d=function(e){function n(){e.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.isLoaded=function(){return this.loaded},n.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var i=n[e];this._notify(i.ids,i.callback)}this.requestors=[]}},n.prototype.getImage=function(t){return this.images[t]},n.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},n.prototype._validate=function(e,n){var i=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchX" value'))),i=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchY" value'))),i=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "content" value'))),i=!1),i},n.prototype._validateStretch=function(t,e){if(!t)return!0;for(var n=0,i=0,r=t;i<r.length;i+=1){var o=r[i];if(o[0]<n||o[1]<o[0]||e<o[1])return!1;n=o[1]}return!0},n.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},n.prototype.updateImage=function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0},n.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},n.prototype.listImages=function(){return Object.keys(this.images)},n.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var i=0,r=t;i<r.length;i+=1)this.images[r[i]]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},n.prototype._notify=function(e,n){for(var i={},r=0,o=e;r<o.length;r+=1){var a=o[r];this.images[a]||this.fire(new t.Event("styleimagemissing",{id:a}));var s=this.images[a];s?i[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'+a+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}n(null,i)},n.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},n.prototype.getPattern=function(e){var n=this.patterns[e],i=this.getImage(e);if(!i)return null;if(n&&n.position.version===i.version)return n.position;if(n)n.position.version=i.version;else{var r={w:i.data.width+2,h:i.data.height+2,x:0,y:0},o=new t.ImagePosition(r,i);this.patterns[e]={bin:r,position:o}}return this._updatePatternAtlas(),this.patterns[e].position},n.prototype.bind=function(e){var n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},n.prototype._updatePatternAtlas=function(){var e=[];for(var n in this.patterns)e.push(this.patterns[n].bin);var i=t.potpack(e),r=i.w,o=i.h,a=this.atlasImage;for(var s in a.resize({width:r||1,height:o||1}),this.patterns){var u=this.patterns[s].bin,l=u.x+1,c=u.y+1,h=this.images[s].data,d=h.width,p=h.height;t.RGBAImage.copy(h,a,{x:0,y:0},{x:l,y:c},{width:d,height:p}),t.RGBAImage.copy(h,a,{x:0,y:p-1},{x:l,y:c-1},{width:d,height:1}),t.RGBAImage.copy(h,a,{x:0,y:0},{x:l,y:c+p},{width:d,height:1}),t.RGBAImage.copy(h,a,{x:d-1,y:0},{x:l-1,y:c},{width:1,height:p}),t.RGBAImage.copy(h,a,{x:0,y:0},{x:l+d,y:c},{width:1,height:p})}this.dirty=!0},n.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},n.prototype.dispatchRenderCallbacks=function(t){for(var e=0,n=t;e<n.length;e+=1){var i=n[e];if(!this.callbackDispatchedThisFrame[i]){this.callbackDispatchedThisFrame[i]=!0;var r=this.images[i];h(r)&&this.updateImage(i,r)}}},n}(t.Evented),p=m,f=m,g=1e20;function m(t,e,n,i,r,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=i||.25,this.fontFamily=r||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function y(t,e,n,i,r,o,a){for(var s=0;s<e;s++){for(var u=0;u<n;u++)i[u]=t[u*e+s];for(_(i,r,o,a,n),u=0;u<n;u++)t[u*e+s]=r[u]}for(u=0;u<n;u++){for(s=0;s<e;s++)i[s]=t[u*e+s];for(_(i,r,o,a,e),s=0;s<e;s++)t[u*e+s]=Math.sqrt(r[s])}}function _(t,e,n,i,r){n[0]=0,i[0]=-g,i[1]=+g;for(var o=1,a=0;o<r;o++){for(var s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=i[a];)a--,s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,i[a]=s,i[a+1]=+g}for(o=0,a=0;o<r;o++){for(;i[a+1]<o;)a++;e[o]=(o-n[a])*(o-n[a])+t[n[a]]}}m.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),i=0;i<this.size*this.size;i++){var r=e.data[4*i+3]/255;this.gridOuter[i]=1===r?0:0===r?g:Math.pow(Math.max(0,.5-r),2),this.gridInner[i]=1===r?g:0===r?0:Math.pow(Math.max(0,r-.5),2)}for(y(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),y(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),i=0;i<this.size*this.size;i++)n[i]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[i]-this.gridInner[i])/this.radius+this.cutoff))));return n},p.default=f;var v=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};v.prototype.setURL=function(t){this.url=t},v.prototype.getGlyphs=function(e,n){var i=this,r=[];for(var o in e)for(var a=0,s=e[o];a<s.length;a+=1)r.push({stack:o,id:s[a]});t.asyncAll(r,(function(t,e){var n=t.stack,r=t.id,o=i.entries[n];o||(o=i.entries[n]={glyphs:{},requests:{}});var a=o.glyphs[r];if(void 0===a){if(a=i._tinySDF(o,n,r))return o.glyphs[r]=a,void e(null,{stack:n,id:r,glyph:a});var s=Math.floor(r/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else{var u=o.requests[s];u||(u=o.requests[s]=[],v.loadGlyphRange(n,s,i.url,i.requestManager,(function(t,e){if(e)for(var n in e)i._doesCharSupportLocalGlyph(+n)||(o.glyphs[+n]=e[+n]);for(var r=0,a=u;r<a.length;r+=1)(0,a[r])(t,e);delete o.requests[s]}))),u.push((function(t,i){t?e(t):i&&e(null,{stack:n,id:r,glyph:i[r]||null})}))}}else e(null,{stack:n,id:r,glyph:a})}),(function(t,e){if(t)n(t);else if(e){for(var i={},r=0,o=e;r<o.length;r+=1){var a=o[r],s=a.stack,u=a.id,l=a.glyph;(i[s]||(i[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}n(null,i)}}))},v.prototype._doesCharSupportLocalGlyph=function(e){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](e)||t.isChar["Hangul Syllables"](e)||t.isChar.Hiragana(e)||t.isChar.Katakana(e))},v.prototype._tinySDF=function(e,n,i){var r=this.localIdeographFontFamily;if(r&&this._doesCharSupportLocalGlyph(i)){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(n)?a="900":/medium/i.test(n)?a="500":/light/i.test(n)&&(a="200"),o=e.tinySDF=new v.TinySDF(24,3,8,.25,r,a)}return{id:i,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(i))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},v.loadGlyphRange=function(e,n,i,r,o){var a=256*n,s=a+255,u=r.transformRequest(r.normalizeGlyphsURL(i).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(u,(function(e,n){if(e)o(e);else if(n){for(var i={},r=0,a=t.parseGlyphPBF(n);r<a.length;r+=1){var s=a[r];i[s.id]=s}o(null,i)}}))},v.TinySDF=p;var b=function(){this.specification=t.styleSpec.light.position};b.prototype.possiblyEvaluate=function(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))},b.prototype.interpolate=function(e,n,i){return{x:t.number(e.x,n.x,i),y:t.number(e.y,n.y,i),z:t.number(e.z,n.z,i)}};var x=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new b,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),w=function(e){function n(n){e.call(this),this._transitionable=new t.Transitionable(x),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(e,n){if(void 0===n&&(n={}),!this._validate(t.validateLight,e,n))for(var i in e){var r=e[i];t.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-"-transition".length),r):this._transitionable.setValue(i,r)}},n.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},n.prototype._validate=function(e,n,i){return(!i||!1!==i.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},n}(t.Evented),C=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};C.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(t,e)),this.dashEntry[n]},C.prototype.getDashRanges=function(t,e,n){var i=[],r=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,a=!0;i.push({left:r,right:o,isDash:a,zeroLength:0===t[0]});for(var s=t[0],u=1;u<t.length;u++){var l=t[u];r=s*n,o=(s+=l)*n,i.push({left:r,right:o,isDash:a=!a,zeroLength:0===l})}return i},C.prototype.addRoundDash=function(t,e,n){for(var i=e/2,r=-n;r<=n;r++)for(var o=this.width*(this.nextRow+n+r),a=0,s=t[a],u=0;u<this.width;u++){u/s.right>1&&(s=t[++a]);var l=Math.abs(u-s.left),c=Math.abs(u-s.right),h=Math.min(l,c),d=void 0,p=r/n*(i+1);if(s.isDash){var f=i-Math.abs(p);d=Math.sqrt(h*h+f*f)}else d=i-Math.sqrt(h*h+p*p);this.data[o+u]=Math.max(0,Math.min(255,d+128))}},C.prototype.addRegularDash=function(t){for(var e=t.length-1;e>=0;--e){var n=t[e],i=t[e+1];n.zeroLength?t.splice(e,1):i&&i.isDash===n.isDash&&(i.left=n.left,t.splice(e,1))}var r=t[0],o=t[t.length-1];r.isDash===o.isDash&&(r.left=o.left-this.width,o.right=r.right+this.width);for(var a=this.width*this.nextRow,s=0,u=t[s],l=0;l<this.width;l++){l/u.right>1&&(u=t[++s]);var c=Math.abs(l-u.left),h=Math.abs(l-u.right),d=Math.min(c,h);this.data[a+l]=Math.max(0,Math.min(255,(u.isDash?d:-d)+128))}},C.prototype.addDash=function(e,n){var i=n?7:0,r=2*i+1;if(this.nextRow+r>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];var s=this.width/o,u=this.getDashRanges(e,this.width,s);n?this.addRoundDash(u,s,i):this.addRegularDash(u);var l={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:o};return this.nextRow+=r,this.dirty=!0,l},C.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))};var P=function e(n,i){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var r=this.workerPool.acquire(this.id),o=0;o<r.length;o++){var a=new e.Actor(r[o],i,this.id);a.name="Worker "+o,this.actors.push(a)}};function M(e,n,i){var r=function(r,o){if(r)return i(r);if(o){var a=t.pick(t.extend(o,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(a.vectorLayers=o.vector_layers,a.vectorLayerIds=a.vectorLayers.map((function(t){return t.id}))),a.tiles=n.canonicalizeTileset(a,e.url),i(null,a)}};return e.url?t.getJSON(n.transformRequest(n.normalizeSourceURL(e.url),t.ResourceType.Source),r):t.browser.frame((function(){return r(null,e)}))}P.prototype.broadcast=function(e,n,i){t.asyncAll(this.actors,(function(t,i){t.send(e,n,i)}),i=i||function(){})},P.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},P.prototype.remove=function(){this.actors.forEach((function(t){t.remove()})),this.actors=[],this.workerPool.release(this.id)},P.Actor=t.Actor;var O=function(e,n,i){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=i||24};O.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},O.prototype.contains=function(e){var n=Math.pow(2,e.z),i=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),r=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=i&&e.x<o&&e.y>=r&&e.y<a};var k=function(e){function n(n,i,r,o){if(e.call(this),this.id=n,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(i,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=M(this._options,this.map._requestManager,(function(n,i){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):i&&(t.extend(e,i),i.bounds&&(e.tileBounds=new O(i.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(i.tiles,e.map._requestManager._customAccessToken),t.postMapLoadEvent(i.tiles,e.map._getMapId(),e.map._requestManager._skuToken,e.map._requestManager._customAccessToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.loadTile=function(e,n){var i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),r={request:this.map._requestManager.transformRequest(i,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function o(i,r){return delete e.request,e.aborted?n(null):i&&404!==i.status?n(i):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}r.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",r,o.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",r,o.bind(this)))},n.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},n.prototype.unloadTile=function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},n.prototype.hasTransition=function(){return!1},n}(t.Evented),E=function(e){function n(n,i,r,o){e.call(this),this.id=n,this.dispatcher=r,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},i),t.extend(this,t.pick(i,["url","scheme","tileSize"]))}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=M(this._options,this.map._requestManager,(function(n,i){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):i&&(t.extend(e,i),i.bounds&&(e.tileBounds=new O(i.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(i.tiles),t.postMapLoadEvent(i.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.loadTile=function(e,n){var i=this,r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),(function(r,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(o){i.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=i.map.painter.context,s=a.gl;e.texture=i.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.Texture(a,o,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(i.dispatcher),n(null)}}))},n.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},n.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},n.prototype.hasTransition=function(){return!1},n}(t.Evented),S=function(e){function n(n,i,r,o){e.call(this,n,i,r,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(e,n){var i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function r(t,i){t&&(e.state="errored",n(t)),i&&(e.dem=i,e.needsHillshadePrepare=!0,e.state="loaded",n(null))}e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),(function(i,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?o:t.browser.getImageData(o,1),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:a,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",s,r.bind(this)))}}).bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},n.prototype._getNeighboringTiles=function(e){var n=e.canonical,i=Math.pow(2,n.z),r=(n.x-1+i)%i,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+i)%i,s=n.x+1===i?e.wrap+1:e.wrap,u={};return u[new t.OverscaledTileID(e.overscaledZ,o,n.z,r,n.y).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,r,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<i&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,r,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),u},n.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},n}(E),T=function(e){function n(n,i,r,o){e.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(o),this._data=i.data,this._options=t.extend({},i),this._collectResourceTiming=i.collectResourceTiming,this._resourceTiming=[],void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;var a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*a,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?Math.min(i.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(i.clusterRadius||50)*a,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties},i.workerOptions)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(n){if(n)e.fire(new t.ErrorEvent(n));else{var i={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(i.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",i))}}))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setData=function(e){var n=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(e){if(e)n.fire(new t.ErrorEvent(e));else{var i={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(i.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new t.Event("data",i))}})),this},n.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},n.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},n.prototype.getClusterLeaves=function(t,e,n,i){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},i),this},n.prototype._updateWorkerData=function(e){var n=this;this._loaded=!1;var i=t.extend({},this.workerOptions),r=this._data;"string"==typeof r?(i.request=this.map._requestManager.transformRequest(t.browser.resolveURL(r),t.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(r),this.actor.send(this.type+".loadData",i,(function(t,r){n._removed||r&&r.abandoned||(n._loaded=!0,r&&r.resourceTiming&&r.resourceTiming[n.id]&&(n._resourceTiming=r.resourceTiming[n.id].slice(0)),n.actor.send(n.type+".coalesce",{source:i.source},null),e(t))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.loadTile=function(e,n){var i=this,r=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(r,{type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(t,o){return delete e.request,e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(o,i.map.painter,"reloadTile"===r),n(null))}))},n.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},n.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},n.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(t.Evented),A=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),I=function(e){function n(t,n,i,r){e.call(this),this.id=t,this.dispatcher=i,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(e,n){var i=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),(function(r,o){i._loaded=!0,r?i.fire(new t.ErrorEvent(r)):o&&(i.image=o,e&&(i.coordinates=e),n&&n(),i._finishLoading())}))},n.prototype.loaded=function(){return this._loaded},n.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(function(){e.texture=null})),this):this},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setCoordinates=function(e){var n=this;this.coordinates=e;var i=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var n=1/0,i=1/0,r=-1/0,o=-1/0,a=0,s=e;a<s.length;a+=1){var u=s[a];n=Math.min(n,u.x),i=Math.min(i,u.y),r=Math.max(r,u.x),o=Math.max(o,u.y)}var l=Math.max(r-n,o-i),c=Math.max(0,Math.floor(-Math.log(l)/Math.LN2)),h=Math.pow(2,c);return new t.CanonicalTileID(c,Math.floor((n+r)/2*h),Math.floor((i+o)/2*h))}(i),this.minzoom=this.maxzoom=this.tileID.z;var r=i.map((function(t){return n.tileID.getTilePoint(t)._round()}));return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(r[2].x,r[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,A.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[i];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},n.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(t.Evented),D=function(e){function n(t,n,i,r){e.call(this,t,n,i,r),this.roundZoom=!0,this.type="video",this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1;var n=this.options;this.urls=[];for(var i=0,r=n.urls;i<r.length;i+=1)this.urls.push(this.map._requestManager.transformRequest(r[i],t.ResourceType.Source).url);t.getVideo(this.urls,(function(n,i){e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):i&&(e.video=i,e.video.loop=!0,e.video.addEventListener("playing",(function(){e.map.triggerRepaint()})),e.map&&e.video.play(),e._finishLoading())}))},n.prototype.pause=function(){this.video&&this.video.pause()},n.prototype.play=function(){this.video&&this.video.play()},n.prototype.seek=function(e){if(this.video){var n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+n.start(0)+" and "+n.end(0)+"-second mark."))):this.video.currentTime=e}},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,A.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[i];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(I),R=function(e){function n(n,i,r,o){e.call(this,n,i,r,o),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((function(t){return!Array.isArray(t)||2!==t.length||t.some((function(t){return"number"!=typeof t}))}))||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,i=n.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,A.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,i.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[r];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},n}(I),F={vector:k,raster:E,"raster-dem":S,geojson:T,video:D,image:I,canvas:R};function L(e,n){var i=t.identity([]);return t.translate(i,i,[1,1,0]),t.scale(i,i,[.5*e.width,.5*e.height,1]),t.multiply(i,i,e.calculatePosMatrix(n.toUnwrapped()))}function z(t,e,n,i,r){var o=function(t,e,n){if(t)for(var i=0,r=t;i<r.length;i+=1){var o=e[r[i]];if(o&&o.source===n&&"fill-extrusion"===o.type)return!0}else for(var a in e){var s=e[a];if(s.source===n&&"fill-extrusion"===s.type)return!0}return!1}(i&&i.layers,e,t.id),a=r.maxPitchScaleFactor(),s=t.tilesIn(n,a,o);s.sort(N);for(var u=[],l=0,c=s;l<c.length;l+=1){var h=c[l];u.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,t._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,i,r,a,L(t.transform,h.tileID))})}var d=function(t){for(var e={},n={},i=0,r=t;i<r.length;i+=1){var o=r[i],a=o.queryResults,s=o.wrappedTileID,u=n[s]=n[s]||{};for(var l in a)for(var c=a[l],h=u[l]=u[l]||{},d=e[l]=e[l]||[],p=0,f=c;p<f.length;p+=1){var g=f[p];h[g.featureIndex]||(h[g.featureIndex]=!0,d.push(g))}}return e}(u);for(var p in d)d[p].forEach((function(e){var n=e.feature,i=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=i}));return d}function N(t,e){var n=t.tileID,i=e.tileID;return n.overscaledZ-i.overscaledZ||n.canonical.y-i.canonical.y||n.wrap-i.wrap||n.canonical.x-i.canonical.x}var B=function(t,e){this.max=t,this.onRemove=e,this.reset()};B.prototype.reset=function(){for(var t in this.data)for(var e=0,n=this.data[t];e<n.length;e+=1){var i=n[e];i.timeout&&clearTimeout(i.timeout),this.onRemove(i.value)}return this.data={},this.order=[],this},B.prototype.add=function(t,e,n){var i=this,r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);var o={value:e,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout((function(){i.remove(t,o)}),n)),this.data[r].push(o),this.order.push(r),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},B.prototype.has=function(t){return t.wrapped().key in this.data},B.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},B.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},B.prototype.getByKey=function(t){var e=this.data[t];return e?e[0].value:null},B.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},B.prototype.remove=function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,i=void 0===e?0:this.data[n].indexOf(e),r=this.data[n][i];return this.data[n].splice(i,1),r.timeout&&clearTimeout(r.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(r.value),this.order.splice(this.order.indexOf(n),1),this},B.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},B.prototype.filter=function(t){var e=[];for(var n in this.data)for(var i=0,r=this.data[n];i<r.length;i+=1){var o=r[i];t(o.value)||e.push(o)}for(var a=0,s=e;a<s.length;a+=1){var u=s[a];this.remove(u.value.tileID,u)}};var V=function(t,e,n){this.context=t;var i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};V.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},V.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},V.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var U={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},j=function(t,e,n,i){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=i,this.context=t;var r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};j.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},j.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},j.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var i=e.attributes[this.attributes[n].name];void 0!==i&&t.enableVertexAttribArray(i)}},j.prototype.setVertexAttribPointers=function(t,e,n){for(var i=0;i<this.attributes.length;i++){var r=this.attributes[i],o=e.attributes[r.name];void 0!==o&&t.vertexAttribPointer(o,r.components,t[U[r.type]],!1,this.itemSize,r.offset+this.itemSize*(n||0))}},j.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var q=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};q.prototype.get=function(){return this.current},q.prototype.set=function(t){},q.prototype.getDefault=function(){return this.default},q.prototype.setDefault=function(){this.set(this.default)};var G=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(q),H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(q),Z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(q),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(q),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(q),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(q),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(q),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(q),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(q),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(q),tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(q),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(q),nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(q),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(q),rt=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(q),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(q),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(q),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(q),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(q),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(q),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(q),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(q),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(q),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(q),ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(q),gt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(q),mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(q),yt=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(q),_t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(q),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(q),bt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(q),xt=function(t){function e(e,n){t.call(this,e),this.context=e,this.parent=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}(q),wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(xt),Ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(xt),Pt=function(t,e,n){this.context=t,this.width=e,this.height=n;var i=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new wt(t,i),this.depthAttachment=new Ct(t,i)};Pt.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n),t.deleteFramebuffer(this.framebuffer)};var Mt=function(t,e,n){this.func=t,this.mask=e,this.range=n};Mt.ReadOnly=!1,Mt.ReadWrite=!0,Mt.disabled=new Mt(519,Mt.ReadOnly,[0,1]);var Ot=function(t,e,n,i,r,o){this.test=t,this.ref=e,this.mask=n,this.fail=i,this.depthFail=r,this.pass=o};Ot.disabled=new Ot({func:519,mask:0},0,0,7680,7680,7680);var kt=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n};kt.disabled=new kt(kt.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),kt.unblended=new kt(kt.Replace,t.Color.transparent,[!0,!0,!0,!0]),kt.alphaBlended=new kt([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Et=function(t,e,n){this.enable=t,this.mode=e,this.frontFace=n};Et.disabled=new Et(!1,1029,2305),Et.backCCW=new Et(!0,1029,2305);var St=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new G(this),this.clearDepth=new H(this),this.clearStencil=new Z(this),this.colorMask=new W(this),this.depthMask=new K(this),this.stencilMask=new X(this),this.stencilFunc=new $(this),this.stencilOp=new Y(this),this.stencilTest=new Q(this),this.depthRange=new J(this),this.depthTest=new tt(this),this.depthFunc=new et(this),this.blend=new nt(this),this.blendFunc=new it(this),this.blendColor=new rt(this),this.blendEquation=new ot(this),this.cullFace=new at(this),this.cullFaceSide=new st(this),this.frontFace=new ut(this),this.program=new lt(this),this.activeTexture=new ct(this),this.viewport=new ht(this),this.bindFramebuffer=new dt(this),this.bindRenderbuffer=new pt(this),this.bindTexture=new ft(this),this.bindVertexBuffer=new gt(this),this.bindElementBuffer=new mt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new yt(this),this.pixelStoreUnpack=new _t(this),this.pixelStoreUnpackPremultiplyAlpha=new vt(this),this.pixelStoreUnpackFlipY=new bt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear"),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query")};St.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},St.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},St.prototype.createIndexBuffer=function(t,e){return new V(this,t,e)},St.prototype.createVertexBuffer=function(t,e,n){return new j(this,t,e,n)},St.prototype.createRenderbuffer=function(t,e,n){var i=this.gl,r=i.createRenderbuffer();return this.bindRenderbuffer.set(r),i.renderbufferStorage(i.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),r},St.prototype.createFramebuffer=function(t,e){return new Pt(this,t,e)},St.prototype.clear=function(t){var e=t.color,n=t.depth,i=this.gl,r=0;e&&(r|=i.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(r|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),i.clear(r)},St.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},St.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},St.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},St.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,kt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},St.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Tt=function(e){function n(n,i,r){var o=this;e.call(this),this.id=n,this.dispatcher=r,this.on("data",(function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))})),this.on("error",(function(){o._sourceErrored=!0})),this._source=function(e,n,i,r){var o=new F[n.type](e,n,i,r);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o}(n,i,r,this),this._tiles={},this._cache=new B(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},n.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},n.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,(function(){}))},n.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,(function(){}))},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}},n.prototype.getIds=function(){return t.values(this._tiles).map((function(t){return t.tileID})).sort(At).map((function(t){return t.key}))},n.prototype.getRenderableIds=function(e){var n=this,i=[];for(var r in this._tiles)this._isIdRenderable(r,e)&&i.push(this._tiles[r]);return e?i.sort((function(e,i){var r=e.tileID,o=i.tileID,a=new t.Point(r.canonical.x,r.canonical.y)._rotate(n.transform.angle),s=new t.Point(o.canonical.x,o.canonical.y)._rotate(n.transform.angle);return r.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x})).map((function(t){return t.tileID.key})):i.map((function(t){return t.tileID})).sort(At).map((function(t){return t.key}))},n.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},n.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},n.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},n.prototype._tileLoaded=function(e,n,i,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire(new t.ErrorEvent(r,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===i&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},n.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),n=0;n<e.length;n++){var i=e[n];if(t.neighboringTiles&&t.neighboringTiles[i]){var r=this.getTileByID(i);o(t,r),o(r,t)}}function o(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,i=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===i||Math.abs(i)>1||(Math.abs(n)>1&&(1===Math.abs(n+r)?n+=r:1===Math.abs(n-r)&&(n-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,i),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},n.prototype.getTile=function(t){return this.getTileByID(t.key)},n.prototype.getTileByID=function(t){return this._tiles[t]},n.prototype._retainLoadedChildren=function(t,e,n,i){for(var r in this._tiles){var o=this._tiles[r];if(!(i[r]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var u=a;u.overscaledZ>e;)if(t[(u=u.scaledTo(u.overscaledZ-1)).key]){i[a.key]=a;break}}}},n.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles){var n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(var i=t.overscaledZ-1;i>=e;i--){var r=t.scaledTo(i),o=this._getLoadedTile(r);if(o)return o}},n.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},n.prototype.updateCacheSize=function(t){var e=(Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1),n=Math.floor(5*e),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(i)},n.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var n={};for(var i in this._tiles){var r=this._tiles[i];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),n[r.tileID.key]=r}for(var o in this._tiles=n,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}},n.prototype.update=function(e){var i=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var r;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter((function(t){return i._source.hasTile(t)})))):r=[];var o=e.coveringZoomLevel(this._source),a=Math.max(o-n.maxOverzooming,this._source.minzoom),s=Math.max(o+n.maxUnderzooming,this._source.minzoom),u=this._updateRetainedTiles(r,o);if(It(this._source.type)){for(var l={},c={},h=0,d=Object.keys(u);h<d.length;h+=1){var p=d[h],f=u[p],g=this._tiles[p];if(g&&!(g.fadeEndTime&&g.fadeEndTime<=t.browser.now())){var m=this.findLoadedParent(f,a);m&&(this._addTile(m.tileID),l[m.tileID.key]=m.tileID),c[p]=f}}for(var y in this._retainLoadedChildren(c,o,s,u),l)u[y]||(this._coveredTiles[y]=!0,u[y]=l[y])}for(var _ in u)this._tiles[_].clearFadeHold();for(var v=0,b=t.keysDifference(this._tiles,u);v<b.length;v+=1){var x=b[v],w=this._tiles[x];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(x)}this._updateLoadedParentTileCache()}},n.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},n.prototype._updateRetainedTiles=function(t,e){for(var i={},r={},o=Math.max(e-n.maxOverzooming,this._source.minzoom),a=Math.max(e+n.maxUnderzooming,this._source.minzoom),s={},u=0,l=t;u<l.length;u+=1){var c=l[u],h=this._addTile(c);i[c.key]=c,h.hasData()||e<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,e,a,i);for(var d=0,p=t;d<p.length;d+=1){var f=p[d],g=this._tiles[f.key];if(!g.hasData()){if(e+1>this._source.maxzoom){var m=f.children(this._source.maxzoom)[0],y=this.getTile(m);if(y&&y.hasData()){i[m.key]=m;continue}}else{var _=f.children(this._source.maxzoom);if(i[_[0].key]&&i[_[1].key]&&i[_[2].key]&&i[_[3].key])continue}for(var v=g.wasRequested(),b=f.overscaledZ-1;b>=o;--b){var x=f.scaledTo(b);if(r[x.key])break;if(r[x.key]=!0,!(g=this.getTile(x))&&v&&(g=this._addTile(x)),g&&(i[x.key]=x,v=g.wasRequested(),g.hasData()))break}}}return i},n.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],n=void 0,i=this._tiles[t].tileID;i.overscaledZ>0;){if(i.key in this._loadedParentTiles){n=this._loadedParentTiles[i.key];break}e.push(i.key);var r=i.scaledTo(i.overscaledZ-1);if(n=this._getLoadedTile(r))break;i=r}for(var o=0,a=e;o<a.length;o+=1)this._loadedParentTiles[a[o]]=n}},n.prototype._addTile=function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));var i=Boolean(n);return i||(n=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n?(n.uses++,this._tiles[e.key]=n,i||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var i=e.getExpiryTimeout();i&&(this._timers[t]=setTimeout((function(){n._reloadTile(t,"expired"),delete n._timers[t]}),i))},n.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},n.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},n.prototype.tilesIn=function(e,n,i){var r=this,o=[],a=this.transform;if(!a)return o;for(var s=i?a.getCameraQueryGeometry(e):e,u=e.map((function(t){return a.pointCoordinate(t)})),l=s.map((function(t){return a.pointCoordinate(t)})),c=this.getIds(),h=1/0,d=1/0,p=-1/0,f=-1/0,g=0,m=l;g<m.length;g+=1){var y=m[g];h=Math.min(h,y.x),d=Math.min(d,y.y),p=Math.max(p,y.x),f=Math.max(f,y.y)}for(var _=function(e){var i=r._tiles[c[e]];if(!i.holdingForFade()){var s=i.tileID,g=Math.pow(2,a.zoom-i.tileID.overscaledZ),m=n*i.queryPadding*t.EXTENT/i.tileSize/g,y=[s.getTilePoint(new t.MercatorCoordinate(h,d)),s.getTilePoint(new t.MercatorCoordinate(p,f))];if(y[0].x-m<t.EXTENT&&y[0].y-m<t.EXTENT&&y[1].x+m>=0&&y[1].y+m>=0){var _=u.map((function(t){return s.getTilePoint(t)})),v=l.map((function(t){return s.getTilePoint(t)}));o.push({tile:i,tileID:s,queryGeometry:_,cameraQueryGeometry:v,scale:g})}}},v=0;v<c.length;v++)_(v);return o},n.prototype.getVisibleCoordinates=function(t){for(var e=this,n=this.getRenderableIds(t).map((function(t){return e._tiles[t].tileID})),i=0,r=n;i<r.length;i+=1){var o=r[i];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return n},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(It(this._source.type))for(var e in this._tiles){var n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.browser.now())return!0}return!1},n.prototype.setFeatureState=function(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)},n.prototype.removeFeatureState=function(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)},n.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},n.prototype.setDependencies=function(t,e,n){var i=this._tiles[t];i&&i.setDependencies(e,n)},n.prototype.reloadTilesForDependencies=function(t,e){for(var n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(n,"reloading");this._cache.filter((function(n){return!n.hasDependency(t,e)}))},n}(t.Evented);function At(t,e){var n=Math.abs(2*t.wrap)-+(t.wrap<0),i=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||i-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function It(t){return"raster"===t||"image"===t||"video"===t}function Dt(){return new t.window.Worker(rr.workerUrl)}Tt.maxOverzooming=10,Tt.maxUnderzooming=3;var Rt=function(){this.active={}};Rt.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Rt.workerCount;)this.workers.push(new Dt);return this.active[t]=!0,this.workers.slice()},Rt.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)};var Ft,Lt=Math.floor(t.browser.hardwareConcurrency/2);function zt(e,n){var i={};for(var r in e)"ref"!==r&&(i[r]=e[r]);return t.refProperties.forEach((function(t){t in n&&(i[t]=n[t])})),i}function Nt(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=zt(t[i],e[t[i].ref]));return t}Rt.workerCount=Math.max(Math.min(Lt,6),1);var Bt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Vt(t,e,n){n.push({command:Bt.addSource,args:[t,e[t]]})}function Ut(t,e,n){e.push({command:Bt.removeSource,args:[t]}),n[t]=!0}function jt(t,e,n,i){Ut(t,n,i),Vt(t,e,n)}function qt(e,n,i){var r;for(r in e[i])if(e[i].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[i][r],n[i][r]))return!1;for(r in n[i])if(n[i].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[i][r],n[i][r]))return!1;return!0}function Gt(e,n,i,r,o,a){var s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||i.push({command:a,args:[r,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||i.push({command:a,args:[r,s,n[s],o]}))}function Ht(t){return t.id}function Zt(t,e){return t[e.id]=e,t}var Wt=function(t,e,n){var i=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function Kt(e,n,i,r,o){var a=t.create();return n?(t.scale(a,a,[1/o,1/o,1]),i||t.rotateZ(a,a,r.angle)):t.multiply(a,r.labelPlaneMatrix,e),a}function Xt(e,n,i,r,o){if(n){var a=t.clone(e);return t.scale(a,a,[o,o,1]),i||t.rotateZ(a,a,-r.angle),a}return r.glCoordMatrix}function $t(e,n){var i=[e.x,e.y,0,1];ae(i,i,n);var r=i[3];return{point:new t.Point(i[0]/r,i[1]/r),signedDistanceFromCamera:r}}function Yt(t,e){var n=t[0]/t[3],i=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&i>=-e[1]&&i<=e[1]}function Qt(e,n,i,r,o,a,s,u){var l=r?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(l,i.transform.zoom),h=[256/i.width*2+1,256/i.height*2+1],d=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;d.clear();for(var p=e.lineVertexArray,f=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,g=i.transform.width/i.transform.height,m=!1,y=0;y<f.length;y++){var _=f.get(y);if(_.hidden||_.writingMode===t.WritingMode.vertical&&!m)oe(_.numGlyphs,d);else{m=!1;var v=[_.anchorX,_.anchorY,0,1];if(t.transformMat4(v,v,n),Yt(v,h)){var b=.5+v[3]/i.transform.cameraToCenterDistance*.5,x=t.evaluateSizeForFeature(l,c,_),w=s?x*b:x/b,C=new t.Point(_.anchorX,_.anchorY),P=$t(C,o).point,M={},O=ee(_,w,!1,u,n,o,a,e.glyphOffsetArray,p,d,P,C,M,g);m=O.useVertical,(O.notEnoughRoom||m||O.needsFlipping&&ee(_,w,!0,u,n,o,a,e.glyphOffsetArray,p,d,P,C,M,g).notEnoughRoom)&&oe(_.numGlyphs,d)}else oe(_.numGlyphs,d)}}r?e.text.dynamicLayoutVertexBuffer.updateData(d):e.icon.dynamicLayoutVertexBuffer.updateData(d)}function Jt(t,e,n,i,r,o,a,s,u,l,c,h){var d=s.glyphStartIndex+s.numGlyphs,p=s.lineStartIndex,f=s.lineStartIndex+s.lineLength,g=e.getoffsetX(s.glyphStartIndex),m=e.getoffsetX(d-1),y=ie(t*g,n,i,r,o,a,s.segment,p,f,u,l,c,h);if(!y)return null;var _=ie(t*m,n,i,r,o,a,s.segment,p,f,u,l,c,h);return _?{first:y,last:_}:null}function te(e,n,i,r){return e===t.WritingMode.horizontal&&Math.abs(i.y-n.y)>Math.abs(i.x-n.x)*r?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<i.y:n.x>i.x)?{needsFlipping:!0}:null}function ee(e,n,i,r,o,a,s,u,l,c,h,d,p,f){var g,m=n/24,y=e.lineOffsetX*m,_=e.lineOffsetY*m;if(e.numGlyphs>1){var v=e.glyphStartIndex+e.numGlyphs,b=e.lineStartIndex,x=e.lineStartIndex+e.lineLength,w=Jt(m,u,y,_,i,h,d,e,l,a,p,!1);if(!w)return{notEnoughRoom:!0};var C=$t(w.first.point,s).point,P=$t(w.last.point,s).point;if(r&&!i){var M=te(e.writingMode,C,P,f);if(M)return M}g=[w.first];for(var O=e.glyphStartIndex+1;O<v-1;O++)g.push(ie(m*u.getoffsetX(O),y,_,i,h,d,e.segment,b,x,l,a,p,!1));g.push(w.last)}else{if(r&&!i){var k=$t(d,o).point,E=e.lineStartIndex+e.segment+1,S=new t.Point(l.getx(E),l.gety(E)),T=$t(S,o),A=T.signedDistanceFromCamera>0?T.point:ne(d,S,k,1,o),I=te(e.writingMode,k,A,f);if(I)return I}var D=ie(m*u.getoffsetX(e.glyphStartIndex),y,_,i,h,d,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,l,a,p,!1);if(!D)return{notEnoughRoom:!0};g=[D]}for(var R=0,F=g;R<F.length;R+=1){var L=F[R];t.addDynamicAttributes(c,L.point,L.angle)}return{}}function ne(t,e,n,i,r){var o=$t(t.add(t.sub(e)._unit()),r).point,a=n.sub(o);return n.add(a._mult(i/a.mag()))}function ie(e,n,i,r,o,a,s,u,l,c,h,d,p){var f=r?e-n:e+n,g=f>0?1:-1,m=0;r&&(g*=-1,m=Math.PI),g<0&&(m+=Math.PI);for(var y=g>0?u+s:u+s+1,_=y,v=o,b=o,x=0,w=0,C=Math.abs(f);x+w<=C;){if((y+=g)<u||y>=l)return null;if(b=v,void 0===(v=d[y])){var P=new t.Point(c.getx(y),c.gety(y)),M=$t(P,h);if(M.signedDistanceFromCamera>0)v=d[y]=M.point;else{var O=y-g;v=ne(0===x?a:new t.Point(c.getx(O),c.gety(O)),P,b,C-x+1,h)}}x+=w,w=b.dist(v)}var k=(C-x)/w,E=v.sub(b),S=E.mult(k)._add(b);return S._add(E._unit()._perp()._mult(i*g)),{point:S,angle:m+Math.atan2(v.y-b.y,v.x-b.x),tileDistance:p?{prevTileDistance:y-g===_?0:c.gettileUnitDistanceFromAnchor(y-g),lastSegmentViewportDistance:C-x}:null}}Wt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Wt.prototype.insert=function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},Wt.prototype.insertCircle=function(t,e,n,i){this._forEachCell(e-i,n-i,e+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(i)},Wt.prototype._insertBoxCell=function(t,e,n,i,r,o){this.boxCells[r].push(o)},Wt.prototype._insertCircleCell=function(t,e,n,i,r,o){this.circleCells[r].push(o)},Wt.prototype._query=function(t,e,n,i,r,o){if(n<0||t>this.width||i<0||e>this.height)return!r&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=i){if(r)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],h=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:l-h,y1:c-h,x2:l+h,y2:c+h})}return o?a.filter(o):a}return this._forEachCell(t,e,n,i,this._queryCell,a,{hitTest:r,seenUids:{box:{},circle:{}}},o),r?a.length>0:a},Wt.prototype._queryCircle=function(t,e,n,i,r){var o=t-n,a=t+n,s=e-n,u=e+n;if(a<0||o>this.width||u<0||s>this.height)return!i&&[];var l=[];return this._forEachCell(o,s,a,u,this._queryCellCircle,l,{hitTest:i,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},r),i?l.length>0:l},Wt.prototype.query=function(t,e,n,i,r){return this._query(t,e,n,i,!1,r)},Wt.prototype.hitTest=function(t,e,n,i,r){return this._query(t,e,n,i,!0,r)},Wt.prototype.hitTestCircle=function(t,e,n,i){return this._queryCircle(t,e,n,!0,i)},Wt.prototype._queryCell=function(t,e,n,i,r,o,a,s){var u=a.seenUids,l=this.boxCells[r];if(null!==l)for(var c=this.bboxes,h=0,d=l;h<d.length;h+=1){var p=d[h];if(!u.box[p]){u.box[p]=!0;var f=4*p;if(t<=c[f+2]&&e<=c[f+3]&&n>=c[f+0]&&i>=c[f+1]&&(!s||s(this.boxKeys[p]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[p],x1:c[f],y1:c[f+1],x2:c[f+2],y2:c[f+3]})}}}var g=this.circleCells[r];if(null!==g)for(var m=this.circles,y=0,_=g;y<_.length;y+=1){var v=_[y];if(!u.circle[v]){u.circle[v]=!0;var b=3*v;if(this._circleAndRectCollide(m[b],m[b+1],m[b+2],t,e,n,i)&&(!s||s(this.circleKeys[v]))){if(a.hitTest)return o.push(!0),!0;var x=m[b],w=m[b+1],C=m[b+2];o.push({key:this.circleKeys[v],x1:x-C,y1:w-C,x2:x+C,y2:w+C})}}}},Wt.prototype._queryCellCircle=function(t,e,n,i,r,o,a,s){var u=a.circle,l=a.seenUids,c=this.boxCells[r];if(null!==c)for(var h=this.bboxes,d=0,p=c;d<p.length;d+=1){var f=p[d];if(!l.box[f]){l.box[f]=!0;var g=4*f;if(this._circleAndRectCollide(u.x,u.y,u.radius,h[g+0],h[g+1],h[g+2],h[g+3])&&(!s||s(this.boxKeys[f])))return o.push(!0),!0}}var m=this.circleCells[r];if(null!==m)for(var y=this.circles,_=0,v=m;_<v.length;_+=1){var b=v[_];if(!l.circle[b]){l.circle[b]=!0;var x=3*b;if(this._circlesCollide(y[x],y[x+1],y[x+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[b])))return o.push(!0),!0}}},Wt.prototype._forEachCell=function(t,e,n,i,r,o,a,s){for(var u=this._convertToXCellCoord(t),l=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),h=this._convertToYCellCoord(i),d=u;d<=c;d++)for(var p=l;p<=h;p++)if(r.call(this,t,e,n,i,this.xCellCount*p+d,o,a,s))return},Wt.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Wt.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Wt.prototype._circlesCollide=function(t,e,n,i,r,o){var a=i-t,s=r-e,u=n+o;return u*u>a*a+s*s},Wt.prototype._circleAndRectCollide=function(t,e,n,i,r,o,a){var s=(o-i)/2,u=Math.abs(t-(i+s));if(u>s+n)return!1;var l=(a-r)/2,c=Math.abs(e-(r+l));if(c>l+n)return!1;if(u<=s||c<=l)return!0;var h=u-s,d=c-l;return h*h+d*d<=n*n};var re=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function oe(t,e){for(var n=0;n<t;n++){var i=e.length;e.resize(i+4),e.float32.set(re,3*i)}}function ae(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t[3]=n[3]*i+n[7]*r+n[15],t}var se=function(t,e,n){void 0===e&&(e=new Wt(t.width+200,t.height+200,25)),void 0===n&&(n=new Wt(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function ue(t,e,n){t[e+4]=n?1:0}function le(e,n,i){return n*(t.EXTENT/(e.tileSize*Math.pow(2,i-e.tileID.overscaledZ)))}se.prototype.placeCollisionBox=function(t,e,n,i,r){var o=this.projectAndGetPerspectiveRatio(i,t.anchorPointX,t.anchorPointY),a=n*o.perspectiveRatio,s=t.x1*a+o.point.x,u=t.y1*a+o.point.y,l=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(s,u,l,c)||!e&&this.grid.hitTest(s,u,l,c,r)?{box:[],offscreen:!1}:{box:[s,u,l,c],offscreen:this.isOffscreen(s,u,l,c)}},se.prototype.approximateTileDistance=function(t,e,n,i,r){var o=t.lastSegmentViewportDistance*n;return t.prevTileDistance+o+((r?1:i/this.pitchfactor)-1)*o*Math.abs(Math.sin(e))},se.prototype.placeCollisionCircles=function(e,n,i,r,o,a,s,u,l,c,h,d,p){var f=[],g=this.projectAnchor(l,o.anchorX,o.anchorY),m=u/24,y=o.lineOffsetX*u,_=o.lineOffsetY*u,v=new t.Point(o.anchorX,o.anchorY),b=Jt(m,s,y,_,!1,$t(v,c).point,v,o,a,c,{},!0),x=!1,w=!1,C=!0,P=g.perspectiveRatio*r,M=1/(r*i),O=0,k=0;b&&(O=this.approximateTileDistance(b.first.tileDistance,b.first.angle,M,g.cameraDistance,d),k=this.approximateTileDistance(b.last.tileDistance,b.last.angle,M,g.cameraDistance,d));for(var E=0;E<e.length;E+=5){var S=e[E],T=e[E+1],A=e[E+2],I=e[E+3];if(!b||I<-O||I>k)ue(e,E,!1);else{var D=this.projectPoint(l,S,T),R=A*P;if(f.length>0){var F=D.x-f[f.length-4],L=D.y-f[f.length-3];if(R*R*2>F*F+L*L&&E+8<e.length){var z=e[E+8];if(z>-O&&z<k){ue(e,E,!1);continue}}}f.push(D.x,D.y,R,E/5),ue(e,E,!0);var N=D.x-R,B=D.y-R,V=D.x+R,U=D.y+R;if(C=C&&this.isOffscreen(N,B,V,U),w=w||this.isInsideGrid(N,B,V,U),!n&&this.grid.hitTestCircle(D.x,D.y,R,p)){if(!h)return{circles:[],offscreen:!1};x=!0}}}return{circles:x||!w?[]:f,offscreen:C}},se.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],i=1/0,r=1/0,o=-1/0,a=-1/0,s=0,u=e;s<u.length;s+=1){var l=u[s],c=new t.Point(l.x+100,l.y+100);i=Math.min(i,c.x),r=Math.min(r,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y),n.push(c)}for(var h={},d={},p=0,f=this.grid.query(i,r,o,a).concat(this.ignoredGrid.query(i,r,o,a));p<f.length;p+=1){var g=f[p],m=g.key;if(void 0===h[m.bucketInstanceId]&&(h[m.bucketInstanceId]={}),!h[m.bucketInstanceId][m.featureIndex]){var y=[new t.Point(g.x1,g.y1),new t.Point(g.x2,g.y1),new t.Point(g.x2,g.y2),new t.Point(g.x1,g.y2)];t.polygonIntersectsPolygon(n,y)&&(h[m.bucketInstanceId][m.featureIndex]=!0,void 0===d[m.bucketInstanceId]&&(d[m.bucketInstanceId]=[]),d[m.bucketInstanceId].push(m.featureIndex))}}return d},se.prototype.insertCollisionBox=function(t,e,n,i,r){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:i,collisionGroupID:r},t[0],t[1],t[2],t[3])},se.prototype.insertCollisionCircles=function(t,e,n,i,r){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:i,collisionGroupID:r},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},se.prototype.projectAnchor=function(t,e,n){var i=[e,n,0,1];return ae(i,i,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5,cameraDistance:i[3]}},se.prototype.projectPoint=function(e,n,i){var r=[n,i,0,1];return ae(r,r,e),new t.Point((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100)},se.prototype.projectAndGetPerspectiveRatio=function(e,n,i){var r=[n,i,0,1];return ae(r,r,e),{point:new t.Point((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},se.prototype.isOffscreen=function(t,e,n,i){return n<100||t>=this.screenRightBoundary||i<100||e>this.screenBottomBoundary},se.prototype.isInsideGrid=function(t,e,n,i){return n>=0&&t<this.gridRightBoundary&&i>=0&&e<this.gridBottomBoundary};var ce=function(t,e,n,i){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):i&&n?1:0,this.placed=n};ce.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var he=function(t,e,n,i,r){this.text=new ce(t?t.text:null,e,n,r),this.icon=new ce(t?t.icon:null,e,i,r)};he.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var de=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},pe=function(t,e,n,i,r){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=i,this.tileID=r},fe=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function ge(e,n,i,r,o){var a=t.getAnchorAlignment(e),s=-(a.horizontalAlign-.5)*n,u=-(a.verticalAlign-.5)*i,l=t.evaluateVariableOffset(e,r);return new t.Point(s+l[0]*o,u+l[1]*o)}function me(e,n,i,r,o,a){var s=e.x1,u=e.x2,l=e.y1,c=e.y2,h=e.anchorPointX,d=e.anchorPointY,p=new t.Point(n,i);return r&&p._rotate(o?a:-a),{x1:s+p.x,y1:l+p.y,x2:u+p.x,y2:c+p.y,anchorPointX:h,anchorPointY:d}}fe.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var ye=function(t,e,n,i){this.transform=t.clone(),this.collisionIndex=new se(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new fe(n),this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}};function _e(t,e,n,i,r){t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0)}ye.prototype.getBucketParts=function(e,n,i,r){var o=i.getBucket(n),a=i.latestFeatureIndex;if(o&&a&&n.id===o.layerIds[0]){var s=i.collisionBoxArray,u=o.layers[0].layout,l=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),c=i.tileSize/t.EXTENT,h=this.transform.calculatePosMatrix(i.tileID.toUnwrapped()),d=Kt(h,"map"===u.get("text-pitch-alignment"),"map"===u.get("text-rotation-alignment"),this.transform,le(i,1,this.transform.zoom));this.retainedQueryData[o.bucketInstanceId]=new pe(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,i.tileID);var p={bucket:o,layout:u,posMatrix:h,textLabelPlaneMatrix:d,scale:l,textPixelRatio:c,holdingForFade:i.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(r)for(var f=0,g=o.sortKeyRanges;f<g.length;f+=1){var m=g[f];e.push({sortKey:m.sortKey,symbolInstanceStart:m.symbolInstanceStart,symbolInstanceEnd:m.symbolInstanceEnd,parameters:p})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:p})}},ye.prototype.attemptAnchorPlacement=function(t,e,n,i,r,o,a,s,u,l,c,h,d,p,f){var g,m=[h.textOffset0,h.textOffset1],y=ge(t,n,i,m,r),_=this.collisionIndex.placeCollisionBox(me(e,y.x,y.y,o,a,this.transform.angle),c,s,u,l.predicate);if(!f||0!==this.collisionIndex.placeCollisionBox(me(f,y.x,y.y,o,a,this.transform.angle),c,s,u,l.predicate).box.length)return _.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(g=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:m,width:n,height:i,anchor:t,textBoxScale:r,prevAnchor:g},this.markUsedJustification(d,t,h,p),d.allowVerticalPlacement&&(this.markUsedOrientation(d,p,h),this.placedOrientations[h.crossTileID]=p),{shift:y,placedGlyphBoxes:_}):void 0},ye.prototype.placeLayerBucketPart=function(e,n,i){var r=this,o=e.parameters,a=o.bucket,s=o.layout,u=o.posMatrix,l=o.textLabelPlaneMatrix,c=o.scale,h=o.textPixelRatio,d=o.holdingForFade,p=o.collisionBoxArray,f=o.partiallyEvaluatedTextSize,g=o.collisionGroup,m=s.get("text-optional"),y=s.get("icon-optional"),_=s.get("text-allow-overlap"),v=s.get("icon-allow-overlap"),b="map"===s.get("text-rotation-alignment"),x="map"===s.get("text-pitch-alignment"),w="none"!==s.get("icon-text-fit"),C="viewport-y"===s.get("symbol-z-order"),P=_&&(v||!a.hasIconData()||y),M=v&&(_||!a.hasTextData()||m);!a.collisionArrays&&p&&a.deserializeCollisionBoxes(p);var O=function(e,o){if(!n[e.crossTileID])if(d)r.placements[e.crossTileID]=new de(!1,!1,!1);else{var p,C=!1,O=!1,k=!0,E=null,S={box:null,offscreen:null},T={box:null,offscreen:null},A=null,I=null,D=0,R=0,F=0;o.textFeatureIndex&&(D=o.textFeatureIndex),o.verticalTextFeatureIndex&&(R=o.verticalTextFeatureIndex);var L=o.textBox;if(L){var z=function(n){var i=t.WritingMode.horizontal;if(a.allowVerticalPlacement&&!n&&r.prevPlacement){var o=r.prevPlacement.placedOrientations[e.crossTileID];o&&(r.placedOrientations[e.crossTileID]=o,r.markUsedOrientation(a,i=o,e))}return i},N=function(n,i){if(a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&o.verticalTextBox)for(var r=0,s=a.writingModes;r<s.length&&(s[r]===t.WritingMode.vertical?(S=i(),T=S):S=n(),!(S&&S.box&&S.box.length));r+=1);else S=n()};if(s.get("text-variable-anchor")){var B=s.get("text-variable-anchor");if(r.prevPlacement&&r.prevPlacement.variableOffsets[e.crossTileID]){var V=r.prevPlacement.variableOffsets[e.crossTileID];B.indexOf(V.anchor)>0&&(B=B.filter((function(t){return t!==V.anchor}))).unshift(V.anchor)}var U=function(t,n,i){for(var o=t.x2-t.x1,s=t.y2-t.y1,l=e.textBoxScale,c=w&&!v?n:null,d={box:[],offscreen:!1},p=_?2*B.length:B.length,f=0;f<p;++f){var m=r.attemptAnchorPlacement(B[f%B.length],t,o,s,l,b,x,h,u,g,f>=B.length,e,a,i,c);if(m&&(d=m.placedGlyphBoxes)&&d.box&&d.box.length){C=!0,E=m.shift;break}}return d};N((function(){return U(L,o.iconBox,t.WritingMode.horizontal)}),(function(){var n=o.verticalTextBox;return a.allowVerticalPlacement&&!(S&&S.box&&S.box.length)&&e.numVerticalGlyphVertices>0&&n?U(n,o.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),S&&(C=S.box,k=S.offscreen);var j=z(S&&S.box);if(!C&&r.prevPlacement){var q=r.prevPlacement.variableOffsets[e.crossTileID];q&&(r.variableOffsets[e.crossTileID]=q,r.markUsedJustification(a,q.anchor,e,j))}}else{var G=function(t,n){var i=r.collisionIndex.placeCollisionBox(t,_,h,u,g.predicate);return i&&i.box&&i.box.length&&(r.markUsedOrientation(a,n,e),r.placedOrientations[e.crossTileID]=n),i};N((function(){return G(L,t.WritingMode.horizontal)}),(function(){var n=o.verticalTextBox;return a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?G(n,t.WritingMode.vertical):{box:null,offscreen:null}})),z(S&&S.box&&S.box.length)}}C=(p=S)&&p.box&&p.box.length>0,k=p&&p.offscreen;var H=o.textCircles;if(H){var Z=a.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),W=t.evaluateSizeForFeature(a.textSizeData,f,Z);A=r.collisionIndex.placeCollisionCircles(H,_,c,h,Z,a.lineVertexArray,a.glyphOffsetArray,W,u,l,i,x,g.predicate),C=_||A.circles.length>0,k=k&&A.offscreen}if(o.iconFeatureIndex&&(F=o.iconFeatureIndex),o.iconBox){var K=function(t){var e=w&&E?me(t,E.x,E.y,b,x,r.transform.angle):t;return r.collisionIndex.placeCollisionBox(e,v,h,u,g.predicate)};O=T&&T.box&&T.box.length&&o.verticalIconBox?(I=K(o.verticalIconBox)).box.length>0:(I=K(o.iconBox)).box.length>0,k=k&&I.offscreen}var X=m||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,$=y||0===e.numIconVertices;X||$?$?X||(O=O&&C):C=O&&C:O=C=O&&C,C&&p&&p.box&&r.collisionIndex.insertCollisionBox(p.box,s.get("text-ignore-placement"),a.bucketInstanceId,T&&T.box&&R?R:D,g.ID),O&&I&&r.collisionIndex.insertCollisionBox(I.box,s.get("icon-ignore-placement"),a.bucketInstanceId,F,g.ID),C&&A&&r.collisionIndex.insertCollisionCircles(A.circles,s.get("text-ignore-placement"),a.bucketInstanceId,D,g.ID),r.placements[e.crossTileID]=new de(C||P,O||M,k||a.justReloaded),n[e.crossTileID]=!0}};if(C)for(var k=a.getSortedSymbolIndexes(this.transform.angle),E=k.length-1;E>=0;--E){var S=k[E];O(a.symbolInstances.get(S),a.collisionArrays[S])}else for(var T=e.symbolInstanceStart;T<e.symbolInstanceEnd;T++)O(a.symbolInstances.get(T),a.collisionArrays[T]);a.justReloaded=!1},ye.prototype.markUsedJustification=function(e,n,i,r){var o;o=r===t.WritingMode.vertical?i.verticalPlacedTextSymbolIndex:{left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(n)];for(var a=0,s=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex];a<s.length;a+=1){var u=s[a];u>=0&&(e.text.placedSymbolArray.get(u).crossTileID=o>=0&&u!==o?0:i.crossTileID)}},ye.prototype.markUsedOrientation=function(e,n,i){for(var r=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,o=n===t.WritingMode.vertical?n:0,a=0,s=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex];a<s.length;a+=1)e.text.placedSymbolArray.get(s[a]).placedOrientation=r;i.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=o)},ye.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var i=e?e.symbolFadeChange(t):1,r=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(var s in this.placements){var u=this.placements[s],l=r[s];l?(this.opacities[s]=new he(l,i,u.text,u.icon),n=n||u.text!==l.text.placed||u.icon!==l.icon.placed):(this.opacities[s]=new he(null,i,u.text,u.icon,u.skipFade),n=n||u.text||u.icon)}for(var c in r){var h=r[c];if(!this.opacities[c]){var d=new he(h,i,!1,!1);d.isHidden()||(this.opacities[c]=d,n=n||h.text.placed||h.icon.placed)}}for(var p in o)this.variableOffsets[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.variableOffsets[p]=o[p]);for(var f in a)this.placedOrientations[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.placedOrientations[f]=a[f]);n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},ye.prototype.updateLayerOpacities=function(t,e){for(var n={},i=0,r=e;i<r.length;i+=1){var o=r[i],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},ye.prototype.updateBucketOpacities=function(e,n,i){var r=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear(),e.hasIconCollisionCircleData()&&e.iconCollisionCircle.collisionVertexArray.clear(),e.hasTextCollisionCircleData()&&e.textCollisionCircle.collisionVertexArray.clear();var o=e.layers[0].layout,a=new he(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),u=o.get("icon-allow-overlap"),l=o.get("text-variable-anchor"),c="map"===o.get("text-rotation-alignment"),h="map"===o.get("text-pitch-alignment"),d="none"!==o.get("icon-text-fit"),p=new he(null,0,s&&(u||!e.hasIconData()||o.get("icon-optional")),u&&(s||!e.hasTextData()||o.get("text-optional")),!0);!e.collisionArrays&&i&&(e.hasIconCollisionBoxData()||e.hasIconCollisionCircleData()||e.hasTextCollisionBoxData()||e.hasTextCollisionCircleData())&&e.deserializeCollisionBoxes(i);for(var f=function(t,e,n){for(var i=0;i<e/4;i++)t.opacityVertexArray.emplaceBack(n)},g=function(i){var o=e.symbolInstances.get(i),s=o.numHorizontalGlyphVertices,u=o.numVerticalGlyphVertices,g=o.crossTileID,m=n[g],y=r.opacities[g];m?y=a:y||(r.opacities[g]=y=p),n[g]=!0;var _=o.numIconVertices>0,v=r.placedOrientations[o.crossTileID],b=v===t.WritingMode.vertical,x=v===t.WritingMode.horizontal||v===t.WritingMode.horizontalOnly;if(s>0||u>0){var w=Oe(y.text);f(e.text,s,b?ke:w),f(e.text,u,x?ke:w);var C=y.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=C||b?1:0)})),o.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=C||x?1:0);var P=r.variableOffsets[o.crossTileID];P&&r.markUsedJustification(e,P.anchor,o,v);var M=r.placedOrientations[o.crossTileID];M&&(r.markUsedJustification(e,"left",o,M),r.markUsedOrientation(e,M,o))}if(_){var O=Oe(y.icon),k=!(d&&o.verticalPlacedIconSymbolIndex&&b);o.placedIconSymbolIndex>=0&&(f(e.icon,o.numIconVertices,k?O:ke),e.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=y.icon.isHidden()),o.verticalPlacedIconSymbolIndex>=0&&(f(e.icon,o.numVerticalIconVertices,k?ke:O),e.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=y.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasIconCollisionCircleData()||e.hasTextCollisionBoxData()||e.hasTextCollisionCircleData()){var E=e.collisionArrays[i];if(E){var S=new t.Point(0,0);if(E.textBox||E.verticalTextBox){var T=!0;if(l){var A=r.variableOffsets[g];A?(S=ge(A.anchor,A.width,A.height,A.textOffset,A.textBoxScale),c&&S._rotate(h?r.transform.angle:-r.transform.angle)):T=!1}E.textBox&&_e(e.textCollisionBox.collisionVertexArray,y.text.placed,!T||b,S.x,S.y),E.verticalTextBox&&_e(e.textCollisionBox.collisionVertexArray,y.text.placed,!T||x,S.x,S.y)}var I=Boolean(!x&&E.verticalIconBox);E.iconBox&&_e(e.iconCollisionBox.collisionVertexArray,y.icon.placed,I,d?S.x:0,d?S.y:0),E.verticalIconBox&&_e(e.iconCollisionBox.collisionVertexArray,y.icon.placed,!I,d?S.x:0,d?S.y:0);var D=E.textCircles;if(D&&e.hasTextCollisionCircleData())for(var R=0;R<D.length;R+=5)_e(e.textCollisionCircle.collisionVertexArray,y.text.placed,m||0===D[R+4])}}},m=0;m<e.symbolInstances.length;m++)g(m);e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.hasIconCollisionCircleData()&&e.iconCollisionCircle.collisionVertexBuffer&&e.iconCollisionCircle.collisionVertexBuffer.updateData(e.iconCollisionCircle.collisionVertexArray),e.hasTextCollisionCircleData()&&e.textCollisionCircle.collisionVertexBuffer&&e.textCollisionCircle.collisionVertexBuffer.updateData(e.textCollisionCircle.collisionVertexArray)},ye.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ye.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},ye.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},ye.prototype.stillRecent=function(t,e){var n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t},ye.prototype.setStale=function(){this.stale=!0};var ve=Math.pow(2,25),be=Math.pow(2,24),xe=Math.pow(2,17),we=Math.pow(2,16),Ce=Math.pow(2,9),Pe=Math.pow(2,8),Me=Math.pow(2,1);function Oe(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*ve+e*be+n*xe+e*we+n*Ce+e*Pe+n*Me+e}var ke=0,Ee=function(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Ee.prototype.continuePlacement=function(t,e,n,i,r){for(var o=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(o,i,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((function(t,e){return t.sortKey-e.sortKey})));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,r())return!0;return!1};var Se=function(t,e,n,i,r,o,a){this.placement=new ye(t,r,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=i,this._done=!1};Se.prototype.isDone=function(){return this._done},Se.prototype.continuePlacement=function(e,n,i){for(var r=this,o=t.browser.now(),a=function(){var e=t.browser.now()-o;return!r._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=n[e[this._currentPlacementIndex]],u=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=u)&&(!s.maxzoom||s.maxzoom>u)){if(this._inProgressLayer||(this._inProgressLayer=new Ee(s)),this._inProgressLayer.continuePlacement(i[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Se.prototype.commit=function(t){return this.placement.commit(t),this.placement};var Te=512/t.EXTENT/2,Ae=function(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var i=0;i<e.length;i++){var r=e.get(i),o=r.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,t)})}};Ae.prototype.getScaledCoordinates=function(e,n){var i=Te/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*i),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*i)}},Ae.prototype.findMatches=function(t,e,n){for(var i=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),r=0;r<t.length;r++){var o=t.get(r);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),u=0,l=a;u<l.length;u+=1){var c=l[u];if(Math.abs(c.coord.x-s.x)<=i&&Math.abs(c.coord.y-s.y)<=i&&!n[c.crossTileID]){n[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};var Ie=function(){this.maxCrossTileID=0};Ie.prototype.generate=function(){return++this.maxCrossTileID};var De=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};De.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var i=this.indexes[n],r={};for(var o in i){var a=i[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),r[a.tileID.key]=a}this.indexes[n]=r}this.lng=t},De.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var i=0;i<e.symbolInstances.length;i++)e.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var r=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var u=a[s];u.tileID.isChildOf(t)&&u.findMatches(e.symbolInstances,t,r)}else{var l=a[t.scaledTo(Number(o)).key];l&&l.findMatches(e.symbolInstances,t,r)}}for(var c=0;c<e.symbolInstances.length;c++){var h=e.symbolInstances.get(c);h.crossTileID||(h.crossTileID=n.generate(),r[h.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Ae(t,e.symbolInstances,e.bucketInstanceId),!0},De.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var i=0,r=e.indexedSymbolInstances[n];i<r.length;i+=1)delete this.usedCrossTileIDs[t][r[i].crossTileID]},De.prototype.removeStaleBuckets=function(t){var e=!1;for(var n in this.indexes){var i=this.indexes[n];for(var r in i)t[i[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,i[r]),delete i[r],e=!0)}return e};var Re=function(){this.layerIndexes={},this.crossTileIDs=new Ie,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Re.prototype.addLayer=function(t,e,n){var i=this.layerIndexes[t.id];void 0===i&&(i=this.layerIndexes[t.id]=new De);var r=!1,o={};i.handleWrapJump(n);for(var a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.getBucket(t);l&&t.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(u.tileID,l,this.crossTileIDs)&&(r=!0),o[l.bucketInstanceId]=!0)}return i.removeStaleBuckets(o)&&(r=!0),r},Re.prototype.pruneUnusedLayers=function(t){var e={};for(var n in t.forEach((function(t){e[t]=!0})),this.layerIndexes)e[n]||delete this.layerIndexes[n]};var Fe=function(e,n){return t.emitValidationErrors(e,n&&n.filter((function(t){return"source.canvas"!==t.identifier})))},Le=t.pick(Bt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),ze=t.pick(Bt,["setCenter","setZoom","setBearing","setPitch"]),Ne=function(){var e={},n=t.styleSpec.$version;for(var i in t.styleSpec.$root){var r,o=t.styleSpec.$root[i];o.required&&null!=(r="version"===i?n:"array"===o.type?[]:{})&&(e[i]=r)}return e}(),Be=function(e){function n(i,r){var o=this;void 0===r&&(r={}),e.call(this),this.map=i,this.dispatcher=new P((Ft||(Ft=new Rt),Ft),this),this.imageManager=new d,this.imageManager.setEventedParent(this),this.glyphManager=new v(i._requestManager,r.localIdeographFontFamily),this.lineAtlas=new C(256,512),this.crossTileSymbolIndex=new Re,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var a=this;this._rtlTextPluginCallback=n.registerForPluginStateChange((function(e){a.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},(function(e,n){if(t.triggerPluginCompletionEvent(e),n&&n.every((function(t){return t})))for(var i in a.sourceCaches)a.sourceCaches[i].reload()}))})),this.on("data",(function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var i in o._layers){var r=o._layers[i];r.source===n.id&&o._validateLayer(r)}}}}))}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadURL=function(e,n){var i=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var r="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,n.accessToken);var o=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,(function(e,n){i._request=null,e?i.fire(new t.ErrorEvent(e)):n&&i._load(n,r)}))},n.prototype.loadJSON=function(e,n){var i=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame((function(){i._request=null,i._load(e,!1!==n.validate)}))},n.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Ne,!1)},n.prototype._load=function(e,n){if(!n||!Fe(this,t.validateStyle(e))){for(var i in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(i,e.sources[i],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var r=Nt(this.stylesheet.layers);this._order=r.map((function(t){return t.id})),this._layers={};for(var o=0,a=r;o<a.length;o+=1){var s=a[o];(s=t.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},n.prototype._loadSprite=function(e){var n=this;this._spriteRequest=function(e,n,i){var r,o,a,s=t.browser.devicePixelRatio>1?"@2x":"",u=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),(function(t,e){u=null,a||(a=t,r=e,c())})),l=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),(function(t,e){l=null,a||(a=t,o=e,c())}));function c(){if(a)i(a);else if(r&&o){var e=t.browser.getImageData(o),n={};for(var s in r){var u=r[s],l=u.width,c=u.height,h=u.x,d=u.y,p=u.sdf,f=u.pixelRatio,g=u.stretchX,m=u.stretchY,y=u.content,_=new t.RGBAImage({width:l,height:c});t.RGBAImage.copy(e,_,{x:h,y:d},{x:0,y:0},{width:l,height:c}),n[s]={data:_,pixelRatio:f,sdf:p,stretchX:g,stretchY:m,content:y}}i(null,n)}}return{cancel:function(){u&&(u.cancel(),u=null),l&&(l.cancel(),l=null)}}}(e,this.map._requestManager,(function(e,i){if(n._spriteRequest=null,e)n.fire(new t.ErrorEvent(e));else if(i)for(var r in i)n.imageManager.addImage(r,i[r]);n.imageManager.setLoaded(!0),n.dispatcher.broadcast("setImages",n.imageManager.listImages()),n.fire(new t.Event("data",{dataType:"style"}))}))},n.prototype._validateLayer=function(e){var n=this.sourceCaches[e.source];if(n){var i=e.sourceLayer;if(i){var r=n.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(i))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+i+'" does not exist on source "'+r.id+'" as specified by style layer "'+e.id+'"')))}}},n.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},n.prototype._serializeLayers=function(t){for(var e=[],n=0,i=t;n<i.length;n+=1){var r=this._layers[i[n]];"custom"!==r.type&&e.push(r.serialize())}return e},n.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},n.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},n.prototype.update=function(e){if(this._loaded){var n=this._changed;if(this._changed){var i=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var o in(i.length||r.length)&&this._updateWorkerLayers(i,r),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var u in this.sourceCaches)this.sourceCaches[u].used=!1;for(var l=this.imageManager.listImages(),c=0,h=this._order;c<h.length;c+=1){var d=this._layers[h[c]];d.recalculate(e,l),!d.isHidden(e.zoom)&&d.source&&(this.sourceCaches[d.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,n&&this.fire(new t.Event("data",{dataType:"style"}))}},n.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},n.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},n.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},n.prototype.setState=function(e){var n=this;if(this._checkLoaded(),Fe(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=Nt(e.layers);var i=function(e,n){if(!e)return[{command:Bt.setStyle,args:[n]}];var i=[];try{if(!t.deepEqual(e.version,n.version))return[{command:Bt.setStyle,args:[n]}];t.deepEqual(e.center,n.center)||i.push({command:Bt.setCenter,args:[n.center]}),t.deepEqual(e.zoom,n.zoom)||i.push({command:Bt.setZoom,args:[n.zoom]}),t.deepEqual(e.bearing,n.bearing)||i.push({command:Bt.setBearing,args:[n.bearing]}),t.deepEqual(e.pitch,n.pitch)||i.push({command:Bt.setPitch,args:[n.pitch]}),t.deepEqual(e.sprite,n.sprite)||i.push({command:Bt.setSprite,args:[n.sprite]}),t.deepEqual(e.glyphs,n.glyphs)||i.push({command:Bt.setGlyphs,args:[n.glyphs]}),t.deepEqual(e.transition,n.transition)||i.push({command:Bt.setTransition,args:[n.transition]}),t.deepEqual(e.light,n.light)||i.push({command:Bt.setLight,args:[n.light]});var r={},o=[];!function(e,n,i,r){var o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||Ut(o,i,r));for(o in n)n.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.deepEqual(e[o],n[o])||("geojson"===e[o].type&&"geojson"===n[o].type&&qt(e,n,o)?i.push({command:Bt.setGeoJSONSourceData,args:[o,n[o].data]}):jt(o,n,i,r)):Vt(o,n,i))}(e.sources,n.sources,o,r);var a=[];e.layers&&e.layers.forEach((function(t){r[t.source]?i.push({command:Bt.removeLayer,args:[t.id]}):a.push(t)})),i=i.concat(o),function(e,n,i){n=n||[];var r,o,a,s,u,l,c,h=(e=e||[]).map(Ht),d=n.map(Ht),p=e.reduce(Zt,{}),f=n.reduce(Zt,{}),g=h.slice(),m=Object.create(null);for(r=0,o=0;r<h.length;r++)f.hasOwnProperty(a=h[r])?o++:(i.push({command:Bt.removeLayer,args:[a]}),g.splice(g.indexOf(a,o),1));for(r=0,o=0;r<d.length;r++)g[g.length-1-r]!==(a=d[d.length-1-r])&&(p.hasOwnProperty(a)?(i.push({command:Bt.removeLayer,args:[a]}),g.splice(g.lastIndexOf(a,g.length-o),1)):o++,i.push({command:Bt.addLayer,args:[f[a],l=g[g.length-r]]}),g.splice(g.length-r,0,a),m[a]=!0);for(r=0;r<d.length;r++)if(s=p[a=d[r]],u=f[a],!m[a]&&!t.deepEqual(s,u))if(t.deepEqual(s.source,u.source)&&t.deepEqual(s["source-layer"],u["source-layer"])&&t.deepEqual(s.type,u.type)){for(c in Gt(s.layout,u.layout,i,a,null,Bt.setLayoutProperty),Gt(s.paint,u.paint,i,a,null,Bt.setPaintProperty),t.deepEqual(s.filter,u.filter)||i.push({command:Bt.setFilter,args:[a,u.filter]}),t.deepEqual(s.minzoom,u.minzoom)&&t.deepEqual(s.maxzoom,u.maxzoom)||i.push({command:Bt.setLayerZoomRange,args:[a,u.minzoom,u.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Gt(s[c],u[c],i,a,c.slice(6),Bt.setPaintProperty):t.deepEqual(s[c],u[c])||i.push({command:Bt.setLayerProperty,args:[a,c,u[c]]}));for(c in u)u.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Gt(s[c],u[c],i,a,c.slice(6),Bt.setPaintProperty):t.deepEqual(s[c],u[c])||i.push({command:Bt.setLayerProperty,args:[a,c,u[c]]}))}else i.push({command:Bt.removeLayer,args:[a]}),l=g[g.lastIndexOf(a)+1],i.push({command:Bt.addLayer,args:[u,l]})}(a,n.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:Bt.setStyle,args:[n]}]}return i}(this.serialize(),e).filter((function(t){return!(t.command in ze)}));if(0===i.length)return!1;var r=i.filter((function(t){return!(t.command in Le)}));if(r.length>0)throw new Error("Unimplemented: "+r.map((function(t){return t.command})).join(", ")+".");return i.forEach((function(t){"setTransition"!==t.command&&n[t.command].apply(n,t.args)})),this.stylesheet=e,!0},n.prototype.addImage=function(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this._changedImages[e]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},n.prototype.getImage=function(t){return this.imageManager.getImage(t)},n.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._changedImages[e]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},n.prototype.addSource=function(e,n,i){var r=this;if(void 0===i&&(i={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,n,null,i))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=this.sourceCaches[e]=new Tt(e,n,this.dispatcher);o.style=this,o.setEventedParent(this,(function(){return{isSourceLoaded:r.loaded(),source:o.serialize(),sourceId:e}})),o.onAdd(this.map),this._changed=!0}},n.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')));var i=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],i.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),i.setEventedParent(null),i.clearTiles(),i.onRemove&&i.onRemove(this.map),this._changed=!0},n.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},n.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},n.prototype.addLayer=function(e,n,i){void 0===i&&(i={}),this._checkLoaded();var r=e.id;if(this.getLayer(r))this.fire(new t.ErrorEvent(new Error('Layer with id "'+r+'" already exists on this map')));else{var o;if("custom"===e.type){if(Fe(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(r,e.source),e=t.clone$1(e),e=t.extend(e,{source:r})),this._validate(t.validateStyle.layer,"layers."+r,e,{arrayIndex:-1},i))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:r}})}var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(a,0,r),this._layerOrderChanged=!0,this._layers[r]=o,this._removedLayers[r]&&o.source&&"custom"!==o.type){var s=this._removedLayers[r];delete this._removedLayers[r],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},n.prototype.moveLayer=function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var i=this._order.indexOf(e);this._order.splice(i,1);var r=n?this._order.indexOf(n):this._order.length;n&&-1===r?this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(r,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},n.prototype.removeLayer=function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var i=this._order.indexOf(e);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},n.prototype.getLayer=function(t){return this._layers[t]},n.prototype.setLayerZoomRange=function(e,n,i){this._checkLoaded();var r=this.getLayer(e);r?r.minzoom===n&&r.maxzoom===i||(null!=n&&(r.minzoom=n),null!=i&&(r.maxzoom=i),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},n.prototype.setFilter=function(e,n,i){void 0===i&&(i={}),this._checkLoaded();var r=this.getLayer(e);if(r){if(!t.deepEqual(r.filter,n))return null==n?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(t.validateStyle.filter,"layers."+r.id+".filter",n,null,i)||(r.filter=t.clone$1(n),this._updateLayer(r)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},n.prototype.getFilter=function(e){return t.clone$1(this.getLayer(e).filter)},n.prototype.setLayoutProperty=function(e,n,i,r){void 0===r&&(r={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getLayoutProperty(n),i)||(o.setLayoutProperty(n,i,r),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getLayoutProperty=function(e,n){var i=this.getLayer(e);if(i)return i.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},n.prototype.setPaintProperty=function(e,n,i,r){void 0===r&&(r={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getPaintProperty(n),i)||(o.setPaintProperty(n,i,r)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},n.prototype.setFeatureState=function(e,n){this._checkLoaded();var i=e.source,r=e.sourceLayer,o=this.sourceCaches[i];if(void 0!==o){var a=o.getSource().type;"geojson"===a&&r?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||r?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(r,e.id,n)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},n.prototype.removeFeatureState=function(e,n){this._checkLoaded();var i=e.source,r=this.sourceCaches[i];if(void 0!==r){var o=r.getSource().type,a="vector"===o?e.sourceLayer:void 0;"vector"!==o||a?n&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):r.removeFeatureState(a,e.id,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},n.prototype.getFeatureState=function(e){this._checkLoaded();var n=e.source,i=e.sourceLayer,r=this.sourceCaches[n];if(void 0!==r){if("vector"!==r.getSource().type||i)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),r.getFeatureState(i,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},n.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},n.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(function(t){return t.serialize()})),layers:this._serializeLayers(this._order)},(function(t){return void 0!==t}))},n.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},n.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,n=function(t){return"fill-extrusion"===e._layers[t].type},i={},r=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(n(a)){i[a]=o;for(var s=0,u=t;s<u.length;s+=1){var l=u[s][a];if(l)for(var c=0,h=l;c<h.length;c+=1)r.push(h[c])}}}r.sort((function(t,e){return e.intersectionZ-t.intersectionZ}));for(var d=[],p=this._order.length-1;p>=0;p--){var f=this._order[p];if(n(f))for(var g=r.length-1;g>=0;g--){var m=r[g].feature;if(i[m.layer.id]<p)break;d.push(m),r.pop()}else for(var y=0,_=t;y<_.length;y+=1){var v=_[y][f];if(v)for(var b=0,x=v;b<x.length;b+=1)d.push(x[b].feature)}}return d},n.prototype.queryRenderedFeatures=function(e,n,i){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);var r={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=n.layers;o<a.length;o+=1){var s=a[o],u=this._layers[s];if(!u)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];r[u.source]=!0}}var l=[];for(var c in this.sourceCaches)n.layers&&!r[c]||l.push(z(this.sourceCaches[c],this._layers,e,n,i));return this.placement&&l.push(function(t,e,n,i,r,o){for(var a={},s=r.queryRenderedSymbols(n),u=[],l=0,c=Object.keys(s).map(Number);l<c.length;l+=1)u.push(o[c[l]]);u.sort(N);for(var h=function(){var e=p[d],n=e.featureIndex.lookupSymbolFeatures(s[e.bucketInstanceId],e.bucketIndex,e.sourceLayerIndex,i.filter,i.layers,t);for(var r in n){var o=a[r]=a[r]||[],u=n[r];u.sort((function(t,n){var i=e.featureSortOrder;if(i){var r=i.indexOf(t.featureIndex);return i.indexOf(n.featureIndex)-r}return n.featureIndex-t.featureIndex}));for(var l=0,c=u;l<c.length;l+=1)o.push(c[l])}},d=0,p=u;d<p.length;d+=1)h();var f=function(n){a[n].forEach((function(i){var r=i.feature,o=e[t[n].source].getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=o}))};for(var g in a)f(g);return a}(this._layers,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(l)},n.prototype.querySourceFeatures=function(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);var i=this.sourceCaches[e];return i?function(t,e){for(var n=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),i=[],r={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;r[s]||(r[s]=!0,a.querySourceFeatures(i,e))}return i}(i,n):[]},n.prototype.addSourceType=function(t,e,i){return n.getSourceType(t)?i(new Error('A source type called "'+t+'" already exists.')):(n.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},i):i(null,null))},n.prototype.getLight=function(){return this.light.getLight()},n.prototype.setLight=function(e,n){void 0===n&&(n={}),this._checkLoaded();var i=this.light.getLight(),r=!1;for(var o in e)if(!t.deepEqual(e[o],i[o])){r=!0;break}if(r){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(a)}},n.prototype._validate=function(e,n,i,r,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&Fe(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:i,styleSpec:t.styleSpec},r)))},n.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var n in this.sourceCaches)this.sourceCaches[n].clearTiles(),this.sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},n.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},n.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},n.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},n.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},n.prototype._updatePlacement=function(e,n,i,r,o){void 0===o&&(o=!1);for(var a=!1,s=!1,u={},l=0,c=this._order;l<c.length;l+=1){var h=this._layers[c[l]];if("symbol"===h.type){if(!u[h.source]){var d=this.sourceCaches[h.source];u[h.source]=d.getRenderableIds(!0).map((function(t){return d.getTileByID(t)})).sort((function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)}))}var p=this.crossTileSymbolIndex.addLayer(h,u[h.source],e.center.lng);a=a||p}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===i)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new Se(e,this._order,o,n,i,r,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,u),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(var f=0,g=this._order;f<g.length;f+=1){var m=this._layers[g[f]];"symbol"===m.type&&this.placement.updateLayerOpacities(m,u[m.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},n.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},n.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();var i=this.sourceCaches[e.source];i&&i.setDependencies(e.tileID.key,e.type,e.icons)},n.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},n.prototype.getResource=function(e,n,i){return t.makeRequest(n,i)},n}(t.Evented);Be.getSourceType=function(t){return F[t]},Be.setSourceType=function(t,e){F[t]=e},Be.registerForPluginStateChange=t.registerForPluginStateChange;var Ve=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ue=fn("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),je=fn("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),qe=fn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Ge=fn("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),He=fn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ze=fn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),We=fn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ke=fn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Xe=fn("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),$e=fn("uniform highp vec4 u_color;void main() {gl_FragColor=u_color;}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ye=fn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Qe=fn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Je=fn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),tn=fn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),en=fn("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),nn=fn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),rn=fn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),on=fn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),an=fn("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),sn=fn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),un=fn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);}"),ln=fn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),cn=fn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),hn=fn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),dn=fn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),pn=fn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function fn(t,e){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i={};return{fragmentSource:t=t.replace(n,(function(t,e,n,r,o){return i[o]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+n+" "+r+" "+o+";\n#else\nuniform "+n+" "+r+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+n+" "+r+" "+o+" = u_"+o+";\n#endif\n"})),vertexSource:e=e.replace(n,(function(t,e,n,r,o){var a="float"===r?"vec2":"vec4",s=o.match(/color/)?"color":a;return i[o]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float u_"+o+"_t;\nattribute "+n+" "+a+" a_"+o+";\nvarying "+n+" "+r+" "+o+";\n#else\nuniform "+n+" "+r+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = a_"+o+";\n#else\n    "+n+" "+r+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+s+"(a_"+o+", u_"+o+"_t);\n#else\n    "+n+" "+r+" "+o+" = u_"+o+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float u_"+o+"_t;\nattribute "+n+" "+a+" a_"+o+";\n#else\nuniform "+n+" "+r+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+n+" "+r+" "+o+" = a_"+o+";\n#else\n    "+n+" "+r+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+n+" "+r+" "+o+" = unpack_mix_"+s+"(a_"+o+", u_"+o+"_t);\n#else\n    "+n+" "+r+" "+o+" = u_"+o+";\n#endif\n"}))}}var gn=Object.freeze({__proto__:null,prelude:Ue,background:je,backgroundPattern:qe,circle:Ge,clippingMask:He,heatmap:Ze,heatmapTexture:We,collisionBox:Ke,collisionCircle:Xe,debug:$e,fill:Ye,fillOutline:Qe,fillOutlinePattern:Je,fillPattern:tn,fillExtrusion:en,fillExtrusionPattern:nn,hillshadePrepare:rn,hillshade:on,line:an,lineGradient:sn,linePattern:un,lineSDF:ln,raster:cn,symbolIcon:hn,symbolSDF:dn,symbolTextAndIcon:pn}),mn=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};mn.prototype.bind=function(t,e,n,i,r,o,a,s){this.context=t;for(var u=this.boundPaintVertexBuffers.length!==i.length,l=0;!u&&l<i.length;l++)this.boundPaintVertexBuffers[l]!==i[l]&&(u=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===n&&!u&&this.boundIndexBuffer===r&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind()):this.freshBind(e,n,i,r,o,a,s)},mn.prototype.freshBind=function(t,e,n,i,r,o,a){var s,u=t.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=i,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=l.currentNumAttributes||0;for(var h=u;h<s;h++)c.disableVertexAttribArray(h)}e.enableAttributes(c,t);for(var d=0,p=n;d<p.length;d+=1)p[d].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,r);for(var f=0,g=n;f<g.length;f+=1){var m=g[f];m.bind(),m.setVertexAttribPointers(c,t,r)}o&&(o.bind(),o.setVertexAttribPointers(c,t,r)),i&&i.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,r)),l.currentNumAttributes=u},mn.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var yn=function(t,e,n,i,r){var o=t.gl;this.program=o.createProgram();var a=n?n.defines():[];r&&a.push("#define OVERDRAW_INSPECTOR;");var s=a.concat(Ue.fragmentSource,e.fragmentSource).join("\n"),u=a.concat(Ue.vertexSource,e.vertexSource).join("\n"),l=o.createShader(o.FRAGMENT_SHADER);if(o.isContextLost())this.failedToCreate=!0;else{o.shaderSource(l,s),o.compileShader(l),o.attachShader(this.program,l);var c=o.createShader(o.VERTEX_SHADER);if(o.isContextLost())this.failedToCreate=!0;else{o.shaderSource(c,u),o.compileShader(c),o.attachShader(this.program,c);for(var h=n?n.layoutAttributes:[],d=0;d<h.length;d++)o.bindAttribLocation(this.program,d,h[d].name);o.linkProgram(this.program),this.numAttributes=o.getProgramParameter(this.program,o.ACTIVE_ATTRIBUTES),this.attributes={};for(var p={},f=0;f<this.numAttributes;f++){var g=o.getActiveAttrib(this.program,f);g&&(this.attributes[g.name]=o.getAttribLocation(this.program,g.name))}for(var m=o.getProgramParameter(this.program,o.ACTIVE_UNIFORMS),y=0;y<m;y++){var _=o.getActiveUniform(this.program,y);_&&(p[_.name]=o.getUniformLocation(this.program,_.name))}this.fixedUniforms=i(t,p),this.binderUniforms=n?n.getUniforms(t,p):[]}}};function _n(e,n,i){var r=1/le(i,1,n.transform.tileZoom),o=Math.pow(2,i.tileID.overscaledZ),a=i.tileSize*Math.pow(2,n.transform.tileZoom)/o,s=a*(i.tileID.canonical.x+i.tileID.wrap*o),u=a*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[t.browser.devicePixelRatio,r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[s>>16,u>>16],u_pixel_coord_lower:[65535&s,65535&u]}}yn.prototype.draw=function(t,e,n,i,r,o,a,s,u,l,c,h,d,p,f,g){var m,y=t.gl;if(!this.failedToCreate){for(var _ in t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(i),t.setColorMode(r),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[_].set(a[_]);p&&p.setUniforms(t,this.binderUniforms,h,{zoom:d});for(var v=(m={},m[y.LINES]=2,m[y.TRIANGLES]=3,m[y.LINE_STRIP]=1,m)[e],b=0,x=c.get();b<x.length;b+=1){var w=x[b],C=w.vaos||(w.vaos={});(C[s]||(C[s]=new mn)).bind(t,this,u,p?p.getPaintVertexBuffers():[],l,w.vertexOffset,f,g),y.drawElements(e,w.primitiveLength*v,y.UNSIGNED_SHORT,w.primitiveOffset*v*2)}}};var vn=function(e,n,i,r){var o=n.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],u=t.create$1();"viewport"===o.properties.get("anchor")&&t.fromRotation(u,-n.transform.angle),t.transformMat3(s,s,u);var l=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[l.r,l.g,l.b],u_vertical_gradient:+i,u_opacity:r}},bn=function(e,n,i,r,o,a,s){return t.extend(vn(e,n,i,r),_n(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8})},xn=function(t){return{u_matrix:t}},wn=function(e,n,i,r){return t.extend(xn(e),_n(i,n,r))},Cn=function(t,e){return{u_matrix:t,u_world:e}},Pn=function(e,n,i,r,o){return t.extend(wn(e,n,i,r),{u_world:o})},Mn=function(e,n,i,r){var o,a,s=e.transform;if("map"===r.paint.get("circle-pitch-alignment")){var u=le(i,1,s.zoom);o=!0,a=[u,u]}else o=!1,a=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(n.posMatrix,i,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:a}},On=function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,n.u_overscale_factor)}},kn=function(t,e,n){var i=le(n,1,e.zoom),r=Math.pow(2,e.zoom-n.tileID.overscaledZ),o=n.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:i,u_extrude_scale:[e.pixelsToGLUnits[0]/(i*r),e.pixelsToGLUnits[1]/(i*r)],u_overscale_factor:o}},En=function(t,e){return{u_matrix:t,u_color:e}},Sn=function(t){return{u_matrix:t}},Tn=function(t,e,n,i){return{u_matrix:t,u_extrude_scale:le(e,1,n),u_intensity:i}};function An(e,n){var i=Math.pow(2,n.canonical.z),r=n.canonical.y;return[new t.MercatorCoordinate(0,r/i).toLngLat().lat,new t.MercatorCoordinate(0,(r+1)/i).toLngLat().lat]}var In=function(e,n,i){var r=e.transform;return{u_matrix:zn(e,n,i),u_ratio:1/le(n,1,r.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},Dn=function(e,n,i){return t.extend(In(e,n,i),{u_image:0})},Rn=function(e,n,i,r){var o=e.transform,a=Ln(n,o);return{u_matrix:zn(e,n,i),u_texsize:n.imageAtlasTexture.size,u_ratio:1/le(n,1,o.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[t.browser.devicePixelRatio,a,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Fn=function(e,n,i,r,o){var a=e.lineAtlas,s=Ln(n,e.transform),u="round"===i.layout.get("line-cap"),l=a.getDash(r.from,u),c=a.getDash(r.to,u),h=l.width*o.fromScale,d=c.width*o.toScale;return t.extend(In(e,n,i),{u_patternscale_a:[s/h,-l.height/2],u_patternscale_b:[s/d,-c.height/2],u_sdfgamma:a.width/(256*Math.min(h,d)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:l.y,u_tex_y_b:c.y,u_mix:o.t})};function Ln(t,e){return 1/le(t,1,e.tileZoom)}function zn(t,e,n){return t.translatePosMatrix(e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var Nn=function(t,e,n,i,r){return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:i.mix,u_opacity:i.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(a=r.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=r.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Bn(r.paint.get("raster-hue-rotate"))};var o,a};function Bn(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}var Vn=function(t,e,n,i,r,o,a,s,u,l){var c=r.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+i,u_texsize:l,u_texture:0}},Un=function(e,n,i,r,o,a,s,u,l,c,h){var d=o.transform;return t.extend(Vn(e,n,i,r,o,a,s,u,l,c),{u_gamma_scale:r?Math.cos(d._pitch)*d.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+h})},jn=function(e,n,i,r,o,a,s,u,l,c){return t.extend(Un(e,n,i,r,o,a,s,u,!0,l,!0),{u_texsize_icon:c,u_texture_icon:1})},qn=function(t,e,n){return{u_matrix:t,u_opacity:e,u_color:n}},Gn=function(e,n,i,r,o,a){return t.extend(function(t,e,n,i){var r=n.imageManager.getPattern(t.from.toString()),o=n.imageManager.getPattern(t.to.toString()),a=n.imageManager.getPixelSize(),s=a.width,u=a.height,l=Math.pow(2,i.tileID.overscaledZ),c=i.tileSize*Math.pow(2,n.transform.tileZoom)/l,h=c*(i.tileID.canonical.x+i.tileID.wrap*l),d=c*i.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,u],u_mix:e.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/le(i,1,n.transform.tileZoom),u_pixel_coord_upper:[h>>16,d>>16],u_pixel_coord_lower:[65535&h,65535&d]}}(r,a,i,o),{u_matrix:e,u_opacity:n})},Hn={fillExtrusion:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fillExtrusionPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fill:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},fillPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},fillOutline:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}},fillOutlinePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},circle:function(e,n){return{u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,n.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},collisionBox:On,collisionCircle:On,debug:function(e,n){return{u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},clippingMask:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmap:function(e,n){return{u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmapTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}},hillshade:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}},hillshadePrepare:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_maxzoom:new t.Uniform1f(e,n.u_maxzoom),u_unpack:new t.Uniform4f(e,n.u_unpack)}},line:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels)}},lineGradient:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image)}},linePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_image:new t.Uniform1i(e,n.u_image),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},lineSDF:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,n.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,n.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,n.u_sdfgamma),u_image:new t.Uniform1i(e,n.u_image),u_tex_y_a:new t.Uniform1f(e,n.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,n.u_tex_y_b),u_mix:new t.Uniform1f(e,n.u_mix)}},raster:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}},symbolIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1f(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}},symbolSDF:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1f(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1f(e,n.u_is_halo)}},symbolTextAndIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1f(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texsize_icon:new t.Uniform2f(e,n.u_texsize_icon),u_texture:new t.Uniform1i(e,n.u_texture),u_texture_icon:new t.Uniform1i(e,n.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1f(e,n.u_is_halo)}},background:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}},backgroundPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}}};function Zn(t,e,n,i,r,o,a,s){for(var u=t.context,l=u.gl,c=t.useProgram(r?"collisionCircle":"collisionBox"),h=0;h<i.length;h++){var d=i[h],p=e.getTile(d),f=p.getBucket(n);if(f){var g=r?s?f.textCollisionCircle:f.iconCollisionCircle:s?f.textCollisionBox:f.iconCollisionBox;if(g){var m=d.posMatrix;0===o[0]&&0===o[1]||(m=t.translatePosMatrix(d.posMatrix,p,o,a)),c.draw(u,r?l.TRIANGLES:l.LINES,Mt.disabled,Ot.disabled,t.colorModeForRenderPass(),Et.disabled,kn(m,t.transform,p),n.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,null,t.transform.zoom,null,null,g.collisionVertexBuffer)}}}}function Wn(t,e,n,i,r,o,a){Zn(t,e,n,i,!1,r,o,a),Zn(t,e,n,i,!0,r,o,a)}var Kn=t.identity(new Float32Array(16));function Xn(e,n,i,r,o,a){var s=t.getAnchorAlignment(e),u=-(s.horizontalAlign-.5)*n,l=-(s.verticalAlign-.5)*i,c=t.evaluateVariableOffset(e,r);return new t.Point((u/o+c[0])*a,(l/o+c[1])*a)}function $n(e,n,i,r,o,a,s,u,l,c,h){var d=e.text.placedSymbolArray,p=e.text.dynamicLayoutVertexArray,f=e.icon.dynamicLayoutVertexArray,g={};p.clear();for(var m=0;m<d.length;m++){var y=d.get(m),_=y.hidden||!y.crossTileID||e.allowVerticalPlacement&&!y.placedOrientation?null:r[y.crossTileID];if(_){var v=new t.Point(y.anchorX,y.anchorY),b=$t(v,i?u:s),x=.5+a.cameraToCenterDistance/b.signedDistanceFromCamera*.5,w=o.evaluateSizeForFeature(e.textSizeData,c,y)*x/t.ONE_EM;i&&(w*=e.tilePixelRatio/l);for(var C=Xn(_.anchor,_.width,_.height,_.textOffset,_.textBoxScale,w),P=i?$t(v.add(C),s).point:b.point.add(n?C.rotate(-a.angle):C),M=e.allowVerticalPlacement&&y.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,O=0;O<y.numGlyphs;O++)t.addDynamicAttributes(p,P,M);h&&y.associatedIconIndex>=0&&(g[y.associatedIconIndex]={shiftedAnchor:P,angle:M})}else oe(y.numGlyphs,p)}if(h){f.clear();for(var k=e.icon.placedSymbolArray,E=0;E<k.length;E++){var S=k.get(E);if(S.hidden)oe(S.numGlyphs,f);else{var T=g[E];if(T)for(var A=0;A<S.numGlyphs;A++)t.addDynamicAttributes(f,T.shiftedAnchor,T.angle);else oe(S.numGlyphs,f)}}e.icon.dynamicLayoutVertexBuffer.updateData(f)}e.text.dynamicLayoutVertexBuffer.updateData(p)}function Yn(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function Qn(e,n,i,r,o,a,s,u,l,c,h,d){for(var p,f,g=e.context,m=g.gl,y=e.transform,_="map"===u,v="map"===l,b=_&&"point"!==i.layout.get("symbol-placement"),x=_&&!v&&!b,w=void 0!==i.layout.get("symbol-sort-key").constantOr(1),C=e.depthModeForSublayer(0,Mt.ReadOnly),P=i.layout.get("text-variable-anchor"),M=[],O=0,k=r;O<k.length;O+=1){var E=k[O],S=n.getTile(E),T=S.getBucket(i);if(T){var A=o?T.text:T.icon;if(A&&A.segments.get().length){var I=A.programConfigurations.get(i.id),D=o||T.sdfIcons,R=o?T.textSizeData:T.iconSizeData,F=v||0!==y.pitch;p||(p=e.useProgram(Yn(D,o,T),I),f=t.evaluateSizeForZoom(R,y.zoom));var L=void 0,z=[0,0],N=void 0,B=void 0,V=null,U=void 0;if(o)N=S.glyphAtlasTexture,B=m.LINEAR,L=S.glyphAtlasTexture.size,T.iconsInText&&(z=S.imageAtlasTexture.size,V=S.imageAtlasTexture,U=F||e.options.rotating||e.options.zooming||"composite"===R.kind||"camera"===R.kind?m.LINEAR:m.NEAREST);else{var j=1!==i.layout.get("icon-size").constantOr(0)||T.iconsNeedLinear;N=S.imageAtlasTexture,B=D||e.options.rotating||e.options.zooming||j||F?m.LINEAR:m.NEAREST,L=S.imageAtlasTexture.size}var q=le(S,1,e.transform.zoom),G=Kt(E.posMatrix,v,_,e.transform,q),H=Xt(E.posMatrix,v,_,e.transform,q),Z=P&&T.hasTextData(),W="none"!==i.layout.get("icon-text-fit")&&Z&&T.hasIconData();b&&Qt(T,E.posMatrix,e,o,G,H,v,c);var K=e.translatePosMatrix(E.posMatrix,S,a,s),X=b||o&&P||W?Kn:G,$=e.translatePosMatrix(H,S,a,s,!0),Y=D&&0!==i.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),Q={program:p,buffers:A,uniformValues:D?T.iconsInText?jn(R.kind,f,x,v,e,K,X,$,L,z):Un(R.kind,f,x,v,e,K,X,$,o,L,!0):Vn(R.kind,f,x,v,e,K,X,$,o,L),atlasTexture:N,atlasTextureIcon:V,atlasInterpolation:B,atlasInterpolationIcon:U,isSDF:D,hasHalo:Y};if(w)for(var J=0,tt=A.segments.get();J<tt.length;J+=1){var et=tt[J];M.push({segments:new t.SegmentVector([et]),sortKey:et.sortKey,state:Q})}else M.push({segments:A.segments,sortKey:0,state:Q})}}}w&&M.sort((function(t,e){return t.sortKey-e.sortKey}));for(var nt=0,it=M;nt<it.length;nt+=1){var rt=it[nt],ot=rt.state;if(g.activeTexture.set(m.TEXTURE0),ot.atlasTexture.bind(ot.atlasInterpolation,m.CLAMP_TO_EDGE),ot.atlasTextureIcon&&(g.activeTexture.set(m.TEXTURE1),ot.atlasTextureIcon&&ot.atlasTextureIcon.bind(ot.atlasInterpolationIcon,m.CLAMP_TO_EDGE)),ot.isSDF){var at=ot.uniformValues;ot.hasHalo&&(at.u_is_halo=1,Jn(ot.buffers,rt.segments,i,e,ot.program,C,h,d,at)),at.u_is_halo=0}Jn(ot.buffers,rt.segments,i,e,ot.program,C,h,d,ot.uniformValues)}}function Jn(t,e,n,i,r,o,a,s,u){var l=i.context;r.draw(l,l.gl.TRIANGLES,o,a,s,Et.disabled,u,n.id,t.layoutVertexBuffer,t.indexBuffer,e,n.paint,i.transform.zoom,t.programConfigurations.get(n.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function ti(t,e,n,i,r,o,a){var s,u,l,c,h,d=t.context.gl,p=n.paint.get("fill-pattern"),f=p&&p.constantOr(1),g=n.getCrossfadeParameters();a?(u=f&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=d.LINES):(u=f?"fillPattern":"fill",s=d.TRIANGLES);for(var m=0,y=i;m<y.length;m+=1){var _=y[m],v=e.getTile(_);if(!f||v.patternsLoaded()){var b=v.getBucket(n);if(b){var x=b.programConfigurations.get(n.id),w=t.useProgram(u,x);f&&(t.context.activeTexture.set(d.TEXTURE0),v.imageAtlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE),x.updatePaintBuffers(g));var C=p.constantOr(null);if(C&&v.imageAtlas){var P=v.imageAtlas,M=P.patternPositions[C.to.toString()],O=P.patternPositions[C.from.toString()];M&&O&&x.setConstantPatternPositions(M,O)}var k=t.translatePosMatrix(_.posMatrix,v,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){c=b.indexBuffer2,h=b.segments2;var E=[d.drawingBufferWidth,d.drawingBufferHeight];l="fillOutlinePattern"===u&&f?Pn(k,t,g,v,E):Cn(k,E)}else c=b.indexBuffer,h=b.segments,l=f?wn(k,t,g,v):xn(k);w.draw(t.context,s,r,t.stencilModeForClipping(_),o,Et.disabled,l,n.id,b.layoutVertexBuffer,c,h,n.paint,t.transform.zoom,x)}}}}function ei(t,e,n,i,r,o,a){for(var s=t.context,u=s.gl,l=n.paint.get("fill-extrusion-pattern"),c=l.constantOr(1),h=n.getCrossfadeParameters(),d=n.paint.get("fill-extrusion-opacity"),p=0,f=i;p<f.length;p+=1){var g=f[p],m=e.getTile(g),y=m.getBucket(n);if(y){var _=y.programConfigurations.get(n.id),v=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",_);c&&(t.context.activeTexture.set(u.TEXTURE0),m.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),_.updatePaintBuffers(h));var b=l.constantOr(null);if(b&&m.imageAtlas){var x=m.imageAtlas,w=x.patternPositions[b.to.toString()],C=x.patternPositions[b.from.toString()];w&&C&&_.setConstantPatternPositions(w,C)}var P=t.translatePosMatrix(g.posMatrix,m,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),M=n.paint.get("fill-extrusion-vertical-gradient"),O=c?bn(P,t,M,d,g,h,m):vn(P,t,M,d);v.draw(s,s.gl.TRIANGLES,r,o,a,Et.backCCW,O,n.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,n.paint,t.transform.zoom,_)}}}function ni(t,e,n,i,r,o){var a=t.context,s=a.gl,u=e.fbo;if(u){var l=t.useProgram("hillshade");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,u.colorAttachment.get());var c=function(t,e,n){var i=n.paint.get("hillshade-shadow-color"),r=n.paint.get("hillshade-highlight-color"),o=n.paint.get("hillshade-accent-color"),a=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(a-=t.transform.angle);var s=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),s),u_image:0,u_latrange:An(0,e.tileID),u_light:[n.paint.get("hillshade-exaggeration"),a],u_shadow:i,u_highlight:r,u_accent:o}}(t,e,n);l.draw(a,s.TRIANGLES,i,r,o,Et.disabled,c,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function ii(e,n,i,r,o,a,s){var u=e.context,l=u.gl,c=n.dem;if(c&&c.data){var h=c.dim,d=c.stride,p=c.getPixels();if(u.activeTexture.set(l.TEXTURE1),u.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(d),n.demTexture){var f=n.demTexture;f.update(p,{premultiply:!1}),f.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else n.demTexture=new t.Texture(u,p,l.RGBA,{premultiply:!1}),n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);u.activeTexture.set(l.TEXTURE0);var g=n.fbo;if(!g){var m=new t.Texture(u,{width:h,height:h,data:null},l.RGBA);m.bind(l.LINEAR,l.CLAMP_TO_EDGE),(g=n.fbo=u.createFramebuffer(h,h)).colorAttachment.set(m.texture)}u.bindFramebuffer.set(g.framebuffer),u.viewport.set([0,0,h,h]),e.useProgram("hillshadePrepare").draw(u,l.TRIANGLES,o,a,s,Et.disabled,function(e,n,i){var r=n.stride,o=t.create();return t.ortho(o,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(o,o,[0,-t.EXTENT,0]),{u_matrix:o,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_maxzoom:i,u_unpack:n.getUnpackVector()}}(n.tileID,c,r),i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function ri(e,n,i,r,o){var a=r.paint.get("raster-fade-duration");if(a>0){var s=t.browser.now(),u=(s-e.timeAdded)/a,l=n?(s-n.timeAdded)/a:-1,c=i.getSource(),h=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),d=!n||Math.abs(n.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),p=d&&e.refreshedUponExpiration?1:t.clamp(d?u:1-l,0,1);return e.refreshedUponExpiration&&u>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}function oi(e,n,i){var r=e.context,o=r.gl,a=i.posMatrix,s=e.useProgram("debug"),u=Mt.disabled,l=Ot.disabled,c=e.colorModeForRenderPass(),h="$debug";s.draw(r,o.LINE_STRIP,u,l,c,Et.disabled,En(a,t.Color.red),h,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);var d=n.getTileByID(i.key).latestRawTileData,p=Math.floor((d&&d.byteLength||0)/1024),f=n.getTile(i).tileSize,g=512/Math.min(f,512),m=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(m+=" => "+i.overscaledZ);for(var y=function(t,e,n,i){i=i||1;var r,o,a,s,u,l,c,h,d=[];for(r=0,o=t.length;r<o;r++)if(u=ai[t[r]]){for(h=null,a=0,s=u[1].length;a<s;a+=2)-1===u[1][a]&&-1===u[1][a+1]?h=null:(l=e+u[1][a]*i,c=n-u[1][a+1]*i,h&&d.push(h.x,h.y,l,c),h={x:l,y:c});e+=u[0]*i}return d}(m+" "+p+"kb",50,200*g,5*g),_=new t.StructArrayLayout2i4,v=new t.StructArrayLayout2ui4,b=0;b<y.length;b+=2)_.emplaceBack(y[b],y[b+1]),v.emplaceBack(b,b+1);for(var x=r.createVertexBuffer(_,Ve.members),w=r.createIndexBuffer(v),C=t.SegmentVector.simpleSegment(0,0,_.length/2,_.length/2),P=t.EXTENT/(Math.pow(2,e.transform.zoom-i.overscaledZ)*f*g),M=[],O=-1;O<=1;O++)for(var k=-1;k<=1&&(0!==O||0!==k);k++)M.push([O,k]);for(var E=0;E<M.length;E++){var S=M[E];s.draw(r,o.LINES,u,l,c,Et.disabled,En(t.translate([],a,[P*S[0],P*S[1],0]),t.Color.white),h,x,w,C)}s.draw(r,o.LINES,u,l,c,Et.disabled,En(a,t.Color.black),h,x,w,C),x.destroy(),w.destroy(),C.destroy()}var ai={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},si={symbol:function(e,n,i,r,o){if("translucent"===e.renderPass){var a=Ot.disabled,s=e.colorModeForRenderPass();i.layout.get("text-variable-anchor")&&function(e,n,i,r,o,a,s){for(var u=n.transform,l="map"===o,c="map"===a,h=0,d=e;h<d.length;h+=1){var p=d[h],f=r.getTile(p),g=f.getBucket(i);if(g&&g.text&&g.text.segments.get().length){var m=t.evaluateSizeForZoom(g.textSizeData,u.zoom),y=le(f,1,n.transform.zoom),_=Kt(p.posMatrix,c,l,n.transform,y),v="none"!==i.layout.get("icon-text-fit")&&g.hasIconData();if(m){var b=Math.pow(2,u.zoom-f.tileID.overscaledZ);$n(g,l,c,s,t.symbolSize,u,_,p.posMatrix,b,m,v)}}}}(r,e,i,n,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),o),0!==i.paint.get("icon-opacity").constantOr(1)&&Qn(e,n,i,r,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),a,s),0!==i.paint.get("text-opacity").constantOr(1)&&Qn(e,n,i,r,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(Wn(e,n,i,r,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),!0),Wn(e,n,i,r,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),!1))}},circle:function(e,n,i,r){if("translucent"===e.renderPass){var o=i.paint.get("circle-opacity"),a=i.paint.get("circle-stroke-width"),s=i.paint.get("circle-stroke-opacity"),u=void 0!==i.layout.get("circle-sort-key").constantOr(1);if(0!==o.constantOr(1)||0!==a.constantOr(1)&&0!==s.constantOr(1)){for(var l=e.context,c=l.gl,h=e.depthModeForSublayer(0,Mt.ReadOnly),d=Ot.disabled,p=e.colorModeForRenderPass(),f=[],g=0;g<r.length;g++){var m=r[g],y=n.getTile(m),_=y.getBucket(i);if(_){var v=_.programConfigurations.get(i.id),b={programConfiguration:v,program:e.useProgram("circle",v),layoutVertexBuffer:_.layoutVertexBuffer,indexBuffer:_.indexBuffer,uniformValues:Mn(e,m,y,i)};if(u)for(var x=0,w=_.segments.get();x<w.length;x+=1){var C=w[x];f.push({segments:new t.SegmentVector([C]),sortKey:C.sortKey,state:b})}else f.push({segments:_.segments,sortKey:0,state:b})}}u&&f.sort((function(t,e){return t.sortKey-e.sortKey}));for(var P=0,M=f;P<M.length;P+=1){var O=M[P],k=O.state;k.program.draw(l,c.TRIANGLES,h,d,p,Et.disabled,k.uniformValues,i.id,k.layoutVertexBuffer,k.indexBuffer,O.segments,i.paint,e.transform.zoom,k.programConfiguration)}}}},heatmap:function(e,n,i,r){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl,s=e.depthModeForSublayer(0,Mt.ReadOnly),u=Ot.disabled,l=new kt([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){var i=t.gl;t.activeTexture.set(i.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var r=n.heatmapFbo;if(r)i.bindTexture(i.TEXTURE_2D,r.colorAttachment.get()),t.bindFramebuffer.set(r.framebuffer);else{var o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),r=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4),function t(e,n,i,r){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n.width/4,n.height/4,0,o.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),r.colorAttachment.set(i),e.extTextureHalfFloat&&o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,r.colorAttachment.setDirty(),t(e,n,i,r))}(t,e,o,r)}}(o,e,i),o.clear({color:t.Color.transparent});for(var c=0;c<r.length;c++){var h=r[c];if(!n.hasRenderableParent(h)){var d=n.getTile(h),p=d.getBucket(i);if(p){var f=p.programConfigurations.get(i.id);e.useProgram("heatmap",f).draw(o,a.TRIANGLES,s,u,l,Et.disabled,Tn(h.posMatrix,d,e.transform.zoom,i.paint.get("heatmap-intensity")),i.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,i.paint,e.transform.zoom,f)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var i=e.context,r=i.gl,o=n.heatmapFbo;if(o){i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,o.colorAttachment.get()),i.activeTexture.set(r.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.Texture(i,n.colorRamp,r.RGBA)),a.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(i,r.TRIANGLES,Mt.disabled,Ot.disabled,e.colorModeForRenderPass(),Et.disabled,function(e,n,i,r){var o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}}(e,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}}(e,i))},line:function(e,n,i,r){if("translucent"===e.renderPass){var o=i.paint.get("line-opacity"),a=i.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1)){var s=e.depthModeForSublayer(0,Mt.ReadOnly),u=e.colorModeForRenderPass(),l=i.paint.get("line-dasharray"),c=i.paint.get("line-pattern"),h=c.constantOr(1),d=i.paint.get("line-gradient"),p=i.getCrossfadeParameters(),f=h?"linePattern":l?"lineSDF":d?"lineGradient":"line",g=e.context,m=g.gl,y=!0;if(d){g.activeTexture.set(m.TEXTURE0);var _=i.gradientTexture;if(!i.gradient)return;_||(_=i.gradientTexture=new t.Texture(g,i.gradient,m.RGBA)),_.bind(m.LINEAR,m.CLAMP_TO_EDGE)}for(var v=0,b=r;v<b.length;v+=1){var x=b[v],w=n.getTile(x);if(!h||w.patternsLoaded()){var C=w.getBucket(i);if(C){var P=C.programConfigurations.get(i.id),M=e.context.program.get(),O=e.useProgram(f,P),k=y||O.program!==M,E=c.constantOr(null);if(E&&w.imageAtlas){var S=w.imageAtlas,T=S.patternPositions[E.to.toString()],A=S.patternPositions[E.from.toString()];T&&A&&P.setConstantPatternPositions(T,A)}var I=h?Rn(e,w,i,p):l?Fn(e,w,i,l,p):d?Dn(e,w,i):In(e,w,i);h?(g.activeTexture.set(m.TEXTURE0),w.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),P.updatePaintBuffers(p)):l&&(k||e.lineAtlas.dirty)&&(g.activeTexture.set(m.TEXTURE0),e.lineAtlas.bind(g)),O.draw(g,m.TRIANGLES,s,e.stencilModeForClipping(x),u,Et.disabled,I,i.id,C.layoutVertexBuffer,C.indexBuffer,C.segments,i.paint,e.transform.zoom,P),y=!1}}}}}},fill:function(e,n,i,r){var o=i.paint.get("fill-color"),a=i.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),u=i.paint.get("fill-pattern"),l=e.opaquePassEnabledForLayer()&&!u.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===l){var c=e.depthModeForSublayer(1,"opaque"===e.renderPass?Mt.ReadWrite:Mt.ReadOnly);ti(e,n,i,r,c,s,!1)}if("translucent"===e.renderPass&&i.paint.get("fill-antialias")){var h=e.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,Mt.ReadOnly);ti(e,n,i,r,h,s,!0)}}},"fill-extrusion":function(t,e,n,i){var r=n.paint.get("fill-extrusion-opacity");if(0!==r&&"translucent"===t.renderPass){var o=new Mt(t.context.gl.LEQUAL,Mt.ReadWrite,t.depthRangeFor3D);if(1!==r||n.paint.get("fill-extrusion-pattern").constantOr(1))ei(t,e,n,i,o,Ot.disabled,kt.disabled),ei(t,e,n,i,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var a=t.colorModeForRenderPass();ei(t,e,n,i,o,Ot.disabled,a)}}},hillshade:function(t,e,n,i){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var r=t.context,o=e.getSource().maxzoom,a=t.depthModeForSublayer(0,Mt.ReadOnly),s=t.colorModeForRenderPass(),u="translucent"===t.renderPass?t.stencilConfigForOverlap(i):[{},i],l=u[0],c=0,h=u[1];c<h.length;c+=1){var d=h[c],p=e.getTile(d);p.needsHillshadePrepare&&"offscreen"===t.renderPass?ii(t,p,n,o,a,Ot.disabled,s):"translucent"===t.renderPass&&ni(t,p,n,a,l[d.overscaledZ],s)}r.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,n,i){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity")&&i.length)for(var r=t.context,o=r.gl,a=e.getSource(),s=t.useProgram("raster"),u=t.colorModeForRenderPass(),l=a instanceof I?[{},i]:t.stencilConfigForOverlap(i),c=l[0],h=l[1],d=h[h.length-1].overscaledZ,p=!t.options.moving,f=0,g=h;f<g.length;f+=1){var m=g[f],y=t.depthModeForSublayer(m.overscaledZ-d,1===n.paint.get("raster-opacity")?Mt.ReadWrite:Mt.ReadOnly,o.LESS),_=e.getTile(m),v=t.transform.calculatePosMatrix(m.toUnwrapped(),p);_.registerFadeDuration(n.paint.get("raster-fade-duration"));var b=e.findLoadedParent(m,0),x=ri(_,b,e,n,t.transform),w=void 0,C=void 0,P="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;r.activeTexture.set(o.TEXTURE0),_.texture.bind(P,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),r.activeTexture.set(o.TEXTURE1),b?(b.texture.bind(P,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),w=Math.pow(2,b.tileID.overscaledZ-_.tileID.overscaledZ),C=[_.tileID.canonical.x*w%1,_.tileID.canonical.y*w%1]):_.texture.bind(P,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var M=Nn(v,C||[0,0],w||1,x,n);a instanceof I?s.draw(r,o.TRIANGLES,y,Ot.disabled,u,Et.disabled,M,n.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):s.draw(r,o.TRIANGLES,y,c[m.overscaledZ],u,Et.disabled,M,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,n){var i=n.paint.get("background-color"),r=n.paint.get("background-opacity");if(0!==r){var o=t.context,a=o.gl,s=t.transform,u=s.tileSize,l=n.paint.get("background-pattern");if(!t.isPatternMissing(l)){var c=!l&&1===i.a&&1===r&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===c){var h=Ot.disabled,d=t.depthModeForSublayer(0,"opaque"===c?Mt.ReadWrite:Mt.ReadOnly),p=t.colorModeForRenderPass(),f=t.useProgram(l?"backgroundPattern":"background"),g=s.coveringTiles({tileSize:u});l&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var m=n.getCrossfadeParameters(),y=0,_=g;y<_.length;y+=1){var v=_[y],b=t.transform.calculatePosMatrix(v.toUnwrapped()),x=l?Gn(b,r,t,l,{tileID:v,tileSize:u},m):qn(b,r,i);f.draw(o,a.TRIANGLES,d,h,p,Et.disabled,x,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,n){for(var i=0;i<n.length;i++)oi(t,e,n[i])},custom:function(t,e,n){var i=t.context,r=n.implementation;if("offscreen"===t.renderPass){var o=r.prerender;o&&(t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),o.call(r,i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),i.setStencilMode(Ot.disabled);var a="3d"===r.renderingMode?new Mt(t.context.gl.LEQUAL,Mt.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,Mt.ReadOnly);i.setDepthMode(a),r.render(i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState(),i.bindFramebuffer.set(null)}}},ui=function(t,e){this.context=new St(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=Tt.maxUnderzooming+Tt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.crossTileSymbolIndex=new Re,this.gpuTimers={}};ui.prototype.resize=function(e,n){var i=this.context.gl;if(this.width=e*t.browser.devicePixelRatio,this.height=n*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,o=this.style._order;r<o.length;r+=1)this.style._layers[o[r]].resize();this.depthRbo&&(i.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},ui.prototype.setup=function(){var e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,Ve.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(i,Ve.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var r=new t.StructArrayLayout4i8;r.emplaceBack(0,0,0,0),r.emplaceBack(t.EXTENT,0,t.EXTENT,0),r.emplaceBack(0,t.EXTENT,0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(r,A.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,Ve.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s);var u=this.context.gl;this.stencilClearMode=new Ot({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO)},ui.prototype.clearStencil=function(){var e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var i=t.create();t.ortho(i,0,this.width,this.height,0,0,1),t.scale(i,i,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,Mt.disabled,this.stencilClearMode,kt.disabled,Et.disabled,Sn(i),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ui.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var n=this.context,i=n.gl;this.nextStencilID+e.length>256&&this.clearStencil(),n.setColorMode(kt.disabled),n.setDepthMode(Mt.disabled);var r=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],u=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;r.draw(n,i.TRIANGLES,Mt.disabled,new Ot({func:i.ALWAYS,mask:0},u,255,i.KEEP,i.KEEP,i.REPLACE),kt.disabled,Et.disabled,Sn(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ui.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new Ot({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},ui.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new Ot({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},ui.prototype.stencilConfigForOverlap=function(t){var e,n=this.context.gl,i=t.sort((function(t,e){return e.overscaledZ-t.overscaledZ})),r=i[i.length-1].overscaledZ,o=i[0].overscaledZ-r+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var a={},s=0;s<o;s++)a[s+r]=new Ot({func:n.GEQUAL,mask:255},s+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[a,i]}return[(e={},e[r]=Ot.disabled,e),i]},ui.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new kt([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?kt.unblended:kt.alphaBlended},ui.prototype.depthModeForSublayer=function(t,e,n){if(!this.opaquePassEnabledForLayer())return Mt.disabled;var i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Mt(n||this.context.gl.LEQUAL,e,[i,i])},ui.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ui.prototype.render=function(e,n){var i=this;this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var r=this.style._order,o=this.style.sourceCaches;for(var a in o){var s=o[a];s.used&&s.prepare(this.context)}var u,l,c={},h={},d={};for(var p in o){var f=o[p];c[p]=f.getVisibleCoordinates(),h[p]=c[p].slice().reverse(),d[p]=f.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var g=0;g<r.length;g++)if(this.style._layers[r[g]].is3D()){this.opaquePassCutoff=g;break}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var m=0,y=r;m<y.length;m+=1){var _=this.style._layers[y[m]];if(_.hasOffscreenPass()&&!_.isHidden(this.transform.zoom)){var v=h[_.source];("custom"===_.type||v.length)&&this.renderLayer(this,o[_.source],_,v)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){var b=this.style._layers[r[this.currentLayer]],x=o[b.source],w=c[b.source];this._renderTileClippingMasks(b,w),this.renderLayer(this,x,b,w)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){var C=this.style._layers[r[this.currentLayer]],P=o[C.source],M=("symbol"===C.type?d:h)[C.source];this._renderTileClippingMasks(C,c[C.source]),this.renderLayer(this,P,C,M)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach((function(t){t.source&&!t.isHidden(i.transform.zoom)&&(t.source!==(l&&l.id)&&(l=i.style.sourceCaches[t.source]),(!u||u.getSource().maxzoom<l.getSource().maxzoom)&&(u=l))})),u&&si.debug(this,u,u.getVisibleCoordinates())),this.context.setDefault()},ui.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},ui.prototype.renderLayer=function(t,e,n,i){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||i.length)&&(this.id=n.id,this.gpuTimingStart(n),si[n.type](t,e,n,i,this.style.placement.variableOffsets),this.gpuTimingEnd())},ui.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}},ui.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},ui.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},ui.prototype.queryGpuTimers=function(t){var e={};for(var n in t){var i=t[n],r=this.context.extTimerQuery,o=r.getQueryObjectEXT(i.query,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(i.query),e[n]=o}return e},ui.prototype.translatePosMatrix=function(e,n,i,r,o){if(!i[0]&&!i[1])return e;var a=o?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(a){var s=Math.sin(a),u=Math.cos(a);i=[i[0]*u-i[1]*s,i[0]*s+i[1]*u]}var l=[o?i[0]:le(n,i[0],this.transform.zoom),o?i[1]:le(n,i[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,l),c},ui.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},ui.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},ui.prototype.isPatternMissing=function(t){if(!t)return!1;var e=this.imageManager.getPattern(t.from.toString()),n=this.imageManager.getPattern(t.to.toString());return!e||!n},ui.prototype.useProgram=function(t,e){this.cache=this.cache||{};var n=""+t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new yn(this.context,gn[t],e,Hn[t],this._showOverdrawInspector)),this.cache[n]},ui.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ui.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)};var li=function(t,e){this.points=t,this.planes=e};li.fromInvProjectionMatrix=function(e,n,i){var r=Math.pow(2,i),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(n){return t.transformMat4([],n,e)})).map((function(e){return t.scale$1([],e,1/e[3]/n*r)})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var n=t.sub([],o[e[0]],o[e[1]]),i=t.sub([],o[e[2]],o[e[1]]),r=t.normalize([],t.cross([],n,i)),a=-t.dot(r,o[e[1]]);return r.concat(a)}));return new li(o,a)};var ci=function(e,n){this.min=e,this.max=n,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};ci.prototype.quadrant=function(e){for(var n=[e%2==0,e<2],i=t.clone$2(this.min),r=t.clone$2(this.max),o=0;o<n.length;o++)i[o]=n[o]?this.min[o]:this.center[o],r[o]=n[o]?this.center[o]:this.max[o];return r[2]=this.max[2],new ci(i,r)},ci.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]},ci.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]},ci.prototype.intersects=function(e){for(var n=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],i=!0,r=0;r<e.planes.length;r++){for(var o=e.planes[r],a=0,s=0;s<n.length;s++)a+=t.dot$1(o,n[s])>=0;if(0===a)return 0;a!==n.length&&(i=!1)}if(i)return 2;for(var u=0;u<3;u++){for(var l=Number.MAX_VALUE,c=-Number.MAX_VALUE,h=0;h<e.points.length;h++){var d=e.points[h][u]-this.min[u];l=Math.min(l,d),c=Math.max(c,d)}if(c<0||l>this.max[u]-this.min[u])return 0}return 1};var hi=function(e,n,i,r,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==i?0:i,this._maxPitch=null==r?60:r,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},di={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};hi.prototype.clone=function(){var t=new hi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},di.minZoom.get=function(){return this._minZoom},di.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},di.maxZoom.get=function(){return this._maxZoom},di.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},di.minPitch.get=function(){return this._minPitch},di.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},di.maxPitch.get=function(){return this._maxPitch},di.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},di.renderWorldCopies.get=function(){return this._renderWorldCopies},di.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},di.worldSize.get=function(){return this.tileSize*this.scale},di.centerPoint.get=function(){return this.size._div(2)},di.size.get=function(){return new t.Point(this.width,this.height)},di.bearing.get=function(){return-this.angle/Math.PI*180},di.bearing.set=function(e){var n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},di.pitch.get=function(){return this._pitch/Math.PI*180},di.pitch.set=function(e){var n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},di.fov.get=function(){return this._fov/Math.PI*180},di.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},di.zoom.get=function(){return this._zoom},di.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},di.center.get=function(){return this._center},di.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},hi.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},hi.prototype.getVisibleUnwrappedCoordinates=function(e){var n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var i=this.pointCoordinate(new t.Point(0,0)),r=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(i.x,r.x,o.x,a.x)),u=Math.floor(Math.max(i.x,r.x,o.x,a.x)),l=s-1;l<=u+1;l++)0!==l&&n.push(new t.UnwrappedTileID(l,e));return n},hi.prototype.coveringTiles=function(e){var n=this.coveringZoomLevel(e),i=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var r=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,n),a=[o*r.x,o*r.y,0],s=li.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),u=e.minzoom||0;this.pitch<=60&&(u=n);var l=function(t){return{aabb:new ci([t*o,0,0],[(t+1)*o,o,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},c=[],h=[],d=n,p=e.reparseOverscaled?i:n;if(this._renderWorldCopies)for(var f=1;f<=3;f++)c.push(l(-f)),c.push(l(f));for(c.push(l(0));c.length>0;){var g=c.pop(),m=g.x,y=g.y,_=g.fullyVisible;if(!_){var v=g.aabb.intersects(s);if(0===v)continue;_=2===v}var b=g.aabb.distanceX(a),x=g.aabb.distanceY(a),w=Math.max(Math.abs(b),Math.abs(x));if(g.zoom===d||w>3+(1<<d-g.zoom)-2&&g.zoom>=u)h.push({tileID:new t.OverscaledTileID(g.zoom===d?p:g.zoom,g.wrap,g.zoom,m,y),distanceSq:t.sqrLen([a[0]-.5-m,a[1]-.5-y])});else for(var C=0;C<4;C++){var P=(m<<1)+C%2,M=(y<<1)+(C>>1);c.push({aabb:g.aabb.quadrant(C),zoom:g.zoom+1,x:P,y:M,wrap:g.wrap,fullyVisible:_})}}return h.sort((function(t,e){return t.distanceSq-e.distanceSq})).map((function(t){return t.tileID}))},hi.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},di.unmodified.get=function(){return this._unmodified},hi.prototype.zoomScale=function(t){return Math.pow(2,t)},hi.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},hi.prototype.project=function(e){var n=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(n)*this.worldSize)},hi.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},di.point.get=function(){return this.project(this.center)},hi.prototype.setLocationAtPoint=function(e,n){var i=this.pointCoordinate(n),r=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(i.x-r.x),o.y-(i.y-r.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},hi.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},hi.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},hi.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},hi.prototype.coordinateLocation=function(t){return t.toLngLat()},hi.prototype.pointCoordinate=function(e){var n=[e.x,e.y,0,1],i=[e.x,e.y,1,1];t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(i,i,this.pixelMatrixInverse);var r=n[3],o=i[3],a=n[1]/r,s=i[1]/o,u=n[2]/r,l=i[2]/o,c=u===l?0:(0-u)/(l-u);return new t.MercatorCoordinate(t.number(n[0]/r,i[0]/o,c)/this.worldSize,t.number(a,s,c)/this.worldSize)},hi.prototype.coordinatePoint=function(e){var n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix),new t.Point(n[0]/n[3],n[1]/n[3])},hi.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},hi.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},hi.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},hi.prototype.calculatePosMatrix=function(e,n){void 0===n&&(n=!1);var i=e.key,r=n?this._alignedPosMatrixCache:this._posMatrixCache;if(r[i])return r[i];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,u=t.identity(new Float64Array(16));return t.translate(u,u,[s*a,o.y*a,0]),t.scale(u,u,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(u,n?this.alignedProjMatrix:this.projMatrix,u),r[i]=new Float32Array(u),r[i]},hi.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},hi.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,i,r,o=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var h=this.latRange;o=t.mercatorYfromLat(h[1])*this.worldSize,e=(a=t.mercatorYfromLat(h[0])*this.worldSize)-o<l.y?l.y/(a-o):0}if(this.lngRange){var d=this.lngRange;s=t.mercatorXfromLng(d[0])*this.worldSize,n=(u=t.mercatorXfromLng(d[1])*this.worldSize)-s<l.x?l.x/(u-s):0}var p=this.point,f=Math.max(n||0,e||0);if(f)return this.center=this.unproject(new t.Point(n?(u+s)/2:p.x,e?(a+o)/2:p.y)),this.zoom+=this.scaleZoom(f),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var g=p.y,m=l.y/2;g-m<o&&(r=o+m),g+m>a&&(r=a-m)}if(this.lngRange){var y=p.x,_=l.x/2;y-_<s&&(i=s+_),y+_>u&&(i=u-_)}void 0===i&&void 0===r||(this.center=this.unproject(new t.Point(void 0!==i?i:p.x,void 0!==r?r:p.y))),this._unmodified=c,this._constraining=!1}},hi.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,n=Math.PI/2+this._pitch,i=Math.sin(e)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-n-e,.01,Math.PI-.01)),r=this.point,o=r.x,a=r.y,s=1.01*(Math.cos(Math.PI/2-this._pitch)*i+this.cameraToCenterDistance),u=this.height/50,l=new Float64Array(16);t.perspective(l,this._fov,this.width/this.height,u,s),t.scale(l,l,[1,-1,1]),t.translate(l,l,[0,0,-this.cameraToCenterDistance]),t.rotateX(l,l,this._pitch),t.rotateZ(l,l,this.angle),t.translate(l,l,[-o,-a,0]),this.mercatorMatrix=t.scale([],l,[this.worldSize,this.worldSize,this.worldSize]),t.scale(l,l,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=l,this.invProjMatrix=t.invert([],this.projMatrix);var c=this.width%2/2,h=this.height%2/2,d=Math.cos(this.angle),p=Math.sin(this.angle),f=o-Math.round(o)+d*c+p*h,g=a-Math.round(a)+d*h+p*c,m=new Float64Array(l);if(t.translate(m,m,[f>.5?f-1:f,g>.5?g-1:g,0]),this.alignedProjMatrix=m,l=t.create(),t.scale(l,l,[this.width/2,-this.height/2,1]),t.translate(l,l,[1,-1,0]),this.labelPlaneMatrix=l,l=t.create(),t.scale(l,l,[1,-1,1]),t.translate(l,l,[-1,-1,0]),t.scale(l,l,[2/this.width,2/this.height,1]),this.glCoordMatrix=l,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(l=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=l,this._posMatrixCache={},this._alignedPosMatrixCache={}}},hi.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},hi.prototype.getCameraPoint=function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))},hi.prototype.getCameraQueryGeometry=function(e){var n=this.getCameraPoint();if(1===e.length)return[e[0],n];for(var i=n.x,r=n.y,o=n.x,a=n.y,s=0,u=e;s<u.length;s+=1){var l=u[s];i=Math.min(i,l.x),r=Math.min(r,l.y),o=Math.max(o,l.x),a=Math.max(a,l.y)}return[new t.Point(i,r),new t.Point(o,r),new t.Point(o,a),new t.Point(i,a),new t.Point(i,r)]},Object.defineProperties(hi.prototype,di);var pi=function(e){var n,i,r,o;this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(n=this._updateHashUnthrottled.bind(this),i=!1,r=null,o=function(){r=null,i&&(n(),r=setTimeout(o,300),i=!1)},function(){return i=!0,r||o(),r})};pi.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},pi.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},pi.prototype.getHashString=function(e){var n=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,r=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,r),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,u=this._map.getBearing(),l=this._map.getPitch(),c="";if(c+=e?"/"+a+"/"+s+"/"+i:i+"/"+s+"/"+a,(u||l)&&(c+="/"+Math.round(10*u)/10),l&&(c+="/"+Math.round(l)),this._hashName){var h=this._hashName,d=!1,p=t.window.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===h?(d=!0,e+"="+c):t})).filter((function(t){return t}));return d||p.push(h+"="+c),"#"+p.join("&")}return"#"+c},pi.prototype._getCurrentHash=function(){var e,n=this,i=t.window.location.hash.replace("#","");return this._hashName?(i.split("&").map((function(t){return t.split("=")})).forEach((function(t){t[0]===n._hashName&&(e=t)})),(e&&e[1]||"").split("/")):i.split("/")},pi.prototype._onHashChange=function(){var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(t){return isNaN(t)}))){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},pi.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(t){}};var fi=function(e){function i(i,r,o,a){void 0===a&&(a={});var s=n.mousePos(r.getCanvasContainer(),o),u=r.unproject(s);e.call(this,i,t.extend({point:s,lngLat:u,originalEvent:o},a)),this._defaultPrevented=!1,this.target=r}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var r={defaultPrevented:{configurable:!0}};return i.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(i.prototype,r),i}(t.Event),gi=function(e){function i(i,r,o){var a=n.touchPos(r.getCanvasContainer(),o),s=a.map((function(t){return r.unproject(t)})),u=a.reduce((function(t,e,n,i){return t.add(e.div(i.length))}),new t.Point(0,0)),l=r.unproject(u);e.call(this,i,{points:a,point:u,lngLats:s,lngLat:l,originalEvent:o}),this._defaultPrevented=!1}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var r={defaultPrevented:{configurable:!0}};return i.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(i.prototype,r),i}(t.Event),mi=function(t){function e(e,n,i){t.call(this,e,{originalEvent:i}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,n),e}(t.Event),yi=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};yi.prototype.setZoomRate=function(t){this._defaultZoomRate=t},yi.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},yi.prototype.isEnabled=function(){return!!this._enabled},yi.prototype.isActive=function(){return!!this._active},yi.prototype.isZooming=function(){return!!this._zooming},yi.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},yi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},yi.prototype.onWheel=function(e){if(this.isEnabled()){var n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,i=t.browser.now(),r=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this.isActive()||this._start(e)),e.preventDefault()}},yi.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},yi.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e}))),this._finishTimeout&&clearTimeout(this._finishTimeout);var i=n.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(i)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},yi.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var n=this._map.transform;if(0!==this._delta){var i="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,r=2/(1+Math.exp(-Math.abs(this._delta*i)));this._delta<0&&0!==r&&(r=1/r);var o="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*r))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a="number"==typeof this._targetZoom?this._targetZoom:n.zoom,s=this._startZoom,u=this._easing,l=!1;if("wheel"===this._type&&s&&u){var c=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),h=u(c);n.zoom=t.number(s,a,h),c<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):l=!0}else n.zoom=a,l=!0;n.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),l&&(this._active=!1,this._finishTimeout=setTimeout((function(){e._zooming=!1,e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom}),200))}},yi.prototype._smoothOutEasing=function(e){var n=t.ease;if(this._prevEase){var i=this._prevEase,r=(t.browser.now()-i.start)/i.duration,o=i.easing(r+.01)-i.easing(r),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=t.bezier(a,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:n},n};var _i=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1,t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};_i.prototype.isEnabled=function(){return!!this._enabled},_i.prototype.isActive=function(){return!!this._active},_i.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},_i.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},_i.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.window.document.addEventListener("mousemove",this._onMouseMove,!1),t.window.document.addEventListener("keydown",this._onKeyDown,!1),t.window.document.addEventListener("mouseup",this._onMouseUp,!1),n.disableDrag(),this._startPos=this._lastPos=n.mousePos(this._el,e),this._active=!0)},_i.prototype._onMouseMove=function(t){var e=n.mousePos(this._el,t);if(!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var i=this._startPos;this._lastPos=e,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var r=Math.min(i.x,e.x),o=Math.max(i.x,e.x),a=Math.min(i.y,e.y),s=Math.max(i.y,e.y);n.setTransform(this._box,"translate("+r+"px,"+a+"px)"),this._box.style.width=o-r+"px",this._box.style.height=s-a+"px"}},_i.prototype._onMouseUp=function(e){if(0===e.button){var i=this._startPos,r=n.mousePos(this._el,e);this._finish(),n.suppressClick(),i.x===r.x&&i.y===r.y?this._fireEvent("boxzoomcancel",e):this._map.fitScreenCoordinates(i,r,this._map.getBearing(),{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e}))}},_i.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},_i.prototype._finish=function(){this._active=!1,t.window.document.removeEventListener("mousemove",this._onMouseMove,!1),t.window.document.removeEventListener("keydown",this._onKeyDown,!1),t.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},_i.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))};var vi=t.bezier(0,0,.25,1),bi=function(e,n){this._map=e,this._el=n.element||e.getCanvasContainer(),this._state="disabled",this._button=n.button||"right",this._bearingSnap=n.bearingSnap||0,this._pitchWithRotate=!1!==n.pitchWithRotate,this._clickTolerance=n.clickTolerance||1,t.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};bi.prototype.isEnabled=function(){return"disabled"!==this._state},bi.prototype.isActive=function(){return"active"===this._state},bi.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},bi.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},bi.prototype.onMouseDown=function(e){if("enabled"===this._state){var i="touchstart"===e.type;if(i)this._startTime=Date.now();else if("right"===this._button){if(this._eventButton=n.mouseButton(e),e.altKey||e.metaKey)return;if(this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==n.mouseButton(e))return;this._eventButton=0}n.disableDrag(),i?(t.window.document.addEventListener("touchmove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("touchend",this._onMouseUp)):(t.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("mouseup",this._onMouseUp)),t.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[t.browser.now(),this._map.getBearing()]],this._startPos=this._prevPos=this._lastPos=n.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},bi.prototype._onMouseMove=function(t){var e=n.mousePos(this._el,t);this._lastPos.equals(e)||"pending"===this._state&&e.dist(this._startPos)<this._clickTolerance||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},bi.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var n=this._map.transform,i=this._prevPos,r=this._lastPos,o=n.bearing-.8*(i.x-r.x),a=n.pitch- -.5*(i.y-r.y),s=this._inertia,u=s[s.length-1];this._drainInertiaBuffer(),s.push([t.browser.now(),this._map._normalizeBearing(o,u[1])]);var l=n.bearing;if(n.bearing=o,this._pitchWithRotate){var c=n.pitch;n.pitch=a,n.pitch!==c&&this._fireEvent("pitch",e)}n.bearing!==l&&this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._prevPos=this._lastPos}},bi.prototype._onMouseUp=function(t){var e="touchend"===t.type;if(e&&this._startPos===this._lastPos&&Date.now()-this._startTime<300&&this._el.click(),e||n.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",n.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind()}},bi.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},bi.prototype._unbind=function(){t.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("mouseup",this._onMouseUp),t.window.document.removeEventListener("touchmove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("touchend",this._onMouseUp),t.window.removeEventListener("blur",this._onBlur),n.enableDrag()},bi.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._lastPos},bi.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,i=n.getBearing(),r=this._inertia,o=function(){Math.abs(i)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(r.length<2)o();else{var a=r[0],s=r[r.length-1],u=n._normalizeBearing(i,r[r.length-2][1]),l=s[1]-a[1],c=l<0?-1:1,h=(s[0]-a[0])/1e3;if(0!==l&&0!==h){var d=Math.abs(l*(.25/h));d>180&&(d=180);var p=d/180;u+=c*d*(p/2),Math.abs(n._normalizeBearing(u,0))<this._bearingSnap&&(u=n._normalizeBearing(0,u)),n.rotateTo(u,{duration:1e3*p,easing:vi,noMoveStart:!0},{originalEvent:t})}else o()}},bi.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},bi.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>0&&n-e[0][0]>160;)e.shift()};var xi={linearity:.3,easing:t.bezier(0,0,.3,1),maxSpeed:1400,deceleration:2500},wi=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=n.clickTolerance||1,this._inertiaOptions=xi,t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};wi.prototype.isEnabled=function(){return"disabled"!==this._state},wi.prototype.isActive=function(){return"active"===this._state},wi.prototype.enable=function(e){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled",this._inertiaOptions=t.extend(xi,e))},wi.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},wi.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==n.mouseButton(e)||(n.addEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),n.addEventListener(t.window.document,"mouseup",this._onMouseUp),this._start(e)))},wi.prototype.onTouchStart=function(e){this.isEnabled()&&(e.touches&&e.touches.length>1&&("pending"===this._state||"active"===this._state)||(n.addEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),n.addEventListener(t.window.document,"touchend",this._onTouchEnd),this._start(e)))},wi.prototype._start=function(e){t.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._prevPos=this._lastPos=n.mousePos(this._el,e),this._startTouch=this._lastTouch=t.window.TouchEvent&&e instanceof t.window.TouchEvent?n.touchPos(this._el,e):null,this._inertia=[[t.browser.now(),this._startPos]]},wi.prototype._touchesMatch=function(t,e){return!(!t||!e||t.length!==e.length)&&t.every((function(t,n){return e[n]===t}))},wi.prototype._onMove=function(e){e.preventDefault();var i=t.window.TouchEvent&&e instanceof t.window.TouchEvent?n.touchPos(this._el,e):null,r=n.mousePos(this._el,e);(i?this._touchesMatch(this._lastTouch,i):this._lastPos.equals(r))||"pending"===this._state&&r.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=r,this._lastTouch=i,this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._shouldStart=!0),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},wi.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t)if(this._map.touchZoomRotate.isActive())this._abort(t);else if(this._shouldStart&&(this._fireEvent("dragstart",t),this._fireEvent("movestart",t),this._shouldStart=!1),this.isActive()){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._prevPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._prevPos=this._lastPos,delete this._lastMoveEvent}},wi.prototype._onMouseUp=function(t){if(0===n.mouseButton(t))switch(this._state){case"active":this._state="enabled",n.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},wi.prototype._onTouchEnd=function(t){if(t.touches&&0!==t.touches.length)switch(this._state){case"pending":case"active":break;case"enabled":this.onTouchStart(t)}else switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind()}},wi.prototype._abort=function(e){switch(this._state){case"active":this._state="enabled",this._shouldStart||(this._fireEvent("dragend",e),this._fireEvent("moveend",e)),this._unbind(),this._deactivate(),t.window.TouchEvent&&e instanceof t.window.TouchEvent&&e.touches.length>1&&n.addEventListener(t.window.document,"touchend",this._onTouchEnd);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind()}},wi.prototype._onBlur=function(t){this._abort(t)},wi.prototype._unbind=function(){n.removeEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),n.removeEventListener(t.window.document,"touchend",this._onTouchEnd),n.removeEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),n.removeEventListener(t.window.document,"mouseup",this._onMouseUp),n.removeEventListener(t.window,"blur",this._onBlur)},wi.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._mouseDownPos,delete this._lastPos,delete this._startTouch,delete this._lastTouch,delete this._shouldStart},wi.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var n=e[e.length-1],i=e[0],r=n[1].sub(i[1]),o=(n[0]-i[0])/1e3;if(0===o||n[1].equals(i[1]))this._fireEvent("moveend",t);else{var a=this._inertiaOptions,s=a.linearity,u=a.easing,l=a.maxSpeed,c=a.deceleration,h=r.mult(s/o),d=h.mag();d>l&&(d=l,h._unit()._mult(d));var p=d/(c*s),f=h.mult(-p/2);this._map.panBy(f,{duration:1e3*p,easing:u,noMoveStart:!0},{originalEvent:t})}}},wi.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},wi.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>0&&n-e[0][0]>160;)e.shift()};var Ci=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this)};function Pi(t){return t*(2-t)}Ci.prototype.isEnabled=function(){return!!this._enabled},Ci.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},Ci.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},Ci.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,n=0,i=0,r=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),r=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),r=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?i=-1:(o=1,t.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),u={duration:300,delayEndEvents:500,easing:Pi,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+15*n,pitch:a.getPitch()+10*i,offset:[100*-r,100*-o],center:a.getCenter()};a.easeTo(u,{originalEvent:t})}};var Mi=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this)};Mi.prototype.isEnabled=function(){return!!this._enabled},Mi.prototype.isActive=function(){return!!this._active},Mi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Mi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Mi.prototype.onTouchStart=function(t){var e=this;if(this.isEnabled()&&!(t.points.length>1))if(this._tapped){var n=this._tappedPoint;if(n&&n.dist(t.points[0])<=30){t.originalEvent.preventDefault();var i=function(){e._tapped&&e._zoom(t),e._map.off("touchcancel",r),e._resetTapped()},r=function(){e._map.off("touchend",i),e._resetTapped()};this._map.once("touchend",i),this._map.once("touchcancel",r)}else this._resetTapped()}else this._tappedPoint=t.points[0],this._tapped=setTimeout((function(){e._tapped=null,e._tappedPoint=null}),300)},Mi.prototype._resetTapped=function(){clearTimeout(this._tapped),this._tapped=null,this._tappedPoint=null},Mi.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},Mi.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},Mi.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var Oi=t.bezier(0,0,.15,1),ki=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};ki.prototype.isEnabled=function(){return!!this._enabled},ki.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},ki.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},ki.prototype.disableRotation=function(){this._rotationDisabled=!0},ki.prototype.enableRotation=function(){this._rotationDisabled=!1},ki.prototype.isActive=function(){return this.isEnabled()&&!!this._gestureIntent},ki.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var i=n.mousePos(this._el,e.touches[0]),r=n.mousePos(this._el,e.touches[1]),o=i.add(r).div(2);this._startVec=i.sub(r),this._startAround=this._map.transform.pointLocation(o),this._gestureIntent=void 0,this._inertia=[],n.addEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),n.addEventListener(t.window.document,"touchend",this._onEnd)}},ki.prototype._getTouchEventData=function(t){var e=n.mousePos(this._el,t.touches[0]),i=n.mousePos(this._el,t.touches[1]),r=e.sub(i);return{vec:r,center:e.add(i).div(2),scale:r.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*r.angleWith(this._startVec)/Math.PI}},ki.prototype._onMove=function(e){if(2===e.touches.length){var n=this._getTouchEventData(e),i=n.vec,r=n.scale,o=n.bearing;if(!this._gestureIntent){var a=this._rotationDisabled&&1!==r||Math.abs(1-r)>.15;Math.abs(o)>10?this._gestureIntent="rotate":a&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=i)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},ki.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var n=this._map.transform;this._startScale||(this._startScale=n.scale,this._startBearing=n.bearing);var i=this._getTouchEventData(this._lastTouchEvent),r=i.center,o=i.bearing,a=i.scale,s=n.pointLocation(r),u=n.locationPoint(s);"rotate"===e&&(n.bearing=this._startBearing+o),n.zoom=n.scaleZoom(this._startScale*a),n.setLocationAtPoint(this._startAround,u),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),a,r])}},ki.prototype._onEnd=function(e){n.removeEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),n.removeEventListener(t.window.document,"touchend",this._onEnd);var i=this._gestureIntent,r=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,i){this._map.fire(new t.Event(i+"end",{originalEvent:e})),this._drainInertiaBuffer();var o=this._inertia,a=this._map;if(o.length<2)a.snapToNorth({},{originalEvent:e});else{var s=o[o.length-1],u=o[0],l=a.transform.scaleZoom(r*s[1]),c=a.transform.scaleZoom(r*u[1]),h=(s[0]-u[0])/1e3,d=s[2];if(0!==h&&l!==c){var p=.15*(l-c)/h;Math.abs(p)>2.5&&(p=p>0?2.5:-2.5);var f=1e3*Math.abs(p/(12*.15));a.easeTo({zoom:l+p*f/2e3,duration:f,easing:Oi,around:this._aroundCenter?a.getCenter():a.unproject(d),noMoveStart:!0},{originalEvent:e})}else a.snapToNorth({},{originalEvent:e})}}},ki.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>2&&n-e[0][0]>160;)e.shift()};var Ei={scrollZoom:yi,boxZoom:_i,dragRotate:bi,dragPan:wi,keyboard:Ci,doubleClickZoom:Mi,touchZoomRotate:ki},Si=function(e){function n(n,i){e.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=i.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},n.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},n.prototype.panBy=function(e,n,i){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),i)},n.prototype.panTo=function(e,n,i){return this.easeTo(t.extend({center:e},n),i)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},n.prototype.zoomTo=function(e,n,i){return this.easeTo(t.extend({zoom:e},n),i)},n.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},n.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},n.prototype.rotateTo=function(e,n,i){return this.easeTo(t.extend({bearing:e},n),i)},n.prototype.resetNorth=function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this},n.prototype.resetNorthPitch=function(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this},n.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},n.prototype.cameraForBounds=function(e,n){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,n)},n.prototype._cameraForBoxAndBearing=function(e,n,i,r){if("number"==typeof(r=t.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding){var o=r.padding;r.padding={top:o,bottom:o,right:o,left:o}}if(t.deepEqual(Object.keys(r.padding).sort((function(t,e){return t<e?-1:t>e?1:0})),["bottom","left","right","top"])){var a=this.transform,s=a.project(t.LngLat.convert(e)),u=a.project(t.LngLat.convert(n)),l=s.rotate(-i*Math.PI/180),c=u.rotate(-i*Math.PI/180),h=new t.Point(Math.max(l.x,c.x),Math.max(l.y,c.y)),d=new t.Point(Math.min(l.x,c.x),Math.min(l.y,c.y)),p=h.sub(d),f=(a.width-r.padding.left-r.padding.right)/p.x,g=(a.height-r.padding.top-r.padding.bottom)/p.y;if(!(g<0||f<0)){var m=Math.min(a.scaleZoom(a.scale*Math.min(f,g)),r.maxZoom),y=t.Point.convert(r.offset),_=new t.Point(y.x+(r.padding.left-r.padding.right)/2,y.y+(r.padding.top-r.padding.bottom)/2).mult(a.scale/a.zoomScale(m));return{center:a.unproject(s.add(u).div(2).sub(_)),zoom:m,bearing:i}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},n.prototype.fitBounds=function(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)},n.prototype.fitScreenCoordinates=function(e,n,i,r,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(n)),i,r),r,o)},n.prototype._fitInternal=function(e,n,i){return e?(n=t.extend(e,n)).linear?this.easeTo(n,i):this.flyTo(n,i):this},n.prototype.jumpTo=function(e,n){this.stop();var i=this.transform,r=!1,o=!1,a=!1;return"zoom"in e&&i.zoom!==+e.zoom&&(r=!0,i.zoom=+e.zoom),void 0!==e.center&&(i.center=t.LngLat.convert(e.center)),"bearing"in e&&i.bearing!==+e.bearing&&(o=!0,i.bearing=+e.bearing),"pitch"in e&&i.pitch!==+e.pitch&&(a=!0,i.pitch=+e.pitch),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),r&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))},n.prototype.easeTo=function(e,n){var i=this;this.stop(),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.browser.prefersReducedMotion)&&(e.duration=0);var r=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u="zoom"in e?+e.zoom:o,l="bearing"in e?this._normalizeBearing(e.bearing,a):a,c="pitch"in e?+e.pitch:s,h=r.centerPoint.add(t.Point.convert(e.offset)),d=r.pointLocation(h),p=t.LngLat.convert(e.center||d);this._normalizeCenter(p);var f,g,m=r.project(d),y=r.project(p).sub(m),_=r.zoomScale(u-o);return e.around&&(f=t.LngLat.convert(e.around),g=r.locationPoint(f)),this._zooming=u!==o,this._rotating=a!==l,this._pitching=c!==s,this._prepareEase(n,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease((function(e){if(i._zooming&&(r.zoom=t.number(o,u,e)),i._rotating&&(r.bearing=t.number(a,l,e)),i._pitching&&(r.pitch=t.number(s,c,e)),f)r.setLocationAtPoint(f,g);else{var d=r.zoomScale(r.zoom-o),p=u>o?Math.min(2,_):Math.max(.5,_),v=Math.pow(p,1-e),b=r.unproject(m.add(y.mult(e*v)).mult(d));r.setLocationAtPoint(r.renderWorldCopies?b.wrap():b,h)}i._fireMoveEvents(n)}),(function(){e.delayEndEvents?i._easeEndTimeoutID=setTimeout((function(){return i._afterEase(n)}),e.delayEndEvents):i._afterEase(n)}),e),this},n.prototype._prepareEase=function(e,n){this._moving=!0,n||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e))},n.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},n.prototype._afterEase=function(e){var n=this._zooming,i=this._rotating,r=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,n&&this.fire(new t.Event("zoomend",e)),i&&this.fire(new t.Event("rotateend",e)),r&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))},n.prototype.flyTo=function(e,n){var i=this;if(!e.essential&&t.browser.prefersReducedMotion){var r=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var o=this.transform,a=this.getZoom(),s=this.getBearing(),u=this.getPitch(),l="zoom"in e?t.clamp(+e.zoom,o.minZoom,o.maxZoom):a,c="bearing"in e?this._normalizeBearing(e.bearing,s):s,h="pitch"in e?+e.pitch:u,d=o.zoomScale(l-a),p=o.centerPoint.add(t.Point.convert(e.offset)),f=o.pointLocation(p),g=t.LngLat.convert(e.center||f);this._normalizeCenter(g);var m=o.project(f),y=o.project(g).sub(m),_=e.curve,v=Math.max(o.width,o.height),b=v/d,x=y.mag();if("minZoom"in e){var w=t.clamp(Math.min(e.minZoom,a,l),o.minZoom,o.maxZoom),C=v/o.zoomScale(w-a);_=Math.sqrt(C/x*2)}var P=_*_;function M(t){var e=(b*b-v*v+(t?-1:1)*P*P*x*x)/(2*(t?b:v)*P*x);return Math.log(Math.sqrt(e*e+1)-e)}function O(t){return(Math.exp(t)-Math.exp(-t))/2}function k(t){return(Math.exp(t)+Math.exp(-t))/2}var E=M(0),S=function(t){return k(E)/k(E+_*t)},T=function(t){return v*((k(E)*(O(e=E+_*t)/k(e))-O(E))/P)/x;var e},A=(M(1)-E)/_;if(Math.abs(x)<1e-6||!isFinite(A)){if(Math.abs(v-b)<1e-6)return this.easeTo(e,n);var I=b<v?-1:1;A=Math.abs(Math.log(b/v))/_,T=function(){return 0},S=function(t){return Math.exp(I*_*t)}}return e.duration="duration"in e?+e.duration:1e3*A/("screenSpeed"in e?+e.screenSpeed/_:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==c,this._pitching=h!==u,this._prepareEase(n,!1),this._ease((function(e){var r=e*A,d=1/S(r);o.zoom=1===e?l:a+o.scaleZoom(d),i._rotating&&(o.bearing=t.number(s,c,e)),i._pitching&&(o.pitch=t.number(u,h,e));var f=1===e?g:o.unproject(m.add(y.mult(T(r))).mult(d));o.setLocationAtPoint(o.renderWorldCopies?f.wrap():f,p),i._fireMoveEvents(n)}),(function(){return i._afterEase(n)}),e),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},n.prototype._ease=function(e,n,i){!1===i.animate||0===i.duration?(e(1),n()):(this._easeStart=t.browser.now(),this._easeOptions=i,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(e,n){e=t.wrap(e,-180,180);var i=Math.abs(e-n);return Math.abs(e-360-n)<i&&(e-=360),Math.abs(e+360-n)<i&&(e+=360),e},n.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},n}(t.Evented),Ti=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Ti.prototype.getDefaultPosition=function(){return"bottom-right"},Ti.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ti.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ti.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){var i=n.reduce((function(t,e,i){return e.value&&(t+=e.key+"="+e.value+(i<n.length-1?"&":"")),t}),"?");e.href=t.config.FEEDBACK_URL+"/"+i+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow"}},Ti.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},Ti.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((function(t){return"string"!=typeof t?"":t}))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var i in n){var r=n[i];if(r.used){var o=r.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort((function(t,e){return t.length-e.length}));var a=(t=t.filter((function(e,n){for(var i=n+1;i<t.length;i++)if(t[i].indexOf(e)>=0)return!1;return!0}))).join(" | ");a!==this._attribHTML&&(this._attribHTML=a,t.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ti.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Ai=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Ai.prototype.onAdd=function(t){this._map=t,this._container=n.create("div","mapboxgl-ctrl");var e=n.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ai.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ai.prototype.getDefaultPosition=function(){return"bottom-left"},Ai.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Ai.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},Ai.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var Ii=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Ii.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},Ii.prototype.remove=function(t){for(var e=this._currentlyRunning,n=0,i=e?this._queue.concat(e):this._queue;n<i.length;n+=1){var r=i[n];if(r.id===t)return void(r.cancelled=!0)}},Ii.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,n=t;e<n.length;e+=1){var i=n[e];if(!i.cancelled&&(i.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Ii.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Di={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ri=t.window.HTMLImageElement,Fi=t.window.HTMLElement,Li=t.window.ImageBitmap,zi={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Ni=function(i){function r(e){var r=this;if(null!=(e=t.extend({},zi,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var o=new hi(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies);if(i.call(this,o,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new Ii,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},Di,e.locale),this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken),"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof Fi))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return r._update(!1)})),this.on("moveend",(function(){return r._update(!1)})),this.on("zoom",(function(){return r._update(!0)})),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),function(t,e){var i=t.getCanvasContainer(),r=null,o=!1,a=null;for(var s in Ei)t[s]=new Ei[s](t,e),e.interactive&&e[s]&&t[s].enable(e[s]);n.addEventListener(i,"mouseout",(function(e){t.fire(new fi("mouseout",t,e))})),n.addEventListener(i,"mousedown",(function(r){o=!0,a=n.mousePos(i,r);var s=new fi("mousedown",t,r);t.fire(s),s.defaultPrevented||(e.interactive&&!t.doubleClickZoom.isActive()&&t.stop(),t.boxZoom.onMouseDown(r),t.boxZoom.isActive()||t.dragPan.isActive()||t.dragRotate.onMouseDown(r),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onMouseDown(r))})),n.addEventListener(i,"mouseup",(function(e){var n=t.dragRotate.isActive();r&&!n&&t.fire(new fi("contextmenu",t,r)),r=null,o=!1,t.fire(new fi("mouseup",t,e))})),n.addEventListener(i,"mousemove",(function(e){if(!t.dragPan.isActive()&&!t.dragRotate.isActive()){for(var n=e.target;n&&n!==i;)n=n.parentNode;n===i&&t.fire(new fi("mousemove",t,e))}})),n.addEventListener(i,"mouseover",(function(e){for(var n=e.target;n&&n!==i;)n=n.parentNode;n===i&&t.fire(new fi("mouseover",t,e))})),n.addEventListener(i,"touchstart",(function(n){var i=new gi("touchstart",t,n);t.fire(i),i.defaultPrevented||(e.interactive&&t.stop(),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onTouchStart(n),t.touchZoomRotate.onStart(n),t.doubleClickZoom.onTouchStart(i))}),{passive:!1}),n.addEventListener(i,"touchmove",(function(e){t.fire(new gi("touchmove",t,e))}),{passive:!1}),n.addEventListener(i,"touchend",(function(e){t.fire(new gi("touchend",t,e))})),n.addEventListener(i,"touchcancel",(function(e){t.fire(new gi("touchcancel",t,e))})),n.addEventListener(i,"click",(function(r){var o=n.mousePos(i,r);(!a||o.equals(a)||o.dist(a)<e.clickTolerance)&&t.fire(new fi("click",t,r))})),n.addEventListener(i,"dblclick",(function(e){var n=new fi("dblclick",t,e);t.fire(n),n.defaultPrevented||t.doubleClickZoom.onDblClick(n)})),n.addEventListener(i,"contextmenu",(function(e){var n=t.dragRotate.isActive();o||n?o&&(r=e):t.fire(new fi("contextmenu",t,e)),(t.dragRotate.isEnabled()||t.listens("contextmenu"))&&e.preventDefault()})),n.addEventListener(i,"wheel",(function(n){e.interactive&&t.stop();var i=new mi("wheel",t,n);t.fire(i),i.defaultPrevented||t.scrollZoom.onWheel(n)}),{passive:!1})}(this,e),this._hash=e.hash&&new pi("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Ti({customAttribution:e.customAttribution})),this.addControl(new Ai,e.logoPosition),this.on("style.load",(function(){r.transform.unmodified&&r.jumpTo(r.style.stylesheet)})),this.on("data",(function(e){r._update("style"===e.dataType),r.fire(new t.Event(e.dataType+"data",e))})),this.on("dataloading",(function(e){r.fire(new t.Event(e.dataType+"dataloading",e))}))}i&&(r.__proto__=i),(r.prototype=Object.create(i&&i.prototype)).constructor=r;var o={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return r.prototype._getMapId=function(){return this._mapId},r.prototype.addControl=function(e,n){if(void 0===n&&e.getDefaultPosition&&(n=e.getDefaultPosition()),void 0===n&&(n="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var i=e.onAdd(this);this._controls.push(e);var r=this._controlPositions[n];return-1!==n.indexOf("bottom")?r.insertBefore(i,r.firstChild):r.appendChild(i),this},r.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this},r.prototype.resize=function(e){var n=this._containerDimensions(),i=n[0],r=n[1];return this._resizeCanvas(i,r),this.transform.resize(i,r),this.painter.resize(i,r),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e)),this},r.prototype.getBounds=function(){return this.transform.getBounds()},r.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},r.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},r.prototype.setMinZoom=function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},r.prototype.getMinZoom=function(){return this.transform.minZoom},r.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},r.prototype.getMaxZoom=function(){return this.transform.maxZoom},r.prototype.setMinPitch=function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},r.prototype.getMinPitch=function(){return this.transform.minPitch},r.prototype.setMaxPitch=function(t){if((t=null==t?60:t)>60)throw new Error("maxPitch must be less than or equal to 60");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},r.prototype.getMaxPitch=function(){return this.transform.maxPitch},r.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},r.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},r.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},r.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},r.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},r.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},r.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},r.prototype._createDelegatedListener=function(t,e,n){var i,r=this;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:e,listener:n,delegates:{mousemove:function(i){var a=r.getLayer(e)?r.queryRenderedFeatures(i.point,{layers:[e]}):[];a.length?o||(o=!0,n.call(r,new fi(t,r,i.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:n,delegates:{mousemove:function(i){(r.getLayer(e)?r.queryRenderedFeatures(i.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,n.call(r,new fi(t,r,i.originalEvent)))},mouseout:function(e){a&&(a=!1,n.call(r,new fi(t,r,e.originalEvent)))}}}}return{layer:e,listener:n,delegates:(i={},i[t]=function(t){var i=r.getLayer(e)?r.queryRenderedFeatures(t.point,{layers:[e]}):[];i.length&&(t.features=i,n.call(r,t),delete t.features)},i)}},r.prototype.on=function(t,e,n){if(void 0===n)return i.prototype.on.call(this,t,e);var r=this._createDelegatedListener(t,e,n);for(var o in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(r),r.delegates)this.on(o,r.delegates[o]);return this},r.prototype.once=function(t,e,n){if(void 0===n)return i.prototype.once.call(this,t,e);var r=this._createDelegatedListener(t,e,n);for(var o in r.delegates)this.once(o,r.delegates[o]);return this},r.prototype.off=function(t,e,n){var r=this;return void 0===n?i.prototype.off.call(this,t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&function(i){for(var o=i[t],a=0;a<o.length;a++){var s=o[a];if(s.layer===e&&s.listener===n){for(var u in s.delegates)r.off(u,s.delegates[u]);return o.splice(a,1),r}}}(this._delegatedListeners),this)},r.prototype.queryRenderedFeatures=function(e,n){if(!this.style)return[];var i;if(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),n=n||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])i=[t.Point.convert(e)];else{var r=t.Point.convert(e[0]),o=t.Point.convert(e[1]);i=[r,new t.Point(o.x,r.y),o,new t.Point(r.x,o.y),r]}return this.style.queryRenderedFeatures(i,n,this.transform)},r.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},r.prototype.setStyle=function(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(e,n))},r.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},r.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new Be(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},r.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Be(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},r.prototype._diffStyle=function(e,n){var i=this;if("string"==typeof e){var r=this._requestManager.normalizeStyleURL(e),o=this._requestManager.transformRequest(r,t.ResourceType.Style);t.getJSON(o,(function(e,r){e?i.fire(new t.ErrorEvent(e)):r&&i._updateDiff(r,n)}))}else"object"==typeof e&&this._updateDiff(e,n)},r.prototype._updateDiff=function(e,n){try{this.style.setState(e)&&this._update(!0)}catch(i){t.warnOnce("Unable to perform style diff: "+(i.message||i.error||i)+".  Rebuilding the style from scratch."),this._updateStyle(e,n)}},r.prototype.getStyle=function(){if(this.style)return this.style.serialize()},r.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},r.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},r.prototype.isSourceLoaded=function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},r.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var i in n){var r=n[i];if("loaded"!==r.state&&"errored"!==r.state)return!1}}return!0},r.prototype.addSourceType=function(t,e,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)},r.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},r.prototype.getSource=function(t){return this.style.getSource(t)},r.prototype.addImage=function(e,n,i){void 0===i&&(i={});var r=i.pixelRatio;void 0===r&&(r=1);var o=i.sdf;void 0===o&&(o=!1);var a=i.stretchX,s=i.stretchY,u=i.content;if(this._lazyInitEmptyStyle(),n instanceof Ri||Li&&n instanceof Li){var l=t.browser.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:l.width,height:l.height},l.data),pixelRatio:r,stretchX:a,stretchY:s,content:u,sdf:o,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=n;this.style.addImage(e,{data:new t.RGBAImage({width:n.width,height:n.height},new Uint8Array(n.data)),pixelRatio:r,stretchX:a,stretchY:s,content:u,sdf:o,version:0,userImage:c}),c.onAdd&&c.onAdd(this,e)}},r.prototype.updateImage=function(e,n){var i=this.style.getImage(e);if(!i)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var r=n instanceof Ri||Li&&n instanceof Li?t.browser.getImageData(n):n,o=r.width,a=r.height,s=r.data;return void 0===o||void 0===a?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):o!==i.data.width||a!==i.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(i.data.replace(s,!(n instanceof Ri||Li&&n instanceof Li)),void this.style.updateImage(e,i))},r.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},r.prototype.removeImage=function(t){this.style.removeImage(t)},r.prototype.loadImage=function(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),n)},r.prototype.listImages=function(){return this.style.listImages()},r.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},r.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},r.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},r.prototype.getLayer=function(t){return this.style.getLayer(t)},r.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)},r.prototype.setFilter=function(t,e,n){return void 0===n&&(n={}),this.style.setFilter(t,e,n),this._update(!0)},r.prototype.getFilter=function(t){return this.style.getFilter(t)},r.prototype.setPaintProperty=function(t,e,n,i){return void 0===i&&(i={}),this.style.setPaintProperty(t,e,n,i),this._update(!0)},r.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},r.prototype.setLayoutProperty=function(t,e,n,i){return void 0===i&&(i={}),this.style.setLayoutProperty(t,e,n,i),this._update(!0)},r.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},r.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},r.prototype.getLight=function(){return this.style.getLight()},r.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},r.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},r.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},r.prototype.getContainer=function(){return this._container},r.prototype.getCanvasContainer=function(){return this._canvasContainer},r.prototype.getCanvas=function(){return this._canvas},r.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},r.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},r.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=n.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var i=this._containerDimensions();this._resizeCanvas(i[0],i[1]);var r=this._controlContainer=n.create("div","mapboxgl-control-container",t),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(t){o[t]=n.create("div","mapboxgl-ctrl-"+t,r)}))},r.prototype._resizeCanvas=function(e,n){var i=t.browser.devicePixelRatio||1;this._canvas.width=i*e,this._canvas.height=i*n,this._canvas.style.width=e+"px",this._canvas.style.height=n+"px"},r.prototype._setupPainter=function(){var n=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);i?(this.painter=new ui(i,this.transform),t.webpSupported.testSupport(i)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},r.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},r.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},r.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},r.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},r.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},r.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},r.prototype._render=function(){var e,n=this,i=0,r=this.painter.context.extTimerQuery;this.listens("gpu-timing-frame")&&(e=r.createQueryEXT(),r.beginQueryEXT(r.TIME_ELAPSED_EXT,e),i=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var a=this.transform.zoom,s=t.browser.now();this.style.zoomHistory.update(a,s);var u=new t.EvaluationParameters(a,{now:s,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),l=u.crossFadingFactor();1===l&&l===this._crossFadingFactor||(o=!0,this._crossFadingFactor=l),this.style.update(u)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),gpuTiming:!!this.listens("gpu-timing-layer"),fadeDuration:this._fadeDuration}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var c=t.browser.now()-i;r.endQueryEXT(r.TIME_ELAPSED_EXT,e),setTimeout((function(){var i=r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(e),n.fire(new t.Event("gpu-timing-frame",{cpuTime:c,gpuTime:i}))}),50)}if(this.listens("gpu-timing-layer")){var h=this.painter.collectGpuTimers();setTimeout((function(){var e=n.painter.queryGpuTimers(h);n.fire(new t.Event("gpu-timing-layer",{layerTimes:e}))}),50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new t.Event("idle"))),this},r.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,n=this._controls;e<n.length;e+=1)n[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),Bi(this._canvasContainer),Bi(this._controlContainer),Bi(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"))},r.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame((function(t){e._frame=null,e._render()})))},r.prototype._onWindowOnline=function(){this._update()},r.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(t){this._vertices=t,this._update()},r.prototype._setCacheLimits=function(e,n){t.setCacheLimits(e,n)},o.version.get=function(){return t.version},Object.defineProperties(r.prototype,o),r}(Si);function Bi(t){t.parentNode&&t.parentNode.removeChild(t)}var Vi={showCompass:!0,showZoom:!0,visualizePitch:!1},Ui=function(e){var i=this;this.options=t.extend({},Vi,e),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(t){return i._map.zoomIn({},{originalEvent:t})})),n.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(t){return i._map.zoomOut({},{originalEvent:t})})),n.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(t){i.options.visualizePitch?i._map.resetNorthPitch({},{originalEvent:t}):i._map.resetNorth({},{originalEvent:t})})),this._compassIcon=n.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};function ji(e,n,i){if(e=new t.LngLat(e.lng,e.lat),n){var r=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=i.locationPoint(e).distSqr(n);i.locationPoint(r).distSqr(n)<a?e=r:i.locationPoint(o).distSqr(n)<a&&(e=o)}for(;Math.abs(e.lng-i.center.lng)>180;){var s=i.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=i.width&&s.y<=i.height)break;e.lng>i.center.lng?e.lng-=360:e.lng+=360}return e}Ui.prototype._updateZoomButtons=function(){var t=this._map.getZoom();this._zoomInButton.disabled=t===this._map.getMaxZoom(),this._zoomOutButton.disabled=t===this._map.getMinZoom()},Ui.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},Ui.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new bi(t,{button:"left",element:this._compass,clickTolerance:t.dragRotate._clickTolerance}),n.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),n.addEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.enable()),this._container},Ui.prototype.onRemove=function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),n.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),n.removeEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.disable(),delete this._handler),delete this._map},Ui.prototype._createButton=function(t,e){var i=n.create("button",t,this._container);return i.type="button",i.addEventListener("click",e),i},Ui.prototype._setButtonTitle=function(t,e){var n=this._map._getUIString("NavigationControl."+e);t.title=n,t.setAttribute("aria-label",n)};var qi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Gi(t,e,n){var i=t.classList;for(var r in qi)i.remove("mapboxgl-"+n+"-anchor-"+r);i.add("mapboxgl-"+n+"-anchor-"+e)}var Hi,Zi=function(e){function i(i,r){var o=this;if(e.call(this),(i instanceof t.window.HTMLElement||r)&&(i=t.extend({element:i},r)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._draggable=i&&i.draggable||!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&"auto"!==i.pitchAlignment?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=t.Point.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div"),this._element.setAttribute("aria-label","Map marker");var a=n.createNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height","41px"),a.setAttributeNS(null,"width","27px"),a.setAttributeNS(null,"viewBox","0 0 27 41");var s=n.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"stroke","none"),s.setAttributeNS(null,"stroke-width","1"),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"fill-rule","evenodd");var u=n.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill-rule","nonzero");var l=n.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");for(var c=0,h=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];c<h.length;c+=1){var d=h[c],p=n.createNS("http://www.w3.org/2000/svg","ellipse");p.setAttributeNS(null,"opacity","0.04"),p.setAttributeNS(null,"cx","10.5"),p.setAttributeNS(null,"cy","5.80029008"),p.setAttributeNS(null,"rx",d.rx),p.setAttributeNS(null,"ry",d.ry),l.appendChild(p)}var f=n.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"fill",this._color);var g=n.createNS("http://www.w3.org/2000/svg","path");g.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),f.appendChild(g);var m=n.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"fill","#000000");var y=n.createNS("http://www.w3.org/2000/svg","path");y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),m.appendChild(y);var _=n.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"transform","translate(6.0, 7.0)"),_.setAttributeNS(null,"fill","#FFFFFF");var v=n.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(8.0, 8.0)");var b=n.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#000000"),b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962");var x=n.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#FFFFFF"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962"),v.appendChild(b),v.appendChild(x),u.appendChild(l),u.appendChild(f),u.appendChild(m),u.appendChild(_),u.appendChild(v),a.appendChild(u),this._element.appendChild(a),this._offset=t.Point.convert(i&&i.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(t){t.preventDefault()})),this._element.addEventListener("mousedown",(function(t){t.preventDefault()})),this._element.addEventListener("focus",(function(){var t=o._map.getContainer();t.scrollTop=0,t.scrollLeft=0})),Gi(this._element,this._anchor,"marker"),this._popup=null}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},i.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},i.prototype.getLngLat=function(){return this._lngLat},i.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},i.prototype.getElement=function(){return this._element},i.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},i.prototype._onKeyPress=function(t){var e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()},i.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},i.prototype.getPopup=function(){return this._popup},i.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},i.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ji(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var i="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?i="rotateX(0deg)":"map"===this._pitchAlignment&&(i="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),n.setTransform(this._element,qi[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+i+" "+e)}},i.prototype.getOffset=function(){return this._offset},i.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},i.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},i.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},i.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},i.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},i.prototype.isDraggable=function(){return this._draggable},i.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},i.prototype.getRotation=function(){return this._rotation},i.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},i.prototype.getRotationAlignment=function(){return this._rotationAlignment},i.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},i.prototype.getPitchAlignment=function(){return this._pitchAlignment},i}(t.Evented),Wi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Ki=0,Xi=!1,$i=function(e){function i(n){e.call(this),this.options=t.extend({},Wi,n),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.onAdd=function(e){var i;return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,void 0!==Hi?i(Hi):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((function(t){i(Hi="denied"!==t.state)})):i(Hi=!!t.window.navigator.geolocation),this._container},i.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ki=0,Xi=!1},i.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),n=t.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())},i.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},i.prototype._onSuccess=function(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}},i.prototype._updateCamera=function(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude),i=e.coords.accuracy,r=this._map.getBearing(),o=t.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(i),o,{geolocateSource:!0})},i.prototype._updateMarker=function(e){if(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},i.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),n=this._map.unproject([1,t]),i=e.distanceTo(n),r=Math.ceil(2*this._accuracy/i);this._circleElement.style.width=r+"px",this._circleElement.style.height=r+"px"},i.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},i.prototype._onError=function(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Xi)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}},i.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},i.prototype._setupUI=function(e){var i=this;if(this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._geolocateButton=n.create("button","mapboxgl-ctrl-geolocate",this._container),n.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{var o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Zi(this._dotElement),this._circleElement=n.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Zi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(e){e.geolocateSource||"ACTIVE_LOCK"!==i._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(i._watchState="BACKGROUND",i._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),i._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),i.fire(new t.Event("trackuserlocationend")))}))},i.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ki--,Xi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Ki>1?(e={maximumAge:6e5,timeout:0},Xi=!0):(e=this.options.positionOptions,Xi=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},i.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},i}(t.Evented),Yi={maxWidth:100,unit:"metric"},Qi=function(e){this.options=t.extend({},Yi,e),t.bindAll(["_onMove","setUnit"],this)};function Ji(t,e,n){var i=n&&n.maxWidth||100,r=t._container.clientHeight/2,o=t.unproject([0,r]),a=t.unproject([i,r]),s=o.distanceTo(a);if(n&&"imperial"===n.unit){var u=3.2808*s;u>5280?tr(e,i,u/5280,t._getUIString("ScaleControl.Miles")):tr(e,i,u,t._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?tr(e,i,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?tr(e,i,s/1e3,t._getUIString("ScaleControl.Kilometers")):tr(e,i,s,t._getUIString("ScaleControl.Meters"))}function tr(t,e,n,i){var r,o,a,s=(r=n,(o=Math.pow(10,(""+Math.floor(r)).length-1))*(a=(a=r/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(a)));t.style.width=e*(s/n)+"px",t.innerHTML=s+"&nbsp;"+i}Qi.prototype.getDefaultPosition=function(){return"bottom-left"},Qi.prototype._onMove=function(){Ji(this._map,this._container,this.options)},Qi.prototype.onAdd=function(t){return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Qi.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Qi.prototype.setUnit=function(t){this.options.unit=t,Ji(this._map,this._container,this.options)};var er=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};er.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},er.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},er.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},er.prototype._setupUI=function(){var e=this._fullscreenButton=n.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},er.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},er.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},er.prototype._isFullscreen=function(){return this._fullscreen},er.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},er.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var nr={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},ir=function(e){function i(n){e.call(this),this.options=t.extend(Object.create(nr),n),t.bindAll(["_update","_onClose","remove"],this)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.addTo=function(e){var n=this;return this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",(function(t){n._update(t.point)})),this._map.on("mouseup",(function(t){n._update(t.point)})),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},i.prototype.isOpen=function(){return!!this._map},i.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove"),delete this._map),this.fire(new t.Event("close")),this},i.prototype.getLngLat=function(){return this._lngLat},i.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove"),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},i.prototype.trackPointer=function(){var t=this;return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",(function(e){t._update(e.point)})),this._map.on("drag",(function(e){t._update(e.point)})),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},i.prototype.getElement=function(){return this._container},i.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},i.prototype.setHTML=function(e){var n,i=t.window.document.createDocumentFragment(),r=t.window.document.createElement("body");for(r.innerHTML=e;n=r.firstChild;)i.appendChild(n);return this.setDOMContent(i)},i.prototype.getMaxWidth=function(){return this._container.style.maxWidth},i.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},i.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},i.prototype.addClassName=function(t){this._container.classList.add(t)},i.prototype.removeClassName=function(t){this._container.classList.remove(t)},i.prototype.toggleClassName=function(t){return this._container.classList.toggle(t)},i.prototype._createContent=function(){this._content&&n.remove(this._content),this._content=n.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},i.prototype._update=function(e){var i=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(t){return i._container.classList.add(t)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ji(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var r=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),o=this.options.anchor,a=function e(n){if(n){if("number"==typeof n){var i=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new t.Point(0,0),top:new t.Point(0,n),"top-left":new t.Point(i,i),"top-right":new t.Point(-i,i),bottom:new t.Point(0,-n),"bottom-left":new t.Point(i,-i),"bottom-right":new t.Point(-i,-i),left:new t.Point(n,0),right:new t.Point(-n,0)}}if(n instanceof t.Point||Array.isArray(n)){var r=t.Point.convert(n);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:t.Point.convert(n.center||[0,0]),top:t.Point.convert(n.top||[0,0]),"top-left":t.Point.convert(n["top-left"]||[0,0]),"top-right":t.Point.convert(n["top-right"]||[0,0]),bottom:t.Point.convert(n.bottom||[0,0]),"bottom-left":t.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(n["bottom-right"]||[0,0]),left:t.Point.convert(n.left||[0,0]),right:t.Point.convert(n.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!o){var s,u=this._container.offsetWidth,l=this._container.offsetHeight;s=r.y+a.bottom.y<l?["top"]:r.y>this._map.transform.height-l?["bottom"]:[],r.x<u/2?s.push("left"):r.x>this._map.transform.width-u/2&&s.push("right"),o=0===s.length?"bottom":s.join("-")}var c=r.add(a[o]).round();n.setTransform(this._container,qi[o]+" translate("+c.x+"px,"+c.y+"px)"),Gi(this._container,o,"popup")}},i.prototype._onClose=function(){this.remove()},i}(t.Evented),rr={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:Ni,NavigationControl:Ui,GeolocateControl:$i,AttributionControl:Ti,ScaleControl:Qi,FullscreenControl:er,Popup:ir,Marker:Zi,Style:Be,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Rt.workerCount},set workerCount(t){Rt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:""};return rr})),n}()},ED5Z:function(t,e,n){window,t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,(function(e){return t[e]}).bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=71)}([function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){var i=n(13),r=n(12);t.exports=function(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?r(t):e}},function(t,e,n){var i=n(21);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}},function(t,e,n){n(0);var i=n(26);function r(e,n,o){return t.exports=r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}},r(e,n,o||e)}t.exports=r},function(t,e,n){var i=n(21);function r(e,n,o){return t.exports=r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&i(o,n.prototype),o},r.apply(null,arguments)}t.exports=r},function(t,e,n){var i=n(53),r=n(23),o=n(54);t.exports=function(t){return i(t)||r(t)||o()}},function(t,e,n){t.exports=n(58)},function(t,e,n){var i=n(24),r=n(56),o=n(25);t.exports=function(t,e){return i(t)||r(t,e)||o()}},function(t,e,n){!function(n){"use strict";var i=function(t,e){var n=new Error(t+" at character "+e);throw n.index=e,n.description=t,n},r=!0,o={"-":r,"!":r,"~":r,"+":r},a={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},s={$:r,_:r},u=function(t){var e,n=0;for(var i in t)(e=i.length)>n&&t.hasOwnProperty(i)&&(n=e);return n},l=u(o),c=u(a),h={true:!0,false:!1,null:null},d=function(t){return a[t]||0},p=function(t,e,n){return{type:"||"===t||"&&"===t?"LogicalExpression":"BinaryExpression",operator:t,left:e,right:n}},f=function(t){return t>=48&&t<=57},g=function(t){return t>=65&&t<=90||t>=97&&t<=122||t>=128&&!a[String.fromCharCode(t)]||s.hasOwnProperty(String.fromCharCode(t))},m=function(t){return t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t>=128&&!a[String.fromCharCode(t)]||s.hasOwnProperty(String.fromCharCode(t))},y=function(t){for(var e,n,r=0,s=t.charAt,u=t.charCodeAt,y=function(e){return s.call(t,e)},_=function(e){return u.call(t,e)},v=t.length,b=function(){for(var t=_(r);32===t||9===t||10===t||13===t;)t=_(++r)},x=function(){var t,e,n=C();return b(),63!==_(r)?n:(r++,(t=x())||i("Expected expression",r),b(),58===_(r)?(r++,(e=x())||i("Expected expression",r),{type:"ConditionalExpression",test:n,consequent:t,alternate:e}):void i("Expected :",r))},w=function(){b();for(var e=t.substr(r,c),n=e.length;n>0;){if(a.hasOwnProperty(e)&&(!g(_(r))||r+e.length<t.length&&!m(_(r+e.length))))return r+=n,e;e=e.substr(0,--n)}return!1},C=function(){var t,e,n,o,a,s,u,l,c;if(s=P(),!(e=w()))return s;for(a={value:e,prec:d(e)},(u=P())||i("Expected expression after "+e,r),o=[s,a,u];(e=w())&&0!==(n=d(e));){for(a={value:e,prec:n},c=e;o.length>2&&n<=o[o.length-2].prec;)u=o.pop(),e=o.pop().value,s=o.pop(),t=p(e,s,u),o.push(t);(t=P())||i("Expected expression after "+c,r),o.push(a,t)}for(t=o[l=o.length-1];l>1;)t=p(o[l-1].value,o[l-2],t),l-=2;return t},P=function(){var e,n,i;if(b(),e=_(r),f(e)||46===e)return M();if(39===e||34===e)return O();if(91===e)return A();for(i=(n=t.substr(r,l)).length;i>0;){if(o.hasOwnProperty(n)&&(!g(_(r))||r+n.length<t.length&&!m(_(r+n.length))))return r+=i,{type:"UnaryExpression",operator:n,argument:P(),prefix:!0};n=n.substr(0,--i)}return!(!g(e)&&40!==e)&&S()},M=function(){for(var t,e,n="";f(_(r));)n+=y(r++);if(46===_(r))for(n+=y(r++);f(_(r));)n+=y(r++);if("e"===(t=y(r))||"E"===t){for(n+=y(r++),"+"!==(t=y(r))&&"-"!==t||(n+=y(r++));f(_(r));)n+=y(r++);f(_(r-1))||i("Expected exponent ("+n+y(r)+")",r)}return e=_(r),g(e)?i("Variable names cannot start with a number ("+n+y(r)+")",r):46===e&&i("Unexpected period",r),{type:"Literal",value:parseFloat(n),raw:n}},O=function(){for(var t,e="",n=y(r++),o=!1;r<v;){if((t=y(r++))===n){o=!0;break}if("\\"===t)switch(t=y(r++)){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=t}else e+=t}return o||i('Unclosed quote after "'+e+'"',r),{type:"Literal",value:e,raw:n+e+n}},k=function(){var e,n=_(r),o=r;for(g(n)?r++:i("Unexpected "+y(r),r);r<v&&(n=_(r),m(n));)r++;return e=t.slice(o,r),h.hasOwnProperty(e)?{type:"Literal",value:h[e],raw:e}:"this"===e?{type:"ThisExpression"}:{type:"Identifier",name:e}},E=function(t){for(var e,n,o=[],a=!1,s=0;r<v;){if(b(),(e=_(r))===t){a=!0,r++,41===t&&s&&s>=o.length&&i("Unexpected token "+String.fromCharCode(t),r);break}if(44===e){if(r++,++s!==o.length)if(41===t)i("Unexpected token ,",r);else if(93===t)for(var u=o.length;u<s;u++)o.push(null)}else(n=x())&&"Compound"!==n.type||i("Expected comma",r),o.push(n)}return a||i("Expected "+String.fromCharCode(t),r),o},S=function(){var t,e;for(e=40===(t=_(r))?T():k(),b(),t=_(r);46===t||91===t||40===t;)r++,46===t?(b(),e={type:"MemberExpression",computed:!1,object:e,property:k()}):91===t?(e={type:"MemberExpression",computed:!0,object:e,property:x()},b(),93!==(t=_(r))&&i("Unclosed [",r),r++):40===t&&(e={type:"CallExpression",arguments:E(41),callee:e}),b(),t=_(r);return e},T=function(){r++;var t=x();if(b(),41===_(r))return r++,t;i("Unclosed (",r)},A=function(){return r++,{type:"ArrayExpression",elements:E(93)}},I=[];r<v;)59===(e=_(r))||44===e?r++:(n=x())?I.push(n):r<v&&i('Unexpected "'+y(r)+'"',r);return 1===I.length?I[0]:{type:"Compound",body:I}};y.version="0.3.4",y.toString=function(){return"JavaScript Expression Parser (JSEP) v"+y.version},y.addUnaryOp=function(t){return l=Math.max(t.length,l),o[t]=r,this},y.addBinaryOp=function(t,e){return c=Math.max(t.length,c),a[t]=e,this},y.addIdentifierChar=function(t){return s[t]=r,this},y.addLiteral=function(t,e){return h[t]=e,this},y.removeUnaryOp=function(t){return delete o[t],t.length===l&&(l=u(o)),this},y.removeAllUnaryOps=function(){return o={},l=0,this},y.removeIdentifierChar=function(t){return delete s[t],this},y.removeBinaryOp=function(t){return delete a[t],t.length===c&&(c=u(a)),this},y.removeAllBinaryOps=function(){return a={},c=0,this},y.removeLiteral=function(t){return delete h[t],this},y.removeAllLiterals=function(){return h={},this},void 0!==t&&t.exports?e=t.exports=y:e.parse=y}()},function(t,e){function n(t,e,n,i,r,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(i,r)}t.exports=function(t){return function(){var e=this,i=arguments;return new Promise((function(r,o){var a=t.apply(e,i);function s(t){n(a,r,o,s,u,"next",t)}function u(t){n(a,r,o,s,u,"throw",t)}s(void 0)}))}}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(e){return t.exports=i="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},i(e)}t.exports=i},function(t,e,n){var i=n(15);t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){i(t,e,n[e])}))}return t}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){n(0);var i=n(26),r=n(15);function o(t,e,n,a){return(o="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,o){var a,s=i(t,e);if(s){if((a=Object.getOwnPropertyDescriptor(s,e)).set)return a.set.call(o,n),!0;if(!a.writable)return!1}if(a=Object.getOwnPropertyDescriptor(o,e)){if(!a.writable)return!1;a.value=n,Object.defineProperty(o,e,a)}else r(o,e,n);return!0})(t,e,n,a)}t.exports=function(t,e,n,i,r){if(!o(t,e,n,i||t)&&r)throw new Error("failed to set property");return n}},function(t){t.exports={a:"1.4.5"}},function(t,e){t.exports='#ifndef CIELAB_TO_SRGBA\n#define CIELAB_TO_SRGBA\n\nconst mat3 XYZ_2_RGB = (mat3(\n    3.2404542,-1.5371385,-0.4985314,\n    -0.9692660, 1.8760108, 0.0415560,\n    0.0556434,-0.2040259, 1.0572252\n));\nconst float SRGB_GAMMA = 1.0 / 2.2;\n\nvec3 rgb_to_srgb_approx(vec3 rgb) {\n    return pow(rgb, vec3(SRGB_GAMMA));\n}\n\nfloat f1(float t){\n    const float sigma = 6./29.;\n    if (t>sigma){\n        return t*t*t;\n    }else{\n        return 3.*sigma*sigma*(t-4./29.);\n    }\n}\n\nvec3 cielabtoxyz(vec3 c) {\n    const float xn = 95.047/100.;\n    const float yn = 100./100.;\n    const float zn = 108.883/100.;\n    return vec3(xn*f1((c.x+16.)/116.  + c.y/500. ),\n                yn*f1((c.x+16.)/116.),\n                zn*f1((c.x+16.)/116.  - c.z/200. )\n            );\n}\n\nvec3 xyztorgb(vec3 c){\n    return c * XYZ_2_RGB;\n}\n\nvec3 xyztosrgb(vec3 c) { // FIXME naming\n    return rgb_to_srgb_approx(xyztorgb(c));\n}\n\nvec4 cielabToSRGBA(vec4 cielab){\n    return vec4(xyztosrgb(cielabtoxyz(\n        vec3(\n            clamp(cielab.r, 0., 100.),\n            clamp(cielab.g, -128., 128.),\n            clamp(cielab.b, -128., 128.)\n        )\n    )), cielab.a);\n}\n#endif\n\n\n#ifndef SRGBA_TO_CIELAB\n#define SRGBA_TO_CIELAB\nvec4 sRGBToXYZ (vec4 srgba);\nvec4 sRGBToLinearRGB (vec4 srgba);\nfloat inverseGammaCorrection(float t);\nvec4 XYZToCieLab (vec4 xyza);\nfloat XYZToCieLabAux(float t);\n\nvec4 sRGBAToCieLAB(vec4 srgba){\n    return XYZToCieLab(sRGBToXYZ(srgba));\n}\n\n// Convert sRGB to CIE XYZ with the D65 white point\nvec4 sRGBToXYZ (vec4 srgba) {\n    // Poynton, "Frequently Asked Questions About Color," page 10\n    // Wikipedia: http://en.wikipedia.org/wiki/SRGB\n    // Wikipedia: http://en.wikipedia.org/wiki/CIE_1931_color_space\n    vec4 rgba = sRGBToLinearRGB(srgba);\n    return vec4(\n        (0.4123955889674142161 * rgba.r + 0.3575834307637148171 * rgba.g + 0.1804926473817015735 * rgba.b),\n        (0.2125862307855955516 * rgba.r + 0.7151703037034108499 * rgba.g + 0.07220049864333622685 * rgba.b),\n        (0.01929721549174694484 * rgba.r + 0.1191838645808485318 * rgba.g + 0.9504971251315797660 * rgba.b),\n        rgba.a\n    );\n}\n\nvec4 sRGBToLinearRGB (vec4 srgba) {\n    // http://en.wikipedia.org/wiki/SRGB\n    return vec4(\n        inverseGammaCorrection(srgba.r),\n        inverseGammaCorrection(srgba.g),\n        inverseGammaCorrection(srgba.b),\n        srgba.a\n    );\n}\n\nfloat inverseGammaCorrection(float t) {\n    return t <= 0.0404482362771076 ? t / 12.92 : pow((t + 0.055) / 1.055, 2.4);\n}\n\n\nfloat WHITEPOINT_D65_X = 0.950456;\nfloat WHITEPOINT_D65_Y = 1.0;\nfloat WHITEPOINT_D65_Z = 1.088754;\n\n// Convert CIE XYZ to CIE L*a*b* (CIELAB) with the D65 white point\nvec4 XYZToCieLab (vec4 xyza) {\n    // Wikipedia: http://en.wikipedia.org/wiki/Lab_color_space\n\n    float xn = WHITEPOINT_D65_X;\n    float yn = WHITEPOINT_D65_Y;\n    float zn = WHITEPOINT_D65_Z;\n\n    return vec4(\n        116. * XYZToCieLabAux(xyza.y / yn) - 16.,\n        500. * (XYZToCieLabAux(xyza.x / xn) - XYZToCieLabAux(xyza.y / yn)),\n        200. * (XYZToCieLabAux(xyza.y / yn) - XYZToCieLabAux(xyza.z / zn)),\n        xyza.a\n    );\n}\n\nfloat XYZToCieLabAux(float t) {\n    return t >= 8.85645167903563082e-3\n            ? pow(t, 0.333333333333333) : (841.0 / 108.0) * t + 4.0 / 29.0;\n}\n\n#endif\n'},function(t,e){t.exports="precision highp float;\nattribute vec2 vertex;\n\nvarying  vec2 uv;\n\nvoid main(void) {\n    uv = vertex*0.5+vec2(0.5);\n    gl_Position = vec4(vertex, 0.5, 1.);\n}\n"},function(t,e){t.exports="precision highp float;\n\nvarying vec2 uv;\n\nvec2 featureID;\n\n$propertyPreface\n$style_preface\n\nvoid main(void) {\n    featureID = abs(uv);\n    gl_FragColor = $style_inline;\n}\n"},function(t,e){function n(e,i){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,i)}t.exports=n},function(t,e,n){t.exports=n(60)},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,n){var i=n(0);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i(t)););return t}},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var u,l=[],c=!1,h=-1;function d(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&p())}function p(){if(!c){var t=s(d);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new f(t,e)),1!==l.length||c||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){var i=n(0),r=n(21),o=n(55),a=n(6);function s(e){var n="function"==typeof Map?new Map:void 0;return t.exports=s=function(t){if(null===t||!o(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return a(t,arguments,i(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r(e,t)},s(e)}t.exports=s},function(t,e,n){var i=n(57);t.exports=function(t,e){if(null==t)return{};var n,r,o=i(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)e.indexOf(n=a[r])>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}},function(t,e,n){var i=n(24),r=n(23),o=n(25);t.exports=function(t){return i(t)||r(t)||o()}},function(t,e,n){"use strict";t.exports=y;var i,r=n(63),o=n(65),a=n(69),s=(i="function"==typeof Symbol?function(t){return Symbol(t)}:function(t){return"_"+t})("max"),u=i("length"),l=i("lengthCalculator"),c=i("allowStale"),h=i("maxAge"),d=i("dispose"),p=i("noDisposeOnSet"),f=i("lruList"),g=i("cache");function m(){return 1}function y(t){if(!(this instanceof y))return new y(t);"number"==typeof t&&(t={max:t}),t||(t={});var e=this[s]=t.max;(!e||"number"!=typeof e||e<=0)&&(this[s]=1/0);var n=t.length||m;"function"!=typeof n&&(n=m),this[l]=n,this[c]=t.stale||!1,this[h]=t.maxAge||0,this[d]=t.dispose,this[p]=t.noDisposeOnSet||!1,this.reset()}function _(t,e,n,i){var r=n.value;b(t,r)&&(w(t,n),t[c]||(r=void 0)),r&&e.call(i,r.value,r.key,t)}function v(t,e,n){var i=t[g].get(e);if(i){var r=i.value;b(t,r)?(w(t,i),t[c]||(r=void 0)):n&&t[f].unshiftNode(i),r&&(r=r.value)}return r}function b(t,e){if(!e||!e.maxAge&&!t[h])return!1;var n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[h]&&n>t[h]}function x(t){if(t[u]>t[s])for(var e=t[f].tail;t[u]>t[s]&&null!==e;){var n=e.prev;w(t,e),e=n}}function w(t,e){if(e){var n=e.value;t[d]&&t[d](n.key,n.value),t[u]-=n.length,t[g].delete(n.key),t[f].removeNode(e)}}Object.defineProperty(y.prototype,"max",{set:function(t){(!t||"number"!=typeof t||t<=0)&&(t=1/0),this[s]=t,x(this)},get:function(){return this[s]},enumerable:!0}),Object.defineProperty(y.prototype,"allowStale",{set:function(t){this[c]=!!t},get:function(){return this[c]},enumerable:!0}),Object.defineProperty(y.prototype,"maxAge",{set:function(t){(!t||"number"!=typeof t||t<0)&&(t=0),this[h]=t,x(this)},get:function(){return this[h]},enumerable:!0}),Object.defineProperty(y.prototype,"lengthCalculator",{set:function(t){"function"!=typeof t&&(t=m),t!==this[l]&&(this[l]=t,this[u]=0,this[f].forEach((function(t){t.length=this[l](t.value,t.key),this[u]+=t.length}),this)),x(this)},get:function(){return this[l]},enumerable:!0}),Object.defineProperty(y.prototype,"length",{get:function(){return this[u]},enumerable:!0}),Object.defineProperty(y.prototype,"itemCount",{get:function(){return this[f].length},enumerable:!0}),y.prototype.rforEach=function(t,e){e=e||this;for(var n=this[f].tail;null!==n;){var i=n.prev;_(this,t,n,e),n=i}},y.prototype.forEach=function(t,e){e=e||this;for(var n=this[f].head;null!==n;){var i=n.next;_(this,t,n,e),n=i}},y.prototype.keys=function(){return this[f].toArray().map((function(t){return t.key}),this)},y.prototype.values=function(){return this[f].toArray().map((function(t){return t.value}),this)},y.prototype.reset=function(){this[d]&&this[f]&&this[f].length&&this[f].forEach((function(t){this[d](t.key,t.value)}),this),this[g]=new r,this[f]=new a,this[u]=0},y.prototype.dump=function(){return this[f].map((function(t){if(!b(this,t))return{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}}),this).toArray().filter((function(t){return t}))},y.prototype.dumpLru=function(){return this[f]},y.prototype.inspect=function(t,e){var n="LRUCache {",i=!1;this[c]&&(n+="\n  allowStale: true",i=!0);var r=this[s];r&&r!==1/0&&(i&&(n+=","),n+="\n  max: "+o.inspect(r,e),i=!0);var a=this[h];a&&(i&&(n+=","),n+="\n  maxAge: "+o.inspect(a,e),i=!0);var d=this[l];d&&d!==m&&(i&&(n+=","),n+="\n  length: "+o.inspect(this[u],e),i=!0);var p=!1;return this[f].forEach((function(t){p?n+=",\n  ":(i&&(n+=",\n"),p=!0,n+="\n  ");var r=o.inspect(t.key).split("\n").join("\n  "),s={value:t.value};t.maxAge!==a&&(s.maxAge=t.maxAge),d!==m&&(s.length=t.length),b(this,t)&&(s.stale=!0),s=o.inspect(s,e).split("\n").join("\n  "),n+=r+" => "+s})),(p||i)&&(n+="\n"),n+="}"},y.prototype.set=function(t,e,n){var i=(n=n||this[h])?Date.now():0,r=this[l](e,t);if(this[g].has(t)){if(r>this[s])return w(this,this[g].get(t)),!1;var o=this[g].get(t).value;return this[d]&&(this[p]||this[d](t,o.value)),o.now=i,o.maxAge=n,o.value=e,this[u]+=r-o.length,o.length=r,this.get(t),x(this),!0}var a=new function(t,e,n,i,r){this.key=t,this.value=e,this.length=n,this.now=i,this.maxAge=r||0}(t,e,r,i,n);return a.length>this[s]?(this[d]&&this[d](t,e),!1):(this[u]+=a.length,this[f].unshift(a),this[g].set(t,this[f].head),x(this),!0)},y.prototype.has=function(t){return!!this[g].has(t)&&!b(this,this[g].get(t).value)},y.prototype.get=function(t){return v(this,t,!0)},y.prototype.peek=function(t){return v(this,t,!1)},y.prototype.pop=function(){var t=this[f].tail;return t?(w(this,t),t.value):null},y.prototype.del=function(t){w(this,this[g].get(t))},y.prototype.load=function(t){this.reset();for(var e=Date.now(),n=t.length-1;n>=0;n--){var i=t[n],r=i.e||0;if(0===r)this.set(i.k,i.v);else{var o=r-e;o>0&&this.set(i.k,i.v,o)}}},y.prototype.prune=function(){var t=this;this[g].forEach((function(e,n){v(t,n,!1)}))}},function(t,e,n){"use strict";function i(t,e,n){var i,a,s,u,l,c=t.length,h=o(t[0],e),d=[];for(n||(n=[]),i=1;i<c;i++){for(a=t[i-1],u=l=o(s=t[i],e);;){if(!(h|u)){d.push(a),u!==l?(d.push(s),i<c-1&&(n.push(d),d=[])):i===c-1&&d.push(s);break}if(h&u)break;h?h=o(a=r(a,s,h,e),e):u=o(s=r(a,s,u,e),e)}h=l}return d.length&&n.push(d),n}function r(t,e,n,i){return 8&n?[t[0]+(e[0]-t[0])*(i[3]-t[1])/(e[1]-t[1]),i[3]]:4&n?[t[0]+(e[0]-t[0])*(i[1]-t[1])/(e[1]-t[1]),i[1]]:2&n?[i[2],t[1]+(e[1]-t[1])*(i[2]-t[0])/(e[0]-t[0])]:1&n?[i[0],t[1]+(e[1]-t[1])*(i[0]-t[0])/(e[0]-t[0])]:null}function o(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}t.exports=i,i.polyline=i,i.polygon=function(t,e){var n,i,a,s,u,l,c;for(i=1;i<=8;i*=2){for(n=[],s=!(o(a=t[t.length-1],e)&i),u=0;u<t.length;u++)(c=!(o(l=t[u],e)&i))!==s&&n.push(r(a,l,i,e)),c&&n.push(l),a=l,s=c;if(!(t=n).length)break}return n}},function(t,e){t.exports="precision highp float;\nattribute vec2 vertex;\n\nvarying  vec2 uv;\n\nvoid main(void) {\n    uv = vertex*0.5+vec2(0.5);\n    gl_Position = vec4(vertex, 0.5, 1.);\n}\n"},function(t,e){t.exports="precision highp float;\n\nvarying  vec2 uv;\n\nuniform sampler2D aaTex;\n\nvoid main(void) {\n    vec4 aa = texture2D(aaTex, uv);\n    gl_FragColor = aa;\n}\n"},function(t,e){t.exports="vec2 encodeWidth(float x) {\n    if (!(x<=0. || x>=0.) ){\n        // Convert NaN widths to `0`\n        // Do not remove this, some GPUs will convert NaN floats to 1. when\n        // packing the shader output to a RGBA UNSIGNED BYTE textures\n        x = 0.;\n    }\n    float high, low;\n    x = clamp(x, 0., 1023.);\n    high = floor(x/4.);\n    low = (x-high*4.)/4.;\n    return vec2(high/255., low);\n}\n\n$width_preface\n"},function(t,e){t.exports="precision highp float;\n\nattribute vec2 vertexPosition;\nattribute vec2 featureID;\n\nuniform float orderMinWidth;\nuniform float orderMaxWidth;\nuniform float devicePixelRatio;\nuniform vec2 resolution;\nuniform mat4 matrix;\n\nuniform sampler2D colorTex;\nuniform sampler2D widthTex;\nuniform sampler2D filterTex;\n\nvarying highp vec2 featureIDVar;\nvarying highp vec4 color;\nvarying highp vec2 pointCoord;\nvarying highp float filtering;\n\nfloat decodeWidth(vec2 enc) {\n  return enc.x*(255.*4.) + 4.*enc.y;\n}\n\n$symbolPlacement_preface\n$propertyPreface\n$transform_preface\n\nvec2 transform(vec2 p){\n    return $transform_inline(2.*p)/resolution;\n}\n\n// We'll need a square inscribed in a triangle\n// The triangle will be equilateral\n// The square side length will be equal to 1\n// Each triangle edge length will be equal to 1+2*A (by definition of A)\n// The triangle height will be equal to H by definition\n// The square inscription will generate 3 smaller triangles\n// Each one of these will have an hypotenuse equal to Y\n//\n// Therefore:\n// Y*sin(60) = 1  =>  Y = 2 / sqrt(3)\n// A=Y*cos(60)    =>  A = 1 / sqrt(3)\n// tan(60) = H / (0.5 + A)   =>  H = sqrt(3)*(0.5 + 1 / sqrt(3))\n#define A (0.577350269189625)\n#define H (1.86603)\n\nvoid main(void) {\n    featureIDVar = abs(featureID);\n    color = texture2D(colorTex, abs(featureID));\n    filtering = texture2D(filterTex, abs(featureID)).a;\n\n    float size = decodeWidth(texture2D(widthTex, abs(featureID)).rg);\n\n    vec4 p =  matrix*vec4(vertexPosition, 0., 1.);\n    p/=p.w;\n\n    if (featureID.y<0.){\n        pointCoord = vec2((0.5+A)/(0.5), 0.);\n        p.xy += transform(size*vec2(0.5+A, -H/2. + (H/2. - 0.5) ));\n    }else if (featureID.x<0.){\n        pointCoord = vec2(-(0.5+A)/(0.5), 0.);\n        p.xy += transform(size*vec2(-(0.5+A), -H/2. + (H/2. - 0.5)));\n    }else{\n        pointCoord = vec2(0., H);\n        p.xy += transform(size*vec2(0., H/2. + (H/2. - 0.5)));\n    }\n    pointCoord.y = 1.-pointCoord.y;\n\n\n    p.xy += ($symbolPlacement_inline)*size/resolution;\n\n\n    vec4 noOverrideColor = vec4(1., 1., 1., 0.);\n    bool alphaButNotOverrideColor = (color.a==0. && color != noOverrideColor);\n\n    if (size==0. || alphaButNotOverrideColor || size<orderMinWidth || size>=orderMaxWidth){\n        p.x=10000.;\n    }\n\n    gl_Position  = p;\n}\n"},function(t,e){t.exports="precision highp float;\n\nvarying highp vec2 featureIDVar;\nvarying highp vec4 color;\nvarying highp vec2 pointCoord;\nvarying highp float filtering;\n\n$symbol_preface\n$propertyPreface\n\nvoid main(void) {\n    vec2 featureID = abs(featureIDVar);\n    vec2 imageUV = pointCoord;\n    imageUV.x = imageUV.x * 0.5 + 0.5;\n    vec4 symbolColor = $symbol_inline;\n    vec4 noOverrideColor = vec4(1., 1., 1., 0.);\n\n    vec4 c;\n    if (color != noOverrideColor){\n        c = color * vec4(vec3(1), symbolColor.a);\n    }else{\n        c = symbolColor;\n    }\n    c.a *= filtering;\n    if (imageUV!=clamp(imageUV, 0.,1.)){\n        c.a = 0.;\n    }\n\n    gl_FragColor = vec4(c.rgb*c.a, c.a);\n}\n"},function(t,e,n){"use strict";function i(t,e,n){n=n||2;var i,s,u,l,c,p,g,m=e&&e.length,y=m?e[0]*n:t.length,_=r(t,0,y,n,!0),v=[];if(!_)return v;if(m&&(_=function(t,e,n,i){var a,s,u,l=[];for(a=0,s=e.length;a<s;a++)(u=r(t,e[a]*i,a<s-1?e[a+1]*i:t.length,i,!1))===u.next&&(u.steiner=!0),l.push(f(u));for(l.sort(h),a=0;a<l.length;a++)d(l[a],n),n=o(n,n.next);return n}(t,e,_,n)),t.length>80*n){i=u=t[0],s=l=t[1];for(var b=n;b<y;b+=n)(c=t[b])<i&&(i=c),(p=t[b+1])<s&&(s=p),c>u&&(u=c),p>l&&(l=p);g=0!==(g=Math.max(u-i,l-s))?1/g:0}return a(_,v,n,i,s,g),v}function r(t,e,n,i,r){var o,a;if(r===M(t,e,n,i)>0)for(o=e;o<n;o+=i)a=w(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=w(o,t[o],t[o+1],a);return a&&_(a,a.next)&&(C(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!_(i,i.next)&&0!==y(i.prev,i,i.next))i=i.next;else{if(C(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function a(t,e,n,i,r,h,d){if(t){!d&&h&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=p(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<l&&(s++,i=i.nextZ);e++);for(u=l;s>0||u>0&&i;)0!==s&&(0===u||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,u--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(a>1)}(r)}(t,i,r,h);for(var f,g,m=t;t.prev!==t.next;)if(f=t.prev,g=t.next,h?u(t,i,r,h):s(t))e.push(f.i/n),e.push(t.i/n),e.push(g.i/n),C(t),t=g.next,m=g.next;else if((t=g)===m){d?1===d?a(t=l(t,e,n),e,n,i,r,h,2):2===d&&c(t,e,n,i,r,h):a(o(t),e,n,i,r,h,1);break}}}function s(t){var e=t.prev,n=t,i=t.next;if(y(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(g(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&y(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function u(t,e,n,i){var r=t.prev,o=t,a=t.next;if(y(r,o,a)>=0)return!1;for(var s=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,l=p(r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,e,n,i),c=p(s,u,e,n,i),h=t.prevZ,d=t.nextZ;h&&h.z>=l&&d&&d.z<=c;){if(h!==t.prev&&h!==t.next&&g(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&y(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,d!==t.prev&&d!==t.next&&g(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&y(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;h&&h.z>=l;){if(h!==t.prev&&h!==t.next&&g(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&y(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;d&&d.z<=c;){if(d!==t.prev&&d!==t.next&&g(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&y(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function l(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!_(r,o)&&v(r,i,i.next,o)&&b(r,o)&&b(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),C(i),C(i.next),i=t=o),i=i.next}while(i!==t);return i}function c(t,e,n,i,r,s){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&m(u,l)){var c=x(u,l);return u=o(u,u.next),c=o(c,c.next),a(u,e,n,i,r,s),void a(c,e,n,i,r,s)}l=l.next}u=u.next}while(u!==t)}function h(t,e){return t.x-e.x}function d(t,e){if(e=function(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n.prev;var u,l=n,c=n.x,h=n.y,d=1/0;for(i=n.next;i!==l;)r>=i.x&&i.x>=c&&r!==i.x&&g(o<h?r:a,o,c,h,o<h?a:r,o,i.x,i.y)&&((u=Math.abs(o-i.y)/(r-i.x))<d||u===d&&i.x>n.x)&&b(i,t)&&(n=i,d=u),i=i.next;return n}(t,e)){var n=x(e,t);o(n,n.next)}}function p(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function g(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&v(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&b(t,e)&&b(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)}function y(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function v(t,e,n,i){return!!(_(t,e)&&_(n,i)||_(t,i)&&_(n,e))||y(t,e,n)>0!=y(t,e,i)>0&&y(n,i,t)>0!=y(n,i,e)>0}function b(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function x(t,e){var n=new P(t.i,t.x,t.y),i=new P(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function w(t,e,n,i){var r=new P(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function C(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}t.exports=i,t.exports.default=i,i.deviation=function(t,e,n,i){var r=e&&e.length,o=Math.abs(M(t,0,r?e[0]*n:t.length,n));if(r)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(M(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var u=0;for(a=0;a<i.length;a+=3){var l=i[a]*n,c=i[a+1]*n,h=i[a+2]*n;u+=Math.abs((t[l]-t[h])*(t[c+1]-t[l+1])-(t[l]-t[c])*(t[h+1]-t[l+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[r][o][a]);r>0&&n.holes.push(i+=t[r-1].length)}return n}},function(t,e,n){t.exports=function(){return n(70)('/*!\n * CARTO VL js https://carto.com/\n * Version: 1.4.5\n * \n */!function(t){var e={};function __webpack_require__(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}__webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,r){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)__webpack_require__.d(r,n,function(e){return t[e]}.bind(null,n));return r},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=40)}([function(t,e){t.exports=function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function _getPrototypeOf(e){return t.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(e)}t.exports=_getPrototypeOf},function(t,e){function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}},function(t,e,r){var n=r(7),a=r(33);t.exports=function _possibleConstructorReturn(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?a(t):e}},function(t,e,r){var n=r(11);t.exports=function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},function(t,e,r){var n=r(25),a=r(26),o=r(27);t.exports=function _slicedToArray(t,e){return n(t)||a(t,e)||o()}},function(t,e,r){var n=r(37),a=r(38),o=r(39);t.exports=function _toConsumableArray(t){return n(t)||a(t)||o()}},function(t,e){function _typeof2(t){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof2(t){return typeof t}:function _typeof2(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(e){return"function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?t.exports=_typeof=function _typeof(t){return _typeof2(t)}:t.exports=_typeof=function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)},_typeof(e)}t.exports=_typeof},function(t,e,r){r(1);var n=r(36);function _get(e,r,a){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=_get=Reflect.get:t.exports=_get=function _get(t,e,r){var a=n(t,e);if(a){var o=Object.getOwnPropertyDescriptor(a,e);return o.get?o.get.call(r):o.value}},_get(e,r,a||e)}t.exports=_get},function(t,e,r){t.exports=r(28)},function(t,e){function asyncGeneratorStep(t,e,r,n,a,o,i){try{var u=t[o](i),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,a)}t.exports=function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var o=t.apply(e,r);function _next(t){asyncGeneratorStep(o,n,a,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(o,n,a,_next,_throw,"throw",t)}_next(void 0)})}}},function(t,e){function _setPrototypeOf(e,r){return t.exports=_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,e){return t.__proto__=e,t},_setPrototypeOf(e,r)}t.exports=_setPrototypeOf},function(t,e,r){"use strict";var n=r(13);function VectorTileLayer(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(readLayer,this,e),this.length=this._features.length}function readLayer(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(function readValueMessage(t){var e=null,r=t.readVarint()+t.pos;for(;t.pos<r;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(r))}t.exports=VectorTileLayer,VectorTileLayer.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new n(this._pbf,e,this.extent,this._keys,this._values)}},function(t,e,r){"use strict";var n=r(31);function VectorTileFeature(t,e,r,n,a){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=a,t.readFields(readFeature,this,e)}function readFeature(t,e,r){1==t?e.id=r.readVarint():2==t?function readTag(t,e){var r=t.readVarint()+t.pos;for(;t.pos<r;){var n=e._keys[t.readVarint()],a=e._values[t.readVarint()];e.properties[n]=a}}(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}function signedArea(t){for(var e,r,n=0,a=0,o=t.length,i=o-1;a<o;i=a++)e=t[a],n+=((r=t[i]).x-e.x)*(e.y+r.y);return n}t.exports=VectorTileFeature,VectorTileFeature.types=["Unknown","Point","LineString","Polygon"],VectorTileFeature.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,a=1,o=0,i=0,u=0,s=[];t.pos<r;){if(o<=0){var c=t.readVarint();a=7&c,o=c>>3}if(o--,1===a||2===a)i+=t.readSVarint(),u+=t.readSVarint(),1===a&&(e&&s.push(e),e=[]),e.push(new n(i,u));else{if(7!==a)throw new Error("unknown command "+a);e&&e.push(e[0].clone())}}return e&&s.push(e),s},VectorTileFeature.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,a=0,o=0,i=1/0,u=-1/0,s=1/0,c=-1/0;t.pos<e;){if(n<=0){var f=t.readVarint();r=7&f,n=f>>3}if(n--,1===r||2===r)a+=t.readSVarint(),o+=t.readSVarint(),a<i&&(i=a),a>u&&(u=a),o<s&&(s=o),o>c&&(c=o);else if(7!==r)throw new Error("unknown command "+r)}return[i,s,u,c]},VectorTileFeature.prototype.toGeoJSON=function(t,e,r){var n,a,o=this.extent*Math.pow(2,r),i=this.extent*t,u=this.extent*e,s=this.loadGeometry(),c=VectorTileFeature.types[this.type];function project(t){for(var e=0;e<t.length;e++){var r=t[e],n=180-360*(r.y+u)/o;t[e]=[360*(r.x+i)/o-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:var f=[];for(n=0;n<s.length;n++)f[n]=s[n][0];project(s=f);break;case 2:for(n=0;n<s.length;n++)project(s[n]);break;case 3:for(s=function classifyRings(t){var e=t.length;if(e<=1)return[t];for(var r,n,a=[],o=0;o<e;o++){var i=signedArea(t[o]);0!==i&&(void 0===n&&(n=i<0),n===i<0?(r&&a.push(r),r=[t[o]]):r.push(t[o]))}r&&a.push(r);return a}(s),n=0;n<s.length;n++)for(a=0;a<s[n].length;a++)project(s[n][a])}1===s.length?s=s[0]:c="Multi"+c;var l={type:"Feature",geometry:{type:c,coordinates:s},properties:this.properties};return"id"in this&&(l.id=this.id),l}},function(t,e,r){t.exports.VectorTile=r(30),t.exports.VectorTileFeature=r(13),t.exports.VectorTileLayer=r(12)},function(t,e,r){"use strict";t.exports=Pbf;var n=r(32);function Pbf(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Pbf.Varint=0,Pbf.Fixed64=1,Pbf.Bytes=2,Pbf.Fixed32=5;function readPackedEnd(t){return t.type===Pbf.Bytes?t.readVarint()+t.pos:t.pos+1}function toNum(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function makeRoomForExtraLength(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var a=r.pos-1;a>=t;a--)r.buf[a+n]=r.buf[a]}function writePackedVarint(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function writePackedSVarint(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function writePackedFloat(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function writePackedDouble(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function writePackedBoolean(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function writePackedFixed32(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function writePackedSFixed32(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function writePackedFixed64(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function writePackedSFixed64(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function readUInt32(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function writeInt32(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function readInt32(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}Pbf.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),a=n>>3,o=this.pos;this.type=7&n,t(a,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=readUInt32(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=readInt32(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=readUInt32(this.buf,this.pos)+4294967296*readUInt32(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=readUInt32(this.buf,this.pos)+4294967296*readInt32(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function readVarintRemainder(t,e,r){var n,a,o=r.buf;if(a=o[r.pos++],n=(112&a)>>4,a<128)return toNum(t,n,e);if(a=o[r.pos++],n|=(127&a)<<3,a<128)return toNum(t,n,e);if(a=o[r.pos++],n|=(127&a)<<10,a<128)return toNum(t,n,e);if(a=o[r.pos++],n|=(127&a)<<17,a<128)return toNum(t,n,e);if(a=o[r.pos++],n|=(127&a)<<24,a<128)return toNum(t,n,e);if(a=o[r.pos++],n|=(1&a)<<31,a<128)return toNum(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function readUtf8(t,e,r){var n="",a=e;for(;a<r;){var o,i,u,s=t[a],c=null,f=s>239?4:s>223?3:s>191?2:1;if(a+f>r)break;1===f?s<128&&(c=s):2===f?128==(192&(o=t[a+1]))&&(c=(31&s)<<6|63&o)<=127&&(c=null):3===f?(o=t[a+1],i=t[a+2],128==(192&o)&&128==(192&i)&&((c=(15&s)<<12|(63&o)<<6|63&i)<=2047||c>=55296&&c<=57343)&&(c=null)):4===f&&(o=t[a+1],i=t[a+2],u=t[a+3],128==(192&o)&&128==(192&i)&&128==(192&u)&&((c=(15&s)<<18|(63&o)<<12|(63&i)<<6|63&u)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,f=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),n+=String.fromCharCode(c),a+=f}return n}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var r=readPackedEnd(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Pbf.Varint)for(;this.buf[this.pos++]>127;);else if(e===Pbf.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Pbf.Fixed32)this.pos+=4;else{if(e!==Pbf.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),writeInt32(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),writeInt32(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),writeInt32(this.buf,-1&t,this.pos),writeInt32(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),writeInt32(this.buf,-1&t,this.pos),writeInt32(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function writeBigVarint(t,e){var r,n;t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn\'t fit into 10 bytes");e.realloc(10),function writeBigVarintLow(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function writeBigVarintHigh(t,e){var r=(7&t)<<4;if(e.buf[e.pos++]|=r|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function writeUtf8(t,e,r){for(var n,a,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!a){n>56319||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):a=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,a=n;continue}n=a-55296<<10|n-56320|65536,a=null}else a&&(t[r++]=239,t[r++]=191,t[r++]=189,a=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&makeRoomForExtraLength(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),n.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),n.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&makeRoomForExtraLength(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,Pbf.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){this.writeMessage(t,writePackedVarint,e)},writePackedSVarint:function(t,e){this.writeMessage(t,writePackedSVarint,e)},writePackedBoolean:function(t,e){this.writeMessage(t,writePackedBoolean,e)},writePackedFloat:function(t,e){this.writeMessage(t,writePackedFloat,e)},writePackedDouble:function(t,e){this.writeMessage(t,writePackedDouble,e)},writePackedFixed32:function(t,e){this.writeMessage(t,writePackedFixed32,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,writePackedSFixed32,e)},writePackedFixed64:function(t,e){this.writeMessage(t,writePackedFixed64,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,writePackedSFixed64,e)},writeBytesField:function(t,e){this.writeTag(t,Pbf.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Pbf.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Pbf.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Pbf.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Pbf.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Pbf.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Pbf.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Pbf.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Pbf.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Pbf.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e,r){var n=r(1),a=r(11),o=r(34),i=r(35);function _wrapNativeSuper(e){var r="function"==typeof Map?new Map:void 0;return t.exports=_wrapNativeSuper=function _wrapNativeSuper(t){if(null===t||!o(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,Wrapper)}function Wrapper(){return i(t,arguments,n(this).constructor)}return Wrapper.prototype=Object.create(t.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),a(Wrapper,t)},_wrapNativeSuper(e)}t.exports=_wrapNativeSuper},function(t,e,r){"use strict";function earcut(t,e,r){r=r||2;var n,a,o,i,u,s,c,f=e&&e.length,l=f?e[0]*r:t.length,h=linkedList(t,0,l,r,!0),d=[];if(!h)return d;if(f&&(h=function eliminateHoles(t,e,r,n){var a,o,i,u,s,c=[];for(a=0,o=e.length;a<o;a++)i=e[a]*n,u=a<o-1?e[a+1]*n:t.length,(s=linkedList(t,i,u,n,!1))===s.next&&(s.steiner=!0),c.push(getLeftmost(s));for(c.sort(compareX),a=0;a<c.length;a++)eliminateHole(c[a],r),r=filterPoints(r,r.next);return r}(t,e,h,r)),t.length>80*r){n=o=t[0],a=i=t[1];for(var p=r;p<l;p+=r)u=t[p],s=t[p+1],u<n&&(n=u),s<a&&(a=s),u>o&&(o=u),s>i&&(i=s);c=0!==(c=Math.max(o-n,i-a))?1/c:0}return earcutLinked(h,d,r,n,a,c),d}function linkedList(t,e,r,n,a){var o,i;if(a===signedArea(t,e,r,n)>0)for(o=e;o<r;o+=n)i=insertNode(o,t[o],t[o+1],i);else for(o=r-n;o>=e;o-=n)i=insertNode(o,t[o],t[o+1],i);return i&&equals(i,i.next)&&(removeNode(i),i=i.next),i}function filterPoints(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!equals(n,n.next)&&0!==area(n.prev,n,n.next))n=n.next;else{if(removeNode(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function earcutLinked(t,e,r,n,a,o,i){if(t){!i&&o&&function indexCurve(t,e,r,n){var a=t;do{null===a.z&&(a.z=zOrder(a.x,a.y,e,r,n)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==t);a.prevZ.nextZ=null,a.prevZ=null,function sortLinked(t){var e,r,n,a,o,i,u,s,c=1;do{for(r=t,t=null,o=null,i=0;r;){for(i++,n=r,u=0,e=0;e<c&&(u++,n=n.nextZ);e++);for(s=c;u>0||s>0&&n;)0!==u&&(0===s||!n||r.z<=n.z)?(a=r,r=r.nextZ,u--):(a=n,n=n.nextZ,s--),o?o.nextZ=a:t=a,a.prevZ=o,o=a;r=n}o.nextZ=null,c*=2}while(i>1);return t}(a)}(t,n,a,o);for(var u,s,c=t;t.prev!==t.next;)if(u=t.prev,s=t.next,o?isEarHashed(t,n,a,o):isEar(t))e.push(u.i/r),e.push(t.i/r),e.push(s.i/r),removeNode(t),t=s.next,c=s.next;else if((t=s)===c){i?1===i?earcutLinked(t=cureLocalIntersections(t,e,r),e,r,n,a,o,2):2===i&&splitEarcut(t,e,r,n,a,o):earcutLinked(filterPoints(t),e,r,n,a,o,1);break}}}function isEar(t){var e=t.prev,r=t,n=t.next;if(area(e,r,n)>=0)return!1;for(var a=t.next.next;a!==t.prev;){if(pointInTriangle(e.x,e.y,r.x,r.y,n.x,n.y,a.x,a.y)&&area(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function isEarHashed(t,e,r,n){var a=t.prev,o=t,i=t.next;if(area(a,o,i)>=0)return!1;for(var u=a.x<o.x?a.x<i.x?a.x:i.x:o.x<i.x?o.x:i.x,s=a.y<o.y?a.y<i.y?a.y:i.y:o.y<i.y?o.y:i.y,c=a.x>o.x?a.x>i.x?a.x:i.x:o.x>i.x?o.x:i.x,f=a.y>o.y?a.y>i.y?a.y:i.y:o.y>i.y?o.y:i.y,l=zOrder(u,s,e,r,n),h=zOrder(c,f,e,r,n),d=t.prevZ,p=t.nextZ;d&&d.z>=l&&p&&p.z<=h;){if(d!==t.prev&&d!==t.next&&pointInTriangle(a.x,a.y,o.x,o.y,i.x,i.y,d.x,d.y)&&area(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==t.prev&&p!==t.next&&pointInTriangle(a.x,a.y,o.x,o.y,i.x,i.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=l;){if(d!==t.prev&&d!==t.next&&pointInTriangle(a.x,a.y,o.x,o.y,i.x,i.y,d.x,d.y)&&area(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=h;){if(p!==t.prev&&p!==t.next&&pointInTriangle(a.x,a.y,o.x,o.y,i.x,i.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function cureLocalIntersections(t,e,r){var n=t;do{var a=n.prev,o=n.next.next;!equals(a,o)&&intersects(a,n,n.next,o)&&locallyInside(a,o)&&locallyInside(o,a)&&(e.push(a.i/r),e.push(n.i/r),e.push(o.i/r),removeNode(n),removeNode(n.next),n=t=o),n=n.next}while(n!==t);return n}function splitEarcut(t,e,r,n,a,o){var i=t;do{for(var u=i.next.next;u!==i.prev;){if(i.i!==u.i&&isValidDiagonal(i,u)){var s=splitPolygon(i,u);return i=filterPoints(i,i.next),s=filterPoints(s,s.next),earcutLinked(i,e,r,n,a,o),void earcutLinked(s,e,r,n,a,o)}u=u.next}i=i.next}while(i!==t)}function compareX(t,e){return t.x-e.x}function eliminateHole(t,e){if(e=function findHoleBridge(t,e){var r,n=e,a=t.x,o=t.y,i=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var u=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(u<=a&&u>i){if(i=u,u===a){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(a===i)return r.prev;var s,c=r,f=r.x,l=r.y,h=1/0;n=r.next;for(;n!==c;)a>=n.x&&n.x>=f&&a!==n.x&&pointInTriangle(o<l?a:i,o,f,l,o<l?i:a,o,n.x,n.y)&&((s=Math.abs(o-n.y)/(a-n.x))<h||s===h&&n.x>r.x)&&locallyInside(n,t)&&(r=n,h=s),n=n.next;return r}(t,e)){var r=splitPolygon(e,t);filterPoints(r,r.next)}}function zOrder(t,e,r,n,a){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*a)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*a)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function getLeftmost(t){var e=t,r=t;do{e.x<r.x&&(r=e),e=e.next}while(e!==t);return r}function pointInTriangle(t,e,r,n,a,o,i,u){return(a-i)*(e-u)-(t-i)*(o-u)>=0&&(t-i)*(n-u)-(r-i)*(e-u)>=0&&(r-i)*(o-u)-(a-i)*(n-u)>=0}function isValidDiagonal(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function intersectsPolygon(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&intersects(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&locallyInside(t,e)&&locallyInside(e,t)&&function middleInside(t,e){var r=t,n=!1,a=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&a<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)}function area(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function equals(t,e){return t.x===e.x&&t.y===e.y}function intersects(t,e,r,n){return!!(equals(t,e)&&equals(r,n)||equals(t,n)&&equals(r,e))||area(t,e,r)>0!=area(t,e,n)>0&&area(r,n,t)>0!=area(r,n,e)>0}function locallyInside(t,e){return area(t.prev,t,t.next)<0?area(t,e,t.next)>=0&&area(t,t.prev,e)>=0:area(t,e,t.prev)<0||area(t,t.next,e)<0}function splitPolygon(t,e){var r=new Node(t.i,t.x,t.y),n=new Node(e.i,e.x,e.y),a=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=a,a.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function insertNode(t,e,r,n){var a=new Node(t,e,r);return n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a),a}function removeNode(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Node(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(t,e,r,n){for(var a=0,o=e,i=r-n;o<r;o+=n)a+=(t[i]-t[o])*(t[o+1]+t[i+1]),i=o;return a}t.exports=earcut,t.exports.default=earcut,earcut.deviation=function(t,e,r,n){var a=e&&e.length,o=a?e[0]*r:t.length,i=Math.abs(signedArea(t,0,o,r));if(a)for(var u=0,s=e.length;u<s;u++){var c=e[u]*r,f=u<s-1?e[u+1]*r:t.length;i-=Math.abs(signedArea(t,c,f,r))}var l=0;for(u=0;u<n.length;u+=3){var h=n[u]*r,d=n[u+1]*r,p=n[u+2]*r;l+=Math.abs((t[h]-t[p])*(t[d+1]-t[h+1])-(t[h]-t[d])*(t[p+1]-t[h+1]))}return 0===i&&0===l?0:Math.abs((l-i)/i)},earcut.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,a=0;a<t.length;a++){for(var o=0;o<t[a].length;o++)for(var i=0;i<e;i++)r.vertices.push(t[a][o][i]);a>0&&(n+=t[a-1].length,r.holes.push(n))}return r}},,,,,,,,function(t,e){t.exports=function _arrayWithHoles(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function _iterableToArrayLimit(t,e){var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){a=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return r}},function(t,e){t.exports=function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,r){var n=function(){return this||"object"==typeof self&&self}()||Function("return this")(),a=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,o=a&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=r(29),a)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";var r,n=Object.prototype,a=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag",c="object"==typeof t,f=e.regeneratorRuntime;if(f)c&&(t.exports=f);else{(f=e.regeneratorRuntime=c?t.exports:{}).wrap=wrap;var l="suspendedStart",h="suspendedYield",d="executing",p="completed",y={},v={};v[i]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(values([])));g&&g!==n&&a.call(g,i)&&(v=g);var x=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(v);GeneratorFunction.prototype=x.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[s]=GeneratorFunction.displayName="GeneratorFunction",f.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},f.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(x),t},f.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[u]=function(){return this},f.AsyncIterator=AsyncIterator,f.async=function(t,e,r,n){var a=new AsyncIterator(wrap(t,e,r,n));return f.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},defineIteratorMethods(x),x[s]="Generator",x[i]=function(){return this},x.toString=function(){return"[object Generator]"},f.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function next(){for(;e.length;){var r=e.pop();if(r in t)return next.value=r,next.done=!1,next}return next.done=!0,next}},f.values=values,Context.prototype={constructor:Context,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(resetTryEntry),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function handle(n,a){return i.type="throw",i.arg=t,e.next=n,a&&(e.method="next",e.arg=r),!!a}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var u=a.call(o,"catchLoc"),s=a.call(o,"finallyLoc");if(u&&s){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;resetTryEntry(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:values(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),y}}}function wrap(t,e,r,n){var a=e&&e.prototype instanceof Generator?e:Generator,o=Object.create(a.prototype),i=new Context(n||[]);return o._invoke=function makeInvokeMethod(t,e,r){var n=l;return function invoke(a,o){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===a)throw o;return doneResult()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var u=maybeInvokeDelegate(i,r);if(u){if(u===y)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var s=tryCatch(t,e,r);if("normal"===s.type){if(n=r.done?p:h,s.arg===y)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=p,r.method="throw",r.arg=s.arg)}}}(t,r,i),o}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function AsyncIterator(t){var e;this._invoke=function enqueue(r,n){function callInvokeWithMethodAndArg(){return new Promise(function(e,o){!function invoke(e,r,n,o){var i=tryCatch(t[e],t,r);if("throw"!==i.type){var u=i.arg,s=u.value;return s&&"object"==typeof s&&a.call(s,"__await")?Promise.resolve(s.__await).then(function(t){invoke("next",t,n,o)},function(t){invoke("throw",t,n,o)}):Promise.resolve(s).then(function(t){u.value=t,n(u)},function(t){return invoke("throw",t,n,o)})}o(i.arg)}(r,n,e,o)})}return e=e?e.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,maybeInvokeDelegate(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a \'throw\' method")}return y}var a=tryCatch(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,y;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,y):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function next(){for(;++n<t.length;)if(a.call(t,n))return next.value=t[n],next.done=!1,next;return next.value=r,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:r,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(t,e,r){"use strict";var n=r(12);function readTile(t,e,r){if(3===t){var a=new n(r,r.readVarint()+r.pos);a.length&&(e[a.name]=a)}}t.exports=function VectorTile(t,e){this.layers=t.readFields(readTile,{},e)}},function(t,e,r){"use strict";function Point(t,e){this.x=t,this.y=e}t.exports=Point,Point.prototype={clone:function(){return new Point(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=e*this.x-r*this.y,a=r*this.x+e*this.y;return this.x=n,this.y=a,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),a=e.x+r*(this.x-e.x)-n*(this.y-e.y),o=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=a,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Point.convert=function(t){return t instanceof Point?t:Array.isArray(t)?new Point(t[0],t[1]):t}},function(t,e){e.read=function(t,e,r,n,a){var o,i,u=8*a-n-1,s=(1<<u)-1,c=s>>1,f=-7,l=r?a-1:0,h=r?-1:1,d=t[e+l];for(l+=h,o=d&(1<<-f)-1,d>>=-f,f+=u;f>0;o=256*o+t[e+l],l+=h,f-=8);for(i=o&(1<<-f)-1,o>>=-f,f+=n;f>0;i=256*i+t[e+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===s)return i?NaN:1/0*(d?-1:1);i+=Math.pow(2,n),o-=c}return(d?-1:1)*i*Math.pow(2,o-n)},e.write=function(t,e,r,n,a,o){var i,u,s,c=8*o-a-1,f=(1<<c)-1,l=f>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,i=f):(i=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-i))<1&&(i--,s*=2),(e+=i+l>=1?h/s:h*Math.pow(2,1-l))*s>=2&&(i++,s/=2),i+l>=f?(u=0,i=f):i+l>=1?(u=(e*s-1)*Math.pow(2,a),i+=l):(u=e*Math.pow(2,l-1)*Math.pow(2,a),i=0));a>=8;t[r+d]=255&u,d+=p,u/=256,a-=8);for(i=i<<a|u,c+=a;c>0;t[r+d]=255&i,d+=p,i/=256,c-=8);t[r+d-p]|=128*y}},function(t,e){t.exports=function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}},function(t,e){t.exports=function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}},function(t,e,r){var n=r(11);function _construct(e,r,a){return!function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?t.exports=_construct=function _construct(t,e,r){var a=[null];a.push.apply(a,e);var o=new(Function.bind.apply(t,a));return r&&n(o,r.prototype),o}:t.exports=_construct=Reflect.construct,_construct.apply(null,arguments)}t.exports=_construct},function(t,e,r){var n=r(1);t.exports=function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n(t)););return t}},function(t,e){t.exports=function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}},function(t,e){t.exports=function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,r){"use strict";r.r(e);var n={};r.r(n),r.d(n,"create",function(){return create}),r.d(n,"clone",function(){return clone}),r.d(n,"copy",function(){return copy}),r.d(n,"fromValues",function(){return fromValues}),r.d(n,"set",function(){return set}),r.d(n,"identity",function(){return identity}),r.d(n,"transpose",function(){return transpose}),r.d(n,"invert",function(){return invert}),r.d(n,"adjoint",function(){return adjoint}),r.d(n,"determinant",function(){return determinant}),r.d(n,"multiply",function(){return multiply}),r.d(n,"translate",function(){return translate}),r.d(n,"scale",function(){return mat4_scale}),r.d(n,"rotate",function(){return rotate}),r.d(n,"rotateX",function(){return rotateX}),r.d(n,"rotateY",function(){return rotateY}),r.d(n,"rotateZ",function(){return rotateZ}),r.d(n,"fromTranslation",function(){return fromTranslation}),r.d(n,"fromScaling",function(){return fromScaling}),r.d(n,"fromRotation",function(){return fromRotation}),r.d(n,"fromXRotation",function(){return fromXRotation}),r.d(n,"fromYRotation",function(){return fromYRotation}),r.d(n,"fromZRotation",function(){return fromZRotation}),r.d(n,"fromRotationTranslation",function(){return fromRotationTranslation}),r.d(n,"fromQuat2",function(){return fromQuat2}),r.d(n,"getTranslation",function(){return getTranslation}),r.d(n,"getScaling",function(){return getScaling}),r.d(n,"getRotation",function(){return getRotation}),r.d(n,"fromRotationTranslationScale",function(){return fromRotationTranslationScale}),r.d(n,"fromRotationTranslationScaleOrigin",function(){return fromRotationTranslationScaleOrigin}),r.d(n,"fromQuat",function(){return fromQuat}),r.d(n,"frustum",function(){return frustum}),r.d(n,"perspective",function(){return perspective}),r.d(n,"perspectiveFromFieldOfView",function(){return perspectiveFromFieldOfView}),r.d(n,"ortho",function(){return ortho}),r.d(n,"lookAt",function(){return lookAt}),r.d(n,"targetTo",function(){return targetTo}),r.d(n,"str",function(){return str}),r.d(n,"frob",function(){return frob}),r.d(n,"add",function(){return add}),r.d(n,"subtract",function(){return subtract}),r.d(n,"multiplyScalar",function(){return multiplyScalar}),r.d(n,"multiplyScalarAndAdd",function(){return multiplyScalarAndAdd}),r.d(n,"exactEquals",function(){return exactEquals}),r.d(n,"equals",function(){return mat4_equals}),r.d(n,"mul",function(){return b}),r.d(n,"sub",function(){return M});var a={};r.r(a),r.d(a,"create",function(){return vec4_create}),r.d(a,"clone",function(){return vec4_clone}),r.d(a,"fromValues",function(){return vec4_fromValues}),r.d(a,"copy",function(){return vec4_copy}),r.d(a,"set",function(){return vec4_set}),r.d(a,"add",function(){return vec4_add}),r.d(a,"subtract",function(){return vec4_subtract}),r.d(a,"multiply",function(){return vec4_multiply}),r.d(a,"divide",function(){return divide}),r.d(a,"ceil",function(){return ceil}),r.d(a,"floor",function(){return floor}),r.d(a,"min",function(){return vec4_min}),r.d(a,"max",function(){return vec4_max}),r.d(a,"round",function(){return round}),r.d(a,"scale",function(){return vec4_scale}),r.d(a,"scaleAndAdd",function(){return scaleAndAdd}),r.d(a,"distance",function(){return distance}),r.d(a,"squaredDistance",function(){return squaredDistance}),r.d(a,"length",function(){return vec4_length}),r.d(a,"squaredLength",function(){return squaredLength}),r.d(a,"negate",function(){return negate}),r.d(a,"inverse",function(){return inverse}),r.d(a,"normalize",function(){return normalize}),r.d(a,"dot",function(){return dot}),r.d(a,"lerp",function(){return lerp}),r.d(a,"random",function(){return random}),r.d(a,"transformMat4",function(){return transformMat4}),r.d(a,"transformQuat",function(){return transformQuat}),r.d(a,"str",function(){return vec4_str}),r.d(a,"exactEquals",function(){return vec4_exactEquals}),r.d(a,"equals",function(){return vec4_equals}),r.d(a,"sub",function(){return T}),r.d(a,"mul",function(){return P}),r.d(a,"div",function(){return k}),r.d(a,"dist",function(){return I}),r.d(a,"sqrDist",function(){return F}),r.d(a,"len",function(){return E}),r.d(a,"sqrLen",function(){return C}),r.d(a,"forEach",function(){return N});var o=r(5),i=r.n(o),u=r(9),s=r.n(u),c=r(10),f=r.n(c),l=r(0),h=r.n(l),d=r(2),p=r.n(d),y=r(14),v=r(15);function getRsysFromTile(t,e,r){return{center:{x:(t+.5)/Math.pow(2,r)*2-1,y:2*(1-(e+.5)/Math.pow(2,r))-1},scale:1/Math.pow(2,r)}}var m=r(6),g=r.n(m),x=1e-6,_="undefined"!=typeof Float32Array?Float32Array:Array,w=Math.random;Math.PI;function create(){var t=new _(16);return _!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function clone(t){var e=new _(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function copy(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function fromValues(t,e,r,n,a,o,i,u,s,c,f,l,h,d,p,y){var v=new _(16);return v[0]=t,v[1]=e,v[2]=r,v[3]=n,v[4]=a,v[5]=o,v[6]=i,v[7]=u,v[8]=s,v[9]=c,v[10]=f,v[11]=l,v[12]=h,v[13]=d,v[14]=p,v[15]=y,v}function set(t,e,r,n,a,o,i,u,s,c,f,l,h,d,p,y,v){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t[9]=f,t[10]=l,t[11]=h,t[12]=d,t[13]=p,t[14]=y,t[15]=v,t}function identity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function transpose(t,e){if(t===e){var r=e[1],n=e[2],a=e[3],o=e[6],i=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function invert(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],p=e[12],y=e[13],v=e[14],m=e[15],g=r*u-n*i,x=r*s-a*i,_=r*c-o*i,w=n*s-a*u,b=n*c-o*u,M=a*c-o*s,T=f*y-l*p,P=f*v-h*p,k=f*m-d*p,I=l*v-h*y,F=l*m-d*y,E=h*m-d*v,C=g*E-x*F+_*I+w*k-b*P+M*T;return C?(C=1/C,t[0]=(u*E-s*F+c*I)*C,t[1]=(a*F-n*E-o*I)*C,t[2]=(y*M-v*b+m*w)*C,t[3]=(h*b-l*M-d*w)*C,t[4]=(s*k-i*E-c*P)*C,t[5]=(r*E-a*k+o*P)*C,t[6]=(v*_-p*M-m*x)*C,t[7]=(f*M-h*_+d*x)*C,t[8]=(i*F-u*k+c*T)*C,t[9]=(n*k-r*F-o*T)*C,t[10]=(p*b-y*_+m*g)*C,t[11]=(l*_-f*b-d*g)*C,t[12]=(u*P-i*I-s*T)*C,t[13]=(r*I-n*P+a*T)*C,t[14]=(y*x-p*w-v*g)*C,t[15]=(f*w-l*x+h*g)*C,t):null}function adjoint(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],p=e[12],y=e[13],v=e[14],m=e[15];return t[0]=u*(h*m-d*v)-l*(s*m-c*v)+y*(s*d-c*h),t[1]=-(n*(h*m-d*v)-l*(a*m-o*v)+y*(a*d-o*h)),t[2]=n*(s*m-c*v)-u*(a*m-o*v)+y*(a*c-o*s),t[3]=-(n*(s*d-c*h)-u*(a*d-o*h)+l*(a*c-o*s)),t[4]=-(i*(h*m-d*v)-f*(s*m-c*v)+p*(s*d-c*h)),t[5]=r*(h*m-d*v)-f*(a*m-o*v)+p*(a*d-o*h),t[6]=-(r*(s*m-c*v)-i*(a*m-o*v)+p*(a*c-o*s)),t[7]=r*(s*d-c*h)-i*(a*d-o*h)+f*(a*c-o*s),t[8]=i*(l*m-d*y)-f*(u*m-c*y)+p*(u*d-c*l),t[9]=-(r*(l*m-d*y)-f*(n*m-o*y)+p*(n*d-o*l)),t[10]=r*(u*m-c*y)-i*(n*m-o*y)+p*(n*c-o*u),t[11]=-(r*(u*d-c*l)-i*(n*d-o*l)+f*(n*c-o*u)),t[12]=-(i*(l*v-h*y)-f*(u*v-s*y)+p*(u*h-s*l)),t[13]=r*(l*v-h*y)-f*(n*v-a*y)+p*(n*h-a*l),t[14]=-(r*(u*v-s*y)-i*(n*v-a*y)+p*(n*s-a*u)),t[15]=r*(u*h-s*l)-i*(n*h-a*l)+f*(n*s-a*u),t}function determinant(t){var e=t[0],r=t[1],n=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],c=t[8],f=t[9],l=t[10],h=t[11],d=t[12],p=t[13],y=t[14],v=t[15];return(e*i-r*o)*(l*v-h*y)-(e*u-n*o)*(f*v-h*p)+(e*s-a*o)*(f*y-l*p)+(r*u-n*i)*(c*v-h*d)-(r*s-a*i)*(c*y-l*d)+(n*s-a*u)*(c*p-f*d)}function multiply(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],d=e[10],p=e[11],y=e[12],v=e[13],m=e[14],g=e[15],x=r[0],_=r[1],w=r[2],b=r[3];return t[0]=x*n+_*u+w*l+b*y,t[1]=x*a+_*s+w*h+b*v,t[2]=x*o+_*c+w*d+b*m,t[3]=x*i+_*f+w*p+b*g,x=r[4],_=r[5],w=r[6],b=r[7],t[4]=x*n+_*u+w*l+b*y,t[5]=x*a+_*s+w*h+b*v,t[6]=x*o+_*c+w*d+b*m,t[7]=x*i+_*f+w*p+b*g,x=r[8],_=r[9],w=r[10],b=r[11],t[8]=x*n+_*u+w*l+b*y,t[9]=x*a+_*s+w*h+b*v,t[10]=x*o+_*c+w*d+b*m,t[11]=x*i+_*f+w*p+b*g,x=r[12],_=r[13],w=r[14],b=r[15],t[12]=x*n+_*u+w*l+b*y,t[13]=x*a+_*s+w*h+b*v,t[14]=x*o+_*c+w*d+b*m,t[15]=x*i+_*f+w*p+b*g,t}function translate(t,e,r){var n=r[0],a=r[1],o=r[2],i=void 0,u=void 0,s=void 0,c=void 0,f=void 0,l=void 0,h=void 0,d=void 0,p=void 0,y=void 0,v=void 0,m=void 0;return e===t?(t[12]=e[0]*n+e[4]*a+e[8]*o+e[12],t[13]=e[1]*n+e[5]*a+e[9]*o+e[13],t[14]=e[2]*n+e[6]*a+e[10]*o+e[14],t[15]=e[3]*n+e[7]*a+e[11]*o+e[15]):(i=e[0],u=e[1],s=e[2],c=e[3],f=e[4],l=e[5],h=e[6],d=e[7],p=e[8],y=e[9],v=e[10],m=e[11],t[0]=i,t[1]=u,t[2]=s,t[3]=c,t[4]=f,t[5]=l,t[6]=h,t[7]=d,t[8]=p,t[9]=y,t[10]=v,t[11]=m,t[12]=i*n+f*a+p*o+e[12],t[13]=u*n+l*a+y*o+e[13],t[14]=s*n+h*a+v*o+e[14],t[15]=c*n+d*a+m*o+e[15]),t}function mat4_scale(t,e,r){var n=r[0],a=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function rotate(t,e,r,n){var a,o,i,u,s,c,f,l,h,d,p,y,v,m,g,_,w,b,M,T,P,k,I,F,E=n[0],C=n[1],N=n[2],V=Math.sqrt(E*E+C*C+N*N);return V<x?null:(E*=V=1/V,C*=V,N*=V,a=Math.sin(r),i=1-(o=Math.cos(r)),u=e[0],s=e[1],c=e[2],f=e[3],l=e[4],h=e[5],d=e[6],p=e[7],y=e[8],v=e[9],m=e[10],g=e[11],_=E*E*i+o,w=C*E*i+N*a,b=N*E*i-C*a,M=E*C*i-N*a,T=C*C*i+o,P=N*C*i+E*a,k=E*N*i+C*a,I=C*N*i-E*a,F=N*N*i+o,t[0]=u*_+l*w+y*b,t[1]=s*_+h*w+v*b,t[2]=c*_+d*w+m*b,t[3]=f*_+p*w+g*b,t[4]=u*M+l*T+y*P,t[5]=s*M+h*T+v*P,t[6]=c*M+d*T+m*P,t[7]=f*M+p*T+g*P,t[8]=u*k+l*I+y*F,t[9]=s*k+h*I+v*F,t[10]=c*k+d*I+m*F,t[11]=f*k+p*I+g*F,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function rotateX(t,e,r){var n=Math.sin(r),a=Math.cos(r),o=e[4],i=e[5],u=e[6],s=e[7],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*a+c*n,t[5]=i*a+f*n,t[6]=u*a+l*n,t[7]=s*a+h*n,t[8]=c*a-o*n,t[9]=f*a-i*n,t[10]=l*a-u*n,t[11]=h*a-s*n,t}function rotateY(t,e,r){var n=Math.sin(r),a=Math.cos(r),o=e[0],i=e[1],u=e[2],s=e[3],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a-c*n,t[1]=i*a-f*n,t[2]=u*a-l*n,t[3]=s*a-h*n,t[8]=o*n+c*a,t[9]=i*n+f*a,t[10]=u*n+l*a,t[11]=s*n+h*a,t}function rotateZ(t,e,r){var n=Math.sin(r),a=Math.cos(r),o=e[0],i=e[1],u=e[2],s=e[3],c=e[4],f=e[5],l=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a+c*n,t[1]=i*a+f*n,t[2]=u*a+l*n,t[3]=s*a+h*n,t[4]=c*a-o*n,t[5]=f*a-i*n,t[6]=l*a-u*n,t[7]=h*a-s*n,t}function fromTranslation(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function fromScaling(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function fromRotation(t,e,r){var n,a,o,i=r[0],u=r[1],s=r[2],c=Math.sqrt(i*i+u*u+s*s);return c<x?null:(i*=c=1/c,u*=c,s*=c,n=Math.sin(e),o=1-(a=Math.cos(e)),t[0]=i*i*o+a,t[1]=u*i*o+s*n,t[2]=s*i*o-u*n,t[3]=0,t[4]=i*u*o-s*n,t[5]=u*u*o+a,t[6]=s*u*o+i*n,t[7]=0,t[8]=i*s*o+u*n,t[9]=u*s*o-i*n,t[10]=s*s*o+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function fromXRotation(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function fromYRotation(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function fromZRotation(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function fromRotationTranslation(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],u=n+n,s=a+a,c=o+o,f=n*u,l=n*s,h=n*c,d=a*s,p=a*c,y=o*c,v=i*u,m=i*s,g=i*c;return t[0]=1-(d+y),t[1]=l+g,t[2]=h-m,t[3]=0,t[4]=l-g,t[5]=1-(f+y),t[6]=p+v,t[7]=0,t[8]=h+m,t[9]=p-v,t[10]=1-(f+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function fromQuat2(t,e){var r=new _(3),n=-e[0],a=-e[1],o=-e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=n*n+a*a+o*o+i*i;return l>0?(r[0]=2*(u*i+f*n+s*o-c*a)/l,r[1]=2*(s*i+f*a+c*n-u*o)/l,r[2]=2*(c*i+f*o+u*a-s*n)/l):(r[0]=2*(u*i+f*n+s*o-c*a),r[1]=2*(s*i+f*a+c*n-u*o),r[2]=2*(c*i+f*o+u*a-s*n)),fromRotationTranslation(t,e,r),t}function getTranslation(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function getScaling(t,e){var r=e[0],n=e[1],a=e[2],o=e[4],i=e[5],u=e[6],s=e[8],c=e[9],f=e[10];return t[0]=Math.sqrt(r*r+n*n+a*a),t[1]=Math.sqrt(o*o+i*i+u*u),t[2]=Math.sqrt(s*s+c*c+f*f),t}function getRotation(t,e){var r=e[0]+e[5]+e[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t}function fromRotationTranslationScale(t,e,r,n){var a=e[0],o=e[1],i=e[2],u=e[3],s=a+a,c=o+o,f=i+i,l=a*s,h=a*c,d=a*f,p=o*c,y=o*f,v=i*f,m=u*s,g=u*c,x=u*f,_=n[0],w=n[1],b=n[2];return t[0]=(1-(p+v))*_,t[1]=(h+x)*_,t[2]=(d-g)*_,t[3]=0,t[4]=(h-x)*w,t[5]=(1-(l+v))*w,t[6]=(y+m)*w,t[7]=0,t[8]=(d+g)*b,t[9]=(y-m)*b,t[10]=(1-(l+p))*b,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function fromRotationTranslationScaleOrigin(t,e,r,n,a){var o=e[0],i=e[1],u=e[2],s=e[3],c=o+o,f=i+i,l=u+u,h=o*c,d=o*f,p=o*l,y=i*f,v=i*l,m=u*l,g=s*c,x=s*f,_=s*l,w=n[0],b=n[1],M=n[2],T=a[0],P=a[1],k=a[2],I=(1-(y+m))*w,F=(d+_)*w,E=(p-x)*w,C=(d-_)*b,N=(1-(h+m))*b,V=(v+g)*b,S=(p+x)*M,A=(v-g)*M,D=(1-(h+y))*M;return t[0]=I,t[1]=F,t[2]=E,t[3]=0,t[4]=C,t[5]=N,t[6]=V,t[7]=0,t[8]=S,t[9]=A,t[10]=D,t[11]=0,t[12]=r[0]+T-(I*T+C*P+S*k),t[13]=r[1]+P-(F*T+N*P+A*k),t[14]=r[2]+k-(E*T+V*P+D*k),t[15]=1,t}function fromQuat(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=r+r,u=n+n,s=a+a,c=r*i,f=n*i,l=n*u,h=a*i,d=a*u,p=a*s,y=o*i,v=o*u,m=o*s;return t[0]=1-l-p,t[1]=f+m,t[2]=h-v,t[3]=0,t[4]=f-m,t[5]=1-c-p,t[6]=d+y,t[7]=0,t[8]=h+v,t[9]=d-y,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function frustum(t,e,r,n,a,o,i){var u=1/(r-e),s=1/(a-n),c=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(r+e)*u,t[9]=(a+n)*s,t[10]=(i+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*c,t[15]=0,t}function perspective(t,e,r,n,a){var o=1/Math.tan(e/2),i=void 0;return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(i=1/(n-a),t[10]=(a+n)*i,t[14]=2*a*n*i):(t[10]=-1,t[14]=-2*n),t}function perspectiveFromFieldOfView(t,e,r,n){var a=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(i+u),c=2/(a+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(i-u)*s*.5,t[9]=(a-o)*c*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function ortho(t,e,r,n,a,o,i){var u=1/(e-r),s=1/(n-a),c=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*u,t[13]=(a+n)*s,t[14]=(i+o)*c,t[15]=1,t}function lookAt(t,e,r,n){var a=void 0,o=void 0,i=void 0,u=void 0,s=void 0,c=void 0,f=void 0,l=void 0,h=void 0,d=void 0,p=e[0],y=e[1],v=e[2],m=n[0],g=n[1],_=n[2],w=r[0],b=r[1],M=r[2];return Math.abs(p-w)<x&&Math.abs(y-b)<x&&Math.abs(v-M)<x?identity(t):(f=p-w,l=y-b,h=v-M,a=g*(h*=d=1/Math.sqrt(f*f+l*l+h*h))-_*(l*=d),o=_*(f*=d)-m*h,i=m*l-g*f,(d=Math.sqrt(a*a+o*o+i*i))?(a*=d=1/d,o*=d,i*=d):(a=0,o=0,i=0),u=l*i-h*o,s=h*a-f*i,c=f*o-l*a,(d=Math.sqrt(u*u+s*s+c*c))?(u*=d=1/d,s*=d,c*=d):(u=0,s=0,c=0),t[0]=a,t[1]=u,t[2]=f,t[3]=0,t[4]=o,t[5]=s,t[6]=l,t[7]=0,t[8]=i,t[9]=c,t[10]=h,t[11]=0,t[12]=-(a*p+o*y+i*v),t[13]=-(u*p+s*y+c*v),t[14]=-(f*p+l*y+h*v),t[15]=1,t)}function targetTo(t,e,r,n){var a=e[0],o=e[1],i=e[2],u=n[0],s=n[1],c=n[2],f=a-r[0],l=o-r[1],h=i-r[2],d=f*f+l*l+h*h;d>0&&(f*=d=1/Math.sqrt(d),l*=d,h*=d);var p=s*h-c*l,y=c*f-u*h,v=u*l-s*f;return(d=p*p+y*y+v*v)>0&&(p*=d=1/Math.sqrt(d),y*=d,v*=d),t[0]=p,t[1]=y,t[2]=v,t[3]=0,t[4]=l*v-h*y,t[5]=h*p-f*v,t[6]=f*y-l*p,t[7]=0,t[8]=f,t[9]=l,t[10]=h,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t}function str(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function frob(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function add(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function subtract(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function multiplyScalar(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function multiplyScalarAndAdd(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function exactEquals(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function mat4_equals(t,e){var r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=t[9],h=t[10],d=t[11],p=t[12],y=t[13],v=t[14],m=t[15],g=e[0],_=e[1],w=e[2],b=e[3],M=e[4],T=e[5],P=e[6],k=e[7],I=e[8],F=e[9],E=e[10],C=e[11],N=e[12],V=e[13],S=e[14],A=e[15];return Math.abs(r-g)<=x*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(n-_)<=x*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(a-w)<=x*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(o-b)<=x*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(i-M)<=x*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(u-T)<=x*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(s-P)<=x*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(c-k)<=x*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(f-I)<=x*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(l-F)<=x*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(h-E)<=x*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(d-C)<=x*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-N)<=x*Math.max(1,Math.abs(p),Math.abs(N))&&Math.abs(y-V)<=x*Math.max(1,Math.abs(y),Math.abs(V))&&Math.abs(v-S)<=x*Math.max(1,Math.abs(v),Math.abs(S))&&Math.abs(m-A)<=x*Math.max(1,Math.abs(m),Math.abs(A))}var b=multiply,M=subtract;function vec4_create(){var t=new _(4);return _!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function vec4_clone(t){var e=new _(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function vec4_fromValues(t,e,r,n){var a=new _(4);return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a}function vec4_copy(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function vec4_set(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t}function vec4_add(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function vec4_subtract(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function vec4_multiply(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function divide(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function ceil(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function floor(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function vec4_min(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function vec4_max(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function round(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function vec4_scale(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function scaleAndAdd(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function distance(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(r*r+n*n+a*a+o*o)}function squaredDistance(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return r*r+n*n+a*a+o*o}function vec4_length(t){var e=t[0],r=t[1],n=t[2],a=t[3];return Math.sqrt(e*e+r*r+n*n+a*a)}function squaredLength(t){var e=t[0],r=t[1],n=t[2],a=t[3];return e*e+r*r+n*n+a*a}function negate(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function inverse(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function normalize(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=r*r+n*n+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=r*i,t[1]=n*i,t[2]=a*i,t[3]=o*i),t}function dot(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function lerp(t,e,r,n){var a=e[0],o=e[1],i=e[2],u=e[3];return t[0]=a+n*(r[0]-a),t[1]=o+n*(r[1]-o),t[2]=i+n*(r[2]-i),t[3]=u+n*(r[3]-u),t}function random(t,e){var r,n,a,o,i,u;e=e||1;do{i=(r=2*w()-1)*r+(n=2*w()-1)*n}while(i>=1);do{u=(a=2*w()-1)*a+(o=2*w()-1)*o}while(u>=1);var s=Math.sqrt((1-i)/u);return t[0]=e*r,t[1]=e*n,t[2]=e*a*s,t[3]=e*o*s,t}function transformMat4(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3];return t[0]=r[0]*n+r[4]*a+r[8]*o+r[12]*i,t[1]=r[1]*n+r[5]*a+r[9]*o+r[13]*i,t[2]=r[2]*n+r[6]*a+r[10]*o+r[14]*i,t[3]=r[3]*n+r[7]*a+r[11]*o+r[15]*i,t}function transformQuat(t,e,r){var n=e[0],a=e[1],o=e[2],i=r[0],u=r[1],s=r[2],c=r[3],f=c*n+u*o-s*a,l=c*a+s*n-i*o,h=c*o+i*a-u*n,d=-i*n-u*a-s*o;return t[0]=f*c+d*-i+l*-s-h*-u,t[1]=l*c+d*-u+h*-i-f*-s,t[2]=h*c+d*-s+f*-u-l*-i,t[3]=e[3],t}function vec4_str(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function vec4_exactEquals(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function vec4_equals(t,e){var r=t[0],n=t[1],a=t[2],o=t[3],i=e[0],u=e[1],s=e[2],c=e[3];return Math.abs(r-i)<=x*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-u)<=x*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-s)<=x*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-c)<=x*Math.max(1,Math.abs(o),Math.abs(c))}var T=vec4_subtract,P=vec4_multiply,k=divide,I=distance,F=squaredDistance,E=vec4_length,C=squaredLength,N=function(){var t=vec4_create();return function(e,r,n,a,o,i){var u=void 0,s=void 0;for(r||(r=4),n||(n=0),s=a?Math.min(a*r+n,e.length):e.length,u=n;u<s;u+=r)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}(),V=function average(t){for(var e=0,r=0;r<t.length;r++)e+=t[r];return e/t.length},S=r(3),A=r.n(S),D=r(1),O=r.n(D),L=r(4),R=r.n(L),B=r(16),q=function(t){function CartoError(t){var e;if(h()(this,CartoError),!t)throw Error("Invalid CartoError, a message is mandatory");if(!t.message)throw Error("Invalid CartoError, a message is mandatory");if(!t.type)throw Error("Invalid CartoError, a type is mandatory");return(e=A()(this,O()(CartoError).call(this,"".concat(t.type," ").concat(t.message)))).name="CartoError",e.type=t.type,e.originalError=t,e}return R()(CartoError,t),CartoError}(r.n(B)()(Error)),W=function(t){function CartoValidationError(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G.DEFAULT;return h()(this,CartoValidationError),(e=A()(this,O()(CartoValidationError).call(this,{message:t,type:r}))).name="CartoValidationError",e}return R()(CartoValidationError,t),CartoValidationError}(q),G={DEFAULT:"[Error]",MISSING_REQUIRED:"[Missing required property]",INCORRECT_TYPE:"[Property with an incorrect type]",INCORRECT_VALUE:"[Incorrect value]",TOO_MANY_ARGS:"[Too many arguments]",NOT_ENOUGH_ARGS:"[Not enough arguments]",WRONG_NUMBER_ARGS:"[Wrong number of arguments]"},Z={UNKNOWN:"unknown",POINT:"point",LINE:"line",POLYGON:"polygon"};function geometry_sub(t,e){var r=i()(t,2),n=r[0],a=r[1],o=i()(e,2);return[n-o[0],a-o[1]]}function geometry_dot(t,e){var r=i()(t,2),n=r[0],a=r[1],o=i()(e,2);return n*o[0]+a*o[1]}function perpendicular(t){var e=i()(t,2),r=e[0];return[-e[1],r]}function getLineNormal(t,e){var r=function geometry_normalize(t,e){var r=Math.hypot(t,e);return[t/r,e/r]}(t[0]-e[0],t[1]-e[1]);return[-r[1],r[0]]}function getJoinNormal(t,e){var r=[t[1],-t[0]],n=[-e[1],e[0]],a=n[0]*r[1]-n[1]*r[0],o=n[0]*r[0]+n[1]*r[1],i=Math.abs(a);return{turnLeft:a>0,joinNormal:!(i<.866&&o>.5)&&neg([(r[0]+n[0])/i,(r[1]+n[1])/i])}}function neg(t){return[-t[0],-t[1]]}function halfPlaneSign(t,e,r){return(t.x-r.x)*(e.y-r.y)-(e.x-r.x)*(t.y-r.y)}function equalPoints(t,e){return t.x===e.x&&t.y===e.y}function computeCentroids(t,e){switch(e){case Z.POINT:return function _computeCentroidsForPoints(t){for(var e=[],r=0;r<t.vertices.length/6;r++){var n=6*r,a=n+6,o=t.vertices.slice(n,a),u=i()(o,6),s=u[4],c=u[5];e.push({x:s,y:c})}return e}(t);case Z.LINE:case Z.POLYGON:return function _computeCentroidsForLinesOrPolygons(t,e){var r=[],n=0;return t.breakpoints.forEach(function(a){var o=t.vertices.slice(n,a),u=null;u=e===Z.LINE?function _centroidForLines(t){for(var e=[],r=[],n=0;n<t.length/6;n++){var a=6*n,o=a+6,u=t.slice(a,o),s=i()(u,6),c=s[0],f=s[1],l=s[2],h=s[3],d=s[4],p=s[5],y=c===l&&f===h,v=l===d&&h===p;if(!y||!v){var m=[c,f],g=y?[d,p]:[l,h];e.push(m[0]),e.push(g[0]),r.push(m[1]),r.push(g[1])}}return{x:V(e),y:V(r)}}(o):function _centroidForPolygons(t){for(var e=[],r=[],n=[],a=0;a<t.length/6;a++){var o=6*a,u=o+6,s=t.slice(o,u),c=i()(s,6),f=c[0],l=c[1],h=c[2],d=c[3],p=c[4],y=c[5],v=[[f,l],[h,d],[p,y]],m=triangleArea(v);if(m>0){var g=V([f,h,p]),x=V([l,d,y]);e.push(g*m),r.push(x*m),n.push(m)}}var _=_sumArray(n);return{x:_sumArray(e)/_,y:_sumArray(r)/_}}(o),r.push(u),n=a}),r}(t,e);default:throw new W("Invalid type argument, decoded geometry must have a point, line or polygon type.",G.INCORRECT_VALUE)}}function _sumArray(t){return t.reduce(function(t,e){return t+e},0)}function triangleArea(t){var e=i()(t[0],2),r=e[0],n=e[1],a=i()(t[1],2),o=a[0],u=a[1],s=i()(t[2],2),c=s[0],f=s[1];return Math.abs((r-c)*(u-n)-(r-o)*(f-n))/2}function _updateAABBForGeometry(t,e,r){switch(r){case Z.LINE:return function _updateAABBLine(t,e){for(var r=t,n=t.length,a=0;a<n;a+=2)e.minx=Math.min(e.minx,r[a+0]),e.miny=Math.min(e.miny,r[a+1]),e.maxx=Math.max(e.maxx,r[a+0]),e.maxy=Math.max(e.maxy,r[a+1]);return e}(t,e);case Z.POLYGON:return function _updateAABBPolygon(t,e){for(var r=[t.flat,t.holes[0]||t.flat.length/2],n=r[0],a=r[1],o=0;o<a;o++)e.minx=Math.min(e.minx,n[2*o+0]),e.miny=Math.min(e.miny,n[2*o+1]),e.maxx=Math.max(e.maxx,n[2*o+0]),e.maxy=Math.max(e.maxy,n[2*o+1]);return e}(t,e)}}var j={intersect:function geometry_intersect(t,e,r,n){var a=t,o=r,i=geometry_sub(e,t),u=geometry_sub(n,r),s=perpendicular(i),c=perpendicular(u),f=geometry_dot(geometry_sub(o,a),c)/geometry_dot(i,c),l=geometry_dot(geometry_sub(a,o),s)/geometry_dot(u,s);if(f>=0&&f<=1&&l>=0&&l<=1)return[a[0]+f*i[0],a[1]+f*i[1]]},sub:geometry_sub,dot:geometry_dot,perpendicular:perpendicular,getLineNormal:getLineNormal,getJoinNormal:getJoinNormal,neg:neg,halfPlaneSign:halfPlaneSign,pointInTriangle:function pointInTriangle(t,e,r,n){if(equalPoints(e,r)||equalPoints(r,n)||equalPoints(n,e))return!1;var a=halfPlaneSign(t,e,r)<0,o=halfPlaneSign(t,r,n)<0,i=halfPlaneSign(t,n,e)<0;return a===o&&o===i},equalPoints:equalPoints,pointInCircle:function pointInCircle(t,e,r){var n=t.x-e.x,a=t.y-e.y;return n*n+a*a<=r*r},pointInRectangle:function pointInRectangle(t,e){if(null===e)return!1;var r=t.x.toFixed(2),n=t.y.toFixed(2);return e.minx<=r&&r<=e.maxx&&e.miny<=n&&n<=e.maxy}},U=function Polygon(){h()(this,Polygon),this.flat=[],this.holes=[],this.clipped=[],this.clippedType=[]};function decodeLines(t,e){var r=[];return t.map(function(t){var n=[];t.map(function(t){n.push([2*t.x/e-1,2*(1-t.y/e)-1])}),r.push.apply(r,g()(function clipLine(t){var e=[],r=[];function clipType(t){for(var e=0,r=0;r<Y;r++)e|=z[r].inside(t)?0:1<<r;return e}function intersect(t,e,r){for(var n=0;n<Y;n++){var a=1<<n;if(r&a){var o=z[n].intersect(t,e);return r=clipType(o)&~a,[o,r]}}}for(var n=t[0],a=clipType(n),o=1;o<t.length;++o){for(var u=t[o],s=clipType(u),c=s,f=u;;){if(!(a|s)){var l,h;if((l=e).push.apply(l,g()(n)),s!==c)(h=e).push.apply(h,g()(u)),o<t.length-1&&(r.push(e),e=[]);else if(o===t.length-1){var d;(d=e).push.apply(d,g()(u))}break}if(a&s)break;if(a){var p=intersect(n,u,a),y=i()(p,2);n=y[0],a=y[1]}else{var v=intersect(n,u,s),m=i()(v,2);u=m[0],s=m[1]}}n=f,a=c}(e=function _removeDuplicatedVerticesOnLine(t){for(var e,r,n=[],a=0;a<t.length;a+=2){var o=t[a],i=t[a+1];o===e&&i===r||(n.push(o,i),e=o,r=i)}return n}(e)).length>0&&r.push(e);return r}(n)))}),r}function decodePolygons(t,e){var r,n=null,a=[];return t.forEach(function(t){var o=function signedPolygonArea(t){for(var e=0,r=0;r<t.length;r++){var n=(r+1)%t.length;e+=t[r].x*t[n].y,e-=t[n].x*t[r].y}return e/2}(t);if(0!==o){void 0===r&&(r=o>0);var i=r?o>0:o<0,u=function _getPreClippedVertices(t,e){return t.map(function(t){var r=t.x,n=t.y;return[r=2*r/e-1,n=2*(1-n/e)-1]})}(t,e);i&&(n&&a.push(n),n=new U),n=function clipPolygon(t,e,r){for(var n={},a=function _loop(e){for(var r=[],a={},o=function setClippedType(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=0;e>=0&&(o=n[e]||0),r>=0&&(o|=1<<r),o&&(a[t]=o)},i=0;i<t.length-1;i++){var u=t[i],s=t[i+1],c=z[e].inside(u),f=z[e].inside(s);if(c&&f)o(r.length,i+1),r.push(s);else if(c){var l=z[e].intersect(u,s);o(r.length,i+1,e),r.push(l)}else if(f){var h=z[e].intersect(u,s);o(r.length,i,e),r.push(h),o(r.length,i+1),r.push(s)}}r.length&&(a[0]&&(a[r.length]=a[0]),r.push(r[0])),t=r,n=a},o=0;o<Y;o++)a(o);t.length>=4&&(r&&e.holes.push(e.flat.length/2),t.forEach(function(t){e.flat.push(t[0],t[1])}),Object.keys(n).forEach(function(t){e.clipped.push(2*Number(t)),e.clippedType.push(n[t])}));return e}(u,n,!i)}}),n&&a.push(n),a}var z=[{inside:function inside(t){return t[0]<=1},intersect:function intersect(t,e){return j.intersect(t,e,[1,-100],[1,100])}},{inside:function inside(t){return t[1]<=1},intersect:function intersect(t,e){return j.intersect(t,e,[-100,1],[100,1])}},{inside:function inside(t){return t[0]>=-1},intersect:function intersect(t,e){return j.intersect(t,e,[-1,-100],[-1,100])}},{inside:function inside(t){return t[1]>=-1},intersect:function intersect(t,e){return j.intersect(t,e,[-100,-1],[100,-1])}}],Y=z.length;var Q=function(t){function CartoRuntimeError(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H.DEFAULT;return h()(this,CartoRuntimeError),(e=A()(this,O()(CartoRuntimeError).call(this,{message:t,type:r}))).name="CartoRuntimeError",e}return R()(CartoRuntimeError,t),CartoRuntimeError}(q),H={DEFAULT:"[Error]",NOT_SUPPORTED:"[Not supported]",WEB_GL:"[WebGL]",MVT:"[MVT]"},$=function(){function BaseCodec(t,e){h()(this,BaseCodec),t&&e&&(this._baseName=t.baseName(e))}return p()(BaseCodec,[{key:"isRange",value:function isRange(){return!1}},{key:"isIdentity",value:function isIdentity(){return!1}},{key:"sourceToInternal",value:function sourceToInternal(t,e){return e}},{key:"internalToExternal",value:function internalToExternal(t,e){return e}},{key:"externalToSource",value:function externalToSource(t,e){return e}},{key:"sourceToExternal",value:function sourceToExternal(t,e){return this.internalToExternal(t,this.sourceToInternal(t,e))}},{key:"externalToInternal",value:function externalToInternal(t,e){return this.sourceToInternal(t,this.externalToSource(t,e))}},{key:"inlineInternalMatch",value:function inlineInternalMatch(t,e){return"".concat(t)}}]),BaseCodec}(),X=function(t){function IdentityCodec(){return h()(this,IdentityCodec),A()(this,O()(IdentityCodec).apply(this,arguments))}return R()(IdentityCodec,t),p()(IdentityCodec,[{key:"isIdentity",value:function isIdentity(){return!0}},{key:"sourceToInternal",value:function sourceToInternal(t,e){return e}},{key:"internalToExternal",value:function internalToExternal(t,e){return e}},{key:"sourceToExternal",value:function sourceToExternal(t,e){return e}},{key:"externalToSource",value:function externalToSource(t,e){return e}},{key:"externalToInternal",value:function externalToInternal(t,e){return e}}]),IdentityCodec}($),J=4096,K="cartodb_id",tt=function(){function Metadata(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{properties:{}},r=e.properties,n=e.featureCount,a=e.sample,o=e.geomType,i=e.isAggregated,u=e.idProperty,s=e.extent;h()(this,Metadata),this.properties=r,this.featureCount=n,this.sample=a,this.geomType=o,this.isAggregated=i,this.idProperty=u||K,this.properties.hasOwnProperty(this.idProperty)||(this.properties[this.idProperty]={type:"number"}),this.categoryToID=new Map,this.IDToCategory=new Map,this.numCategories=0,this.extent=s||J,Object.values(r).map(function(e){e.categories=e.categories||[],e.categories.map(function(r){return t.categorizeString(e,r.name,!0)})}),this.propertyKeys=Object.keys(r)}return p()(Metadata,[{key:"setCodecs",value:function setCodecs(){throw new Q(\'You must call "setCodecs" once you have determined the proper subclass\')}},{key:"categorizeString",value:function categorizeString(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0===e&&(e=null),this.categoryToID.has(e))return this.categoryToID.get(e);r||null===e||this.properties[t].categories.push({name:e,frequency:Number.NaN});var n=null===e?-(1<<24):this.numCategories;return this.categoryToID.set(e,n),this.IDToCategory.set(n,e),this.numCategories++,n}},{key:"decodedProperties",value:function decodedProperties(t){return[t]}},{key:"baseName",value:function baseName(t){return t}},{key:"sourcePropertyName",value:function sourcePropertyName(t){return t}},{key:"stats",value:function stats(t){return this.properties[t]}},{key:"codec",value:function codec(t){var e=this.baseName(t);return this.properties[e]&&this.properties[e].codec?this.properties[e].codec:new X}}]),Metadata}(),et=r(7),rt=r.n(et),nt=r(8),at=r.n(nt),ot=function(t){function NumberCodec(){return h()(this,NumberCodec),A()(this,O()(NumberCodec).apply(this,arguments))}return R()(NumberCodec,t),p()(NumberCodec,[{key:"sourceToInternal",value:function sourceToInternal(t,e){return(isNaN(e)||null==e)&&(e=-(1<<24)),e}},{key:"internalToExternal",value:function internalToExternal(t,e){return e===-(1<<24)&&(e=null),e}},{key:"externalToInternal",value:function externalToInternal(t,e){return null===e&&(e=-(1<<24)),e}}]),NumberCodec}(X),it=function(t){function MVTNumberCodec(){return h()(this,MVTNumberCodec),A()(this,O()(MVTNumberCodec).apply(this,arguments))}return R()(MVTNumberCodec,t),p()(MVTNumberCodec,[{key:"sourceToInternal",value:function sourceToInternal(t,e){var r=rt()(e);if(null!==e&&"undefined"!==r&&"number"!==r)throw new Q("MVT decoding error. Metadata property \'".concat(this._baseName,"\' is of type \'number\' but the MVT tile contained a feature property of type \'").concat(r,"\': \'").concat(e,"\'"),H.MVT);return at()(O()(MVTNumberCodec.prototype),"sourceToInternal",this).call(this,t,e)}}]),MVTNumberCodec}(ot),ut=function(t){function CategoryCodec(){return h()(this,CategoryCodec),A()(this,O()(CategoryCodec).apply(this,arguments))}return R()(CategoryCodec,t),p()(CategoryCodec,[{key:"sourceToInternal",value:function sourceToInternal(t,e){return t.categorizeString(this._baseName,e)}},{key:"internalToExternal",value:function internalToExternal(t,e){return t.IDToCategory.get(e)}},{key:"sourceToExternal",value:function sourceToExternal(t,e){return e}},{key:"externalToSource",value:function externalToSource(t,e){return e}}]),CategoryCodec}($),st=function(t){function MVTCategoryCodec(){return h()(this,MVTCategoryCodec),A()(this,O()(MVTCategoryCodec).apply(this,arguments))}return R()(MVTCategoryCodec,t),p()(MVTCategoryCodec,[{key:"sourceToInternal",value:function sourceToInternal(t,e){var r=rt()(e);if(null!==e&&"undefined"!==r&&"string"!==r)throw new Q("MVT decoding error. Metadata property \'".concat(this._baseName,"\' is of type \'category\' but the MVT tile contained a feature property of type \'").concat(r,"\': \'").concat(e,"\'"),H.MVT);return at()(O()(MVTCategoryCodec.prototype),"sourceToInternal",this).call(this,t,e)}}]),MVTCategoryCodec}(ut);var ct=function(t){function MVTMetadata(){return h()(this,MVTMetadata),A()(this,O()(MVTMetadata).apply(this,arguments))}return R()(MVTMetadata,t),p()(MVTMetadata,[{key:"setCodecs",value:function setCodecs(){var t=this;Object.keys(this.properties).forEach(function(e){var r=t.properties[e],n=r.type;"geometry"!==n&&(r.codec=function MVTCodecFactory(t,e,r){switch(e){case"number":return new it(t,r);case"category":return new st(t,r);default:throw new Q("MVT decoding error. Feature property value of type \'".concat(e,"\' cannot be decoded."),H.MVT)}}(t,n,e))})}}]),MVTMetadata}(tt);function addLineString(t,e,r,n,a){var o,i,u,s,c;if(t.length>=4){o=[t[0],t[1]];for(var f=2;f<=t.length;f+=2)if(i=[t[f],t[f+1]],o[0]!==i[0]||o[1]!==i[1]){f+=2;break}for(u=getLineNormal(o,i);f<=t.length;f+=2){c=!(a&&a(f));var l=void 0;if(f<=t.length-2?l=[t[f],t[f+1]]:n&&(l=[t[2],t[3]]),!c||o[0]===i[0]&&o[1]===i[1]||(e.vertices[r]=o[0],e.normals[r++]=-u[0],e.vertices[r]=o[1],e.normals[r++]=-u[1],e.vertices[r]=o[0],e.normals[r++]=u[0],e.vertices[r]=o[1],e.normals[r++]=u[1],e.vertices[r]=i[0],e.normals[r++]=u[0],e.vertices[r]=i[1],e.normals[r++]=u[1],e.vertices[r]=o[0],e.normals[r++]=-u[0],e.vertices[r]=o[1],e.normals[r++]=-u[1],e.vertices[r]=i[0],e.normals[r++]=u[0],e.vertices[r]=i[1],e.normals[r++]=u[1],e.vertices[r]=i[0],e.normals[r++]=-u[0],e.vertices[r]=i[1],e.normals[r++]=-u[1]),!l||l[0]===i[0]&&l[1]===i[1])s=u;else if(s=getLineNormal(i,l),c){var h=getJoinNormal(u,s),d=h.turnLeft,p=h.joinNormal,y=d?u:neg(s),v=d?s:neg(u);e.vertices[r]=i[0],e.normals[r++]=0,e.vertices[r]=i[1],e.normals[r++]=n?1e-37:0,e.vertices[r]=i[0],e.normals[r++]=y[0],e.vertices[r]=i[1],e.normals[r++]=y[1],e.vertices[r]=i[0],e.normals[r++]=v[0],e.vertices[r]=i[1],e.normals[r++]=v[1],p&&(e.vertices[r]=i[0],e.normals[r++]=p[0],e.vertices[r]=i[1],e.normals[r++]=p[1],e.vertices[r]=i[0],e.normals[r++]=v[0],e.vertices[r]=i[1],e.normals[r++]=v[1],e.vertices[r]=i[0],e.normals[r++]=y[0],e.vertices[r]=i[1],e.normals[r++]=y[1])}o=i,i=l,u=s}}return r}function resizeBuffer(t,e){var r=new Float32Array(e);return r.set(t),r}var ft=24,lt=0,ht={vertices:new Float32Array(1048576),normals:new Float32Array(1048576)};function resizeBuffers(t){var e=lt+t;if(e>ht.vertices.length){var r=2*e;ht.vertices=resizeBuffer(ht.vertices,r),ht.normals=resizeBuffer(ht.normals,r)}}var dt=r(17),pt=2,yt=24,vt=0,mt={vertices:new Float32Array(2097152),normals:new Float32Array(2097152)};function polygonDecoder_resizeBuffers(t){var e=vt+t;if(e>mt.vertices.length){var r=2*e;mt.vertices=resizeBuffer(mt.vertices,r),mt.normals=resizeBuffer(mt.normals,r)}}function addVertex(t,e){mt.vertices[vt]=t[e],mt.normals[vt++]=0,mt.vertices[vt]=t[e+1],mt.normals[vt++]=0}function isClipped(t,e,r){return!!(t.clipped.includes(e)&&t.clipped.includes(r)&&t.clippedType[t.clipped.indexOf(e)]&t.clippedType[t.clipped.indexOf(r)])}function decodeGeom(t,e){switch(t){case Z.POINT:return function decodePoint(t){return{verticesArrayBuffer:t,vertices:new Float32Array(t),breakpoints:[]}}(e);case Z.LINE:return function decodeLine(t){var e=[],r=new Map;lt=0;for(var n=0;n<t.length;n++){for(var a=t[n],o=0;o<a.length;o++)resizeBuffers(ft*a[o].length),lt=addLineString(a[o],ht,lt);r.set(e.length,0===e.length?{start:0,end:lt}:{start:r.get(e.length-1).end,end:lt}),e.push(lt)}for(var i=new ArrayBuffer(4*lt),u=new ArrayBuffer(4*lt),s=new Float32Array(i),c=new Float32Array(u),f=0;f<lt;f++)s[f]=ht.vertices[f],c[f]=ht.normals[f];return{vertices:s,normals:c,verticesArrayBuffer:i,normalsArrayBuffer:u,featureIDToVertexIndex:r,breakpoints:e}}(e);case Z.POLYGON:return function decodePolygon(t){var e=[],r=new Map;vt=0;for(var n=0;n<t.length;n++){for(var a=t[n],o=function _loop(t){var e=a[t],r=dt(e.flat,e.holes);polygonDecoder_resizeBuffers(pt*r.length+yt*e.flat.length);for(var n=0;n<r.length;n++)addVertex(e.flat,2*r[n]);vt=addLineString(e.flat,mt,vt,!0,function(t){return e.holes.includes((t-2)/2)||isClipped(e,t-4,t-2)})},i=0;i<a.length;i++)o(i);r.set(e.length,0===e.length?{start:0,end:vt}:{start:r.get(e.length-1).end,end:vt}),e.push(vt)}for(var u=new ArrayBuffer(4*vt),s=new ArrayBuffer(4*vt),c=new Float32Array(u),f=new Float32Array(s),l=0;l<vt;l++)c[l]=mt.vertices[l],f[l]=mt.normals[l];return{vertices:c,normals:f,verticesArrayBuffer:u,normalsArrayBuffer:s,featureIDToVertexIndex:r,breakpoints:e}}(e);default:throw new Q("Unimplemented geometry type: \'".concat(t,"\'."),H.NOT_SUPPORTED)}}var gt=function DummyDataframe(t){var e=t.active,r=t.center,n=t.properties,a=t.propertiesArrayBuffer,o=t.scale,i=t.type,u=t.geom,s=t.size,c=t.metadata;h()(this,DummyDataframe),this.active=e,this.center=r,this.properties=n,this.propertiesArrayBuffer=a,this.scale=o,this.type=i,this.decodedGeom=decodeGeom(i,u),this.numVertex=i===Z.POINT?3*s:this.decodedGeom.vertices.length/2,this.numFeatures=i===Z.POINT?s:this.decodedGeom.breakpoints.length||this.numVertex,this.propertyTex=[],this.metadata=c,this.propertyCount=0,this._aabb=function computeAABB(t,e){switch(e){case Z.POINT:return[];case Z.LINE:case Z.POLYGON:for(var r=[],n=0;n<t.length;n++){for(var a=t[n],o={minx:Number.POSITIVE_INFINITY,miny:Number.POSITIVE_INFINITY,maxx:Number.NEGATIVE_INFINITY,maxy:Number.NEGATIVE_INFINITY},i=0;i<a.length;i++)o=_updateAABBForGeometry(a[i],o,e);o.minx===Number.POSITIVE_INFINITY&&(o=null),r.push(o)}return r}}(u,i),this._centroids=computeCentroids(this.decodedGeom,i),this.t1=[.1,.1,.1,.1],this.t2=[.1,.1,.1,.1],this.t3=[.1,.1,.1,.1],this.t4=[.1,.1,.1,.1]},xt=1,_t=2,wt=3,bt={1:Z.POINT,2:Z.LINE,3:Z.POLYGON},Mt=function(){function MVTWorker(){h()(this,MVTWorker)}return p()(MVTWorker,[{key:"onmessage",value:function onmessage(t){this.processEvent(t).then(function(t){var e=[];t.dataframe.empty||(e.push(t.dataframe.propertiesArrayBuffer),e.push(t.dataframe.decodedGeom.verticesArrayBuffer),t.dataframe.decodedGeom.normalsArrayBuffer&&e.push(t.dataframe.decodedGeom.normalsArrayBuffer)),postMessage(t,e)})}},{key:"processEvent",value:function(){var t=f()(s.a.mark(function _callee(t){var e,r;return s.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return(e=t.data).metadata&&(this.castMetadata(e.metadata),this.metadata=e.metadata),n.next=4,this._requestDataframe(e.x,e.y,e.z,e.url,e.layerID,this.metadata);case 4:return r=n.sent,n.abrupt("return",{mID:e.mID,dataframe:r});case 6:case"end":return n.stop()}},_callee,this)}));return function processEvent(e){return t.apply(this,arguments)}}()},{key:"castMetadata",value:function castMetadata(t){Object.setPrototypeOf(t,ct.prototype),t.setCodecs()}},{key:"_requestDataframe",value:function(){var t=f()(s.a.mark(function _callee2(t,e,r,n,a,o){var i,u;return s.a.wrap(function _callee2$(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,fetch(n);case 2:return i=s.sent,s.next=5,this.urlToDataframeTransformer(i,t,e,r,a,o);case 5:return u=s.sent,s.abrupt("return",u);case 7:case"end":return s.stop()}},_callee2,this)}));return function _requestDataframe(e,r,n,a,o,i){return t.apply(this,arguments)}}()},{key:"urlToDataframeTransformer",value:function(){var t=f()(s.a.mark(function _callee3(t,e,r,n,a,o){var i,u,c,f,l,h,d,p,m,g,x;return s.a.wrap(function _callee3$(s){for(;;)switch(s.prev=s.next){case 0:return i=o.extent,s.next=3,t.arrayBuffer();case 3:if(0!==(u=s.sent).byteLength&&"null"!==t){s.next=6;break}return s.abrupt("return",{empty:!0});case 6:if(c=new y.VectorTile(new v(u)),!(Object.keys(c.layers).length>1)||a){s.next=9;break}throw new W("LayerID parameter wasn\'t specified and the MVT tile contains multiple layers: ".concat(JSON.stringify(Object.keys(c.layers)),"."),G.MISSING_REQUIRED);case 9:if(f=c.layers[a||Object.keys(c.layers)[0]]){s.next=12;break}return s.abrupt("return",{empty:!0});case 12:return l=this._decodeMVTLayer(f,o,i),h=l.geometries,d=l.properties,p=l.propertiesArrayBuffer,m=l.numFeatures,g=getRsysFromTile(e,r,n),x=this._generateDataFrame(g,h,d,p,m,o.geomType,o),s.abrupt("return",x);case 16:case"end":return s.stop()}},_callee3,this)}));return function urlToDataframeTransformer(e,r,n,a,o,i){return t.apply(this,arguments)}}()},{key:"_decodeMVTLayer",value:function _decodeMVTLayer(t,e,r){if(!t.length)return{properties:[],geometries:{},propertiesArrayBuffer:[],numFeatures:0};switch(e.geomType||(e.geomType=this._autoDiscoverType(t)),e.geomType){case Z.POINT:var n=new ArrayBuffer(2*t.length*3*4);return this._decode(t,e,r,n);case Z.LINE:return this._decode(t,e,r,[],decodeLines);case Z.POLYGON:return this._decode(t,e,r,[],decodePolygons);default:throw new W("MVT: invalid geometry type \'".concat(e.geomType,"\'"),G.INCORRECT_TYPE)}}},{key:"_autoDiscoverType",value:function _autoDiscoverType(t){var e=t.feature(0).type;switch(e){case xt:return Z.POINT;case _t:return Z.LINE;case wt:return Z.POLYGON;default:throw new W("MVT: invalid geometry type \'".concat(e,"\'"),G.INCORRECT_TYPE)}}},{key:"_decode",value:function _decode(t,e,r,n,a){var o,i=0;n&&(o=new Float32Array(n));for(var u=this._initializePropertyArrays(e,t.length),s=u.properties,c=u.propertiesArrayBuffer,f=this._scalarPropertyCodecs(e),l=this._rangePropertyCodecs(e),h=0;h<t.length;h++){var d=t.feature(h);this._checkType(d,e.geomType);var p=d.loadGeometry();if(a){var y=a(p,r);n.push(y)}else{var v=2*p[0][0].x/r-1,m=2*(1-p[0][0].y/r)-1;if(v<-1||v>=1||m<-1||m>=1)continue;o[6*i+0]=v,o[6*i+1]=m,o[6*i+2]=v,o[6*i+3]=m,o[6*i+4]=v,o[6*i+5]=m}if(void 0===d.properties[e.idProperty])throw new Q("MVT feature with undefined idProperty \'".concat(e.idProperty,"\'"),H.MVT);this._decodeProperties(e,f,l,s,d,i),i++}return{properties:s,propertiesArrayBuffer:c,geometries:n,numFeatures:i}}},{key:"_checkType",value:function _checkType(t,e){var r=t.type,n=bt[r];if(n!==e)throw new Q("MVT: mixed geometry types in the same layer. Layer has type: ".concat(e," but feature was ").concat(n),H.MVT)}},{key:"_initializePropertyArrays",value:function _initializePropertyArrays(t,e){var r=this._getPropertyNamesFrom(t),n=this._getPropertiesFor(r,e);return{propertyNames:r,properties:n.properties,propertiesArrayBuffer:n.propertiesArrayBuffer}}},{key:"_getSourcePropertyNamesFrom",value:function _getSourcePropertyNamesFrom(t){return t.propertyKeys.filter(function(e){return"geometry"!==t.properties[t.baseName(e)].type})}},{key:"_getPropertyNamesFrom",value:function _getPropertyNamesFrom(t){var e=[];return this._getSourcePropertyNamesFrom(t).forEach(function(r){t.decodedProperties(r).forEach(function(t){e.push(t)})}),e}},{key:"_getPropertiesFor",value:function _getPropertiesFor(t,e){for(var r={},n=1024*Math.ceil(e/1024),a=new ArrayBuffer(4*n*t.length),o=a,i=0;i<t.length;i++){r[t[i]]=new Float32Array(a,4*i*n,n)}return{properties:r,propertiesArrayBuffer:o}}},{key:"_scalarPropertyCodecs",value:function _scalarPropertyCodecs(t){return this._getSourcePropertyNamesFrom(t).map(function(e){return[e,t.codec(e)]}).filter(function(t){var e=i()(t,2);e[0];return!e[1].isRange()})}},{key:"_rangePropertyCodecs",value:function _rangePropertyCodecs(t){return this._getSourcePropertyNamesFrom(t).map(function(e){return[e,t.decodedProperties(e),t.codec(e)]}).filter(function(t){var e=i()(t,3);e[0],e[1];return e[2].isRange()})}},{key:"_decodeProperties",value:function _decodeProperties(t,e,r,n,a,o){for(var u=e.length,s=0;s<u;s++){var c=i()(e[s],2),f=c[0],l=c[1],h=a.properties[f];n[f][o]=l.sourceToInternal(t,h)}u=r.length;for(var d=0;d<u;d++){var p=i()(r[d],3),y=(f=p[0],i()(p[1],2)),v=y[0],m=y[1],g=(l=p[2],a.properties[f]),x=l.sourceToInternal(t,g),_=i()(x,2),w=_[0],b=_[1];n[v][o]=w,n[m][o]=b}}},{key:"_generateDataFrame",value:function _generateDataFrame(t,e,r,n,a,o,i){return new gt({active:!1,center:t.center,geom:e,properties:r,propertiesArrayBuffer:n,scale:t.scale,size:a,type:o,metadata:i})}}]),MVTWorker}(),Tt=["year","month","day","hour","minute","second"],Pt=[1,1,1,0,0,0],kt=0,It=1,Ft=2,Et=3,Ct=4,Nt=5,Vt=864e5,St=36e5,At=6e4,Dt=1e3;function startLevel(t){for(var e=Tt.length-1;e>0&&t[Tt[e]]===Pt[e];)--e;return e}function pad(t,e){return t.toString().padStart(e,"0")}function parsedValue(t){var e=msToDate(t);return{year:e.getUTCFullYear(),month:e.getUTCMonth()+1,day:e.getUTCDate(),hour:e.getUTCHours(),minute:e.getUTCMinutes(),second:e.getUTCSeconds()}}function invalidPeriod(t,e){throw new Error("Invalid period of ".concat(e," between ").concat(t.v1," and ").concat(t.v2))}function yearWeek(t,e){var r=function isoDow(t,e,r){var n=new Date(t,e-1,r).getDay();return 0===n?7:n}(t,1,1),n=r>4?9-r:2-r;return Math.abs(e-n)%7!=0?[]:e<n?yearWeek(t-1,e+=Math.round((Date.UTC(t,0,1)-Date.UTC(t-1,0,1))/Vt)):Date.UTC(t,0,1)+(e-1+3)*Vt>=Date.UTC(t+1,0,1)?yearWeek(t+1,e-=Math.round((Date.UTC(t+1,0,1)-Date.UTC(t,0,1))/Vt)):[t,1+Math.round((e-n)/7)]}function periodISO(t,e){var r=parsedValue(t),n=parsedValue(e),a=startLevel(r),o=startLevel(n),u={v1:t,v2:e,t1:r,t2:n};return Math.max(a,o)===kt?function yearsPeriod(t){var e=t.t2.year-t.t1.year;return 1e3===e&&(t.t1.year-1)%1e3==0?"M".concat(1+(t.t1.year-1)/1e3):100===e&&(t.t1.year-1)%100==0?"C".concat(1+(t.t1.year-1)/100):10===e&&t.t1.year%10==0?"D".concat(t.t1.year/10):1===e?pad(t.t1.year,4):void invalidPeriod("".concat(e," years"))}(u):Math.max(a,o)===It?function monthsPeriod(t){var e=12*t.t2.year+t.t2.month-12*t.t1.year-t.t1.month;return 6===e&&(t.t1.month-1)%6==0?"".concat(pad(t.t1.year,4),"S").concat(1+(t.t1.month-1)/6):4===e?"".concat(pad(t.t1.year,4),"t").concat(1+(t.t1.month-1)/4):3===e?"".concat(pad(t.t1.year,4),"-Q").concat(1+(t.t1.month-1)/3):1===e?"".concat(pad(t.t1.year,4),"-").concat(pad(t.t1.month,2)):void invalidPeriod("".concat(e," months"))}(u):Math.max(a,o)===Ft?function daysPeriod(t){var e=Math.round((t.v2-t.v1)/Vt);if(1===e)return"".concat(pad(t.t1.year,4),"-").concat(pad(t.t1.month,2),"-").concat(pad(t.t1.day,2));if(7===e){var r=t.t1.year,n=Date.UTC(r,0,1),a=yearWeek(r,1+Math.round((t.v1-n)/Vt)),o=i()(a,2),u=o[0],s=o[1];if(u&&s)return"".concat(pad(u,4),"-W").concat(pad(s,2));invalidPeriod("7 days")}else invalidPeriod("".concat(e," days"))}(u):Math.max(a,o)===Et?function hoursPeriod(t){var e=Math.round((t.v2-t.v1)/St);if(1===e)return"".concat(pad(t.t1.year,4),"-").concat(pad(t.t1.month,2),"-").concat(pad(t.t1.day,2),"T").concat(pad(t.t1.hour,2));invalidPeriod("".concat(e," hours"))}(u):Math.max(a,o)===Ct?function minutesPeriod(t){var e=Math.round((t.v2-t.v1)/At);if(1===e)return"".concat(pad(t.t1.year,4),"-").concat(pad(t.t1.month,2),"-").concat(pad(t.t1.day,2),"T").concat(pad(t.t1.hour,2),":").concat(pad(t.t1.minute,2));invalidPeriod("".concat(e," minutes"))}(u):Math.max(a,o)===Nt?function secondsPeriod(t){var e=Math.round((t.v2-t.v1)/Dt);if(1===e)return"".concat(pad(t.t1.year,4),"-").concat(pad(t.t1.month,2),"-").concat(pad(t.t1.day,2),"T").concat(pad(t.t1.hour,2),":").concat(pad(t.t1.minute,2),":").concat(pad(t.t1.second,2));invalidPeriod("".concat(e," seconds"))}(u):void invalidPeriod(u,"fractional seconds")}var Ot=function(t){function CartoParsingError(t){var e;h()(this,CartoParsingError);return(e=A()(this,O()(CartoParsingError).call(this,{message:t,type:"[Error]"}))).name="CartoParsingError",e}return R()(CartoParsingError,t),CartoParsingError}(q),Lt=function(){function IsoParser(t){h()(this,IsoParser),this._format=t}return p()(IsoParser,[{key:"check",value:function check(t){return t.match(this._format)}}]),IsoParser}();function fieldDefault(t,e){return void 0===t?e:Number(t)}function dateFields(t){return{year:fieldDefault(t.year,1),month:fieldDefault(t.month,1),day:fieldDefault(t.day,1),hour:fieldDefault(t.hour,0),minute:fieldDefault(t.minute,0),second:fieldDefault(t.second,0)}}function fieldsFromMatch(t){return dateFields({year:t[1],month:t[2],day:t[3],hour:t[4],minute:t[5],second:t[6]})}var Rt=function(t){function YMDHMSParser(){return h()(this,YMDHMSParser),A()(this,O()(YMDHMSParser).call(this,/^(\\d\\d\\d\\d)(?:\\-?(\\d\\d)(?:\\-?(\\d\\d)(?:[T\\s]?(\\d\\d)(?:\\:(\\d\\d)(?:\\:(\\d\\d))?)?)?)?)?$/))}return R()(YMDHMSParser,t),p()(YMDHMSParser,[{key:"parse",value:function parse(t){var e=this.check(t)||[],r=e.slice(),n=[1,2,3,4,5,6].find(function(t){return void 0===r[t]})||7;return 1===n?r[1]=2:r[n-1]=Number(r[n-1])+1,[fieldsFromMatch(e),fieldsFromMatch(r)]}}]),YMDHMSParser}(Lt),Bt=function(t){function MillenniumParser(){return h()(this,MillenniumParser),A()(this,O()(MillenniumParser).call(this,/^M(\\d+)$/))}return R()(MillenniumParser,t),p()(MillenniumParser,[{key:"parse",value:function parse(t){var e=this.check(t),r=Number(e[1]),n=function year(t){return 1e3*(t-1)+1};return[dateFields({year:n(r)}),dateFields({year:n(r+1)})]}}]),MillenniumParser}(Lt),qt=function(t){function CenturyParser(){return h()(this,CenturyParser),A()(this,O()(CenturyParser).call(this,/^C(\\d+)$/))}return R()(CenturyParser,t),p()(CenturyParser,[{key:"parse",value:function parse(t){var e=this.check(t),r=Number(e[1]),n=function year(t){return 100*(t-1)+1};return[dateFields({year:n(r)}),dateFields({year:n(r+1)})]}}]),CenturyParser}(Lt),Wt=function(t){function DecadeParser(){return h()(this,DecadeParser),A()(this,O()(DecadeParser).call(this,/^D(\\d+)$/))}return R()(DecadeParser,t),p()(DecadeParser,[{key:"parse",value:function parse(t){var e=this.check(t),r=Number(e[1]),n=function year(t){return 10*t};return[dateFields({year:n(r)}),dateFields({year:n(r+1)})]}}]),DecadeParser}(Lt),Gt=function(t){function SemesterParser(){return h()(this,SemesterParser),A()(this,O()(SemesterParser).call(this,/^(\\d\\d\\d\\d)S(\\d)$/))}return R()(SemesterParser,t),p()(SemesterParser,[{key:"parse",value:function parse(t){var e=this.check(t),r=Number(e[1]),n=Number(e[2]),a=function month(t){return 6*(t-1)+1};return[dateFields({year:r,month:a(n)}),dateFields({year:r,month:a(n+1)})]}}]),SemesterParser}(Lt),Zt=function(t){function TrimesterParser(){return h()(this,TrimesterParser),A()(this,O()(TrimesterParser).call(this,/^(\\d\\d\\d\\d)t(\\d)$/))}return R()(TrimesterParser,t),p()(TrimesterParser,[{key:"parse",value:function parse(t){var e=this.check(t),r=Number(e[1]),n=Number(e[2]),a=function month(t){return 4*(t-1)+1};return[dateFields({year:r,month:a(n)}),dateFields({year:r,month:a(n+1)})]}}]),TrimesterParser}(Lt),jt=function(t){function QuarterParser(){return h()(this,QuarterParser),A()(this,O()(QuarterParser).call(this,/^(\\d\\d\\d\\d)\\-?Q(\\d)$/))}return R()(QuarterParser,t),p()(QuarterParser,[{key:"parse",value:function parse(t){var e=this.check(t),r=Number(e[1]),n=Number(e[2]),a=function month(t){return 3*(t-1)+1};return[dateFields({year:r,month:a(n)}),dateFields({year:r,month:a(n+1)})]}}]),QuarterParser}(Lt);function startOfIsoWeek(t,e){var r=function parseISO_isoDow(t,e,r){var n=new Date(t,e-1,r).getDay();return 0===n?7:n}(t,1,1);return function addDays(t,e){var r=new Date(t.valueOf());return r.setDate(r.getDate()+e),r}(new Date(t,0,r>4?9-r:2-r),7*(e-1))}var Ut=function(t){function WeekParser(){return h()(this,WeekParser),A()(this,O()(WeekParser).call(this,/^(\\d\\d\\d\\d)\\-?W(\\d\\d)$/))}return R()(WeekParser,t),p()(WeekParser,[{key:"parse",value:function parse(t){var e=this.check(t),r=Number(e[1]),n=Number(e[2]),a=startOfIsoWeek(r,n),o=startOfIsoWeek(r,n+1),i=function fields(t){return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}};return[dateFields(i(a)),dateFields(i(o))]}}]),WeekParser}(Lt),zt=[new Bt,new qt,new Wt,new Gt,new Zt,new jt,new Ut,new Rt];function parseISO(t){var e=function findParser(t){return zt.find(function(e){return e.check(t)})}(t=t||"");if(!e)throw new Ot("No date parser found for ".concat(t));return e.parse(t)}var Yt=function(){function TimeZoneDate(t,e){h()(this,TimeZoneDate),this._value=t,this._date=msToDate(t),this._timeZone=e}return p()(TimeZoneDate,[{key:"year",get:function get(){return this._date.getUTCFullYear()}},{key:"month",get:function get(){return this._date.getUTCMonth()+1}},{key:"day",get:function get(){return this._date.getUTCDate()}},{key:"hour",get:function get(){return this._date.getUTCHours()}},{key:"minute",get:function get(){return this._date.getUTCMinutes()}},{key:"second",get:function get(){return this._date.getUTCSeconds()}},{key:"text",get:function get(){return periodISO(this._date.getTime(),this._date.getTime()+1e3)}},{key:"timeZone",get:function get(){return this._timeZone}}],[{key:"fromValue",value:function fromValue(t,e){return new TimeZoneDate(t,e)}},{key:"from",value:function from(t,e,r,n,a,o,i){return this.fromValue(Date.UTC(t,(e||1)-1,r,n,a,o),i)}}]),TimeZoneDate}(),Qt=function(){function TimeRange(t,e,r,n){if(h()(this,TimeRange),this._startValue=r,this._endValue=n,r&&n)this._iso=periodISO(r,n);else if(!r&&!n&&e){var a=function _startEndTimeValues(t){return parseISO(t).map(_timeValue)}(e);this._iso=e,this._startValue=a[0],this._endValue=a[1]}this._timeZone=t}return p()(TimeRange,[{key:"timeZone",get:function get(){return this._timeZone}},{key:"iso",get:function get(){return this._iso}},{key:"startValue",get:function get(){return this._startValue}},{key:"endValue",get:function get(){return this._endValue}},{key:"startDate",get:function get(){return Yt.fromValue(this._startValue,this._timeZone)}},{key:"endDate",get:function get(){return Yt.fromValue(this._endValue,this._timeZone)}}]),TimeRange}();function _timeValue(t){return Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second)}Math.PI;var Ht=6378137;Math.PI;function msToDate(t){return new Date(t)}function castTimeRange(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return void 0===t||function isTimeRange(t){return t instanceof Qt}(t)?t&&e?util_timeRange({iso:t._iso,timeZone:e}):t:"string"==typeof t?util_timeRange({iso:t,timeZone:e}):void 0}function util_timeRange(t){var e=t.start,r=t.end,n=t.iso,a=t.timeZone;return new Qt(a,n,e,r)}var $t=function(t){function WindshaftDateCodec(t,e){var r;h()(this,WindshaftDateCodec),r=A()(this,O()(WindshaftDateCodec).call(this,t,e));var n=t.stats(e).min;return r._min_ms=1e3*n,r._min_date=msToDate(r._min_ms),r}return R()(WindshaftDateCodec,t),p()(WindshaftDateCodec,[{key:"sourceToInternal",value:function sourceToInternal(t,e){return msToDate(1e3*e)-this._min_date}},{key:"internalToExternal",value:function internalToExternal(t,e){var r=e;return msToDate(r+=this._min_ms)}},{key:"externalToSource",value:function externalToSource(t,e){return e.getTime()/1e3}},{key:"sourceToExternal",value:function sourceToExternal(t,e){return function asDate(t){if(t instanceof Date)return t;return msToDate(1e3*t)}(e)}},{key:"inlineInternalMatch",value:function inlineInternalMatch(t,e){var r=e._min_ms-this._min_ms;return"(".concat(t,"-").concat(r.toFixed(20),")")}}]),WindshaftDateCodec}($);var Xt=function(t){function TimeRangeCodec(t,e){var r;h()(this,TimeRangeCodec),r=A()(this,O()(TimeRangeCodec).call(this,t,e));var n=t.stats(e),a=n.min,o=n.grouping&&n.grouping.timezone,i=util_timeRange({timeZone:o,iso:a});return r._min=i.startValue/1e3,r._timeZone=o,r}return R()(TimeRangeCodec,t),p()(TimeRangeCodec,[{key:"isRange",value:function isRange(){return!0}},{key:"sourceToInternal",value:function sourceToInternal(t,e){var r=this,n=util_timeRange({iso:e});return[n.startValue/1e3,n.endValue/1e3].map(function(t){return t-r._min})}},{key:"internalToExternal",value:function internalToExternal(t,e){var r=i()(e,2),n=r[0],a=r[1];return util_timeRange({start:1e3*(n+this._min),end:1e3*(a+this._min),timeZone:this._timeZone})}},{key:"externalToSource",value:function externalToSource(t,e){return castTimeRange(e,this._timeZone)._iso}},{key:"sourceToExternal",value:function sourceToExternal(t,e){return util_timeRange({iso:e,timeZone:this._timeZone})}},{key:"inlineInternalMatch",value:function inlineInternalMatch(t,e){var r=e._min.getTime()-this._min.getTime();return"(".concat(t,"-").concat(r.toFixed(20),")")}}]),TimeRangeCodec}($),Jt=function(t){function CartoMapsAPIError(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kt.DEFAULT;return h()(this,CartoMapsAPIError),(e=A()(this,O()(CartoMapsAPIError).call(this,{message:t,type:r}))).name="CartoMapsAPIError",e}return R()(CartoMapsAPIError,t),CartoMapsAPIError}(q),Kt={DEFAULT:"[Error]",SQL:"[SQL]",NOT_SUPPORTED:"[Not supported]",SECURITY:"[Security]"};var te=function(t){function WindshaftMetadata(){var t,e;h()(this,WindshaftMetadata);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=A()(this,(t=O()(WindshaftMetadata)).call.apply(t,[this].concat(n)))).propertyKeys=[],e.baseNames={},Object.keys(e.properties).forEach(function(t){var r=e.properties[t];r.aggregations?Object.values(r.aggregations).forEach(function(r){e._addProperty(t,r)}):r.dimension?r.dimension.range?(r.dimension.range.forEach(function(r){e._addProperty(t,r,!1)}),e._addProperty(t,r.dimension.propertyName)):e._addProperty(t,r.dimension.propertyName):e._addProperty(t,t)}),e}return R()(WindshaftMetadata,t),p()(WindshaftMetadata,[{key:"_addProperty",value:function _addProperty(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.baseNames[e]=t,r&&this.propertyKeys.push(e)}},{key:"_dimensionInfo",value:function _dimensionInfo(t){var e=this.baseName(t)||t,r=this.properties[e],n=null;e!==t&&e!==t&&r.dimension&&(n=r.dimension);var a=r.type,o=n?function dimensionBaseType(t){return t.type}(n):a;return{baseName:e,column:r,dimension:n,dataframeType:n?function dimensionType(t,e){if(t.range)return"date";return t.type}(n):o,baseType:a,sourceType:o}}},{key:"baseName",value:function baseName(t){return this.baseNames[t]}},{key:"decodedProperties",value:function decodedProperties(t){var e=this._dimensionInfo(t).dimension;return e&&e.grouping&&e.range?e.range:at()(O()(WindshaftMetadata.prototype),"decodedProperties",this).call(this,t)}},{key:"stats",value:function stats(t){var e=this._dimensionInfo(t).dimension;return e&&e.grouping?e:at()(O()(WindshaftMetadata.prototype),"stats",this).call(this,t)}},{key:"setCodecs",value:function setCodecs(){!function setMetadataCodecs(t){Object.keys(t.properties).forEach(function(e){var r=t.properties[e],n=r.type;if("geometry"!==n){var a=r.dimension?r.dimension.type:null,o=a?r.dimension.propertyName:e,i="category"===a&&r.dimension.range?"timerange":a;r.codec=function windshaftCodecFactory(t,e,r){switch(e){case"number":return new ot(t,r);case"category":return new ut(t,r);case"date":return new $t(t,r);case"timerange":return new Xt(t,r);default:throw new Jt("Windshaft MVT decoding error. Feature property value of type \'".concat(e,"\' cannot be decoded."),Kt.NOT_SUPPORTED)}}(t,i||n,o||e)}})}(this)}},{key:"sourcePropertyName",value:function sourcePropertyName(t){var e=this.baseName(t),r=this.properties[e].dimension;return r&&r.range?r.propertyName:t}}]),WindshaftMetadata}(ct);var ee=function(t){function WindshaftWorker(){return h()(this,WindshaftWorker),A()(this,O()(WindshaftWorker).apply(this,arguments))}return R()(WindshaftWorker,t),p()(WindshaftWorker,[{key:"castMetadata",value:function castMetadata(t){Object.setPrototypeOf(t,te.prototype),t.setCodecs()}}]),WindshaftWorker}(Mt);const re={MVT:new Mt,windshaft:new ee};onmessage=function(t){return re[t.data.workerName].onmessage(t)}}]);',"/dist/carto-vl-2220c5b76836ff9fe8e6.worker.min.js")}},function(t,e){t.exports="precision highp float;\n\nattribute vec2 vertexPosition;\nattribute vec2 featureID;\n\nuniform float orderMinWidth;\nuniform float orderMaxWidth;\nuniform vec2 resolution;\nuniform mat4 matrix;\n\nuniform sampler2D colorTex;\nuniform sampler2D widthTex;\nuniform sampler2D strokeColorTex;\nuniform sampler2D strokeWidthTex;\nuniform sampler2D filterTex;\n\nvarying highp vec4 color;\nvarying highp vec4 stroke;\nvarying highp float dp;\nvarying highp float fillScale;\nvarying highp float strokeScale;\nvarying highp vec2 pointCoord;\n\nfloat decodeWidth(vec2 enc) {\n  return enc.x*(255.*4.) + 4.*enc.y;\n}\n\n$propertyPreface\n$transform_preface\n\nvec2 transform(vec2 p){\n    return $transform_inline(p*resolution*0.5)/resolution*2.;\n}\n\nvoid main(void) {\n  color = texture2D(colorTex, abs(featureID));\n  stroke = texture2D(strokeColorTex, abs(featureID));\n  float filtering = texture2D(filterTex, abs(featureID)).a;\n  color.a *= filtering;\n  stroke.a *= filtering;\n  float size = decodeWidth(texture2D(widthTex, abs(featureID)).rg);\n  float fillSize = size;\n  float strokeSize = decodeWidth(texture2D(strokeWidthTex, abs(featureID)).rg);\n  size += strokeSize;\n  fillScale = min(size / fillSize, 1.);\n  strokeScale = size / max(0.001, (fillSize - strokeSize));\n  if (fillScale == strokeScale) {\n    stroke.a = 0.;\n  }\n  dp = 1.0 / (size + 1.);\n  float sizeNormalizer = (size +1.)/size;\n\n  vec4 p =  matrix*vec4(vertexPosition, 0., 1.);\n  p/=p.w;\n  vec2 size2 = (2.*size+4.)/resolution;\n\n    if (featureID.y<0.){\n        pointCoord = vec2(0.866025, -0.5)*2.*sizeNormalizer;\n        p.xy += transform(size2*vec2(0.866025, -0.5));\n    }else if (featureID.x<0.){\n        pointCoord = vec2(-0.866025, -0.5)*2.*sizeNormalizer;\n        p.xy += transform(size2*vec2(-0.866025, -0.5));\n    }else{\n        pointCoord = vec2(0., 1.)*2.*sizeNormalizer;\n        p.xy += transform(vec2(0.,size2.y));\n    }\n\n  if (size == 0. || (stroke.a == 0. && color.a == 0.) || size < orderMinWidth || size >= orderMaxWidth) {\n    p.z = p.w*2.;\n  }\n\n  gl_Position = p;\n}\n"},function(t,e){t.exports="precision highp float;\n\nvarying lowp vec4 color;\nvarying lowp vec4 stroke;\nvarying highp float dp;\nvarying highp float fillScale;\nvarying highp float strokeScale;\nvarying highp vec2 pointCoord;\n\nfloat distanceAntialias(vec2 p){\n    // return length(p) > 1 ? 0. : 1. ; // to disable antialias\n    return 1. - smoothstep(1.-dp*1.4142, 1.+dp*1.4142, length(p));\n}\n\nvoid main(void) {\n    vec2 p = pointCoord;\n    vec4 c = color;\n\n    vec4 s = stroke;\n\n    c.a *= distanceAntialias(p*fillScale);\n    c.rgb*=c.a;\n\n    s.a *= distanceAntialias(p);\n    s.a *= 1.-distanceAntialias((strokeScale)*p);\n    s.rgb*=s.a;\n\n    c=s+(1.-s.a)*c;\n\n    gl_FragColor = c;\n}\n"},function(t,e){t.exports="// Line Vertex Shader\nprecision highp float;\n\nattribute vec2 vertexPosition;\nattribute vec2 featureID;\nattribute vec2 normal;\n\nuniform float normalScale;\nuniform vec2 resolution;\nuniform mat4 matrix;\n\nuniform sampler2D colorTex;\nuniform sampler2D widthTex;\nuniform sampler2D filterTex;\n\nvarying lowp vec4 color;\n\nfloat decodeWidth(vec2 enc) {\n  return enc.x*(255.*4.) + 4.*enc.y;\n}\n\n$propertyPreface\n$transform_preface\n\nvoid main(void) {\n    color = texture2D(colorTex, featureID);\n    float filtering = texture2D(filterTex, featureID).a;\n    color.a *= filtering;\n    color.rgb *= color.a; // premultiplied-alpha\n    float size = decodeWidth(texture2D(widthTex, featureID).rg);\n\n    // 64 is computed based on RTT_WIDTH and the depth buffer precision\n    // 64 = 2^(BUFFER_BITS)/RTT_WIDTH = 2^16/1024 = 64\n    float z = featureID.y * 63. / 64. + featureID.x / (64.);\n\n    // Set z range (-1, 1)\n    z = z * 2. - 1.;\n\n    vec2 n = normal*size*normalScale;\n    vec4 p =  matrix*vec4(vertexPosition+n, 0., 1.);\n    p/=p.w;\n\n    p.xy = $transform_inline(p.xy*resolution)/resolution;\n    if (size==0. || color.a==0.){\n        p.x=10000.;\n    }\n    p.z=z;\n    gl_Position  = p;\n}\n"},function(t,e){t.exports="precision highp float;\n\nvarying lowp vec4 color;\n\nvoid main(void) {\n    gl_FragColor = color;\n}\n"},function(t,e){t.exports="precision mediump float;\n\nattribute vec2 vertexPosition;\nattribute vec2 featureID;\nattribute vec2 normal;\n\nuniform float normalScale;\nuniform vec2 resolution;\n\nuniform sampler2D colorTex;\nuniform sampler2D strokeColorTex;\nuniform sampler2D strokeWidthTex;\nuniform sampler2D filterTex;\nuniform mat4 matrix;\n\nvarying lowp vec4 color;\n\nfloat decodeWidth(vec2 enc) {\n  return enc.x*(255.*4.) + 4.*enc.y;\n}\n\n$propertyPreface\n$transform_preface\n\nvoid main(void) {\n    // 64 is computed based on RTT_WIDTH and the depth buffer precision\n    // 64 = 2^(BUFFER_BITS)/RTT_WIDTH = 2^16/1024 = 64\n    float z = featureID.y * 63. / 64. + featureID.x / 64.;\n\n    vec4 c;\n    if (normal == vec2(0.)){\n        c = texture2D(colorTex, featureID);\n    }else{\n        z = mod(z + (z > 0.5 ? -1./64. : 1./64.), 1.);\n        c = texture2D(strokeColorTex, featureID);\n    }\n    z = 2.*z - 1.;\n    float filtering = texture2D(filterTex, featureID).a;\n    c.a *= filtering;\n    float size = decodeWidth(texture2D(strokeWidthTex, featureID).rg);\n\n    vec2 n = normal*size*normalScale;\n    vec4 p =  matrix*vec4(vertexPosition+n, 0., 1.);\n    p/=p.w;\n\n    p.xy = $transform_inline(p.xy*resolution*0.5)/resolution*2.;\n\n    if (c.a==0.){\n        p.x=10000.;\n    }\n    p.z=z;\n    color = vec4(c.rgb*c.a, c.a);\n    gl_Position  = p;\n}\n"},function(t,e){t.exports="precision lowp float;\n\nvarying lowp vec4 color;\n\nvoid main(void) {\n    gl_FragColor = color;\n}\n"},,,,,,,,function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}},function(t,e){t.exports=function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}},function(t,e){t.exports=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)e.indexOf(n=o[i])>=0||(r[n]=t[n]);return r}},function(t,e,n){var i=function(){return this||"object"==typeof self&&self}()||Function("return this")(),r=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,o=r&&i.regeneratorRuntime;if(i.regeneratorRuntime=void 0,t.exports=n(59),r)i.regeneratorRuntime=o;else try{delete i.regeneratorRuntime}catch(t){i.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";var n,i=Object.prototype,r=i.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",l="object"==typeof t,c=e.regeneratorRuntime;if(c)l&&(t.exports=c);else{(c=e.regeneratorRuntime=l?t.exports:{}).wrap=b;var h="suspendedStart",d="suspendedYield",p="executing",f="completed",g={},m={};m[a]=function(){return this};var y=Object.getPrototypeOf,_=y&&y(y(A([])));_&&_!==i&&r.call(_,a)&&(m=_);var v=P.prototype=w.prototype=Object.create(m);C.prototype=v.constructor=P,P.constructor=C,P[u]=C.displayName="GeneratorFunction",c.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===C||"GeneratorFunction"===(e.displayName||e.name))},c.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,P):(t.__proto__=P,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(v),t},c.awrap=function(t){return{__await:t}},M(O.prototype),O.prototype[s]=function(){return this},c.AsyncIterator=O,c.async=function(t,e,n,i){var r=new O(b(t,e,n,i));return c.isGeneratorFunction(e)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},M(v),v[u]="Generator",v[a]=function(){return this},v.toString=function(){return"[object Generator]"},c.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},c.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,r){return s.type="throw",s.arg=t,e.next=i,r&&(e.method="next",e.arg=n),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:A(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=n),g}}}function b(t,e,n,i){var r=Object.create((e&&e.prototype instanceof w?e:w).prototype),o=new T(i||[]);return r._invoke=function(t,e,n){var i=h;return function(r,o){if(i===p)throw new Error("Generator is already running");if(i===f){if("throw"===r)throw o;return I()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var u=x(t,e,n);if("normal"===u.type){if(i=n.done?f:d,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=f,n.method="throw",n.arg=u.arg)}}}(t,n,o),r}function x(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function w(){}function C(){}function P(){}function M(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function O(t){var e;this._invoke=function(n,i){function o(){return new Promise((function(e,o){!function e(n,i,o,a){var s=x(t[n],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,o,a)}),(function(t){e("throw",t,o,a)})):Promise.resolve(l).then((function(t){u.value=t,o(u)}),(function(t){return e("throw",t,o,a)}))}a(s.arg)}(n,i,e,o)}))}return e=e?e.then(o,o):o()}}function k(t,e){var i=t.iterator[e.method];if(i===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,k(t,e),"throw"===e.method))return g;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=x(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,g;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,g):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function A(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:n,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(t,e,n){var i,r;!function(){var o={Burg:{2:["#ffc6c4","#672044"],3:["#ffc6c4","#cc607d","#672044"],4:["#ffc6c4","#e38191","#ad466c","#672044"],5:["#ffc6c4","#ee919b","#cc607d","#9e3963","#672044"],6:["#ffc6c4","#f29ca3","#da7489","#b95073","#93345d","#672044"],7:["#ffc6c4","#f4a3a8","#e38191","#cc607d","#ad466c","#8b3058","#672044"],tags:["quantitative"]},BurgYl:{2:["#fbe6c5","#70284a"],3:["#fbe6c5","#dc7176","#70284a"],4:["#fbe6c5","#ee8a82","#c8586c","#70284a"],5:["#fbe6c5","#f2a28a","#dc7176","#b24b65","#70284a"],6:["#fbe6c5","#f4b191","#e7807d","#d06270","#a44360","#70284a"],7:["#fbe6c5","#f5ba98","#ee8a82","#dc7176","#c8586c","#9c3f5d","#70284a"],tags:["quantitative"]},RedOr:{2:["#f6d2a9","#b13f64"],3:["#f6d2a9","#ea8171","#b13f64"],4:["#f6d2a9","#f19c7c","#dd686c","#b13f64"],5:["#f6d2a9","#f3aa84","#ea8171","#d55d6a","#b13f64"],6:["#f6d2a9","#f4b28a","#ef9177","#e3726d","#cf5669","#b13f64"],7:["#f6d2a9","#f5b78e","#f19c7c","#ea8171","#dd686c","#ca5268","#b13f64"],tags:["quantitative"]},OrYel:{2:["#ecda9a","#ee4d5a"],3:["#ecda9a","#f7945d","#ee4d5a"],4:["#ecda9a","#f3ad6a","#f97b57","#ee4d5a"],5:["#ecda9a","#f1b973","#f7945d","#f86f56","#ee4d5a"],6:["#ecda9a","#f0c079","#f5a363","#f98558","#f76856","#ee4d5a"],7:["#ecda9a","#efc47e","#f3ad6a","#f7945d","#f97b57","#f66356","#ee4d5a"],tags:["quantitative"]},Peach:{2:["#fde0c5","#eb4a40"],3:["#fde0c5","#f59e72","#eb4a40"],4:["#fde0c5","#f8b58b","#f2855d","#eb4a40"],5:["#fde0c5","#f9c098","#f59e72","#f17854","#eb4a40"],6:["#fde0c5","#fac7a1","#f7ac80","#f38f65","#f0704f","#eb4a40"],7:["#fde0c5","#facba6","#f8b58b","#f59e72","#f2855d","#ef6a4c","#eb4a40"],tags:["quantitative"]},PinkYl:{2:["#fef6b5","#e15383"],3:["#fef6b5","#ffa679","#e15383"],4:["#fef6b5","#ffc285","#fa8a76","#e15383"],5:["#fef6b5","#ffd08e","#ffa679","#f67b77","#e15383"],6:["#fef6b5","#ffd795","#ffb77f","#fd9576","#f37378","#e15383"],7:["#fef6b5","#ffdd9a","#ffc285","#ffa679","#fa8a76","#f16d7a","#e15383"],tags:["quantitative"]},Mint:{2:["#e4f1e1","#0d585f"],3:["#e4f1e1","#63a6a0","#0d585f"],4:["#e4f1e1","#89c0b6","#448c8a","#0d585f"],5:["#E4F1E1","#9CCDC1","#63A6A0","#337F7F","#0D585F"],6:["#e4f1e1","#abd4c7","#7ab5ad","#509693","#2c7778","#0d585f"],7:["#e4f1e1","#b4d9cc","#89c0b6","#63a6a0","#448c8a","#287274","#0d585f"],tags:["quantitative"]},BluGrn:{2:["#c4e6c3","#1d4f60"],3:["#c4e6c3","#4da284","#1d4f60"],4:["#c4e6c3","#6dbc90","#36877a","#1d4f60"],5:["#c4e6c3","#80c799","#4da284","#2d7974","#1d4f60"],6:["#c4e6c3","#8dce9f","#5fb28b","#3e927e","#297071","#1d4f60"],7:["#c4e6c3","#96d2a4","#6dbc90","#4da284","#36877a","#266b6e","#1d4f60"],tags:["quantitative"]},DarkMint:{2:["#d2fbd4","#123f5a"],3:["#d2fbd4","#559c9e","#123f5a"],4:["#d2fbd4","#7bbcb0","#3a7c89","#123f5a"],5:["#d2fbd4","#8eccb9","#559c9e","#2b6c7f","#123f5a"],6:["#d2fbd4","#9cd5be","#6cafa9","#458892","#266377","#123f5a"],7:["#d2fbd4","#a5dbc2","#7bbcb0","#559c9e","#3a7c89","#235d72","#123f5a"],tags:["quantitative"]},Emrld:{2:["#d3f2a3","#074050"],3:["#d3f2a3","#4c9b82","#074050"],4:["#d3f2a3","#6cc08b","#217a79","#074050"],5:["#d3f2a3","#82d091","#4c9b82","#19696f","#074050"],6:["#d3f2a3","#8fda94","#60b187","#35877d","#145f69","#074050"],7:["#d3f2a3","#97e196","#6cc08b","#4c9b82","#217a79","#105965","#074050"],tags:["quantitative"]},ag_GrnYl:{2:["#245668","#EDEF5D"],3:["#245668","#39AB7E","#EDEF5D"],4:["#245668","#0D8F81","#6EC574","#EDEF5D"],5:["#245668","#04817E","#39AB7E","#8BD16D","#EDEF5D"],6:["#245668","#09787C","#1D9A81","#58BB79","#9DD869","#EDEF5D"],7:["#245668","#0F7279","#0D8F81","#39AB7E","#6EC574","#A9DC67","#EDEF5D"],tags:["aggregation"]},BluYl:{2:["#f7feae","#045275"],3:["#f7feae","#46aea0","#045275"],4:["#f7feae","#7ccba2","#089099","#045275"],5:["#f7feae","#9bd8a4","#46aea0","#058092","#045275"],6:["#f7feae","#ace1a4","#68bfa1","#2a9c9c","#02778e","#045275"],7:["#f7feae","#b7e6a5","#7ccba2","#46aea0","#089099","#00718b","#045275"],tags:["quantitative"]},Teal:{2:["#d1eeea","#2a5674"],3:["#d1eeea","#68abb8","#2a5674"],4:["#d1eeea","#85c4c9","#4f90a6","#2a5674"],5:["#d1eeea","#96d0d1","#68abb8","#45829b","#2a5674"],6:["#d1eeea","#a1d7d6","#79bbc3","#599bae","#3f7994","#2a5674"],7:["#d1eeea","#a8dbd9","#85c4c9","#68abb8","#4f90a6","#3b738f","#2a5674"],tags:["quantitative"]},TealGrn:{2:["#b0f2bc","#257d98"],3:["#b0f2bc","#4cc8a3","#257d98"],4:["#b0f2bc","#67dba5","#38b2a3","#257d98"],5:["#b0f2bc","#77e2a8","#4cc8a3","#31a6a2","#257d98"],6:["#b0f2bc","#82e6aa","#5bd4a4","#3fbba3","#2e9ea1","#257d98"],7:["#b0f2bc","#89e8ac","#67dba5","#4cc8a3","#38b2a3","#2c98a0","#257d98"],tags:["quantitative"]},Purp:{2:["#f3e0f7","#63589f"],3:["#f3e0f7","#b998dd","#63589f"],4:["#f3e0f7","#d1afe8","#9f82ce","#63589f"],5:["#f3e0f7","#dbbaed","#b998dd","#9178c4","#63589f"],6:["#f3e0f7","#e0c2ef","#c8a5e4","#aa8bd4","#8871be","#63589f"],7:["#f3e0f7","#e4c7f1","#d1afe8","#b998dd","#9f82ce","#826dba","#63589f"],tags:["quantitative"]},PurpOr:{3:["#f9ddda","#ce78b3","#573b88"],4:["#f9ddda","#e597b9","#ad5fad","#573b88"],5:["#f9ddda","#eda8bd","#ce78b3","#9955a8","#573b88"],6:["#f9ddda","#f0b2c1","#dd8ab6","#bb69b0","#8c4fa4","#573b88"],7:["#f9ddda","#f2b9c4","#e597b9","#ce78b3","#ad5fad","#834ba0","#573b88"],tags:["quantitative"]},Sunset:{2:["#f3e79b","#5c53a5"],3:["#f3e79b","#eb7f86","#5c53a5"],4:["#f3e79b","#f8a07e","#ce6693","#5c53a5"],5:["#f3e79b","#fab27f","#eb7f86","#b95e9a","#5c53a5"],6:["#f3e79b","#fabc82","#f59280","#dc6f8e","#ab5b9e","#5c53a5"],7:["#f3e79b","#fac484","#f8a07e","#eb7f86","#ce6693","#a059a0","#5c53a5"],tags:["quantitative"]},Magenta:{2:["#f3cbd3","#6c2167"],3:["#f3cbd3","#ca699d","#6c2167"],4:["#f3cbd3","#dd88ac","#b14d8e","#6c2167"],5:["#f3cbd3","#e498b4","#ca699d","#a24186","#6c2167"],6:["#f3cbd3","#e7a2b9","#d67ba5","#bc5894","#983a81","#6c2167"],7:["#f3cbd3","#eaa9bd","#dd88ac","#ca699d","#b14d8e","#91357d","#6c2167"],tags:["quantitative"]},SunsetDark:{2:["#fcde9c","#7c1d6f"],3:["#fcde9c","#e34f6f","#7c1d6f"],4:["#fcde9c","#f0746e","#dc3977","#7c1d6f"],5:["#fcde9c","#f58670","#e34f6f","#d72d7c","#7c1d6f"],6:["#fcde9c","#f89872","#ec666d","#df4273","#c5287b","#7c1d6f"],7:["#fcde9c","#faa476","#f0746e","#e34f6f","#dc3977","#b9257a","#7c1d6f"],tags:["quantitative"]},ag_Sunset:{2:["#4b2991","#edd9a3"],3:["#4b2991","#ea4f88","#edd9a3"],4:["#4b2991","#c0369d","#fa7876","#edd9a3"],5:["#4b2991","#a52fa2","#ea4f88","#fa9074","#edd9a3"],6:["#4b2991","#932da3","#d43f96","#f7667c","#f89f77","#edd9a3"],7:["#4b2991","#872ca2","#c0369d","#ea4f88","#fa7876","#f6a97a","#edd9a3"],tags:["aggregation"]},BrwnYl:{2:["#ede5cf","#541f3f"],3:["#ede5cf","#c1766f","#541f3f"],4:["#ede5cf","#d39c83","#a65461","#541f3f"],5:["#ede5cf","#daaf91","#c1766f","#95455a","#541f3f"],6:["#ede5cf","#ddba9b","#cd8c7a","#b26166","#8a3c56","#541f3f"],7:["#ede5cf","#e0c2a2","#d39c83","#c1766f","#a65461","#813753","#541f3f"],tags:["quantitative"]},ArmyRose:{2:["#929b4f","#db8195"],3:["#a3ad62","#fdfbe4","#df91a3"],4:["#929b4f","#d9dbaf","#f3d1ca","#db8195"],5:["#879043","#c1c68c","#fdfbe4","#ebb4b8","#d8758b"],6:["#7f883b","#b0b874","#e3e4be","#f6ddd1","#e4a0ac","#d66d85"],7:["#798234","#a3ad62","#d0d3a2","#fdfbe4","#f0c6c3","#df91a3","#d46780"],tags:["diverging"]},Fall:{2:["#3d5941","#ca562c"],3:["#3d5941","#f6edbd","#ca562c"],4:["#3d5941","#b5b991","#edbb8a","#ca562c"],5:["#3d5941","#96a07c","#f6edbd","#e6a272","#ca562c"],6:["#3d5941","#839170","#cecea2","#f1cf9e","#e19464","#ca562c"],7:["#3d5941","#778868","#b5b991","#f6edbd","#edbb8a","#de8a5a","#ca562c"],tags:["diverging"]},Geyser:{2:["#008080","#ca562c"],3:["#008080","#f6edbd","#ca562c"],4:["#008080","#b4c8a8","#edbb8a","#ca562c"],5:["#008080","#92b69e","#f6edbd","#e6a272","#ca562c"],6:["#008080","#7eab98","#ced7b1","#f1cf9e","#e19464","#ca562c"],7:["#008080","#70a494","#b4c8a8","#f6edbd","#edbb8a","#de8a5a","#ca562c"],tags:["diverging"]},Temps:{2:["#009392","#cf597e"],3:["#009392","#e9e29c","#cf597e"],4:["#009392","#9ccb86","#eeb479","#cf597e"],5:["#009392","#71be83","#e9e29c","#ed9c72","#cf597e"],6:["#009392","#52b684","#bcd48c","#edc783","#eb8d71","#cf597e"],7:["#009392","#39b185","#9ccb86","#e9e29c","#eeb479","#e88471","#cf597e"],tags:["diverging"]},TealRose:{2:["#009392","#d0587e"],3:["#009392","#f1eac8","#d0587e"],4:["#009392","#91b8aa","#f1eac8","#dfa0a0","#d0587e"],5:["#009392","#91b8aa","#f1eac8","#dfa0a0","#d0587e"],6:["#009392","#72aaa1","#b1c7b3","#e5b9ad","#d98994","#d0587e"],7:["#009392","#72aaa1","#b1c7b3","#f1eac8","#e5b9ad","#d98994","#d0587e"],tags:["diverging"]},Tropic:{2:["#009B9E","#C75DAB"],3:["#009B9E","#F1F1F1","#C75DAB"],4:["#009B9E","#A7D3D4","#E4C1D9","#C75DAB"],5:["#009B9E","#7CC5C6","#F1F1F1","#DDA9CD","#C75DAB"],6:["#009B9E","#5DBCBE","#C6DFDF","#E9D4E2","#D99BC6","#C75DAB"],7:["#009B9E","#42B7B9","#A7D3D4","#F1F1F1","#E4C1D9","#D691C1","#C75DAB"],tags:["diverging"]},Earth:{2:["#A16928","#2887a1"],3:["#A16928","#edeac2","#2887a1"],4:["#A16928","#d6bd8d","#b5c8b8","#2887a1"],5:["#A16928","#caa873","#edeac2","#98b7b2","#2887a1"],6:["#A16928","#c29b64","#e0cfa2","#cbd5bc","#85adaf","#2887a1"],7:["#A16928","#bd925a","#d6bd8d","#edeac2","#b5c8b8","#79a7ac","#2887a1"],tags:["diverging"]},Antique:{2:["#855C75","#D9AF6B","#7C7C7C"],3:["#855C75","#D9AF6B","#AF6458","#7C7C7C"],4:["#855C75","#D9AF6B","#AF6458","#736F4C","#7C7C7C"],5:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#7C7C7C"],6:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#7C7C7C"],7:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#68855C","#7C7C7C"],8:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#68855C","#9C9C5E","#7C7C7C"],9:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#68855C","#9C9C5E","#A06177","#7C7C7C"],10:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#68855C","#9C9C5E","#A06177","#8C785D","#7C7C7C"],11:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#68855C","#9C9C5E","#A06177","#8C785D","#467378","#7C7C7C"],tags:["qualitative"]},Bold:{2:["#7F3C8D","#11A579","#A5AA99"],3:["#7F3C8D","#11A579","#3969AC","#A5AA99"],4:["#7F3C8D","#11A579","#3969AC","#F2B701","#A5AA99"],5:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#A5AA99"],6:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#A5AA99"],7:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#A5AA99"],8:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#008695","#A5AA99"],9:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#008695","#CF1C90","#A5AA99"],10:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#008695","#CF1C90","#f97b72","#A5AA99"],11:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#008695","#CF1C90","#f97b72","#4b4b8f","#A5AA99"],tags:["qualitative"]},Pastel:{2:["#66C5CC","#F6CF71","#B3B3B3"],3:["#66C5CC","#F6CF71","#F89C74","#B3B3B3"],4:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#B3B3B3"],5:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#B3B3B3"],6:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#B3B3B3"],7:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#B3B3B3"],8:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#B3B3B3"],9:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#8BE0A4","#B3B3B3"],10:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#8BE0A4","#B497E7","#B3B3B3"],11:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#8BE0A4","#B497E7","#D3B484","#B3B3B3"],tags:["qualitative"]},Prism:{2:["#5F4690","#1D6996","#666666"],3:["#5F4690","#1D6996","#38A6A5","#666666"],4:["#5F4690","#1D6996","#38A6A5","#0F8554","#666666"],5:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#666666"],6:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#666666"],7:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#666666"],8:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#CC503E","#666666"],9:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#CC503E","#94346E","#666666"],10:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#CC503E","#94346E","#6F4070","#666666"],11:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#CC503E","#94346E","#6F4070","#994E95","#666666"],tags:["qualitative"]},Safe:{2:["#88CCEE","#CC6677","#888888"],3:["#88CCEE","#CC6677","#DDCC77","#888888"],4:["#88CCEE","#CC6677","#DDCC77","#117733","#888888"],5:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#888888"],6:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#888888"],7:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#44AA99","#888888"],8:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#44AA99","#999933","#888888"],9:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#44AA99","#999933","#882255","#888888"],10:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#44AA99","#999933","#882255","#661100","#888888"],11:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#44AA99","#999933","#882255","#661100","#6699CC","#888888"],tags:["qualitative","colorblind"]},Vivid:{2:["#E58606","#5D69B1","#A5AA99"],3:["#E58606","#5D69B1","#52BCA3","#A5AA99"],4:["#E58606","#5D69B1","#52BCA3","#99C945","#A5AA99"],5:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#A5AA99"],6:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#A5AA99"],7:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#DAA51B","#A5AA99"],8:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#DAA51B","#2F8AC4","#A5AA99"],9:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#DAA51B","#2F8AC4","#764E9F","#A5AA99"],10:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#DAA51B","#2F8AC4","#764E9F","#ED645A","#A5AA99"],11:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#DAA51B","#2F8AC4","#764E9F","#ED645A","#CC3A8E","#A5AA99"],tags:["qualitative"]}},a={Blues:{tags:["quantitative"]},BrBG:{tags:["diverging"]},Greys:{tags:["quantitative"]},PiYG:{tags:["diverging"]},PRGn:{tags:["diverging"]},Purples:{tags:["quantitative"]},RdYlGn:{tags:["diverging"]},Spectral:{tags:["diverging"]},YlOrBr:{tags:["quantitative"]},YlGn:{tags:["quantitative"]},YlGnBu:{tags:["quantitative"]},YlOrRd:{tags:["quantitative"]}},s=n(61);for(var u in s){var l=s[u],c={};for(var h in l)c[h]=l[h];u in a&&(c.tags=a[u].tags),o["cb_"+u]=c}void 0===(r="function"==typeof(i=o)?i.call(e,n,e,t):i)||(t.exports=r)}()},function(t,e,n){t.exports=n(62)},function(t,e,n){var i,r;void 0===(r="function"==typeof(i={YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}})?i.call(e,n,e,t):i)||(t.exports=r)},function(t,e,n){(function(e){"pseudomap"===e.env.npm_package_name&&"test"===e.env.npm_lifecycle_script&&(e.env.TEST_PSEUDOMAP="true"),t.exports="function"!=typeof Map||e.env.TEST_PSEUDOMAP?n(64):Map}).call(this,n(27))},function(t,e){var n=Object.prototype.hasOwnProperty;function i(t){if(!(this instanceof i))throw new TypeError("Constructor PseudoMap requires 'new'");if(this.clear(),t)if(t instanceof i||"function"==typeof Map&&t instanceof Map)t.forEach((function(t,e){this.set(e,t)}),this);else{if(!Array.isArray(t))throw new TypeError("invalid argument");t.forEach((function(t){this.set(t[0],t[1])}),this)}}function r(t,e){return t===e||t!=t&&e!=e}function o(t,e){for(var i=0,o="_"+e,a=o;n.call(t,a);a=o+i++)if(r(t[a].key,e))return t[a]}t.exports=i,i.prototype.forEach=function(t,e){e=e||this,Object.keys(this._data).forEach((function(n){"size"!==n&&t.call(e,this._data[n].value,this._data[n].key)}),this)},i.prototype.has=function(t){return!!o(this._data,t)},i.prototype.get=function(t){var e=o(this._data,t);return e&&e.value},i.prototype.set=function(t,e){!function(t,e,i){for(var o=0,a="_"+e,s=a;n.call(t,s);s=a+o++)if(r(t[s].key,e))return void(t[s].value=i);t.size++,t[s]=new function(t,e,n){this.key=t,this.value=e,this._index=n}(e,i,s)}(this._data,t,e)},i.prototype.delete=function(t){var e=o(this._data,t);e&&(delete this._data[e._index],this._data.size--)},i.prototype.clear=function(){var t=Object.create(null);t.size=0,Object.defineProperty(this,"_data",{value:t,enumerable:!1,configurable:!0,writable:!1})},Object.defineProperty(i.prototype,"size",{get:function(){return this._data.size},set:function(t){},enumerable:!0,configurable:!0}),i.prototype.values=i.prototype.keys=i.prototype.entries=function(){throw new Error("iterators are not implemented in this version")}},function(t,e,n){(function(t,i){var r=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var i=arguments,o=i.length,a=String(t).replace(r,(function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}})),u=i[n];n<o;u=i[++n])g(u)||!b(u)?a+=" "+u:a+=" "+s(u);return a},e.deprecate=function(n,r){if(_(t.process))return function(){return e.deprecate(n,r).apply(this,arguments)};if(!0===i.noDeprecation)return n;var o=!1;return function(){if(!o){if(i.throwDeprecation)throw new Error(r);i.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var o,a={};function s(t,n){var i={seen:[],stylize:l};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),f(n)?i.showHidden=n:n&&e._extend(i,n),_(i.showHidden)&&(i.showHidden=!1),_(i.depth)&&(i.depth=2),_(i.colors)&&(i.colors=!1),_(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=u),c(i,t,i.depth)}function u(t,e){var n=s.styles[e];return n?"\x1b["+s.colors[n][0]+"m"+t+"\x1b["+s.colors[n][1]+"m":t}function l(t,e){return t}function c(t,n,i){if(t.customInspect&&n&&C(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,t);return y(r)||(r=c(t,r,i)),r}var o=function(t,e){if(_(e))return t.stylize("undefined","undefined");if(y(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):f(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}(t,n);if(o)return o;var a=Object.keys(n),s=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),w(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return h(n);if(0===a.length){if(C(n))return t.stylize("[Function"+(n.name?": "+n.name:"")+"]","special");if(v(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return t.stylize(Date.prototype.toString.call(n),"date");if(w(n))return h(n)}var u,l="",b=!1,P=["{","}"];return p(n)&&(b=!0,P=["[","]"]),C(n)&&(l=" [Function"+(n.name?": "+n.name:"")+"]"),v(n)&&(l=" "+RegExp.prototype.toString.call(n)),x(n)&&(l=" "+Date.prototype.toUTCString.call(n)),w(n)&&(l=" "+h(n)),0!==a.length||b&&0!=n.length?i<0?v(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),u=b?function(t,e,n,i,r){for(var o=[],a=0,s=e.length;a<s;++a)k(e,String(a))?o.push(d(t,e,n,i,String(a),!0)):o.push("");return r.forEach((function(r){r.match(/^\d+$/)||o.push(d(t,e,n,i,r,!0))})),o}(t,n,i,s,a):a.map((function(e){return d(t,n,i,s,e,b)})),t.seen.pop(),function(t,e,n){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(u,l,P)):P[0]+l+P[1]}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function d(t,e,n,i,r,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?s=t.stylize(u.set?"[Getter/Setter]":"[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),k(i,r)||(a="["+r+"]"),s||(t.seen.indexOf(u.value)<0?(s=g(n)?c(t,u.value,null):c(t,u.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),_(a)){if(o&&r.match(/^\d+$/))return s;(a=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t){return Array.isArray(t)}function f(t){return"boolean"==typeof t}function g(t){return null===t}function m(t){return"number"==typeof t}function y(t){return"string"==typeof t}function _(t){return void 0===t}function v(t){return b(t)&&"[object RegExp]"===P(t)}function b(t){return"object"==typeof t&&null!==t}function x(t){return b(t)&&"[object Date]"===P(t)}function w(t){return b(t)&&("[object Error]"===P(t)||t instanceof Error)}function C(t){return"function"==typeof t}function P(t){return Object.prototype.toString.call(t)}function M(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(_(o)&&(o=i.env.NODE_DEBUG||""),t=t.toUpperCase(),!a[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var n=i.pid;a[t]=function(){var i=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,i)}}else a[t]=function(){};return a[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=f,e.isNull=g,e.isNullOrUndefined=function(t){return null==t},e.isNumber=m,e.isString=y,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=_,e.isRegExp=v,e.isObject=b,e.isDate=x,e.isError=w,e.isFunction=C,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(67);var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",function(){var t=new Date,e=[M(t.getHours()),M(t.getMinutes()),M(t.getSeconds())].join(":");return[t.getDate(),O[t.getMonth()],e].join(" ")}(),e.format.apply(e,arguments))},e.inherits=n(68),e._extend=function(t,e){if(!e||!b(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}}).call(this,n(66),n(27))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){t.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){function n(t){var e=this;if(e instanceof n||(e=new n),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach((function(t){e.push(t)}));else if(arguments.length>0)for(var i=0,r=arguments.length;i<r;i++)e.push(arguments[i]);return e}function i(t,e){t.tail=new o(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function r(t,e){t.head=new o(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function o(t,e,n,i){if(!(this instanceof o))return new o(t,e,n,i);this.list=i,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}t.exports=n,n.Node=o,n.create=n,n.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null},n.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},n.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},n.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)i(this,arguments[t]);return this.length},n.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)r(this,arguments[t]);return this.length},n.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},n.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},n.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,i=0;null!==n;i++)t.call(e,n.value,i,this),n=n.next},n.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,i=this.length-1;null!==n;i--)t.call(e,n.value,i,this),n=n.prev},n.prototype.get=function(t){for(var e=0,n=this.head;null!==n&&e<t;e++)n=n.next;if(e===t&&null!==n)return n.value},n.prototype.getReverse=function(t){for(var e=0,n=this.tail;null!==n&&e<t;e++)n=n.prev;if(e===t&&null!==n)return n.value},n.prototype.map=function(t,e){e=e||this;for(var i=new n,r=this.head;null!==r;)i.push(t.call(e,r.value,this)),r=r.next;return i},n.prototype.mapReverse=function(t,e){e=e||this;for(var i=new n,r=this.tail;null!==r;)i.push(t.call(e,r.value,this)),r=r.prev;return i},n.prototype.reduce=function(t,e){var n,i=this.head;if(arguments.length>1)n=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,n=this.head.value}for(var r=0;null!==i;r++)n=t(n,i.value,r),i=i.next;return n},n.prototype.reduceReverse=function(t,e){var n,i=this.tail;if(arguments.length>1)n=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,n=this.tail.value}for(var r=this.length-1;null!==i;r--)n=t(n,i.value,r),i=i.prev;return n},n.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;null!==n;e++)t[e]=n.value,n=n.next;return t},n.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;null!==n;e++)t[e]=n.value,n=n.prev;return t},n.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var i=new n;if(e<t||e<0)return i;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,o=this.head;null!==o&&r<t;r++)o=o.next;for(;null!==o&&r<e;r++,o=o.next)i.push(o.value);return i},n.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var i=new n;if(e<t||e<0)return i;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,o=this.tail;null!==o&&r>e;r--)o=o.prev;for(;null!==o&&r>t;r--,o=o.prev)i.push(o.value);return i},n.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;null!==n;n=n.prev){var i=n.prev;n.prev=n.next,n.next=i}return this.head=e,this.tail=t,this}},function(t,e,n){"use strict";var i=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var n;try{(n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),n=n.getBlob()}catch(e){n=new Blob([t])}return new Worker(i.createObjectURL(n))}catch(e){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!e)throw Error("Inline worker is not supported");return new Worker(e)}}},function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"create",(function(){return nt})),n.d(i,"clone",(function(){return it})),n.d(i,"copy",(function(){return rt})),n.d(i,"fromValues",(function(){return ot})),n.d(i,"set",(function(){return at})),n.d(i,"identity",(function(){return st})),n.d(i,"transpose",(function(){return ut})),n.d(i,"invert",(function(){return lt})),n.d(i,"adjoint",(function(){return ct})),n.d(i,"determinant",(function(){return ht})),n.d(i,"multiply",(function(){return dt})),n.d(i,"translate",(function(){return pt})),n.d(i,"scale",(function(){return ft})),n.d(i,"rotate",(function(){return gt})),n.d(i,"rotateX",(function(){return mt})),n.d(i,"rotateY",(function(){return yt})),n.d(i,"rotateZ",(function(){return _t})),n.d(i,"fromTranslation",(function(){return vt})),n.d(i,"fromScaling",(function(){return bt})),n.d(i,"fromRotation",(function(){return xt})),n.d(i,"fromXRotation",(function(){return wt})),n.d(i,"fromYRotation",(function(){return Ct})),n.d(i,"fromZRotation",(function(){return Pt})),n.d(i,"fromRotationTranslation",(function(){return Mt})),n.d(i,"fromQuat2",(function(){return Ot})),n.d(i,"getTranslation",(function(){return kt})),n.d(i,"getScaling",(function(){return Et})),n.d(i,"getRotation",(function(){return St})),n.d(i,"fromRotationTranslationScale",(function(){return Tt})),n.d(i,"fromRotationTranslationScaleOrigin",(function(){return At})),n.d(i,"fromQuat",(function(){return It})),n.d(i,"frustum",(function(){return Dt})),n.d(i,"perspective",(function(){return Rt})),n.d(i,"perspectiveFromFieldOfView",(function(){return Ft})),n.d(i,"ortho",(function(){return Lt})),n.d(i,"lookAt",(function(){return zt})),n.d(i,"targetTo",(function(){return Nt})),n.d(i,"str",(function(){return Bt})),n.d(i,"frob",(function(){return Vt})),n.d(i,"add",(function(){return Ut})),n.d(i,"subtract",(function(){return jt})),n.d(i,"multiplyScalar",(function(){return qt})),n.d(i,"multiplyScalarAndAdd",(function(){return Gt})),n.d(i,"exactEquals",(function(){return Ht})),n.d(i,"equals",(function(){return Zt})),n.d(i,"mul",(function(){return Wt})),n.d(i,"sub",(function(){return Kt}));var r={};n.r(r),n.d(r,"create",(function(){return Xt})),n.d(r,"clone",(function(){return $t})),n.d(r,"fromValues",(function(){return Yt})),n.d(r,"copy",(function(){return Qt})),n.d(r,"set",(function(){return Jt})),n.d(r,"add",(function(){return te})),n.d(r,"subtract",(function(){return ee})),n.d(r,"multiply",(function(){return ne})),n.d(r,"divide",(function(){return ie})),n.d(r,"ceil",(function(){return re})),n.d(r,"floor",(function(){return oe})),n.d(r,"min",(function(){return ae})),n.d(r,"max",(function(){return se})),n.d(r,"round",(function(){return ue})),n.d(r,"scale",(function(){return le})),n.d(r,"scaleAndAdd",(function(){return ce})),n.d(r,"distance",(function(){return he})),n.d(r,"squaredDistance",(function(){return de})),n.d(r,"length",(function(){return pe})),n.d(r,"squaredLength",(function(){return fe})),n.d(r,"negate",(function(){return ge})),n.d(r,"inverse",(function(){return me})),n.d(r,"normalize",(function(){return ye})),n.d(r,"dot",(function(){return _e})),n.d(r,"lerp",(function(){return ve})),n.d(r,"random",(function(){return be})),n.d(r,"transformMat4",(function(){return xe})),n.d(r,"transformQuat",(function(){return we})),n.d(r,"str",(function(){return Ce})),n.d(r,"exactEquals",(function(){return Pe})),n.d(r,"equals",(function(){return Me})),n.d(r,"sub",(function(){return Oe})),n.d(r,"mul",(function(){return ke})),n.d(r,"div",(function(){return Ee})),n.d(r,"dist",(function(){return Se})),n.d(r,"sqrDist",(function(){return Te})),n.d(r,"len",(function(){return Ae})),n.d(r,"sqrLen",(function(){return Ie})),n.d(r,"forEach",(function(){return De}));var o={};n.r(o),n.d(o,"colorShaderGLSL",(function(){return Bn})),n.d(o,"filterShaderGLSL",(function(){return Vn})),n.d(o,"widthShaderGLSL",(function(){return Un}));var a={};n.r(a),n.d(a,"symbolShaderGLSL",(function(){return Hn}));var s={};n.r(s),n.d(s,"number",(function(){return Wa})),n.d(s,"category",(function(){return Ka})),n.d(s,"list",(function(){return Xa})),n.d(s,"rgb",(function(){return $a})),n.d(s,"rgba",(function(){return Ya})),n.d(s,"transition",(function(){return Qa})),n.d(s,"nin",(function(){return ts})),n.d(s,"in",(function(){return Ja})),n.d(s,"between",(function(){return es})),n.d(s,"mul",(function(){return ns})),n.d(s,"div",(function(){return is})),n.d(s,"add",(function(){return rs})),n.d(s,"sub",(function(){return os})),n.d(s,"pow",(function(){return as})),n.d(s,"mod",(function(){return ss})),n.d(s,"greaterThan",(function(){return us})),n.d(s,"greaterThanOrEqualTo",(function(){return ls})),n.d(s,"lessThan",(function(){return cs})),n.d(s,"lessThanOrEqualTo",(function(){return hs})),n.d(s,"equals",(function(){return ds})),n.d(s,"notEquals",(function(){return ps})),n.d(s,"and",(function(){return fs})),n.d(s,"or",(function(){return gs})),n.d(s,"gt",(function(){return ms})),n.d(s,"gte",(function(){return ys})),n.d(s,"lt",(function(){return _s})),n.d(s,"lte",(function(){return vs})),n.d(s,"eq",(function(){return bs})),n.d(s,"neq",(function(){return xs})),n.d(s,"blend",(function(){return ws})),n.d(s,"buckets",(function(){return Cs})),n.d(s,"cielab",(function(){return Ps})),n.d(s,"clusterAvg",(function(){return Ms})),n.d(s,"clusterMax",(function(){return Os})),n.d(s,"clusterMin",(function(){return ks})),n.d(s,"clusterMode",(function(){return Es})),n.d(s,"clusterSum",(function(){return Ss})),n.d(s,"clusterCount",(function(){return Ts})),n.d(s,"clusterTime",(function(){return As})),n.d(s,"constant",(function(){return Is})),n.d(s,"image",(function(){return Ds})),n.d(s,"svg",(function(){return Rs})),n.d(s,"hex",(function(){return Fs})),n.d(s,"hsl",(function(){return Ls})),n.d(s,"hsla",(function(){return zs})),n.d(s,"hsv",(function(){return Ns})),n.d(s,"hsva",(function(){return Bs})),n.d(s,"cubic",(function(){return Vs})),n.d(s,"ilinear",(function(){return Us})),n.d(s,"linear",(function(){return js})),n.d(s,"namedColor",(function(){return qs})),n.d(s,"now",(function(){return Gs})),n.d(s,"opacity",(function(){return Hs})),n.d(s,"asc",(function(){return Zs})),n.d(s,"desc",(function(){return Ws})),n.d(s,"noOrder",(function(){return Ks})),n.d(s,"width",(function(){return Xs})),n.d(s,"reverse",(function(){return $s})),n.d(s,"property",(function(){return Ys})),n.d(s,"prop",(function(){return Ys})),n.d(s,"globalQuantiles",(function(){return Qs})),n.d(s,"viewportQuantiles",(function(){return Js})),n.d(s,"globalEqIntervals",(function(){return tu})),n.d(s,"viewportEqIntervals",(function(){return eu})),n.d(s,"globalStandardDev",(function(){return nu})),n.d(s,"viewportStandardDev",(function(){return iu})),n.d(s,"ramp",(function(){return ru})),n.d(s,"time",(function(){return ou})),n.d(s,"date",(function(){return ou})),n.d(s,"timeRange",(function(){return au})),n.d(s,"top",(function(){return su})),n.d(s,"fade",(function(){return uu})),n.d(s,"animation",(function(){return lu})),n.d(s,"log",(function(){return cu})),n.d(s,"sqrt",(function(){return hu})),n.d(s,"sin",(function(){return du})),n.d(s,"cos",(function(){return pu})),n.d(s,"tan",(function(){return fu})),n.d(s,"sign",(function(){return gu})),n.d(s,"abs",(function(){return mu})),n.d(s,"isNull",(function(){return yu})),n.d(s,"not",(function(){return _u})),n.d(s,"floor",(function(){return vu})),n.d(s,"ceil",(function(){return bu})),n.d(s,"variable",(function(){return xu})),n.d(s,"var",(function(){return xu})),n.d(s,"viewportAvg",(function(){return wu})),n.d(s,"viewportMax",(function(){return Cu})),n.d(s,"viewportMin",(function(){return Pu})),n.d(s,"viewportSum",(function(){return Mu})),n.d(s,"viewportCount",(function(){return Ou})),n.d(s,"viewportPercentile",(function(){return ku})),n.d(s,"viewportHistogram",(function(){return Eu})),n.d(s,"viewportFeatures",(function(){return Su})),n.d(s,"globalAvg",(function(){return Tu})),n.d(s,"globalMax",(function(){return Au})),n.d(s,"globalMin",(function(){return Iu})),n.d(s,"globalSum",(function(){return Du})),n.d(s,"globalCount",(function(){return Ru})),n.d(s,"globalPercentile",(function(){return Fu})),n.d(s,"globalHistogram",(function(){return Lu})),n.d(s,"zoom",(function(){return zu})),n.d(s,"scaled",(function(){return Nu})),n.d(s,"zoomrange",(function(){return Bu})),n.d(s,"placement",(function(){return Vu})),n.d(s,"translate",(function(){return Uu})),n.d(s,"rotate",(function(){return ju})),n.d(s,"alphaNormalize",(function(){return qu})),n.d(s,"HOLD",(function(){return Gu})),n.d(s,"TRUE",(function(){return Hu})),n.d(s,"FALSE",(function(){return Zu})),n.d(s,"PI",(function(){return Wu})),n.d(s,"E",(function(){return Ku})),n.d(s,"BICYCLE",(function(){return Xu})),n.d(s,"BUILDING",(function(){return $u})),n.d(s,"BUS",(function(){return Yu})),n.d(s,"CAR",(function(){return Qu})),n.d(s,"CIRCLE",(function(){return Ju})),n.d(s,"CIRCLE_OUTLINE",(function(){return tl})),n.d(s,"CROSS",(function(){return el})),n.d(s,"FLAG",(function(){return nl})),n.d(s,"HOUSE",(function(){return il})),n.d(s,"MARKER",(function(){return rl})),n.d(s,"MARKER_OUTLINE",(function(){return ol})),n.d(s,"PLUS",(function(){return al})),n.d(s,"SQUARE",(function(){return sl})),n.d(s,"SQUARE_OUTLINE",(function(){return ul})),n.d(s,"STAR",(function(){return ll})),n.d(s,"STAR_OUTLINE",(function(){return cl})),n.d(s,"TRIANGLE",(function(){return hl})),n.d(s,"TRIANGLE_OUTLINE",(function(){return dl})),n.d(s,"ALIGN_CENTER",(function(){return pl})),n.d(s,"ALIGN_BOTTOM",(function(){return fl})),n.d(s,"palettes",(function(){return go})),n.d(s,"Asc",(function(){return ro})),n.d(s,"Desc",(function(){return oo}));var u={};n.r(u),n.d(u,"voyager",(function(){return vh})),n.d(u,"darkmatter",(function(){return bh})),n.d(u,"positron",(function(){return xh}));var l=n(7),c=n.n(l),h=n(13),d=n.n(h),p=n(1),f=n.n(p),g=n(4),m=n.n(g),y=n(9),_=n.n(y),v=["year","month","day","hour","minute","second"],b=[1,1,1,0,0,0],x=864e5;function w(t){for(var e=v.length-1;e>0&&t[v[e]]===b[e];)--e;return e}function C(t,e){return t.toString().padStart(e,"0")}function P(t){var e=tn(t);return{year:e.getUTCFullYear(),month:e.getUTCMonth()+1,day:e.getUTCDate(),hour:e.getUTCHours(),minute:e.getUTCMinutes(),second:e.getUTCSeconds()}}function M(t,e){throw new Error("Invalid period of ".concat(e," between ").concat(t.v1," and ").concat(t.v2))}function O(t,e){var n=P(t),i=P(e),r=w(n),o=w(i),a={v1:t,v2:e,t1:n,t2:i};return 0===Math.max(r,o)?function(t){var e=t.t2.year-t.t1.year;return 1e3===e&&(t.t1.year-1)%1e3==0?"M".concat(1+(t.t1.year-1)/1e3):100===e&&(t.t1.year-1)%100==0?"C".concat(1+(t.t1.year-1)/100):10===e&&t.t1.year%10==0?"D".concat(t.t1.year/10):1===e?C(t.t1.year,4):void M("".concat(e," years"))}(a):1===Math.max(r,o)?function(t){var e=12*t.t2.year+t.t2.month-12*t.t1.year-t.t1.month;return 6===e&&(t.t1.month-1)%6==0?"".concat(C(t.t1.year,4),"S").concat(1+(t.t1.month-1)/6):4===e?"".concat(C(t.t1.year,4),"t").concat(1+(t.t1.month-1)/4):3===e?"".concat(C(t.t1.year,4),"-Q").concat(1+(t.t1.month-1)/3):1===e?"".concat(C(t.t1.year,4),"-").concat(C(t.t1.month,2)):void M("".concat(e," months"))}(a):2===Math.max(r,o)?function(t){var e=Math.round((t.v2-t.v1)/x);if(1===e)return"".concat(C(t.t1.year,4),"-").concat(C(t.t1.month,2),"-").concat(C(t.t1.day,2));if(7===e){var n=t.t1.year,i=Date.UTC(n,0,1),r=function t(e,n){var i=function(t,e,n){var i=new Date(t,0,1).getDay();return 0===i?7:i}(e),r=i>4?9-i:2-i;return Math.abs(n-r)%7!=0?[]:n<r?t(e-1,n+=Math.round((Date.UTC(e,0,1)-Date.UTC(e-1,0,1))/x)):Date.UTC(e,0,1)+(n-1+3)*x>=Date.UTC(e+1,0,1)?t(e+1,n-=Math.round((Date.UTC(e+1,0,1)-Date.UTC(e,0,1))/x)):[e,1+Math.round((n-r)/7)]}(n,1+Math.round((t.v1-i)/x)),o=_()(r,2),a=o[0],s=o[1];if(a&&s)return"".concat(C(a,4),"-W").concat(C(s,2));M("7 days")}else M("".concat(e," days"))}(a):3===Math.max(r,o)?function(t){var e=Math.round((t.v2-t.v1)/36e5);if(1===e)return"".concat(C(t.t1.year,4),"-").concat(C(t.t1.month,2),"-").concat(C(t.t1.day,2),"T").concat(C(t.t1.hour,2));M("".concat(e," hours"))}(a):4===Math.max(r,o)?function(t){var e=Math.round((t.v2-t.v1)/6e4);if(1===e)return"".concat(C(t.t1.year,4),"-").concat(C(t.t1.month,2),"-").concat(C(t.t1.day,2),"T").concat(C(t.t1.hour,2),":").concat(C(t.t1.minute,2));M("".concat(e," minutes"))}(a):5===Math.max(r,o)?function(t){var e=Math.round((t.v2-t.v1)/1e3);if(1===e)return"".concat(C(t.t1.year,4),"-").concat(C(t.t1.month,2),"-").concat(C(t.t1.day,2),"T").concat(C(t.t1.hour,2),":").concat(C(t.t1.minute,2),":").concat(C(t.t1.second,2));M("".concat(e," seconds"))}(a):void M(a,"fractional seconds")}var k=n(2),E=n.n(k),S=n(0),T=n.n(S),A=n(3),I=n.n(A),D=n(28),R=function(t){function e(t){var n;if(f()(this,e),!t)throw Error("Invalid CartoError, a message is mandatory");if(!t.message)throw Error("Invalid CartoError, a message is mandatory");if(!t.type)throw Error("Invalid CartoError, a type is mandatory");return(n=E()(this,T()(e).call(this,"".concat(t.type," ").concat(t.message)))).name="CartoError",n.type=t.type,n.originalError=t,n}return I()(e,t),e}(n.n(D)()(Error)),F=function(t){function e(t){var n;return f()(this,e),(n=E()(this,T()(e).call(this,{message:t,type:"[Error]"}))).name="CartoParsingError",n}return I()(e,t),e}(R),L=function(){function t(e){f()(this,t),this._format=e}return m()(t,[{key:"check",value:function(t){return t.match(this._format)}}]),t}();function z(t,e){return void 0===t?e:Number(t)}function N(t){return{year:z(t.year,1),month:z(t.month,1),day:z(t.day,1),hour:z(t.hour,0),minute:z(t.minute,0),second:z(t.second,0)}}function B(t){return N({year:t[1],month:t[2],day:t[3],hour:t[4],minute:t[5],second:t[6]})}var V=function(t){function e(){return f()(this,e),E()(this,T()(e).call(this,/^(\d\d\d\d)(?:\-?(\d\d)(?:\-?(\d\d)(?:[T\s]?(\d\d)(?:\:(\d\d)(?:\:(\d\d))?)?)?)?)?$/))}return I()(e,t),m()(e,[{key:"parse",value:function(t){var e=this.check(t)||[],n=e.slice(),i=[1,2,3,4,5,6].find((function(t){return void 0===n[t]}))||7;return 1===i?n[1]=2:n[i-1]=Number(n[i-1])+1,[B(e),B(n)]}}]),e}(L),U=function(t){function e(){return f()(this,e),E()(this,T()(e).call(this,/^M(\d+)$/))}return I()(e,t),m()(e,[{key:"parse",value:function(t){var e=this.check(t),n=Number(e[1]),i=function(t){return 1e3*(t-1)+1};return[N({year:i(n)}),N({year:i(n+1)})]}}]),e}(L),j=function(t){function e(){return f()(this,e),E()(this,T()(e).call(this,/^C(\d+)$/))}return I()(e,t),m()(e,[{key:"parse",value:function(t){var e=this.check(t),n=Number(e[1]),i=function(t){return 100*(t-1)+1};return[N({year:i(n)}),N({year:i(n+1)})]}}]),e}(L),q=function(t){function e(){return f()(this,e),E()(this,T()(e).call(this,/^D(\d+)$/))}return I()(e,t),m()(e,[{key:"parse",value:function(t){var e=this.check(t),n=Number(e[1]),i=function(t){return 10*t};return[N({year:i(n)}),N({year:i(n+1)})]}}]),e}(L),G=function(t){function e(){return f()(this,e),E()(this,T()(e).call(this,/^(\d\d\d\d)S(\d)$/))}return I()(e,t),m()(e,[{key:"parse",value:function(t){var e=this.check(t),n=Number(e[1]),i=Number(e[2]),r=function(t){return 6*(t-1)+1};return[N({year:n,month:r(i)}),N({year:n,month:r(i+1)})]}}]),e}(L),H=function(t){function e(){return f()(this,e),E()(this,T()(e).call(this,/^(\d\d\d\d)t(\d)$/))}return I()(e,t),m()(e,[{key:"parse",value:function(t){var e=this.check(t),n=Number(e[1]),i=Number(e[2]),r=function(t){return 4*(t-1)+1};return[N({year:n,month:r(i)}),N({year:n,month:r(i+1)})]}}]),e}(L),Z=function(t){function e(){return f()(this,e),E()(this,T()(e).call(this,/^(\d\d\d\d)\-?Q(\d)$/))}return I()(e,t),m()(e,[{key:"parse",value:function(t){var e=this.check(t),n=Number(e[1]),i=Number(e[2]),r=function(t){return 3*(t-1)+1};return[N({year:n,month:r(i)}),N({year:n,month:r(i+1)})]}}]),e}(L);function W(t,e){var n=function(t,e,n){var i=new Date(t,0,1).getDay();return 0===i?7:i}(t);return function(t,e){var n=new Date(t.valueOf());return n.setDate(n.getDate()+e),n}(new Date(t,0,n>4?9-n:2-n),7*(e-1))}var K=function(t){function e(){return f()(this,e),E()(this,T()(e).call(this,/^(\d\d\d\d)\-?W(\d\d)$/))}return I()(e,t),m()(e,[{key:"parse",value:function(t){var e=this.check(t),n=Number(e[1]),i=Number(e[2]),r=W(n,i),o=W(n,i+1),a=function(t){return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}};return[N(a(r)),N(a(o))]}}]),e}(L),X=[new U,new j,new q,new G,new H,new Z,new K,new V],$=function(){function t(e,n){f()(this,t),this._value=e,this._date=tn(e),this._timeZone=n}return m()(t,[{key:"year",get:function(){return this._date.getUTCFullYear()}},{key:"month",get:function(){return this._date.getUTCMonth()+1}},{key:"day",get:function(){return this._date.getUTCDate()}},{key:"hour",get:function(){return this._date.getUTCHours()}},{key:"minute",get:function(){return this._date.getUTCMinutes()}},{key:"second",get:function(){return this._date.getUTCSeconds()}},{key:"text",get:function(){return O(this._date.getTime(),this._date.getTime()+1e3)}},{key:"timeZone",get:function(){return this._timeZone}}],[{key:"fromValue",value:function(e,n){return new t(e,n)}},{key:"from",value:function(t,e,n,i,r,o,a){return this.fromValue(Date.UTC(t,(e||1)-1,n,i,r,o),a)}}]),t}(),Y=function(){function t(e,n,i,r){if(f()(this,t),this._startValue=i,this._endValue=r,i&&r)this._iso=O(i,r);else if(!i&&!r&&n){var o=function(t){return function(t){var e=function(t){return X.find((function(e){return e.check(t)}))}(t=t||"");if(!e)throw new F("No date parser found for ".concat(t));return e.parse(t)}(t).map(Q)}(n);this._iso=n,this._startValue=o[0],this._endValue=o[1]}this._timeZone=e}return m()(t,[{key:"timeZone",get:function(){return this._timeZone}},{key:"iso",get:function(){return this._iso}},{key:"startValue",get:function(){return this._startValue}},{key:"endValue",get:function(){return this._endValue}},{key:"startDate",get:function(){return $.fromValue(this._startValue,this._timeZone)}},{key:"endDate",get:function(){return $.fromValue(this._endValue,this._timeZone)}}]),t}();function Q(t){return Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second)}var J=1e-6,tt="undefined"!=typeof Float32Array?Float32Array:Array,et=Math.random;function nt(){var t=new tt(16);return tt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function it(t){var e=new tt(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function rt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ot(t,e,n,i,r,o,a,s,u,l,c,h,d,p,f,g){var m=new tt(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=i,m[4]=r,m[5]=o,m[6]=a,m[7]=s,m[8]=u,m[9]=l,m[10]=c,m[11]=h,m[12]=d,m[13]=p,m[14]=f,m[15]=g,m}function at(t,e,n,i,r,o,a,s,u,l,c,h,d,p,f,g,m){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=l,t[9]=c,t[10]=h,t[11]=d,t[12]=p,t[13]=f,t[14]=g,t[15]=m,t}function st(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ut(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=o,t[11]=e[14],t[12]=r,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function lt(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],d=e[10],p=e[11],f=e[12],g=e[13],m=e[14],y=e[15],_=n*s-i*a,v=n*u-r*a,b=n*l-o*a,x=i*u-r*s,w=i*l-o*s,C=r*l-o*u,P=c*g-h*f,M=c*m-d*f,O=c*y-p*f,k=h*m-d*g,E=h*y-p*g,S=d*y-p*m,T=_*S-v*E+b*k+x*O-w*M+C*P;return T?(t[0]=(s*S-u*E+l*k)*(T=1/T),t[1]=(r*E-i*S-o*k)*T,t[2]=(g*C-m*w+y*x)*T,t[3]=(d*w-h*C-p*x)*T,t[4]=(u*O-a*S-l*M)*T,t[5]=(n*S-r*O+o*M)*T,t[6]=(m*b-f*C-y*v)*T,t[7]=(c*C-d*b+p*v)*T,t[8]=(a*E-s*O+l*P)*T,t[9]=(i*O-n*E-o*P)*T,t[10]=(f*w-g*b+y*_)*T,t[11]=(h*b-c*w-p*_)*T,t[12]=(s*M-a*k-u*P)*T,t[13]=(n*k-i*M+r*P)*T,t[14]=(g*v-f*x-m*_)*T,t[15]=(c*x-h*v+d*_)*T,t):null}function ct(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],d=e[10],p=e[11],f=e[12],g=e[13],m=e[14],y=e[15];return t[0]=s*(d*y-p*m)-h*(u*y-l*m)+g*(u*p-l*d),t[1]=-(i*(d*y-p*m)-h*(r*y-o*m)+g*(r*p-o*d)),t[2]=i*(u*y-l*m)-s*(r*y-o*m)+g*(r*l-o*u),t[3]=-(i*(u*p-l*d)-s*(r*p-o*d)+h*(r*l-o*u)),t[4]=-(a*(d*y-p*m)-c*(u*y-l*m)+f*(u*p-l*d)),t[5]=n*(d*y-p*m)-c*(r*y-o*m)+f*(r*p-o*d),t[6]=-(n*(u*y-l*m)-a*(r*y-o*m)+f*(r*l-o*u)),t[7]=n*(u*p-l*d)-a*(r*p-o*d)+c*(r*l-o*u),t[8]=a*(h*y-p*g)-c*(s*y-l*g)+f*(s*p-l*h),t[9]=-(n*(h*y-p*g)-c*(i*y-o*g)+f*(i*p-o*h)),t[10]=n*(s*y-l*g)-a*(i*y-o*g)+f*(i*l-o*s),t[11]=-(n*(s*p-l*h)-a*(i*p-o*h)+c*(i*l-o*s)),t[12]=-(a*(h*m-d*g)-c*(s*m-u*g)+f*(s*d-u*h)),t[13]=n*(h*m-d*g)-c*(i*m-r*g)+f*(i*d-r*h),t[14]=-(n*(s*m-u*g)-a*(i*m-r*g)+f*(i*u-r*s)),t[15]=n*(s*d-u*h)-a*(i*d-r*h)+c*(i*u-r*s),t}function ht(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],d=t[11],p=t[12],f=t[13],g=t[14],m=t[15];return(e*a-n*o)*(h*m-d*g)-(e*s-i*o)*(c*m-d*f)+(e*u-r*o)*(c*g-h*f)+(n*s-i*a)*(l*m-d*p)-(n*u-r*a)*(l*g-h*p)+(i*u-r*s)*(l*f-c*p)}function dt(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],d=e[9],p=e[10],f=e[11],g=e[12],m=e[13],y=e[14],_=e[15],v=n[0],b=n[1],x=n[2],w=n[3];return t[0]=v*i+b*s+x*h+w*g,t[1]=v*r+b*u+x*d+w*m,t[2]=v*o+b*l+x*p+w*y,t[3]=v*a+b*c+x*f+w*_,t[4]=(v=n[4])*i+(b=n[5])*s+(x=n[6])*h+(w=n[7])*g,t[5]=v*r+b*u+x*d+w*m,t[6]=v*o+b*l+x*p+w*y,t[7]=v*a+b*c+x*f+w*_,t[8]=(v=n[8])*i+(b=n[9])*s+(x=n[10])*h+(w=n[11])*g,t[9]=v*r+b*u+x*d+w*m,t[10]=v*o+b*l+x*p+w*y,t[11]=v*a+b*c+x*f+w*_,t[12]=(v=n[12])*i+(b=n[13])*s+(x=n[14])*h+(w=n[15])*g,t[13]=v*r+b*u+x*d+w*m,t[14]=v*o+b*l+x*p+w*y,t[15]=v*a+b*c+x*f+w*_,t}function pt(t,e,n){var i=n[0],r=n[1],o=n[2],a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,h=void 0,d=void 0,p=void 0,f=void 0,g=void 0,m=void 0,y=void 0;return e===t?(t[12]=e[0]*i+e[4]*r+e[8]*o+e[12],t[13]=e[1]*i+e[5]*r+e[9]*o+e[13],t[14]=e[2]*i+e[6]*r+e[10]*o+e[14],t[15]=e[3]*i+e[7]*r+e[11]*o+e[15]):(s=e[1],u=e[2],l=e[3],c=e[4],h=e[5],d=e[6],p=e[7],f=e[8],g=e[9],m=e[10],y=e[11],t[0]=a=e[0],t[1]=s,t[2]=u,t[3]=l,t[4]=c,t[5]=h,t[6]=d,t[7]=p,t[8]=f,t[9]=g,t[10]=m,t[11]=y,t[12]=a*i+c*r+f*o+e[12],t[13]=s*i+h*r+g*o+e[13],t[14]=u*i+d*r+m*o+e[14],t[15]=l*i+p*r+y*o+e[15]),t}function ft(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function gt(t,e,n,i){var r,o,a,s,u,l,c,h,d,p,f,g,m,y,_,v,b,x,w,C,P,M,O,k,E=i[0],S=i[1],T=i[2],A=Math.sqrt(E*E+S*S+T*T);return A<J?null:(E*=A=1/A,S*=A,T*=A,r=Math.sin(n),a=1-(o=Math.cos(n)),u=e[1],l=e[2],c=e[3],d=e[5],p=e[6],f=e[7],m=e[9],y=e[10],_=e[11],w=E*S*a-T*r,C=S*S*a+o,P=T*S*a+E*r,M=E*T*a+S*r,O=S*T*a-E*r,k=T*T*a+o,t[0]=(s=e[0])*(v=E*E*a+o)+(h=e[4])*(b=S*E*a+T*r)+(g=e[8])*(x=T*E*a-S*r),t[1]=u*v+d*b+m*x,t[2]=l*v+p*b+y*x,t[3]=c*v+f*b+_*x,t[4]=s*w+h*C+g*P,t[5]=u*w+d*C+m*P,t[6]=l*w+p*C+y*P,t[7]=c*w+f*C+_*P,t[8]=s*M+h*O+g*k,t[9]=u*M+d*O+m*k,t[10]=l*M+p*O+y*k,t[11]=c*M+f*O+_*k,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function mt(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+l*i,t[5]=a*r+c*i,t[6]=s*r+h*i,t[7]=u*r+d*i,t[8]=l*r-o*i,t[9]=c*r-a*i,t[10]=h*r-s*i,t[11]=d*r-u*i,t}function yt(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[8],c=e[9],h=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-l*i,t[1]=a*r-c*i,t[2]=s*r-h*i,t[3]=u*r-d*i,t[8]=o*i+l*r,t[9]=a*i+c*r,t[10]=s*i+h*r,t[11]=u*i+d*r,t}function _t(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+l*i,t[1]=a*r+c*i,t[2]=s*r+h*i,t[3]=u*r+d*i,t[4]=l*r-o*i,t[5]=c*r-a*i,t[6]=h*r-s*i,t[7]=d*r-u*i,t}function vt(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function bt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function xt(t,e,n){var i,r,o,a=n[0],s=n[1],u=n[2],l=Math.sqrt(a*a+s*s+u*u);return l<J?null:(a*=l=1/l,s*=l,u*=l,i=Math.sin(e),o=1-(r=Math.cos(e)),t[0]=a*a*o+r,t[1]=s*a*o+u*i,t[2]=u*a*o-s*i,t[3]=0,t[4]=a*s*o-u*i,t[5]=s*s*o+r,t[6]=u*s*o+a*i,t[7]=0,t[8]=a*u*o+s*i,t[9]=s*u*o-a*i,t[10]=u*u*o+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function wt(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ct(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Pt(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Mt(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=i+i,u=r+r,l=o+o,c=i*s,h=i*u,d=i*l,p=r*u,f=r*l,g=o*l,m=a*s,y=a*u,_=a*l;return t[0]=1-(p+g),t[1]=h+_,t[2]=d-y,t[3]=0,t[4]=h-_,t[5]=1-(c+g),t[6]=f+m,t[7]=0,t[8]=d+y,t[9]=f-m,t[10]=1-(c+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Ot(t,e){var n=new tt(3),i=-e[0],r=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=i*i+r*r+o*o+a*a;return h>0?(n[0]=2*(s*a+c*i+u*o-l*r)/h,n[1]=2*(u*a+c*r+l*i-s*o)/h,n[2]=2*(l*a+c*o+s*r-u*i)/h):(n[0]=2*(s*a+c*i+u*o-l*r),n[1]=2*(u*a+c*r+l*i-s*o),n[2]=2*(l*a+c*o+s*r-u*i)),Mt(t,e,n),t}function kt(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Et(t,e){var n=e[0],i=e[1],r=e[2],o=e[4],a=e[5],s=e[6],u=e[8],l=e[9],c=e[10];return t[0]=Math.sqrt(n*n+i*i+r*r),t[1]=Math.sqrt(o*o+a*a+s*s),t[2]=Math.sqrt(u*u+l*l+c*c),t}function St(t,e){var n=e[0]+e[5]+e[10],i=0;return n>0?(i=2*Math.sqrt(n+1),t[3]=.25*i,t[0]=(e[6]-e[9])/i,t[1]=(e[8]-e[2])/i,t[2]=(e[1]-e[4])/i):e[0]>e[5]&&e[0]>e[10]?(i=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/i,t[0]=.25*i,t[1]=(e[1]+e[4])/i,t[2]=(e[8]+e[2])/i):e[5]>e[10]?(i=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/i,t[0]=(e[1]+e[4])/i,t[1]=.25*i,t[2]=(e[6]+e[9])/i):(i=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/i,t[0]=(e[8]+e[2])/i,t[1]=(e[6]+e[9])/i,t[2]=.25*i),t}function Tt(t,e,n,i){var r=e[0],o=e[1],a=e[2],s=e[3],u=r+r,l=o+o,c=a+a,h=r*u,d=r*l,p=r*c,f=o*l,g=o*c,m=a*c,y=s*u,_=s*l,v=s*c,b=i[0],x=i[1],w=i[2];return t[0]=(1-(f+m))*b,t[1]=(d+v)*b,t[2]=(p-_)*b,t[3]=0,t[4]=(d-v)*x,t[5]=(1-(h+m))*x,t[6]=(g+y)*x,t[7]=0,t[8]=(p+_)*w,t[9]=(g-y)*w,t[10]=(1-(h+f))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function At(t,e,n,i,r){var o=e[0],a=e[1],s=e[2],u=e[3],l=o+o,c=a+a,h=s+s,d=o*l,p=o*c,f=o*h,g=a*c,m=a*h,y=s*h,_=u*l,v=u*c,b=u*h,x=i[0],w=i[1],C=i[2],P=r[0],M=r[1],O=r[2],k=(1-(g+y))*x,E=(p+b)*x,S=(f-v)*x,T=(p-b)*w,A=(1-(d+y))*w,I=(m+_)*w,D=(f+v)*C,R=(m-_)*C,F=(1-(d+g))*C;return t[0]=k,t[1]=E,t[2]=S,t[3]=0,t[4]=T,t[5]=A,t[6]=I,t[7]=0,t[8]=D,t[9]=R,t[10]=F,t[11]=0,t[12]=n[0]+P-(k*P+T*M+D*O),t[13]=n[1]+M-(E*P+A*M+R*O),t[14]=n[2]+O-(S*P+I*M+F*O),t[15]=1,t}function It(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n+n,s=i+i,u=r+r,l=n*a,c=i*a,h=i*s,d=r*a,p=r*s,f=r*u,g=o*a,m=o*s,y=o*u;return t[0]=1-h-f,t[1]=c+y,t[2]=d-m,t[3]=0,t[4]=c-y,t[5]=1-l-f,t[6]=p+g,t[7]=0,t[8]=d+m,t[9]=p-g,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Dt(t,e,n,i,r,o,a){var s=1/(n-e),u=1/(r-i),l=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(r+i)*u,t[10]=(a+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*l,t[15]=0,t}function Rt(t,e,n,i,r){var o=1/Math.tan(e/2),a=void 0;return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+i)*(a=1/(i-r)),t[14]=2*r*i*a):(t[10]=-1,t[14]=-2*i),t}function Ft(t,e,n,i){var r=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),l=2/(r+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(r-o)*l*.5,t[10]=i/(n-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*n/(n-i),t[15]=0,t}function Lt(t,e,n,i,r,o,a){var s=1/(e-n),u=1/(i-r),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(r+i)*u,t[14]=(a+o)*l,t[15]=1,t}function zt(t,e,n,i){var r=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,h=void 0,d=void 0,p=void 0,f=e[0],g=e[1],m=e[2],y=i[0],_=i[1],v=i[2],b=n[0],x=n[1],w=n[2];return Math.abs(f-b)<J&&Math.abs(g-x)<J&&Math.abs(m-w)<J?st(t):(c=f-b,h=g-x,d=m-w,r=_*(d*=p=1/Math.sqrt(c*c+h*h+d*d))-v*(h*=p),o=v*(c*=p)-y*d,a=y*h-_*c,(p=Math.sqrt(r*r+o*o+a*a))?(r*=p=1/p,o*=p,a*=p):(r=0,o=0,a=0),s=h*a-d*o,u=d*r-c*a,l=c*o-h*r,(p=Math.sqrt(s*s+u*u+l*l))?(s*=p=1/p,u*=p,l*=p):(s=0,u=0,l=0),t[0]=r,t[1]=s,t[2]=c,t[3]=0,t[4]=o,t[5]=u,t[6]=h,t[7]=0,t[8]=a,t[9]=l,t[10]=d,t[11]=0,t[12]=-(r*f+o*g+a*m),t[13]=-(s*f+u*g+l*m),t[14]=-(c*f+h*g+d*m),t[15]=1,t)}function Nt(t,e,n,i){var r=e[0],o=e[1],a=e[2],s=i[0],u=i[1],l=i[2],c=r-n[0],h=o-n[1],d=a-n[2],p=c*c+h*h+d*d;p>0&&(c*=p=1/Math.sqrt(p),h*=p,d*=p);var f=u*d-l*h,g=l*c-s*d,m=s*h-u*c;return(p=f*f+g*g+m*m)>0&&(f*=p=1/Math.sqrt(p),g*=p,m*=p),t[0]=f,t[1]=g,t[2]=m,t[3]=0,t[4]=h*m-d*g,t[5]=d*f-c*m,t[6]=c*g-h*f,t[7]=0,t[8]=c,t[9]=h,t[10]=d,t[11]=0,t[12]=r,t[13]=o,t[14]=a,t[15]=1,t}function Bt(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Vt(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function Ut(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function jt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function qt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Gt(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t[9]=e[9]+n[9]*i,t[10]=e[10]+n[10]*i,t[11]=e[11]+n[11]*i,t[12]=e[12]+n[12]*i,t[13]=e[13]+n[13]*i,t[14]=e[14]+n[14]*i,t[15]=e[15]+n[15]*i,t}function Ht(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Zt(t,e){var n=t[0],i=t[1],r=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=t[9],d=t[10],p=t[11],f=t[12],g=t[13],m=t[14],y=t[15],_=e[0],v=e[1],b=e[2],x=e[3],w=e[4],C=e[5],P=e[6],M=e[7],O=e[8],k=e[9],E=e[10],S=e[11],T=e[12],A=e[13],I=e[14],D=e[15];return Math.abs(n-_)<=J*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(i-v)<=J*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(r-b)<=J*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(o-x)<=J*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-w)<=J*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-C)<=J*Math.max(1,Math.abs(s),Math.abs(C))&&Math.abs(u-P)<=J*Math.max(1,Math.abs(u),Math.abs(P))&&Math.abs(l-M)<=J*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(c-O)<=J*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(h-k)<=J*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(d-E)<=J*Math.max(1,Math.abs(d),Math.abs(E))&&Math.abs(p-S)<=J*Math.max(1,Math.abs(p),Math.abs(S))&&Math.abs(f-T)<=J*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(g-A)<=J*Math.max(1,Math.abs(g),Math.abs(A))&&Math.abs(m-I)<=J*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(y-D)<=J*Math.max(1,Math.abs(y),Math.abs(D))}Math;var Wt=dt,Kt=jt;function Xt(){var t=new tt(4);return tt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function $t(t){var e=new tt(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Yt(t,e,n,i){var r=new tt(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r}function Qt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Jt(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t}function te(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function ee(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function ne(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function ie(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function re(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function oe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function ae(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function se(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function ue(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function le(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function ce(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t}function he(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+i*i+r*r+o*o)}function de(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return n*n+i*i+r*r+o*o}function pe(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.sqrt(e*e+n*n+i*i+r*r)}function fe(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}function ge(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function me(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function ye(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n*n+i*i+r*r+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=i*a,t[2]=r*a,t[3]=o*a),t}function _e(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function ve(t,e,n,i){var r=e[0],o=e[1],a=e[2],s=e[3];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=a+i*(n[2]-a),t[3]=s+i*(n[3]-s),t}function be(t,e){var n,i,r,o,a,s;e=e||1;do{a=(n=2*et()-1)*n+(i=2*et()-1)*i}while(a>=1);do{s=(r=2*et()-1)*r+(o=2*et()-1)*o}while(s>=1);var u=Math.sqrt((1-a)/s);return t[0]=e*n,t[1]=e*i,t[2]=e*r*u,t[3]=e*o*u,t}function xe(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*a,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*a,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*a,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*a,t}function we(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],u=n[2],l=n[3],c=l*i+s*o-u*r,h=l*r+u*i-a*o,d=l*o+a*r-s*i,p=-a*i-s*r-u*o;return t[0]=c*l+p*-a+h*-u-d*-s,t[1]=h*l+p*-s+d*-a-c*-u,t[2]=d*l+p*-u+c*-s-h*-a,t[3]=e[3],t}function Ce(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Pe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Me(t,e){var n=t[0],i=t[1],r=t[2],o=t[3],a=e[0],s=e[1],u=e[2],l=e[3];return Math.abs(n-a)<=J*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=J*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-u)<=J*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-l)<=J*Math.max(1,Math.abs(o),Math.abs(l))}var Oe=ee,ke=ne,Ee=ie,Se=he,Te=de,Ae=pe,Ie=fe,De=function(){var t=Xt();return function(e,n,i,r,o,a){var s,u=void 0;for(n||(n=4),i||(i=0),s=r?Math.min(r*n+i,e.length):e.length,u=i;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}(),Re=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e/t.length},Fe=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le.DEFAULT;return f()(this,e),(n=E()(this,T()(e).call(this,{message:t,type:i}))).name="CartoValidationError",n}return I()(e,t),e}(R),Le={DEFAULT:"[Error]",MISSING_REQUIRED:"[Missing required property]",INCORRECT_TYPE:"[Property with an incorrect type]",INCORRECT_VALUE:"[Incorrect value]",TOO_MANY_ARGS:"[Too many arguments]",NOT_ENOUGH_ARGS:"[Not enough arguments]",WRONG_NUMBER_ARGS:"[Wrong number of arguments]"};function ze(t,e){var n=function(t,e){var n=Math.hypot(t,e);return[t/n,e/n]}(t[0]-e[0],t[1]-e[1]);return[-n[1],n[0]]}function Ne(t,e){var n=[t[1],-t[0]],i=[-e[1],e[0]],r=i[0]*n[1]-i[1]*n[0],o=i[0]*n[0]+i[1]*n[1],a=Math.abs(r);return{turnLeft:r>0,joinNormal:!(a<.866&&o>.5)&&Be([(n[0]+i[0])/a,(n[1]+i[1])/a])}}function Be(t){return[-t[0],-t[1]]}function Ve(t,e,n,i){if(je(e,n)||je(n,i)||je(i,e))return!1;var r=Ue(t,e,n)<0,o=Ue(t,n,i)<0,a=Ue(t,i,e)<0;return r===o&&o===a}function Ue(t,e,n){return(t.x-n.x)*(e.y-n.y)-(e.x-n.x)*(t.y-n.y)}function je(t,e){return t.x===e.x&&t.y===e.y}function qe(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*i+r*r<=n*n}function Ge(t){return t.reduce((function(t,e){return t+e}),0)}function He(t){var e=_()(t[0],2),n=e[0],i=e[1],r=_()(t[1],2),o=r[0],a=r[1],s=_()(t[2],2);return Math.abs((n-s[0])*(a-i)-(n-o)*(s[1]-i))/2}function Ze(t,e,n){switch(n){case"line":return function(t,e){for(var n=t,i=t.length,r=0;r<i;r+=2)e.minx=Math.min(e.minx,n[r+0]),e.miny=Math.min(e.miny,n[r+1]),e.maxx=Math.max(e.maxx,n[r+0]),e.maxy=Math.max(e.maxy,n[r+1]);return e}(t,e);case"polygon":return function(t,e){for(var n=[t.flat,t.holes[0]||t.flat.length/2],i=n[0],r=n[1],o=0;o<r;o++)e.minx=Math.min(e.minx,i[2*o+0]),e.miny=Math.min(e.miny,i[2*o+1]),e.maxx=Math.max(e.maxx,i[2*o+0]),e.maxy=Math.max(e.maxy,i[2*o+1]);return e}(t,e)}}var We=Math.PI/180,Ke=6378137,Xe=Ke*Math.PI;function $e(t){return void 0===t}function Ye(t){return"string"==typeof t}function Qe(t){var e=d()(t);return null!==t&&("object"===e||"function"===e)}function Je(t){if(t instanceof Date)return t;if("number"==typeof t)return tn(t);if(Ye(t))return new Date(t);throw new Fe("Invalid Date type",Le.INCORRECT_TYPE)}function tn(t){return new Date(t)}function en(t,e){return t.size===e.size&&c()(t).every((function(t){return e.has(t)}))}function nn(t){var e=i.invert([],t),n=[[-1,-1],[-1,1],[1,-1],[1,1]].map((function(t){return(function(t,e,n){var i=r.transformMat4([],[e,n,1,1],t)[2],o=(i-r.transformMat4([],[e,n,2,1],t)[2])/-1;return r.transformMat4([],[e,n,-(i-1*o)/o,1],t).map((function(t,e,n){return t/n[3]}))}).apply(void 0,[e].concat(c()(t)))})).map((function(t){return t.map((function(t){return 2*t-1}))})),o=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],a=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];n.forEach((function(t){o[0]=Math.min(o[0],t[0]),o[1]=Math.min(o[1],t[1]),a[0]=Math.max(a[0],t[0]),a[1]=Math.max(a[1],t[1])})),o[1]=-o[1],a[1]=-a[1];var s=o[1];return o[1]=a[1],a[1]=s,o.concat(a)}var rn,on,an={WM_R:Xe,WM_2R:2*Xe,isUndefined:$e,isString:Ye,isNumber:function(t){return"number"==typeof t},isObject:Qe,castDate:Je,isSetsEqual:en,equalArrays:function(t,e){if(t&&e&&t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}},projectToWebMercator:function(t){return{x:t.lng*We*Ke,y:Math.log(Math.tan(t.lat*We/2+Math.PI/4))*Ke}},computeMatrixZoom:function(t){return-2*t[15]/t[5]},computeMatrixCenter:function(t){return{x:-(1+2*t[12]/t[0]),y:+(1+2*t[13]/t[5])}},computeViewportFromCameraMatrix:nn};function sn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return void 0===t||function(t){return t instanceof Y}(t)?t&&e?un({iso:t._iso,timeZone:e}):t:"string"==typeof t?un({iso:t,timeZone:e}):void 0}function un(t){return new Y(t.timeZone,t.iso,t.start,t.end)}function ln(t){cn(t),rn=t}function cn(t){if($e(t))throw new Fe("'auth'",Le.MISSING_REQUIRED);if(!Qe(t))throw new Fe("'auth' property must be an object.",Le.INCORRECT_TYPE);t.username=$e(t.username)?t.user:t.username,function(t){if($e(t))throw new Fe("'apiKey'",Le.MISSING_REQUIRED);if(!Ye(t))throw new Fe("'apiKey' property must be a string.",Le.INCORRECT_TYPE);if(""===t)throw new Fe("'apiKey' property must be not empty.",Le.INCORRECT_VALUE)}(t.apiKey),function(t){if($e(t))throw new Fe("'username'",Le.MISSING_REQUIRED);if(!Ye(t))throw new Fe("'username' property must be a string.",Le.INCORRECT_TYPE);if(""===t)throw new Fe("'username' property must be not empty.",Le.INCORRECT_VALUE)}(t.username)}function hn(t){dn(t),on=t}function dn(t){if(t){if(!Qe(t))throw new Fe("'config' property must be an object.",Le.INCORRECT_TYPE);!function(t){if(!Ye(t))throw new Fe("'serverURL' property must be a string.",Le.INCORRECT_TYPE)}(t.serverURL)}}var pn="aggregated",fn="unaggregated",gn={};function mn(t,e){var n={};return new Set(Object.keys(t).concat(Object.keys(e))).forEach((function(i){var r=t[i]||[],o=e[i]||[],a=c()(r).concat(c()(o));n[i]=a})),n}function yn(t,e){return!(!t||!e)&&JSON.stringify(_n(t))===JSON.stringify(_n(e))}function _n(t){var e={};return Object.keys(t).sort().forEach((function(n){var i=c()(new Set(t[n].map((function(t){return JSON.stringify(t)}))));i.sort(),i=i.map((function(t){return JSON.parse(t)})),e[n]=i})),e}var vn={aggColumn:function(t,e){return"".concat("_cdb_agg_").concat(e,"_").concat(t)},dimColumn:function(t,e){return"".concat("_cdb_dim_").concat(e,"_").concat(t)}},bn={column:vn,equals:yn,notEquals:function(t,e){return!yn(t,e)},union:mn,IDENTITY:gn,simplify:_n},xn=function(){function t(){f()(this,t),this.caches=new WeakMap}return m()(t,[{key:"get",value:function(t,e){if(this.caches.has(t))return this.caches.get(t)[e]}},{key:"set",value:function(t,e,n){if(this.caches.has(t))this.caches.get(t)[e]=n;else{var i={};i[e]=n,this.caches.set(t,i)}}},{key:"has",value:function(t,e){return void 0!==this.get(t,e)}}]),t}(),wn=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cn.DEFAULT;return f()(this,e),(n=E()(this,T()(e).call(this,{message:t,type:i}))).name="CartoRuntimeError",n}return I()(e,t),e}(R),Cn={DEFAULT:"[Error]",NOT_SUPPORTED:"[Not supported]",WEB_GL:"[WebGL]",MVT:"[MVT]"},Pn=1,Mn=new xn,On=new xn;function kn(t,e,n){var i=e+n;if(On.has(t,i))return On.get(t,i);var r={},o=En(t,e,t.VERTEX_SHADER),a=En(t,n,t.FRAGMENT_SHADER);if(r.program=t.createProgram(),t.attachShader(r.program,o),t.attachShader(r.program,a),t.linkProgram(r.program),t.deleteShader(o),t.deleteShader(a),!t.getProgramParameter(r.program,t.LINK_STATUS))throw new wn("Unable to link the shader program: ".concat(t.getProgramInfoLog(r.program),"."),Cn.WEB_GL);return r.programID=Pn++,On.set(t,i,r),r}function En(t,e,n){if(Mn.has(t,e))return Mn.get(t,e);var i=t.createShader(n);if(t.shaderSource(i,e),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){var r=t.getShaderInfoLog(i);throw t.deleteShader(i),new wn("An error occurred compiling the shaders: ".concat(r,"\nSource:\n").concat(e),Cn.WEB_GL)}return Mn.set(t,e,i),i}var Sn=n(34),Tn=n.n(Sn),An=n(33),In=n.n(An),Dn=n(35),Rn=n.n(Dn),Fn=n(20),Ln=n.n(Fn),zn=n(19),Nn=n.n(zn),Bn={vertexShader:"".concat(Nn.a),fragmentShader:"".concat(Ln.a).replace("$style_inline","$color_inline").replace("$style_preface","$color_preface")},Vn={vertexShader:"".concat(Nn.a),fragmentShader:"".concat(Ln.a).replace("$style_inline","vec4($filter_inline)").replace("$style_preface","$filter_preface")},Un={vertexShader:"".concat(Nn.a),fragmentShader:"".concat(Ln.a).replace("$style_inline","vec4(encodeWidth($width_inline), vec2(0.))").replace("$style_preface","".concat(Rn.a))},jn=n(37),qn=n.n(jn),Gn=n(36),Hn={vertexShader:"".concat(n.n(Gn).a),fragmentShader:"".concat(qn.a)},Zn={styler:o,symbolizer:a,AABlender:function t(e){f()(this,t),Object.assign(this,kn(e,In.a,Tn.a)),this.vertexAttribute=e.getAttribLocation(this.program,"vertex"),this.readTU=e.getUniformLocation(this.program,"aaTex")}},Wn=function(){function t(){f()(this,t),this._ids=new Map}return m()(t,[{key:"getID",value:function(t){if(this._ids.has(t))return this._ids.get(t);var e=this._ids.size;return this._ids.set(t,e),e}}]),t}(),Kn=n(6),Xn=n.n(Kn),$n=n(8),Yn=n.n($n),Qn=n(11),Jn=n.n(Qn);function ti(t){return function(t){var e=t.x,n=t.y,i=t.z,r=t.a,o=ni,a=ii,s=ri,u=function(t){return t>=.008856451679035631?Math.pow(t,.333333333333333):841/108*t+4/29};return{l:116*u(n/a)-16,a:500*(u(e/o)-u(n/a)),b:200*(u(n/a)-u(i/s)),alpha:r}}(function(t){var e=function(t){var e=t.g,n=t.b,i=t.a,r=function(t){return t<=.0404482362771076?t/12.92:Math.pow((t+.055)/1.055,2.4)};return{r:r(t.r),g:r(e),b:r(n),a:i}}(t),n=e.r,i=e.g,r=e.b;return{x:.41239558896741424*n+.3575834307637148*i+.18049264738170157*r,y:.21258623078559555*n+.7151703037034108*i+.07220049864333623*r,z:.019297215491746945*n+.11918386458084854*i+.9504971251315798*r,a:e.a}}(t))}function ei(t){return function(t){var e=t.x,n=t.y,i=t.z,r=t.a;return function(t){var e=t.g,n=t.b,i=t.a,r=function(t){return t<=.0031306684425005883?12.92*t:1.055*Math.pow(t,.4166666666666667)-.055};return{r:r(t.r),g:r(e),b:r(n),a:i}}({r:Pi(3.2406*e-1.5372*n-.4986*i,0,1),g:Pi(-.9689*e+1.8758*n+.0415*i,0,1),b:Pi(.0557*e-.204*n+1.057*i,0,1),a:r})}(function(t){var e=t.l,n=t.b,i=t.alpha,r=function(t){return t>=.20689655172413793?t*t*t:108/841*(t-4/29)};return{x:ni*r((e+16)/116+t.a/500),y:ii*r((e+16)/116),z:ri*r((e+16)/116-n/200),a:i}}(t))}var ni=.950456,ii=1,ri=1.088754;function oi(t,e,n){if(t.length>e)throw new Fe("Expression '".concat(n,"' accepts just ").concat(e," arguments, but ").concat(t.length," were passed."),Le.TOO_MANY_ARGS)}function ai(t,e,n){if(t.length<e)throw new Fe("Expression '".concat(n,"' accepts at least ").concat(e," arguments, but ").concat(t.length," were passed."),Le.NOT_ENOUGH_ARGS)}function si(t,e,n){if(t.length!==e)throw new Fe("Expression '".concat(n,"' accepts exactly ").concat(e," arguments, but ").concat(t.length," were passed."),Le.WRONG_NUMBER_ARGS)}function ui(t){return ki(t)?Wa(t):"string"==typeof t?Ka(t):Array.isArray(t)?Xa(t):t}function li(t){var e=/^#?([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i.exec(t);if(e)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1};if(e=/^#?([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i.exec(t))return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:parseInt(e[4]+e[4],16)/255};if(e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t))return{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),a:1};if(e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t))return{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),a:parseInt(e[4],16)/255};throw new F("Invalid hexadecimal color")}function ci(){return Ya(255,255,255,0)}function hi(t){return{1:"first",2:"second",3:"third",4:"fourth"}[t]||String(t)}function di(t,e,n){return"".concat(t,"(): invalid ").concat(hi(n+1)," parameter '").concat(e,"'")}function pi(t,e,n,i,r){throw new Fe("".concat(di(t,e,n),"\n        expected type was '").concat(i,"', actual type was '").concat(r,"'"),Le.INCORRECT_TYPE)}function fi(t,e,n,i){var r=Array.isArray(i)?i.join(", "):i.name;throw new Fe("".concat(di(t,e,n),"\n    expected type was instance of '").concat(r,"'"),Le.INCORRECT_TYPE)}function gi(t,e,n,i){throw new Fe("".concat(di(t,e,n),"\n    expected type was 'string', but ").concat(i,"' is not a string"),Le.INCORRECT_TYPE)}function mi(t,e,n,i){if(!(i instanceof Ei))throw new Fe("".concat(di(t,e,n),"\n        '").concat(i,'\' is not of type "carto.expressions.Base"'),Le.INCORRECT_TYPE)}function yi(t,e,n,i,r){if(mi(t,e,n,r),Array.isArray(i)){if(!i.some((function(t){return r.type===t})))throw new Fe("".concat(di(t,e,n),"\n            expected type was one of ").concat(i.join(),", actual type was '").concat(r.type,"'"),Le.INCORRECT_TYPE)}else r.type!==i&&pi(t,e,n,i,r.type)}function _i(t,e,n,i,r){mi(t,e,n,r),Array.isArray(i)?i.some((function(t){return r.isA(t)}))||fi(t,e,n,i):r.isA(i)||fi(t,e,n,i)}function vi(t,e,n,i){ki(i)||function(t,e,n,i){throw new Fe("".concat(di(t,e,n),"\n    type of '").concat(i,"' is ").concat(d()(i),", 'number' was expected"),Le.INCORRECT_TYPE)}(t,e,n,i)}function bi(t,e,n,i){"string"!=typeof i&&gi(t,e,n,i)}function xi(t,e,n,i,r){"string"!=typeof i?gi(t,e,n,i):r.includes(i)||function(t,e,n,i,r){throw new Fe("".concat(di(t,e,n),"\n    value '").concat(i,"' is not valid. It should be one of ").concat(r.map((function(t){return"'".concat(t,"'")})).join(", ")),Le.INCORRECT_TYPE)}(t,e,n,i,r)}function wi(t,e,n,i){Array.isArray(i)||function(t,e,n,i){throw new Fe("".concat(di(t,e,n),"\n    '").concat(i,"' is not an array"),Le.INCORRECT_TYPE)}(t,e,n,i)}function Ci(t,e,n,i){if(i.isFeatureDependent())throw new Fe("".concat(di(t,e,n),"\n        parameter cannot be feature dependent"),Le.INCORRECT_VALUE)}function Pi(t,e,n){return Math.min(Math.max(t,e),n)}function Mi(t,e,n){return"number"==typeof t?Oi(t,e,n):t instanceof Date?function(t,e,n){var i=t.getTime(),r=e.getTime(),o=Math.abs(Oi(i,r,n));return new Date(o)}(t,e,n):function(t,e,n){var i=ti({r:t.r/255,g:t.g/255,b:t.b/255,a:t.a}),r=ti({r:e.r/255,g:e.g/255,b:e.b/255,a:e.a}),o=ei({l:(1-n)*i.l+n*r.l,a:(1-n)*i.a+n*r.a,b:(1-n)*i.b+n*r.b,alpha:(1-n)*i.alpha+n*r.alpha});return{r:Math.round(255*o.r),g:Math.round(255*o.g),b:Math.round(255*o.b),a:o.a}}(t,e,n)}function Oi(t,e,n){return t*(1-n)+e*n}function ki(t){return Number.isFinite(t)||t===1/0||t===-1/0||Number.isNaN(t)}var Ei=function(){function t(e){f()(this,t),this._initializeChildren(e),this.preface="",this._shaderBindings=new Map,this.expressionName=function(t){return t.toUpperCase()===t?t.toLowerCase():t.charAt(0).toLowerCase()+t.slice(1)}(this.constructor.name),this._variableName=null}return m()(t,[{key:"eval",value:function(){return this.value}},{key:"toString",value:function(){return"".concat(this.expressionName,"(").concat(this._getChildren().map((function(t){return t.toString()})).join(", "),")")}},{key:"isAnimated",value:function(){return this._getChildren().some((function(t){return t.isAnimated()}))}},{key:"isPlaying",value:function(){return this._getChildren().some((function(t){return t.isPlaying()}))}},{key:"blendTo",value:function(){var t=Jn()(Yn.a.mark((function t(e){var n,i,r,o=arguments;return Yn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=o.length>1&&void 0!==o[1]?o[1]:500,e=ui(e),this.keepDefaultsOnBlend&&this.keepDefaultsOnBlend(),i=this.parent,r=ws(this,e,Qa(n)),i.replaceChild(this,r),r.notify();case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"isA",value:function(t){return this instanceof t}},{key:"notify",value:function(){return this.parent.notify()}},{key:"accumViewportAgg",value:function(t){this._getChildren().forEach((function(e){return e.accumViewportAgg(t)}))}},{key:"loadImages",value:function(){return Promise.all(this._getChildren().map((function(t){return t.loadImages()})))}},{key:"getLegendData",value:function(){return{name:this.propertyName,data:[]}}},{key:"_bindMetadata",value:function(t){this._getChildren().forEach((function(e){return e._bindMetadata(t)}))}},{key:"_initializeChildren",value:function(t){Array.isArray(t)?this._initializeChildrenArray(t):this._initializeChildrenObject(t),this._addParentToChildren()}},{key:"_initializeChildrenArray",value:function(t){var e=this;if(this.maxParameters&&this.maxParameters<t.length)throw new Fe("Extra parameters, got ".concat(t.length," but maximum is ").concat(this.maxParameters),Le.TOO_MANY_ARGS);this.childrenNames=[],t.map((function(t,n){var i="".concat(t.type,"-").concat(n);e.childrenNames.push(i),e[i]=ui(t)}))}},{key:"_initializeChildrenObject",value:function(t){var e,n=this;if(void 0===this.childrenNames&&(this.childrenNames=[]),(e=this.childrenNames).push.apply(e,c()(Object.keys(t))),this.maxParameters&&this.maxParameters<this.childrenNames.length)throw new Fe(Le.TOO_MANY_ARGS,"Extra parameters, got ".concat(this.childrenNames.length," but maximum is ").concat(this.maxParameters));Object.keys(t).map((function(e){n[e]=ui(t[e])}))}},{key:"_addParentToChildren",value:function(){var t=this;this._getChildren().map((function(e){e.parent=t}))}},{key:"_setUID",value:function(t){this._uid=t.getID(this),this._getChildren().map((function(e){return e._setUID(t)}))}},{key:"_dataReady",value:function(){this._getChildren().map((function(t){return t._dataReady()}))}},{key:"isFeatureDependent",value:function(){return this._getChildren().some((function(t){return t.isFeatureDependent()}))}},{key:"_prefaceCode",value:function(t){return t?"\n".concat(this._buildGLSLCode(t),"\n"):""}},{key:"_buildGLSLCode",value:function(t){return"\n            #ifndef DEF_".concat(this._uid,"\n            #define DEF_").concat(this._uid,"\n            ").concat(t,"\n            #endif")}},{key:"_getDependencies",value:function(){return this._getChildren().map((function(t){return t._getDependencies()})).reduce((function(t,e){return t.concat(e)}),[])}},{key:"_resolveAliases",value:function(t){this._getChildren().map((function(e){return e._resolveAliases(t)}))}},{key:"_setGenericGLSL",value:function(t,e){this.inlineMaker=t,this.preface=e||""}},{key:"_applyToShaderSource",value:function(t){var e=this,n=this.childrenNames.map((function(n){return e[n]._applyToShaderSource(t)})),i={};return n.map((function(t,n){i[e.childrenNames[n]]=t.inline})),{preface:this._prefaceCode(n.map((function(t){return t.preface})).reduce((function(t,e){return t+e}),"")+this.preface),inline:this.inlineMaker(i,t)}}},{key:"_postShaderCompile",value:function(t,e){var n=this;this.childrenNames.forEach((function(i){return n[i]._postShaderCompile(t,e)}))}},{key:"_getBinding",value:function(t){return this._shaderBindings.has(t)||this._shaderBindings.set(t,{}),this._shaderBindings.get(t)}},{key:"_resetViewportAgg",value:function(t){this._getChildren().forEach((function(e){return e._resetViewportAgg(t)}))}},{key:"_setTimestamp",value:function(t){var e=this;this.childrenNames.forEach((function(n){return e[n]._setTimestamp(t)}))}},{key:"_preDraw",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];this.childrenNames.forEach((function(e){var i;return(i=t[e])._preDraw.apply(i,n)}))}},{key:"replaceChild",value:function(t,e){var n=this;this[this.childrenNames.find((function(e){return n[e]===t}))]=e,e.parent=this,e.notify=t.notify,e.notify().catch((function(){}))}},{key:"_blendFrom",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!this.default||!t.default){t=ui(t);var i=this.parent,r=ws(t,this,Qa(e),n);i.replaceChild(this,r),r.notify()}}},{key:"_getChildren",value:function(){var t=this;return this.childrenNames.map((function(e){return t[e]}))}},{key:"_getMinimumNeededSchema",value:function(){return this._getChildren().map((function(t){return t._getMinimumNeededSchema()})).reduce(mn,gn)}},{key:"value",get:function(){throw new wn("Must evaluate a feature using .eval(feature)")}},{key:"values",get:function(){return this.getLegendData().data}},{key:"propertyName",get:function(){return this._getChildren().map((function(t){return t.propertyName})).find((function(t){return!!t}))}}]),t}(),Si=function(t){function e(t){var n;if(f()(this,e),oi(arguments,1,"transition"),vi("transition","duration",0,t),t<0){var i=di("transition","duration",0);throw new Fe("".concat(i," 'duration' must be greater than or equal to 0."),Le.INCORRECT_VALUE)}return(n=E()(this,T()(e).call(this,{}))).aTime=Date.now(),n.bTime=n.aTime+Number(t),n.type="number",n}return I()(e,t),m()(e,[{key:"eval",value:function(){return this.value}},{key:"isAnimated",value:function(){return!this.mix||this.mix<=1}},{key:"isPlaying",value:function(){return this.isAnimated()}},{key:"_applyToShaderSource",value:function(){return{preface:this._prefaceCode("uniform float anim".concat(this._uid,";\n")),inline:"anim".concat(this._uid)}}},{key:"_postShaderCompile",value:function(t,e){this._getBinding(t).uniformLocation=e.getUniformLocation(t,"anim".concat(this._uid))}},{key:"_preDraw",value:function(t,e,n){var i=Date.now();this.mix=(i-this.aTime)/(this.bTime-this.aTime),n.uniform1f(this._getBinding(t).uniformLocation,this.mix>1?1:this.mix)}},{key:"value",get:function(){var t=Date.now();return this.mix=(t-this.aTime)/(this.bTime-this.aTime),Math.min(this.mix,1)}}]),e}(Ei),Ti=n(5),Ai=n.n(Ti),Ii=Fi("in",(function(t,e){return e.some((function(e){return e===t}))?1:0})),Di={nin:{check:"1.",result:"0."},in:{check:"0.",result:"1."}},Ri=Fi("nin",(function(t,e){return e.some((function(e){return e===t}))?0:1}));function Fi(t,e){return function(n){function i(e,n){var r;return f()(this,i),oi(arguments,2,t),e=ui(e),n=ui(n),mi(t,"input",0,e),mi(t,["list","variable"],1,n),(r=E()(this,T()(i).call(this,{input:e,list:n}))).type="number",r.name=t,r}return I()(i,n),m()(i,[{key:"eval",value:function(t){return e(this.input.eval(t),this.list.eval(t))}},{key:"_applyToShaderSource",value:function(t){var e=this,n={};this.childrenNames.map((function(n){return e[n]._applyToShaderSource(t)})).map((function(t,i){n[e.childrenNames[i]]=t}));var i="belongs".concat(this._uid),r=this._getFuncList(),o=this.list.elems.map(r).join(""),a=Di[this.name].check,s="float ".concat(i,"(float x){\n                ").concat(o,"\n\n                return ").concat(a,";\n            }");return{preface:this._prefaceCode(n.input.preface+n.list.preface+s),inline:"".concat(i,"(").concat(n.input.inline,")")}}},{key:"_getFuncList",value:function(){var t=this,e=Di[this.name].result;return function(n){var i="number"===t.input.type?"".concat(n,".0"):"cat".concat(n._uid);return"if (x==".concat(i,") { return ").concat(e,"; }")}}},{key:"_bindMetadata",value:function(e){var n=this;Ai()(T()(i.prototype),"_bindMetadata",this).call(this,e),["number","category"].forEach((function(e){n.input.type===e&&(yi(t,"input",0,e,n.input),yi(t,"list",1,"".concat(e,"-list"),n.list))}))}},{key:"value",get:function(){return e(this.input.value,this.list.value)}}]),i}(Ei)}var Li=function(t){function e(t,n,i){var r;return f()(this,e),oi(arguments,3,"between"),t=ui(t),n=ui(n),i=ui(i),(r=E()(this,T()(e).call(this,{input:t,lowerLimit:n,upperLimit:i}))).type="number",r.inlineMaker=function(t){return"((".concat(t.input," >= ").concat(t.lowerLimit," &&  ").concat(t.input," <= ").concat(t.upperLimit,") ? 1. : 0.)")},r}return I()(e,t),m()(e,[{key:"eval",value:function(t){var e=this.input.eval(t),n=this.lowerLimit.eval(t),i=this.upperLimit.eval(t);return e>=n&&e<=i?1:0}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),yi("between","input",0,["number","date"],this.input),yi("between","lowerLimit",1,["number","date"],this.lowerLimit),yi("between","upperLimit",2,["number","date"],this.upperLimit)}}]),e}(Ei),zi={0:null,1:"number",2:"color",4:"color",8:"number",16:"image",32:"date"},Ni=function(t){function e(t,n,i,r){var o;return f()(this,e),oi(arguments,4),Number.isFinite(t)&&Number.isFinite(n)?E()(o,Wa(i[1](t,n))):(t=ui(t),n=ui(n),(o=E()(this,T()(e).call(this,{a:t,b:n}))).signatureMethods=i,o._signature=Bi(t,n),o.glsl=r,o.allowedSignature=0,o.type=zi[o._signature],o.inlineMaker=function(t){return r(t.a,t.b)},o)}return I()(e,t),m()(e,[{key:"eval",value:function(){if(Number.isFinite(this.a)&&Number.isFinite(this.b))return this.operation(this.a.value,this.b.value);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(Number.isFinite(this.a))return this.operation(this.a.value,this.b.eval(e[0]));if(Number.isFinite(this.b))return this.operation(this.a.eval(e[0]),this.b.value);var i=this._getDependentFeatures(e),r=i.featureA,o=i.featureB,a=this.a.eval(r),s=this.b.eval(o);return this.operation(a,s)}},{key:"getLegendData",value:function(t){for(var e=this.a.getLegendData(t),n=this.b.getLegendData(t),i=e.data.length,r=n.data.length,o=[],a=0;a<i;a++)for(var s=0;s<r;s++){var u=this.operation(e.data[a].value,n.data[s].value);o.push({value:u})}return{n:i,m:r,data:o}}},{key:"_getDependentFeatures",value:function(t){var e=t.length>1?{featureA:t[0],featureB:t[1]}:{featureA:t[0],featureB:t[0]};return{featureA:e.featureA,featureB:e.featureB}}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t);var n=[this.a,this.b],i=n[0],r=n[1];if(this._signature=Bi(i,r),0===this._signature||!(this._signature&this.allowedSignature))throw new Fe("".concat(this.expressionName,"(): invalid parameter types\n'x' type was ").concat(i.type,", 'y' type was ").concat(r.type),Le.INCORRECT_TYPE);this.type=function(t){switch(t){case 1:return"number";case 2:case 4:return"color";case 8:return"number";case 16:return"image";default:return}}(this._signature)}},{key:"value",get:function(){return this.operation(this.a.value,this.b.value)}},{key:"operation",get:function(){return this.signatureMethods[this._signature]||this.signatureMethods[1]}}]),e}(Ei);function Bi(t,e){return t.type&&e.type?"date"===t.type&&"date"===e.type?32:"number"===t.type&&"number"===e.type?1:"number"===t.type&&"color"===e.type||"color"===t.type&&"number"===e.type?2:"color"===t.type&&"color"===e.type?4:"category"===t.type&&"category"===e.type?8:"image"===t.type&&"color"===e.type||"image"===t.type&&"color"===e.type||"image"===t.type&&"image"===e.type||"color"===t.type&&"image"===e.type?16:0:void 0}var Vi=function(t){function e(t,n){var i;f()(this,e),oi(arguments,2);var r={1:function(t,e){return t+e},4:Ui};return(i=E()(this,T()(e).call(this,t,n,r,(function(t,e){return"(".concat(t," + ").concat(e,")")})))).allowedSignature=21,i}return I()(e,t),e}(Ni);function Ui(t,e){return{r:t.r+e.r<255?t.r+e.r:255,g:t.g+e.g<255?t.g+e.g:255,b:t.b+e.b<255?t.b+e.b:255,a:t.a}}var ji=function(t){function e(t,n){var i;f()(this,e),oi(arguments,2);var r={1:function(t,e){return Math.min(t*e,1)}};return t=ui(t),n=ui(n),(i=E()(this,T()(e).call(this,t,n,r,(function(t,e){return"min(".concat(t," * ").concat(e,", 1.)")})))).allowedSignature=1,i}return I()(e,t),e}(Ni),qi=function(t){function e(t,n){var i;if(f()(this,e),oi(arguments,2),Number.isFinite(t)&&Number.isFinite(n))return E()(i,Wa(t/n));var r={1:function(t,e){return t/e},2:Hi,4:Gi};return t=ui(t),n=ui(n),(i=E()(this,T()(e).call(this,t,n,r,(function(t,e){return"(".concat(t," / ").concat(e,")")})))).allowedSignature=23,i}return I()(e,t),e}(Ni);function Gi(t,e){return{r:Math.round(t.r/e.r),g:Math.round(t.g/e.g),b:Math.round(t.b/e.b),a:t.a}}function Hi(t,e){var n="number"==typeof t?{n:t,color:e}:{n:e,color:t},i=n.n,r=n.color;return{r:Math.round(r.r/i),g:Math.round(r.g/i),b:Math.round(r.b/i),a:r.a}}var Zi=function(t){function e(t,n){var i;return f()(this,e),oi(arguments,2),(i=E()(this,T()(e).call(this,t,n,{1:function(t,e){return t===e?1:0},8:function(t,e){return t===e?1:0}},(function(t,e){return"(".concat(t,"==").concat(e,"? 1.:0.)")})))).allowedSignature=9,i}return I()(e,t),e}(Ni),Wi=function(t){function e(t,n){var i;return f()(this,e),oi(arguments,2),(i=E()(this,T()(e).call(this,t,n,{1:function(t,e){return t>e?1:0}},(function(t,e){return"(".concat(t,">").concat(e,"? 1.:0.)")})))).allowedSignature=33,i}return I()(e,t),e}(Ni),Ki=function(t){function e(t,n){var i;return f()(this,e),oi(arguments,2),(i=E()(this,T()(e).call(this,t,n,{1:function(t,e){return t>=e?1:0}},(function(t,e){return"(".concat(t,">=").concat(e,"? 1.:0.)")})))).allowedSignature=33,i}return I()(e,t),e}(Ni),Xi=function(t){function e(t,n){var i;return f()(this,e),oi(arguments,2),(i=E()(this,T()(e).call(this,t,n,{1:function(t,e){return t<e?1:0}},(function(t,e){return"(".concat(t,"<").concat(e,"? 1.:0.)")})))).allowedSignature=33,i}return I()(e,t),e}(Ni),$i=function(t){function e(t,n){var i;return f()(this,e),oi(arguments,2),(i=E()(this,T()(e).call(this,t,n,{1:function(t,e){return t<=e?1:0}},(function(t,e){return"(".concat(t,"<=").concat(e,"? 1.:0.)")})))).allowedSignature=33,i}return I()(e,t),e}(Ni),Yi=function(t){function e(t,n){var i;return f()(this,e),oi(arguments,2),t=ui(t),n=ui(n),(i=E()(this,T()(e).call(this,t,n,{1:function(t,e){return t%e}},(function(t,e){return"mod(".concat(t,", ").concat(e,")")})))).allowedSignature=33,i}return I()(e,t),e}(Ni),Qi=function(t){function e(t,n){var i;f()(this,e),oi(arguments,2);var r={1:function(t,e){return t*e},2:tr,4:Ji};return(i=E()(this,T()(e).call(this,t,n,r,(function(t,e){return"(".concat(t," * ").concat(e,")")})))).allowedSignature=23,i}return I()(e,t),e}(Ni);function Ji(t,e){return{r:Math.round(t.r*e.r/255),g:Math.round(t.g*e.g/255),b:Math.round(t.b*e.b/255),a:t.a}}function tr(t,e){var n="number"==typeof t?{n:t,color:e}:{n:e,color:t},i=n.n,r=n.color;return{r:Math.round(i*r.r/255),g:Math.round(i*r.g/255),b:Math.round(i*r.b/255),a:r.a}}var er=function(t){function e(t,n){var i;return f()(this,e),oi(arguments,2),(i=E()(this,T()(e).call(this,t,n,{1:function(t,e){return t!==e?1:0},8:function(t,e){return t!==e?1:0}},(function(t,e){return"(".concat(t,"!=").concat(e,"? 1.:0.)")})))).allowedSignature=41,i}return I()(e,t),e}(Ni),nr=function(t){function e(t,n){var i;f()(this,e),oi(arguments,2);var r={1:function(t,e){return Math.min(t+e,1)}};return t=ui(t),n=ui(n),(i=E()(this,T()(e).call(this,t,n,r,(function(t,e){return"min(".concat(t," + ").concat(e,", 1.)")})))).allowedSignature=1,i}return I()(e,t),e}(Ni),ir=function(t){function e(t,n){var i;f()(this,e),oi(arguments,2);var r={1:function(t,e){return Math.pow(t,e)}};return(i=E()(this,T()(e).call(this,t,n,r,(function(t,e){return"pow(".concat(t,", ").concat(e,")")})))).allowedSignature=1,i}return I()(e,t),e}(Ni),rr=function(t){function e(t,n){var i;f()(this,e),oi(arguments,2);var r={1:function(t,e){return t-e},4:or};return(i=E()(this,T()(e).call(this,t,n,r,(function(t,e){return"(".concat(t," - ").concat(e,")")})))).allowedSignature=21,i}return I()(e,t),e}(Ni);function or(t,e){return{r:t.r-e.r>0?t.r-e.r:0,g:t.g-e.g>0?t.g-e.g:0,b:t.b-e.b>0?t.b-e.b:0,a:t.a}}var ar=function(t){function e(t,n,i,r){var o;f()(this,e),oi(arguments,4,"blend"),t=ui(t),n=ui(n),i=ui(i),mi("blend","a",0,t),mi("blend","b",1,n),mi("blend","mix",2,i);var a=i;return r&&(i=r(i)),(o=E()(this,T()(e).call(this,{a:t,b:n,mix:i}))).originalMix=a,t.type&&n.type&&(o.type=t.type),o.inlineMaker=function(t){return"mix(".concat(t.a,", ").concat(t.b,", clamp(").concat(t.mix,", 0., 1.))")},o}return I()(e,t),m()(e,[{key:"eval",value:function(t){var e=Pi(this.mix.eval(t),0,1);return Mi(this.a.eval(t),this.b.eval(t),e)}},{key:"replaceChild",value:function(t,n){t===this.mix&&(this.originalMix=n),Ai()(T()(e.prototype),"replaceChild",this).call(this,t,n)}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),function(t,e){if(t.type!==e.type||!["number","color","image","placement","date"].includes(t.type))throw new Fe("blend(): invalid parameter types\n\t'a' type was '".concat(t.type,"'\n\t'b' type was '").concat(e.type,"'"),Le.INCORRECT_TYPE)}(this.a,this.b),yi("blend","mix",2,"number",this.mix),this.type=this.a.type}},{key:"_preDraw",value:function(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];(t=Ai()(T()(e.prototype),"_preDraw",this)).call.apply(t,[this].concat(i)),this.originalMix.isA(Si)&&!this.originalMix.isAnimated()&&this.parent.replaceChild(this,this.b)}},{key:"value",get:function(){var t=Pi(this.mix.value,0,1);return Mi(this.a.value,this.b.value,t)}}]),e}(Ei),sr=n(12),ur=n.n(sr),lr="DEFAULT_RAMP_OTHERS",cr="CARTO_VL_OTHERS",hr="DESC",dr={othersLabel:cr,samples:10,order:"ASC"},pr=-(1<<24),fr=function(){function t(e){f()(this,t),this.buckets=e}return m()(t,[{key:"applyToShaderSource",value:function(t){var e=this,n={};this.buckets.childrenNames.map((function(n){return e.buckets[n]._applyToShaderSource(t)})).map((function(t,i){n[e.buckets.childrenNames[i]]=t}));var i="buckets".concat(this.buckets._uid),r=this._getComparisons(n),o=this.buckets.list.elems.map(r).join(""),a="float ".concat(i,"(float x){\n            ").concat(o,"\n            return ").concat("category"===this.buckets.input.type?"(-1.)":(this.buckets.numCategories-1).toFixed(20),";\n        }");return{preface:this.buckets._prefaceCode(n.input.preface+n.list.preface+a),inline:"".concat(i,"(").concat(n.input.inline,")")}}},{key:"_getComparisons",value:function(t){var e="category"===this.buckets.input.type?"==":"<",n=this.buckets.numCategoriesWithoutOthers-1||1;return n<=20?function(i,r){return"".concat(r>0?"else":""," if (x").concat(e,"(").concat(t.list.inline[r],")){\n                return ").concat(r,"./").concat(n.toFixed(20),";\n            }")}:function(i,r){return"if (x".concat(e,"(").concat(t.list.inline[r],")){\n                return ").concat(r,"./").concat(n.toFixed(20),";\n            }")}}}]),t}(),gr=function(t){function e(t,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cr;f()(this,e),oi(arguments,3,"buckets");var o={input:t=ui(t),list:n=ui(n),othersLabel:r=ui(r)};return(i=E()(this,T()(e).call(this,o))).numCategories=null,i.numCategoriesWithoutOthers=null,i.type="category",i._GLSLhelper=new fr(ur()(ur()(i))),i}return I()(e,t),m()(e,[{key:"eval",value:function(t){var e=this.input.eval(t),n=this.numCategoriesWithoutOthers-1||1;if("category"===this.input.type){for(var i=0;i<this.list.elems.length;i++)if(e===this.list.elems[i].eval(t))return i/n;return-1}for(var r=0;r<this.list.elems.length;r++)if(e<this.list.elems[r].eval(t))return r/n;return 1}},{key:"_bindMetadata",value:function(t){var n=this;if(Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),"number"!==this.input.type&&"category"!==this.input.type)throw new Fe("buckets(): invalid first parameter type\n\t'input' type was ".concat(this.input.type),Le.INCORRECT_TYPE);if(yi("buckets","list",1,["number-list","category-list"],this.list),yi("buckets","othersLabel",2,"category",this.othersLabel),Ci("buckets","othersLabel",2,this.othersLabel),this.list.elems.map((function(t,e){if(n.input.type!==t.type)throw new Fe("buckets(): invalid ".concat(hi(e+1)," parameter type")+"\n\texpected type was ".concat(n.input.type,"\n\tactual type was ").concat(t.type),Le.INCORRECT_TYPE);if("number"!==t.type&&"category"!==t.type)throw new Fe("buckets(): invalid ".concat(hi(e+1)," parameter type\n\ttype was ").concat(t.type),Le.INCORRECT_TYPE)})),"category"===this.input.type){var i=t.properties[this.input.propertyName];this._numDatasetCategories=i?i.categories.length:this.list.elems.length-1}this.numCategories=this.list.elems.length+1,this.numCategoriesWithoutOthers="category"===this.input.type?this.numCategories-1:this.numCategories}},{key:"_applyToShaderSource",value:function(t){return this._GLSLhelper.applyToShaderSource(t)}},{key:"getLegendData",value:function(t){var e=this.toString(),n=this.list.elems.map((function(t){return t.value})),i={othersLabel:t&&t.othersLabel?t.othersLabel:this.othersLabel.value,order:t?t.order:hr.ASCENDING};return{data:"number"===this.input.type?function(t,e){for(var n=[],i=0;i<=t.length;i++)n.push({key:[i-1>=0?t[i-1]:Number.NEGATIVE_INFINITY,i<t.length?t[i]:Number.POSITIVE_INFINITY],value:i/t.length});return e&&e===hr&&(n=n.sort((function(t,e){return e.key[0]-t.key[0]}))),n}(n,i.sort):function(t,e,n){var i=t.length-1||1,r=t.map((function(t,e){return{key:t,value:e/i}}));return e>t.length&&r.push({key:n.othersLabel,value:-1}),n.order&&n.order===hr&&(r=r.sort((function(t,e){return e.key-t.key}))),r}(n,this._numDatasetCategories,i),name:e}}},{key:"value",get:function(){return this.eval()}}]),e}(Ei),mr=function(t){function e(t){var n;return f()(this,e),oi(arguments,1,"category"),bi("category","categoryName",0,t),(n=E()(this,T()(e).call(this,{})))._value=t,n.type="category",n}return I()(e,t),m()(e,[{key:"eval",value:function(){return this.value}},{key:"isAnimated",value:function(){return!1}},{key:"isPlaying",value:function(){return!1}},{key:"_bindMetadata",value:function(t){this._metadata=t}},{key:"_applyToShaderSource",value:function(){return{preface:this._prefaceCode("uniform float cat".concat(this._uid,";\n")),inline:"cat".concat(this._uid)}}},{key:"_postShaderCompile",value:function(t,e){this._getBinding(t).uniformLocation=e.getUniformLocation(t,"cat".concat(this._uid))}},{key:"_preDraw",value:function(t,e,n){if(this._metadata){var i=this._metadata.categoryToID.get(this.value);n.uniform1f(this._getBinding(t).uniformLocation,i)}}},{key:"value",get:function(){return this._value},set:function(t){this.value=t}}]),e}(Ei),yr=n(18),_r=n.n(yr),vr=function(t){function e(t,n,i){var r;return f()(this,e),oi(arguments,3,"cielab"),t=ui(t),n=ui(n),i=ui(i),mi("cielab","l",0,t),mi("cielab","a",1,n),mi("cielab","b",2,i),(r=E()(this,T()(e).call(this,{l:t,a:n,b:i}))).type="color",r._setGenericGLSL((function(t){return"cielabToSRGBA(vec4(".concat(t.l,", ").concat(t.a,", ").concat(t.b,", 1.))")}),_r.a),r}return I()(e,t),m()(e,[{key:"eval",value:function(t){return ei({l:this.l.eval(t),a:this.a.eval(t),b:this.b.eval(t)})}},{key:"getLegendData",value:function(){return{name:"color",data:[{key:"",value:this.value}]}}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),yi("cielab","l",0,"number",this.l),yi("cielab","a",1,"number",this.a),yi("cielab","b",2,"number",this.b)}},{key:"value",get:function(){return this.eval(null)}}]),e}(Ei),br=n(15),xr=n.n(br),wr=function(t){function e(t){var n;if(f()(this,e),oi(arguments,1,"property"),bi("property","name",0,t),""===t)throw new Fe("property(): invalid parameter, zero-length string",Le.INCORRECT_VALUE);return(n=E()(this,T()(e).call(this,{}))).name=t,n.expressionName=t,Ai()(T()(e.prototype),"_setGenericGLSL",ur()(n)).call(ur()(n),(function(t,e){return e(n.name)})),n}return I()(e,t),m()(e,[{key:"isFeatureDependent",value:function(){return!0}},{key:"eval",value:function(t){if(!t)throw new Fe("A property needs to be evaluated in a 'feature'.",Le.MISSING_REQUIRED);return t[this.name]&&t[this.name]===pr?null:t[this.name]}},{key:"toString",value:function(){return"$".concat(this.name)}},{key:"_bindMetadata",value:function(t){var e=t.properties[this.name];if(!e)throw new Fe("Property '".concat(this.name,"' does not exist"),Le.MISSING_REQUIRED);this._metadata=t,this.type=e.type,"category"===this.type&&void 0===this.numCategories&&Object.defineProperty(this,"numCategories",{get:function(){return e.categories.length}})}},{key:"_applyToShaderSource",value:function(t){return{preface:"",inline:t(this.name)}}},{key:"_getMinimumNeededSchema",value:function(){var t=this._variableName?"unknown":fn;return xr()({},this.name,[{type:t}])}},{key:"value",get:function(){return this.propertyName}},{key:"propertyName",get:function(){return this.name}},{key:"categories",get:function(){return"category"===this.type?this._metadata.properties[this.name].categories:void 0}}]),e}(Ei),Cr=function(t){function e(t){var n,i=t.property,r=t.expressionName,o=t.aggName,a=t.aggType;return f()(this,e),mi(r,"property",0,i),(n=E()(this,T()(e).call(this,{property:i})))._aggName=o,n._expressionName=r,n.type=a,n}return I()(e,t),m()(e,[{key:"eval",value:function(t){return t[this.propertyName]}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),this._metadata=t,_i(this._expressionName,"property",0,wr,this.property),yi(this._expressionName,"property",0,this.type,this.property)}},{key:"_applyToShaderSource",value:function(t){return{preface:"",inline:"".concat(t(this.propertyName))}}},{key:"_postShaderCompile",value:function(){}},{key:"_getMinimumNeededSchema",value:function(){return xr()({},this.property.name,[{type:pn,op:this._aggName}])}},{key:"name",get:function(){return this.property.name}},{key:"propertyName",get:function(){return vn.aggColumn(this.property.name,this._aggName)}},{key:"aggName",get:function(){return this._aggName}},{key:"numCategories",get:function(){return this.property.numCategories}},{key:"categories",get:function(){return this.property.categories}},{key:"value",get:function(){return this.propertyName}}]),e}(Ei),Pr=function(t){function e(t){return f()(this,e),oi(arguments,1,"clusterAvg"),E()(this,T()(e).call(this,{property:t,expressionName:"clusterAvg",aggName:"avg",aggType:"number"}))}return I()(e,t),e}(Cr),Mr=function(t){function e(t){return f()(this,e),oi(arguments,1,"clusterMax"),E()(this,T()(e).call(this,{property:t,expressionName:"clusterMax",aggName:"max",aggType:"number"}))}return I()(e,t),e}(Cr),Or=function(t){function e(t){return f()(this,e),oi(arguments,1,"clusterMin"),E()(this,T()(e).call(this,{property:t,expressionName:"clusterMin",aggName:"min",aggType:"number"}))}return I()(e,t),e}(Cr),kr=function(t){function e(t){return f()(this,e),oi(arguments,1,"clusterMode"),E()(this,T()(e).call(this,{property:t,expressionName:"clusterMode",aggName:"mode",aggType:"category"}))}return I()(e,t),e}(Cr),Er=function(t){function e(t){return f()(this,e),oi(arguments,1,"clusterSum"),E()(this,T()(e).call(this,{property:t,expressionName:"clusterSum",aggName:"sum",aggType:"number"}))}return I()(e,t),e}(Cr),Sr=function(t){function e(){var t;return f()(this,e),oi(arguments,0,"clusterCount"),(t=E()(this,T()(e).call(this,{}))).type="number",t._hasClusterFeatureCount=!1,t}return I()(e,t),m()(e,[{key:"isFeatureDependent",value:function(){return!0}},{key:"eval",value:function(t){return Number(t._cdb_feature_count)||1}},{key:"getLegendData",value:function(){return{data:this._hasClusterFeatureCount?this._metadata.properties._cdb_feature_count:[]}}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),this._metadata=t,this._hasClusterFeatureCount=void 0!==t.properties._cdb_feature_count}},{key:"_applyToShaderSource",value:function(t){return{preface:"",inline:this._hasClusterFeatureCount?t("_cdb_feature_count"):"1."}}},{key:"propertyName",get:function(){return"_cdb_feature_count"}}]),e}(Ei),Tr=["second","minute","hour","day","month","year","week","quarter","trimester","semester","decade","century","millennium"],Ar=["dayOfYear","weekOfYear","monthOfYear","quarterOfYear","dayOfMonth","dayOfWeek","hourOfDay","minuteOfHour"],Ir=function(t){function e(t){var n,i=t.property,r=t.expressionName,o=t.dimension,a=t.type,s=t.range;return f()(this,e),mi(r,"property",0,i),(n=E()(this,T()(e).call(this,{property:i})))._dimension=o,n._dimension.propertyName=vn.dimColumn(n.property.propertyName,n._dimension.group.units),n._expressionName=r,n.type=a,n._range=s,n}return I()(e,t),m()(e,[{key:"eval",value:function(t){return t[this.propertyName]}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),_i(this._expressionName,"property",0,wr,this.property),yi(this._expressionName,"property",0,"date",this.property),this._range=t.properties[t.baseName(this.propertyName)].dimension.range}},{key:"_resolveAliases",value:function(){}},{key:"_applyToShaderSource",value:function(t){return{preface:"",inline:this._range?this._range.map((function(e){return["".concat(t(e))]})):"".concat(t(this.propertyName))}}},{key:"_postShaderCompile",value:function(){}},{key:"_getMinimumNeededSchema",value:function(){return xr()({},this.name,[{type:"dimension",dimension:this._dimension,range:!!this._range}])}},{key:"name",get:function(){return this.property.propertyName}},{key:"propertyName",get:function(){return this._dimension.propertyName}},{key:"value",get:function(){return{name:this.propertyName,range:this._range,dimension:this._dimension}}}],[{key:"serialUnits",get:function(){return Tr}},{key:"cyclicUnits",get:function(){return Ar}}]),e}(Ei),Dr=function(t){function e(t,n,i){f()(this,e);var r=Ir.cyclicUnits.includes(n);return oi(arguments,3,"clusterTime"),mi("clusterTime","property",0,t),xi("clusterTime","units",1,n,r?Ir.cyclicUnits:Ir.serialUnits),E()(this,T()(e).call(this,{property:t,expressionName:"clusterTime",dimension:{group:{units:n,timezone:i},format:r?"number":"iso"},type:r?"number":"timerange",range:r?void 0:[]}))}return I()(e,t),m()(e,[{key:"converse",value:function(t){return t}}]),e}(Ir),Rr=function(t){function e(t){var n;return f()(this,e),oi(arguments,1,"constant"),vi("constant","x",0,t),(n=E()(this,T()(e).call(this,{})))._value=t,n.type="number",n.inlineMaker=function(){return"(".concat(t.toFixed(20),")")},n}return I()(e,t),m()(e,[{key:"eval",value:function(){return this.value}},{key:"toString",value:function(){return"".concat(this.value)}},{key:"value",get:function(){return this._value},set:function(t){this._value=t}}]),e}(Ei),Fr=function(t){function e(t){var n;f()(this,e),oi(arguments,1,"hex"),bi("hex","hexadecimalColor",0,t),(n=E()(this,T()(e).call(this,{}))).type="color";try{n.color=li(t)}catch(t){var i=di("hex","hexadecimalColor",0);throw new Fe("".concat(i," \nInvalid hexadecimal color string"),Le.INCORRECT_VALUE)}return n.hexadecimalColor=t,n.inlineMaker=function(){return"vec4(".concat((n.color.r/255).toFixed(4),", ").concat((n.color.g/255).toFixed(4),", ").concat((n.color.b/255).toFixed(4),", ").concat(n.color.a.toFixed(4),")")},n}return I()(e,t),m()(e,[{key:"toString",value:function(){return this.hexadecimalColor}},{key:"eval",value:function(){return this.value}},{key:"getLegendData",value:function(){return{name:"color",data:[{key:"",value:this.value}]}}},{key:"value",get:function(){return this.color}}]),e}(Ei),Lr=Nr("hsl",!1),zr=Nr("hsla",!0);function Nr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(o){function a(n,i,r,o){var s;f()(this,a),oi(arguments,4,"hsla");var u=[n,i,r,o].map(ui),l=_()(u,4);o=l[3];var c={h:n=l[0],s:i=l[1],l:r=l[2]};return e&&(mi(t,"a",3,o),c.a=o),mi(t,"h",0,n),mi(t,"s",1,i),mi(t,"l",2,r),(s=E()(this,T()(a).call(this,c)))._alpha=e,s.type="color",s}return I()(a,o),m()(a,[{key:"eval",value:function(t){return function(t,e,n,i,r,o){var a=r?o?i.eval(o):i.value:1,s={r:Math.abs(6*t-3)-1,g:2-Math.abs(6*t-2),b:2-Math.abs(6*t-4),a},u=(1-Math.abs(2*n-1))*e;return s.r=Pi(s.r,0,1),s.g=Pi(s.g,0,1),s.b=Pi(s.b,0,1),s.r=255*((s.r-.5)*u+n),s.g=255*((s.g-.5)*u+n),s.b=255*((s.b-.5)*u+n),s}(Pi(i(this.h,t,!0),0,1),Pi(i(this.s,t),0,1),Pi(i(this.l,t),0,1),this.a,this._alpha,t)}},{key:"getLegendData",value:function(){return{name:"color",data:[{key:"",value:this.value}]}}},{key:"_bindMetadata",value:function(t){var e=this;Ai()(T()(a.prototype),"_bindMetadata",this).call(this,t),n("h",0,this.h),n("s",1,this.s),n("l",2,this.l),this._alpha&&yi("hsla","a",3,"number",this.a),Ai()(T()(a.prototype),"_setGenericGLSL",this).call(this,(function(t){return"vec4(HSLtoRGB(vec3(\n                    ".concat(t.h).concat(r(e.h,!0),",\n                    clamp(").concat(t.s).concat(r(e.s),", 0., 1.),\n                    clamp(").concat(t.l).concat(r(e.l),", 0., 1.)\n                )), ").concat(e._alpha?"clamp(".concat(t.a,", 0., 1.)"):"1.",")")}),"\n                    #ifndef HSL2RGB\n                    #define HSL2RGB\n                    vec3 HSLtoRGB(vec3 HSL) {\n                        float R = abs(HSL.x * 6. - 3.) - 1.;\n                        float G = 2. - abs(HSL.x * 6. - 2.);\n                        float B = 2. - abs(HSL.x * 6. - 4.);\n                        float C = (1. - abs(2. * HSL.z - 1.)) * HSL.y;\n                        vec3 RGB = clamp(vec3(R,G,B), 0., 1.);\n                        return (RGB - 0.5) * C + HSL.z;\n                    }\n                    #endif\n                ")}},{key:"value",get:function(){return this.eval(null)}}]),a}(Ei);function n(e,n,i){if(mi(t,e,n,i),"number"!==i.type&&"category"!==i.type&&void 0!==i.type)throw new Fe("".concat(t,"(): invalid parameter\n\t").concat(e," type was: '").concat(i.type,"'"),Le.INCORRECT_TYPE)}function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=null!==e?t.eval(e):t.value;return"category"===t.type?i/(n?t.numCategories+1:t.numCategories):i}function r(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"category"===t.type?"/".concat(e?t.numCategories+1:t.numCategories,"."):""}}var Br=Ur("hsv",!1),Vr=Ur("hsva",!0);function Ur(t,e){return function(i){function r(n,i,o,a){var s;f()(this,r),oi(arguments,e?4:3,t);var u={h:n=ui(n),s:i=ui(i),v:o=ui(o)};return e&&(a=ui(a),mi(t,"a",3,a),u.a=a),mi(t,"h",0,n),mi(t,"s",1,i),mi(t,"v",2,o),(s=E()(this,T()(r).call(this,u))).type="color",s}return I()(r,i),m()(r,[{key:"eval",value:function(t){var n=this,i=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"category"===e.type?e.eval(t)/(n?e.numCategories+1:e.numCategories):e.eval(t)};return function(i,r,o){var a={r:Math.abs(6*i-3)-1,g:2-Math.abs(6*i-2),b:2-Math.abs(6*i-4),a:e?Pi(n.a.eval(t),0,1):1};return a.r=Pi(a.r,0,1),a.g=Pi(a.g,0,1),a.b=Pi(a.b,0,1),a.r=((a.r-1)*r+1)*o*255,a.g=((a.g-1)*r+1)*o*255,a.b=((a.b-1)*r+1)*o*255,a}(Pi(i(this.h,!0),0,1),Pi(i(this.s),0,1),Pi(i(this.v),0,1))}},{key:"getLegendData",value:function(){return{name:"color",data:[{key:"",value:this.value}]}}},{key:"_bindMetadata",value:function(t){var i=this;Ai()(T()(r.prototype),"_bindMetadata",this).call(this,t),n("h",0,this.h),n("s",1,this.s),n("v",2,this.v),e&&yi("hsva","a",3,"number",this.a);var o=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"category"===t.type?"/".concat(e?t.numCategories+1:t.numCategories,"."):""};Ai()(T()(r.prototype),"_setGenericGLSL",this).call(this,(function(t){return"vec4(HSVtoRGB(vec3(\n                    ".concat(t.h).concat(o(i.h,!0),",\n                    clamp(").concat(t.s).concat(o(i.s),", 0.,1.),\n                    clamp(").concat(t.v).concat(o(i.v),", 0.,1.)\n                )), ").concat(e?"clamp(".concat(t.a,", 0.,1.)"):"1.",")")}),"\n                    #ifndef HSV2RGB\n                    #define HSV2RGB\n                    vec3 HSVtoRGB(vec3 HSV) {\n                        float R = abs(HSV.x * 6. - 3.) - 1.;\n                        float G = 2. - abs(HSV.x * 6. - 2.);\n                        float B = 2. - abs(HSV.x * 6. - 4.);\n                        vec3 RGB = clamp(vec3(R,G,B), 0., 1.);\n                        return ((RGB - 1.) * HSV.y + 1.) * HSV.z;\n                    }\n                    #endif\n                ")}},{key:"value",get:function(){return this.eval(null)}}]),r}(Ei);function n(e,n,i){if(mi(t,e,n,i),"number"!==i.type&&"category"!==i.type&&void 0!==i.type)throw new Fe("".concat(t,"(): invalid parameter\n\t").concat(e," type was: '").concat(i.type,"'"),Le.INCORRECT_TYPE)}}var jr=function(t){function e(){return f()(this,e),E()(this,T()(e).apply(this,arguments))}return I()(e,t),e}(Gr("iLinear",(function(t){return t}),void 0,(function(t){return t}))),qr=function(t){function e(){return f()(this,e),E()(this,T()(e).apply(this,arguments))}return I()(e,t),e}(Gr("cubic",(function(t){return"cubicEaseInOut(".concat(t,")")}),"\n    #ifndef CUBIC\n    #define CUBIC\n    float cubicEaseInOut(float p){\n        if (p < 0.5) {\n            return 4. * p * p * p;\n        }else {\n            float f = ((2. * p) - 2.);\n            return 0.5 * f * f * f + 1.;\n        }\n    }\n    #endif\n",(function(t){return t})));function Gr(t,e,n,i){var r=function(r){function o(e){return f()(this,o),oi(arguments,1,t),e=ui(e),E()(this,T()(o).call(this,{m:e}))}return I()(o,r),m()(o,[{key:"eval",value:function(t){return i(this.m.eval(t))}},{key:"_bindMetadata",value:function(t){if(Ai()(T()(o.prototype),"_bindMetadata",this).call(this,t),"number"!==this.m.type)throw new Fe("Blending cannot be performed by '".concat(this.m.type,"'"),Le.INCORRECT_TYPE);this.type="number",this._setGenericGLSL((function(t){return e(t.m)}),n)}}]),o}(Ei);return r.type="interpolator",r}Gr("bounceEaseIn",(function(t){return"BounceEaseIn(".concat(t,")")}),"\n    #ifndef BOUNCE_EASE_IN\n    #define BOUNCE_EASE_IN\n    float BounceEaseIn_BounceEaseOut(float p)\n    {\n        if(p < 4./11.0)\n        {\n            return (121. * p * p)/16.0;\n        }\n        else if(p < 8./11.0)\n        {\n            return (363./40.0 * p * p) - (99./10.0 * p) + 17./5.0;\n        }\n        else if(p < 9./10.0)\n        {\n            return (4356./361.0 * p * p) - (35442./1805.0 * p) + 16061./1805.0;\n        }\n        else\n        {\n            return (54./5.0 * p * p) - (513./25.0 * p) + 268./25.0;\n        }\n    }\n    float BounceEaseIn(float p)\n    {\n        return 1. - BounceEaseOut(1. - p);\n    }\n    #endif\n\n",(function(t){return t}));var Hr=function(){function t(e,n){f()(this,t),e&&n&&(this._baseName=e.baseName(n))}return m()(t,[{key:"isRange",value:function(){return!1}},{key:"isIdentity",value:function(){return!1}},{key:"sourceToInternal",value:function(t,e){return e}},{key:"internalToExternal",value:function(t,e){return e}},{key:"externalToSource",value:function(t,e){return e}},{key:"sourceToExternal",value:function(t,e){return this.internalToExternal(t,this.sourceToInternal(t,e))}},{key:"externalToInternal",value:function(t,e){return this.sourceToInternal(t,this.externalToSource(t,e))}},{key:"inlineInternalMatch",value:function(t,e){return"".concat(t)}}]),t}(),Zr=function(t){function e(){return f()(this,e),E()(this,T()(e).apply(this,arguments))}return I()(e,t),m()(e,[{key:"isIdentity",value:function(){return!0}},{key:"sourceToInternal",value:function(t,e){return e}},{key:"internalToExternal",value:function(t,e){return e}},{key:"sourceToExternal",value:function(t,e){return e}},{key:"externalToSource",value:function(t,e){return e}},{key:"externalToInternal",value:function(t,e){return e}}]),e}(Hr),Wr=function(t){function e(t,n,i,r){var o,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10;return f()(this,e),oi(arguments,5,"linear"),t=ui(t),!n||n instanceof Ei||void 0!==i||void 0!==r||(r=n,n=void 0,i=void 0),void 0===n&&void 0===i&&(n=Iu(t),i=Au(t)),n=ui(n),i=ui(i),a=ui(a),mi("linear","input",0,t),mi("linear","min",1,n),mi("linear","max",2,i),mi("linear","samples",4,a),(o=E()(this,T()(e).call(this,{input:t,min:n,max:i}))).type="number",o.samples=a,o._rangeMode=r||"unit",o}return I()(e,t),m()(e,[{key:"converse",value:function(t){if("date"===this.input.type){var e=this.min.value.getTime();return tn(t*(this.max.value.getTime()-e)+e)}if("timerange"===this.input.type){var n,i,r=sn(this.min.value),o=sn(this.max.value);if(void 0===r||void 0===o)return null;switch(this._rangeMode){case"unit":n=r.startValue,i=o.startValue;break;case"start":case"end":n=r.startValue,i=o.endValue}return $.fromValue(t*(i-n)+n,r.timeZone)}var a=this.min.value;return t*(this.max.value-a)+a}},{key:"limits",value:function(){var t,e;if("timerange"===this.input.type)switch(this._rangeMode){case"unit":t=sn(this.min.value).startValue,e=sn(this.max.value).startValue;break;case"start":case"end":t=sn(this.min.value).startValue,e=sn(this.max.value).endValue}else t=this.min.value,e=this.max.value;return[t,e]}},{key:"eval",value:function(t){if("timerange"===this.input.type){var e;switch(this._rangeMode){case"unit":case"start":e=0;break;case"end":e=1}return(t._dataframe.properties[this._metadata.decodedProperties(this.input.propertyName)[e]][t._index]-this._internalMin)/(this._internalMax-this._internalMin)}var n=this.input.eval(t),i=this._metadata,r=i&&this.input.propertyName?i.codec(this.input.propertyName):new Zr,o=r.externalToInternal(i,this.min.eval(t)),a=r.externalToInternal(i,this.max.eval(t));return(r.externalToInternal(i,n)-o)/(a-o)}},{key:"_bindMetadata",value:function(t){if(Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),this._metadata=t,"timerange"===this.input.type){var n,i,r;switch(this._rangeMode){case"unit":n=0,i=t.codec(this.input.propertyName).externalToInternal(t,this.min.value)[n],r=t.codec(this.input.propertyName).externalToInternal(t,this.max.value)[n];break;case"start":n=0,i=t.codec(this.input.propertyName).externalToInternal(t,this.min.value)[0],r=t.codec(this.input.propertyName).externalToInternal(t,this.max.value)[1];break;case"end":n=1,i=t.codec(this.input.propertyName).externalToInternal(t,this.min.value)[0],r=t.codec(this.input.propertyName).externalToInternal(t,this.max.value)[1]}this._internalMin=i,this._internalMax=r,this.inlineMaker=function(t){return"((".concat(t.input[n],"-(").concat(i.toFixed(20),"))/(").concat((r-i).toFixed(20),"))")}}else{yi("linear","input",0,["number","date"],this.input),yi("linear","min",1,["number","date"],this.min),yi("linear","max",2,["number","date"],this.max),yi("linear","samples",4,["number"],this.samples);var o=this.input.propertyName&&t.codec(this.input.propertyName);if(!o||o.isIdentity())this.inlineMaker=function(t){return"((".concat(t.input,"-").concat(t.min,")/(").concat(t.max,"-").concat(t.min,"))")};else{var a=o.externalToInternal(t,this.min.value),s=o.externalToInternal(t,this.max.value);this.inlineMaker=function(t){return"((".concat(t.input,"-(").concat(a.toFixed(20),"))/(").concat((s-a).toFixed(20),"))")}}}}},{key:"getLegendData",value:function(t){var e=this.min.value,n=this.max.value,i=this.toString();if(e===n)return{min:e,max:n,name:i,data:[]};for(var r=t&&t.samples?t.samples:this.samples,o=1/(r-1),a=[],s=0;a.length<r;s+=o){var u=Pi(s,0,1);a.push({key:s*(n-e)+e,value:u})}return t.order&&t.order===hr&&(a=a.sort((function(t,e){return e.key-t.key}))),{data:a,min:e,max:n,name:i}}},{key:"value",get:function(){return{min:this.min,max:this.max,input:this.input.value,range:this._rangeMode,samples:this.samples}}}]),e}(Ei),Kr=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],Xr=function(t){function e(t){var n;if(f()(this,e),oi(arguments,1,"namedColor"),bi("namedColor","colorName",0,t),!Kr.includes(t.toLowerCase())){var i=di("namedColor","colorName",0);throw new Fe("".concat(i,"\nInvalid color name:  '").concat(t,"'"),Le.INCORRECT_VALUE)}return(n=E()(this,T()(e).call(this,{}))).type="color",n.name=t,n.expressionName=t,n.color=function(t){if($r[t])return $r[t];var e=document.createElement("div");e.style.backgroundColor=t,document.body.appendChild(e);var n=getComputedStyle(e).backgroundColor;document.body.removeChild(e);var i=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/.exec(n),r={r:Number(i[1]),g:Number(i[2]),b:Number(i[3]),a:Number(i[4]||1)};return $r[t]=r,r}(n.name),n.inlineMaker=function(){return"vec4(".concat((n.color.r/255).toFixed(4),", ").concat((n.color.g/255).toFixed(4),", ").concat((n.color.b/255).toFixed(4),", ").concat(n.color.a.toFixed(4),")")},n}return I()(e,t),m()(e,[{key:"toString",value:function(){return this.expressionName}},{key:"getLegendData",value:function(){return{name:"color",data:[{key:"",value:this.color}]}}},{key:"value",get:function(){return this.color}}]),e}(Ei),$r={},Yr=n(16),Qr=n.n(Yr),Jr=function(t){function e(){var t;return f()(this,e),oi(arguments,0,"now"),(t=E()(this,T()(e).call(this,{now:Wa(0)}))).type="number",Qr()(T()(e.prototype),"inlineMaker",(function(t){return t.now}),ur()(t),!0),t}return I()(e,t),m()(e,[{key:"eval",value:function(){return this.value}},{key:"isAnimated",value:function(){return!0}},{key:"isPlaying",value:function(){return!0}},{key:"_setTimestamp",value:function(t){this.now.value=t}},{key:"value",get:function(){return this.now.value}}]),e}(Ei),to=function(t){function e(t){var n;return f()(this,e),oi(arguments,1,"number"),vi("number","x",0,t),(n=E()(this,T()(e).call(this,{})))._value=t,n.type="number",n}return I()(e,t),m()(e,[{key:"eval",value:function(){return this.value}},{key:"toString",value:function(){return"".concat(this.value)}},{key:"isAnimated",value:function(){return!1}},{key:"isPlaying",value:function(){return!1}},{key:"_applyToShaderSource",value:function(){return{preface:this._prefaceCode("uniform float number".concat(this._uid,";")),inline:"number".concat(this._uid)}}},{key:"_postShaderCompile",value:function(t,e){this._getBinding(t).uniformLocation=e.getUniformLocation(t,"number".concat(this._uid))}},{key:"_preDraw",value:function(t,e,n){n.uniform1f(this._getBinding(t).uniformLocation,this.value)}},{key:"value",get:function(){return this._value},set:function(t){this._value=t}}]),e}(Ei),eo=n(14),no=n.n(eo),io=function(t){function e(t,n){var i;return f()(this,e),oi(arguments,2,"opacity"),t=ui(t),n=ui(n),mi("opacity","input",0,t),mi("opacity","alpha",1,n),(i=E()(this,T()(e).call(this,{input:t,alpha:n}))).inlineMaker=function(t){return"vec4((".concat(t.input,").rgb, ").concat(t.alpha,")")},i}return I()(e,t),m()(e,[{key:"eval",value:function(t){var e=this.input.eval(t),n=this.alpha.eval(t);return e.a=n,e}},{key:"getLegendData",value:function(t){var e=this.input.getLegendData(t),n=this.alpha.value;if("color"===this.input.type){var i=e.data.map((function(t){var e=t.value;return{key:t.key,value:{r:e.r,g:e.g,b:e.b,a:n}}}));return no()({},e,{data:i})}var r=e.data;return no()({},e,{data:r,alpha:n})}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),yi("opacity","input",0,["color","image"],this.input),yi("opacity","alpha",1,"number",this.alpha),this.type=this.input.type}},{key:"value",get:function(){var t=this.input.value;return t.a=this.alpha.value,t}}]),e}(Ei),ro=function(t){function e(t){var n;return f()(this,e),oi(arguments,1,"asc"),mi("asc","input",0,t=ui(t)),(n=E()(this,T()(e).call(this,{input:t}))).type="orderer",n}return I()(e,t),m()(e,[{key:"eval",value:function(){return this.value}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),_i("asc","input",0,so,this.input)}},{key:"value",get:function(){return"asc"}}]),e}(Ei),oo=function(t){function e(t){var n;return f()(this,e),oi(arguments,1,"desc"),mi("desc","input",0,t=ui(t)),(n=E()(this,T()(e).call(this,{input:t}))).type="orderer",n}return I()(e,t),m()(e,[{key:"eval",value:function(){return this.value}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),_i("desc","input",0,so,this.input)}},{key:"value",get:function(){return"desc"}}]),e}(Ei),ao=function(t){function e(){var t;return f()(this,e),oi(arguments,0,"noOrder"),(t=E()(this,T()(e).call(this,{}))).type="orderer",t}return I()(e,t),m()(e,[{key:"eval",value:function(){return this.value}},{key:"value",get:function(){return"noOrder"}}]),e}(Ei),so=function(t){function e(){var t;return f()(this,e),oi(arguments,1,"width"),(t=E()(this,T()(e).call(this,{}))).type="propertyReference",t}return I()(e,t),e}(Ei),uo=n(22),lo=ho("rgb",!1),co=ho("rgba",!0);function ho(t,e){return function(n){function i(n,r,o,a){var s;f()(this,i),oi(arguments,4,"rgba");var u=[n,r,o,a].map(ui),l=_()(u,4);r=l[1],o=l[2],a=l[3],mi(t,"r",0,n=l[0]),mi(t,"g",1,r),mi(t,"b",2,o);var c={r:n,g:r,b:o};return e&&(mi(t,"a",3,a),c.a=a),(s=E()(this,T()(i).call(this,c))).type="color",s.inlineMaker=function(t){return"vec4(".concat(t.r,"/255., ").concat(t.g,"/255., ").concat(t.b,"/255., ").concat(e?t.a:"1.",")")},s}return I()(i,n),m()(i,[{key:"eval",value:function(){return this.value}},{key:"getLegendData",value:function(){return{name:"color",data:[{key:"",value:this.value}]}}},{key:"_bindMetadata",value:function(n){Ai()(T()(i.prototype),"_bindMetadata",this).call(this,n),yi(t,"r",0,"number",this.r),yi(t,"g",1,"number",this.g),yi(t,"b",2,"number",this.b),e&&yi("rgba","a",3,"number",this.a)}},{key:"value",get:function(){return{r:this.r.value,g:this.g.value,b:this.b.value,a:e?this.a.value:1}}}]),i}(Ei)}var po=function(t){function e(t,n){var i;return f()(this,e),(i=E()(this,T()(e).call(this,{}))).type="palette",i.childType="color",i.name=t,i.subPalettes=new Proxy(n,{get:function(t,e){if("symbol"!==d()(e)&&Number.isSafeInteger(Number(e))&&Array.isArray(t[e]))return t[e].map(li)}}),i.expressionName=t,i.tags=n.tags,i}return I()(e,t),m()(e,[{key:"getColors",value:function(t){var e=this._getBestSubPalette(t);return this.isQualitative()?{colors:e,othersColor:e.pop()}:{colors:e,othersColor:null}}},{key:"toString",value:function(){return this.expressionName}},{key:"_getBestSubPalette",value:function(t){var e=this.getLongestSubPaletteIndex(),n=this.getSmallestSubPaletteIndex();return!Number.isInteger(t)||t>e?t=e:t<n&&(t=n),c()(this.subPalettes[t]).map((function(t){return new co(Is(t.r),Is(t.g),Is(t.b),Is(t.a))}))}},{key:"getSmallestSubPaletteIndex",value:function(){for(var t=this.subPalettes,e=0;e<=20;e++)if(t[e])return e}},{key:"getLongestSubPaletteIndex",value:function(){for(var t=this.subPalettes,e=20;e>=0;e--)if(t[e])return e}},{key:"isQualitative",value:function(){return this.tags.includes("qualitative")}},{key:"isQuantitative",value:function(){return this.tags.includes("quantitative")}}]),e}(Ei),fo={};Object.keys(uo).map((function(t){fo["".concat(t.toUpperCase())]=new po(t,uo[t])}));var go=fo,mo=function(t){function e(){return f()(this,e),E()(this,T()(e).apply(this,arguments))}return I()(e,t),m()(e,[{key:"_bindMetadata",value:function(t){var e=this;this.type="palette",this.childType="color",this.subPalettes=new Proxy(this.input.subPalettes,{get:function(t,n){return Number.isFinite(Number(n))&&Array.isArray(t[n])?e._reversePalette(t[n]):t[n]}}),this.tags=this.input.tags}},{key:"getLongestSubPalette",value:function(){return this._reversePalette(this.input.getLongestSubPalette())}},{key:"_reversePalette",value:function(t){if(this.isQualitative()){var e=c()(t),n=e.pop();return c()(e.reverse()).concat([n])}return c()(t).reverse()}}]),e}(po),yo=function(t){function e(){return f()(this,e),E()(this,T()(e).apply(this,arguments))}return I()(e,t),m()(e,[{key:"_bindMetadata",value:function(t){yi("reverse","array",0,["number-list","category-list","color-list","date-list","image-list"],this.input),this.type=this.input.type,this.childType=this.input.childType}},{key:"eval",value:function(t){return this.elems.map((function(e){return e.eval(t)}))}},{key:"elems",get:function(){return c()(this.input.elems).reverse()}},{key:"value",get:function(){return this.elems.map((function(t){return t.value}))}}]),e}(Ei),_o=function(t){function e(t){return f()(this,e),oi(arguments,1,"reverse"),mi("reverse","input",0,t=ui(t)),E()(this,T()(e).call(this,{input:t}))}return I()(e,t),m()(e,[{key:"_bindMetadata",value:function(t){return Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),Object.setPrototypeOf(this,"palette"===this.input.type?mo.prototype:yo.prototype),this._bindMetadata(t)}}]),e}(Ei),vo=function(){function t(e){f()(this,t),this.classifier=e}return m()(t,[{key:"applyToShaderSource",value:function(t){var e=this,n=this.classifier.childrenNames.map((function(n){return e.classifier[n]._applyToShaderSource(t)})),i={};n.map((function(t,n){i[e.classifier.childrenNames[n]]=t.inline}));var r="classifier".concat(this.classifier.classifierUID),o=this.classifier.numCategories-1||1,a=this.classifier.breakpoints?this.classifier.breakpoints.map((function(t,e){return"".concat(e>0?"else":""," if (x<(").concat(i["arg".concat(e)],")){\n                return ").concat((e/o).toFixed(20),";\n            }")})).join(""):"",s="float ".concat(r,"(float x){\n            ").concat(a,"\n            return 1.;\n        }");return{preface:this.classifier._prefaceCode(n.map((function(t){return t.preface})).reduce((function(t,e){return t+e}),"")+s),inline:"".concat(r,"(").concat(i.input,")")}}}]),t}(),bo=0,xo=function(t){function e(t){var n;return f()(this,e),(n=E()(this,T()(e).call(this,t))).classifierUID=bo++,n.type="category",n._GLSLhelper=new vo(ur()(ur()(n))),n}return I()(e,t),m()(e,[{key:"eval",value:function(t){var e=this.input.eval(t),n=this.breakpoints.findIndex((function(t){return e<=t.value}));return-1===n?1:n/(this.numCategories-1||1)}},{key:"toString",value:function(){return"".concat(this.expressionName,"(").concat(this.input.toString(),", ").concat(this.numCategories,")")}},{key:"_resolveAliases",value:function(t){Ai()(T()(e.prototype),"_resolveAliases",this).call(this,t),this._bucketsInitialization()}},{key:"_bucketsInitialization",value:function(){this._validateBucketsIsProperNumber();var t=this.buckets.value;this.numCategories=t,this.numCategoriesWithoutOthers=t,this._initBreakpointsChildren(t)}},{key:"_initBreakpointsChildren",value:function(t){this.breakpoints=this._breakpointsWithZeros(t);var e=this.breakpoints.reduce((function(t,e,n){return t["arg".concat(n)]=e,t}),{});this._initializeChildren(e)}},{key:"_breakpointsWithZeros",value:function(t){for(var e=[],n=0;n<t-1;n++)e.push(Wa(0));return e}},{key:"_validateBucketsIsProperNumber",value:function(){var t=this.buckets.value;if(vi(this.expressionName,"buckets",1,t),t<=1)throw new Fe("The number of 'buckets' must be >=2, but ".concat(t," was used"),Le.INCORRECT_VALUE)}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),this._validateInputIsNumericProperty()}},{key:"_validateInputIsNumericProperty",value:function(){yi(this.expressionName,"input",0,"number",this.input)}},{key:"_getBreakpointList",value:function(){return this._genBreakpoints(),this.breakpoints.map((function(t){return t.value}))}},{key:"_genBreakpoints",value:function(){}},{key:"_applyToShaderSource",value:function(t){return this._GLSLhelper?this._GLSLhelper.applyToShaderSource(t):null}},{key:"_preDraw",value:function(t,n,i){this._genBreakpoints(),Ai()(T()(e.prototype),"_preDraw",this).call(this,t,n,i)}},{key:"getLegendData",value:function(){for(var t=this._getBreakpointList(),e=t.length,n=this.min.value,i=this.max.value,r=[],o=0;o<=e;o++)r.push({key:[0===t[o-1]?0:t[o-1]||n,0===t[o]?0:t[o]||i],value:o/e});return{name:this.toString(),data:r}}},{key:"value",get:function(){return this.eval()}}]),e}(Ei),wo=function(t){function e(t,n){return f()(this,e),si(arguments,2,"globalEqIntervals"),E()(this,T()(e).call(this,{input:t,buckets:n}))}return I()(e,t),m()(e,[{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),this._updateBreakpointsWith(t)}},{key:"_updateBreakpointsWith",value:function(t){var e=this;if("_cdb_feature_count"===this.input.propertyName)throw new Fe("'clusterCount' can not be used in GlobalEqIntervals. Consider using ViewportEqIntervals instead",Le.INCORRECT_TYPE);var n=t.stats(this.input.name),i=n.min,r=n.max;this.min=Wa(i),this.max=Wa(r),this.breakpoints.map((function(t,n){t.value=i+(n+1)/e.numCategories*(r-i)}))}}]),e}(xo),Co=function(t){function e(t,n){return f()(this,e),si(arguments,2,"globalQuantiles"),E()(this,T()(e).call(this,{input:t,buckets:n}))}return I()(e,t),m()(e,[{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),yi("globalQuantiles","input",0,"number",this.input),this._updateBreakpointsWith(t)}},{key:"_validateInputIsNumericProperty",value:function(){}},{key:"_updateBreakpointsWith",value:function(t){var e=this;if("_cdb_feature_count"===this.input.propertyName)throw new Fe("'clusterCount' can not be used in GlobalQuantiles. Consider using ViewportQuantiles instead",Le.INCORRECT_TYPE);var n=this.input.name,i=t.stats(n),r=i.min,o=i.max,a=t.sample.map((function(t){return t[n]}));this.min=Wa(r),this.max=Wa(o),a.sort((function(t,e){return t-e})),this.breakpoints=this.breakpoints.map((function(t,n){return t.value=a[Math.floor((n+1)/e.numCategories*a.length)],t}))}}]),e}(xo),Po=function(t){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return f()(this,e),ai(arguments,2,"globalStandardDev"),oi(arguments,3,"globalStandardDev"),E()(this,T()(e).call(this,{input:t,buckets:n,_classSize:i}))}return I()(e,t),m()(e,[{key:"_resolveAliases",value:function(t){Ai()(T()(e.prototype),"_resolveAliases",this).call(this,t),this._validateClassSizeIsProperNumber()}},{key:"_validateClassSizeIsProperNumber",value:function(){var t=this._classSize.value;if(vi(this.expressionName,"classSize",2,t),t<=0)throw new Fe("The 'classSize' must be > 0.0, but ".concat(t," was used."),Le.INCORRECT_VALUE)}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),this._updateBreakpointsWith(t)}},{key:"_updateBreakpointsWith",value:function(t){if("_cdb_feature_count"===this.input.propertyName)throw new Fe("'clusterCount' can not be used in GlobalStandardDev. Consider using ViewportStandardDev instead",Le.INCORRECT_TYPE);var e=this.input.name,n=t.sample.map((function(t){return t[e]})),i=Re(n),r=function(t){var e=Re(t),n=Re(function(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i]-e;n.push(r*r)}return n}(t,e));return Math.sqrt(n)}(n),o=t.stats(e),a=o.max;this.min=Wa(o.min),this.max=Wa(a);var s=Mo(i,r,this.numCategories,this._classSize.value);this.breakpoints.forEach((function(t,e){t.value=s[e]}))}}]),e}(xo);function Mo(t,e,n,i){if(0===e||isNaN(e))throw new wn("There is no Standard Deviation, not possible to compute ".concat(n," buckets (just one feature or maybe all share the same value...?)"),Cn.NOT_SUPPORTED);var r,o=[],a=[],s=n%2==0?0:1;do{var u=s*(e*i);o.push(t+u),a.push(t-u),(r=c()(new Set(o.concat(a)))).sort((function(t,e){return t-e})),s++}while(r.length<n-1);return r}var Oo=function(t){function e(t,n){return f()(this,e),si(arguments,2,"viewportEqIntervals"),E()(this,T()(e).call(this,{input:t,buckets:n}))}return I()(e,t),m()(e,[{key:"_resolveAliases",value:function(t){Ai()(T()(e.prototype),"_resolveAliases",this).call(this,t),this._minMaxInitialization()}},{key:"_minMaxInitialization",value:function(){var t=this.input,e={min:Pu(t),max:Cu(t)};this._initializeChildren(e)}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),yi("viewportEqIntervals","input",0,"number",this.input)}},{key:"_validateInputIsNumericProperty",value:function(){}},{key:"_genBreakpoints",value:function(){var t=this,e=this.min.value,n=this.max.value;this.breakpoints.map((function(i,r){i.value=e+(r+1)/t.numCategories*(n-e)}))}}]),e}(xo),ko=function(t){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return f()(this,e),ai(arguments,2,"viewportQuantiles"),oi(arguments,3,"viewportQuantiles"),t=ui(t),E()(this,T()(e).call(this,{input:t,buckets:n,_histogramSize:i}))}return I()(e,t),m()(e,[{key:"_resolveAliases",value:function(t){Ai()(T()(e.prototype),"_resolveAliases",this).call(this,t),this._histogramInitialization()}},{key:"_histogramInitialization",value:function(){this._validateHistogramSizeIsProperNumber();var t=this.input,e=this._histogramSize.value,n={min:Pu(t),max:Cu(t),_histogram:Eu(t,e)};this._initializeChildren(n)}},{key:"_validateHistogramSizeIsProperNumber",value:function(){var t=this._histogramSize.value;if(vi(this.expressionName,"histogramSize",2,t),t<=0)throw new Fe("The 'histogramSize' must be > 0, but ".concat(t," was used"),Le.INCORRECT_VALUE)}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),yi("viewportQuantiles","input",0,"number",this.input)}},{key:"_validateInputIsNumericProperty",value:function(){}},{key:"_genBreakpoints",value:function(){var t=this._histogram.value;if(t){var e=this._getAccumHistogramFrom(t),n=this._getMinMaxFrom(t),i=_()(n,2);this._updateBreakpointsWith({accumHistogram:e,min:i[0],max:i[1]})}}},{key:"_updateBreakpointsWith",value:function(t){var e=this,n=t.accumHistogram,i=t.min,r=t.max,o=n.length,a=0,s=n[o-1];this.breakpoints.map((function(t,u){for(;a<o&&!(n[a]>(u+1)/e.numCategories*s);a++);t.value=a/o*(r-i)+i}))}},{key:"_getAccumHistogramFrom",value:function(t){var e=0;return t.map((function(t){return e+=t.y}))}},{key:"_getMinMaxFrom",value:function(t){return[t[0].x[0],t[t.length-1].x[1]]}}]),e}(xo),Eo=function(t){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;return f()(this,e),ai(arguments,2,"viewportStandardDev"),oi(arguments,4,"viewportStandardDev"),E()(this,T()(e).call(this,{input:t,buckets:n,_classSize:i,_histogramSize:r}))}return I()(e,t),m()(e,[{key:"_resolveAliases",value:function(t){Ai()(T()(e.prototype),"_resolveAliases",this).call(this,t),this._validateClassSizeIsProperNumber(),this._histogramInitialization()}},{key:"_histogramInitialization",value:function(){this._validateHistogramSizeIsProperNumber();var t=this.input,e=this._histogramSize.value,n={min:Pu(t),max:Cu(t),_histogram:Eu(t,e)};this._initializeChildren(n)}},{key:"_validateClassSizeIsProperNumber",value:function(){var t=this._classSize.value;if(vi(this.expressionName,"classSize",2,t),t<=0)throw new Fe("The 'classSize' must be > 0.0, but ".concat(t," was used."),Le.INCORRECT_VALUE)}},{key:"_validateHistogramSizeIsProperNumber",value:function(){var t=this._histogramSize.value;if(vi(this.expressionName,"histogramSize",3,t),t<=0)throw new Fe("The 'histogramSize' must be > 0, but ".concat(t," was used"),Le.INCORRECT_VALUE)}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),yi("viewportStandardDev","input",0,"number",this.input)}},{key:"_validateInputIsNumericProperty",value:function(){}},{key:"_genBreakpoints",value:function(){var t=this._histogram.value;if(void 0!==t){var e=this._getAverageFrom(t),n=this._getStandardDevFrom(t,e);this._updateBreakpointsWith({avg:e,stdev:n})}}},{key:"_updateBreakpointsWith",value:function(t){var e=Mo(t.avg,t.stdev,this.numCategories,this._classSize.value);this.breakpoints.forEach((function(t,n){t.value=e[n]}))}},{key:"_getAverageFrom",value:function(t){var e=0,n=0;return t.forEach((function(t){var i=t.x,r=t.y;e+=r,n+=(i[0]+i[1])/2*r})),n/e}},{key:"_getStandardDevFrom",value:function(t,e){var n=0,i=0;return t.forEach((function(t){var r=t.x,o=t.y;n+=o;var a=(r[0]+r[1])/2-e;i+=o*a*a})),Math.sqrt(i/n)}}]),e}(xo),So="https://libs.cartocdn.com/carto-vl/assets/symbols",To={bicycle:"".concat(So,"/bicycle.svg"),building:"".concat(So,"/building.svg"),bus:"".concat(So,"/bus.svg"),car:"".concat(So,"/car.svg"),circle:"".concat(So,"/circle.svg"),circleOutline:"".concat(So,"/circleOutline.svg"),cross:"".concat(So,"/cross.svg"),house:"".concat(So,"/house.svg"),flag:"".concat(So,"/flag.svg"),marker:"".concat(So,"/marker.svg"),markerOutline:"".concat(So,"/markerOutline.svg"),plus:"".concat(So,"/plus.svg"),square:"".concat(So,"/square.svg"),squareOutline:"".concat(So,"/squareOutline.svg"),star:"".concat(So,"/star.svg"),starOutline:"".concat(So,"/starOutline.svg"),triangle:"".concat(So,"/triangle.svg"),triangleOutline:"".concat(So,"/triangleOutline.svg")},Ao=function(t){function e(t){var n;return f()(this,e),oi(arguments,1,"categoryIndex"),mi("categoryIndex","property",0,t=ui(t)),(n=E()(this,T()(e).call(this,{property:t})))._numTranslatedCategories=null,n.type="category",n._translatePixels=new Float32Array(65536),n._translateArray=[],n._numTranslatedCategories=0,n._numTranslatedCategoriesGL=0,n}return I()(e,t),m()(e,[{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),yi("categoryIndex","property",0,"category",this.property),this._metadata=t,this._calcTranslated()}},{key:"eval",value:function(t){var e=this.property.eval(t),n=this._metadata.categoryToID.get(e);return this._translateArray[n]}},{key:"_preDraw",value:function(t,e,n){n.activeTexture(n.TEXTURE0+e.freeTexUnit),this._numTranslatedCategoriesGL!==this.numCategories?(this._numTranslatedCategoriesGL=this.numCategories,this._calcTranslated(),this._translateTexture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this._translateTexture),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.texImage2D(n.TEXTURE_2D,0,n.ALPHA,256,256,0,n.ALPHA,n.FLOAT,this._translatePixels),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)):n.bindTexture(n.TEXTURE_2D,this._translateTexture),n.uniform1i(this._getBinding(t).texRampTranslateLoc,e.freeTexUnit),e.freeTexUnit++}},{key:"_applyToShaderSource",value:function(t){var e=256..toFixed(20),n=this.property._applyToShaderSource(t);return{inline:"ramp_translate".concat(this._uid,"(").concat(n.inline,")"),preface:"\n                    uniform sampler2D texRampTranslate".concat(this._uid,";\n                    float ramp_translate").concat(this._uid,"(float s){\n                        vec2 v = vec2(mod(s, ").concat(e,"), floor(s / ").concat(e,"));\n                        return texture2D(texRampTranslate").concat(this._uid,", v/").concat(e,").a;\n                    }")}}},{key:"_postShaderCompile",value:function(t,e){this._getBinding(t).texRampTranslateLoc=e.getUniformLocation(t,"texRampTranslate".concat(this._uid))}},{key:"_calcTranslated",value:function(){var t=this.numCategories;if(this._numTranslatedCategories!==t){this._numTranslatedCategories=t;for(var e=0;e<t;e++){var n=this._metadata.categoryToID.get(this.metaColumn.categories[e].name),i=e/(t-1),r={x:n%256,y:Math.floor(n/256)};this._translatePixels[256*r.y+r.x]=i,this._translateArray.push(i)}}}},{key:"getLegendData",value:function(t){for(var e=this._metadata.properties[this.property.propertyName].categories,n=e.length,i=n-1,r=[],o=0;o<n;o++)r.push({key:e[o].name,value:o/i});return t.order&&t.order===hr&&(r=r.sort((function(t,e){return e.key-t.key}))),{data:r}}},{key:"numCategories",get:function(){return this.metaColumn.categories.length}},{key:"metaColumn",get:function(){var t=this.property.propertyName;return this._metadata.properties[t]?this._metadata.properties[t]:this._metadata.properties[this.property.name]}},{key:"numCategoriesWithoutOthers",get:function(){return this.numCategories}},{key:"value",get:function(){return this.eval()}}]),e}(Ei),Io=function(t){function e(){return f()(this,e),E()(this,T()(e).apply(this,arguments))}return I()(e,t),m()(e,[{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),this.numImages=this.elems.length,this._getChildren().forEach((function(t,e){return yi("imageArray","imageArray[".concat(e,"]"),0,"image",t)}))}},{key:"eval",value:function(t){return this.elems.map((function(e){return e.eval(t)}))}},{key:"_applyToShaderSource",value:function(){return{preface:this._prefaceCode("\n                uniform sampler2D atlas".concat(this._uid,";\n\n                vec4 atlas").concat(this._uid,"Fn(vec2 imageUV, float category) {\n                    return texture2D(atlas").concat(this._uid,", imageUV/16. + vec2(mod(category, 16.), floor(category/16.))/16. ).rgba;\n                }\n            ")),inline:"atlas".concat(this._uid,"Fn")}}},{key:"_postShaderCompile",value:function(t,e){this._getBinding(t).texLoc=e.getUniformLocation(t,"atlas".concat(this._uid))}},{key:"_preDraw",value:function(t,e,n){this.init=!0;for(var i=0;i<this.numImages;i++){var r=this["image-".concat(i)];this.init=this.init&&r.canvas}if(this.init&&!this.texture){n.activeTexture(n.TEXTURE0+e.freeTexUnit),this.texture=n.createTexture(),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,4096,4096,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);for(var o=0,a=0,s=0;s<this.numImages;s++){var u=this["image-".concat(s)];n.texSubImage2D(n.TEXTURE_2D,0,o,a,n.RGBA,n.UNSIGNED_BYTE,u.canvas),(o+=256)+256>4096&&(o=0,a+=256)}n.generateMipmap(n.TEXTURE_2D)}this.texture&&(n.activeTexture(n.TEXTURE0+e.freeTexUnit),n.bindTexture(n.TEXTURE_2D,this.texture),n.uniform1i(this._getBinding(t).texLoc,e.freeTexUnit),e.freeTexUnit++)}}]),e}(Ei),Do=function(t){function e(t){var n;return f()(this,e),oi(arguments,1,"image"),bi("image","url",0,t),(n=E()(this,T()(e).call(this,{}))).type="image",n.canvas=null,n.url=t,n._promise=new Promise((function(t,e){n.image=new window.Image,n.image.onload=function(){n.canvas=function(t){var e=document.createElement("canvas");e.width=256,e.height=256;var n=e.getContext("2d"),i=Math.max(t.width,t.height),r=t.width/i*256,o=t.height/i*256;return n.drawImage(t,(256-r)/2,(256-o)/2,r,o),e}(n.image),n.image=null,t()},n.image.onerror=e,n.image.crossOrigin="anonymous",n.image.src=n.url})),n}return I()(e,t),m()(e,[{key:"loadImages",value:function(){return this.count=this.count+1||1,this._promise}},{key:"keepDefaultsOnBlend",value:function(){this.default&&this.parent.color.default&&(this.parent.color=ci())}},{key:"eval",value:function(){return this.value}},{key:"getLegendData",value:function(t){return{name:"image",data:[{key:"url",value:this.url}]}}},{key:"_free",value:function(t){this.texture&&t.deleteTexture(this.texture)}},{key:"_applyToShaderSource",value:function(){return{preface:this._prefaceCode("uniform sampler2D texSprite".concat(this._uid,";")),inline:"texture2D(texSprite".concat(this._uid,", imageUV).rgba")}}},{key:"_postShaderCompile",value:function(t,e){this._getBinding(t)._texLoc=e.getUniformLocation(t,"texSprite".concat(this._uid))}},{key:"_preDraw",value:function(t,e,n){!this.init&&this.canvas&&(this.init=!0,n.activeTexture(n.TEXTURE0+e.freeTexUnit),this.texture=n.createTexture(),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,this.canvas),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.generateMipmap(n.TEXTURE_2D),this.canvas=null),this.texture&&(n.activeTexture(n.TEXTURE0+e.freeTexUnit),n.bindTexture(n.TEXTURE_2D,this.texture),n.uniform1i(this._getBinding(t)._texLoc,e.freeTexUnit),e.freeTexUnit++)}},{key:"value",get:function(){return this.url}}]),e}(Ei),Ro=new Do(To.circle),Fo=function(t){function e(){return f()(this,e),E()(this,T()(e).apply(this,arguments))}return I()(e,t),m()(e,[{key:"_bindMetadata",value:function(t){Ei.prototype._bindMetadata.call(this,t),this.type=this.palette.childType,yi("ramp","input",0,"category",this.input),_i("ramp","palette",1,Io,this.palette),this.others===lr?this.others=Ro:yi("ramp","others",2,"image",this.others),this.input.isA(wr)&&(this.input=new Ao(this.input),this.input._bindMetadata(t)),this.others._bindMetadata(t),this.childrenNames.push("others")}},{key:"eval",value:function(t){var e=this.input.eval(t);return this._calcEval(e)}},{key:"_calcEval",value:function(t){var e=Math.round(t*(this.input.numCategoriesWithoutOthers-1));return this.palette.eval()[e]||this.others.eval()}},{key:"getLegendData",value:function(t){var e=this,n=this.input.type,i=this.input.getLegendData(t),r=i.data.map((function(t){var n=t.value;return{key:t.key,value:n=e._calcEval(n)}}));return t&&t.order&&t.order===hr&&(r=r.sort((function(t,e){return e.key-t.key}))),no()({type:n},i,{data:r})}},{key:"_applyToShaderSource",value:function(t){var e=this.input._applyToShaderSource(t),n=this.palette._applyToShaderSource(t),i=this.others._applyToShaderSource(t);return{preface:this._prefaceCode("\n                uniform float rampImageMultiplier".concat(this._uid,";\n\n                ").concat(e.preface,"\n                ").concat(n.preface,"\n                ").concat(i.preface,"\n\n                vec4 rampImage").concat(this._uid,"(vec2 imageUV, float index){\n                    if (index == ").concat("(-1.)","){\n                        return ").concat(i.inline,";\n                    }\n                    return ").concat(n.inline,"(imageUV, rampImageMultiplier").concat(this._uid,"*index);\n                }\n            ")),inline:"rampImage".concat(this._uid,"(imageUV, ").concat(e.inline,")")}}},{key:"_postShaderCompile",value:function(t,n){Ai()(T()(e.prototype),"_postShaderCompile",this).call(this,t,n),this._getBinding(t)._multiplierLoc=n.getUniformLocation(t,"rampImageMultiplier".concat(this._uid))}},{key:"_preDraw",value:function(t,n,i){Ai()(T()(e.prototype),"_preDraw",this).call(this,t,n,i),i.uniform1f(this._getBinding(t)._multiplierLoc,this.input.numCategoriesWithoutOthers-1)}},{key:"value",get:function(){return this.eval()}}]),e}(Ei),Lo=function(t){function e(){return f()(this,e),E()(this,T()(e).apply(this,arguments))}return I()(e,t),m()(e,[{key:"_bindMetadata",value:function(t){var n=new Rr(1),i=new Xr("gray");Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),this.type=this.palette.childType,this.others===lr?(this.others="number-list"===this.palette.type?n:i,this.others._bindMetadata(t)):(this.others._bindMetadata(t),yi("ramp","others",2,this.palette.childType,this.others)),(this.input.isA(wr)||this.input.isA(Cr))&&(this.input="number"===this.input.type?new Wr(this.input):new Ao(this.input),this.input._bindMetadata(t)),yi("ramp","input",0,["number","category"],this.input),this.childrenNames.push("others"),this._metadata=t}},{key:"eval",value:function(t){var e=this.input.eval(t);return this._calcEval(e,t)}},{key:"_calcEval",value:function(t,e){var n=this._getPalette(),i=n.palette,r=n.others,o=this.palette.isA(po)?i.map((function(t){return t.eval(e)})):this.palette.eval(e);if(-1===t)return r.eval(e);var a=o.length-1,s=Math.floor(t*a),u=Math.ceil(t*a),l=Pi(s,0,a),c=Pi(u,0,a),h=function(t){return t-Math.floor(t)}(t*a);return Mi(o[l],o[c],h)}},{key:"getLegendData",value:function(t){var e=this,n=Object.assign({},dr,t),i=this.input.type,r=this.input.getLegendData(n),o=r.data.map((function(t){var n=t.value;return{key:t.key,value:n=e._calcEval(n,void 0)}}));return n.order&&n.order===hr&&(o=function(t){return t[0]&&(Array.isArray(t[0].key)||"number"==typeof t[0].key)}(o)?function(t,e){return Array.isArray(t[0].key)?e===hr?t.sort((function(t,e){return e.key[0]-t.key[0]})):t:e===hr?t.sort((function(t,e){return e.key-t.key})):t}(o,n.order):function(t,e){return t.sort(e===hr?function(t,e){return e.key.localeCompare(t.key)}:function(t,e){return t.key.localeCompare(e.key)})}(o,n.order)),no()({type:i},r,{data:o})}},{key:"_applyToShaderSource",value:function(t){var e=this.input._applyToShaderSource(t),n=this._getPalette(),i=n.others,r=n.palette.map((function(e){return e._applyToShaderSource(t)})),o=i._applyToShaderSource(t),a="number-list"===this.palette.type?function(t){return zo(t.map((function(t){return t.inline})))}(r):function(t){return"cielabToSRGBA(".concat(zo(t.map((function(t){return"sRGBAToCieLAB(".concat(t.inline,")")}))),")")}(r),s="number-list"===this.palette.type?"float":"vec4",u="ramp_color".concat(this._uid,"(").concat(e.inline,")");return{preface:this._prefaceCode("\n            ".concat(e.preface,"\n            ").concat(_r.a,"\n            ").concat(r.map((function(t){return t.preface})).join("\n"),"\n            ").concat(o.preface,"\n\n            ").concat(s," ramp_color").concat(this._uid,"(float x){\n                return x==").concat("(-1.)","\n                    ? ").concat(o.inline,"\n                    : ").concat(a,";\n            }")),inline:u}}},{key:"_getPalette",value:function(){return this.palette.isA(po)?this._getColorPalette():{palette:this.palette.elems,others:this.others}}},{key:"_getColorPalette",value:function(){var t=this.palette.getColors(this.input.numCategoriesWithoutOthers);return{palette:t.colors,others:this._defaultOthers&&t.othersColor?t.othersColor:this.others}}},{key:"value",get:function(){return this.eval()}}]),e}(Ei);function zo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t[e];return e===t.length-1?n:function(t,e,n,i){var r=(n/(i-1)).toFixed(20),o=(1/(i-1)).toFixed(20),a="clamp((x - ".concat(r,")/").concat(o,", 0., 1.)");return"mix(".concat(t,", ").concat(e,", ").concat(a,")")}(n,zo(t,e+1),e,t.length)}var No=function(t){function e(t,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lr;return f()(this,e),oi(arguments,3,"ramp"),t=ui(t),n=ui(n),mi("ramp","input",0,t),mi("ramp","palette",1,n),r!==lr&&mi("ramp","others",2,r=ui(r)),(i=E()(this,T()(e).call(this,{input:t,palette:n}))).palette=n,i.others=r,i.type=n.type,i._defaultOthers=r===lr,i}return I()(e,t),m()(e,[{key:"_bindMetadata",value:function(t){switch(Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),this.palette.type){case"image-list":Object.setPrototypeOf(this,Fo.prototype);break;default:Object.setPrototypeOf(this,Lo.prototype)}return this._bindMetadata(t)}}]),e}(Ei),Bo=function(t){function e(){return f()(this,e),E()(this,T()(e).apply(this,arguments))}return I()(e,t),m()(e,[{key:"eval",value:function(t){return this.elems.map((function(e){return e.eval(t)}))}},{key:"_applyToShaderSource",value:function(t){var e=this.elems.map((function(e){return e._applyToShaderSource(t)}));return{preface:e.map((function(t){return t.preface})).join("\n"),inline:e.map((function(t){return t.inline}))}}},{key:"value",get:function(){return this.elems.map((function(t){return t.value}))}}]),e}(Ei),Vo=function(t){function e(){return f()(this,e),E()(this,T()(e).apply(this,arguments))}return I()(e,t),m()(e,[{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),this._getChildren().forEach((function(t,e){return yi("ListTransformation","ListTransformation[".concat(e,"]"),0,"transformation",t)})),this.type="transformation"}},{key:"eval",value:function(t){return this.elems.map((function(e){return e.eval(t)}))}},{key:"_applyToShaderSource",value:function(t){var e=this.elems.map((function(e){return e._applyToShaderSource(t)}));return{preface:this._prefaceCode("\n                ".concat(e.map((function(t){return t.preface})).join("\n"),"\n\n                vec2 listTransform").concat(this._uid,"(vec2 p) {\n                    ").concat(e.map((function(t){return"p = ".concat(t.inline,"(p);")})).join("\n"),"\n                    return p;\n                }\n            ")),inline:"listTransform".concat(this._uid)}}}]),e}(Ei),Uo=["number","category","color","date","image","transformation"],jo=function(t){function e(t){var n;if(f()(this,e),oi(arguments,1,"list"),!t)throw new Fe("list(): invalid parameters: must receive at least one argument.",Le.MISSING_REQUIRED);if(Array.isArray(t)||(t=[t]),!(t=t.map(ui)).length)throw new Fe("list(): invalid parameters: must receive at least one argument.",Le.MISSING_REQUIRED);return t.map((function(t,e){mi("list","item[".concat(e,"]"),e,t)})),(n=E()(this,T()(e).call(this,t))).elems=t,n.type=t[0].type,n}return I()(e,t),m()(e,[{key:"eval",value:function(t){return this.elems.map((function(e){return e.eval(t)}))}},{key:"_bindMetadata",value:function(t){var n=this;if(Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),this._setTypes(),-1===Uo.indexOf(this.childType))throw new Fe("list(): invalid parameters type: ".concat(this.childType,"."),Le.INCORRECT_TYPE);switch(this.elems.map((function(t,e){if(mi("list","item[".concat(e,"]"),e,t),t.type!==n.childType)throw new Fe("list(): invalid ".concat(hi(e+1)," parameter type, invalid argument type combination."),Le.INCORRECT_TYPE)})),this.elems[0].type){case"image":Object.setPrototypeOf(this,Io.prototype);break;case"transformation":Object.setPrototypeOf(this,Vo.prototype);break;default:Object.setPrototypeOf(this,Bo.prototype)}return this._bindMetadata(t)}},{key:"_setTypes",value:function(){this.childType=this.elems[0].type,this.type="".concat(this.childType,"-list")}},{key:"value",get:function(){return this.elems.map((function(t){return t.value}))}}]),e}(Ei),qo=function(t){function e(t){var n;f()(this,e),oi(arguments,1,"time"),(n=E()(this,T()(e).call(this,{}))).type="date";try{n.date=Je(t)}catch(t){pi("time","date",0,"Date or string or number","other type")}return n.inlineMaker=function(){},n}return I()(e,t),m()(e,[{key:"eval",value:function(){return this.value}},{key:"isAnimated",value:function(){return!1}},{key:"isPlaying",value:function(){return!1}},{key:"value",get:function(){return this.date}}]),e}(Ei),Go=function(t){function e(t){var n;return f()(this,e),(n=E()(this,T()(e).call(this,{}))).type="timerange",n.range=sn(t),n.inlineMaker=function(){},n}return I()(e,t),m()(e,[{key:"eval",value:function(t){return{iso:this.range.iso.eval(t),timeZone:this.range.timeZone.eval(t),startValue:this.range.startValue.eval(t),endValue:this.range.endValue.eval(t),startDate:this.range.startDate.eval(t),endDate:this.range.endDate.eval(t)}}},{key:"isAnimated",value:function(){return!1}},{key:"isPlaying",value:function(){return!1}},{key:"value",get:function(){return{iso:this.range.iso.value,timeZone:this.range.timeZone.value,startValue:this.range.startValue.value,endValue:this.range.endValue.value,startDate:this.range.startDate.value,endDate:this.range.endDate.value}}}]),e}(Ei),Ho=function(t){function e(t,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cr;f()(this,e),oi(arguments,3,"top");for(var o={property:t,buckets:n=ui(n),othersLabel:r=ui(r)},a=0;a<16;a++)o["_top".concat(a)]=Wa(0);return(i=E()(this,T()(e).call(this,o))).numBuckets=0,i.type="category",i}return I()(e,t),m()(e,[{key:"eval",value:function(t){var e=this._metadata.properties[this.property.propertyName],n=c()(e.categories).sort((function(t,e){return e.frequency-t.frequency})),i=this.property.eval(t),r=n.findIndex((function(t){return t.name===i}));return r>=this.numBuckets||-1===r?{label:cr,index:-1}:{label:i,index:r/(this.numCategoriesWithoutOthers-1||1)}}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),_i("top","property",0,wr,this.property),yi("top","property",0,"category",this.property),Ci("top","buckets",1,this.buckets),yi("top","buckets",1,"number",this.buckets),yi("top","othersLabel",2,"category",this.othersLabel),Ci("top","othersLabel",2,this.othersLabel),this._metadata=t,this._textureBuckets=null,this.numBuckets=this.getNumBuckets(this.buckets)}},{key:"getNumBuckets",value:function(t){var e=Math.round(t);if(e>this.property.numCategories&&(e=this.property.numCategories),e>16){var n=t;throw new Fe("top() function has a limit of ".concat(16," buckets but '").concat(n,"' buckets were specified."),Le.INCORRECT_VALUE)}return e}},{key:"_applyToShaderSource",value:function(t){var e=this,n={};return this.childrenNames.forEach((function(i){n[i]=e[i]._applyToShaderSource(t)})),{preface:this._prefaceCode(Object.values(n).map((function(t){return t.preface})).join("")+"\n            uniform float numCategoriesWithoutOthers".concat(this._uid,";\n\n            float top").concat(this._uid,"(float id){\n                float r;\n                if (").concat(n._top0.inline," == id){\n                    r = 0.;\n                } else if (").concat(n._top1.inline," == id){\n                    r = 1.;\n                } else if (").concat(n._top2.inline," == id){\n                    r = 2.;\n                } else if (").concat(n._top3.inline," == id){\n                    r = 3.;\n                } else if (").concat(n._top4.inline," == id){\n                    r = 4.;\n                } else if (").concat(n._top5.inline," == id){\n                    r = 5.;\n                } else if (").concat(n._top6.inline," == id){\n                    r = 6.;\n                } else if (").concat(n._top7.inline," == id){\n                    r = 7.;\n                } else if (").concat(n._top8.inline," == id){\n                    r = 8.;\n                } else if (").concat(n._top9.inline," == id){\n                    r = 9.;\n                } else if (").concat(n._top10.inline," == id){\n                    r = 10.;\n                } else if (").concat(n._top11.inline," == id){\n                    r = 11.;\n                } else if (").concat(n._top12.inline," == id){\n                    r = 12.;\n                } else if (").concat(n._top13.inline," == id){\n                    r = 13.;\n                } else if (").concat(n._top14.inline," == id){\n                    r = 14.;\n                } else if (").concat(n._top15.inline," == id){\n                    r = 15.;\n                }else{\n                    return ").concat("(-1.)",";\n                }\n                return r/(numCategoriesWithoutOthers").concat(this._uid,"-1.);\n            }")),inline:"top".concat(this._uid,"(").concat(n.property.inline,")")}}},{key:"_postShaderCompile",value:function(t,n){this._numCategoriesLoc=n.getUniformLocation(t,"numCategoriesWithoutOthers".concat(this._uid)),Ai()(T()(e.prototype),"_postShaderCompile",this).call(this,t,n)}},{key:"_preDraw",value:function(t,n,i){for(var r=this,o=this.numBuckets,a=this._metadata.properties[this.property.propertyName],s=c()(a.categories).sort((function(t,e){return e.frequency-t.frequency})),u=0;u<16;u++)this["_top".concat(u)].value=Number.POSITIVE_INFINITY;s.forEach((function(t,e){e<o&&(r["_top".concat(e)].value=r._metadata.categoryToID.get(t.name))})),i.uniform1f(this._numCategoriesLoc,this.numCategoriesWithoutOthers),Ai()(T()(e.prototype),"_preDraw",this).call(this,t,n,i)}},{key:"getLegendData",value:function(t){var e=this._metadata.properties[this.property.propertyName],n=c()(e.categories).sort((function(t,e){return e.frequency-t.frequency})),i=this.numBuckets,r=[],o=this.toString(),a=this.numCategoriesWithoutOthers-1||1;return n.forEach((function(t,e){e<i&&r.push({key:t.name,value:e/a})})),n.length>this.buckets&&r.push({key:t&&t.othersLabel?t.othersLabel:this.othersLabel.value,value:-1}),{name:o,data:r}}},{key:"value",get:function(){return this.eval()}},{key:"numCategories",get:function(){return this.numBuckets+1}},{key:"numCategoriesWithoutOthers",get:function(){return this.numCategories-1}}]),e}(Ei),Zo=void 0,Wo=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zo,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zo;f()(this,e),oi(arguments,2,"fade");var r=ui(n===Zo?.15:n),o=i===Zo?r:ui(i);return mi("fade","param1",0,r),mi("fade","param2",1,o),(t=E()(this,T()(e).call(this,{fadeIn:r,fadeOut:o}))).type="fade",t.inlineMaker=function(t){return{in:t.fadeIn,out:t.fadeOut}},t}return I()(e,t),m()(e,[{key:"eval",value:function(t){return{fadeIn:this.fadeIn.eval(t),fadeOut:this.fadeOut.eval(t)}}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),yi("fade","param1",0,"number",this.fadeIn),yi("fade","param2",1,"number",this.fadeOut)}},{key:"value",get:function(){return{fadeIn:this.fadeIn.value,fadeOut:this.fadeOut.value}}}]),e}(Ei),Ko=new Set,Xo=new Set,$o=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Wo;return f()(this,e),oi(arguments,3,"animation"),i=ui(i),t=ui(t),(n=E()(this,T()(e).call(this,{input:t,duration:i,fade:r})))._init(),n}return I()(e,t),m()(e,[{key:"_init",value:function(){var t=this.input,e=t;this._input=t.isA(wr)||t.isA(Dr)&&"timerange"===t.type?js(t,Iu(t),Au(t),"start"):this.input,this.childrenNames=this.childrenNames.filter((function(t){return"_input"===t})),this.childrenNames.push("_input"),this.childrenNames.push("fade"),this.childrenNames.push("duration"),this.type="number",this._originalInput=e,this._paused=!1,this.progress=Wa(0),this.childrenNames.push("progress"),this.expressionName="animation",this.preface="\n        #ifndef ANIMATION\n        #define ANIMATION\n\n        float animation(float _input, float progress, float duration, float fadeIn, float fadeOut){\n            float x = 0.;\n\n            // Check for NaN\n            if (_input <= 0.0 || 0.0 <= _input){\n                x = 1. - clamp(abs(_input - progress) * duration / (_input > progress ? fadeIn: fadeOut), 0., 1.);\n            }\n\n            return x;\n        }\n\n        #endif\n    ",this.inlineMaker=function(t){return"animation(".concat(t._input,", ").concat(t.progress,", ").concat(t.duration,", ").concat(t.fade.in,", ").concat(t.fade.out,")")},Ko.add(this),this._paused||(this._paused="default")}},{key:"toString",value:function(){return"".concat(this.expressionName,"(").concat(this._input.toString(),", ").concat(this.duration.toString(),", ").concat(this.fade.toString(),")")}},{key:"_bindMetadata",value:function(t){this._input._bindMetadata(t),this.progress._bindMetadata(t),this.fade._bindMetadata(t),this.duration._bindMetadata(t),yi("animation","input",0,["number","date","timerange"],this._originalInput),yi("animation","duration",1,"number",this.duration),yi("animation","fade",2,"fade",this.fade),Ci("animation","duration",1,this.duration)}},{key:"isAnimated",value:function(){return!0}},{key:"_dataReady",value:function(){var t=this;Ko.has(this)&&(Ko.delete(this),Xo.add(this)),setTimeout((function(){if(Xo.has(t)){if((Ko=new Set(c()(Ko).filter((function(t){for(;t.parent;)t=t.parent;return!!t._getRootExpressions})))).size>0)return;c()(Xo.values()).map((function(t){"default"===t._paused&&t.play()})),Xo.clear()}}),0)}},{key:"_postShaderCompile",value:function(t,n){Ai()(T()(e.prototype),"_postShaderCompile",this).call(this,t,n)}},{key:"_setTimestamp",value:function(t){if(Ai()(T()(e.prototype),"_setTimestamp",this).call(this,t),!this._paused||void 0!==this._lastTime){var n=0,i=1/this.duration.value;void 0!==this._lastTime&&(n=t-this._lastTime),this._lastTime=t,this._paused||(this.progress.value=(this.progress.value+i*n)%1)}}},{key:"eval",value:function(t){var e=this._input.eval(t);if(null===e)return 0;var n=this.progress.value,i=this.duration.value,r=this.fade.fadeIn.eval(t),o=this.fade.fadeOut.eval(t);return 1-Pi(Math.abs(e-n)*i/(e>n?r:o),0,1)}},{key:"getProgressValue",value:function(){return this._input.converse(this.progress.value)}},{key:"setTimestamp",value:function(t){var e=Je(t),n=this._input.limits(),i=_()(n,2),r=i[0],o=i[1];if(e.getTime()<r)throw new RangeError("animation.setTimestamp requires the date parameter to be higher than the lower limit");if(e.getTime()>o)throw new RangeError("animation.setTimestamp requires the date parameter to be lower than the higher limit");this.progress.value=(e.getTime()-r)/(o-r)}},{key:"getProgressPct",value:function(){return this.progress.value}},{key:"setProgressPct",value:function(t){if((t=Number.parseFloat(t))<0||t>1)throw new TypeError("animation.setProgressPct requires a number between 0 and 1 as parameter but got: ".concat(t));this.progress.value=t}},{key:"isPlaying",value:function(){return!1===this._paused}},{key:"pause",value:function(){this._paused=!0}},{key:"play",value:function(){this._paused=!1,this.notify()}},{key:"stop",value:function(){this.progress.value=0,this._paused=!0}}]),e}(Ei),Yo=function(t){function e(){return f()(this,e),E()(this,T()(e).apply(this,arguments))}return I()(e,t),m()(e,[{key:"_init",value:function(){var t=this.input,e=this.duration,n=this.fade,i=js(t,Iu(t),Au(t),"start"),r={};Object.keys(t).forEach((function(e){r[e]=t[e]})),Object.setPrototypeOf(r,t);var o=js(r,Iu(r),Au(r),"end"),a=new $o(i,e,new Wo(n.fadeIn,Gu)),s=new $o(o,e,new Wo(Gu,n.fadeOut)),u=ns(a,s);this.combinedAnimation=u,this.childrenNames.push("combinedAnimation"),u.parent=this,this.type="number",this._startAnim=a,this._endAnim=s,this.expressionName="animation",this.inlineMaker=function(t){return t.combinedAnimation}}},{key:"_bindMetadata",value:function(t){this.combinedAnimation._bindMetadata(t)}},{key:"eval",value:function(t){return this.combinedAnimation.eval(t)}},{key:"isAnimated",value:function(){return!0}},{key:"isPlaying",value:function(){return this._startAnim.isPlaying()}},{key:"getProgressValue",value:function(){return this._startAnim.getProgressValue()}},{key:"getProgressPct",value:function(){return this._startAnim.getProgressPct()}},{key:"setProgressPct",value:function(t){this._startAnim.setProgressPct(t),this._endAnim.setProgressPct(t)}},{key:"pause",value:function(){this._startAnim.pause(),this._endAnim.pause()}},{key:"play",value:function(){this._startAnim.play(),this._endAnim.play(),this._endAnim.setProgressPct(this._startAnim.getProgressPct())}},{key:"stop",value:function(){this._startAnim.stop(),this._endAnim.stop()}},{key:"toString",value:function(){return"".concat(this.expressionName,"(").concat(this._input.toString(),", ").concat(this.duration.toString(),", ").concat(this.fade.toString(),")")}}]),e}(Ei),Qo=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Wo;return f()(this,e),oi(arguments,3,"animation"),n=ui(n),t=ui(t),E()(this,T()(e).call(this,{input:t,duration:n,fade:i}))}return I()(e,t),m()(e,[{key:"_resolveAliases",value:function(t){this._getChildren().map((function(e){return e._resolveAliases(t)})),Object.setPrototypeOf(this,"timerange"===this.input.type?Yo.prototype:$o.prototype),this._init()}},{key:"_bindMetadata",value:function(t){this._resolveAliases({}),this._bindMetadata(t)}}]),e}(Ei),Jo=ca("log",(function(t){return Math.log(t)}),(function(t){return"log(".concat(t,")")})),ta=ca("sqrt",(function(t){return Math.sqrt(t)}),(function(t){return"sqrt(".concat(t,")")})),ea=ca("sin",(function(t){return Math.sin(t)}),(function(t){return"sin(".concat(t,")")})),na=ca("cos",(function(t){return Math.cos(t)}),(function(t){return"cos(".concat(t,")")})),ia=ca("tan",(function(t){return Math.tan(t)}),(function(t){return"tan(".concat(t,")")})),ra=ca("sign",(function(t){return Math.sign(t)}),(function(t){return"sign(".concat(t,")")})),oa=ca("abs",(function(t){return Math.abs(t)}),(function(t){return"abs(".concat(t,")")})),aa=ca("isNull",(function(t){return null===t?1:0}),(function(t){return"((".concat(t," == ").concat(pr.toFixed(20),") ? 1. : 0.)")}),["number","category"]),sa=ca("not",(function(t){return 1-t}),(function(t){return"(1.0 - ".concat(t,")")})),ua=ca("floor",(function(t){return Math.floor(t)}),(function(t){return"floor(".concat(t,")")})),la=ca("ceil",(function(t){return Math.ceil(t)}),(function(t){return"ceil(".concat(t,")")}));function ca(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"number";return function(r){function o(e){var i;return f()(this,o),oi(arguments,1,t),e=ui(e),(i=E()(this,T()(o).call(this,{a:e}))).type="number",i.expressionName=t,i.inlineMaker=function(t){return n(t.a)},i}return I()(o,r),m()(o,[{key:"eval",value:function(t){return e(this.a.eval(t))}},{key:"_bindMetadata",value:function(e){Ai()(T()(o.prototype),"_bindMetadata",this).call(this,e),yi(t,"x",0,i,this.a)}},{key:"value",get:function(){return e(this.a.value)}}]),o}(Ei)}var ha=function(t){function e(){return f()(this,e),E()(this,T()(e).call(this,{}))}return I()(e,t),e}(Ei),da=function(t){function e(t){var n,i=t.property;return f()(this,e),i=ui(i),(n=E()(this,T()(e).call(this,{property:i,_impostor:Wa(0)})))._isViewport=!0,n.type="number",n.inlineMaker=function(t){return t._impostor},n}return I()(e,t),m()(e,[{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t)}},{key:"_getMinimumNeededSchema",value:function(){return this.property._getMinimumNeededSchema()}},{key:"_preDraw",value:function(){var t;this._impostor.value=this.value;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];(t=Ai()(T()(e.prototype),"_preDraw",this)).call.apply(t,[this].concat(i))}}]),e}(Ei),pa=function(t){function e(t){var n;return f()(this,e),oi(arguments,1,"viewportAvg"),(n=E()(this,T()(e).call(this,{property:t})))._sum=0,n._count=0,n}return I()(e,t),m()(e,[{key:"eval",value:function(){return this.value}},{key:"accumViewportAgg",value:function(t){var e=this.property.eval(t);if(null!==e){var n=t._cdb_feature_count||1;this._count+=n,this._sum+=n*e}}},{key:"_resetViewportAgg",value:function(){this._sum=0,this._count=0}},{key:"value",get:function(){return this._sum/this._count}}]),e}(da),fa=function(t){function e(t){var n;return f()(this,e),oi(arguments,1,"viewportMax"),(n=E()(this,T()(e).call(this,{property:t})))._value=Number.NEGATIVE_INFINITY,n}return I()(e,t),m()(e,[{key:"eval",value:function(){return this.value}},{key:"accumViewportAgg",value:function(t){var e=this.property.eval(t);null!==e&&(this._value=Math.max(this._value,e))}},{key:"_resetViewportAgg",value:function(){this._value=Number.NEGATIVE_INFINITY}},{key:"value",get:function(){return this._value}}]),e}(da),ga=function(t){function e(t){var n;return f()(this,e),oi(arguments,1,"viewportMin"),(n=E()(this,T()(e).call(this,{property:t})))._value=Number.POSITIVE_INFINITY,n}return I()(e,t),m()(e,[{key:"eval",value:function(){return this.value}},{key:"accumViewportAgg",value:function(t){var e=this.property.eval(t);null!==e&&(this._value=Math.min(this._value,e))}},{key:"_resetViewportAgg",value:function(){this._value=Number.POSITIVE_INFINITY}},{key:"value",get:function(){return this._value}}]),e}(da),ma=function(t){function e(t){var n;return f()(this,e),oi(arguments,1,"viewportSum"),(n=E()(this,T()(e).call(this,{property:t})))._value=0,n}return I()(e,t),m()(e,[{key:"eval",value:function(){return this.value}},{key:"accumViewportAgg",value:function(t){var e=this.property.eval(t);null!==e&&(this._value=this._value+(t._cdb_feature_count||1)*e)}},{key:"_resetViewportAgg",value:function(){this._value=0}},{key:"value",get:function(){return this._value}}]),e}(da),ya=function(t){function e(){var t;return f()(this,e),oi(arguments,0,"viewportCount"),(t=E()(this,T()(e).call(this,{property:Wa(0)})))._value=0,t}return I()(e,t),m()(e,[{key:"toString",value:function(){return"".concat(this.expressionName,"()")}},{key:"eval",value:function(){return this.value}},{key:"accumViewportAgg",value:function(t){this._value+=t._cdb_feature_count||1}},{key:"_resetViewportAgg",value:function(){this._value=0}},{key:"_getMinimumNeededSchema",value:function(){return{}}},{key:"value",get:function(){return this._value}}]),e}(da),_a=function(t){function e(t,n){var i;return f()(this,e),t=ui(t),n=ui(n),mi("viewportPercentile","property",0,t),mi("viewportPercentile","percentile",0,n),oi(arguments,2,"viewportPercentile"),(i=E()(this,T()(e).call(this,{property:t}))).percentile=n,i.childrenNames.push("percentile"),i}return I()(e,t),m()(e,[{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),yi("viewportPercentile","property",0,"number",this.property),yi("viewportPercentile","percentile",1,"number",this.percentile)}},{key:"eval",value:function(t){return null===this._value&&(this._value=va(this.percentile.eval(t),this._total,this._values)),this._value}},{key:"_resetViewportAgg",value:function(){this._value=null,this._map=new Map,this._total=0}},{key:"accumViewportAgg",value:function(t){var e=this.property.eval(t),n=t._cdb_feature_count||1;this._map.set(e,(this._map.get(e)||0)+n),this._total+=n}},{key:"value",get:function(){return va(this.percentile.value,this._total,this._values)}},{key:"_values",get:function(){return c()(this._map.entries())}}]),e}(da);function va(t,e,n){var i=Pi(Math.ceil(t/100*e)-1,0,e-1);n.sort((function(t,e){return t[0]-e[0]}));for(var r=0,o=0;o<n.length;o++)n[o][1]=r+=n[o][1];return function t(e,n,i,r){var o=Math.round((i+r)/2),a=(e[o-1]||[e[o][0]-1,0])[1];return n>=a&&n<e[o][1]?e[o][0]:n<a?t(e,n,i,o-1):t(e,n,o+1,r)}(n,i,0,n.length-1)}var ba=n(30),xa=n.n(ba),wa=function(t){function e(t){var n;return f()(this,e),(n=E()(this,T()(e).call(this,t))).type="histogram",n.inlineMaker=function(){return null},n}return I()(e,t),m()(e,[{key:"eval",value:function(){return this.value}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),this._metadata=t;var n=this.propertyName;this._categories=this._metadata.properties[n]?this._metadata.properties[n].categories.sort(this._sortByFrequency):[]}},{key:"_getCategoryValue",value:function(t){var e=this;return c()(t).map((function(t){var e=_()(t,2);return{x:e[0],y:e[1]}})).sort(this._sortByFrequency).map((function(t,n){return{x:"number"==typeof t.x&&e._categories[n]?e._categories[n].name:t.x,y:t.y}}))}},{key:"_getNumericValue",value:function(t,e){for(var n=c()(t),i=n.length,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=0;a<i;a++){var s=n[a][0];r=Math.min(r,s),o=Math.max(o,s)}for(var u=Array(e).fill(0),l=o-r,h=e-1,d=0;d<i;d++){var p=n[d][1];u[Math.min(Math.floor(e*(n[d][0]-r)/l),h)]+=p}return u.map((function(t,n){return{x:[r+n/e*l,r+(n+1)/e*l],y:t}}))}},{key:"_getBucketsValue",value:function(t,e){for(var n=xa()(t).slice(0),i=(e=e.length&&0===e.length?this._genBreakpoints(e):e).length,r=Array(i).fill(0),o=0,a=n.length;o<a;o++)for(var s=n[o][0],u=0;u<i;u++){var l=e[u];if(s>=l[0]&&s<l[1]){r[u]+=n[o][1];break}}return r.map((function(t,n){return{x:e[n],y:t}}))}},{key:"_getDateValue",value:function(t,e){for(var n=c()(t).map((function(t){return{x:t[0].getTime(),y:t[1]}})),i=n.length,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=0;a<i;a++){var s=n[a].x;r=Math.min(r,s),o=Math.max(o,s)}for(var u=Array(e).fill(0),l=o-r,h=e-1,d=0;d<i;d++){var p=n[d].y;u[Math.min(Math.floor(e*(n[d].x-r)/l),h)]+=p}return u.map((function(t,n){return{x:[new Date(r+n/e*l),new Date(r+(n+1)/e*l)],y:t}}))}},{key:"_genBreakpoints",value:function(){var t=this._histogram.value;if(t){var e=this._getAccumHistogramFrom(t),n=this._getMinMaxFrom(t),i=_()(n,2);this._updateBreakpointsWith({accumHistogram:e,min:i[0],max:i[1]})}}},{key:"_getAccumHistogramFrom",value:function(t){var e=0;return t.map((function(t){return e+=t.y}))}},{key:"_getMinMaxFrom",value:function(t){return[t[0].x[0],t[t.length-1].x[1]]}},{key:"_sortByFrequency",value:function(t,e){var n=e.y-t.y;if(0===n){var i=t.x,r=e.x;return i||r?i?r?"string"==typeof i&&"string"==typeof r?i.localeCompare(r):i<r?-1:i>r?1:0:-1:1:0}return n}},{key:"value",get:function(){switch(this.input.type){case"number":return this._hasBuckets?this._getBucketsValue(this._histogram,this._sizeOrBuckets):this._getNumericValue(this._histogram,this._sizeOrBuckets);case"date":return this._hasBuckets?this._getBucketsValue(this._histogram,this._sizeOrBuckets):this._getDateValue(this._histogram,this._sizeOrBuckets);default:return this._getCategoryValue(this._histogram)}}}]),e}(Ei),Ca=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return f()(this,e),oi(arguments,3,"viewportHistogram"),(n=E()(this,T()(e).call(this,{input:ui(t),weight:ui(r)})))._sizeOrBuckets=i,n._isViewport=!0,n._hasBuckets=Array.isArray(i),n._cached=null,n}return I()(e,t),m()(e,[{key:"eval",value:function(){return this.value}},{key:"getJoinedValues",value:function(t,e){if(wi("viewportHistogram.getJoinedValues","values",0,t),!t.length)return[];var n=Object.assign({},dr,e),i=[],r=[];this.value.forEach((function(e){var n=t.find((function(t){return Array.isArray(t.key)?t.key[0]===e.x[0]&&t.key[1]===e.x[1]:e.x===t.key}));n?i.push({frequency:e.y,key:n.key,value:n.value}):r.push(e.y)}));var o=t.find((function(t){return n.othersLabel===t.key}));if(o){var a=r.reduce((function(t,e){return t+e}));i.push({frequency:a,key:o.key,value:o.value})}return i.sort((function(t,e){return e.frequency-t.frequency}))}},{key:"accumViewportAgg",value:function(t){var e=this.input.eval(t),n=this.input.isA(Ho)?e.label:e;if(void 0!==n){var i=(t._cdb_feature_count||1)*this.weight.eval(t),r=this._histogram.get(n)||0;this._histogram.set(n,r+i)}}},{key:"_resetViewportAgg",value:function(t){t&&this._bindMetadata(t),this._cached=null,this._histogram=new Map}},{key:"value",get:function(){if(null===this._cached){if(!this._histogram)return null;this._cached=Ai()(T()(e.prototype),"value",this)}return this._cached}}]),e}(wa),Pa=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return f()(this,e),oi(arguments,3,"globalHistogram"),(n=E()(this,T()(e).call(this,{input:ui(t)})))._sizeOrBuckets=i,n._hasBuckets=Array.isArray(i),n._histogram=new Map,n}return I()(e,t),m()(e,[{key:"getJoinedValues",value:function(t,e){if(wi("globalHistogram.getJoinedValues","values",0,t),!t.length)return[];var n=Object.assign({},dr,e),i=[];return this.value.forEach((function(e){e.x=e.x===cr?n.othersLabel:e.x;var r=t.find((function(t){return e.x===t.key}));r&&i.push({frequency:e.y,key:r.key,value:r.value})})),i}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),this._histogram=new Map,this.input.isA(wr)?"number"!==this.input.type?this._setHistogramForCategoryValues():this._setHistogramForNumericValues():this._setHistogramForExpression()}},{key:"_setHistogramForExpression",value:function(){var t=this,e=this.input.getLegendData(dr).data;this._categories.forEach((function(n){if(e.find((function(t){return n.name===t.key})))t._histogram.set(n.name,n.frequency);else{var i=t._histogram.get(cr)||0;t._histogram.set(cr,n.frequency+parseInt(i))}}))}},{key:"_setHistogramForCategoryValues",value:function(){var t=this;this._categories.forEach((function(e){t._histogram.set(e.name,e.frequency)}))}},{key:"_setHistogramForNumericValues",value:function(){var t=this,e=this.propertyName,n=this._metadata.featureCount/this._metadata.sample.length;this._metadata.sample.forEach((function(i){var r=i[e],o=t._histogram.get(r)||0;t._histogram.set(r,o+n)}))}}]),e}(wa);function Ma(t,e,n,i,r){return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;n[e]&&n[e][t]&&(n[e][t].replaceChild(n[e][t].mix,ws(ps(Ys(r),e),Qa(0),Qa(o))),i[t].notify(),n[e][t]=void 0)}}function Oa(t,e,n,i,r,o,a){return function(s){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;if("string"==typeof s&&(s=a(s)),n[e]&&n[e][t])n[e][t].a.blendTo(s,u);else{var l=ws(s,i[t],ws(1,ps(Ys(o),e),Qa(u)));r(e,t,l,n),i.replaceChild(i[t],l),i[t].notify()}}}var ka=["color","filter","order","resolution","strokeColor","strokeWidth","symbol","symbolPlacement","transform","width"],Ea=["color","filter","order","strokeColor","strokeWidth","symbol","symbolPlacement","transform","width"];function Sa(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n,r=e.customizedFeatures,o=e.viz,a=e.trackFeatureViz,s=e.parseVizExpression,u=o.metadata.idProperty;Object.defineProperty(t,i,{get:function(){var t=this;return{blendTo:function(){return function(t){return Oa(n,t,r,o,a,u,s)}(t.id).apply(void 0,arguments)},reset:function(){return function(t){return Ma(n,t,r,o,u)}(t.id).apply(void 0,arguments)},value:o[n].eval(this._rawFeature)}}})}function Ta(t){var e=t[0];if(1===t.length)return e;var n=function(t){return t.map((function(t){var e=t.getRenderedCentroid(),n=_()(e,2);return{centroid:{x:n[0],y:n[1]},aabb:t._rawFeature._dataframe._aabb[t._rawFeature._index]}})).filter((function(t){var e=t.centroid,n=e.y;return!(isNaN(e.x)||isNaN(n))}))}(t);return Object.defineProperty(e,"getRenderedCentroid",{get:function(){return function(){var t=n.reduce((function(t,e){var n=e.aabb,i=(n.maxx-n.minx)*(n.maxy-n.miny);return[t[0]+e.centroid.x*i,t[1]+e.centroid.y*i,t[2]+i]}),[0,0,0]),e=_()(t,3),i=e[2];return[e[0]/i,e[1]/i]}}}),e}var Aa=function(t){function e(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return f()(this,e),i=i.map((function(t){return ui(t)})),(t=E()(this,T()(e).call(this,function(t){var e=0,n={};return t.forEach((function(t){n["p"+ ++e]=t})),n}(i))))._value=[],t.type="featureList",t._isViewport=!0,t._requiredProperties=i,t._FeatureProxy=null,t}return I()(e,t),m()(e,[{key:"_applyToShaderSource",value:function(){throw new wn("'viewportFeatures' cannot be used in visualizations.")}},{key:"isFeatureDependent",value:function(){return!1}},{key:"eval",value:function(){return this.value}},{key:"_resetViewportAgg",value:function(t,e){if(!this._FeatureProxy){if(!this._requiredProperties.every((function(t){return function(t){return[wr,Cr,Sr,Ir].some((function(e){return t.isA(e)}))}(t)})))throw new Fe("viewportFeatures arguments can only be properties",Le.INCORRECT_TYPE);var n=this._requiredProperties.map((function(t){return{property:t.propertyName,variable:t._variableName}}));this._FeatureProxy=function(t,e){var n=function t(e){f()(this,t),this._rawFeature=e,this._featureProperties=null};return function(t,e){Object.defineProperty(t,"id",{get:function(){return this._rawFeature[e.viz.metadata.idProperty]},configurable:!0})}(n.prototype,e),function(t,e){ka.forEach((function(n){Sa(t,e,n)}))}(n.prototype,e),function(t,e){Object.defineProperty(t,"variables",{get:function(){var t={};return Object.defineProperty(t,"id",{get:function(){return this.id}}),Object.keys(e.viz.variables).forEach((function(n){var i="__cartovl_variable_".concat(n);Sa(t,e,i,n)})),t}})}(n.prototype,e),function(t,e){Object.defineProperty(t,"properties",{get:function(){var t=this;return null===this._featureProperties&&(this._featureProperties={},e.forEach((function(e){var n=e.property;t._featureProperties[e.variable||n]=t._rawFeature[n]}))),this._featureProperties}})}(n.prototype,t),function(t){Object.defineProperty(t,"blendTo",{get:function(){var t=this;return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;Object.keys(e).forEach((function(i){if(!ka.includes(i))throw new Fe("Property '".concat(i,"' is not a valid viz property"),Le.INCORRECT_VALUE);t[i].blendTo(e[i],n)}))}}})}(n.prototype),function(t){Object.defineProperty(t,"reset",{get:function(){var t=this;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;for(var n in ka.forEach((function(n){t[n].reset(e)})),t.variables)t.variables[n].reset(e)}}})}(n.prototype),function(t){Object.defineProperty(t,"getRenderedCentroid",{get:function(){var t=this;return function(){return t._rawFeature._dataframe.getRenderedCentroid(t._rawFeature._index)}},configurable:!0})}(n.prototype),n}(n,e)}this._value=[]}},{key:"accumViewportAgg",value:function(t){var e=this;if(1===(t=Array.isArray(t)?t:[t]).length)this._value.push(new this._FeatureProxy(t[0]));else{var n=Ta(t.map((function(t){return new e._FeatureProxy(t)})));this._value.push(n)}}},{key:"value",get:function(){return this._value},set:function(t){this._value=t}}]),e}(Ei),Ia=function(t){function e(t){var n,i=t.property,r=t.name,o=t.type,a=t.baseStats,s=void 0!==a&&a;return f()(this,e),(n=E()(this,T()(e).call(this,{_value:Wa(0)}))).property=ui(i),n._name=r,n.type=o,n.baseStats=s,Qr()(T()(e.prototype),"inlineMaker",(function(t){return t._value}),ur()(n),!0),n}return I()(e,t),m()(e,[{key:"toString",value:function(){return"".concat(this.expressionName,"(").concat(this.property.toString(),")")}},{key:"isFeatureDependent",value:function(){return!1}},{key:"eval",value:function(){return this.value}},{key:"_resolveAliases",value:function(t){this.property&&this.property._resolveAliases(t)}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),this.property._bindMetadata(t);var n=this.property.name||this.property.propertyName,i=this._getValueFromStats(t,n);this._value.value=t.codec(n).sourceToExternal(t,i)}},{key:"_getValueFromStats",value:function(t,e){var n;if(this.baseStats)if("_count"===this.baseStats)n=t.featureCount;else{var i=t.stats(this.property.name);n=i&&i[this.baseStats]}else{if("_cdb_feature_count"===e)throw new Fe(Le.INCORRECT_TYPE,"'clusterCount' can not be used in ".concat(this.expressionName,"."));var r=t.stats(e);n=r&&r[this._name]}if(void 0===n)throw new Fe("Metadata ".concat(this._name," for property ").concat(e," is not defined"),Le.MISSING_REQUIRED);return n}},{key:"_getMinimumNeededSchema",value:function(){return this.property._getMinimumNeededSchema()}},{key:"value",get:function(){return this._value.value}}]),e}(Ei),Da=function(t){function e(t){f()(this,e),oi(arguments,1,"globalAvg");var n=!1;if(t&&t.isA(Cr)){if(!t.isA(Pr))throw new Fe("Invalid globlalAvg input",Le.INCORRECT_TYPE);n="avg"}return E()(this,T()(e).call(this,{property:t,name:"avg",type:"number",baseStats:n}))}return I()(e,t),m()(e,[{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),yi(this.expressionName,"property",0,"number",this.property)}}]),e}(Ia),Ra=function(t){function e(){return f()(this,e),oi(arguments,0,"globalCount"),E()(this,T()(e).call(this,{name:"count",type:"number"}))}return I()(e,t),m()(e,[{key:"toString",value:function(){return"".concat(this.expressionName,"()")}},{key:"_bindMetadata",value:function(t){this._value.value=t.featureCount}},{key:"_getMinimumNeededSchema",value:function(){return{}}}]),e}(Ia),Fa=function(t){function e(t){f()(this,e),oi(arguments,1,"globalMax");var n=!1;if(t&&t.isA(Cr)){if(!(t.isA(Pr)||t.isA(Or)||t.isA(Mr)))throw new Fe("Invalid globlalAvg input",Le.INCORRECT_TYPE);n="max"}return E()(this,T()(e).call(this,{property:t,name:"max",type:"number",baseStats:n}))}return I()(e,t),e}(Ia),La=function(t){function e(t){f()(this,e),oi(arguments,1,"globalMin");var n=!1;if(t&&t.isA(Cr)){if(!(t.isA(Pr)||t.isA(Or)||t.isA(Mr)))throw new Fe("Invalid globlalAvg input",Le.INCORRECT_TYPE);n="min"}return E()(this,T()(e).call(this,{property:t,name:"min",type:"number",baseStats:n}))}return I()(e,t),e}(Ia),za=function(t){function e(t){f()(this,e),oi(arguments,1,"globalSum");var n=t.type,i=!1;if(t&&(t.isA(Cr)||t.isA(Sr)))if(t.isA(Er))i="sum";else{if(!t.isA(Sr))throw new Fe("Invalid globlalAvg input",Le.INCORRECT_TYPE);i="_count"}return E()(this,T()(e).call(this,{property:t,name:"sum",baseStats:i,type:n}))}return I()(e,t),e}(Ia),Na=function(t){function e(t,n){var i;return f()(this,e),oi(arguments,2,"globalPercentile"),t=ui(t),n=ui(n),mi("globalPercentile","property",0,t),mi("globalPercentile","percentile",1,n),(i=E()(this,T()(e).call(this,{_value:Wa(0),property:t,percentile:n}))).type="number",Qr()(T()(e.prototype),"inlineMaker",(function(t){return t._value}),ur()(i),!0),i}return I()(e,t),m()(e,[{key:"isFeatureDependent",value:function(){return!1}},{key:"eval",value:function(){return this.value}},{key:"_bindMetadata",value:function(t){var n=this;Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),yi("globalPercentile","property",0,"number",this.property),yi("globalPercentile","percentile",0,"number",this.percentile),_i("globalPercentile","property",0,wr,this.property),Ci("globalPercentile","percentile",1,this.percentile),this._copySample=t.sample.map((function(t){return t[n.property.propertyName]})),this._copySample.sort((function(t,e){return t-e}))}},{key:"_preDraw",value:function(){var t;this._value.value=this.value;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];(t=Ai()(T()(e.prototype),"_preDraw",this)).call.apply(t,[this].concat(i))}},{key:"_getMinimumNeededSchema",value:function(){return this.property._getMinimumNeededSchema()}},{key:"value",get:function(){return this._copySample[Math.floor(this.percentile.value/100*this._copySample.length)]}}]),e}(Ei),Ba=function(t){function e(){var t;return f()(this,e),oi(arguments,0,"zoom"),(t=E()(this,T()(e).call(this,{zoom:Wa(0)}))).type="number",Qr()(T()(e.prototype),"inlineMaker",(function(t){return t.zoom}),ur()(t),!0),t}return I()(e,t),m()(e,[{key:"eval",value:function(){return this.zoom.value}},{key:"_preDraw",value:function(t,e,n){this.zoom.value=e.zoomLevel,this.zoom._preDraw(t,e,n)}},{key:"value",get:function(){return this.zoom.value}}]),e}(Ei),Va=function(t){function e(t,n){var i;return f()(this,e),oi(arguments,2,"placement"),t=ui(t),n=ui(n),(i=E()(this,T()(e).call(this,{x:t,y:n}))).inlineMaker=function(t){return"vec2(".concat(t.x,", ").concat(t.y,")")},i.type="placement",i}return I()(e,t),m()(e,[{key:"eval",value:function(t){return[this.x.eval(t),this.y.eval(t)]}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),yi("placement","x",0,"number",this.x),yi("placement","y",1,"number",this.y)}},{key:"value",get:function(){return[this.x.value,this.y.value]}}]),e}(Ei),Ua=function(t){function e(t){return f()(this,e),oi(arguments,1,"svg"),E()(this,T()(e).call(this,"data:image/svg+xml,".concat(encodeURIComponent(t))))}return I()(e,t),e}(Do),ja=function(t){function e(t){var n;return f()(this,e),t=ui(t),n=E()(this,T()(e).call(this,{})),mi("zoomrange","zoomBreakpointList",0,t),n.type="number",n._zoomBreakpointList=t,n.inlineMaker=function(t){return t._impostor},n}return I()(e,t),m()(e,[{key:"_bindMetadata",value:function(t){if(this._zoomBreakpointList._bindMetadata(t),yi("zoomrange","zoomBreakpointList",0,"number-list",this._zoomBreakpointList),this._zoomBreakpointList.elems.length<2)throw new Fe("zoomrange() function must receive a list with at least two elements.",Le.INCORRECT_VALUE);var n=c()(this._zoomBreakpointList.elems);this._impostor=function t(e,n,i){if(1===e.length)return 1;var r=e[0],o=e[1];return e.shift(),ws(n/i,t(e,n+1,i),js(as(2,zu()),as(2,r),as(2,o)))}(n,0,n.length-1),this.childrenNames.push("_impostor"),Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t)}},{key:"eval",value:function(t){return this._impostor.eval(t)}},{key:"value",get:function(){return this._zoomBreakpointList.elems.map((function(t){return t.value}))}}]),e}(Ei),qa=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return f()(this,e),t=ui(t),i=ui(i),(n=E()(this,T()(e).call(this,{scale:is(ns(t,0),as(2,i))}))).type="number",n.inlineMaker=function(t){return t.scale},n}return I()(e,t),m()(e,[{key:"eval",value:function(t){return this.scale.eval(t)}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),yi("scaled","width",0,"number",this.scale.a.a),yi("scaled","zoomlevel",1,"number",this.scale.b)}},{key:"_preDraw",value:function(t,n,i){this.scale.a.b.value=Math.pow(2,n.zoomLevel),Ai()(T()(e.prototype),"_preDraw",this).call(this,t,n,i)}},{key:"value",get:function(){return this.scale.value}}]),e}(Ei),Ga=function(t){function e(t,n){var i;return f()(this,e),oi(arguments,2,"alphaNormalize"),mi("alphaNormalize","input",0,t),mi("alphaNormalize","normalizer",1,n),(i=E()(this,T()(e).call(this,{_impostor:Hs(t,is(n,Au(n)))})))._input=t,i._normalizer=n,i.type="color",i.inlineMaker=function(t){return t._impostor},i}return I()(e,t),m()(e,[{key:"_bindMetadata",value:function(t){this._input._bindMetadata(t),this._normalizer._bindMetadata(t),yi("alphaNormalize","input",0,"color",this._input),yi("alphaNormalize","normalizer",1,"number",this._normalizer),_i("alphaNormalize","normalizer",1,wr,this._normalizer),Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t)}},{key:"eval",value:function(t){return this._impostor.eval(t)}},{key:"value",get:function(){return this._impostor.value}}]),e}(Ei),Ha=function(t){function e(t,n){var i;return f()(this,e),oi(arguments,2,"translate"),t=ui(t),n=ui(n),(i=E()(this,T()(e).call(this,{x:t,y:n}))).type="transformation",i}return I()(e,t),m()(e,[{key:"_applyToShaderSource",value:function(t){var e=this.x._applyToShaderSource(t),n=this.y._applyToShaderSource(t);return{preface:this._prefaceCode("\n                ".concat(e.preface,"\n                ").concat(n.preface,"\n\n                vec2 translate").concat(this._uid,"(vec2 p){\n                    return p+vec2(").concat(e.inline,", ").concat(n.inline,");\n                }")),inline:"translate".concat(this._uid)}}},{key:"eval",value:function(t){return[this.x.eval(t),this.y.eval(t)]}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),yi("translate","x",0,"number",this.x),yi("translate","y",1,"number",this.y)}},{key:"value",get:function(){return[this.x.value,this.y.value]}}]),e}(Ei),Za=function(t){function e(t){var n;f()(this,e),oi(arguments,1,"rotate");var i=ui(t);return(n=E()(this,T()(e).call(this,{angle:i}))).type="transformation",n}return I()(e,t),m()(e,[{key:"eval",value:function(t){return this.angle.eval(t)}},{key:"_bindMetadata",value:function(t){Ai()(T()(e.prototype),"_bindMetadata",this).call(this,t),yi("rotate","angle",0,"number",this.angle)}},{key:"_applyToShaderSource",value:function(t){var e=this.angle._applyToShaderSource(t);return{preface:this._prefaceCode("\n                ".concat(e.preface,"\n\n                #ifndef DEGREES_TO_RADIANS\n                #define DEGREES_TO_RADIANS\n                float degreesToRadians(float degrees){\n                    return degrees/360.*2.*3.14159265359;\n                }\n                #endif\n                \n                vec2 rotate").concat(this._uid,"(vec2 p){\n                    float angle = degreesToRadians(").concat(e.inline,");\n                    mat2 M = mat2(cos(angle), -sin(angle),\n                                  sin(angle),  cos(angle));\n                    return M * p;\n                }")),inline:"rotate".concat(this._uid)}}},{key:"value",get:function(){return this.angle.value}}]),e}(Ei),Wa=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(to,e)},Ka=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(mr,e)},Xa=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(jo,e)},$a=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(lo,e)},Ya=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(co,e)},Qa=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Si,e)},Ja=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Ii,e)},ts=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Ri,e)},es=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Li,e)},ns=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Qi,e)},is=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(qi,e)},rs=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Vi,e)},os=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(rr,e)},as=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(ir,e)},ss=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Yi,e)},us=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Wi,e)},ls=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Ki,e)},cs=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Xi,e)},hs=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()($i,e)},ds=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Zi,e)},ps=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(er,e)},fs=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(ji,e)},gs=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(nr,e)},ms=us,ys=ls,_s=cs,vs=hs,bs=ds,xs=ps,ws=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(ar,e)},Cs=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(gr,e)},Ps=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(vr,e)},Ms=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Pr,e)},Os=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Mr,e)},ks=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Or,e)},Es=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(kr,e)},Ss=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Er,e)},Ts=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Sr,e)},As=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Dr,e)},Is=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Rr,e)},Ds=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Do,e)},Rs=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Ua,e)},Fs=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Fr,e)},Ls=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Lr,e)},zs=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(zr,e)},Ns=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Br,e)},Bs=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Vr,e)},Vs=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(qr,e)},Us=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(jr,e)},js=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Wr,e)},qs=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Xr,e)},Gs=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Jr,e)},Hs=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(io,e)},Zs=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(ro,e)},Ws=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(oo,e)},Ks=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(ao,e)},Xs=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(so,e)},$s=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(_o,e)},Ys=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(wr,e)},Qs=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Co,e)},Js=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(ko,e)},tu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(wo,e)},eu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Oo,e)},nu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Po,e)},iu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Eo,e)},ru=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(No,e)},ou=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(qo,e)},au=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Go,e)},su=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Ho,e)},uu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Wo,e)},lu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Qo,e)},cu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Jo,e)},hu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(ta,e)},du=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(ea,e)},pu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(na,e)},fu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(ia,e)},gu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(ra,e)},mu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(oa,e)},yu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(aa,e)},_u=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(sa,e)},vu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(ua,e)},bu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(la,e)},xu=function(){return(function(t){if(oi(arguments,1,"variable"),bi("variable","name",0,t),""===t)throw new Fe("variable(): invalid parameter, zero-length string",Le.INCORRECT_VALUE);var e,n=function(n){if(!n[t])throw new Fe("variable() with name '".concat(t,"' doesn't exist"),Le.MISSING_REQUIRED);e=n[t]},i=function(){return[e]},r={set:function(t,n,i){if("parent"===n)t[n]=i;else if("notify"===n)t[n]=i;else{if(!e||!e[n])return!1;e[n]=i}return!0},get:function(t,r){switch(r){case"propertyName":return e.propertyName;case"name":return e._dimension?e.propertyName:e.name;case"parent":case"notify":case"blendTo":return t[r];case"_resolveAliases":return n;case"_getDependencies":return i;default:if(void 0!==e){var o=e[r];if(void 0!==o)return o.bind?o.bind(e):o}return t[r]}}};return new Proxy(new ha,r)}).apply(void 0,arguments)},wu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(pa,e)},Cu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(fa,e)},Pu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(ga,e)},Mu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(ma,e)},Ou=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(ya,e)},ku=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(_a,e)},Eu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Ca,e)},Su=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Aa,e)},Tu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Da,e)},Au=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Fa,e)},Iu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(La,e)},Du=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(za,e)},Ru=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Ra,e)},Fu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Na,e)},Lu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Pa,e)},zu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Ba,e)},Nu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(qa,e)},Bu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(ja,e)},Vu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Va,e)},Uu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Ha,e)},ju=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Za,e)},qu=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xn()(Ga,e)},Gu=new Rr(Number.MAX_SAFE_INTEGER),Hu=new Rr(1),Zu=new Rr(0),Wu=new Rr(Math.PI),Ku=new Rr(Math.E),Xu=new Do(To.bicycle),$u=new Do(To.building),Yu=new Do(To.bus),Qu=new Do(To.car),Ju=new Do(To.circle),tl=new Do(To.circleOutline),el=new Do(To.cross),nl=new Do(To.flag),il=new Do(To.house),rl=new Do(To.marker),ol=new Do(To.markerOutline),al=new Do(To.plus),sl=new Do(To.square),ul=new Do(To.squareOutline),ll=new Do(To.star),cl=new Do(To.starOutline),hl=new Do(To.triangle),dl=new Do(To.triangleOutline),pl=new Va(Is(0),Is(0)),fl=new Va(Is(0),Is(1)),gl=n(10),ml=n.n(gl),yl=[],_l={};Object.keys(s).filter((function(t){return t[0]===t[0].toLowerCase()})).map((function(t){_l[t.toLocaleLowerCase()]=s[t]})),_l.true=Hu,_l.false=Zu,_l.align_center=pl,_l.align_bottom=fl,_l.pi=Wu,_l.e=Ku,_l.hold=Gu,_l.bicycle=Xu,_l.building=$u,_l.bus=Yu,_l.car=Qu,_l.circle=Ju,_l.circle_outline=tl,_l.cross=el,_l.flag=nl,_l.house=il,_l.marker=rl,_l.marker_outline=ol,_l.plus=al,_l.square=sl,_l.square_outline=ul,_l.star=ll,_l.star_outline=cl,_l.triangle=hl,_l.triangle_outline=dl;var vl=Ei.prototype.blendTo;function bl(t){Cl();var e=ui(wl(ml()(t)));return Pl(),e}function xl(t,e){if(":"!==e.operator)throw new F("Invalid syntax.");e.left.name.length&&"@"===e.left.name[0]&&(e.left.name="__cartovl_variable_"+e.left.name.substr(1));var n=e.left.name;if(!n)throw new F("Invalid syntax.");if(n.startsWith("__cartovl_variable_")){if((n=e.left.name.substr("__cartovl_variable_".length))in t.variables)throw new F("Variable '".concat(n,"' is already defined."));t.variables[n]=ui(wl(e.right))}else{if(n in t)throw new F("Property '".concat(n,"' is already defined."));var i=wl(e.right);t[n]="resolution"===n?i:ui(i)}}function wl(t){if("CallExpression"===t.type)return function(t){var e=t.callee.name.toLowerCase();if(yl.includes(e))return t.arguments.map((function(t){return wl(t)}))[0];var n=t.arguments.map((function(t){return wl(t)}));if(_l[e])return _l[e].apply(_l,c()(n));throw new F("Invalid function name '".concat(t.callee.name,"'."))}(t);if("Literal"===t.type)return t.value;if("ArrayExpression"===t.type)return t.elements.map((function(t){return wl(t)}));if("BinaryExpression"===t.type)return function(t){var e=wl(t.left),n=wl(t.right);switch(t.operator.toLowerCase()){case"*":return ns(e,n);case"/":return is(e,n);case"+":return rs(e,n);case"-":return os(e,n);case"%":return ss(e,n);case"^":return as(e,n);case">":return us(e,n);case">=":return ls(e,n);case"<":return cs(e,n);case"<=":return hs(e,n);case"==":return ds(e,n);case"!=":return ps(e,n);case"and":return fs(e,n);case"or":return gs(e,n);case"in":return Ja(e,n);case"nin":return ts(e,n);default:throw new F("Invalid binary operator '".concat(t.operator,"'."))}}(t);if("UnaryExpression"===t.type)return function(t){switch(t.operator){case"-":return ns(-1,wl(t.argument));case"+":return wl(t.argument);default:throw new F("Invalid unary operator '".concat(t.operator,"'."))}}(t);if("Identifier"===t.type)return function(t){if(t.name.length&&"@"===t.name[0]&&(t.name="__cartovl_variable_"+t.name.substr(1)),t.name.startsWith("__cartovl_variable_"))return xu(t.name.substr("__cartovl_variable_".length));if("#"===t.name[0])return new Fr(t.name);if("$"===t.name[0])return Ys(t.name.substring(1));if(go[t.name.toUpperCase()])return go[t.name.toUpperCase()];if(_l[t.name.toLowerCase()])return _l[t.name.toLowerCase()];if(Kr.includes(t.name.toLowerCase()))return new Xr(t.name.toLowerCase());throw new F("Invalid expression '".concat(JSON.stringify(t),"'."))}(t);throw new F("Invalid expression '".concat(JSON.stringify(t),"'."))}function Cl(){ml.a.addBinaryOp(":",0),ml.a.addBinaryOp("^",11),ml.a.addBinaryOp("or",1),ml.a.addBinaryOp("OR",1),ml.a.addBinaryOp("and",2),ml.a.addBinaryOp("AND",2),ml.a.addBinaryOp("in",13),ml.a.addBinaryOp("IN",1),ml.a.addBinaryOp("nin",13),ml.a.addBinaryOp("NIN",13),ml.a.addIdentifierChar("@"),ml.a.addIdentifierChar("#"),ml.a.removeLiteral("true"),ml.a.removeLiteral("false")}function Pl(){ml.a.removeBinaryOp("in"),ml.a.removeBinaryOp("IN"),ml.a.removeBinaryOp("nin"),ml.a.removeBinaryOp("NIN"),ml.a.removeBinaryOp("and"),ml.a.removeBinaryOp("AND"),ml.a.removeBinaryOp("or"),ml.a.removeBinaryOp("OR"),ml.a.removeBinaryOp("^"),ml.a.removeBinaryOp(":"),ml.a.removeIdentifierChar("@"),ml.a.removeIdentifierChar("#"),ml.a.addLiteral("true"),ml.a.addLiteral("false")}Ei.prototype.blendTo=function(t){"string"==typeof t&&(t=bl(t));for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return vl.bind(this).apply(void 0,[t].concat(n))};var Ml=n(40),Ol=n.n(Ml),kl=n(41),El=n.n(kl),Sl=n(42),Tl=n.n(Sl),Al=n(43),Il=n.n(Al),Dl=n(44),Rl=n.n(Dl),Fl=n(45),Ll=n.n(Fl),zl=function(){function t(e){var n=this;f()(this,t);var i=this._getVizDefinition(e);this._checkVizSpec(i),Object.keys(i).forEach((function(t){n._defineProperty(t,i[t])})),Object.keys(i).includes("variables")||this._defineProperty("variables",{}),this.updated=!0,this._changeCallback=null,this._updateRootExpressionList(),this._updateRootExpressions(),this._resolveAliases(),this._validateAliasDAG()}return m()(t,[{key:"loadImages",value:function(){return Promise.all(this._getRootExpressions().map((function(t){return t.loadImages()})))}},{key:"_ignoreChangeRejections",value:function(){return{}}},{key:"_defineProperty",value:function(t,e){var n=this;if("variables"===t||ka.includes(t)){Object.defineProperty(this,t,{get:function(){return n["_"+t]},set:function(e){n["_"+t]=ui(e),n._changed().catch(n._ignoreChangeRejections)}});var i=e;if("variables"===t){var r=!1;i=new Proxy({},{get:function(t,e){return t[e]},set:function(t,e,i){return(i=ui(i))instanceof Ei&&(i._variableName=e),t[e]=i,n["__cartovl_variable_"+e]=i,r&&n._changed().catch(n._ignoreChangeRejections),!0}}),Object.keys(e).map((function(t){i[t]=e[t]})),r=!0}this["_"+t]=i}}},{key:"_getRootExpressions",value:function(){return this._rootExpressions}},{key:"_getRootStyleExpressions",value:function(){return this._rootStyleExpressions}},{key:"_updateRootExpressions",value:function(){var t=this;this._getRootExpressions().forEach((function(e){e.parent=t,e.notify=t._changed.bind(t)}))}},{key:"isAnimated",value:function(){return this._getRootStyleExpressions().some((function(t){return t.isAnimated()}))}},{key:"isPlaying",value:function(){return this._getRootStyleExpressions().some((function(t){return t.isPlaying()}))}},{key:"onChange",value:function(t){this._changeCallback=t}},{key:"_changed",value:function(){return this._updateRootExpressionList(),this._resolveAliases(),this._validateAliasDAG(),this._changeCallback?this._changeCallback(this):Promise.resolve(null)}},{key:"_updateRootExpressionList",value:function(){var t=this,e=c()(ka).map((function(e){return t[e]})),n=c()(Ea).map((function(e){return t[e]})),i=c()(Object.values(this.variables));this._rootExpressions=c()(e).concat(c()(i)),this._rootStyleExpressions=n}},{key:"getMinimumNeededSchema",value:function(){return this._getRootExpressions().filter((function(t){return t&&t._getMinimumNeededSchema})).map((function(t){return t._getMinimumNeededSchema()})).reduce(bn.union,bn.IDENTITY)}},{key:"setDefaultsIfRequired",value:function(t){if(this._geomType=t,!this._appliedDefaults){var e=this._getDefaultGeomStyle(t);e&&(this._appliedDefaults=!0,this.color.default&&(this.color=e.COLOR_EXPRESSION()),this.width.default&&(this.width=e.WIDTH_EXPRESSION()),this.strokeColor.default&&(this.strokeColor=e.STROKE_COLOR_EXPRESSION()),this.strokeWidth.default&&(this.strokeWidth=e.STROKE_WIDTH_EXPRESSION()),this._updateRootExpressions())}}},{key:"_getDefaultGeomStyle",value:function(t){return"point"===t?{COLOR_EXPRESSION:function(){return Nl(Fs("#EE4D5A"))},WIDTH_EXPRESSION:function(){return Nl(Wa(7))},STROKE_COLOR_EXPRESSION:function(){return Nl(Fs("#FFF"))},STROKE_WIDTH_EXPRESSION:function(){return Nl(Wa(1))}}:"line"===t?{COLOR_EXPRESSION:function(){return Nl(Fs("#4CC8A3"))},WIDTH_EXPRESSION:function(){return Nl(Wa(1.5))},STROKE_COLOR_EXPRESSION:function(){return Nl(Fs("#FFF"))},STROKE_WIDTH_EXPRESSION:function(){return Nl(Wa(1))}}:"polygon"===t?{COLOR_EXPRESSION:function(){return Nl(Fs("#826DBA"))},WIDTH_EXPRESSION:function(){return Nl(Wa(1))},STROKE_COLOR_EXPRESSION:function(){return Nl(Fs("#FFF"))},STROKE_WIDTH_EXPRESSION:function(){return Nl(Wa(1))}}:void 0}},{key:"_resolveAliases",value:function(){var t=this;this._getRootExpressions().forEach((function(e){e._resolveAliases(t.variables)}))}},{key:"_validateAliasDAG",value:function(){for(var t=new Set,e=new Set,n=function n(i){if(!t.has(i)){if(e.has(i))throw new wn("Viz contains a circular dependency");e.add(i),i._getDependencies().forEach(n),t.add(i)}},i=this._getRootExpressions().map((function(t){return t._getDependencies()})).reduce((function(t,e){return c()(t).concat(c()(e))}),[]);i.length;)n(i.pop())}},{key:"_bindMetadata",value:function(t){var e=this;this._colorShader=null,this._widthShader=null,this._strokeColorShader=null,this._strokeWidthShader=null,this._filterShader=null,this._symbolShader=null,this._pointShader=null,this._lineShader=null,this._polygonShader=null,this.metadata=t,this._getRootExpressions().forEach((function(t){return t._bindMetadata(e.metadata)})),function(t){var e={color:"color",filter:"number",order:"orderer",resolution:"number",strokeColor:"color",strokeWidth:"number",symbol:"image",symbolPlacement:"placement",transform:"transformation",width:"number"};Object.keys(e).forEach((function(n){var i=t[n].type,r=e[n];if(i!==r)throw new Fe("Viz property '".concat(n,"': must be of type '").concat(r,"' but it was of type '").concat(i,"'"),Le.INCORRECT_TYPE)}))}(this)}},{key:"_compileShader",value:function(t,e,n){return this["_"+t]||(this["_"+t]=function(t,e,n){var i={},r=function(t){return void 0===i[t]&&(i[t]=Object.keys(i).length),"texture2D(propertyTex".concat(i[t],", abs(featureID)).a")},o={},a=new Wn;Object.keys(n).forEach((function(t){var e=n[t];e._setUID(a);var i=e._applyToShaderSource(r);o[t+"_preface"]=i.preface,o[t+"_inline"]=i.inline})),o.propertyPreface=Object.keys(i).map((function(t){return"uniform sampler2D propertyTex".concat(i[t],";")})).join("\n");var s=function(t,e,n){var i=e.vertexShader,r=e.fragmentShader;Object.keys(n).forEach((function(t){i=i.replace("$"+t,n[t]),r=r.replace("$"+t,n[t])}));var o=kn(t,i,r);return o.vertexPositionAttribute=t.getAttribLocation(o.program,"vertexPosition"),o.featureIdAttr=t.getAttribLocation(o.program,"featureID"),o.normalAttr=t.getAttribLocation(o.program,"normal"),o.colorTexture=t.getUniformLocation(o.program,"colorTex"),o.strokeColorTexture=t.getUniformLocation(o.program,"strokeColorTex"),o.strokeWidthTexture=t.getUniformLocation(o.program,"strokeWidthTex"),o.widthTexture=t.getUniformLocation(o.program,"widthTex"),o.orderMinWidth=t.getUniformLocation(o.program,"orderMinWidth"),o.orderMaxWidth=t.getUniformLocation(o.program,"orderMaxWidth"),o.filterTexture=t.getUniformLocation(o.program,"filterTex"),o.normalScale=t.getUniformLocation(o.program,"normalScale"),o.resolution=t.getUniformLocation(o.program,"resolution"),o.matrix=t.getUniformLocation(o.program,"matrix"),o}(t,e,o);return Object.keys(i).map((function(e){i[e]=t.getUniformLocation(s.program,"propertyTex".concat(i[e]))})),Object.values(n).forEach((function(e){e._postShaderCompile(s.program,t)})),{shader:s,textureIds:i,_codes:o,_template:e}}(this.gl,e,n)),this["_"+t]}},{key:"replaceChild",value:function(t,e){var n=this;if(Object.values(this.variables).includes(t)){var i=Object.keys(this.variables).find((function(e){return n.variables[e]===t}));this.variables[i]=e,e.parent=this,e.notify=t.notify}else{var r=ka.find((function(e){return n[e]===t}));if(!r)throw new wn("No child found");this[r]=e,e.parent=this,e.notify=t.notify}}},{key:"_getVizDefinition",value:function(t){if(an.isUndefined(t))return this._setDefaults({});if(an.isObject(t))return this._setDefaults(t);if(an.isString(t))return this._setDefaults(function(t){Cl();var e=ml()(function(t){for(var e={singleQuote:!1,doubleQuote:!1,blockComment:!1,lineComment:!1,escape:0},n=0,i=(t=("_"+t+"_").split("")).length;n<i;n++)if(e.singleQuote)"\\"===t[n]?e.escape++:"'"===t[n]&&e.escape%2==0&&(e.singleQuote=!1,e.escape=0);else if(e.doubleQuote)"\\"===t[n]?e.escape++:'"'===t[n]&&e.escape%2==0&&(e.doubleQuote=!1,e.escape=0);else if(e.blockComment)"*"===t[n]&&"/"===t[n+1]&&(t[n+1]="",e.blockComment=!1),t[n]="";else if(e.lineComment)"\n"!==t[n+1]&&"\r"!==t[n+1]||(e.lineComment=!1),n+1<i&&(t[n]="");else if(e.doubleQuote='"'===t[n],e.singleQuote="'"===t[n],"/"===t[n]){if("*"===t[n+1]){t[n]="",e.blockComment=!0;continue}if("/"===t[n+1]){t[n]="",e.lineComment=!0;continue}}return t.join("").slice(1,-1)}(t)),n={variables:{}};return"Compound"===e.type?e.body.map((function(t){return xl(n,t)})):xl(n,e),Pl(),n}(t));throw new Fe("viz 'definition' should be a vizSpec object or a valid viz string.",Le.INCORRECT_VALUE)}},{key:"_setDefaults",value:function(t){return an.isUndefined(t.color)&&(t.color=an.isUndefined(t.symbol)?Nl($a(0,0,0)):ci()),an.isUndefined(t.width)&&(t.width=Nl(Wa(1))),an.isUndefined(t.strokeColor)&&(t.strokeColor=Nl($a(0,0,0))),an.isUndefined(t.strokeWidth)&&(t.strokeWidth=Nl(Wa(0))),an.isUndefined(t.order)&&(t.order=Nl(Ks())),an.isUndefined(t.filter)&&(t.filter=Nl(Is(1))),an.isUndefined(t.resolution)&&(t.resolution=Nl(Wa(1))),an.isUndefined(t.symbol)&&(t.symbol=Nl(new Do(To.circle))),an.isUndefined(t.symbolPlacement)&&(t.symbolPlacement=Nl(new Va(Is(0),Is(1)))),an.isUndefined(t.transform)&&(t.transform=Nl(new Ha(Is(0),Is(0)))),t.variables=t.variables||{},t}},{key:"_checkResolution",value:function(t){var e=t instanceof Ei?t.eval():t;if(!an.isNumber(e))throw new Fe("'resolution' property must be a number.",Le.INCORRECT_TYPE);if(t<=0)throw new Fe("'resolution' is ".concat(t,", must be greater than ").concat(0,"."),Le.INCORRECT_VALUE);if(t>=256)throw new Fe("'resolution' is ".concat(t,", must be lower than ").concat(256,"."),Le.INCORRECT_VALUE)}},{key:"_applyImplitCastToNumericProperties",value:function(t){t.filter=ui(t.filter),t.resolution=ui(t.resolution),t.strokeWidth=ui(t.strokeWidth),t.symbol=ui(t.symbol),t.symbolPlacement=ui(t.symbolPlacement),t.transform=ui(t.transform),t.width=ui(t.width)}},{key:"_checkVizSpec",value:function(t){for(var e in this._applyImplitCastToNumericProperties(t),this._checkResolution(t.resolution),ka.forEach((function(e){if(!(t[e]instanceof Ei))throw new Fe("'".concat(e,"' parameter is not a valid viz Expresion."),Le.INCORRECT_TYPE)})),t)"variables"!==e&&-1===ka.indexOf(e)&&console.warn("Property '".concat(e,"' is not supported"))}},{key:"toString",value:function(){var t=this,e=Object.keys(this.variables).map((function(e){return"@".concat(e,": ").concat(t.variables[e].toString())})),n=ka.map((function(e){return"".concat(e,": ").concat(t[e].toString())}));return c()(e).concat(c()(n)).join("\n")}},{key:"geometryType",get:function(){return this._geomType}},{key:"colorMetaShader",get:function(){return this._compileShader("colorShader",Zn.styler.colorShaderGLSL,{color:this.color})}},{key:"widthMetaShader",get:function(){return this._compileShader("widthShader",Zn.styler.widthShaderGLSL,{width:this.width})}},{key:"strokeColorMetaShader",get:function(){return this._compileShader("strokeColorShader",Zn.styler.colorShaderGLSL,{color:this.strokeColor})}},{key:"strokeWidthMetaShader",get:function(){return this._compileShader("strokeWidthShader",Zn.styler.widthShaderGLSL,{width:this.strokeWidth})}},{key:"filterMetaShader",get:function(){return this._compileShader("filterShader",Zn.styler.filterShaderGLSL,{filter:this.filter})}},{key:"symbolMetaShader",get:function(){return this._compileShader("symbolShader",Zn.symbolizer.symbolShaderGLSL,{symbol:this.symbol,symbolPlacement:this.symbolPlacement,transform:this.transform})}},{key:"pointMetaShader",get:function(){return this._compileShader("pointShader",{vertexShader:Ol.a,fragmentShader:El.a},{transform:this.transform})}},{key:"lineMetaShader",get:function(){return this._compileShader("lineShader",{vertexShader:Tl.a,fragmentShader:Il.a},{transform:this.transform})}},{key:"polygonMetaShader",get:function(){return this._compileShader("polygonShader",{vertexShader:Rl.a,fragmentShader:Ll.a},{transform:this.transform})}}]),t}();function Nl(t){return t.default=!0,t}var Bl=function(t){return t=t||Object.create(null),{on:function(e,n){(t[e]||(t[e]=[])).push(n)},off:function(e,n){t[e]&&t[e].splice(t[e].indexOf(n)>>>0,1)},emit:function(e,n){(t[e]||[]).slice().map((function(t){t(n)})),(t["*"]||[]).slice().map((function(t){t(e,n)}))}}},Vl=function t(){f()(this,t)},Ul=Date.now(),jl=Ul;requestAnimationFrame((function t(){jl=(Date.now()-Ul)/1e3,requestAnimationFrame(t)}));var ql=1024,Gl=function(){function t(e){f()(this,t),e&&(this.gl=Hl(e),this._initGL(this.gl)),this._center={x:0,y:0},this._zoom=1,this.RTT_WIDTH=ql,this.dataframes=[]}return m()(t,[{key:"initialize",value:function(t){t=Hl(null,t),this._initGL(t)}},{key:"_initGL",value:function(t){this.gl=t,this._initShaders(),this.auxFB=t.createFramebuffer(),this.bigTriangleVBO=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.bigTriangleVBO);var e=new Float32Array([10,-10,0,10,-10,-10]);t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),this.zeroTex=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.zeroTex),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),this._AATex=t.createTexture(),this._AAFB=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindTexture(t.TEXTURE_2D,this.zeroTex)}},{key:"_getAspect",value:function(){return this.gl?this.gl.canvas.width/this.gl.canvas.height:1}},{key:"renderLayer",value:function(t,e){var n=this;this.drawMetadata=e;var i=t.getActiveDataframes(),r=t.viz;if(r){var o=this.gl;if(this._updateDataframeMatrices(i),t.parseVizExpression=bl,function(t){var e=function(t){var e=[];return t.map((function t(n){n._isViewport?e.push(n):n._getChildren().map(t)})),e}(t.viz._getRootExpressions());e.length&&(function(t,e){var n=e.viz.metadata;t.forEach((function(t){return t._resetViewportAgg(n,e)}))}(e,t),function(t,e){var n=e.getActiveDataframes(),i=function(t,e,n){var i=new Set,r=e.viz,o=new Set;return n.forEach((function(e){!function(t,e,n,i,r){for(var o=function(o){var a=t.metadata.idProperty,s=n.properties[a][o];if(i.has(s))return"continue";if(!n.inViewport(o))return"continue";i.add(s);var u=n.getFeature(o);if(t.filter.eval(u)<.5)return"continue";r.add(u[a]),e.forEach((function(t){return t.accumViewportAgg(u)}))},a=0;a<n.numFeatures;a++)o(a)}(r,t,e,i,o)})),o}(t,e,n);!function(t,e,n){if(0!==n.size&&"point"!==e.viz.geometryType){var i=t.filter((function(t){return t.isA(Aa)}));i.length>0&&function(t,e,n){t.forEach((function(t){return t._resetViewportAgg(null,e)}));var i=e.getAllPiecesPerFeature(n);t.forEach((function(t){for(var e in i)t.accumViewportAgg(i[e])}))}(i,e,n)}}(t,e,i)}(e,t))}(t),i.length){r._getRootExpressions().map((function(t){return t._dataReady()})),o.enable(o.CULL_FACE),o.disable(o.BLEND),o.disable(o.DEPTH_TEST),o.disable(o.STENCIL_TEST),o.depthMask(!1),o.bindFramebuffer(o.FRAMEBUFFER,this.auxFB);var a=function(t,i,r,a){var s=r.shader,u=r.textureIds;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,i,0),o.viewport(0,0,ql,t.getSize().height),o.clear(o.COLOR_BUFFER_BIT),o.useProgram(s.program),e.freeTexUnit=Object.keys(u).length,a._setTimestamp(jl),a._preDraw(s.program,e,o),Object.keys(u).forEach((function(e,n){o.activeTexture(o.TEXTURE0+n),o.bindTexture(o.TEXTURE_2D,t.getPropertyTexture(e)),o.uniform1i(u[e],n)})),o.enableVertexAttribArray(s.vertexAttribute),o.bindBuffer(o.ARRAY_BUFFER,n.bigTriangleVBO),o.vertexAttribPointer(s.vertexAttribute,2,o.FLOAT,!1,0,0),o.drawArrays(o.TRIANGLES,0,3),o.disableVertexAttribArray(s.vertexAttribute)};if(i.map((function(t){return a(t,t.texColor,r.colorMetaShader,r.color)})),"polygon"!==i[0].type&&i.map((function(t){return a(t,t.texWidth,r.widthMetaShader,r.width)})),"line"!==i[0].type&&(i.map((function(t){return a(t,t.texStrokeColor,r.strokeColorMetaShader,r.strokeColor)})),i.map((function(t){return a(t,t.texStrokeWidth,r.strokeWidthMetaShader,r.strokeWidth)}))),i.map((function(t){return a(t,t.texFilter,r.filterMetaShader,r.filter)})),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.enable(o.BLEND),"point"===t.type)o.bindFramebuffer(o.FRAMEBUFFER,null),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight);else{var s=(window.devicePixelRatio||1)>=2?1:2;o.bindFramebuffer(o.FRAMEBUFFER,this._AAFB);var u=[o.drawingBufferWidth,o.drawingBufferHeight],l=u[0],c=u[1];if(l!==this._width||c!==this._height){o.bindTexture(o.TEXTURE_2D,this._AATex),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,l*s,c*s,0,o.RGBA,o.UNSIGNED_BYTE,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,this._AATex,0);var h=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,h),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_COMPONENT16,l*s,c*s),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,h);var d=[l,c];this._width=d[0],this._height=d[1]}o.viewport(0,0,l*s,c*s),o.clear(o.COLOR_BUFFER_BIT)}var p=function(t){var e=t.viz.order,n=[0],i=[1030];return e.isA(ro)?(n=Array.from({length:64},(function(t,e){return 2*(63-e)})),i=Array.from({length:64},(function(t,e){return 0===e?1030:2*(63-e+1)}))):e.isA(oo)&&(n=Array.from({length:64},(function(t,e){return 2*e})),i=Array.from({length:64},(function(t,e){return 63===e?1030:2*(e+1)}))),{orderingMins:n,orderingMaxs:i}}(t),f=p.orderingMins,g=p.orderingMaxs;"line"!==i[0].type&&"polygon"!==i[0].type||(o.clearDepth(1),o.depthRange(0,1),o.depthFunc(o.NOTEQUAL),o.depthMask(!0),o.enable(o.DEPTH_TEST)),f.map((function(t,n){!function(t){i.forEach((function(n){var i,a=0,s=(i=r.symbol.default?"point"===n.type?r.pointMetaShader:"line"===n.type?r.lineMetaShader:r.polygonMetaShader:r.symbolMetaShader).shader;if(o.useProgram(s.program),o.uniform1f(s.orderMinWidth,f[t]),o.uniform1f(s.orderMaxWidth,g[t]),o.uniform1f(s.normalScale,1/(512*Math.pow(2,e.zoomLevel)*n.scale)),o.uniform2f(s.resolution,o.canvas.width/window.devicePixelRatio,o.canvas.height/window.devicePixelRatio),o.enableVertexAttribArray(s.vertexPositionAttribute),o.bindBuffer(o.ARRAY_BUFFER,n.vertexBuffer),o.vertexAttribPointer(s.vertexPositionAttribute,2,o.FLOAT,!1,0,0),o.enableVertexAttribArray(s.featureIdAttr),o.bindBuffer(o.ARRAY_BUFFER,n.featureIDBuffer),o.vertexAttribPointer(s.featureIdAttr,2,o.FLOAT,!1,0,0),"line"!==n.type&&"polygon"!==n.type||(o.enableVertexAttribArray(s.normalAttr),o.bindBuffer(o.ARRAY_BUFFER,n.normalBuffer),o.vertexAttribPointer(s.normalAttr,2,o.FLOAT,!1,0,0)),o.activeTexture(o.TEXTURE0+a),o.bindTexture(o.TEXTURE_2D,n.texColor),o.uniform1i(s.colorTexture,a),a++,o.activeTexture(o.TEXTURE0+a),o.bindTexture(o.TEXTURE_2D,n.texFilter),o.uniform1i(s.filterTexture,a),a++,"point"!==n.type&&"line"!==n.type||(o.activeTexture(o.TEXTURE0+a),o.bindTexture(o.TEXTURE_2D,n.texWidth),o.uniform1i(s.widthTexture,a),a++),r.symbol.default)"line"!==n.type&&(o.activeTexture(o.TEXTURE0+a),o.bindTexture(o.TEXTURE_2D,n.texStrokeColor),o.uniform1i(s.strokeColorTexture,a),a++,o.activeTexture(o.TEXTURE0+a),o.bindTexture(o.TEXTURE_2D,n.texStrokeWidth),o.uniform1i(s.strokeWidthTexture,a),a++);else{var u=i.textureIds;e.freeTexUnit=a+Object.keys(u).length,r.symbol._setTimestamp(jl),r.symbol._preDraw(s.program,e,o),r.symbolPlacement._setTimestamp(jl),r.symbolPlacement._preDraw(s.program,e,o),a=e.freeTexUnit,Object.keys(u).forEach((function(t){o.activeTexture(o.TEXTURE0+a),o.bindTexture(o.TEXTURE_2D,n.getPropertyTexture(t)),o.uniform1i(u[t],a),a++}))}if("line"!==n.type&&"polygon"!==n.type||o.clear(o.DEPTH_BUFFER_BIT),!r.transform.default){var l=i.textureIds;e.freeTexUnit=a+Object.keys(l).length,r.transform._setTimestamp(jl),r.transform._preDraw(s.program,e,o),a=e.freeTexUnit,Object.keys(l).forEach((function(t){o.activeTexture(o.TEXTURE0+a),o.bindTexture(o.TEXTURE_2D,n.getPropertyTexture(t)),o.uniform1i(l[t],a),a++})),o.uniform2f(s.resolution,o.canvas.width,o.canvas.height)}o.uniformMatrix4fv(s.matrix,!1,n.matrix),o.drawArrays(o.TRIANGLES,0,n.numVertex),o.disableVertexAttribArray(s.vertexPositionAttribute),o.disableVertexAttribArray(s.featureIdAttr),"line"!==n.type&&"polygon"!==n.type||(o.disableVertexAttribArray(s.normalAttr),o.disable(o.DEPTH_TEST))}))}(n)})),"point"!==t.type&&(o.bindFramebuffer(o.FRAMEBUFFER,null),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.useProgram(this._aaBlendShader.program),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,this._AATex),o.uniform1i(this._aaBlendShader.readTU,0),o.enableVertexAttribArray(this._aaBlendShader.vertexAttribute),o.bindBuffer(o.ARRAY_BUFFER,this.bigTriangleVBO),o.vertexAttribPointer(this._aaBlendShader.vertexAttribute,2,o.FLOAT,!1,0,0),o.drawArrays(o.TRIANGLES,0,3),o.disableVertexAttribArray(this._aaBlendShader.vertexAttribute)),o.disable(o.CULL_FACE)}}}},{key:"_updateDataframeMatrices",value:function(t){var e=this;t.forEach((function(t){var n=[],r=[];i.copy(n,e.matrix),i.identity(r),i.translate(r,r,[.5,.5,0]),i.scale(r,r,[.5,-.5,1]),i.translate(r,r,[t.center.x,t.center.y,0]),i.scale(r,r,[t.scale,t.scale,1]),i.multiply(n,n,r),t.matrix=n}))}},{key:"_initShaders",value:function(){this._aaBlendShader=new Zn.AABlender(this.gl)}}]),t}();function Hl(t,e){var n=Wl(t,e,!0);if(n.length>0)throw n[0];return e}function Zl(t,e){return 0===Wl(t,e).length}function Wl(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[];if(e||(t||(t=document.createElement("canvas")),e=t.getContext("webgl")||t.getContext("experimental-webgl")),!e)return i.push(new wn("WebGL 1 is unsupported",Cn.WEB_GL)),i;if(!e.getExtension("OES_texture_float")&&(i.push(new wn("WebGL extension 'OES_texture_float' is unsupported",Cn.WEB_GL)),n))return i;var r=e.getParameter(e.MAX_RENDERBUFFER_SIZE);r<ql&&i.push(new wn("WebGL parameter 'gl.MAX_RENDERBUFFER_SIZE' is below the requirement: ".concat(r," < ").concat(ql),Cn.WEB_GL));var o=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return o<8&&i.push(new wn("WebGL parameter 'gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS' is below the requirement: ".concat(o," < ").concat(8),Cn.WEB_GL)),i}var Kl=function(){function t(e,n,i,r,o,a){f()(this,t),this._propertyName=e,this._properties=n,this._viz=i,this.blendTo=Oa(e,n[a],r,i,o,a,bl),this.reset=Ma(e,n[a],r,i,a)}return m()(t,[{key:"eval",value:function(){for(var t=this,e=[],n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return i.forEach((function(n){var i={};i[n]=t._properties[n],e.push(i)})),this._viz[this._propertyName].eval(e)}},{key:"value",get:function(){return this._viz[this._propertyName].eval(this._properties)}}]),t}(),Xl=function(){function t(e,n){var i=n.viz,r=n.customizedFeatures,o=n.trackFeatureViz,a=n.idProperty,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];f()(this,t),this.id=e[a],this._rawFeature=e,this._featureVizParams={rawFeature:e,viz:i,customizedFeatures:r,trackFeatureViz:o,idProperty:a},this._defineVizProperties(),this._defineVizVariables(),this._defineFeatureProperties(s)}return m()(t,[{key:"_defineVizProperties",value:function(){var t=this;ka.forEach((function(e){t[e]=t._buildFeatureVizProperty(e)}))}},{key:"_buildFeatureVizProperty",value:function(t){var e=this._featureVizParams;return new Kl(t,e.rawFeature,e.viz,e.customizedFeatures,e.trackFeatureViz,e.idProperty)}},{key:"_defineVizVariables",value:function(){var t=this,e={};Object.keys(this._featureVizParams.viz.variables).forEach((function(n){var i="__cartovl_variable_".concat(n);e[n]=t._buildFeatureVizProperty(i)})),this.variables=e}},{key:"_defineFeatureProperties",value:function(t){var e=this;t.forEach((function(t){Object.defineProperty(e,t,{get:function(){return this._rawFeature[t]}})}))}},{key:"blendTo",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;Object.keys(t).forEach((function(i){if(!ka.includes(i))throw new Fe("Property '".concat(i,"' is not a valid viz property"),Le.INCORRECT_VALUE);e[i].blendTo(t[i],n)}))}},{key:"reset",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;for(var n in ka.forEach((function(n){t[n].reset(e)})),this.variables)this.variables[n].reset(e)}},{key:"getRenderedCentroid",value:function(){return this._rawFeature._dataframe.getRenderedCentroid(this._rawFeature._index)}}]),t}(),$l=function(){function t(){f()(this,t),this.dataframes=[],this.renderer=null,this.viz=null,this.type=null,this.customizedFeatures={},this.idProperty=null}return m()(t,[{key:"addDataframe",value:function(t){this.type&&this._checkDataframeType(t),this.type=t.type,this.renderer&&t.bindRenderer(this.renderer),this.dataframes.push(t),this.idProperty=t.metadata.idProperty}},{key:"setRenderer",value:function(t){this.renderer=t,this.dataframes.forEach((function(e){return e.bindRenderer(t)}))}},{key:"setViz",value:function(t){this.viz=t}},{key:"getActiveDataframes",value:function(){this.dataframes=this.dataframes.filter((function(t){return!t.freed}));var t=this.dataframes.filter((function(t){return t.active&&t.numVertex}));return t.length&&void 0!==t[0].orderID&&(t=t.sort((function(t,e){return t.orderID-e.orderID}))),t}},{key:"hasDataframes",value:function(){return this.getActiveDataframes().length>0}},{key:"getNumFeatures",value:function(){return this.getActiveDataframes().map((function(t){return t.numFeatures})).reduce((function(t,e){return t+e}),0)}},{key:"_checkDataframeType",value:function(t){if(this.type!==t.type)throw new Fe("Layer dataframes must always be of the same type",Le.INCORRECT_TYPE)}},{key:"getFeaturesAtPosition",value:function(t){return this.viz?"point"===this.viz.geometryType?this._getPointFeaturesAtPosition(t):this._getPartialFeaturesAtPosition(t):[]}},{key:"_getPointFeaturesAtPosition",value:function(t){var e=this;return this._getRawFeaturesAtPosition(t).map((function(t){return e._buildFeatureFromRaw(t)}))}},{key:"_buildFeatureFromRaw",value:function(t){return new Xl(t,{viz:this.viz,customizedFeatures:this.customizedFeatures,trackFeatureViz:this.trackFeatureViz,idProperty:this.idProperty})}},{key:"_getRawFeaturesAtPosition",value:function(t){var e,n=this;return(e=[]).concat.apply(e,c()(this.getActiveDataframes().map((function(e){return e.getFeaturesAtPosition(t,n.viz)}))))}},{key:"_getPartialFeaturesAtPosition",value:function(t){var e=this._getRawFeaturesAtPosition(t);if(0===e.length)return[];var n=this._getPartialFeaturesFromSingle(e);return this._getCompoundFeaturesFrom(n)}},{key:"_getCompoundFeaturesFrom",value:function(t){var e=this,n=[];for(var i in t){var r=t[i].map((function(t){return e._buildFeatureFromRaw(t)}));n.push(Ta(r))}return n}},{key:"_getPartialFeaturesFromSingle",value:function(t){var e=this,n=new Set(t.map((function(t){return t[e.idProperty]})));return this.getAllPiecesPerFeature(n)}},{key:"getAllPiecesPerFeature",value:function(t){var e=this,n={};return t.forEach((function(t){n[t]=[]})),this.getActiveDataframes().forEach((function(i){e._addPartialFeaturesIfExistIn(i,t,n)})),n}},{key:"_addPartialFeaturesIfExistIn",value:function(t,e,n){for(var i=0;i<t.numFeatures;i++){var r=t.getFeature(i),o=r[this.idProperty];e.has(o)&&n[o].push(r)}}},{key:"trackFeatureViz",value:function(t,e,n,i){i[t]=i[t]||{},i[t][e]=n}},{key:"freeDataframes",value:function(){this.dataframes.map((function(t){return t.free()})),this.dataframes=[],this.type=null}}]),t}(),Yl=function(){function t(){f()(this,t),this._majorNextUID=0,this._majorCurrentUID=null,this._minorNextUID=0,this._minorCurrentUID=null}return m()(t,[{key:"initMajorChange",value:function(){return this._getChangeUID(!0)}},{key:"initMinorChange",value:function(){return this._getChangeUID(!1)}},{key:"endMajorChange",value:function(t){this._detectConcurrentChanges(!0,t),this._setUID(t)}},{key:"endMinorChange",value:function(t){this._detectConcurrentChanges(!1,t),this._setUID(t)}},{key:"_getChangeUID",value:function(t){var e;return t?(e={major:this._majorNextUID,minor:0},this._majorNextUID++,this._minorNextUID=1):(e={major:this._majorCurrentUID,minor:this._minorNextUID},this._minorNextUID++),e}},{key:"_detectConcurrentChanges",value:function(t,e){if(t){if(this._majorCurrentUID>e.major)throw new wn("Another `Layer.update()` finished before this one:\n                 Commit ".concat(e," overridden by commit ").concat(this._majorCurrentUID,"."))}else{if(this._majorCurrentUID>e.major||null!==this._majorCurrentUID&&null===e.major)throw new wn("Another `Layer.update()` finished before this viz change:\n                 Commit ".concat(e," overridden by commit ").concat(this._majorCurrentUID,".").concat(this._minorCurrentUID));if(this._minorCurrentUID>e.minor)throw new wn("Another `viz change` finished before this one:\n                 Commit ".concat(e.major,".").concat(e.minor," overridden by commit ").concat(this._majorCurrentUID,".").concat(this._minorCurrentUID))}}},{key:"_setUID",value:function(t){this._majorCurrentUID=t.major,this._minorCurrentUID=t.minor}}]),t}(),Ql=new WeakMap,Jl=Object.freeze({INIT:"init",IDLE:"idle",UPDATING:"updating"}),tc=function(){function t(e,n,r){var o=this;f()(this,t),this._checkId(e),this._checkSource(n),this._checkViz(r),this.id=e,this.type="custom",r._boundLayer=this,this._context=new Promise((function(t){o._contextInitialize=t})),this._state=Jl.INIT,this._visible=!0,this._emitter=Bl(),this._renderLayer=new $l,this.concurrencyHelper=new Yl,this._initialSource=n,this._initialViz=r,this._renderWaiters=[],this._cameraMatrix=i.identity([]),this._updateLayer=this.update(n,r)}return m()(t,[{key:"show",value:function(){this.visible=!0}},{key:"hide",value:function(){this.visible=!1}},{key:"on",value:function(t,e){return this._emitter.on(t,e)}},{key:"off",value:function(t,e){return this._emitter.off(t,e)}},{key:"addTo",value:function(){var t=Jn()(Yn.a.mark((function t(e,n){var i,r=this;return Yn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,e.once("error",(function(t){console.warn(t.error.message),r._waitForMapToLoad(e,n)})),e.addLayer(this,n),t.next=12;break;case 5:if(t.prev=5,t.t0=t.catch(0),i=/Cannot read property 'addLayer' of undefined/,/Style is not done loading/.test(t.t0)||i.test(t.t0)){t.next=11;break}throw new wn("Error adding layer to map: ".concat(t.t0));case 11:this._waitForMapToLoad(e,n);case 12:case"end":return t.stop()}}),t,this,[[0,5]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"_waitForMapToLoad",value:function(t,e){var n=this;t.on("load",(function(){t.addLayer(n,e)}))}},{key:"remove",value:function(){this.map&&this.map.removeLayer(this.id)}},{key:"update",value:function(){var t=Jn()(Yn.a.mark((function t(e){var n=arguments;return Yn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._update(e,n.length>1&&void 0!==n[1]?n[1]:this._viz,!0));case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_update",value:function(){var t=Jn()(Yn.a.mark((function t(e,n,i){var r,o,a,s,u;return Yn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkSource(e),this._checkViz(n),r=this._cloneSourceIfDifferent(e),o=this._initChange(i),t.next=6,Promise.all([n.loadImages(),r.requestMetadata(n)]);case 6:return a=t.sent,s=_()(a,2),u=s[1],t.next=11,this._context;case 11:this._endChange(i,o),this._commitSuccesfulUpdate(u,n,r);case 13:case"end":return t.stop()}}),t,this)})));return function(e,n,i){return t.apply(this,arguments)}}()},{key:"_initChange",value:function(t){return t?this.concurrencyHelper.initMajorChange():this.concurrencyHelper.initMinorChange()}},{key:"_endChange",value:function(t,e){t?this.concurrencyHelper.endMajorChange(e):this.concurrencyHelper.endMinorChange(e)}},{key:"_commitSuccesfulUpdate",value:function(t,e,n){this.metadata=t,this._commitVizChange(e),this._commitSourceChange(n),this._needRefresh()}},{key:"_commitVizChange",value:function(t){this._viz&&this._viz.onChange(null),t.setDefaultsIfRequired(this.metadata.geomType),t.setDefaultsIfRequired(this._renderLayer.type),t.onChange(this._vizChanged.bind(this)),t._bindMetadata(this.metadata),t.gl=this.gl,this._viz=t}},{key:"_commitSourceChange",value:function(t){t.bindLayer(this._onDataframeAdded.bind(this)),t!==this._source&&this._freeSource(),this._source=t}},{key:"_cloneSourceIfDifferent",value:function(t){return t!==this._source?t._clone():t}},{key:"blendToViz",value:function(){var t=Jn()(Yn.a.mark((function t(e){var n,i,r=this,o=arguments;return Yn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:400,i=o.length>2&&void 0!==o[2]?o[2]:Vs,this._checkViz(e),t.next=5,this._updateLayer;case 5:return this._viz&&!this._source.requiresNewMetadata(e)&&(Object.keys(this._viz.variables).map((function(t){e.variables[t]=r._viz.variables[t]})),e.color._blendFrom(this._viz.color,n,i),e.strokeColor._blendFrom(this._viz.strokeColor,n,i),e.width._blendFrom(this._viz.width,n,i),e.strokeWidth._blendFrom(this._viz.strokeWidth,n,i),e.filter._blendFrom(this._viz.filter,n,i)),t.abrupt("return",this._update(this._source,e,!1));case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"hasDataframes",value:function(){return this._renderLayer.hasDataframes()}},{key:"getNumFeatures",value:function(){return this._renderLayer.getNumFeatures()}},{key:"getFeaturesAtPosition",value:function(t){return this.visible?this._renderLayer.getFeaturesAtPosition(t).map(this._addLayerIdToFeature.bind(this)):[]}},{key:"isAnimated",value:function(){return this._viz&&this._viz.isAnimated()}},{key:"isPlaying",value:function(){return this._viz&&this._viz.isPlaying()}},{key:"onAdd",value:function(t,e){this.map=t,this.gl=e,this.renderer=function(t,e){if(!Ql.get(t)){var n=new Gl;n.initialize(e),Ql.set(t,n)}return Ql.get(t)}(t,e),this._renderLayer.setRenderer(this.renderer),this._contextInitialize()}},{key:"onRemove",value:function(t,e){this._fire("removed",this)}},{key:"prerender",value:function(t,e){var n=this._detectAndSetNewMatrix(e);this._source&&this.visible&&this._checkSourceRequestsAndFireEvents(n)}},{key:"_detectAndSetNewMatrix",value:function(t){var e=!i.exactEquals(t,this._cameraMatrix);return e&&(this._cameraMatrix=t,this.renderer.matrix=t),e}},{key:"_checkSourceRequestsAndFireEvents",value:function(t){var e=this;this._source.requestData(this._getZoom(),this._getViewport()).then((function(n){n?e._needRefresh().then((function(){e._state===Jl.INIT&&(e._state=Jl.IDLE,e._fire("loaded")),e._fire("updated","different dataframes required from source")})):t&&e._fire("updated","new camara view")}))}},{key:"_getViewport",value:function(){return nn(this._cameraMatrix)}},{key:"render",value:function(t,e){var n=this;this._paintLayer(),this._renderWaiters.forEach((function(t){return t()})),this.isAnimated()?this.isPlaying()?this._needRefresh().then((function(){n._fire("updated","animation is playing")})):this._keepTimestampIfPaused():this._state===Jl.UPDATING&&(this._state=Jl.IDLE,this._fire("updated","updated viz"))}},{key:"_keepTimestampIfPaused",value:function(){var t=this.renderer.timestamp;this._viz._getRootStyleExpressions().forEach((function(e){e._setTimestamp(t)}))}},{key:"_paintLayer",value:function(){this._renderLayer.setViz(this._viz),this.renderer.renderLayer(this._renderLayer,{zoomLevel:this.map.getZoom()})}},{key:"_fire",value:function(t,e){var n=this;new Promise((function(i){n._emitter.emit(t,e),i()}))}},{key:"_onDataframeAdded",value:function(t){this._renderLayer.addDataframe(t),this._viz&&this._viz.setDefaultsIfRequired(t.type)}},{key:"_needRefresh",value:function(){var t=this;return this._state===Jl.IDLE&&(this._state=Jl.UPDATING),new Promise((function(e){t._renderWaiters.push(e),t.map.triggerRepaint()}))}},{key:"_addLayerIdToFeature",value:function(t){return t.layerId=this.id,t}},{key:"_vizChanged",value:function(){var t=Jn()(Yn.a.mark((function t(e){return Yn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._update(this._source,e,!1));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_checkId",value:function(t){if(void 0===t)throw new Fe("'id'",Le.MISSING_REQUIRED);if(!an.isString(t))throw new Fe("'id' property must be a string.",Le.INCORRECT_TYPE);if(""===t)throw new Fe("'id' property must be not empty.",Le.INCORRECT_VALUE)}},{key:"_checkSource",value:function(t){if(void 0===t)throw new Fe("'source'",Le.MISSING_REQUIRED);if(!(t instanceof Vl))throw new Fe("The given object is not a valid 'source'. See \"carto.source\".",Le.INCORRECT_TYPE)}},{key:"_checkViz",value:function(t){if(an.isUndefined(t))throw new Fe("'viz'",Le.MISSING_REQUIRED);if(!(t instanceof zl))throw new Fe("The given object is not a valid 'viz'. See \"carto.Viz\".",Le.INCORRECT_TYPE);if(t._boundLayer&&t._boundLayer!==this)throw new Fe("The given Viz object is already bound to another layer. Vizs cannot be shared between different layers.",Le.INCORRECT_VALUE)}},{key:"_getZoom",value:function(){return this.map.getZoom()}},{key:"_freeSource",value:function(){this._source&&this._source.free(),this._renderLayer.freeDataframes()}},{key:"visible",get:function(){return this._visible},set:function(t){var e=this._visible;this.map.setLayoutProperty(this.id,"visibility",t?"visible":"none"),this._visible=t,t!==e&&this._fire("updated","visibility change")}},{key:"viz",get:function(){return this._viz}}]),t}(),ec=["featureClick","featureClickOut","featureEnter","featureHover","featureLeave"],nc=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{autoChangePointer:!0};f()(this,t),e instanceof tc&&(e=[e]),function(t){if(!Array.isArray(t))throw new Fe('Invalid layer list, parameter must be an array of "carto.Layer" objects.',Le.INCORRECT_TYPE);if(!t.length)throw new Fe("Invalid argument, layer list must not be empty.",Le.INCORRECT_VALUE);if(!t.every((function(t){return t instanceof tc})))throw new Fe('Invalid layer, layer must be an instance of "carto.Layer".',Le.INCORRECT_TYPE)}(e),this._init(e,n)}return m()(t,[{key:"on",value:function(t,e){return ic(t),this._numListeners[t]=(this._numListeners[t]||0)+1,this._emitter.on(t,e)}},{key:"off",value:function(t,e){return ic(t),this._numListeners[t]=this._numListeners[t]-1,this._emitter.off(t,e)}},{key:"disable",value:function(){this._enabled=!1}},{key:"enable",value:function(){this._enabled=!0}},{key:"_init",value:function(t,e){var n=this;this._enabled=!0,this._mapState="idle",this._emitter=Bl(),this._layerList=t,this._prevHoverFeatures=[],this._prevClickFeatures=[],this._numListeners={},this._isAutoChangePointerEnabled=e.autoChangePointer;var i=t.map((function(t){return t._context}));return Promise.all(i).then((function(){!function(t){if(!t.every((function(e){return e.map===t[0].map})))throw new Fe("Invalid argument, all layers must belong to the same map.",Le.INCORRECT_VALUE)}(t),n._map=t[0].map,n._subscribeToLayerEvents(t),n._subscribeToMapEvents(n._map),n._isAutoChangePointerEnabled&&n._setInteractiveCursor()}))}},{key:"_setInteractiveCursor",value:function(){var t=this;this._map.__carto_interactivities||(this._map.__carto_interactivities=new Set),this.on("featureHover",(function(e){return t._onFeatureHover(e,t._map)}))}},{key:"_onFeatureHover",value:function(t,e){t.features.length?e.__carto_interactivities.add(this):e.__carto_interactivities.delete(this),e.getCanvas().style.cursor=e.__carto_interactivities.size>0?"pointer":""}},{key:"_subscribeToMapEvents",value:function(t){this._onMouseMoveBound=this._onMouseMove.bind(this),t.on("mousemove",this._onMouseMoveBound),this._onClickBound=this._onClick.bind(this),t.on("click",this._onClickBound),this._disableWhileMovingMap(t)}},{key:"_unsubscribeToMapEvents",value:function(t){t.off("mousemove",this._onMouseMoveBound),t.off("click",this._onClickBound)}},{key:"_disableWhileMovingMap",value:function(t){var e=this;t.on("movestart",(function(){e._setMapState("moving")})),t.on("moveend",(function(){e._setMapState("idle")}))}},{key:"_setMapState",value:function(t){this._mapState=t}},{key:"_subscribeToLayerEvents",value:function(t){var e=this;t.forEach((function(t){t.on("updated",e._onLayerUpdated.bind(e)),t.on("removed",e._onLayerRemoved.bind(e))}))}},{key:"_onLayerUpdated",value:function(){this._onMouseMove(this._mouseEvent,!0)}},{key:"_onLayerRemoved",value:function(t){this._removeLayerFromInteractivity(t),this._isAutoChangePointerEnabled&&this._onFeatureHover({features:[]},this._map),this._layerList.length||this._unsubscribeToMapEvents(this._map)}},{key:"_removeLayerFromInteractivity",value:function(t){var e=this._layerList.indexOf(t);-1!==e&&this._layerList.splice(e,1)}},{key:"_onMouseMove",value:function(t,e){if(this._mouseEvent=t,this.isEnabled&&t&&(this._numListeners.featureEnter||this._numListeners.featureHover||this._numListeners.featureLeave)){var n=this._createFeatureEvent(t),i=this._manageFeatureLeaveEvent(n),r=this._manageFeatureEnterEvent(n);this._prevHoverFeatures=n.features,this._manageFeatureHoverEvent(n,{featuresLeft:i,featuresEntered:r},e)}}},{key:"_manageFeatureLeaveEvent",value:function(t){var e=this._getDiffFeatures(this._prevHoverFeatures,t.features);return this._fireEventIfFeatures("featureLeave",{featureEvent:t,eventFeatures:e}),e}},{key:"_manageFeatureEnterEvent",value:function(t){var e=this._getDiffFeatures(t.features,this._prevHoverFeatures);return this._fireEventIfFeatures("featureEnter",{featureEvent:t,eventFeatures:e}),e}},{key:"_manageFeatureHoverEvent",value:function(t,e,n){(!n||n&&(e.featuresLeft.length||e.featuresEntered.length))&&this._fireEvent("featureHover",t)}},{key:"_fireEventIfFeatures",value:function(t,e){var n=e.featureEvent,i=e.eventFeatures;i.length>0&&this._fireEvent(t,{coordinates:n.coordinates,position:n.position,features:i})}},{key:"_onClick",value:function(t){if(this.isEnabled&&(this._numListeners.featureClick||this._numListeners.featureClickOut)){var e=this._createFeatureEvent(t);this._manageClickOutEvent(e),this._prevClickFeatures=e.features,this._fireEvent("featureClick",e)}}},{key:"_manageClickOutEvent",value:function(t){var e=this._getDiffFeatures(this._prevClickFeatures,t.features);return this._fireEventIfFeatures("featureClickOut",{featureEvent:t,eventFeatures:e}),e}},{key:"_createFeatureEvent",value:function(t){var e=this._getFeaturesAtPosition(t.point);return{coordinates:t.lngLat,position:t.point,features:e}}},{key:"_fireEvent",value:function(t,e){this._emitter.emit(t,e)}},{key:"_getFeaturesAtPosition",value:function(t){var e;return(e=[]).concat.apply(e,c()(this._layerList.map((function(e){return e.getFeaturesAtPosition(t)}))))}},{key:"_getDiffFeatures",value:function(t,e){var n=this._getFeatureIDs(e);return t.filter((function(t){return!n.includes(t.id)}))}},{key:"_getFeatureIDs",value:function(t){return t.map((function(t){return t.id}))}},{key:"isEnabled",get:function(){return this._enabled&&"moving"!==this._mapState}}]),t}();function ic(t){if(!ec.includes(t))throw new Fe("Unrecognized event: '".concat(t,"'. Available events: ").concat(ec.join(", "),"."),Le.INCORRECT_VALUE)}var rc=n(29),oc=n.n(rc);function ac(t,e,n,i,r){var o,a,s,u,l;if(t.length>=4){o=[t[0],t[1]];for(var c=2;c<=t.length;c+=2)if(o[0]!==(a=[t[c],t[c+1]])[0]||o[1]!==a[1]){c+=2;break}for(s=ze(o,a);c<=t.length;c+=2){l=!(r&&r(c));var h=void 0;if(c<=t.length-2?h=[t[c],t[c+1]]:i&&(h=[t[2],t[3]]),!l||o[0]===a[0]&&o[1]===a[1]||(e.vertices[n]=o[0],e.normals[n++]=-s[0],e.vertices[n]=o[1],e.normals[n++]=-s[1],e.vertices[n]=o[0],e.normals[n++]=s[0],e.vertices[n]=o[1],e.normals[n++]=s[1],e.vertices[n]=a[0],e.normals[n++]=s[0],e.vertices[n]=a[1],e.normals[n++]=s[1],e.vertices[n]=o[0],e.normals[n++]=-s[0],e.vertices[n]=o[1],e.normals[n++]=-s[1],e.vertices[n]=a[0],e.normals[n++]=s[0],e.vertices[n]=a[1],e.normals[n++]=s[1],e.vertices[n]=a[0],e.normals[n++]=-s[0],e.vertices[n]=a[1],e.normals[n++]=-s[1]),!h||h[0]===a[0]&&h[1]===a[1])u=s;else if(u=ze(a,h),l){var d=Ne(s,u),p=d.turnLeft,f=d.joinNormal,g=p?s:Be(u),m=p?u:Be(s);e.vertices[n]=a[0],e.normals[n++]=0,e.vertices[n]=a[1],e.normals[n++]=i?1e-37:0,e.vertices[n]=a[0],e.normals[n++]=g[0],e.vertices[n]=a[1],e.normals[n++]=g[1],e.vertices[n]=a[0],e.normals[n++]=m[0],e.vertices[n]=a[1],e.normals[n++]=m[1],f&&(e.vertices[n]=a[0],e.normals[n++]=f[0],e.vertices[n]=a[1],e.normals[n++]=f[1],e.vertices[n]=a[0],e.normals[n++]=m[0],e.vertices[n]=a[1],e.normals[n++]=m[1],e.vertices[n]=a[0],e.normals[n++]=g[0],e.vertices[n]=a[1],e.normals[n++]=g[1])}o=a,a=h,s=u}}return n}function sc(t,e){var n=new Float32Array(e);return n.set(t),n}var uc=0,lc={vertices:new Float32Array(1048576),normals:new Float32Array(1048576)};function cc(t){var e=uc+t;if(e>lc.vertices.length){var n=2*e;lc.vertices=sc(lc.vertices,n),lc.normals=sc(lc.normals,n)}}var hc=n(38),dc=0,pc={vertices:new Float32Array(2097152),normals:new Float32Array(2097152)};function fc(t){var e=dc+t;if(e>pc.vertices.length){var n=2*e;pc.vertices=sc(pc.vertices,n),pc.normals=sc(pc.normals,n)}}function gc(t,e){pc.vertices[dc]=t[e],pc.normals[dc++]=0,pc.vertices[dc]=t[e+1],pc.normals[dc++]=0}function mc(t,e,n){return!!(t.clipped.includes(e)&&t.clipped.includes(n)&&t.clippedType[t.clipped.indexOf(e)]&t.clippedType[t.clipped.indexOf(n)])}var yc=function(){function t(e){f()(this,t),this.dataframe=e}return m()(t,[{key:"getFeatureIds",value:function(){return this.decodedGeom.breakpoints.length?this._getFeatureIdsForLinesOrPolygons():this._getFeatureIdsForPoints()}},{key:"_getFeatureIdsForPoints",value:function(){for(var t=this.decodedGeom.vertices.length,e=this._createTablesXY(),n=e.tableX,i=e.tableY,r=new Float32Array(t),o=0,a=0;a<t;a+=6)r[a+0]=n[o],r[a+1]=i[o],0===r[a+0]&&(r[a+0]+=1/65536),0===r[a+1]&&(r[a+1]+=1/65536),r[a+2]=-r[a+0],r[a+3]=r[a+1],r[a+4]=r[a+0],r[a+5]=-r[a+1],o++;return r}},{key:"_getFeatureIdsForLinesOrPolygons",value:function(){for(var t=this.decodedGeom.vertices.length,e=this._createTablesXY(),n=e.tableX,i=e.tableY,r=this.decodedGeom.breakpoints,o=new Float32Array(t),a=0,s=0;s<t;s+=2){for(;s===r[a];)a++;o[s+0]=n[a],o[s+1]=i[a]}return o}},{key:"_createTablesXY",value:function(){for(var t={},e={},n=this.dataframe.getSize(),i=n.height,r=n.width,o=0;o<this.numFeatures;o++)t[o]=o%r/(r-1),e[o]=i>1?Math.floor(o/r)/(i-1):.5;return{tableX:t,tableY:e}}},{key:"decodedGeom",get:function(){return this.dataframe.decodedGeom}},{key:"numFeatures",get:function(){return this.dataframe.numFeatures}}]),t}(),_c=n(32),vc="separatingLineFound",bc="separatingLineNotFound";function xc(t,e){return function(t){var e=_()(t,3),n=e[1],i=e[2];return je(e[0],n)||je(n,i)}(t)?function(t,e){var n=_()(t,3),i=n[1],r=n[2],o=n[0],a=je(i,o)?r:i;return _c([[o.x,o.y],[a.x,a.y]],[e.minx,e.miny,e.maxx,e.maxy]).length>0}(t,e):function(t,e){return e[0].x<t.minx&&e[1].x<t.minx&&e[2].x<t.minx||e[0].y<t.miny&&e[1].y<t.miny&&e[2].y<t.miny||e[0].x>t.maxx&&e[1].x>t.maxx&&e[2].x>t.maxx||e[0].y>t.maxy&&e[1].y>t.maxy&&e[2].y>t.maxy?vc:bc}(e,t)!==vc&&function(t,e){for(var n=0;n<3;n++)for(var i=0;i<e.length&&!(Ue(e[i],t[n],t[(n+1)%3])>0);i++)if(3===i)return vc;return bc}(t,[{x:e.minx,y:e.miny},{x:e.minx,y:e.maxy},{x:e.maxx,y:e.miny},{x:e.maxx,y:e.maxy}])!==vc}var wc=function(){function t(e){f()(this,t),this.dataframe=e}return m()(t,[{key:"toNDC",value:function(t,e){var n=this.toClipSpace(t,e),i=n.ow;return{x:n.ox/i,y:n.oy/i}}},{key:"toClipSpace",value:function(t,e){var n=this.matrix;return{ox:n[0]*t+n[4]*e+n[12],oy:n[1]*t+n[5]*e+n[13],ow:n[3]*t+n[7]*e+n[15]}}},{key:"matrix",get:function(){return this.dataframe.matrix}}]),t}(),Cc=function(){function t(e){f()(this,t),this.dataframe=e,this.getFeature=e.getFeature.bind(e),this._getGL=e._getGL.bind(e),this._projection=new wc(e)}return m()(t,[{key:"isPointInViewport",value:function(t){var e=this.decodedGeom.vertices,n=this._projection.toClipSpace(e[6*t+0],e[6*t+1]),i=n.ox,r=n.oy,o=n.ow;return i>-o&&i<o&&r>-o&&r<o}},{key:"isPolygonInViewport",value:function(t){var e=this._compareAABBs(this._aabb[t]);if(0===e){var n=this.decodedGeom.vertices,i=this.decodedGeom.normals,r=this.decodedGeom.featureIDToVertexIndex.get(t);return this._isPolygonCollidingViewport(n,i,r.start,r.end)}return 1===e}},{key:"_getCanvasSizeInPixels",value:function(){var t=this._getGL().canvas;return{WIDTH:t.width/window.devicePixelRatio,HEIGHT:t.height/window.devicePixelRatio}}},{key:"_compareAABBs",value:function(t){if(null===t)return-1;var e=this._projection.toNDC(t.minx,t.miny),n=this._projection.toNDC(t.minx,t.maxy),i=this._projection.toNDC(t.maxx,t.miny),r=this._projection.toNDC(t.maxx,t.maxy),o={minx:Math.min(e.x,n.x,i.x,r.x),miny:Math.min(e.y,n.y,i.y,r.y),maxx:Math.max(e.x,n.x,i.x,r.x),maxy:Math.max(e.y,n.y,i.y,r.y)},a={minx:-1,miny:-1,maxx:1,maxy:1};switch(!0){case this._isFeatureAABBInsideViewport(o,a):return 1;case this._isFeatureAABBOutsideViewport(o,a):return-1;default:return 0}}},{key:"_isPolygonCollidingViewport",value:function(t,e,n,i){if(!this.matrix)return!1;for(var r={minx:-1,miny:-1,maxx:1,maxy:1},o=n;o<i;o+=6){var a=this._projection.toNDC(t[o+0],t[o+1]),s=this._projection.toNDC(t[o+2],t[o+3]),u=this._projection.toNDC(t[o+4],t[o+5]);if(xc([{x:a.x,y:a.y},{x:s.x,y:s.y},{x:u.x,y:u.y}],r))return!0}return!1}},{key:"_isFeatureAABBInsideViewport",value:function(t,e){return t.minx>=e.minx&&t.maxx<=e.maxx&&t.miny>=e.miny&&t.maxy<=e.maxy}},{key:"_isFeatureAABBOutsideViewport",value:function(t,e){return t.minx>e.maxx||t.miny>e.maxy||t.maxx<e.minx||t.maxy<e.miny}},{key:"getPointsAtPosition",value:function(t,e){for(var n=this.decodedGeom.vertices,i=[],r=0;r<6*this.numFeatures;r+=6){var o=this.getFeature(r/6);if(!this._isFeatureFiltered(o,e.filter)){var a=this._getCircleFor({x:n[r],y:n[r+1]},o,e);qe(t,a.center,a.radius)&&i.push(o)}}return i}},{key:"_isFeatureFiltered",value:function(t,e){return e.eval(t)<.5}},{key:"_getCircleFor",value:function(t,e,n){var i=this._getCanvasSizeInPixels(),r=i.WIDTH,o=i.HEIGHT,a=this._projection.toNDC(t.x,t.y);a.x*=.5,a.y*=-.5,a.x+=.5,a.y+=.5,a.x*=r,a.y*=o;var s=this._computePointRadius(e,n);if(!n.symbol.default){var u=n.symbolPlacement.eval(e);a.x+=u[0]*s,a.y-=u[1]*s}if(!n.transform.default){var l=n.transform.eval(e);a.x+=l.x,a.y-=l.y}return{center:a,radius:s}}},{key:"getFeaturesAtPositionFromTriangles",value:function(t,e,n){for(var i,r=this.decodedGeom.vertices,o=this.decodedGeom.normals,a=this.decodedGeom.breakpoints,s=[],u=-1,l={x:0,y:0},c=this._getCanvasSizeInPixels(),h=c.WIDTH,d=c.HEIGHT,p=0;p<r.length;p+=6){if(0===p||p>=a[u]){u++;var f=this.getFeature(u);if(!n.transform.default){var g=n.transform.eval(f);l.x=g[0],l.y=g[1]}if(i="line"===t?this._computeLineWidthScale(f,n):this._computePolygonWidthScale(f,n),this._isFeatureFiltered(f,n.filter)||!this._isPointInAABB(e,l,"line"===t?n.width.eval(f):n.strokeWidth.eval(f),u)){p=a[u]-6;continue}}var m=this._projection.toNDC(r[p+0]+o[p+0]*i,r[p+1]+o[p+1]*i),y=this._projection.toNDC(r[p+2]+o[p+2]*i,r[p+3]+o[p+3]*i),_=this._projection.toNDC(r[p+4]+o[p+4]*i,r[p+5]+o[p+5]*i);m.x*=.5,m.y*=-.5,m.x+=.5,m.y+=.5,y.x*=.5,y.y*=-.5,y.x+=.5,y.y+=.5,_.x*=.5,_.y*=-.5,_.x+=.5,_.y+=.5,Ve(e,{x:m.x*h+l.x,y:m.y*d-l.y},{x:y.x*h+l.x,y:y.y*d-l.y},{x:_.x*h+l.x,y:_.y*d-l.y})&&(s.push(this.getFeature(u)),p=a[u]-6)}return s}},{key:"_isPointInAABB",value:function(t,e,n,i){var r=this._aabb[i];if(null===r||!this.matrix)return!1;var o=this._projection.toNDC(r.minx,r.miny),a=this._projection.toNDC(r.minx,r.maxy),s=this._projection.toNDC(r.maxx,r.miny),u=this._projection.toNDC(r.maxx,r.maxy),l={minx:Math.min(o.x,a.x,s.x,u.x),miny:Math.min(o.y,a.y,s.y,u.y),maxx:Math.max(o.x,a.x,s.x,u.x),maxy:Math.max(o.y,a.y,s.y,u.y)},c=this._getCanvasSizeInPixels(),h=c.WIDTH,d=c.HEIGHT,p=2*e.x/h,f=2*e.y/d,g=t.x/h*2-1,m=-(t.y/d*2-1);return!this._isFeatureAABBOutsideViewport(l,{minx:g+p-2*n/h,miny:m-f-2*n/d,maxx:g+p+2*n/h,maxy:m-f+2*n/d})}},{key:"_computePointRadius",value:function(t,e){return(Math.min(e.width.eval(t),1024)+Math.min(e.strokeWidth.eval(t),1024))/2}},{key:"_computeLineWidthScale",value:function(t,e){return Math.min(e.width.eval(t),1024)/2/this.scale/this._resolutionForZoomLevel()}},{key:"_computePolygonWidthScale",value:function(t,e){return Math.min(e.strokeWidth.eval(t),1024)/2/this.scale/this._resolutionForZoomLevel()}},{key:"_resolutionForZoomLevel",value:function(){return 512*Math.pow(2,this.renderer.drawMetadata.zoomLevel)}},{key:"decodedGeom",get:function(){return this.dataframe.decodedGeom}},{key:"_aabb",get:function(){return this.dataframe._aabb}},{key:"numFeatures",get:function(){return this.dataframe.numFeatures}},{key:"renderer",get:function(){return this.dataframe.renderer}},{key:"matrix",get:function(){return this.dataframe.matrix}},{key:"scale",get:function(){return this.dataframe.scale}}]),t}(),Pc=new Map,Mc=function(t){function e(){var t,n;f()(this,e);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(n=E()(this,(t=T()(e)).call.apply(t,[this].concat(r))))._initHelpers(),n}return I()(e,(function t(e){var n=e.active,i=e.center,r=e.properties,o=e.propertiesArrayBuffer,a=e.scale,s=e.type,u=e.geom,l=e.size,c=e.metadata;f()(this,t),this.active=n,this.center=i,this.properties=r,this.propertiesArrayBuffer=o,this.scale=a,this.type=s,this.decodedGeom=function(t,e){switch(t){case"point":return function(t){return{verticesArrayBuffer:t,vertices:new Float32Array(t),breakpoints:[]}}(e);case"line":return function(t){var e=[],n=new Map;uc=0;for(var i=0;i<t.length;i++){for(var r=t[i],o=0;o<r.length;o++)cc(24*r[o].length),uc=ac(r[o],lc,uc);n.set(e.length,0===e.length?{start:0,end:uc}:{start:n.get(e.length-1).end,end:uc}),e.push(uc)}for(var a=new ArrayBuffer(4*uc),s=new ArrayBuffer(4*uc),u=new Float32Array(a),l=new Float32Array(s),c=0;c<uc;c++)u[c]=lc.vertices[c],l[c]=lc.normals[c];return{vertices:u,normals:l,verticesArrayBuffer:a,normalsArrayBuffer:s,featureIDToVertexIndex:n,breakpoints:e}}(e);case"polygon":return function(t){var e=[],n=new Map;dc=0;for(var i=0;i<t.length;i++){for(var r=t[i],o=function(t){var e=r[t],n=hc(e.flat,e.holes);fc(2*n.length+24*e.flat.length);for(var i=0;i<n.length;i++)gc(e.flat,2*n[i]);dc=ac(e.flat,pc,dc,!0,(function(t){return e.holes.includes((t-2)/2)||mc(e,t-4,t-2)}))},a=0;a<r.length;a++)o(a);n.set(e.length,0===e.length?{start:0,end:dc}:{start:n.get(e.length-1).end,end:dc}),e.push(dc)}for(var s=new ArrayBuffer(4*dc),u=new ArrayBuffer(4*dc),l=new Float32Array(s),c=new Float32Array(u),h=0;h<dc;h++)l[h]=pc.vertices[h],c[h]=pc.normals[h];return{vertices:l,normals:c,verticesArrayBuffer:s,normalsArrayBuffer:u,featureIDToVertexIndex:n,breakpoints:e}}(e);default:throw new wn("Unimplemented geometry type: '".concat(t,"'."),Cn.NOT_SUPPORTED)}}(s,u),this.numVertex="point"===s?3*l:this.decodedGeom.vertices.length/2,this.numFeatures="point"===s?l:this.decodedGeom.breakpoints.length||this.numVertex,this.propertyTex=[],this.metadata=c,this.propertyCount=0,this._aabb=function(t,e){switch(e){case"point":return[];case"line":case"polygon":for(var n=[],i=0;i<t.length;i++){for(var r=t[i],o={minx:Number.POSITIVE_INFINITY,miny:Number.POSITIVE_INFINITY,maxx:Number.NEGATIVE_INFINITY,maxy:Number.NEGATIVE_INFINITY},a=0;a<r.length;a++)o=Ze(r[a],o,e);o.minx===Number.POSITIVE_INFINITY&&(o=null),n.push(o)}return n}}(u,s),this._centroids=function(t,e){switch(e){case"point":return function(t){for(var e=[],n=0;n<t.vertices.length/6;n++){var i=6*n,r=t.vertices.slice(i,i+6),o=_()(r,6);e.push({x:o[4],y:o[5]})}return e}(t);case"line":case"polygon":return function(t,e){var n=[],i=0;return t.breakpoints.forEach((function(r){var o,a=t.vertices.slice(i,r);o="line"===e?function(t){for(var e=[],n=[],i=0;i<t.length/6;i++){var r=6*i,o=t.slice(r,r+6),a=_()(o,6),s=a[0],u=a[1],l=a[2],c=a[3],h=a[4],d=a[5],p=s===l&&u===c;if(!p||l!==h||c!==d){var f=[s,u],g=p?[h,d]:[l,c];e.push(f[0]),e.push(g[0]),n.push(f[1]),n.push(g[1])}}return{x:Re(e),y:Re(n)}}(a):function(t){for(var e=[],n=[],i=[],r=0;r<t.length/6;r++){var o=6*r,a=t.slice(o,o+6),s=_()(a,6),u=s[0],l=s[1],c=s[2],h=s[3],d=s[4],p=s[5],f=He([[u,l],[c,h],[d,p]]);if(f>0){var g=Re([u,c,d]),m=Re([l,h,p]);e.push(g*f),n.push(m*f),i.push(f)}}var y=Ge(i);return{x:Ge(e)/y,y:Ge(n)/y}}(a),n.push(o),i=r})),n}(t,e);default:throw new Fe("Invalid type argument, decoded geometry must have a point, line or polygon type.",Le.INCORRECT_VALUE)}}(this.decodedGeom,s),this.t1=[.1,.1,.1,.1],this.t2=[.1,.1,.1,.1],this.t3=[.1,.1,.1,.1],this.t4=[.1,.1,.1,.1]})),m()(e,[{key:"_initHelpers",value:function(){this._featureIdsHelper||(this._featureIdsHelper=new yc(this)),this._viewportHelper||(this._viewportHelper=new Cc(this))}},{key:"bindRenderer",value:function(t){this.renderer=t,this._initHelpers(),this.addProperties(),this._loadVertices(),this._loadNormals(),this._loadFeatureIds(),this._createEmptyStyleTextures()}},{key:"getSize",value:function(){var t=this.renderer.RTT_WIDTH;return{width:t,height:Math.ceil(this.numFeatures/t)}}},{key:"_getGL",value:function(){return this.renderer.gl}},{key:"_loadVertices",value:function(){var t=this._getGL(),e=this.decodedGeom.vertices;this.vertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)}},{key:"_loadNormals",value:function(){var t=this._getGL(),e=this.decodedGeom.normals;e&&(this.normalBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.normalBuffer),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW))}},{key:"_loadFeatureIds",value:function(){var t=this._getGL(),e=this._featureIdsHelper.getFeatureIds();this.featureIDBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.featureIDBuffer),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)}},{key:"getFeaturesAtPosition",value:function(t,e){if(!this.matrix)return[];switch(this.type){case"point":return this._viewportHelper.getPointsAtPosition(t,e);case"line":case"polygon":return this._viewportHelper.getFeaturesAtPositionFromTriangles(this.type,t,e);default:return[]}}},{key:"inViewport",value:function(t){if(!this.matrix)return!1;switch(this.type){case"point":return this._viewportHelper.isPointInViewport(t);case"line":case"polygon":return this._viewportHelper.isPolygonInViewport(t);default:return!1}}},{key:"getRenderedCentroid",value:function(t){var e=no()({},this._centroids[t]);e.x=e.x*this.scale+this.center.x,e.y=e.y*this.scale+this.center.y;var n=this._unprojectFromWebMercator(e);return[n.lng,n.lat]}},{key:"getPropertyTexture",value:function(t){var e=this._encodePropertyName(t);return this.propertyTex[e]||this._loadPropertyValuesToTexture(t),this.propertyTex[e]}},{key:"_loadPropertyValuesToTexture",value:function(t){var e=this._getGL(),n=this.properties[t],i=this._encodePropertyName(t),r=this.getSize(),o=r.width,a=r.height;n&&(this.propertyTex[i]=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.propertyTex[i]),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,o,a,0,e.ALPHA,e.FLOAT,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST))}},{key:"_encodePropertyName",value:function(t){return"_".concat(t)}},{key:"free",value:function(){var t=this;this._freeWebGLElements(),Object.keys(this).forEach((function(e){t[e]=null})),this.freed=!0}},{key:"_freeWebGLElements",value:function(){if(this.propertyTex){var t=this._getGL();this.propertyTex.map((function(e){return t.deleteTexture(e)})),t.deleteTexture(this.texColor),t.deleteTexture(this.texStrokeColor),t.deleteTexture(this.texWidth),t.deleteTexture(this.texStrokeWidth),t.deleteTexture(this.texFilter),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.featureIDBuffer)}}},{key:"_unprojectFromWebMercator",value:function(t){var e=Math.PI/180;return{lng:t.x*Xe/6378137/e,lat:2*(Math.atan(Math.pow(Math.E,t.y*Xe/6378137))-Math.PI/4)/e}}},{key:"_genFeatureClass",value:function(){if(Pc.has(this.metadata))this._featureClass=Pc.get(this.metadata);else{var t=function(t){var e=function t(e,n){f()(this,t),this._index=e,this._dataframe=n};return Object.defineProperties(e.prototype,function(t){var e={};return t.propertyKeys.forEach((function(n){var i=t.codec(n);if(i.isRange()){var r=t.decodedProperties(n);e[n]={get:function(){var e=this,n=this._index,o=r.map((function(t){return e._dataframe.properties[t][n]}));return i.internalToExternal(t,o)}}}else e[n]={get:function(){return i.internalToExternal(t,this._dataframe.properties[n][this._index])}}})),e}(t)),e}(this.metadata);Pc.set(this.metadata,t),this._featureClass=t}}},{key:"getFeature",value:function(t){if(this.cachedFeatures||(this.cachedFeatures=new Array(this.numFeatures)),void 0!==this.cachedFeatures[t])return this.cachedFeatures[t];this._featureClass||this._genFeatureClass();var e=new this._featureClass(t,this);return this.cachedFeatures[t]=e,e}},{key:"addProperties",value:function(){for(var t=0;t<this.metadata.propertyKeys.length;t++)this._addProperty(this.metadata.propertyKeys[t]);this._genFeatureClass()}},{key:"_addProperty",value:function(t){Object.keys(this.propertyTex).length<32&&this.getPropertyTexture(t)}},{key:"_createEmptyStyleTextures",value:function(){this.texColor=this._createStyleDataframeTexture(),this.texWidth=this._createStyleDataframeTexture(),this.texStrokeColor=this._createStyleDataframeTexture(),this.texStrokeWidth=this._createStyleDataframeTexture(),this.texFilter=this._createStyleDataframeTexture()}},{key:"_createStyleDataframeTexture",value:function(){var t=this._getGL(),e=this.getSize(),n=e.width,i=e.height,r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,i,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),r}}]),e}(),Oc="cartodb_id",kc=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{properties:{}},i=n.properties,r=n.featureCount,o=n.sample,a=n.geomType,s=n.isAggregated,u=n.idProperty,l=n.extent;f()(this,t),this.properties=i,this.featureCount=r,this.sample=o,this.geomType=a,this.isAggregated=s,this.idProperty=u||Oc,this.properties.hasOwnProperty(this.idProperty)||(this.properties[this.idProperty]={type:"number"}),this.categoryToID=new Map,this.IDToCategory=new Map,this.numCategories=0,this.extent=l||4096,Object.values(i).map((function(t){t.categories=t.categories||[],t.categories.map((function(n){return e.categorizeString(t,n.name,!0)}))})),this.propertyKeys=Object.keys(i)}return m()(t,[{key:"setCodecs",value:function(){throw new wn('You must call "setCodecs" once you have determined the proper subclass')}},{key:"categorizeString",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0===e&&(e=null),this.categoryToID.has(e))return this.categoryToID.get(e);n||null===e||this.properties[t].categories.push({name:e,frequency:Number.NaN});var i=null===e?pr:this.numCategories;return this.categoryToID.set(e,i),this.IDToCategory.set(i,e),this.numCategories++,i}},{key:"decodedProperties",value:function(t){return[t]}},{key:"baseName",value:function(t){return t}},{key:"sourcePropertyName",value:function(t){return t}},{key:"stats",value:function(t){return this.properties[t]}},{key:"codec",value:function(t){var e=this.baseName(t);return this.properties[e]&&this.properties[e].codec?this.properties[e].codec:new Zr}}]),t}(),Ec=function(t){function e(){return f()(this,e),E()(this,T()(e).apply(this,arguments))}return I()(e,t),m()(e,[{key:"sourceToInternal",value:function(t,e){return(isNaN(e)||null==e)&&(e=pr),e}},{key:"internalToExternal",value:function(t,e){return e===pr&&(e=null),e}},{key:"externalToInternal",value:function(t,e){return null===e&&(e=pr),e}}]),e}(Zr),Sc=function(t){function e(){return f()(this,e),E()(this,T()(e).apply(this,arguments))}return I()(e,t),m()(e,[{key:"sourceToInternal",value:function(t,n){var i=d()(n);if(null!==n&&"undefined"!==i&&"number"!==i)throw new wn("MVT decoding error. Metadata property '".concat(this._baseName,"' is of type 'number' but the MVT tile contained a feature property of type '").concat(i,"': '").concat(n,"'"),Cn.MVT);return Ai()(T()(e.prototype),"sourceToInternal",this).call(this,t,n)}}]),e}(Ec),Tc=function(t){function e(){return f()(this,e),E()(this,T()(e).apply(this,arguments))}return I()(e,t),m()(e,[{key:"sourceToInternal",value:function(t,e){return t.categorizeString(this._baseName,e)}},{key:"internalToExternal",value:function(t,e){return t.IDToCategory.get(e)}},{key:"sourceToExternal",value:function(t,e){return e}},{key:"externalToSource",value:function(t,e){return e}}]),e}(Hr),Ac=function(t){function e(){return f()(this,e),E()(this,T()(e).apply(this,arguments))}return I()(e,t),m()(e,[{key:"sourceToInternal",value:function(t,n){var i=d()(n);if(null!==n&&"undefined"!==i&&"string"!==i)throw new wn("MVT decoding error. Metadata property '".concat(this._baseName,"' is of type 'category' but the MVT tile contained a feature property of type '").concat(i,"': '").concat(n,"'"),Cn.MVT);return Ai()(T()(e.prototype),"sourceToInternal",this).call(this,t,n)}}]),e}(Tc),Ic=function(t){function e(){return f()(this,e),E()(this,T()(e).apply(this,arguments))}return I()(e,t),m()(e,[{key:"setCodecs",value:function(){var t=this;Object.keys(this.properties).forEach((function(e){var n=t.properties[e],i=n.type;"geometry"!==i&&(n.codec=function(t,e,n){switch(e){case"number":return new Sc(t,n);case"category":return new Ac(t,n);default:throw new wn("MVT decoding error. Feature property value of type '".concat(e,"' cannot be decoded."),Cn.MVT)}}(t,i,e))}))}}]),e}(kc),Dc=n(31),Rc=function(){function t(){f()(this,t),this._cache=Dc({max:256,length:function(){return 1},maxAge:36e5,dispose:function(t,e){e.then((function(t){t.empty||t.free()}))}})}return m()(t,[{key:"get",value:function(t,e){var n=this._cache.get(t);if(n)return n;var i=e(t);return this._cache.set(t,i),i}},{key:"free",value:function(){this._cache.reset()}}]),t}();function Fc(t,e,n){return{x:(t-n.center.x)/n.scale,y:(e-n.center.y)/n.scale}}function Lc(t,e){return function(t,e){for(var n=_()(e,4),i=n[1],r=n[2],o=n[3],a=1<<t,s=function(t){return Math.min(Math.max(t,0),a-1)},u=s(Math.floor(a*(n[0]+1)*.5)),l=s(Math.ceil(a*(r+1)*.5)-1),c=s(Math.floor(a*(1-o)*.5)),h=s(Math.ceil(a*(1-i)*.5)-1),d=[],p=u;p<=l;++p)for(var f=c;f<=h;++f)d.push({x:p,y:f,z:t});return d}((arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.ceil)(t),e)}var zc=function(){function t(e){f()(this,t),Array.isArray(e)||(e=[e]),this._templateURLs=e,this._nextGroupID=0,this._currentRequestGroupID=0,this._oldDataframes=[],this._cache=new Rc}return m()(t,[{key:"bindLayer",value:function(t){this._addDataframe=t}},{key:"requestData",value:function(t,e,n){var i=Lc(t,e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.ceil);return this._getTiles(i,n)}},{key:"free",value:function(){this._cache.free(),this._cache=new Rc,this._oldDataframes=[]}},{key:"_getTileUrl",value:function(t,e,n){var i=this._getSubdomainIndex(t,e);return this._templateURLs[i].replace("{x}",t).replace("{y}",e).replace("{z}",n)}},{key:"_getSubdomainIndex",value:function(t,e){return Math.abs(t+e)%this._templateURLs.length}},{key:"_getTiles",value:function(){var t=Jn()(Yn.a.mark((function t(e,n){var i,r,o,a=this;return Yn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._nextGroupID++,i=this._nextGroupID,t.next=4,Promise.all(e.map((function(t){var e=t.x,i=t.y,r=t.z;return a._cache.get("".concat(e,",").concat(i,",").concat(r),(function(){return a._requestDataframe(e,i,r,n)})).then((function(t){return t.orderID=e+i/1e3,t}))})));case 4:if(r=t.sent,!(i<this._currentRequestGroupID)){t.next=7;break}return t.abrupt("return",!0);case 7:return this._currentRequestGroupID=i,this._oldDataframes.forEach((function(t){t.active=!1})),r.forEach((function(t){t.active=!0})),o=!en(new Set(r),new Set(this._oldDataframes)),this._oldDataframes=r,t.abrupt("return",o);case 13:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"_requestDataframe",value:function(){var t=Jn()(Yn.a.mark((function t(e,n,i,r){var o,a;return Yn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=this._getTileUrl(e,n,i),t.next=3,r(e,n,i,o);case 3:return(a=t.sent).empty||this._addDataframe(a),t.abrupt("return",a);case 6:case"end":return t.stop()}}),t,this)})));return function(e,n,i,r){return t.apply(this,arguments)}}()}]),t}(),Nc=n(39),Bc=n.n(Nc),Vc=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ic,r=arguments.length>2?arguments[2]:void 0;return f()(this,e),(n=E()(this,T()(e).call(this)))._templateURL=t,n._tileClient=new zc(t),n._initMetadata(i),n._initOptions(r),n._workerDispatch={},n._mID=0,n._workerName="MVT",n}return I()(e,t),m()(e,[{key:"_initMetadata",value:function(t){t instanceof kc||(t=new Ic(t)),t.setCodecs(),this._metadata=t}},{key:"_initOptions",value:function(t){void 0===t&&(t={layerID:void 0,viewportZoomToSourceZoom:Math.ceil,maxZoom:void 0}),t.viewportZoomToSourceZoom=t.viewportZoomToSourceZoom||Math.ceil,this._options=t}},{key:"_receiveMessageFromWorker",value:function(t){var e=t.data,n=e.mID,i=e.dataframe;i.empty||this._updateMetadataWith(i),this._workerDispatch[n](i)}},{key:"_updateMetadataWith",value:function(t){Object.setPrototypeOf(t,Mc.prototype);var e=t.metadata;this._metadata.numCategories=e.numCategories,this._metadata.categoryToID=e.categoryToID,this._metadata.IDToCategory=e.IDToCategory,this._metadata.geomType=e.geomType,t.metadata=this._metadata}},{key:"_clone",value:function(){return new e(this._templateURL,JSON.parse(JSON.stringify(this._metadata)),this._options)}},{key:"bindLayer",value:function(t){this._tileClient.bindLayer(t)}},{key:"requestMetadata",value:function(){var t=Jn()(Yn.a.mark((function t(){return Yn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._metadata);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"requestData",value:function(t,e){var n=this._urlToDataframeTransformer.bind(this),i=this._viewportZoomToSourceZoom.bind(this);return this._tileClient.requestData(t,e,n,i)}},{key:"_urlToDataframeTransformer",value:function(t,e,n,i){var r=this;return new Promise((function(o){var a=r._validUrlForWorker(i);r._postMessageToWorker({x:t,y:e,z:n},a),r._metadataSent=!0,r._workerDispatch[r._mID]=o,r._mID++}))}},{key:"_postMessageToWorker",value:function(t,e){this._worker.postMessage({x:t.x,y:t.y,z:t.z,url:e,layerID:this._options.layerID,metadata:this._metadataSent?void 0:this._metadata,mID:this._mID,workerName:this._workerName})}},{key:"_viewportZoomToSourceZoom",value:function(t){var e=this._options.maxZoom,n=this._options.viewportZoomToSourceZoom(t);return void 0===e?n:Math.min(n,e)}},{key:"_validUrlForWorker",value:function(t){if("."===t[0]){var e=window.location.pathname.split("/");e.pop();var n=e.join("/");return"".concat(window.location.protocol,"//").concat(window.location.host,"/").concat(n,"/").concat(t)}return"/"===t[0]?"".concat(window.location.protocol,"//").concat(window.location.host).concat(t):t}},{key:"free",value:function(){this._tileClient.free()}},{key:"_worker",get:function(){return this._workerInstance||(this._workerInstance=new Bc.a,this._workerInstance.onmessage=this._receiveMessageFromWorker.bind(this)),this._workerInstance}}]),e}(Vl),Uc=function(t){function e(t,n){var i;f()(this,e),i=E()(this,T()(e).call(this,t,n));var r=t.stats(n).min;return i._min_ms=1e3*r,i._min_date=tn(i._min_ms),i}return I()(e,t),m()(e,[{key:"sourceToInternal",value:function(t,e){return tn(1e3*e)-this._min_date}},{key:"internalToExternal",value:function(t,e){var n=e;return tn(n+=this._min_ms)}},{key:"externalToSource",value:function(t,e){return e.getTime()/1e3}},{key:"sourceToExternal",value:function(t,e){return function(t){return t instanceof Date?t:tn(1e3*t)}(e)}},{key:"inlineInternalMatch",value:function(t,e){var n=e._min_ms-this._min_ms;return"(".concat(t,"-").concat(n.toFixed(20),")")}}]),e}(Hr),jc=function(t){function e(t,n){var i;f()(this,e),i=E()(this,T()(e).call(this,t,n));var r=t.stats(n),o=r.grouping&&r.grouping.timezone,a=un({timeZone:o,iso:r.min});return i._min=a.startValue/1e3,i._timeZone=o,i}return I()(e,t),m()(e,[{key:"isRange",value:function(){return!0}},{key:"sourceToInternal",value:function(t,e){var n=this,i=un({iso:e});return[i.startValue/1e3,i.endValue/1e3].map((function(t){return t-n._min}))}},{key:"internalToExternal",value:function(t,e){var n=_()(e,2);return un({start:1e3*(n[0]+this._min),end:1e3*(n[1]+this._min),timeZone:this._timeZone})}},{key:"externalToSource",value:function(t,e){return sn(e,this._timeZone)._iso}},{key:"sourceToExternal",value:function(t,e){return un({iso:e,timeZone:this._timeZone})}},{key:"inlineInternalMatch",value:function(t,e){var n=e._min.getTime()-this._min.getTime();return"(".concat(t,"-").concat(n.toFixed(20),")")}}]),e}(Hr),qc=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gc.DEFAULT;return f()(this,e),(n=E()(this,T()(e).call(this,{message:t,type:i}))).name="CartoMapsAPIError",n}return I()(e,t),e}(R),Gc={DEFAULT:"[Error]",SQL:"[SQL]",NOT_SUPPORTED:"[Not supported]",SECURITY:"[Security]"},Hc=function(t){function e(){var t,n;f()(this,e);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(n=E()(this,(t=T()(e)).call.apply(t,[this].concat(r)))).propertyKeys=[],n.baseNames={},Object.keys(n.properties).forEach((function(t){var e=n.properties[t];e.aggregations?Object.values(e.aggregations).forEach((function(e){n._addProperty(t,e)})):e.dimension?e.dimension.range?(e.dimension.range.forEach((function(e){n._addProperty(t,e,!1)})),n._addProperty(t,e.dimension.propertyName)):n._addProperty(t,e.dimension.propertyName):n._addProperty(t,t)})),n}return I()(e,t),m()(e,[{key:"_addProperty",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.baseNames[e]=t,n&&this.propertyKeys.push(e)}},{key:"_dimensionInfo",value:function(t){var e=this.baseName(t)||t,n=this.properties[e],i=null;e!==t&&e!==t&&n.dimension&&(i=n.dimension);var r=n.type,o=i?function(t){return t.type}(i):r;return{baseName:e,column:n,dimension:i,dataframeType:i?function(t,e){return t.range?"date":t.type}(i):o,baseType:r,sourceType:o}}},{key:"baseName",value:function(t){return this.baseNames[t]}},{key:"decodedProperties",value:function(t){var n=this._dimensionInfo(t).dimension;return n&&n.grouping&&n.range?n.range:Ai()(T()(e.prototype),"decodedProperties",this).call(this,t)}},{key:"stats",value:function(t){var n=this._dimensionInfo(t).dimension;return n&&n.grouping?n:Ai()(T()(e.prototype),"stats",this).call(this,t)}},{key:"setCodecs",value:function(){!function(t){Object.keys(t.properties).forEach((function(e){var n=t.properties[e],i=n.type;if("geometry"!==i){var r=n.dimension?n.dimension.type:null;n.codec=function(t,e,n){switch(e){case"number":return new Ec(t,n);case"category":return new Tc(t,n);case"date":return new Uc(t,n);case"timerange":return new jc(t,n);default:throw new qc("Windshaft MVT decoding error. Feature property value of type '".concat(e,"' cannot be decoded."),Gc.NOT_SUPPORTED)}}(t,("category"===r&&n.dimension.range?"timerange":r)||i,(r?n.dimension.propertyName:e)||e)}}))}(this)}},{key:"sourcePropertyName",value:function(t){var e=this.baseName(t),n=this.properties[e].dimension;return n&&n.range?n.propertyName:t}}]),e}(Ic),Zc=function(){function t(e){f()(this,t),this._onlyAggregateFilters=e.exclusive}return m()(t,[{key:"getFilters",value:function(t){var e={},n=this._and(t).filter(Boolean),i=!0,r=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var u=a.value,l=u.property,c=e[l];if(c){if(!this._compatibleAndFilters(c,u.filters))return{};Object.assign(c[0],u.filters[0])}else e[l]=u.filters}}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return e}},{key:"_and",value:function(t){return t.isA(ji)?this._and(t.a).concat(this._and(t.b)).filter(Boolean):[this._or(t)].filter(Boolean)}},{key:"_or",value:function(t){if(t.isA(nr)){var e=this._basicCondition(t.a),n=this._basicCondition(t.b);if(e&&n&&e.property===n.property)return e.filters=e.filters.concat(n.filters),e}return this._basicCondition(t)}},{key:"_removeBlend",value:function(t){return t.isA(ar)&&t.originalMix.isA(Si)?t.b:t}},{key:"_basicCondition",value:function(t){return t=this._removeBlend(t),this._between(t)||this._equals(t)||this._notEquals(t)||this._lessThan(t)||this._lessThanOrEqualTo(t)||this._greaterThan(t)||this._greaterThanOrEqualTo(t)||this._in(t)||this._notIn(t)}},{key:"_value",value:function(t){if((t=this._removeBlend(t)).isA(to)||t.isA(Rr)||t.isA(mr))return t.value}},{key:"_between",value:function(t){if(t.isA(Li)){var e=this._aggregation(t.input),n=e&&this._value(t.lowerLimit),i=e&&n&&this._value(t.upperLimit);if(i)return e.filters.push({greater_than_or_equal_to:n,less_than_or_equal_to:i}),e}}},{key:"_in",value:function(t){var e=this;if(t.isA(Ii)){var n=this._aggregation(t.input),i=t.list.elems.map((function(t){return e._value(t)})).filter((function(t){return null!==t}));if(n&&i.length>0&&i.length===t.list.elems.length)return n.filters.push({in:i}),n}}},{key:"_notIn",value:function(t){var e=this;if(t.isA(Ri)){var n=this._aggregation(t.input),i=t.list.elems.map((function(t){return e._value(t)})).filter((function(t){return null!==t}));if(n&&i.length>0&&i.length===t.list.elems.length)return n.filters.push({not_in:i}),n}}},{key:"_equals",value:function(t){return this._cmpOp(t,Zi,"equal")}},{key:"_notEquals",value:function(t){return this._cmpOp(t,er,"not_equal")}},{key:"_lessThan",value:function(t){return this._cmpOp(t,Xi,"less_than","greater_than")}},{key:"_lessThanOrEqualTo",value:function(t){return this._cmpOp(t,$i,"less_than_or_equal_to","greater_than_or_equal_to")}},{key:"_greaterThan",value:function(t){return this._cmpOp(t,Wi,"greater_than","less_than")}},{key:"_greaterThanOrEqualTo",value:function(t){return this._cmpOp(t,Ki,"greater_than_or_equal_to","less_than_or_equal_to")}},{key:"_aggregation",value:function(t){if((t=this._removeBlend(t)).isA(Pr)||t.isA(Mr)||t.isA(Or)||t.isA(kr)||t.isA(Er)){var e=this._property(t.property);if(e)return e.property=t.propertyName,e}if(!this._onlyAggregateFilters)return this._property(t)}},{key:"_property",value:function(t){if((t=this._removeBlend(t)).isA(wr))return{property:t.name,filters:[]}}},{key:"_cmpOp",value:function(t,e,n,i){if(i=i||n,t.isA(e)){var r=this._aggregation(t.a),o=r&&this._value(t.b),a=n;if(o||(o=(r=this._aggregation(t.b))&&this._value(t.a),a=i),o){var s={};return s[a]=o,r.filters.push(s),r}}}},{key:"_compatibleAndFilters",value:function(t,e){if(0===t.length||0===e.length)return!0;if(1===t.length&&1===e.length){var n=t[0],i=e[0];if(1===Object.keys(n).length&&1===Object.keys(i).length){var r=Object.keys(n)[0],o=Object.keys(i)[0],a=["less_than","less_than_or_equal_to"],s=["greater_than","greater_than_or_equal_to"];return a.includes(r)&&s.includes(o)||a.includes(o)&&s.includes(r)}}return!1}}]),t}(),Wc=function(){function t(){f()(this,t)}return m()(t,[{key:"getFilter",value:function(t){return this._filter(t)}},{key:"_filter",value:function(t){return this._and(t)||this._or(t)||this._in(t)||this._notIn(t)||this._between(t)||this._equals(t)||this._notEquals(t)||this._lessThan(t)||this._lessThanOrEqualTo(t)||this._greaterThan(t)||this._greaterThanOrEqualTo(t)||this._blend(t)||null}},{key:"_and",value:function(t){if(t.isA(ji)){var e=[this._filter(t.a),this._filter(t.b)].filter(Boolean).reduce((function(t,e){return t.concat(e)}),[]);if(e.length)return 1===e.length?e[0]:{type:"and",left:e[0],right:e[1]}}}},{key:"_or",value:function(t){if(t.isA(nr)){var e=this._filter(t.a),n=this._filter(t.b);if(e&&n)return{type:"or",left:e,right:n}}}},{key:"_lessThan",value:function(t){return this._cmpOp(t,Xi,"lessThan")}},{key:"_lessThanOrEqualTo",value:function(t){return this._cmpOp(t,$i,"lessThanOrEqualTo")}},{key:"_greaterThan",value:function(t){return this._cmpOp(t,Wi,"greaterThan")}},{key:"_greaterThanOrEqualTo",value:function(t){return this._cmpOp(t,Ki,"greaterThanOrEqualTo")}},{key:"_equals",value:function(t){return this._cmpOp(t,Zi,"equals")}},{key:"_notEquals",value:function(t){return this._cmpOp(t,er,"notEquals")}},{key:"_cmpOp",value:function(t,e,n){if(t.isA(e)){var i=this._property(t.a)||this._value(t.a),r=this._property(t.b)||this._value(t.b);if(i&&r)return{type:n,left:i,right:r}}}},{key:"_blend",value:function(t){if(t.isA(ar)&&t.originalMix.isA(Si))return this._filter(t.b)}},{key:"_property",value:function(t){if(t.isA(wr))return{type:"property",property:t.name}}},{key:"_value",value:function(t){if(t.isA(to)||t.isA(Rr)||t.isA(mr))return{type:"value",value:t.value}}},{key:"_in",value:function(t){var e=this;if(t.isA(Ii)){var n=this._property(t.input),i=t.list.elems.map((function(t){return e._value(t)}));if(n&&i.length>0&&i.length===t.list.elems.length)return{type:"in",property:n.property,values:i.map((function(t){return t.value}))}}}},{key:"_notIn",value:function(t){var e=this;if(t.isA(Ri)){var n=this._property(t.input),i=t.list.elems.map((function(t){return e._value(t)}));if(n&&i.length>0&&i.length===t.list.elems.length)return{type:"notIn",property:n.property,values:i.map((function(t){return t.value}))}}}},{key:"_between",value:function(t){if(t.isA(Li)){var e=this._property(t.input),n=this._value(t.lowerLimit),i=this._value(t.upperLimit);if(e&&n&&i)return{type:"between",property:e.property,lower:n.value,upper:i.value}}}}]),t}();function Kc(t){return t.type?"(".concat(Qc[t.type](t),")"):Xc(t)}function Xc(t){return isFinite(t)?String(t):"'".concat(t.replace(/\'/g,"''"),"'")}function $c(t){return t.match(/^[a-z\d_]+$/)||(t='"'.concat(t.replace(/\"/g,'""'),'"')),t}function Yc(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.map((function(t){return Kc(t)})).join(t)}var Qc={and:function(t){return Yc(" AND ",t.left,t.right)},or:function(t){return Yc(" OR ",t.left,t.right)},between:function(t){return"".concat($c(t.property)," BETWEEN ").concat(Xc(t.lower)," AND ").concat(Xc(t.upper))},in:function(t){return"".concat($c(t.property)," IN (").concat(Yc.apply(void 0,[","].concat(c()(t.values))),")")},notIn:function(t){return"".concat($c(t.property)," NOT IN (").concat(Yc.apply(void 0,[","].concat(c()(t.values))),")")},equals:function(t){return Yc(" = ",t.left,t.right)},notEquals:function(t){return Yc(" <> ",t.left,t.right)},lessThan:function(t){return Yc(" < ",t.left,t.right)},lessThanOrEqualTo:function(t){return Yc(" <= ",t.left,t.right)},greaterThan:function(t){return Yc(" > ",t.left,t.right)},greaterThanOrEqualTo:function(t){return Yc(" >= ",t.left,t.right)},property:function(t){return $c(t.property)},value:function(t){return Xc(t.value)}};function Jc(t){return t&&t.aggregation}var th=n(17),eh=function(){function t(e,n){f()(this,t),this._conf=e,this._mapConfig=n,this._auth=this._encodeParameter("api_key",this._conf.apiKey),this._client=this._encodeParameter("client","vl-".concat(th.a))}return m()(t,[{key:"getLayerGroup",value:function(){var t=Jn()(Yn.a.mark((function t(){var e,n;return Yn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(this._makeHttpRequest());case 3:e=t.sent,t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(0),new qc("Failed to connect to Maps API with your user('".concat(this._conf.username,"')"));case 9:return t.next=11,e.json();case 11:return n=t.sent,e.ok||this._dealWithWindshaftErrors(e,n),t.abrupt("return",n);case 14:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(){return t.apply(this,arguments)}}()},{key:"_makeHttpRequest",value:function(){var t=[this._auth,this._client,this._encodeParameter("config",this._mapConfigPayload())],e=this._generateUrl(this._generateMapsApiUrl(),t);return e.length<2048?this._getRequest(e):this._postRequest()}},{key:"_dealWithWindshaftErrors",value:function(t,e){if(401===t.status)throw new qc("Unauthorized access to Maps API: invalid combination of user('".concat(this._conf.username,"') and apiKey('").concat(this._conf.apiKey,"')"),Gc.SECURITY);if(403===t.status)throw new qc("Unauthorized access to dataset: the provided apiKey('".concat(this._conf.apiKey,"') doesn't provide access to the requested data"),Gc.SECURITY);throw new qc("".concat(JSON.stringify(e.errors)),Gc.SQL)}},{key:"_mapConfigPayload",value:function(){return JSON.stringify(this._mapConfig)}},{key:"_getRequest",value:function(t){return new Request(t,{method:"GET",headers:{Accept:"application/json"}})}},{key:"_postRequest",value:function(){var t=[this._auth,this._client];return new Request(this._generateUrl(this._generateMapsApiUrl(),t),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:this._mapConfigPayload()})}},{key:"_encodeParameter",value:function(t,e){return"".concat(t,"=").concat(encodeURIComponent(e))}},{key:"_generateUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return"".concat(t,"?").concat(e.join("&"))}},{key:"_generateMapsApiUrl",value:function(t){var e="".concat(this._conf.serverURL,"/api/v1/map");return t&&(e+=t),e}}]),t}(),nh=function(){function t(e){f()(this,t),this._source=e,this._exclusive=!0,this._MNS=null,this._promiseMNS=null,this.inProgressInstantiations={}}return m()(t,[{key:"bindLayer",value:function(t){this._addDataframe=t,this._mvtClient.bindLayer(t)}},{key:"_getInstantiationID",value:function(t,e){var n=t.resolution,i=t.filtering;return JSON.stringify({MNS:bn.simplify(t.MNS),resolution:n,filtering:e.backendFilters?i:null,options:e})}},{key:"getMetadata",value:function(){var t=Jn()(Yn.a.mark((function t(e){var n;return Yn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this._getServerInfoFrom(e),!this._needToInstantiateMap(n)){t.next=6;break}return t.next=4,this._repeatableInstantiate(n);case 4:this._updateStateAfterInstantiating(t.sent);case 6:return t.abrupt("return",this.metadata);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_getServerInfoFrom",value:function(t){return{MNS:this._getMinNeededSchemaFrom(t),resolution:t.resolution.value,filtering:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Zc(e),i={preaggregation:new Wc(e).getFilter(t.filter),aggregation:n.getFilters(t.filter)};return i.preaggregation||i.aggregation?i:null}(t,{exclusive:this._exclusive})}}},{key:"_getMinNeededSchemaFrom",value:function(t){var e=t.getMinimumNeededSchema();return this._checkAcceptableMNS(e),this._forceIncludeCartodbId(e),e}},{key:"_forceIncludeCartodbId",value:function(t){t[Oc]||(t[Oc]=[{type:fn}])}},{key:"requiresNewMetadata",value:function(t){var e=this._getServerInfoFrom(t);return this._needToInstantiateMap(e)}},{key:"_checkAcceptableMNS",value:function(t){Object.keys(t).forEach((function(e){var n=t[e],i=n.some((function(t){return t.type===pn})),r=n.some((function(t){return t.type===fn}));if(i&&r){var o=JSON.stringify(n.filter((function(t){return"aggregated"!==t.type})));throw new Fe("Incompatible combination of cluster aggregation usages (".concat(o,") with unaggregated usage for property '").concat(e,"'"),Le.INCORRECT_VALUE)}}))}},{key:"getData",value:function(t,e){if(this._mvtClient)return this._mvtClient.requestData(t,e)}},{key:"_needToInstantiateMap",value:function(t){var e=t.resolution,n=t.filtering,i=bn.notEquals(this._MNS,t.MNS),r=this.resolution!==e,o=JSON.stringify(this.filtering)!==JSON.stringify(n);return i||r||o&&this.metadata&&this.metadata.featureCount>2e6}},{key:"_isInstantiated",value:function(){return!!this.metadata}},{key:"_instantiationChoices",value:function(t){var e={backendFilters:!0};return t&&t.featureCount>=0&&(e.backendFilters=t.featureCount>2e6||!t.backendFiltersApplied),e}},{key:"_instantiateUncached",value:function(){var t=Jn()(Yn.a.mark((function t(e){var n,i,r,o,a,s,u,l,c,h,d,p,f,g,m,y,_=arguments;return Yn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=_.length>1&&void 0!==_[1]?_[1]:{backendFilters:!0},i=_.length>2&&void 0!==_[2]?_[2]:null,r=e.MNS,o=e.resolution,a=e.filtering,t.next=5,this._generateAggregation(r,o);case 5:return s=t.sent,u=this._buildSelectClause(r),l=this._buildQuery(u),c="(".concat(l,") AS tmp"),d=!1,(h=n.backendFilters?a:null)&&this._requiresAggregation(r)&&(s.filters=Jc(h),s.filters&&(d=!0),this._exclusive||(h=null)),h&&(p=this._buildQuery(u,h),d=d||p!==l,l=p),f=this._getConfig(),t.next=16,this._getInstantiationPromise(c,f,s,l,u,i,r);case 16:return m=(g=t.sent).urlTemplates,(y=g.metadata).backendFiltersApplied=d,t.abrupt("return",{MNS:r,resolution:o,filtering:a,metadata:y,urlTemplates:m});case 21:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_updateStateAfterInstantiating",value:function(t){var e=t.MNS,n=t.resolution,i=t.filtering,r=t.metadata,o=t.urlTemplates;this._mvtClient&&this._mvtClient.free(),r.extent=2048,this._mvtClient=new Vc(o,r),this._mvtClient._workerName="windshaft",this._mvtClient.bindLayer(this._addDataframe),this.urlTemplates=o,this.metadata=r,this._MNS=e,this.filtering=i,this.resolution=n,this._checkLayerMeta(e)}},{key:"_instantiate",value:function(){var t=Jn()(Yn.a.mark((function t(e,n,i){var r,o;return Yn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this._getInstantiationID(e,n),!this.inProgressInstantiations[r]){t.next=3;break}return t.abrupt("return",this.inProgressInstantiations[r]);case 3:return o=this._instantiateUncached(e,n,i),this.inProgressInstantiations[r]=o,t.abrupt("return",o);case 6:case"end":return t.stop()}}),t,this)})));return function(e,n,i){return t.apply(this,arguments)}}()},{key:"_repeatableInstantiate",value:function(){var t=Jn()(Yn.a.mark((function t(e){var n,i,r=this;return Yn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null,i=this._instantiationChoices(this.metadata),t.abrupt("return",rh(i,(function(t){return n=t.metadata,r._instantiationChoices(t.metadata)}),(function(t){return r._instantiate(e,t,n)})));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_checkLayerMeta",value:function(t){if(!this._isAggregated()&&this._requiresAggregation(t))throw new qc("Aggregation not supported for this dataset",Gc.NOT_SUPPORTED)}},{key:"_isAggregated",value:function(){return this.metadata&&this.metadata.isAggregated}},{key:"_requiresAggregation",value:function(t){return Object.values(t).some((function(t){return t.some((function(t){return t.type===pn}))}))}},{key:"_generateAggregation",value:function(t,e){var n={columns:{},dimensions:{},placement:"centroid",resolution:e,threshold:1};return Object.keys(t).forEach((function(e){e!==Oc&&t[e].forEach((function(t){if("aggregated"===t.type)n.columns[bn.column.aggColumn(e,t.op)]={aggregate_function:t.op,aggregated_column:e};else if("dimension"===t.type){var i=t.dimension;n.dimensions[i.propertyName]={column:e,group:i.group,format:i.format}}else n.dimensions[e]={column:e}}))})),n}},{key:"_buildSelectClause",value:function(t){var e=Object.keys(t).concat(["the_geom_webmercator",Oc]);return e.filter((function(t,n){return e.indexOf(t)===n}))}},{key:"_buildQuery",value:function(t,e){var n=t.map((function(t){return'"'.concat(t,'"')})).join(),i=e?function(t){var e;return(t=t&&t.preaggregation)&&Object.keys(t).length>0&&(e=Kc(t)),e?"WHERE "+e:""}(e):"";return"SELECT ".concat(n," FROM ").concat(this._source._getFromClause()," ").concat(i)}},{key:"_getConfig",value:function(){return{apiKey:this._source._apiKey,username:this._source._username,serverURL:this._source._serverURL}}},{key:"free",value:function(){this._mvtClient&&this._mvtClient.free()}},{key:"_getInstantiationPromise",value:function(){var t=Jn()(Yn.a.mark((function t(e,n,i,r,o,a,s){var u,l;return Yn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=this._getMapConfigAgg(i,r),a||this._completeMapConfigWithColumns(u,o),t.next=4,this._getLayerGroupFromWindshaft(n,u);case 4:return t.abrupt("return",{urlTemplates:(l=t.sent).metadata.tilejson.vector.tiles,metadata:a||this._adaptMetadata(l.metadata.layers[0].meta,i,s)});case 6:case"end":return t.stop()}}),t,this)})));return function(e,n,i,r,o,a,s){return t.apply(this,arguments)}}()},{key:"_getMapConfigAgg",value:function(t,e){return{buffersize:{mvt:1},layers:[{type:"mapnik",options:{sql:e,aggregation:t,vector_extent:2048,vector_simplify_extent:2048,dates_as_numbers:!0}}]}}},{key:"_completeMapConfigWithColumns",value:function(t,e){var n=["the_geom","the_geom_webmercator"],i=e.filter((function(t){return!n.includes(t)}));t.layers[0].options.metadata={geometryType:!0,columnStats:{topCategories:32768,includeNulls:!0},dimensions:!0,sample:{num_rows:1e3,include_columns:i}}}},{key:"_getLayerGroupFromWindshaft",value:function(){var t=Jn()(Yn.a.mark((function t(e,n){var i;return Yn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new eh(e,n),t.abrupt("return",i.getLayerGroup());case 2:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"_adaptMetadata",value:function(t,e,n){t.datesAsNumbers=t.dates_as_numbers;var i=t.stats,r=t.aggregation,o=t.datesAsNumbers,a=i.hasOwnProperty("featureCount")?i.featureCount:i.estimatedFeatureCount,s=i.geometryType&&function(t){switch(t){case"ST_MultiPolygon":case"ST_Polygon":return"polygon";case"ST_Point":return"point";case"ST_MultiLineString":case"ST_LineString":return"line";default:throw new qc("Unimplemented geometry type '".concat(t,"'."),Gc.NOT_SUPPORTED)}}(i.geometryType),u=i.columns;return Object.keys(e.columns).forEach((function(t){var n=e.columns[t].aggregated_column,i=e.columns[t].aggregate_function;u[n].aggregations||(u[n].aggregations={}),u[n].aggregations[i]=t,n!==t&&(u[t]=JSON.parse(JSON.stringify(u[n])))})),Object.keys(e.dimensions).forEach((function(t){var r=e.dimensions[t];if(i.dimensions&&i.dimensions[t].type){var o=i.dimensions[t],a=ih(o.type),s=r.column,l=oc()(r,["column"]);if(u[s].dimension)throw new qc("Multiple dimensions based on same column '".concat(s,"'."),Gc.NOT_SUPPORTED);u[s].dimension={propertyName:t,grouping:0===Object.keys(l).length?void 0:o.params,type:a,min:o.min,max:o.max},n[s].some((function(t){return t.range}))>0&&(u[s].dimension.range=["start","end"].map((function(e){return"".concat(t,"_").concat(e)})))}})),Object.values(u).map((function(t){t.type=ih(t.type)})),Object.keys(u).forEach((function(t){var e=u[t];"category"===e.type&&e.categories?e.categories.forEach((function(t){t.name=t.category,delete t.category})):o&&o.includes(t)&&(e.type="date")})),"point"===s&&(u._cdb_feature_count={type:"number"}),new Hc({properties:u,featureCount:a,sample:i.sample,geomType:s,isAggregated:r.mvt,idProperty:Oc})}}]),t}();function ih(t){return"string"===t?"category":t}function rh(t,e,n){return oh.apply(this,arguments)}function oh(){return(oh=Jn()(Yn.a.mark((function t(e,n,i){var r,o;return Yn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i(e),t.next=3,r;case 3:if(o=n(t.sent),JSON.stringify(e)!==JSON.stringify(o)){t.next=9;break}return t.abrupt("return",r);case 9:return t.abrupt("return",i(o));case 10:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var ah=function(t){function e(){var t;return f()(this,e),(t=E()(this,T()(e).call(this)))._client=new nh(ur()(ur()(t))),t}return I()(e,t),m()(e,[{key:"initialize",value:function(t,e){this._initializeAuth(t),this._initializeConfig(e),this._initializeServerURL()}},{key:"_initializeAuth",value:function(t){this._auth=t||rn,cn(this._auth),this._apiKey=this._auth.apiKey,this._username=this._auth.username}},{key:"_initializeConfig",value:function(t){this._config=t||on,dn(this._config)}},{key:"_initializeServerURL",value:function(){var t=this._config&&this._config.serverURL||"https://{user}.carto.com";t=t.replace(/{user}/,this._username),this._serverURL=t}},{key:"bindLayer",value:function(t){this._client.bindLayer(t)}},{key:"requiresNewMetadata",value:function(t){return this._client.requiresNewMetadata(t)}},{key:"requestMetadata",value:function(t){return this._client.getMetadata(t)}},{key:"requestData",value:function(t,e){return this._client.getData(t,e)}},{key:"free",value:function(){this._client.free()}}]),e}(Vl),sh=function(t){function e(t,n,i){var r;return f()(this,e),(r=E()(this,T()(e).call(this)))._checkTableName(t),r._tableName=t,r.initialize(n,i),r}return I()(e,t),m()(e,[{key:"_getFromClause",value:function(){return this._tableName}},{key:"_clone",value:function(){return new e(this._tableName,this._auth,this._config)}},{key:"_checkTableName",value:function(t){if(an.isUndefined(t))throw new Fe("'tableName'",Le.MISSING_REQUIRED);if(!an.isString(t))throw new Fe("'tableName' property must be a string.",Le.INCORRECT_TYPE);if(""===t)throw new Fe("'tableName' property must be not empty.",Le.INCORRECT_VALUE)}}]),e}(ah),uh=function(){function t(e){f()(this,t),this._center=e}return m()(t,[{key:"computePoint",value:function(t){var e=an.projectToWebMercator({lat:t[1],lng:t[0]});return Fc(e.x,e.y,{scale:an.WM_R,center:this._center})}},{key:"computeLineString",value:function(t,e){for(var n=[],i=0;i<t.length;i++){var r=this.computePoint(t[e?t.length-i-1:i]);n.push(r.x,r.y)}return n}},{key:"computeMultiLineString",value:function(t){for(var e=[],n=0;n<t.length;n++){var i=this.computeLineString(t[n]);i.length>0&&e.push(i)}return e}},{key:"computePolygon",value:function(t){var e={flat:[],holes:[],clipped:[]},n=0,i=!1;if(t.length){i=this._isReversed(t[0]);var r=this.computeLineString(t[0],i);e.flat=e.flat.concat(r)}for(var o=1;o<t.length;o++){i!==this._isReversed(t[o])&&e.holes.push(n+=t[o-1].length);var a=this.computeLineString(t[o],i);e.flat=e.flat.concat(a)}return e}},{key:"computeMultiPolygon",value:function(t){for(var e=[],n=0;n<t.length;n++){var i=this.computePolygon(t[n]);i.flat.length>0&&e.push(i)}return e}},{key:"_isReversed",value:function(t){for(var e,n=0,i=t[0],r=0;r<t.length-1;r++)n+=((e=t[r+1])[1]-i[1])*(e[0]+i[0]),i=e;return n>=0}}]),t}(),lh=Object.freeze({POINT:"Point",LINE_STRING:"LineString",MULTI_LINE_STRING:"MultiLineString",POLYGON:"Polygon",MULTI_POLYGON:"MultiPolygon"});function ch(t){switch(t){case lh.POINT:return"point";case lh.LINE_STRING:case lh.MULTI_LINE_STRING:return"line";case lh.POLYGON:case lh.MULTI_POLYGON:return"polygon";default:return""}}var hh=function(t){function e(t,n){var i;f()(this,e),i=E()(this,T()(e).call(this,t,n));var r=t.stats(n).min;return i._min_date=Je(r),i._min_ms=i._min_date.getTime(),i}return I()(e,t),m()(e,[{key:"sourceToInternal",value:function(t,e){return Je(e).getTime()-this._min_ms}},{key:"internalToExternal",value:function(t,e){var n=e;return tn(n+=this._min_ms)}},{key:"externalToSource",value:function(t,e){return e.getTime()}},{key:"sourceToExternal",value:function(t,e){return Je(e)}},{key:"inlineInternalMatch",value:function(t,e){var n=e._min_ms-this._min_ms;return"(".concat(t,"-").concat(n.toFixed(20),")")}}]),e}(Hr),dh=function(t){function e(){return f()(this,e),E()(this,T()(e).apply(this,arguments))}return I()(e,t),m()(e,[{key:"setCodecs",value:function(){var t=this;Object.keys(this.properties).forEach((function(e){var n=t.properties[e],i=n.type;"geometry"!==i&&(n.codec=function(t,e,n){switch(e){case"number":return new Ec(t,n);case"category":return new Tc(t,n);case"date":return new hh(t,n);default:throw new wn("Feature property value of type '".concat(e,"' cannot be decoded."),Cn.NOT_SUPPORTED)}}(t,i,e))}))}}]),e}(kc),ph=function(){function t(e,n){f()(this,t),this._providedDateColumns=e,this._boundColumns=n,this._numFields=new Set,this._catFields=new Set,this._dateFields=new Set,this._properties={}}return m()(t,[{key:"buildFrom",value:function(t,e){this._addNumericColumnField(Oc);for(var n=[],i=this._requiredColumnsIn(t),r=0;r<e.length;r++){var o=e[r].properties;this._addPropertiesToMetadata(o,i),this._sampleFeatureOnMetadata(o,n,e.length)}this._calculateAvgForNumericFields();var a=new dh({properties:this._properties,featureCount:e.length,sample:n,geomType:this._dataframeGeomTypeFrom(e),idProperty:Oc});return a.setCodecs(),a}},{key:"getCurrentFields",value:function(){return c()(this._numFields).concat(c()(this._catFields)).concat(c()(this._dateFields))}},{key:"_requiredColumnsIn",value:function(t){return new Set(Object.keys(bn.simplify(t.getMinimumNeededSchema())))}},{key:"_addPropertiesToMetadata",value:function(t,e){for(var n=Object.keys(t),i=0,r=n.length;i<r;i++){var o=n[i];e.has(o)&&!this._boundColumns.has(o)&&this._addPropertyToMetadata(o,t[o])}}},{key:"_calculateAvgForNumericFields",value:function(){var t=this;this._numFields.forEach((function(e){var n=t._properties[e];n.avg=n.sum/n.count}))}},{key:"_dataframeGeomTypeFrom",value:function(t){var e="";return t.length>0&&(e=ch(t[0].geometry.type)),e}},{key:"_sampleFeatureOnMetadata",value:function(t,e,n){if(n>1e3){var i=1e3/n;if(Math.random()>i)return}e.push(t)}},{key:"_addNumericPropertyToMetadata",value:function(t,e){if(this._catFields.has(t)||this._dateFields.has(t))throw new Fe("Unsupported GeoJSON: the property '".concat(t,"' has different types in different features."),Le.INCORRECT_TYPE);this._addNumericColumnField(t);var n=this._properties[t];n.min=Math.min(n.min,e),n.max=Math.max(n.max,e),n.sum+=e}},{key:"_addNumericColumnField",value:function(t){this._numFields.has(t)||(this._numFields.add(t),this._properties[t]={type:"number",min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,avg:Number.NaN,sum:0,count:0})}},{key:"_addDatePropertyToMetadata",value:function(t,e){if(this._catFields.has(t)||this._numFields.has(t))throw new wn("Unsupported GeoJSON: the property '".concat(t,"' has different types in different features."),Cn.NOT_SUPPORTED);this._addDateColumnField(t);var n=this._properties[t],i=an.castDate(e);n.min=n.min?an.castDate(Math.min(n.min,i)):i,n.max=n.max?an.castDate(Math.max(n.max,i)):i,n.sum+=e,n.count++}},{key:"_addDateColumnField",value:function(t){this._dateFields.has(t)||(this._dateFields.add(t),this._properties[t]={type:"date",min:null,max:null,avg:null,sum:0,count:0})}},{key:"_addPropertyToMetadata",value:function(t,e){return this._providedDateColumns.has(t)?this._addDatePropertyToMetadata(t,e):Number.isFinite(e)?this._addNumericPropertyToMetadata(t,e):void(null!==e&&this._addCategoryPropertyToMetadata(t,e))}},{key:"_addCategoryPropertyToMetadata",value:function(t,e){if(this._numFields.has(t)||this._dateFields.has(t))throw new wn("Unsupported GeoJSON: the property '".concat(t,"' has different types in different features."),Cn.NOT_SUPPORTED);this._catFields.has(t)||(this._catFields.add(t),this._properties[t]={type:"category",categories:[]});var n=this._properties[t],i=n.categories.find((function(t){return t.name===e}));i?i.frequency++:n.categories.push({name:e,frequency:1})}}]),t}(),fh=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f()(this,e),(n=E()(this,T()(e).call(this)))._initializeData(t),n._initializeMetadataHelpers(i),n}return I()(e,t),m()(e,[{key:"_initializeData",value:function(t){this._checkData(t),this._data=t,this._features=this._featuresFromData(),this._geomType=this._getGeomType(),this._webMercatorCenter=this._getWebMercatorCoordsCenter(),this._geometryTransformer=new uh(this._webMercatorCenter)}},{key:"_initializeMetadataHelpers",value:function(t){this._providedDateColumns=new Set(t.dateColumns),this._boundColumns=new Set,this._metadataBuilder=new ph(this._providedDateColumns,this._boundColumns)}},{key:"_checkData",value:function(t){if(an.isUndefined(t))throw new Fe("'data'",Le.MISSING_REQUIRED);if(!an.isObject(t))throw new Fe("'data' property must be an object.",Le.INCORRECT_TYPE)}},{key:"_featuresFromData",value:function(){var t,e=this._data.type;if("FeatureCollection"===e)t=this._data.features;else{if("Feature"!==e)throw new Fe("'data' property must be a GeoJSON object.",Le.INCORRECT_VALUE);t=[this._data]}return this._initializePropertiesIn(t),t}},{key:"_getGeomType",value:function(){return this._features[0].geometry.type}},{key:"_getWebMercatorCoordsCenter",value:function(){var t=this,e=0,n=0,i=0;return this._fetchFeatureGeometry({sample:10},(function(r,o){var a=t._samplePoint(o),s=an.projectToWebMercator({lng:a[0],lat:a[1]});e+=s.x,n+=s.y,i+=1})),i>1&&(e/=i,n/=i),{x:e,y:n}}},{key:"_getDataframeCenter",value:function(){var t=this._webMercatorCenter;return Fc(t.x,t.y,{scale:an.WM_R,center:{x:0,y:0}})}},{key:"bindLayer",value:function(t){this._addDataframe=t}},{key:"requestMetadata",value:function(t){return Promise.resolve(this._computeMetadata(t))}},{key:"requestData",value:function(){var t=this;if(this._dataframe){var e=this._decodeUnboundProperties();this._dataframe.addProperties();var n=Object.keys(e);return n.forEach((function(e){t._boundColumns.add(e)})),Promise.resolve(n.length>0)}return this._dataframe=this._createNewDataframe(),Promise.resolve(!0)}},{key:"_createNewDataframe",value:function(){var t=new Mc({active:!0,center:this._getDataframeCenter(),geom:this._decodeGeometry(),properties:this._decodeUnboundProperties(),scale:1,size:this._features.length,type:ch(this._geomType),metadata:this._metadata});return this._boundColumns=new Set(Object.keys(t.properties)),this._addDataframe&&this._addDataframe(t),t}},{key:"requiresNewMetadata",value:function(){return!1}},{key:"_clone",value:function(){return new e(this._data,{dateColumns:Array.from(this._providedDateColumns)})}},{key:"_initializePropertiesIn",value:function(t){for(var e=0;e<t.length;e++)t[e].properties=t[e].properties||{}}},{key:"_computeMetadata",value:function(t){return this._metadata=this._metadataBuilder.buildFrom(t,this._features),this._metadata}},{key:"_decodeUnboundProperties",value:function(){for(var t=this,e=this._getUnboundProperties(),n=Object.keys(e),i=function(i){var r=t._features[i];n.forEach((function(n){n!==Oc||Number.isFinite(r.properties[Oc])||(r.properties[Oc]=-i),e[n][i]=t._metadata.codec(n).sourceToInternal(t._metadata,r.properties[n])}))},r=0;r<this._features.length;r++)i(r);return e}},{key:"_getUnboundProperties",value:function(){var t=this,e={};return this._metadataBuilder.getCurrentFields().forEach((function(n){t._boundColumns.has(n)||(e[n]=new Float32Array(t._features.length+1024))})),e}},{key:"_fetchFeatureGeometry",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=this._features.length,i=t.sample?Math.max(1,Math.floor(n/t.sample)):1,r=0;r<n;r+=i){var o=this._features[r];"Feature"===o.type&&e(r,o.geometry)}return null}},{key:"_allocGeometry",value:function(){return"Point"===this._geomType?new Float32Array(6*this._features.length):[]}},{key:"_decodeGeometry",value:function(){var t=this,e=this._allocGeometry();return this._fetchFeatureGeometry({},(function(n,i){var r=i.type,o=i.coordinates,a=ch(r),s=ch(t._geomType);if(a!==s)throw new Fe("multiple geometry types not supported: found '".concat(a,"' instead of '").concat(s,"'."),Le.INCORRECT_TYPE);if(r===lh.POINT){var u=t._geometryTransformer.computePoint(o);e[6*n+0]=u.x,e[6*n+1]=u.y,e[6*n+2]=u.x,e[6*n+3]=u.y,e[6*n+4]=u.x,e[6*n+5]=u.y}else if(r===lh.LINE_STRING){var l=t._geometryTransformer.computeLineString(o);e.push([l])}else if(r===lh.MULTI_LINE_STRING){var c=t._geometryTransformer.computeMultiLineString(o);e.push(c)}else if(r===lh.POLYGON){var h=t._geometryTransformer.computePolygon(o);e.push([h])}else if(r===lh.MULTI_POLYGON){var d=t._geometryTransformer.computeMultiPolygon(o);e.push(d)}})),e}},{key:"_samplePoint",value:function(t){var e=t.type,n=t.coordinates;return e===lh.POINT?n:e===lh.LINE_STRING?n[0]:e===lh.MULTI_LINE_STRING||e===lh.POLYGON?n[0][0]:e===lh.MULTI_POLYGON?n[0][0][0]:void 0}},{key:"free",value:function(){}}]),e}(Vl),gh=function(t){function e(t,n,i){var r;return f()(this,e),(r=E()(this,T()(e).call(this)))._checkQuery(t),r._query=t,r.initialize(n,i),r}return I()(e,t),m()(e,[{key:"_getFromClause",value:function(){return"(".concat(this._query,") as _cdb_query_wrapper")}},{key:"_clone",value:function(){return new e(this._query,this._auth,this._config)}},{key:"_checkQuery",value:function(t){if(an.isUndefined(t))throw new Fe("'query'",Le.MISSING_REQUIRED);if(!an.isString(t))throw new Fe("'query' property must be a string.",Le.INCORRECT_TYPE);if(""===t)throw new Fe("'query' property must be not empty.",Le.INCORRECT_VALUE);if(!t.match(/\bSELECT\b/i))throw new Fe("'query' property must be a SQL query.",Le.INCORRECT_VALUE)}}]),e}(ah),mh=[];function yh(t,e,n){var i=[];if("loaded"===t){var r=new Set(e);e.forEach((function(t){var e=function(){r.delete(t),0===r.size&&n()};t.on("loaded",e),i.push(e)}))}else{if("updated"!==t)throw new Fe("Event name '".concat(t,"' is not supported by \"carto.on\". Supported event names are: 'loaded' and 'updated'."),Le.INCORRECT_VALUE);var o=!1;e.forEach((function(t){var e=function(){o||window.requestAnimationFrame((function(){o=!1,n()}))};t.on("updated",e),i.push(e)}))}mh.push({eventName:t,layerList:e,callback:n,internalCallbacks:i})}function _h(t,e,n){mh.forEach((function(i){i.eventName===t&&i.layerList.every((function(t){return e.includes(t)}))&&i.callback===n&&i.layerList.forEach((function(e){i.internalCallbacks.forEach((function(n){e.off(t,n)}))}))})),mh=mh.filter((function(i){return!(i.eventName===t&&i.layerList.every((function(t){return e.includes(t)}))&&i.callback===n)}))}var vh="https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json",bh="https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",xh="https://basemaps.cartocdn.com/gl/positron-gl-style/style.json";n.d(e,"source",(function(){return wh})),n.d(e,"version",(function(){return th.a})),n.d(e,"on",(function(){return yh})),n.d(e,"off",(function(){return _h})),n.d(e,"isBrowserSupported",(function(){return Zl})),n.d(e,"unsupportedBrowserReasons",(function(){return Wl})),n.d(e,"setDefaultAuth",(function(){return ln})),n.d(e,"setDefaultConfig",(function(){return hn})),n.d(e,"expressions",(function(){return s})),n.d(e,"Layer",(function(){return tc})),n.d(e,"Viz",(function(){return zl})),n.d(e,"Interactivity",(function(){return nc})),n.d(e,"basemaps",(function(){return u}));var wh={Dataset:sh,SQL:gh,GeoJSON:fh,MVT:Vc};e.default={version:th.a,on:yh,off:_h,setDefaultAuth:ln,setDefaultConfig:hn,source:wh,expressions:s,Layer:tc,Viz:zl,Interactivity:nc,basemaps:u}}])},"hN/g":function(t,e,n){"use strict";n.r(e),n("pDpN")},pDpN:function(t,e,n){var i,r;void 0===(r="function"==typeof(i=function(){"use strict";!function(t){const e=t.performance;function n(t){e&&e.mark&&e.mark(t)}function i(t,n){e&&e.measure&&e.measure(t,n)}n("Zone");const r=t.__Zone_symbol_prefix||"__zone_symbol__";function o(t){return r+t}const a=!0===t[o("forceDuplicateZoneCheck")];if(t.Zone){if(a||"function"!=typeof t.Zone.__symbol__)throw new Error("Zone already loaded.");return t.Zone}class s{constructor(t,e){this._parent=t,this._name=e?e.name||"unnamed":"<root>",this._properties=e&&e.properties||{},this._zoneDelegate=new l(this,this._parent&&this._parent._zoneDelegate,e)}static assertZonePatched(){if(t.Promise!==S.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let t=s.current;for(;t.parent;)t=t.parent;return t}static get current(){return A.zone}static get currentTask(){return I}static __load_patch(e,r){if(S.hasOwnProperty(e)){if(a)throw Error("Already loaded patch: "+e)}else if(!t["__Zone_disable_"+e]){const o="Zone:"+e;n(o),S[e]=r(t,s,T),i(o,o)}}get parent(){return this._parent}get name(){return this._name}get(t){const e=this.getZoneWith(t);if(e)return e._properties[t]}getZoneWith(t){let e=this;for(;e;){if(e._properties.hasOwnProperty(t))return e;e=e._parent}return null}fork(t){if(!t)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,t)}wrap(t,e){if("function"!=typeof t)throw new Error("Expecting function got: "+t);const n=this._zoneDelegate.intercept(this,t,e),i=this;return function(){return i.runGuarded(n,this,arguments,e)}}run(t,e,n,i){A={parent:A,zone:this};try{return this._zoneDelegate.invoke(this,t,e,n,i)}finally{A=A.parent}}runGuarded(t,e=null,n,i){A={parent:A,zone:this};try{try{return this._zoneDelegate.invoke(this,t,e,n,i)}catch(r){if(this._zoneDelegate.handleError(this,r))throw r}}finally{A=A.parent}}runTask(t,e,n){if(t.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(t.zone||v).name+"; Execution: "+this.name+")");if(t.state===b&&(t.type===E||t.type===k))return;const i=t.state!=C;i&&t._transitionTo(C,w),t.runCount++;const r=I;I=t,A={parent:A,zone:this};try{t.type==k&&t.data&&!t.data.isPeriodic&&(t.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,t,e,n)}catch(o){if(this._zoneDelegate.handleError(this,o))throw o}}finally{t.state!==b&&t.state!==M&&(t.type==E||t.data&&t.data.isPeriodic?i&&t._transitionTo(w,C):(t.runCount=0,this._updateTaskCount(t,-1),i&&t._transitionTo(b,C,b))),A=A.parent,I=r}}scheduleTask(t){if(t.zone&&t.zone!==this){let e=this;for(;e;){if(e===t.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${t.zone.name}`);e=e.parent}}t._transitionTo(x,b);const e=[];t._zoneDelegates=e,t._zone=this;try{t=this._zoneDelegate.scheduleTask(this,t)}catch(n){throw t._transitionTo(M,x,b),this._zoneDelegate.handleError(this,n),n}return t._zoneDelegates===e&&this._updateTaskCount(t,1),t.state==x&&t._transitionTo(w,x),t}scheduleMicroTask(t,e,n,i){return this.scheduleTask(new c(O,t,e,n,i,void 0))}scheduleMacroTask(t,e,n,i,r){return this.scheduleTask(new c(k,t,e,n,i,r))}scheduleEventTask(t,e,n,i,r){return this.scheduleTask(new c(E,t,e,n,i,r))}cancelTask(t){if(t.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(t.zone||v).name+"; Execution: "+this.name+")");t._transitionTo(P,w,C);try{this._zoneDelegate.cancelTask(this,t)}catch(e){throw t._transitionTo(M,P),this._zoneDelegate.handleError(this,e),e}return this._updateTaskCount(t,-1),t._transitionTo(b,P),t.runCount=0,t}_updateTaskCount(t,e){const n=t._zoneDelegates;-1==e&&(t._zoneDelegates=null);for(let i=0;i<n.length;i++)n[i]._updateTaskCount(t.type,e)}}s.__symbol__=o;const u={name:"",onHasTask:(t,e,n,i)=>t.hasTask(n,i),onScheduleTask:(t,e,n,i)=>t.scheduleTask(n,i),onInvokeTask:(t,e,n,i,r,o)=>t.invokeTask(n,i,r,o),onCancelTask:(t,e,n,i)=>t.cancelTask(n,i)};class l{constructor(t,e,n){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=t,this._parentDelegate=e,this._forkZS=n&&(n&&n.onFork?n:e._forkZS),this._forkDlgt=n&&(n.onFork?e:e._forkDlgt),this._forkCurrZone=n&&(n.onFork?this.zone:e._forkCurrZone),this._interceptZS=n&&(n.onIntercept?n:e._interceptZS),this._interceptDlgt=n&&(n.onIntercept?e:e._interceptDlgt),this._interceptCurrZone=n&&(n.onIntercept?this.zone:e._interceptCurrZone),this._invokeZS=n&&(n.onInvoke?n:e._invokeZS),this._invokeDlgt=n&&(n.onInvoke?e:e._invokeDlgt),this._invokeCurrZone=n&&(n.onInvoke?this.zone:e._invokeCurrZone),this._handleErrorZS=n&&(n.onHandleError?n:e._handleErrorZS),this._handleErrorDlgt=n&&(n.onHandleError?e:e._handleErrorDlgt),this._handleErrorCurrZone=n&&(n.onHandleError?this.zone:e._handleErrorCurrZone),this._scheduleTaskZS=n&&(n.onScheduleTask?n:e._scheduleTaskZS),this._scheduleTaskDlgt=n&&(n.onScheduleTask?e:e._scheduleTaskDlgt),this._scheduleTaskCurrZone=n&&(n.onScheduleTask?this.zone:e._scheduleTaskCurrZone),this._invokeTaskZS=n&&(n.onInvokeTask?n:e._invokeTaskZS),this._invokeTaskDlgt=n&&(n.onInvokeTask?e:e._invokeTaskDlgt),this._invokeTaskCurrZone=n&&(n.onInvokeTask?this.zone:e._invokeTaskCurrZone),this._cancelTaskZS=n&&(n.onCancelTask?n:e._cancelTaskZS),this._cancelTaskDlgt=n&&(n.onCancelTask?e:e._cancelTaskDlgt),this._cancelTaskCurrZone=n&&(n.onCancelTask?this.zone:e._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const i=n&&n.onHasTask;(i||e&&e._hasTaskZS)&&(this._hasTaskZS=i?n:u,this._hasTaskDlgt=e,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=t,n.onScheduleTask||(this._scheduleTaskZS=u,this._scheduleTaskDlgt=e,this._scheduleTaskCurrZone=this.zone),n.onInvokeTask||(this._invokeTaskZS=u,this._invokeTaskDlgt=e,this._invokeTaskCurrZone=this.zone),n.onCancelTask||(this._cancelTaskZS=u,this._cancelTaskDlgt=e,this._cancelTaskCurrZone=this.zone))}fork(t,e){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,t,e):new s(t,e)}intercept(t,e,n){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,t,e,n):e}invoke(t,e,n,i,r){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,t,e,n,i,r):e.apply(n,i)}handleError(t,e){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,t,e)}scheduleTask(t,e){let n=e;if(this._scheduleTaskZS)this._hasTaskZS&&n._zoneDelegates.push(this._hasTaskDlgtOwner),n=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,t,e),n||(n=e);else if(e.scheduleFn)e.scheduleFn(e);else{if(e.type!=O)throw new Error("Task is missing scheduleFn.");y(e)}return n}invokeTask(t,e,n,i){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,t,e,n,i):e.callback.apply(n,i)}cancelTask(t,e){let n;if(this._cancelTaskZS)n=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,t,e);else{if(!e.cancelFn)throw Error("Task is not cancelable");n=e.cancelFn(e)}return n}hasTask(t,e){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,t,e)}catch(n){this.handleError(t,n)}}_updateTaskCount(t,e){const n=this._taskCounts,i=n[t],r=n[t]=i+e;if(r<0)throw new Error("More tasks executed then were scheduled.");0!=i&&0!=r||this.hasTask(this.zone,{microTask:n.microTask>0,macroTask:n.macroTask>0,eventTask:n.eventTask>0,change:t})}}class c{constructor(e,n,i,r,o,a){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=e,this.source=n,this.data=r,this.scheduleFn=o,this.cancelFn=a,!i)throw new Error("callback is not defined");this.callback=i;const s=this;this.invoke=e===E&&r&&r.useG?c.invokeTask:function(){return c.invokeTask.call(t,s,this,arguments)}}static invokeTask(t,e,n){t||(t=this),D++;try{return t.runCount++,t.zone.runTask(t,e,n)}finally{1==D&&_(),D--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(b,x)}_transitionTo(t,e,n){if(this._state!==e&&this._state!==n)throw new Error(`${this.type} '${this.source}': can not transition to '${t}', expecting state '${e}'${n?" or '"+n+"'":""}, was '${this._state}'.`);this._state=t,t==b&&(this._zoneDelegates=null)}toString(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const h=o("setTimeout"),d=o("Promise"),p=o("then");let f,g=[],m=!1;function y(e){if(0===D&&0===g.length)if(f||t[d]&&(f=t[d].resolve(0)),f){let t=f[p];t||(t=f.then),t.call(f,_)}else t[h](_,0);e&&g.push(e)}function _(){if(!m){for(m=!0;g.length;){const e=g;g=[];for(let n=0;n<e.length;n++){const i=e[n];try{i.zone.runTask(i,null,null)}catch(t){T.onUnhandledError(t)}}}T.microtaskDrainDone(),m=!1}}const v={name:"NO ZONE"},b="notScheduled",x="scheduling",w="scheduled",C="running",P="canceling",M="unknown",O="microTask",k="macroTask",E="eventTask",S={},T={symbol:o,currentZoneFrame:()=>A,onUnhandledError:R,microtaskDrainDone:R,scheduleMicroTask:y,showUncaughtError:()=>!s[o("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:R,patchMethod:()=>R,bindArguments:()=>[],patchThen:()=>R,patchMacroTask:()=>R,setNativePromise:t=>{t&&"function"==typeof t.resolve&&(f=t.resolve(0))},patchEventPrototype:()=>R,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>R,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>R,wrapWithCurrentZone:()=>R,filterProperties:()=>[],attachOriginToPatched:()=>R,_redefineProperty:()=>R,patchCallbacks:()=>R};let A={parent:null,zone:new s(null,null)},I=null,D=0;function R(){}i("Zone","Zone"),t.Zone=s}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||global),Zone.__load_patch("ZoneAwarePromise",(t,e,n)=>{const i=Object.getOwnPropertyDescriptor,r=Object.defineProperty,o=n.symbol,a=[],s=o("Promise"),u=o("then");n.onUnhandledError=t=>{if(n.showUncaughtError()){const e=t&&t.rejection;e?console.error("Unhandled Promise rejection:",e instanceof Error?e.message:e,"; Zone:",t.zone.name,"; Task:",t.task&&t.task.source,"; Value:",e,e instanceof Error?e.stack:void 0):console.error(t)}},n.microtaskDrainDone=()=>{for(;a.length;)for(;a.length;){const e=a.shift();try{e.zone.runGuarded(()=>{throw e})}catch(t){c(t)}}};const l=o("unhandledPromiseRejectionHandler");function c(t){n.onUnhandledError(t);try{const n=e[l];n&&"function"==typeof n&&n.call(this,t)}catch(i){}}function h(t){return t&&t.then}function d(t){return t}function p(t){return M.reject(t)}const f=o("state"),g=o("value"),m=o("finally"),y=o("parentPromiseValue"),_=o("parentPromiseState");function v(t,e){return n=>{try{x(t,e,n)}catch(i){x(t,!1,i)}}}const b=o("currentTaskTrace");function x(t,i,o){const s=function(){let t=!1;return function(e){return function(){t||(t=!0,e.apply(null,arguments))}}}();if(t===o)throw new TypeError("Promise resolved with itself");if(null===t[f]){let c=null;try{"object"!=typeof o&&"function"!=typeof o||(c=o&&o.then)}catch(l){return s(()=>{x(t,!1,l)})(),t}if(!1!==i&&o instanceof M&&o.hasOwnProperty(f)&&o.hasOwnProperty(g)&&null!==o[f])C(o),x(t,o[f],o[g]);else if(!1!==i&&"function"==typeof c)try{c.call(o,s(v(t,i)),s(v(t,!1)))}catch(l){s(()=>{x(t,!1,l)})()}else{t[f]=i;const s=t[g];if(t[g]=o,t[m]===m&&!0===i&&(t[f]=t[_],t[g]=t[y]),!1===i&&o instanceof Error){const t=e.currentTask&&e.currentTask.data&&e.currentTask.data.__creationTrace__;t&&r(o,b,{configurable:!0,enumerable:!1,writable:!0,value:t})}for(let e=0;e<s.length;)P(t,s[e++],s[e++],s[e++],s[e++]);if(0==s.length&&0==i){t[f]=0;try{throw new Error("Uncaught (in promise): "+((u=o)&&u.toString===Object.prototype.toString?(u.constructor&&u.constructor.name||"")+": "+JSON.stringify(u):u?u.toString():Object.prototype.toString.call(u))+(o&&o.stack?"\n"+o.stack:""))}catch(l){const i=l;i.rejection=o,i.promise=t,i.zone=e.current,i.task=e.currentTask,a.push(i),n.scheduleMicroTask()}}}}var u;return t}const w=o("rejectionHandledHandler");function C(t){if(0===t[f]){try{const n=e[w];n&&"function"==typeof n&&n.call(this,{rejection:t[g],promise:t})}catch(n){}t[f]=!1;for(let e=0;e<a.length;e++)t===a[e].promise&&a.splice(e,1)}}function P(t,e,n,i,r){C(t);const o=t[f],a=o?"function"==typeof i?i:d:"function"==typeof r?r:p;e.scheduleMicroTask("Promise.then",()=>{try{const i=t[g],r=!!n&&m===n[m];r&&(n[y]=i,n[_]=o);const s=e.run(a,void 0,r&&a!==p&&a!==d?[]:[i]);x(n,!0,s)}catch(i){x(n,!1,i)}},n)}class M{constructor(t){const e=this;if(!(e instanceof M))throw new Error("Must be an instanceof Promise.");e[f]=null,e[g]=[];try{t&&t(v(e,!0),v(e,!1))}catch(n){x(e,!1,n)}}static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(t){return x(new this(null),!0,t)}static reject(t){return x(new this(null),!1,t)}static race(t){let e,n,i=new this((t,i)=>{e=t,n=i});function r(t){e(t)}function o(t){n(t)}for(let a of t)h(a)||(a=this.resolve(a)),a.then(r,o);return i}static all(t){return M.allWithCallback(t)}static allSettled(t){return(this&&this.prototype instanceof M?this:M).allWithCallback(t,{thenCallback:t=>({status:"fulfilled",value:t}),errorCallback:t=>({status:"rejected",reason:t})})}static allWithCallback(t,e){let n,i,r=new this((t,e)=>{n=t,i=e}),o=2,a=0;const s=[];for(let l of t){h(l)||(l=this.resolve(l));const t=a;try{l.then(i=>{s[t]=e?e.thenCallback(i):i,o--,0===o&&n(s)},r=>{e?(s[t]=e.errorCallback(r),o--,0===o&&n(s)):i(r)})}catch(u){i(u)}o++,a++}return o-=2,0===o&&n(s),r}get[Symbol.toStringTag](){return"Promise"}then(t,n){const i=new this.constructor(null),r=e.current;return null==this[f]?this[g].push(r,i,t,n):P(this,r,i,t,n),i}catch(t){return this.then(null,t)}finally(t){const n=new this.constructor(null);n[m]=m;const i=e.current;return null==this[f]?this[g].push(i,n,t,t):P(this,i,n,t,t),n}}M.resolve=M.resolve,M.reject=M.reject,M.race=M.race,M.all=M.all;const O=t[s]=t.Promise,k=e.__symbol__("ZoneAwarePromise");let E=i(t,"Promise");E&&!E.configurable||(E&&delete E.writable,E&&delete E.value,E||(E={configurable:!0,enumerable:!0}),E.get=function(){return t[k]?t[k]:t[s]},E.set=function(e){e===M?t[k]=e:(t[s]=e,e.prototype[u]||T(e),n.setNativePromise(e))},r(t,"Promise",E)),t.Promise=M;const S=o("thenPatched");function T(t){const e=t.prototype,n=i(e,"then");if(n&&(!1===n.writable||!n.configurable))return;const r=e.then;e[u]=r,t.prototype.then=function(t,e){return new M((t,e)=>{r.call(this,t,e)}).then(t,e)},t[S]=!0}if(n.patchThen=T,O){T(O);const e=t.fetch;"function"==typeof e&&(t[n.symbol("fetch")]=e,t.fetch=(A=e,function(){let t=A.apply(this,arguments);if(t instanceof M)return t;let e=t.constructor;return e[S]||T(e),t}))}var A;return Promise[e.__symbol__("uncaughtPromiseErrors")]=a,M});const t=Object.getOwnPropertyDescriptor,e=Object.defineProperty,n=Object.getPrototypeOf,i=Object.create,r=Array.prototype.slice,o=Zone.__symbol__("addEventListener"),a=Zone.__symbol__("removeEventListener"),s=Zone.__symbol__("");function u(t,e){return Zone.current.wrap(t,e)}function l(t,e,n,i,r){return Zone.current.scheduleMacroTask(t,e,n,i,r)}const c=Zone.__symbol__,h="undefined"!=typeof window,d=h?window:void 0,p=h&&d||"object"==typeof self&&self||global,f=[null];function g(t,e){for(let n=t.length-1;n>=0;n--)"function"==typeof t[n]&&(t[n]=u(t[n],e+"_"+n));return t}function m(t){return!t||!1!==t.writable&&!("function"==typeof t.get&&void 0===t.set)}const y="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,_=!("nw"in p)&&void 0!==p.process&&"[object process]"==={}.toString.call(p.process),v=!_&&!y&&!(!h||!d.HTMLElement),b=void 0!==p.process&&"[object process]"==={}.toString.call(p.process)&&!y&&!(!h||!d.HTMLElement),x={},w=function(t){if(!(t=t||p.event))return;let e=x[t.type];e||(e=x[t.type]=c("ON_PROPERTY"+t.type));const n=this||t.target||p,i=n[e];let r;if(v&&n===d&&"error"===t.type){const e=t;r=i&&i.call(this,e.message,e.filename,e.lineno,e.colno,e.error),!0===r&&t.preventDefault()}else r=i&&i.apply(this,arguments),null==r||r||t.preventDefault();return r};function C(n,i,r){let o=t(n,i);if(!o&&r&&t(r,i)&&(o={enumerable:!0,configurable:!0}),!o||!o.configurable)return;const a=c("on"+i+"patched");if(n.hasOwnProperty(a)&&n[a])return;delete o.writable,delete o.value;const s=o.get,u=o.set,l=i.substr(2);let h=x[l];h||(h=x[l]=c("ON_PROPERTY"+l)),o.set=function(t){let e=this;e||n!==p||(e=p),e&&(e[h]&&e.removeEventListener(l,w),u&&u.apply(e,f),"function"==typeof t?(e[h]=t,e.addEventListener(l,w,!1)):e[h]=null)},o.get=function(){let t=this;if(t||n!==p||(t=p),!t)return null;const e=t[h];if(e)return e;if(s){let e=s&&s.call(this);if(e)return o.set.call(this,e),"function"==typeof t.removeAttribute&&t.removeAttribute(i),e}return null},e(n,i,o),n[a]=!0}function P(t,e,n){if(e)for(let i=0;i<e.length;i++)C(t,"on"+e[i],n);else{const e=[];for(const n in t)"on"==n.substr(0,2)&&e.push(n);for(let i=0;i<e.length;i++)C(t,e[i],n)}}const M=c("originalInstance");function O(t){const n=p[t];if(!n)return;p[c(t)]=n,p[t]=function(){const e=g(arguments,t);switch(e.length){case 0:this[M]=new n;break;case 1:this[M]=new n(e[0]);break;case 2:this[M]=new n(e[0],e[1]);break;case 3:this[M]=new n(e[0],e[1],e[2]);break;case 4:this[M]=new n(e[0],e[1],e[2],e[3]);break;default:throw new Error("Arg list too long.")}},S(p[t],n);const i=new n((function(){}));let r;for(r in i)"XMLHttpRequest"===t&&"responseBlob"===r||function(n){"function"==typeof i[n]?p[t].prototype[n]=function(){return this[M][n].apply(this[M],arguments)}:e(p[t].prototype,n,{set:function(e){"function"==typeof e?(this[M][n]=u(e,t+"."+n),S(this[M][n],e)):this[M][n]=e},get:function(){return this[M][n]}})}(r);for(r in n)"prototype"!==r&&n.hasOwnProperty(r)&&(p[t][r]=n[r])}function k(e,i,r){let o=e;for(;o&&!o.hasOwnProperty(i);)o=n(o);!o&&e[i]&&(o=e);const a=c(i);let s=null;if(o&&!(s=o[a])&&(s=o[a]=o[i],m(o&&t(o,i)))){const t=r(s,a,i);o[i]=function(){return t(this,arguments)},S(o[i],s)}return s}function E(t,e,n){let i=null;function r(t){const e=t.data;return e.args[e.cbIdx]=function(){t.invoke.apply(this,arguments)},i.apply(e.target,e.args),t}i=k(t,e,t=>function(e,i){const o=n(e,i);return o.cbIdx>=0&&"function"==typeof i[o.cbIdx]?l(o.name,i[o.cbIdx],o,r):t.apply(e,i)})}function S(t,e){t[c("OriginalDelegate")]=e}let T=!1,A=!1;function I(){try{const t=d.navigator.userAgent;if(-1!==t.indexOf("MSIE ")||-1!==t.indexOf("Trident/"))return!0}catch(t){}return!1}function D(){if(T)return A;T=!0;try{const t=d.navigator.userAgent;-1===t.indexOf("MSIE ")&&-1===t.indexOf("Trident/")&&-1===t.indexOf("Edge/")||(A=!0)}catch(t){}return A}Zone.__load_patch("toString",t=>{const e=Function.prototype.toString,n=c("OriginalDelegate"),i=c("Promise"),r=c("Error"),o=function(){if("function"==typeof this){const o=this[n];if(o)return"function"==typeof o?e.call(o):Object.prototype.toString.call(o);if(this===Promise){const n=t[i];if(n)return e.call(n)}if(this===Error){const n=t[r];if(n)return e.call(n)}}return e.call(this)};o[n]=e,Function.prototype.toString=o;const a=Object.prototype.toString;Object.prototype.toString=function(){return this instanceof Promise?"[object Promise]":a.call(this)}});let R=!1;if("undefined"!=typeof window)try{const t=Object.defineProperty({},"passive",{get:function(){R=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(at){R=!1}const F={useG:!0},L={},z={},N=new RegExp("^"+s+"(\\w+)(true|false)$"),B=c("propagationStopped");function V(t,e,i){const r=i&&i.add||"addEventListener",o=i&&i.rm||"removeEventListener",a=i&&i.listeners||"eventListeners",u=i&&i.rmAll||"removeAllListeners",l=c(r),h="."+r+":",d=function(t,e,n){if(t.isRemoved)return;const i=t.callback;"object"==typeof i&&i.handleEvent&&(t.callback=t=>i.handleEvent(t),t.originalDelegate=i),t.invoke(t,e,[n]);const r=t.options;r&&"object"==typeof r&&r.once&&e[o].call(e,n.type,t.originalDelegate?t.originalDelegate:t.callback,r)},p=function(e){if(!(e=e||t.event))return;const n=this||e.target||t,i=n[L[e.type].false];if(i)if(1===i.length)d(i[0],n,e);else{const t=i.slice();for(let i=0;i<t.length&&(!e||!0!==e[B]);i++)d(t[i],n,e)}},f=function(e){if(!(e=e||t.event))return;const n=this||e.target||t,i=n[L[e.type].true];if(i)if(1===i.length)d(i[0],n,e);else{const t=i.slice();for(let i=0;i<t.length&&(!e||!0!==e[B]);i++)d(t[i],n,e)}};function g(e,i){if(!e)return!1;let d=!0;i&&void 0!==i.useG&&(d=i.useG);const g=i&&i.vh;let m=!0;i&&void 0!==i.chkDup&&(m=i.chkDup);let y=!1;i&&void 0!==i.rt&&(y=i.rt);let v=e;for(;v&&!v.hasOwnProperty(r);)v=n(v);if(!v&&e[r]&&(v=e),!v)return!1;if(v[l])return!1;const b=i&&i.eventNameToString,x={},w=v[l]=v[r],C=v[c(o)]=v[o],P=v[c(a)]=v[a],M=v[c(u)]=v[u];let O;function k(t){R||"boolean"==typeof x.options||null==x.options||(t.options=!!x.options.capture,x.options=t.options)}i&&i.prepend&&(O=v[c(i.prepend)]=v[i.prepend]);const E=d?function(t){if(!x.isExisting)return k(t),w.call(x.target,x.eventName,x.capture?f:p,x.options)}:function(t){return k(t),w.call(x.target,x.eventName,t.invoke,x.options)},T=d?function(t){if(!t.isRemoved){const e=L[t.eventName];let n;e&&(n=e[t.capture?"true":"false"]);const i=n&&t.target[n];if(i)for(let r=0;r<i.length;r++)if(i[r]===t){i.splice(r,1),t.isRemoved=!0,0===i.length&&(t.allRemoved=!0,t.target[n]=null);break}}if(t.allRemoved)return C.call(t.target,t.eventName,t.capture?f:p,t.options)}:function(t){return C.call(t.target,t.eventName,t.invoke,t.options)},A=i&&i.diff?i.diff:function(t,e){const n=typeof e;return"function"===n&&t.callback===e||"object"===n&&t.originalDelegate===e},I=Zone[c("BLACK_LISTED_EVENTS")],D=function(e,n,r,o,a=!1,u=!1){return function(){const l=this||t;let c=arguments[0];i&&i.transferEventName&&(c=i.transferEventName(c));let h=arguments[1];if(!h)return e.apply(this,arguments);if(_&&"uncaughtException"===c)return e.apply(this,arguments);let p=!1;if("function"!=typeof h){if(!h.handleEvent)return e.apply(this,arguments);p=!0}if(g&&!g(e,h,l,arguments))return;const f=arguments[2];if(I)for(let t=0;t<I.length;t++)if(c===I[t])return e.apply(this,arguments);let y,v=!1;void 0===f?y=!1:!0===f?y=!0:!1===f?y=!1:(y=!!f&&!!f.capture,v=!!f&&!!f.once);const w=Zone.current,C=L[c];let P;if(C)P=C[y?"true":"false"];else{const t=(b?b(c):c)+"false",e=(b?b(c):c)+"true",n=s+t,i=s+e;L[c]={},L[c].false=n,L[c].true=i,P=y?i:n}let M,O=l[P],k=!1;if(O){if(k=!0,m)for(let t=0;t<O.length;t++)if(A(O[t],h))return}else O=l[P]=[];const E=l.constructor.name,S=z[E];S&&(M=S[c]),M||(M=E+n+(b?b(c):c)),x.options=f,v&&(x.options.once=!1),x.target=l,x.capture=y,x.eventName=c,x.isExisting=k;const T=d?F:void 0;T&&(T.taskData=x);const D=w.scheduleEventTask(M,h,T,r,o);return x.target=null,T&&(T.taskData=null),v&&(f.once=!0),(R||"boolean"!=typeof D.options)&&(D.options=f),D.target=l,D.capture=y,D.eventName=c,p&&(D.originalDelegate=h),u?O.unshift(D):O.push(D),a?l:void 0}};return v[r]=D(w,h,E,T,y),O&&(v.prependListener=D(O,".prependListener:",(function(t){return O.call(x.target,x.eventName,t.invoke,x.options)}),T,y,!0)),v[o]=function(){const e=this||t;let n=arguments[0];i&&i.transferEventName&&(n=i.transferEventName(n));const r=arguments[2];let o;o=void 0!==r&&(!0===r||!1!==r&&!!r&&!!r.capture);const a=arguments[1];if(!a)return C.apply(this,arguments);if(g&&!g(C,a,e,arguments))return;const u=L[n];let l;u&&(l=u[o?"true":"false"]);const c=l&&e[l];if(c)for(let t=0;t<c.length;t++){const i=c[t];if(A(i,a))return c.splice(t,1),i.isRemoved=!0,0===c.length&&(i.allRemoved=!0,e[l]=null,"string"==typeof n)&&(e[s+"ON_PROPERTY"+n]=null),i.zone.cancelTask(i),y?e:void 0}return C.apply(this,arguments)},v[a]=function(){const e=this||t;let n=arguments[0];i&&i.transferEventName&&(n=i.transferEventName(n));const r=[],o=U(e,b?b(n):n);for(let t=0;t<o.length;t++){const e=o[t];r.push(e.originalDelegate?e.originalDelegate:e.callback)}return r},v[u]=function(){const e=this||t;let n=arguments[0];if(n){i&&i.transferEventName&&(n=i.transferEventName(n));const t=L[n];if(t){const i=e[t.false],r=e[t.true];if(i){const t=i.slice();for(let e=0;e<t.length;e++){const i=t[e];this[o].call(this,n,i.originalDelegate?i.originalDelegate:i.callback,i.options)}}if(r){const t=r.slice();for(let e=0;e<t.length;e++){const i=t[e];this[o].call(this,n,i.originalDelegate?i.originalDelegate:i.callback,i.options)}}}}else{const t=Object.keys(e);for(let e=0;e<t.length;e++){const n=N.exec(t[e]);let i=n&&n[1];i&&"removeListener"!==i&&this[u].call(this,i)}this[u].call(this,"removeListener")}if(y)return this},S(v[r],w),S(v[o],C),M&&S(v[u],M),P&&S(v[a],P),!0}let m=[];for(let n=0;n<e.length;n++)m[n]=g(e[n],i);return m}function U(t,e){const n=[];for(let i in t){const r=N.exec(i);let o=r&&r[1];if(o&&(!e||o===e)){const e=t[i];if(e)for(let t=0;t<e.length;t++)n.push(e[t])}}return n}function j(t,e){const n=t.Event;n&&n.prototype&&e.patchMethod(n.prototype,"stopImmediatePropagation",t=>function(e,n){e[B]=!0,t&&t.apply(e,n)})}function q(t,e,n,i,r){const o=Zone.__symbol__(i);if(e[o])return;const a=e[o]=e[i];e[i]=function(o,s,u){return s&&s.prototype&&r.forEach((function(e){const r=`${n}.${i}::`+e,o=s.prototype;if(o.hasOwnProperty(e)){const n=t.ObjectGetOwnPropertyDescriptor(o,e);n&&n.value?(n.value=t.wrapWithCurrentZone(n.value,r),t._redefineProperty(s.prototype,e,n)):o[e]&&(o[e]=t.wrapWithCurrentZone(o[e],r))}else o[e]&&(o[e]=t.wrapWithCurrentZone(o[e],r))})),a.call(e,o,s,u)},t.attachOriginToPatched(e[i],a)}const G=["absolutedeviceorientation","afterinput","afterprint","appinstalled","beforeinstallprompt","beforeprint","beforeunload","devicelight","devicemotion","deviceorientation","deviceorientationabsolute","deviceproximity","hashchange","languagechange","message","mozbeforepaint","offline","online","paint","pageshow","pagehide","popstate","rejectionhandled","storage","unhandledrejection","unload","userproximity","vrdisplyconnected","vrdisplaydisconnected","vrdisplaypresentchange"],H=["encrypted","waitingforkey","msneedkey","mozinterruptbegin","mozinterruptend"],Z=["load"],W=["blur","error","focus","load","resize","scroll","messageerror"],K=["bounce","finish","start"],X=["loadstart","progress","abort","error","load","progress","timeout","loadend","readystatechange"],$=["upgradeneeded","complete","abort","success","error","blocked","versionchange","close"],Y=["close","error","open","message"],Q=["error","message"],J=["abort","animationcancel","animationend","animationiteration","auxclick","beforeinput","blur","cancel","canplay","canplaythrough","change","compositionstart","compositionupdate","compositionend","cuechange","click","close","contextmenu","curechange","dblclick","drag","dragend","dragenter","dragexit","dragleave","dragover","drop","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","orientationchange","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","mozpointerlockchange","webkitpointerlockerchange","pointerlockerror","mozpointerlockerror","webkitpointerlockerror","pointermove","pointout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","seeked","seeking","select","selectionchange","selectstart","show","sort","stalled","submit","suspend","timeupdate","volumechange","touchcancel","touchmove","touchstart","touchend","transitioncancel","transitionend","waiting","wheel"].concat(["webglcontextrestored","webglcontextlost","webglcontextcreationerror"],["autocomplete","autocompleteerror"],["toggle"],["afterscriptexecute","beforescriptexecute","DOMContentLoaded","freeze","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenerror","mozfullscreenerror","webkitfullscreenerror","msfullscreenerror","readystatechange","visibilitychange","resume"],G,["beforecopy","beforecut","beforepaste","copy","cut","paste","dragstart","loadend","animationstart","search","transitionrun","transitionstart","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend"],["activate","afterupdate","ariarequest","beforeactivate","beforedeactivate","beforeeditfocus","beforeupdate","cellchange","controlselect","dataavailable","datasetchanged","datasetcomplete","errorupdate","filterchange","layoutcomplete","losecapture","move","moveend","movestart","propertychange","resizeend","resizestart","rowenter","rowexit","rowsdelete","rowsinserted","command","compassneedscalibration","deactivate","help","mscontentzoom","msmanipulationstatechanged","msgesturechange","msgesturedoubletap","msgestureend","msgesturehold","msgesturestart","msgesturetap","msgotpointercapture","msinertiastart","mslostpointercapture","mspointercancel","mspointerdown","mspointerenter","mspointerhover","mspointerleave","mspointermove","mspointerout","mspointerover","mspointerup","pointerout","mssitemodejumplistitemremoved","msthumbnailclick","stop","storagecommit"]);function tt(t,e,n){if(!n||0===n.length)return e;const i=n.filter(e=>e.target===t);if(!i||0===i.length)return e;const r=i[0].ignoreProperties;return e.filter(t=>-1===r.indexOf(t))}function et(t,e,n,i){t&&P(t,tt(t,e,n),i)}function nt(t,e){if(_&&!b)return;if(Zone[t.symbol("patchEvents")])return;const i="undefined"!=typeof WebSocket,r=e.__Zone_ignore_on_properties;if(v){const t=window,e=I?[{target:t,ignoreProperties:["error"]}]:[];et(t,J.concat(["messageerror"]),r?r.concat(e):r,n(t)),et(Document.prototype,J,r),void 0!==t.SVGElement&&et(t.SVGElement.prototype,J,r),et(Element.prototype,J,r),et(HTMLElement.prototype,J,r),et(HTMLMediaElement.prototype,H,r),et(HTMLFrameSetElement.prototype,G.concat(W),r),et(HTMLBodyElement.prototype,G.concat(W),r),et(HTMLFrameElement.prototype,Z,r),et(HTMLIFrameElement.prototype,Z,r);const i=t.HTMLMarqueeElement;i&&et(i.prototype,K,r);const o=t.Worker;o&&et(o.prototype,Q,r)}const o=e.XMLHttpRequest;o&&et(o.prototype,X,r);const a=e.XMLHttpRequestEventTarget;a&&et(a&&a.prototype,X,r),"undefined"!=typeof IDBIndex&&(et(IDBIndex.prototype,$,r),et(IDBRequest.prototype,$,r),et(IDBOpenDBRequest.prototype,$,r),et(IDBDatabase.prototype,$,r),et(IDBTransaction.prototype,$,r),et(IDBCursor.prototype,$,r)),i&&et(WebSocket.prototype,Y,r)}Zone.__load_patch("util",(n,o,a)=>{a.patchOnProperties=P,a.patchMethod=k,a.bindArguments=g,a.patchMacroTask=E;const l=o.__symbol__("BLACK_LISTED_EVENTS"),c=o.__symbol__("UNPATCHED_EVENTS");n[c]&&(n[l]=n[c]),n[l]&&(o[l]=o[c]=n[l]),a.patchEventPrototype=j,a.patchEventTarget=V,a.isIEOrEdge=D,a.ObjectDefineProperty=e,a.ObjectGetOwnPropertyDescriptor=t,a.ObjectCreate=i,a.ArraySlice=r,a.patchClass=O,a.wrapWithCurrentZone=u,a.filterProperties=tt,a.attachOriginToPatched=S,a._redefineProperty=Object.defineProperty,a.patchCallbacks=q,a.getGlobalObjects=()=>({globalSources:z,zoneSymbolEventNames:L,eventNames:J,isBrowser:v,isMix:b,isNode:_,TRUE_STR:"true",FALSE_STR:"false",ZONE_SYMBOL_PREFIX:s,ADD_EVENT_LISTENER_STR:"addEventListener",REMOVE_EVENT_LISTENER_STR:"removeEventListener"})});const it=c("zoneTask");function rt(t,e,n,i){let r=null,o=null;n+=i;const a={};function s(e){const n=e.data;return n.args[0]=function(){try{e.invoke.apply(this,arguments)}finally{e.data&&e.data.isPeriodic||("number"==typeof n.handleId?delete a[n.handleId]:n.handleId&&(n.handleId[it]=null))}},n.handleId=r.apply(t,n.args),e}function u(t){return o(t.data.handleId)}r=k(t,e+=i,n=>function(r,o){if("function"==typeof o[0]){const t=l(e,o[0],{isPeriodic:"Interval"===i,delay:"Timeout"===i||"Interval"===i?o[1]||0:void 0,args:o},s,u);if(!t)return t;const n=t.data.handleId;return"number"==typeof n?a[n]=t:n&&(n[it]=t),n&&n.ref&&n.unref&&"function"==typeof n.ref&&"function"==typeof n.unref&&(t.ref=n.ref.bind(n),t.unref=n.unref.bind(n)),"number"==typeof n||n?n:t}return n.apply(t,o)}),o=k(t,n,e=>function(n,i){const r=i[0];let o;"number"==typeof r?o=a[r]:(o=r&&r[it],o||(o=r)),o&&"string"==typeof o.type?"notScheduled"!==o.state&&(o.cancelFn&&o.data.isPeriodic||0===o.runCount)&&("number"==typeof r?delete a[r]:r&&(r[it]=null),o.zone.cancelTask(o)):e.apply(t,i)})}function ot(t,e){if(Zone[e.symbol("patchEventTarget")])return;const{eventNames:n,zoneSymbolEventNames:i,TRUE_STR:r,FALSE_STR:o,ZONE_SYMBOL_PREFIX:a}=e.getGlobalObjects();for(let u=0;u<n.length;u++){const t=n[u],e=a+(t+o),s=a+(t+r);i[t]={},i[t][o]=e,i[t][r]=s}const s=t.EventTarget;return s&&s.prototype?(e.patchEventTarget(t,[s&&s.prototype]),!0):void 0}Zone.__load_patch("legacy",t=>{const e=t[Zone.__symbol__("legacyPatch")];e&&e()}),Zone.__load_patch("timers",t=>{rt(t,"set","clear","Timeout"),rt(t,"set","clear","Interval"),rt(t,"set","clear","Immediate")}),Zone.__load_patch("requestAnimationFrame",t=>{rt(t,"request","cancel","AnimationFrame"),rt(t,"mozRequest","mozCancel","AnimationFrame"),rt(t,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(t,e)=>{const n=["alert","prompt","confirm"];for(let i=0;i<n.length;i++)k(t,n[i],(n,i,r)=>function(i,o){return e.current.run(n,t,o,r)})}),Zone.__load_patch("EventTarget",(t,e,n)=>{!function(t,e){e.patchEventPrototype(t,e)}(t,n),ot(t,n);const i=t.XMLHttpRequestEventTarget;i&&i.prototype&&n.patchEventTarget(t,[i.prototype]),O("MutationObserver"),O("WebKitMutationObserver"),O("IntersectionObserver"),O("FileReader")}),Zone.__load_patch("on_property",(t,e,n)=>{nt(n,t)}),Zone.__load_patch("customElements",(t,e,n)=>{!function(t,e){const{isBrowser:n,isMix:i}=e.getGlobalObjects();(n||i)&&t.customElements&&"customElements"in t&&e.patchCallbacks(e,t.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(t,n)}),Zone.__load_patch("XHR",(t,e)=>{!function(t){const d=t.XMLHttpRequest;if(!d)return;const p=d.prototype;let f=p[o],g=p[a];if(!f){const e=t.XMLHttpRequestEventTarget;if(e){const t=e.prototype;f=t[o],g=t[a]}}function m(t){const i=t.data,u=i.target;u[s]=!1,u[h]=!1;const l=u[r];f||(f=u[o],g=u[a]),l&&g.call(u,"readystatechange",l);const c=u[r]=()=>{if(u.readyState===u.DONE)if(!i.aborted&&u[s]&&"scheduled"===t.state){const n=u[e.__symbol__("loadfalse")];if(n&&n.length>0){const r=t.invoke;t.invoke=function(){const n=u[e.__symbol__("loadfalse")];for(let e=0;e<n.length;e++)n[e]===t&&n.splice(e,1);i.aborted||"scheduled"!==t.state||r.call(t)},n.push(t)}else t.invoke()}else i.aborted||!1!==u[s]||(u[h]=!0)};return f.call(u,"readystatechange",c),u[n]||(u[n]=t),w.apply(u,i.args),u[s]=!0,t}function y(){}function _(t){const e=t.data;return e.aborted=!0,C.apply(e.target,e.args)}const v=k(p,"open",()=>function(t,e){return t[i]=0==e[2],t[u]=e[1],v.apply(t,e)}),b=c("fetchTaskAborting"),x=c("fetchTaskScheduling"),w=k(p,"send",()=>function(t,n){if(!0===e.current[x])return w.apply(t,n);if(t[i])return w.apply(t,n);{const e={target:t,url:t[u],isPeriodic:!1,args:n,aborted:!1},i=l("XMLHttpRequest.send",y,e,m,_);t&&!0===t[h]&&!e.aborted&&"scheduled"===i.state&&i.invoke()}}),C=k(p,"abort",()=>function(t,i){const r=t[n];if(r&&"string"==typeof r.type){if(null==r.cancelFn||r.data&&r.data.aborted)return;r.zone.cancelTask(r)}else if(!0===e.current[b])return C.apply(t,i)})}(t);const n=c("xhrTask"),i=c("xhrSync"),r=c("xhrListener"),s=c("xhrScheduled"),u=c("xhrURL"),h=c("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&function(e,n){const i=e.constructor.name;for(let r=0;r<n.length;r++){const o=n[r],a=e[o];if(a){if(!m(t(e,o)))continue;e[o]=(t=>{const e=function(){return t.apply(this,g(arguments,i+"."+o))};return S(e,t),e})(a)}}}(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(t,e)=>{function n(e){return function(n){U(t,e).forEach(i=>{const r=t.PromiseRejectionEvent;if(r){const t=new r(e,{promise:n.promise,reason:n.rejection});i.invoke(t)}})}}t.PromiseRejectionEvent&&(e[c("unhandledPromiseRejectionHandler")]=n("unhandledrejection"),e[c("rejectionHandledHandler")]=n("rejectionhandled"))})})?i.call(e,n,e,t):i)||(t.exports=r)},pg82:function(t,e){var n=null,i=null;function r(t,e,n){t.addEventListener(e,(function(t){var r=new MouseEvent(n,t);r.pointerId=1,r.isPrimary=!0,r.pointerType="mouse",r.width=1,r.height=1,r.tiltX=0,r.tiltY=0,r.pressure="buttons"in t&&0!==t.buttons?.5:0;var o=t.target;null!==i&&(o=i,"mouseup"===e&&(i=null)),o.dispatchEvent(r),r.defaultPrevented&&t.preventDefault()}))}function o(t,e,i){t.addEventListener(e,(function(t){for(var r=t.changedTouches,o=r.length,a=0;a<o;a++){var s=new CustomEvent(i,{bubbles:!0,cancelable:!0});s.ctrlKey=t.ctrlKey,s.shiftKey=t.shiftKey,s.altKey=t.altKey,s.metaKey=t.metaKey;var u=r.item(a);s.clientX=u.clientX,s.clientY=u.clientY,s.screenX=u.screenX,s.screenY=u.screenY,s.pageX=u.pageX,s.pageY=u.pageY;var l=u.target.getBoundingClientRect();s.offsetX=u.clientX-l.left,s.offsetY=u.clientY-l.top,s.pointerId=1+u.identifier,s.button=0,s.buttons=1,s.movementX=0,s.movementY=0,s.region=null,s.relatedTarget=null,s.x=s.clientX,s.y=s.clientY,s.pointerType="touch",s.width=1,s.height=1,s.tiltX=0,s.tiltY=0,s.pressure=1,"touchstart"===e&&null===n&&(n=u.identifier),s.isPrimary=u.identifier===n,"touchend"===e&&s.isPrimary&&(n=null),t.target.dispatchEvent(s),s.defaultPrevented&&t.preventDefault()}}))}"PointerEvent"in window||(Element.prototype.setPointerCapture=Element.prototype.setCapture,Element.prototype.releasePointerCapture=Element.prototype.releaseCapture,"TouchEvent"in window||(r(document,"mousedown","pointerdown"),r(document,"mousemove","pointermove"),r(document,"mouseup","pointerup")),o(document,"touchstart","pointerdown"),o(document,"touchmove","pointermove"),o(document,"touchend","pointerup"))},zUnb:function(t,e,n){"use strict";function i(t){return"function"==typeof t}n.r(e),n("hN/g");let r=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}};function a(t){setTimeout(()=>{throw t},0)}const s={closed:!0,next(t){},error(t){if(o.useDeprecatedSynchronousErrorHandling)throw t;a(t)},complete(){}},u=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function l(t){return null!==t&&"object"==typeof t}const c=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let h=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:r,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(i(r))try{r.call(this)}catch(a){e=a instanceof c?d(a.errors):[a]}if(u(o)){let t=-1,n=o.length;for(;++t<n;){const n=o[t];if(l(n))try{n.unsubscribe()}catch(a){e=e||[],a instanceof c?e=e.concat(d(a.errors)):e.push(a)}}}if(e)throw new c(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=n;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function d(t){return t.reduce((t,e)=>t.concat(e instanceof c?e.errors:e),[])}const p=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class f extends h{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s;break;case 1:if(!t){this.destination=s;break}if("object"==typeof t){t instanceof f?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,t,e,n)}}[p](){return this}static create(t,e,n){const i=new f(t,e,n);return i.syncErrorThrowable=!1,i}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class g extends f{constructor(t,e,n,r){let o;super(),this._parentSubscriber=t;let a=this;i(e)?o=e:e&&(o=e.next,n=e.error,r=e.complete,e!==s&&(a=Object.create(e),i(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=r}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):a(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;a(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;a(n)}}__tryOrSetError(t,e,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(i){return o.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(a(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const m=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function y(){}function _(...t){return v(t)}function v(t){return t?1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}:y}let b=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:i}=this,r=function(t,e,n){if(t){if(t instanceof f)return t;if(t[p])return t[p]()}return t||e||n?new f(t,e,n):new f(s)}(t,e,n);if(r.add(i?i.call(r,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),o.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}_trySubscribe(t){try{return this._subscribe(t)}catch(e){o.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof f?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=x(e))((e,n)=>{let i;i=this.subscribe(e=>{try{t(e)}catch(r){n(r),i&&i.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[m](){return this}pipe(...t){return 0===t.length?this:v(t)(this)}toPromise(t){return new(t=x(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function x(t){if(t||(t=o.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const w=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class C extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class P extends f{constructor(t){super(t),this.destination=t}}let M=(()=>{class t extends b{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[p](){return new P(this)}lift(t){const e=new O(this,this);return e.operator=t,e}next(t){if(this.closed)throw new w;if(!this.isStopped){const{observers:e}=this,n=e.length,i=e.slice();for(let r=0;r<n;r++)i[r].next(t)}}error(t){if(this.closed)throw new w;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,i=e.slice();for(let r=0;r<n;r++)i[r].error(t);this.observers.length=0}complete(){if(this.closed)throw new w;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let i=0;i<e;i++)n[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new w;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new w;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new C(this,t))}asObservable(){const t=new b;return t.source=this,t}}return t.create=(t,e)=>new O(t,e),t})();class O extends M{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function k(t){return t&&"function"==typeof t.schedule}class E extends f{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const S=t=>e=>{for(let n=0,i=t.length;n<i&&!e.closed;n++)e.next(t[n]);e.complete()};function T(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const A=T(),I=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function D(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const R=t=>{if(t&&"function"==typeof t[m])return i=t,t=>{const e=i[m]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(I(t))return S(t);if(D(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,a),t);if(t&&"function"==typeof t[A])return e=t,t=>{const n=e[A]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=l(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}var e,n,i};function F(t,e,n,i,r=new E(t,n,i)){if(!r.closed)return e instanceof b?e.subscribe(r):R(e)(r)}class L extends f{notifyNext(t,e,n,i,r){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}function z(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new N(t,e))}}class N{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new B(t,this.project,this.thisArg))}}class B extends f{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function V(t,e){return new b(n=>{const i=new h;let r=0;return i.add(e.schedule((function(){r!==t.length?(n.next(t[r++]),n.closed||i.add(this.schedule())):n.complete()}))),i})}function U(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[m]}(t))return function(t,e){return new b(n=>{const i=new h;return i.add(e.schedule(()=>{const r=t[m]();i.add(r.subscribe({next(t){i.add(e.schedule(()=>n.next(t)))},error(t){i.add(e.schedule(()=>n.error(t)))},complete(){i.add(e.schedule(()=>n.complete()))}}))})),i})}(t,e);if(D(t))return function(t,e){return new b(n=>{const i=new h;return i.add(e.schedule(()=>t.then(t=>{i.add(e.schedule(()=>{n.next(t),i.add(e.schedule(()=>n.complete()))}))},t=>{i.add(e.schedule(()=>n.error(t)))}))),i})}(t,e);if(I(t))return V(t,e);if(function(t){return t&&"function"==typeof t[A]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new b(n=>{const i=new h;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=t[A](),i.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=r.next();t=n.value,e=n.done}catch(i){return void n.error(i)}e?n.complete():(n.next(t),this.schedule())})))})),i})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof b?t:new b(R(t))}function j(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(j((n,i)=>U(t(n,i)).pipe(z((t,r)=>e(n,t,i,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new q(t,n)))}class q{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new G(t,this.project,this.concurrent))}}class G extends L{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const i=new E(this,e,n),r=this.destination;r.add(i);const o=F(this,t,void 0,void 0,i);o!==i&&r.add(o)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,i,r){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function H(t){return t}function Z(t=Number.POSITIVE_INFINITY){return j(H,t)}function W(t,e){return e?V(t,e):new b(S(t))}function K(...t){let e=Number.POSITIVE_INFINITY,n=null,i=t[t.length-1];return k(i)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof i&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof b?t[0]:Z(e)(W(t,n))}function X(){return function(t){return t.lift(new $(t))}}class ${constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const i=new Y(t,n),r=e.subscribe(i);return i.closed||(i.connection=n.connect()),r}}class Y extends f{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,i=t._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}class Q extends b{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new tt(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return X()(this)}}const J=(()=>{const t=Q.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class tt extends P{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function et(){return new M}function nt(t){return{toString:t}.toString()}function it(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}function rt(t,e,n){return nt(()=>{const i=it(e);function r(...t){if(this instanceof r)return i.apply(this,t),this;const e=new r(...t);return n.annotation=e,n;function n(t,n,i){const r=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;r.length<=i;)r.push(null);return(r[i]=r[i]||[]).push(e),t}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}function ot(t,e,n,i){return nt(()=>{const r=it(e);function o(...t){if(this instanceof o)return r.apply(this,t),this;const e=new o(...t);return function(n,r){const o=n.constructor,a=o.hasOwnProperty("__prop__metadata__")?o.__prop__metadata__:Object.defineProperty(o,"__prop__metadata__",{value:{}}).__prop__metadata__;a[r]=a.hasOwnProperty(r)&&a[r]||[],a[r].unshift(e),i&&i(n,r,...t)}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}const at=rt("Inject",t=>({token:t})),st=rt("Optional"),ut=rt("Self"),lt=rt("SkipSelf");var ct=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function ht(t){for(let e in t)if(t[e]===ht)return e;throw Error("Could not find renamed property on target object.")}function dt(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function pt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ft(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function gt(t){return mt(t,t[_t])||mt(t,t[xt])}function mt(t,e){return e&&e.token===t?e:null}function yt(t){return t&&(t.hasOwnProperty(vt)||t.hasOwnProperty(wt))?t[vt]:null}const _t=ht({"\u0275prov":ht}),vt=ht({"\u0275inj":ht}),bt=ht({"\u0275provFallback":ht}),xt=ht({ngInjectableDef:ht}),wt=ht({ngInjectorDef:ht});function Ct(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ct).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Pt(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Mt=ht({__forward_ref__:ht});function Ot(t){return t.__forward_ref__=Ot,t.toString=function(){return Ct(this())},t}function kt(t){return Et(t)?t():t}function Et(t){return"function"==typeof t&&t.hasOwnProperty(Mt)&&t.__forward_ref__===Ot}const St="undefined"!=typeof globalThis&&globalThis,Tt="undefined"!=typeof window&&window,At="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,It="undefined"!=typeof global&&global,Dt=St||It||Tt||At,Rt=ht({"\u0275cmp":ht}),Ft=ht({"\u0275dir":ht}),Lt=ht({"\u0275pipe":ht}),zt=ht({"\u0275mod":ht}),Nt=ht({"\u0275loc":ht}),Bt=ht({"\u0275fac":ht}),Vt=ht({__NG_ELEMENT_ID__:ht});class Ut{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=pt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const jt=new Ut("INJECTOR",-1),qt={},Gt=/\n/gm,Ht=ht({provide:String,useValue:ht});let Zt,Wt=void 0;function Kt(t){const e=Wt;return Wt=t,e}function Xt(t){const e=Zt;return Zt=t,e}function $t(t,e=ct.Default){if(void 0===Wt)throw new Error("inject() must be called from an injection context");return null===Wt?Jt(t,void 0,e):Wt.get(t,e&ct.Optional?null:void 0,e)}function Yt(t,e=ct.Default){return(Zt||$t)(kt(t),e)}const Qt=Yt;function Jt(t,e,n){const i=gt(t);if(i&&"root"==i.providedIn)return void 0===i.value?i.value=i.factory():i.value;if(n&ct.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${Ct(t)}]`)}function te(t){const e=[];for(let n=0;n<t.length;n++){const i=kt(t[n]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=ct.Default;for(let e=0;e<i.length;e++){const r=i[e];r instanceof st||"Optional"===r.ngMetadataName||r===st?n|=ct.Optional:r instanceof lt||"SkipSelf"===r.ngMetadataName||r===lt?n|=ct.SkipSelf:r instanceof ut||"Self"===r.ngMetadataName||r===ut?n|=ct.Self:t=r instanceof at||r===at?r.token:r}e.push(Yt(t,n))}else e.push(Yt(i))}return e}class ee{get(t,e=qt){if(e===qt){const e=new Error(`NullInjectorError: No provider for ${Ct(t)}!`);throw e.name="NullInjectorError",e}return e}}class ne{}class ie{}function re(t,e){t.forEach(t=>Array.isArray(t)?re(t,e):e(t))}function oe(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ae(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function se(t,e){const n=[];for(let i=0;i<t;i++)n.push(e);return n}function ue(t,e,n){let i=ce(t,e);return i>=0?t[1|i]=n:(i=~i,function(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(1===r)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;)t[r]=t[r-2],r--;t[e]=n,t[e+1]=i}}(t,i,e,n)),i}function le(t,e){const n=ce(t,e);if(n>=0)return t[1|n]}function ce(t,e){return function(t,e,n){let i=0,r=t.length>>1;for(;r!==i;){const n=i+(r-i>>1),o=t[n<<1];if(e===o)return n<<1;o>e?r=n:i=n+1}return~(r<<1)}(t,e)}const he=function(){var t={OnPush:0,Default:1};return t[t.OnPush]="OnPush",t[t.Default]="Default",t}(),de=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}(),pe={},fe=[];let ge=0;function me(t){return nt(()=>{const e=t.type,n=e.prototype,i={},r={type:e,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:t.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:t.changeDetection===he.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||fe,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||de.Emulated,id:"c",styles:t.styles||fe,_:null,setInput:null,schemas:t.schemas||null,tView:null},o=t.directives,a=t.features,s=t.pipes;return r.id+=ge++,r.inputs=xe(t.inputs,i),r.outputs=xe(t.outputs),a&&a.forEach(t=>t(r)),r.directiveDefs=o?()=>("function"==typeof o?o():o).map(ye):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(_e):null,r})}function ye(t){return Pe(t)||function(t){return t[Ft]||null}(t)}function _e(t){return function(t){return t[Lt]||null}(t)}const ve={};function be(t){const e={type:t.type,bootstrap:t.bootstrap||fe,declarations:t.declarations||fe,imports:t.imports||fe,exports:t.exports||fe,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&nt(()=>{ve[t.id]=t.type}),e}function xe(t,e){if(null==t)return pe;const n={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),n[r]=i,e&&(e[r]=o)}return n}const we=me;function Ce(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Pe(t){return t[Rt]||null}function Me(t,e){return t.hasOwnProperty(Bt)?t[Bt]:null}function Oe(t,e){const n=t[zt]||null;if(!n&&!0===e)throw new Error(`Type ${Ct(t)} does not have '\u0275mod' property.`);return n}function ke(t){return Array.isArray(t)&&"object"==typeof t[1]}function Ee(t){return Array.isArray(t)&&!0===t[1]}function Se(t){return 0!=(8&t.flags)}function Te(t){return 2==(2&t.flags)}function Ae(t){return 1==(1&t.flags)}function Ie(t){return null!==t.template}function De(t){return 0!=(512&t[2])}const Re={lFrame:en(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Fe(){return Re.bindingsEnabled}function Le(){return Re.lFrame.lView}function ze(){return Re.lFrame.tView}function Ne(t){Re.lFrame.contextLView=t}function Be(){return Re.lFrame.previousOrParentTNode}function Ve(t,e){Re.lFrame.previousOrParentTNode=t,Re.lFrame.isParent=e}function Ue(){return Re.lFrame.isParent}function je(){Re.lFrame.isParent=!1}function qe(){return Re.checkNoChangesMode}function Ge(t){Re.checkNoChangesMode=t}function He(){const t=Re.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Ze(){return Re.lFrame.bindingIndex}function We(){return Re.lFrame.bindingIndex++}function Ke(t){const e=Re.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Xe(t,e){const n=Re.lFrame;n.bindingIndex=n.bindingRootIndex=t,n.currentDirectiveIndex=e}function $e(){return Re.lFrame.currentQueryIndex}function Ye(t){Re.lFrame.currentQueryIndex=t}function Qe(t,e){const n=tn();Re.lFrame=n,n.previousOrParentTNode=e,n.lView=t}function Je(t,e){const n=tn(),i=t[1];Re.lFrame=n,n.previousOrParentTNode=e,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex}function tn(){const t=Re.lFrame,e=null===t?null:t.child;return null===e?en(t):e}function en(t){const e={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function nn(){const t=Re.lFrame;return Re.lFrame=t.parent,t.previousOrParentTNode=null,t.lView=null,t}const rn=nn;function on(){const t=nn();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.currentSanitizer=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function an(){return Re.lFrame.selectedIndex}function sn(t){Re.lFrame.selectedIndex=t}function un(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const e=t.data[n];e.afterContentInit&&(t.contentHooks||(t.contentHooks=[])).push(-n,e.afterContentInit),e.afterContentChecked&&((t.contentHooks||(t.contentHooks=[])).push(n,e.afterContentChecked),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,e.afterContentChecked)),e.afterViewInit&&(t.viewHooks||(t.viewHooks=[])).push(-n,e.afterViewInit),e.afterViewChecked&&((t.viewHooks||(t.viewHooks=[])).push(n,e.afterViewChecked),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,e.afterViewChecked)),null!=e.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(n,e.onDestroy)}}function ln(t,e,n){dn(t,e,3,n)}function cn(t,e,n,i){(3&t[2])===n&&dn(t,e,n,i)}function hn(t,e){let n=t[2];(3&n)===e&&(n&=1023,n+=1,t[2]=n)}function dn(t,e,n,i){const r=null!=i?i:-1;let o=0;for(let a=void 0!==i?65535&t[18]:0;a<e.length;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=i&&o>=i)break}else e[a]<0&&(t[18]+=65536),(o<r||-1==r)&&(pn(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function pn(t,e,n,i){const r=n[i]<0,o=n[i+1],a=t[r?-n[i]:n[i]];r?t[2]>>10<t[18]>>16&&(3&t[2])===e&&(t[2]+=1024,o.call(a)):o.call(a)}class fn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}let gn=void 0;function mn(){return void 0!==gn?gn:"undefined"!=typeof document?document:void 0}function yn(t){return!!t.listen}const _n={createRenderer:(t,e)=>mn()};function vn(t,e,n){const i=yn(t);let r=0;for(;r<n.length;){const o=n[r];if("number"==typeof o){if(0!==o)break;r++;const a=n[r++],s=n[r++],u=n[r++];i?t.setAttribute(e,s,u,a):e.setAttributeNS(a,s,u)}else{const a=o,s=n[++r];xn(a)?i&&t.setProperty(e,a,s):i?t.setAttribute(e,a,s):e.setAttribute(a,s),r++}}return r}function bn(t){return 3===t||4===t||6===t}function xn(t){return 64===t.charCodeAt(0)}function wn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||Cn(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function Cn(t,e,n,i,r){let o=0,a=t.length;if(-1===e)a=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){a=-1;break}if(n>e){a=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===i)return void(null!==r&&(t[o+1]=r));if(i===t[o+1])return void(t[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==a&&(t.splice(a,0,e),o=a+1),t.splice(o++,0,n),null!==i&&t.splice(o++,0,i),null!==r&&t.splice(o++,0,r)}function Pn(t){return-1!==t}function Mn(t){return 32767&t}function On(t){return t>>16}function kn(t,e){let n=On(t),i=e;for(;n>0;)i=i[15],n--;return i}function En(t){return"string"==typeof t?t:null==t?"":""+t}function Sn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():En(t)}const Tn=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Dt))();function An(t){return t instanceof Function?t():t}let In=!0;function Dn(t){const e=In;return In=t,e}let Rn=0;function Fn(t,e){const n=zn(t,e);if(-1!==n)return n;const i=e[1];i.firstCreatePass&&(t.injectorIndex=e.length,Ln(i.data,t),Ln(e,null),Ln(i.blueprint,null));const r=Nn(t,e),o=t.injectorIndex;if(Pn(r)){const t=Mn(r),n=kn(r,e),i=n[1].data;for(let r=0;r<8;r++)e[o+r]=n[t+r]|i[t+r]}return e[o+8]=r,o}function Ln(t,e){t.push(0,0,0,0,0,0,0,0,e)}function zn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+8]?-1:t.injectorIndex}function Nn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=e[6],i=1;for(;n&&-1===n.injectorIndex;)n=(e=e[15])?e[6]:null,i++;return n?n.injectorIndex|i<<16:-1}function Bn(t,e,n){!function(t,e,n){let i="string"!=typeof n?n[Vt]:n.charCodeAt(0)||0;null==i&&(i=n[Vt]=Rn++);const r=255&i,o=1<<r,a=64&r,s=32&r,u=e.data;128&r?a?s?u[t+7]|=o:u[t+6]|=o:s?u[t+5]|=o:u[t+4]|=o:a?s?u[t+3]|=o:u[t+2]|=o:s?u[t+1]|=o:u[t]|=o}(t,e,n)}function Vn(t,e,n,i=ct.Default,r){if(null!==t){const r=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t[Vt];return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof r){Qe(e,t);try{const t=r();if(null!=t||i&ct.Optional)return t;throw new Error(`No provider for ${Sn(n)}!`)}finally{rn()}}else if("number"==typeof r){if(-1===r)return new Wn(t,e);let o=null,a=zn(t,e),s=-1,u=i&ct.Host?e[16][6]:null;for((-1===a||i&ct.SkipSelf)&&(s=-1===a?Nn(t,e):e[a+8],Zn(i,!1)?(o=e[1],a=Mn(s),e=kn(s,e)):a=-1);-1!==a;){s=e[a+8];const t=e[1];if(Hn(r,a,t.data)){const t=jn(a,e,n,o,i,u);if(t!==Un)return t}Zn(i,e[1].data[a+8]===u)&&Hn(r,a,e)?(o=t,a=Mn(s),e=kn(s,e)):a=-1}}}if(i&ct.Optional&&void 0===r&&(r=null),0==(i&(ct.Self|ct.Host))){const t=e[9],o=Xt(void 0);try{return t?t.get(n,r,i&ct.Optional):Jt(n,r,i&ct.Optional)}finally{Xt(o)}}if(i&ct.Optional)return r;throw new Error(`NodeInjector: NOT_FOUND [${Sn(n)}]`)}const Un={};function jn(t,e,n,i,r,o){const a=e[1],s=a.data[t+8],u=qn(s,a,n,null==i?Te(s)&&In:i!=a&&3===s.type,r&ct.Host&&o===s);return null!==u?Gn(e,a,u,s):Un}function qn(t,e,n,i,r){const o=t.providerIndexes,a=e.data,s=65535&o,u=t.directiveStart,l=o>>16,c=r?s+l:t.directiveEnd;for(let h=i?s:s+l;h<c;h++){const t=a[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(r){const t=a[u];if(t&&Ie(t)&&t.type===n)return u}return null}function Gn(t,e,n,i){let r=t[n];const o=e.data;if(r instanceof fn){const a=r;if(a.resolving)throw new Error(`Circular dep for ${Sn(o[n])}`);const s=Dn(a.canSeeViewProviders);let u;a.resolving=!0,a.injectImpl&&(u=Xt(a.injectImpl)),Qe(t,i);try{r=t[n]=a.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&function(t,e,n){const{onChanges:i,onInit:r,doCheck:o}=e;i&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,i)),r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-t,r),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{a.injectImpl&&Xt(u),Dn(s),a.resolving=!1,rn()}}return r}function Hn(t,e,n){const i=64&t,r=32&t;let o;return o=128&t?i?r?n[e+7]:n[e+6]:r?n[e+5]:n[e+4]:i?r?n[e+3]:n[e+2]:r?n[e+1]:n[e],!!(o&1<<t)}function Zn(t,e){return!(t&ct.Self||t&ct.Host&&e)}class Wn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Vn(this._tNode,this._lView,t,void 0,e)}}function Kn(t){return nt(()=>{const e=Object.getPrototypeOf(t.prototype).constructor,n=e[Bt]||function t(e){const n=e;if(Et(e))return()=>{const e=t(kt(n));return e?e():null};let i=Me(n);if(null===i){const t=yt(n);i=t&&t.factory}return i||null}(e);return null!==n?n:t=>new t})}function Xn(t){return t.ngDebugContext}function $n(t){return t.ngOriginalError}function Yn(t,...e){t.error(...e)}class Qn{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),i=function(t){return t.ngErrorLogger||Yn}(t);i(this._console,"ERROR",t),e&&i(this._console,"ORIGINAL ERROR",e),n&&i(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Xn(t)?Xn(t):this._findContext($n(t)):null}_findOriginalError(t){let e=$n(t);for(;e&&$n(e);)e=$n(e);return e}}class Jn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}function ti(t){return t instanceof Jn?t.changingThisBreaksApplicationSecurity:t}function ei(t,e){const n=function(t){return t instanceof Jn&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}let ni=!0,ii=!1;function ri(){return ii=!0,ni}class oi{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert");let e=this.inertDocument.body;if(null==e){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t),e=this.inertDocument.createElement("body"),t.appendChild(e)}e.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!e.querySelector||e.querySelector("svg")?(e.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=e.querySelector&&e.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(i){return null}const e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);const n=e.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(t){t="<body><remove></remove>"+t+"</body>";try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}getInertBodyElement_InertDocument(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let i=e.length-1;0<i;i--){const n=e.item(i).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const ai=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,si=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ui(t){return(t=String(t)).match(ai)||t.match(si)?t:(ri()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function li(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function ci(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const hi=li("area,br,col,hr,img,wbr"),di=li("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),pi=li("rp,rt"),fi=ci(pi,di),gi=ci(hi,ci(di,li("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ci(pi,li("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),fi),mi=li("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yi=li("srcset"),_i=ci(mi,yi,li("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),li("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),vi=li("script,style,template");class bi{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!gi.hasOwnProperty(e))return this.sanitizedSomething=!0,!vi.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r),e=t.name,o=e.toLowerCase();if(!_i.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let a=t.value;mi[o]&&(a=ui(a)),yi[o]&&(i=a,a=(i=String(i)).split(",").map(t=>ui(t.trim())).join(", ")),this.buf.push(" ",e,'="',Ci(a),'"')}var i;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();gi.hasOwnProperty(e)&&!hi.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Ci(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const xi=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wi=/([^\#-~ |!])/g;function Ci(t){return t.replace(/&/g,"&amp;").replace(xi,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(wi,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Pi;function Mi(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}const Oi=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}(),ki=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:attr|calc|var))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Ei=/^url\(([^)]+)\)$/;function Si(t){const e=Ai();return e?e.sanitize(Oi.HTML,t)||"":ei(t,"HTML")?ti(t):function(t,e){let n=null;try{Pi=Pi||new oi(t);let i=e?String(e):"";n=Pi.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=n.innerHTML,n=Pi.getInertBodyElement(i)}while(i!==o);const a=new bi,s=a.sanitizeChildren(Mi(n)||n);return ri()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),s}finally{if(n){const t=Mi(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}(mn(),En(t))}function Ti(t){const e=Ai();return e?e.sanitize(Oi.URL,t)||"":ei(t,"URL")?ti(t):ui(En(t))}function Ai(){const t=Le();return t&&t[12]}function Ii(t){for(;Array.isArray(t);)t=t[0];return t}function Di(t,e){return Ii(e[t+19])}function Ri(t,e){return Ii(e[t.index])}function Fi(t,e){return t.data[e+19]}function Li(t,e){return t[e+19]}function zi(t,e){const n=e[t];return ke(n)?n:n[0]}function Ni(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Bi(t){return 4==(4&t[2])}function Vi(t){return 128==(128&t[2])}function Ui(t,e){return null===t||null==e?null:t[e]}function ji(t){t[18]=0}function qi(t,e){t.__ngContext__=e}function Gi(t){throw new Error(`Multiple components match node with tagname ${t.tagName}`)}function Hi(){throw new Error("Cannot mix multi providers and regular providers")}function Zi(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const n=e.length;if(r+n===i||t.charCodeAt(r+n)<=32)return r}n=r+1}}function Wi(t,e,n){let i=0;for(;i<t.length;){let r=t[i++];if(n&&"class"===r){if(r=t[i],-1!==Zi(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<t.length&&"string"==typeof(r=t[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function Ki(t,e,n){return e===(0!==t.type||n?t.tagName:"ng-template")}function Xi(t,e,n){let i=4;const r=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(bn(t[e]))return e;return t.length}(r);let a=!1;for(let s=0;s<e.length;s++){const u=e[s];if("number"!=typeof u){if(!a)if(4&i){if(i=2|1&i,""!==u&&!Ki(t,u,n)||""===u&&1===e.length){if($i(i))return!1;a=!0}}else{const l=8&i?u:e[++s];if(8&i&&null!==t.attrs){if(!Wi(t.attrs,l,n)){if($i(i))return!1;a=!0}continue}const c=Yi(8&i?"class":u,r,0==t.type&&"ng-template"!==t.tagName,n);if(-1===c){if($i(i))return!1;a=!0;continue}if(""!==l){let t;t=c>o?"":r[c+1].toLowerCase();const e=8&i?t:null;if(e&&-1!==Zi(e,l,0)||2&i&&l!==t){if($i(i))return!1;a=!0}}}}else{if(!a&&!$i(i)&&!$i(u))return!1;if(a&&$i(u))continue;a=!1,i=u|1&i}}return $i(i)||a}function $i(t){return 0==(1&t)}function Yi(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let n=!1;for(;r<e.length;){const i=e[r];if(i===t)return r;if(3===i||6===i)n=!0;else{if(1===i||2===i){let t=e[++r];for(;"string"==typeof t;)t=e[++r];continue}if(4===i)break;if(0===i){r+=4;continue}}r+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){if(t[n]===e)return n;n++}return-1}(e,t)}function Qi(t,e,n=!1){for(let i=0;i<e.length;i++)if(Xi(t,e[i],n))return!0;return!1}function Ji(t,e){t:for(let n=0;n<e.length;n++){const i=e[n];if(t.length===i.length){for(let e=0;e<t.length;e++)if(t[e]!==i[e])continue t;return!0}}return!1}function tr(t,e){return t?":not("+e.trim()+")":e}function er(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let a=t[n];if("string"==typeof a)if(2&i){const e=t[++n];r+="["+a+(e.length>0?'="'+e+'"':"")+"]"}else 8&i?r+="."+a:4&i&&(r+=" "+a);else""===r||$i(a)||(e+=tr(o,r),r=""),i=a,o=o||!$i(i);n++}return""!==r&&(e+=tr(o,r)),e}const nr={};function ir(t){const e=t[3];return Ee(e)?e[3]:e}function rr(t){or(ze(),Le(),an()+t,qe())}function or(t,e,n,i){if(!i)if(3==(3&e[2])){const i=t.preOrderCheckHooks;null!==i&&ln(e,i,n)}else{const i=t.preOrderHooks;null!==i&&cn(e,i,0,n)}sn(n)}function ar(t,e){return t<<17|e<<2}function sr(t){return t>>17&32767}function ur(t){return 2|t}function lr(t){return(131068&t)>>2}function cr(t,e){return-131069&t|e<<2}function hr(t){return 1|t}function dr(t,e){const n=t.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const r=n[i],o=n[i+1];if(-1!==o){const n=t.data[o];Ye(r),n.contentQueries(2,e[o],o)}}}function pr(t,e,n){return yn(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function fr(t,e,n,i,r,o,a,s,u,l){const c=e.blueprint.slice();return c[0]=r,c[2]=140|i,ji(c),c[3]=c[15]=t,c[8]=n,c[10]=a||t&&t[10],c[11]=s||t&&t[11],c[12]=u||t&&t[12]||null,c[9]=l||t&&t[9]||null,c[6]=o,c[16]=2==e.type?t[16]:c,c}function gr(t,e,n,i,r,o){const a=n+19,s=t.data[a]||function(t,e,n,i,r,o){const a=Be(),s=Ue(),u=s?a:a&&a.parent,l=t.data[n]=Mr(0,u&&u!==e?u:null,i,n,r,o);return null===t.firstChild&&(t.firstChild=l),a&&(!s||null!=a.child||null===l.parent&&2!==a.type?s||(a.next=l):a.child=l),l}(t,e,a,i,r,o);return Ve(s,!0),s}function mr(t,e,n){Je(e,e[6]);try{const i=t.viewQuery;null!==i&&Kr(1,i,n);const r=t.template;null!==r&&vr(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&dr(t,e),t.staticViewQueries&&Kr(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)qr(t,e[n])}(e,o)}finally{e[2]&=-5,on()}}function yr(t,e,n,i){const r=e[2];if(256==(256&r))return;Je(e,e[6]);const o=qe();try{ji(e),Re.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&vr(t,e,n,2,i);const a=3==(3&r);if(!o)if(a){const n=t.preOrderCheckHooks;null!==n&&ln(e,n,null)}else{const n=t.preOrderHooks;null!==n&&cn(e,n,0,null),hn(e,0)}if(function(t){let e=t[13];for(;null!==e;){let n;if(Ee(e)&&(n=e[2])>>1==-1){for(let t=9;t<e.length;t++){const n=e[t],i=n[1];Vi(n)&&yr(i,n,i.template,n[8])}0!=(1&n)&&Ur(e,t[16])}e=e[4]}}(e),null!==t.contentQueries&&dr(t,e),!o)if(a){const n=t.contentCheckHooks;null!==n&&ln(e,n)}else{const n=t.contentHooks;null!==n&&cn(e,n,1),hn(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let i=t.expandoStartIndex,r=-1,o=-1;for(let t=0;t<n.length;t++){const a=n[t];"number"==typeof a?a<=0?(o=0-a,sn(o),i+=9+n[++t],r=i):i+=a:(null!==a&&(Xe(i,r),a(2,e[r])),r++)}}}finally{sn(-1)}}(t,e);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)jr(t,e[n])}(e,s);const u=t.viewQuery;if(null!==u&&Kr(2,u,i),!o)if(a){const n=t.viewCheckHooks;null!==n&&ln(e,n)}else{const n=t.viewHooks;null!==n&&cn(e,n,2),hn(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73)}finally{on()}}function _r(t,e,n,i){const r=e[10],o=!qe(),a=Bi(e);try{o&&!a&&r.begin&&r.begin(),a&&mr(t,e,i),yr(t,e,n,i)}finally{o&&!a&&r.end&&r.end()}}function vr(t,e,n,i,r){const o=an();try{sn(-1),2&i&&e.length>19&&or(t,e,0,qe()),n(i,r)}finally{sn(o)}}function br(t,e,n){if(Se(e)){const i=e.directiveEnd;for(let r=e.directiveStart;r<i;r++){const e=t.data[r];e.contentQueries&&e.contentQueries(1,n[r],r)}}}function xr(t,e,n){Fe()&&(function(t,e,n,i){const r=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Fn(n,e),qi(i,e);const a=n.initialInputs;for(let s=r;s<o;s++){const i=t.data[s],o=Ie(i);o&&zr(e,n,i);const u=Gn(e,t,s,n);qi(u,e),null!==a&&Nr(0,s-r,u,i,0,a),o&&(zi(n.index,e)[8]=u)}}(t,e,n,Ri(n,e)),128==(128&n.flags)&&function(t,e,n){const i=n.directiveStart,r=n.directiveEnd,o=t.expandoInstructions,a=t.firstCreatePass,s=n.index-19;try{sn(s);for(let n=i;n<r;n++){const i=t.data[n],r=e[n];null!==i.hostBindings||0!==i.hostVars||null!==i.hostAttrs?Ar(i,r):a&&o.push(null)}}finally{sn(-1)}}(t,e,n))}function wr(t,e,n=Ri){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const a=i[o+1],s=-1===a?n(e,t):t[a];t[r++]=s}}}function Cr(t){return t.tView||(t.tView=Pr(1,-1,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts))}function Pr(t,e,n,i,r,o,a,s,u,l){const c=19+i,h=c+r,d=function(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:nr);return n}(c,h);return d[1]={type:t,id:e,blueprint:d,template:n,queries:null,viewQuery:s,node:null,data:d.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:u,consts:l}}function Mr(t,e,n,i,r,o){return{type:n,index:i,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,residualStyles:void 0,classes:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Or(t,e,n){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(e,r):n[i]=[e,r]}return n}function kr(t,e,n,i,r,o,a,s){const u=Di(n,e),l=Fi(t,n);let c,h=l.inputs;if(!a&&null!=h&&(c=h[i]))Jr(t,e,c,i,r),Te(l)&&function(t,e){const n=zi(e,t);16&n[2]||(n[2]|=64)}(e,n+19);else if(3===l.type){i="class"===(d=i)?"className":"for"===d?"htmlFor":"formaction"===d?"formAction":"innerHtml"===d?"innerHTML":"readonly"===d?"readOnly":"tabindex"===d?"tabIndex":d;const t=s?s(l,e):e[11];r=null!=o?o(r,l.tagName||"",i):r,yn(t)?t.setProperty(u,i,r):xn(i)||(u.setProperty?u.setProperty(i,r):u[i]=r)}var d}function Er(t,e,n,i){let r=!1;if(Fe()){const o=function(t,e,n){const i=t.directiveRegistry;let r=null;if(i)for(let o=0;o<i.length;o++){const a=i[o];Qi(n,a.selectors,!1)&&(r||(r=[]),Bn(Fn(n,e),t,a.type),Ie(a)?(2&n.flags&&Gi(n),Dr(t,n),r.unshift(a)):r.push(a))}return r}(t,e,n),a=null===i?null:{"":-1};if(null!==o){let i=0;r=!0,Fr(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}Ir(t,n,o.length);let s=!1,u=!1;for(let r=0;r<o.length;r++){const l=o[r];n.mergedAttrs=wn(n.mergedAttrs,l.hostAttrs),Lr(t,e,l),Rr(t.data.length-1,l,a),null!==l.contentQueries&&(n.flags|=8),null===l.hostBindings&&null===l.hostAttrs&&0===l.hostVars||(n.flags|=128),!s&&(l.onChanges||l.onInit||l.doCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-19),s=!0),u||!l.onChanges&&!l.doCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-19),u=!0),Sr(t,l),i+=l.hostVars}!function(t,e){const n=e.directiveEnd,i=t.data,r=e.attrs,o=[];let a=null,s=null;for(let u=e.directiveStart;u<n;u++){const t=i[u],e=t.inputs;o.push(null!==r?Br(e,r):null),a=Or(e,u,a),s=Or(t.outputs,u,s)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=s}(t,n),Tr(t,e,i)}a&&function(t,e,n){if(e){const i=t.localNames=[];for(let t=0;t<e.length;t+=2){const r=n[e[t+1]];if(null==r)throw new Error(`Export of name '${e[t+1]}' not found!`);i.push(e[t],r)}}}(n,i,a)}return n.mergedAttrs=wn(n.mergedAttrs,n.attrs),r}function Sr(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function Tr(t,e,n){for(let i=0;i<n;i++)e.push(nr),t.blueprint.push(nr),t.data.push(null)}function Ar(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ir(t,e,n){const i=19-e.index,r=t.data.length-(65535&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(i,r,n)}function Dr(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Rr(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;Ie(e)&&(n[""]=t)}}function Fr(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Lr(t,e,n){t.data.push(n);const i=n.factory||(n.factory=Me(n.type)),r=new fn(i,Ie(n),null);t.blueprint.push(r),e.push(r)}function zr(t,e,n){const i=Ri(e,t),r=Cr(n),o=t[10],a=Gr(t,fr(t,r,null,n.onPush?64:16,i,e,o,o.createRenderer(i,n)));t[e.index]=a}function Nr(t,e,n,i,r,o){const a=o[e];if(null!==a){const t=i.setInput;for(let e=0;e<a.length;){const r=a[e++],o=a[e++],s=a[e++];null!==t?i.setInput(n,s,r,o):n[o]=s}}}function Br(t,e){let n=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,t[r],e[i+1])),i+=2}else i+=2;else i+=4}return n}function Vr(t,e,n,i){return new Array(t,!0,-2,e,null,null,i,n,null)}function Ur(t,e){const n=t[5];for(let i=0;i<n.length;i++){const t=n[i],r=t[3][3][16];if(r!==e&&0==(16&r[2])){const e=t[1];yr(e,t,e.template,t[8])}}}function jr(t,e){const n=zi(e,t);if(Vi(n)&&80&n[2]){const t=n[1];yr(t,n,t.template,n[8])}}function qr(t,e){const n=zi(e,t),i=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(i,n),mr(i,n,n[8])}function Gr(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Hr(t){for(;t;){t[2]|=64;const e=ir(t);if(De(t)&&!e)return t;t=e}return null}function Zr(t,e,n){const i=e[10];i.begin&&i.begin();try{yr(t,e,t.template,n)}catch(r){throw Qr(e,r),r}finally{i.end&&i.end()}}function Wr(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],i=Ni(n),r=i[1];_r(r,i,r.template,n)}}(t[8])}function Kr(t,e,n){Ye(0),e(t,n)}const Xr=(()=>Promise.resolve(null))();function $r(t){return t[7]||(t[7]=[])}function Yr(t){return t.cleanup||(t.cleanup=[])}function Qr(t,e){const n=t[9],i=n?n.get(Qn,null):null;i&&i.handleError(e)}function Jr(t,e,n,i,r){for(let o=0;o<n.length;){const a=n[o++],s=n[o++],u=e[a],l=t.data[a];null!==l.setInput?l.setInput(u,r,i,s):u[s]=r}}function to(t,e){const n=e[3];return-1===t.index?Ee(n)?n:null:n}function eo(t,e){const n=to(t,e);return n?fo(e[11],n[7]):null}function no(t,e,n,i,r){if(null!=i){let o,a=!1;Ee(i)?o=i:ke(i)&&(a=!0,i=i[0]);const s=Ii(i);0===t&&null!==n?null==r?ho(e,n,s):co(e,n,s,r||null):1===t&&null!==n?co(e,n,s,r||null):2===t?function(t,e,n){const i=fo(t,e);i&&function(t,e,n,i){yn(t)?t.removeChild(e,n,i):e.removeChild(n)}(t,i,e,n)}(e,s,a):3===t&&e.destroyNode(s),null!=o&&function(t,e,n,i,r){const o=n[7];o!==Ii(n)&&no(e,t,i,o,r);for(let a=9;a<n.length;a++){const r=n[a];vo(r[1],r,t,e,i,o)}}(e,t,o,n,r)}}function io(t,e,n,i){const r=eo(t.node,e);r&&vo(t,e,e[11],n?1:2,r,i)}function ro(t,e){const n=t[5],i=n.indexOf(e);n.splice(i,1)}function oo(t,e){if(t.length<=9)return;const n=9+e,i=t[n];if(i){const r=i[17];null!==r&&r!==t&&ro(r,i),e>0&&(t[n-1][4]=i[4]);const o=ae(t,9+e);io(i[1],i,!1,null);const a=o[5];null!==a&&a.detachView(o[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function ao(t,e){if(!(256&e[2])){const n=e[11];yn(n)&&n.destroyNode&&vo(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return uo(t[1],t);for(;e;){let n=null;if(ke(e))n=e[13];else{const t=e[9];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ke(e)&&uo(e[1],e),e=so(e,t);null===e&&(e=t),ke(e)&&uo(e[1],e),n=e&&e[4]}e=n}}(e)}}function so(t,e){let n;return ke(t)&&(n=t[6])&&2===n.type?to(n,t):t[3]===e?null:t[3]}function uo(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const t=e[n[i]];t instanceof fn||n[i+1].call(t)}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const r=n[i+1],o="function"==typeof r?r(e):Ii(e[r]),a=t[n[i+2]],s=n[i+3];"boolean"==typeof s?o.removeEventListener(n[i],a,s):s>=0?t[s]():t[-s].unsubscribe(),i+=2}else n[i].call(t[n[i+1]]);e[7]=null}}(t,e);const n=e[6];n&&3===n.type&&yn(e[11])&&e[11].destroy();const i=e[17];if(null!==i&&Ee(e[3])){i!==e[3]&&ro(i,e);const n=e[5];null!==n&&n.detachView(t)}}}function lo(t,e,n){let i=e.parent;for(;null!=i&&(4===i.type||5===i.type);)i=(e=i).parent;if(null==i){const t=n[6];return 2===t.type?eo(t,n):n[0]}if(e&&5===e.type&&4&e.flags)return Ri(e,n).parentNode;if(2&i.flags){const e=t.data,n=e[e[i.index].directiveStart].encapsulation;if(n!==de.ShadowDom&&n!==de.Native)return null}return Ri(i,n)}function co(t,e,n,i){yn(t)?t.insertBefore(e,n,i):e.insertBefore(n,i,!0)}function ho(t,e,n){yn(t)?t.appendChild(e,n):e.appendChild(n)}function po(t,e,n,i){null!==i?co(t,e,n,i):ho(t,e,n)}function fo(t,e){return yn(t)?t.parentNode(e):e.parentNode}function go(t,e){if(2===t.type){const n=to(t,e);return null===n?null:yo(n.indexOf(e,9)-9,n)}return 4===t.type||5===t.type?Ri(t,e):null}function mo(t,e,n,i){const r=lo(t,i,e);if(null!=r){const t=e[11],o=go(i.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)po(t,r,n[e],o);else po(t,r,n,o)}}function yo(t,e){const n=9+t+1;if(n<e.length){const t=e[n],i=t[1].firstChild;if(null!==i)return function t(e,n){if(null!==n){const i=n.type;if(3===i)return Ri(n,e);if(0===i)return yo(-1,e[n.index]);if(4===i||5===i){const i=n.child;if(null!==i)return t(e,i);{const t=e[n.index];return Ee(t)?yo(-1,t):Ii(t)}}{const i=e[16],r=i[6],o=ir(i),a=r.projection[n.projection];return null!=a?t(o,a):t(e,n.next)}}return null}(t,i)}return e[7]}function _o(t,e,n,i,r,o,a){for(;null!=n;){const s=i[n.index],u=n.type;a&&0===e&&(s&&qi(Ii(s),i),n.flags|=4),64!=(64&n.flags)&&(4===u||5===u?(_o(t,e,n.child,i,r,o,!1),no(e,t,r,s,o)):1===u?bo(t,e,i,n,r,o):no(e,t,r,s,o)),n=a?n.projectionNext:n.next}}function vo(t,e,n,i,r,o){_o(n,i,t.node.child,e,r,o,!1)}function bo(t,e,n,i,r,o){const a=n[16],s=a[6].projection[i.projection];if(Array.isArray(s))for(let u=0;u<s.length;u++)no(e,t,r,s[u],o);else _o(t,e,s,a[3],r,o,!0)}function xo(t,e,n){yn(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function wo(t,e,n){yn(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class Co{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null,this._tViewNode=null}get rootNodes(){const t=this._lView;return null==t[0]?function t(e,n,i,r,o=!1){for(;null!==i;){const a=n[i.index];if(null!==a&&r.push(Ii(a)),Ee(a))for(let e=9;e<a.length;e++){const n=a[e],i=n[1].firstChild;null!==i&&t(n[1],n,i,r)}const s=i.type;if(4===s||5===s)t(e,n,i.child,r);else if(1===s){const e=n[16],o=e[6],a=ir(e);let s=o.projection[i.projection];null!==s&&null!==a&&t(a[1],a,s,r,!0)}i=o?i.projectionNext:i.next}return r}(t[1],t,t[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}ao(this._lView[1],this._lView)}onDestroy(t){var e,n,i;e=this._lView[1],i=t,$r(n=this._lView).push(i),e.firstCreatePass&&Yr(e).push(n[7].length-1,null)}markForCheck(){Hr(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Zr(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Ge(!0);try{Zr(t,e,n)}finally{Ge(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,vo(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Po extends Co{constructor(t){super(t),this._view=t}detectChanges(){Wr(this._view)}checkNoChanges(){!function(t){Ge(!0);try{Wr(t)}finally{Ge(!1)}}(this._view)}get context(){return null}}let Mo,Oo,ko;function Eo(t,e,n){return Mo||(Mo=class extends t{}),new Mo(Ri(e,n))}function So(t,e,n,i){return Oo||(Oo=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=fr(this._declarationView,e,t,16,null,e.node);n[17]=this._declarationView[this._declarationTContainer.index];const i=this._declarationView[5];null!==i&&(n[5]=i.createEmbeddedView(e)),mr(e,n,t);const r=new Co(n);return r._tViewNode=n[6],r}}),0===n.type?new Oo(i,n,Eo(e,n,i)):null}function To(t,e,n,i){let r;ko||(ko=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return Eo(e,this._hostTNode,this._hostView)}get injector(){return new Wn(this._hostTNode,this._hostView)}get parentInjector(){const t=Nn(this._hostTNode,this._hostView),e=kn(t,this._hostView),n=function(t,e,n){if(n.parent&&-1!==n.parent.injectorIndex){const t=n.parent.injectorIndex;let e=n.parent;for(;null!=e.parent&&t==e.parent.injectorIndex;)e=e.parent;return e}let i=On(t),r=e,o=e[6];for(;i>1;)r=r[15],o=r[6],i--;return o}(t,this._hostView,this._hostTNode);return Pn(t)&&null!=n?new Wn(n,e):new Wn(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-9}createEmbeddedView(t,e,n){const i=t.createEmbeddedView(e||{});return this.insert(i,n),i}createComponent(t,e,n,i,r){const o=n||this.parentInjector;if(!r&&null==t.ngModule&&o){const t=o.get(ne,null);t&&(r=t)}const a=t.create(o,i,void 0,r);return this.insert(a.hostView,e),a}insert(t,e){const n=t._lView,i=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Ee(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],i=new ko(e,e[6],e[3]);i.detach(i.indexOf(t))}}const r=this._adjustIndex(e);return function(t,e,n,i){const r=9+i,o=n.length;i>0&&(n[r-1][4]=e),i<o-9?(e[4]=n[r],oe(n,9+i,e)):(n.push(e),e[4]=null),e[3]=n;const a=e[17];null!==a&&n!==a&&function(t,e){const n=t[5],i=e[3][3][16];16!=(16&i[2])&&e[16]!==i&&(t[2]|=1),null===n?t[5]=[e]:n.push(e)}(a,e);const s=e[5];null!==s&&s.insertView(t),e[2]|=128}(i,n,this._lContainer,r),io(i,n,!0,yo(r,this._lContainer)),t.attachToViewContainerRef(this),oe(this._lContainer[8],r,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1);(function(t,e){const n=oo(t,e);n&&ao(n[1],n)})(this._lContainer,e),ae(this._lContainer[8],e)}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=oo(this._lContainer,e);return n&&null!=ae(this._lContainer[8],e)?new Co(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=i[n.index];if(Ee(o))r=o,function(t,e){t[2]=-2}(r);else{let t;if(4===n.type)t=Ii(o);else if(t=i[11].createComment(""),De(i)){const e=i[11],r=Ri(n,i);co(e,fo(e,r),t,function(t,e){return yn(t)?t.nextSibling(e):e.nextSibling}(e,r))}else mo(i[1],i,t,n);i[n.index]=r=Vr(o,i,t,n),Gr(i,r)}return new ko(r,n,i)}let Ao=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Io(),t})();const Io=function(t=!1){return function(t,e,n){if(!n&&Te(t)){const n=zi(t.index,e);return new Co(n,n)}return 3===t.type||0===t.type||4===t.type||5===t.type?new Co(e[16],e):null}(Be(),Le(),t)},Do=new Ut("Set Injector scope."),Ro={},Fo={},Lo=[];let zo=void 0;function No(){return void 0===zo&&(zo=new ee),zo}function Bo(t,e=null,n=null,i){return new Vo(t,n,e||No(),i)}class Vo{constructor(t,e,n,i=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const r=[];e&&re(e,n=>this.processProvider(n,t,e)),re([t],t=>this.processInjectorType(t,[],r)),this.records.set(jt,qo(void 0,this));const o=this.records.get(Do);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof t?null:Ct(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=qt,n=ct.Default){this.assertNotDestroyed();const i=Kt(this);try{if(!(n&ct.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(r=t)||"object"==typeof r&&r instanceof Ut)&&gt(t);e=n&&this.injectableDefInScope(n)?qo(Uo(t),Ro):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&ct.Self?No():this.parent).get(t,e=n&ct.Optional&&e===qt?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(Ct(t)),i)throw o;return function(t,e,n,i){const r=t.ngTempTokenPath;throw e.__source&&r.unshift(e.__source),t.message=function(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=Ct(e);if(Array.isArray(e))r=e.map(Ct).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let i=e[n];t.push(n+":"+("string"==typeof i?JSON.stringify(i):Ct(i)))}r=`{${t.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(Gt,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{Kt(i)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(Ct(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=kt(t)))return!1;let i=yt(t);const r=null==i&&t.ngModule||void 0,o=void 0===r?t:r,a=-1!==n.indexOf(o);if(void 0!==r&&(i=yt(r)),null==i)return!1;if(null!=i.imports&&!a){let t;n.push(o);try{re(i.imports,i=>{this.processInjectorType(i,e,n)&&(void 0===t&&(t=[]),t.push(i))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:i}=t[e];re(i,t=>this.processProvider(t,n,i||Lo))}}this.injectorDefTypes.add(o),this.records.set(o,qo(i.factory,Ro));const s=i.providers;if(null!=s&&!a){const e=t;re(s,t=>this.processProvider(t,e,s))}return void 0!==r&&void 0!==t.providers}processProvider(t,e,n){let i=Ho(t=kt(t))?t:kt(t&&t.provide);const r=function(t,e,n){return Go(t)?qo(void 0,t.useValue):qo(jo(t,e,n),Ro)}(t,e,n);if(Ho(t)||!0!==t.multi){const t=this.records.get(i);t&&void 0!==t.multi&&Hi()}else{let e=this.records.get(i);e?void 0===e.multi&&Hi():(e=qo(void 0,Ro,!0),e.factory=()=>te(e.multi),this.records.set(i,e)),i=t,e.multi.push(t)}this.records.set(i,r)}hydrate(t,e){var n;return e.value===Fo?function(t){throw new Error(`Cannot instantiate cyclic dependency! ${t}`)}(Ct(t)):e.value===Ro&&(e.value=Fo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Uo(t){const e=gt(t),n=null!==e?e.factory:Me(t);if(null!==n)return n;const i=yt(t);if(null!==i)return i.factory;if(t instanceof Ut)throw new Error(`Token ${Ct(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=se(e,"?");throw new Error(`Can't resolve all parameters for ${Ct(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[_t]||t[xt]||t[bt]&&t[bt]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\n`+`This will become an error in v10. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function jo(t,e,n){let i=void 0;if(Ho(t)){const e=kt(t);return Me(e)||Uo(e)}if(Go(t))i=()=>kt(t.useValue);else if((r=t)&&r.useFactory)i=()=>t.useFactory(...te(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))i=()=>Yt(kt(t.useExisting));else{const r=kt(t&&(t.useClass||t.provide));if(r||function(t,e,n){let i="";throw t&&e&&(i=` - only instances of Provider and Type are allowed, got: [${e.map(t=>t==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${Ct(t)}'`+i)}(e,n,t),!function(t){return!!t.deps}(t))return Me(r)||Uo(r);i=()=>new r(...te(t.deps))}var r;return i}function qo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Go(t){return null!==t&&"object"==typeof t&&Ht in t}function Ho(t){return"function"==typeof t}const Zo=function(t,e,n){return function(t,e=null,n=null,i){const r=Bo(t,e,n,i);return r._resolveInjectorDefTypes(),r}({name:n},e,t,n)};let Wo=(()=>{class t{static create(t,e){return Array.isArray(t)?Zo(t,e,""):Zo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=qt,t.NULL=new ee,t.\u0275prov=pt({token:t,providedIn:"any",factory:()=>Yt(jt)}),t.__NG_ELEMENT_ID__=-1,t})();const Ko=new Ut("AnalyzeForEntryComponents");let Xo=new Map;const $o=new Set;function Yo(t){return"string"==typeof t?t:t.text()}function Qo(t,e){let n=t.styles,i=t.classes,r=0;for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?r=t:1==r?i=Pt(i,t):2==r&&(n=Pt(n,t+": "+e[++o]+";"))}null!==n&&(t.styles=n),null!==i&&(t.classes=i)}let Jo=null;function ta(){if(!Jo){const t=Dt.Symbol;if(t&&t.iterator)Jo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Jo=n)}}}return Jo}function ea(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}class na{constructor(t){this.wrapped=t}static wrap(t){return new na(t)}static unwrap(t){return na.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof na}}function ia(t){return!!ra(t)&&(Array.isArray(t)||!(t instanceof Map)&&ta()in t)}function ra(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function oa(t,e,n){return t[e]=n}function aa(t,e){return t[e]}function sa(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function ua(t,e,n,i){const r=sa(t,e,n);return sa(t,e+1,i)||r}function la(t,e,n,i,r,o){const a=ua(t,e,n,i);return ua(t,e+2,r,o)||a}function ca(t,e,n,i){const r=Le();return sa(r,We(),e)&&function(t,e,n,i,r,o,a){const s=Di(t,r),u=r[11];if(null==n)yn(u)?u.removeAttribute(s,e,a):s.removeAttribute(e);else{const r=Fi(i,t),l=null==o?En(n):o(n,r.tagName||"",e);yn(u)?u.setAttribute(s,e,l,a):a?s.setAttributeNS(a,e,l):s.setAttribute(e,l)}}(an(),t,e,ze(),r,n,i),ca}function ha(t,e,n,i){return sa(t,We(),n)?e+En(n)+i:nr}function da(t,e,n,i,r,o,a,s){const u=Le(),l=ze(),c=t+19,h=l.firstCreatePass?function(t,e,n,i,r,o,a,s,u){const l=e.consts,c=gr(e,n[6],t,0,a||null,Ui(l,s));Er(e,n,c,Ui(l,u)),un(e,c);const h=c.tViews=Pr(2,-1,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l),d=Mr(0,null,2,-1,null,null);return d.injectorIndex=c.injectorIndex,h.node=d,null!==e.queries&&(e.queries.template(e,c),h.queries=e.queries.embeddedTView(c)),c}(t,l,u,e,n,i,r,o,a):l.data[c];Ve(h,!1);const d=u[11].createComment("");mo(l,u,d,h),qi(d,u),Gr(u,u[c]=Vr(d,u,d,h)),Ae(h)&&xr(l,u,h),null!=a&&wr(u,h,s)}function pa(t){return Li(Re.lFrame.contextLView,t)}function fa(t,e=ct.Default){const n=Le();return null==n?Yt(t,e):Vn(Be(),n,kt(t),e)}function ga(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let i=0;for(;i<t;){const r=n[i];if(bn(r))break;if(0===r)i+=2;else if("number"==typeof r)for(i++;i<t&&"string"==typeof n[i];)i++;else{if(r===e)return n[i+1];i+=2}}}return null}(Be(),t)}function ma(){throw new Error("invalid")}function ya(t,e,n){const i=Le();if(sa(i,We(),e)){const r=an();kr(ze(),i,r,t,e,n)}return ya}function _a(t,e,n,i,r){const o=r?"class":"style";Jr(t,n,e.inputs[o],o,i)}function va(t,e,n,i){const r=Le(),o=ze(),a=19+t,s=r[11],u=r[a]=pr(e,s,Re.lFrame.currentNamespace),l=o.firstCreatePass?function(t,e,n,i,r,o,a){const s=e.consts,u=Ui(s,o),l=gr(e,n[6],t,3,r,u);return Er(e,n,l,Ui(s,a)),null!==l.mergedAttrs&&Qo(l,l.mergedAttrs),null!==e.queries&&e.queries.elementStart(e,l),l}(t,o,r,0,e,n,i):o.data[a];Ve(l,!0);const c=l.mergedAttrs;null!==c&&vn(s,u,c);const h=l.classes;null!==h&&wo(s,u,h);const d=l.styles;null!==d&&xo(s,u,d),mo(o,r,u,l),0===Re.lFrame.elementDepthCount&&qi(u,r),Re.lFrame.elementDepthCount++,Ae(l)&&(xr(o,r,l),br(o,l,r)),null!==i&&wr(r,l)}function ba(){let t=Be();Ue()?je():(t=t.parent,Ve(t,!1));const e=t;Re.lFrame.elementDepthCount--;const n=ze();n.firstCreatePass&&(un(n,t),Se(t)&&n.queries.elementEnd(t)),null!==e.classes&&function(t){return 0!=(16&t.flags)}(e)&&_a(n,e,Le(),e.classes,!0),null!==e.styles&&function(t){return 0!=(32&t.flags)}(e)&&_a(n,e,Le(),e.styles,!1)}function xa(t,e,n,i){va(t,e,n,i),ba()}function wa(t,e,n){const i=Le(),r=ze(),o=t+19,a=r.firstCreatePass?function(t,e,n,i,r){const o=e.consts,a=Ui(o,i),s=gr(e,n[6],t,4,"ng-container",a);return null!==a&&Qo(s,a),Er(e,n,s,Ui(o,r)),null!==e.queries&&e.queries.elementStart(e,s),s}(t,r,i,e,n):r.data[o];Ve(a,!0);const s=i[o]=i[11].createComment("");mo(r,i,s,a),qi(s,i),Ae(a)&&(xr(r,i,a),br(r,a,i)),null!=n&&wr(i,a)}function Ca(){let t=Be();const e=ze();Ue()?je():(t=t.parent,Ve(t,!1)),e.firstCreatePass&&(un(e,t),Se(t)&&e.queries.elementEnd(t))}function Pa(t,e,n){wa(t,e,n),Ca()}function Ma(){return Le()}function Oa(t){return!!t&&"function"==typeof t.then}function ka(t){return!!t&&"function"==typeof t.subscribe}function Ea(t,e,n=!1,i){const r=Le(),o=ze(),a=Be();return function(t,e,n,i,r,o,a=!1,s){const u=Ae(i),l=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),c=$r(e);let h=!0;if(3===i.type){const d=Ri(i,e),p=s?s(d):pe,f=p.target||d,g=c.length,m=s?t=>s(Ii(t[i.index])).target:i.index;if(yn(n)){let a=null;if(!s&&u&&(a=function(t,e,n,i){const r=t.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const t=r[o];if(t===n&&r[o+1]===i){const t=e[7],n=r[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,r,i.index)),null!==a)(a.__ngLastListenerFn__||a).__ngNextListenerFn__=o,a.__ngLastListenerFn__=o,h=!1;else{o=Ta(i,e,o,!1);const t=n.listen(p.name||f,r,o);c.push(o,t),l&&l.push(r,m,g,g+1)}}else o=Ta(i,e,o,!0),f.addEventListener(r,o,a),c.push(o),l&&l.push(r,m,g,a)}const d=i.outputs;let p;if(h&&null!==d&&(p=d[r])){const t=p.length;if(t)for(let n=0;n<t;n+=2){const t=e[p[n]][p[n+1]].subscribe(o),a=c.length;c.push(o,t),l&&l.push(r,i.index,a,-(a+1))}}}(o,r,r[11],a,t,e,n,i),Ea}function Sa(t,e,n){try{return!1!==e(n)}catch(i){return Qr(t,i),!1}}function Ta(t,e,n,i){return function r(o){if(o===Function)return n;const a=2&t.flags?zi(t.index,e):e;0==(32&e[2])&&Hr(a);let s=Sa(e,n,o),u=r.__ngNextListenerFn__;for(;u;)s=Sa(e,u,o)&&s,u=u.__ngNextListenerFn__;return i&&!1===s&&(o.preventDefault(),o.returnValue=!1),s}}function Aa(t=1){return function(t){return(Re.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Re.lFrame.contextLView))[8]}(t)}function Ia(t,e){let n=null;const i=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let r=0;r<e.length;r++){const o=e[r];if("*"!==o){if(null===i?Qi(t,o,!0):Ji(i,o))return r}else n=r}return n}function Da(t){const e=Le()[16][6];if(!e.projection){const n=e.projection=se(t?t.length:1,null),i=n.slice();let r=e.child;for(;null!==r;){const e=t?Ia(r,t):0;null!==e&&(i[e]?i[e].projectionNext=r:n[e]=r,i[e]=r),r=r.next}}}function Ra(t,e=0,n){const i=Le(),r=ze(),o=gr(r,i[6],t,1,null,n||null);null===o.projection&&(o.projection=e),je(),function(t,e,n){bo(e[11],0,e,n,lo(t,n,e),go(n.parent||e[6],e))}(r,i,o)}function Fa(t,e,n){return La(t,"",e,"",n),Fa}function La(t,e,n,i,r){const o=Le(),a=ha(o,e,n,i);if(a!==nr){const e=an();kr(ze(),o,e,t,a,r)}return La}function za(t,e,n,i,r,o,a){const s=Le(),u=function(t,e,n,i,r,o){const a=ua(t,Ze(),n,r);return Ke(2),a?e+En(n)+i+En(r)+o:nr}(s,e,n,i,r,o);if(u!==nr){const e=an();kr(ze(),s,e,t,u,a)}return za}const Na=[];function Ba(t,e,n,i,r){const o=t[n+1],a=null===e;let s=i?sr(o):lr(o),u=!1;for(;0!==s&&(!1===u||a);){const n=t[s+1];Va(t[s],e)&&(u=!0,t[s+1]=i?hr(n):ur(n)),s=i?sr(n):lr(n)}u&&(t[n+1]=i?ur(o):hr(o))}function Va(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ce(t,e)>=0}const Ua={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ja(t){return t.substring(Ua.key,Ua.keyEnd)}function qa(t){return t.substring(Ua.value,Ua.valueEnd)}function Ga(t,e){const n=Ua.textEnd;return n===e?-1:(e=Ua.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Ua.key=e,n),Wa(t,e,n))}function Ha(t,e){const n=Ua.textEnd;let i=Ua.key=Wa(t,e,n);return n===i?-1:(i=Ua.keyEnd=function(t,e,n){let i;for(;e<n&&(45===(i=t.charCodeAt(e))||95===i||(-33&i)>=65&&(-33&i)<=90);)e++;return e}(t,i,n),i=Ka(t,i,n),i=Ua.value=Wa(t,i,n),i=Ua.valueEnd=function(t,e,n){let i=-1,r=-1,o=-1,a=e,s=a;for(;a<n;){const u=t.charCodeAt(a++);if(59===u)return s;34===u||39===u?s=a=Xa(t,u,a,n):e===a-4&&85===o&&82===r&&76===i&&40===u?s=a=Xa(t,41,a,n):u>32&&(s=a),o=r,r=i,i=-33&u}return s}(t,i,n),Ka(t,i,n))}function Za(t){Ua.key=0,Ua.keyEnd=0,Ua.value=0,Ua.valueEnd=0,Ua.textEnd=t.length}function Wa(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Ka(t,e,n,i){return(e=Wa(t,e,n))<n&&e++,e}function Xa(t,e,n,i){let r=-1,o=n;for(;o<i;){const n=t.charCodeAt(o++);if(n==e&&92!==r)return o;r=92==n&&92===r?0:n}throw new Error}function $a(t,e,n){return es(t,e,n,!1),$a}function Ya(t,e){return es(t,e,null,!0),Ya}function Qa(t,e){for(let n=function(t){return Za(t),Ha(t,Wa(t,0,Ua.textEnd))}(e);n>=0;n=Ha(e,n))ss(t,ja(e),qa(e))}function Ja(t){ns(ue,ts,t,!0)}function ts(t,e){for(let n=function(t){return Za(t),Ga(t,Wa(t,0,Ua.textEnd))}(e);n>=0;n=Ga(e,n))ue(t,ja(e),!0)}function es(t,e,n,i){const r=Le(),o=ze(),a=Ke(2);if(o.firstUpdatePass&&rs(o,t,a,i),e!==nr&&sa(r,a,e)){let s;null==n&&(s=function(){const t=Re.lFrame;return null===t?null:t.currentSanitizer}())&&(n=s),us(o,o.data[an()+19],r,r[11],t,r[a+1]=function(t,e){return null==t||("function"==typeof e?t=e(t):"string"==typeof e?t+=e:"object"==typeof t&&(t=Ct(ti(t)))),t}(e,n),i,a)}}function ns(t,e,n,i){const r=ze(),o=Ke(2);r.firstUpdatePass&&rs(r,null,o,i);const a=Le();if(n!==nr&&sa(a,o,n)){const s=r.data[an()+19];if(hs(s,i)&&!is(r,o)){let t=i?s.classes:s.styles;null!==t&&(n=Pt(t,n||"")),_a(r,s,a,n,i)}else!function(t,e,n,i,r,o,a,s){r===nr&&(r=Na);let u=0,l=0,c=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;null!==c||null!==h;){const d=u<r.length?r[u+1]:void 0,p=l<o.length?o[l+1]:void 0;let f=null,g=void 0;c===h?(u+=2,l+=2,d!==p&&(f=h,g=p)):null===h||null!==c&&c<h?(u+=2,f=c):(l+=2,f=h,g=p),null!==f&&us(t,e,n,i,f,g,a,s),c=u<r.length?r[u]:null,h=l<o.length?o[l]:null}}(r,s,a,a[11],a[o+1],a[o+1]=function(t,e,n){if(null==n||""===n)return Na;const i=[],r=ti(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else"string"==typeof r&&e(i,r);return i}(t,e,n),i,o)}}function is(t,e){return e>=t.expandoStartIndex}function rs(t,e,n,i){const r=t.data;if(null===r[n+1]){const o=r[an()+19],a=is(t,n);hs(o,i)&&null===e&&!a&&(e=!1),e=function(t,e,n,i){const r=function(t){const e=Re.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(n=as(n=os(null,t,e,n,i),e.attrs,i),o=null);else{const a=e.directiveStylingLast;if(-1===a||t[a]!==r)if(n=os(r,t,e,n,i),null===o){let n=function(t,e,n){const i=n?e.classBindings:e.styleBindings;if(0!==lr(i))return t[sr(i)]}(t,e,i);void 0!==n&&Array.isArray(n)&&(n=os(null,t,e,n[1],i),n=as(n,e.attrs,i),function(t,e,n,i){t[sr(n?e.classBindings:e.styleBindings)]=i}(t,e,i,n))}else o=function(t,e,n){let i=void 0;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=as(i,t[o].hostAttrs,n);return as(i,e.attrs,n)}(t,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),n}(r,o,e,i),function(t,e,n,i,r,o){let a=o?e.classBindings:e.styleBindings,s=sr(a),u=lr(a);t[i]=n;let l,c=!1;if(Array.isArray(n)){const t=n;l=t[1],(null===l||ce(t,l)>0)&&(c=!0)}else l=n;if(r)if(0!==u){const e=sr(t[s+1]);t[i+1]=ar(e,s),0!==e&&(t[e+1]=cr(t[e+1],i)),t[s+1]=131071&t[s+1]|i<<17}else t[i+1]=ar(s,0),0!==s&&(t[s+1]=cr(t[s+1],i)),s=i;else t[i+1]=ar(u,0),0===s?s=i:t[u+1]=cr(t[u+1],i),u=i;c&&(t[i+1]=ur(t[i+1])),Ba(t,l,i,!0),Ba(t,l,i,!1),function(t,e,n,i,r){const o=r?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&ce(o,e)>=0&&(n[i+1]=hr(n[i+1]))}(e,l,t,i,o),a=ar(s,u),o?e.classBindings=a:e.styleBindings=a}(r,o,e,n,a,i)}}function os(t,e,n,i,r){let o=null;const a=n.directiveEnd;let s=n.directiveStylingLast;for(-1===s?s=n.directiveStart:s++;s<a&&(o=e[s],i=as(i,o.hostAttrs,r),o!==t);)s++;return null!==t&&(n.directiveStylingLast=s),i}function as(t,e,n){const i=n?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?r=a:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ue(t,a,!!n||e[++o]))}return void 0===t?null:t}function ss(t,e,n){var i;("background-image"===(i=e)||"backgroundImage"===i||"background"===i||"border-image"===i||"borderImage"===i||"border-image-source"===i||"borderImageSource"===i||"filter"===i||"list-style"===i||"listStyle"===i||"list-style-image"===i||"listStyleImage"===i||"clip-path"===i||"clipPath"===i)&&(n=function(t){const e=Ai();return e?e.sanitize(Oi.STYLE,t)||"":ei(t,"Style")?ti(t):function(t){if(!(t=String(t).trim()))return"";const e=t.match(Ei);return e&&ui(e[1])===e[1]||t.match(ki)&&function(t){let e=!0,n=!0;for(let i=0;i<t.length;i++){const r=t.charAt(i);"'"===r&&n?e=!e:'"'===r&&e&&(n=!n)}return e&&n}(t)?t:(ri()&&console.warn(`WARNING: sanitizing unsafe style value ${t} (see http://g.co/ng/security#xss).`),"unsafe")}(En(t))}(n)),ue(t,e,n)}function us(t,e,n,i,r,o,a,s){if(3!==e.type)return;const u=t.data,l=u[s+1];cs(1==(1&l)?ls(u,e,n,r,lr(l),a):void 0)||(cs(o)||function(t){return 2==(2&t)}(l)&&(o=ls(u,null,n,r,s,a)),function(t,e,n,i,r){const o=yn(t);if(e)r?o?t.addClass(n,i):n.classList.add(i):o?t.removeClass(n,i):n.classList.remove(i);else{const e=-1==i.indexOf("-")?void 0:2;null==r?o?t.removeStyle(n,i,e):n.style.removeProperty(i):o?t.setStyle(n,i,r,e):n.style.setProperty(i,r)}}(i,a,Di(an(),n),r,o))}function ls(t,e,n,i,r,o){const a=null===e;let s=void 0;for(;r>0;){const e=t[r],o=Array.isArray(e),u=o?e[1]:e,l=null===u;let c=n[r+1];c===nr&&(c=l?Na:void 0);let h=l?le(c,i):u===i?c:void 0;if(o&&!cs(h)&&(h=le(e,i)),cs(h)&&(s=h,a))return s;const d=t[r+1];r=a?sr(d):lr(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(s=le(t,i))}return s}function cs(t){return void 0!==t}function hs(t,e){return 0!=(t.flags&(e?16:32))}function ds(t,e=""){const n=Le(),i=ze(),r=t+19,o=i.firstCreatePass?gr(i,n[6],t,3,null,null):i.data[r],a=n[r]=function(t,e){return yn(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);mo(i,n,a,o),Ve(o,!1)}function ps(t){return fs("",t,""),ps}function fs(t,e,n){const i=Le(),r=ha(i,t,e,n);return r!==nr&&function(t,e,n){const i=Di(e,t),r=t[11];yn(r)?r.setValue(i,n):i.textContent=n}(i,an(),r),fs}function gs(t,e,n){const i=Le();if(sa(i,We(),e)){const r=an();kr(ze(),i,r,t,e,n,!0)}return gs}function ms(t,e){const n=Ni(t)[1],i=n.data.length-1;un(n,{directiveStart:i,directiveEnd:i+1})}function ys(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const i=[t];for(;e;){let r=void 0;if(Ie(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");r=e.\u0275dir}if(r){if(n){i.push(r);const e=t;e.inputs=_s(t.inputs),e.declaredInputs=_s(t.declaredInputs),e.outputs=_s(t.outputs);const n=r.hostBindings;n&&xs(t,n);const o=r.viewQuery,a=r.contentQueries;if(o&&vs(t,o),a&&bs(t,a),dt(t.inputs,r.inputs),dt(t.declaredInputs,r.declaredInputs),dt(t.outputs,r.outputs),Ie(r)&&r.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(r.data.animation)}e.afterContentChecked=e.afterContentChecked||r.afterContentChecked,e.afterContentInit=t.afterContentInit||r.afterContentInit,e.afterViewChecked=t.afterViewChecked||r.afterViewChecked,e.afterViewInit=t.afterViewInit||r.afterViewInit,e.doCheck=t.doCheck||r.doCheck,e.onDestroy=t.onDestroy||r.onDestroy,e.onInit=t.onInit||r.onInit}const e=r.features;if(e)for(let i=0;i<e.length;i++){const r=e[i];r&&r.ngInherit&&r(t),r===ys&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=wn(r.hostAttrs,n=wn(n,r.hostAttrs))}}(i)}function _s(t){return t===pe?{}:t===fe?[]:t}function vs(t,e){const n=t.viewQuery;t.viewQuery=n?(t,i)=>{e(t,i),n(t,i)}:e}function bs(t,e){const n=t.contentQueries;t.contentQueries=n?(t,i,r)=>{e(t,i,r),n(t,i,r)}:e}function xs(t,e){const n=t.hostBindings;t.hostBindings=n?(t,i)=>{e(t,i),n(t,i)}:e}class ws{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Cs(t){t.type.prototype.ngOnChanges&&(t.setInput=Ps,t.onChanges=function(){const t=Ms(this),e=t&&t.current;if(e){const n=t.previous;if(n===pe)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}})}function Ps(t,e,n,i){const r=Ms(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:pe,current:null}),o=r.current||(r.current={}),a=r.previous,s=this.declaredInputs[n],u=a[s];o[s]=new ws(u&&u.currentValue,e,a===pe),t[i]=e}function Ms(t){return t.__ngSimpleChanges__||null}function Os(t,e,n,i,r){if(t=kt(t),Array.isArray(t))for(let o=0;o<t.length;o++)Os(t[o],e,n,i,r);else{const o=ze(),a=Le();let s=Ho(t)?t:kt(t.provide),u=jo(t);const l=Be(),c=65535&l.providerIndexes,h=l.directiveStart,d=l.providerIndexes>>16;if(Ho(t)||!t.multi){const i=new fn(u,r,fa),p=Ss(s,e,r?c:c+d,h);-1===p?(Bn(Fn(l,a),o,s),ks(o,t,e.length),e.push(s),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=65536),n.push(i),a.push(i)):(n[p]=i,a[p]=i)}else{const p=Ss(s,e,c+d,h),f=Ss(s,e,c,c+d),g=p>=0&&n[p],m=f>=0&&n[f];if(r&&!m||!r&&!g){Bn(Fn(l,a),o,s);const c=function(t,e,n,i,r){const o=new fn(t,n,fa);return o.multi=[],o.index=e,o.componentProviders=0,Es(o,r,i&&!n),o}(r?As:Ts,n.length,r,i,u);!r&&m&&(n[f].providerFactory=c),ks(o,t,e.length),e.push(s),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=65536),n.push(c),a.push(c)}else ks(o,t,p>-1?p:f),Es(n[r?f:p],u,!r&&i);!r&&i&&m&&n[f].componentProviders++}}}function ks(t,e,n){if(Ho(e)||e.useClass){const i=(e.useClass||e).prototype.ngOnDestroy;i&&(t.destroyHooks||(t.destroyHooks=[])).push(n,i)}}function Es(t,e,n){t.multi.push(e),n&&t.componentProviders++}function Ss(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function Ts(t,e,n,i){return Is(this.multi,[])}function As(t,e,n,i){const r=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Gn(n,n[1],this.providerFactory.index,i);o=e.slice(0,t),Is(r,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Is(r,o);return o}function Is(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ds(t,e=[]){return n=>{n.providersResolver=(n,i)=>function(t,e,n){const i=ze();if(i.firstCreatePass){const r=Ie(t);Os(n,i.data,i.blueprint,r,!0),Os(e,i.data,i.blueprint,r,!1)}}(n,i?i(t):t,e)}}Cs.ngInherit=!0;class Rs{}class Fs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${Ct(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Ls=(()=>{class t{}return t.NULL=new Fs,t})(),zs=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>Ns(t),t})();const Ns=function(t){return Eo(t,Be(),Le())};class Bs{}const Vs=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();let Us=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>js(),t})();const js=function(){const t=Le(),e=zi(Be().index,t);return function(t){const e=t[11];if(yn(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(ke(e)?e:t)};let qs=(()=>{class t{}return t.\u0275prov=pt({token:t,providedIn:"root",factory:()=>null}),t})();class Gs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Hs=new Gs("9.1.0-next.4");class Zs{constructor(){}supports(t){return ia(t)}create(t){return new Ks(t)}}const Ws=(t,e)=>e;class Ks{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ws}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,i=0,r=null;for(;e||n;){const o=!n||e&&e.currentIndex<Qs(n,i,r)?e:n,a=Qs(o,i,r),s=o.currentIndex;if(o===n)i--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)i++;else{r||(r=[]);const t=a-i,e=s-i;if(t!=e){for(let n=0;n<t;n++){const i=n<r.length?r[n]:r[n]=0,o=i+n;e<=o&&o<t&&(r[n]=i+1)}r[o.previousIndex]=e-t}}a!==s&&t(o,a,s)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!ia(t))throw new Error(`Error trying to diff '${Ct(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,i,r=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],i=this._trackByFn(e,n),null!==r&&ea(r.trackById,i)?(o&&(r=this._verifyReinsertion(r,n,i,e)),ea(r.item,n)||this._addIdentityChange(r,n)):(r=this._mismatch(r,n,i,e),o=!0),r=r._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[ta()]();let i;for(;!(i=n.next()).done;)e(i.value)}}(t,t=>{i=this._trackByFn(e,t),null!==r&&ea(r.trackById,i)?(o&&(r=this._verifyReinsertion(r,t,i,e)),ea(r.item,t)||this._addIdentityChange(r,t)):(r=this._mismatch(r,t,i,e),o=!0),r=r._next,e++}),this.length=e;return this._truncate(r),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,i){let r;return null===t?r=this._itTail:(r=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(ea(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,r,i)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(ea(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,r,i)):t=this._addAfter(new Xs(e,n),r,i),t}_verifyReinsertion(t,e,n,i){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?t=this._reinsertAfter(r,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,r=t._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ys),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ys),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Xs{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $s{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&ea(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ys{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new $s,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Qs(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}class Js{constructor(){}supports(t){return t instanceof Map||ra(t)}create(){return new tu}}class tu{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||ra(t)))throw new Error(`Error trying to diff '${Ct(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const i=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,i)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}const n=new eu(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){ea(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class eu{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let nu=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new lt,new st]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=pt({token:t,providedIn:"root",factory:()=>new t([new Zs])}),t})(),iu=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new lt,new st]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=pt({token:t,providedIn:"root",factory:()=>new t([new Js])}),t})();const ru=[new Js],ou=new nu([new Zs]),au=new iu(ru);let su=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>uu(t,zs),t})();const uu=function(t,e){return So(t,e,Be(),Le())};let lu=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>cu(t,zs),t})();const cu=function(t,e){return To(t,e,Be(),Le())},hu={};class du extends Ls{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Pe(t);return new gu(e,this.ngModule)}}function pu(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const fu=new Ut("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Tn});class gu extends Rs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(er).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return pu(this.componentDef.inputs)}get outputs(){return pu(this.componentDef.outputs)}create(t,e,n,i){const r=(i=i||this.ngModule)?function(t,e){return{get:(n,i,r)=>{const o=t.get(n,hu,r);return o!==hu||i===hu?o:e.get(n,i,r)}}}(t,i.injector):t,o=r.get(Bs,_n),a=r.get(qs,null),s=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",l=n?function(t,e,n){if(yn(t))return t.selectRootElement(e,n===de.ShadowDom);let i="string"==typeof e?t.querySelector(e):e;return i.textContent="",i}(s,n,this.componentDef.encapsulation):pr(u,o.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),c=this.componentDef.onPush?576:528,h="string"==typeof n&&/^#root-ng-internal-isolated-\d+/.test(n),d={components:[],scheduler:Tn,clean:Xr,playerHandler:null,flags:0},p=Pr(0,-1,null,1,0,null,null,null,null,null),f=fr(null,p,d,c,null,null,o,s,a,r);let g,m;Je(f,null);try{const t=function(t,e,n,i,r,o){const a=n[1];n[19]=t;const s=gr(a,null,0,3,null,null),u=s.mergedAttrs=e.hostAttrs;null!==u&&(Qo(s,u),null!==t&&(vn(r,t,u),null!==s.classes&&wo(r,t,s.classes),null!==s.styles&&xo(r,t,s.styles)));const l=i.createRenderer(t,e),c=fr(n,Cr(e),null,e.onPush?64:16,n[19],s,i,l,void 0);return a.firstCreatePass&&(Bn(Fn(s,n),a,e.type),Dr(a,s),Fr(s,n.length,1)),Gr(n,c),n[19]=c}(l,this.componentDef,f,o,s);if(l)if(n)vn(s,l,["ng-version",Hs.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let o=t[i];if("string"==typeof o)2===r?""!==o&&e.push(o,t[++i]):8===r&&n.push(o);else{if(!$i(r))break;r=o}i++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&vn(s,l,t),e&&e.length>0&&wo(s,l,e.join(" "))}m=Fi(f[1],0),e&&(m.projection=e.map(t=>Array.from(t))),g=function(t,e,n,i,r){const o=n[1],a=function(t,e,n){const i=Be();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ir(t,i,1),Lr(t,e,n));const r=Gn(e,t,e.length-1,i);qi(r,e);const o=Ri(i,e);return o&&qi(o,e),r}(o,n,e);i.components.push(a),t[8]=a,r&&r.forEach(t=>t(a,e)),e.contentQueries&&e.contentQueries(1,a,n.length-1);const s=Be();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){sn(s.index-19);const t=n[1];Sr(t,e),Tr(t,n,e.hostVars),Ar(e,a)}return a}(t,this.componentDef,f,d,[ms]),mr(p,f,null)}finally{on()}const y=new mu(this.componentType,g,Eo(zs,m,f),f,m);return n&&!h||(y.hostView._tViewNode.child=m),y}}class mu extends class{}{constructor(t,e,n,i,r){super(),this.location=n,this._rootLView=i,this._tNode=r,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new Po(i),this.hostView._tViewNode=function(t,e,n,i){let r=t.node;return null==r&&(t.node=r=Mr(0,null,2,-1,null,null)),i[6]=r}(i[1],0,0,i),this.componentType=t}get injector(){return new Wn(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const yu=void 0;var _u=["en",[["a","p"],["AM","PM"],yu],[["AM","PM"],yu,yu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yu,"{1} 'at' {0}",yu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let vu={};function bu(t){return t in vu||(vu[t]=Dt.ng&&Dt.ng.common&&Dt.ng.common.locales&&Dt.ng.common.locales[t]),vu[t]}const xu=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,Directionality:19,PluralCase:20,ExtraData:21};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencyCode]="CurrencyCode",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.Directionality]="Directionality",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}();let wu="en-US";function Cu(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t}`+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(wu=t.toLowerCase().replace(/_/g,"-"))}const Pu=new Map;class Mu extends ne{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new du(this);const n=Oe(t),i=t[Nt]||null;i&&Cu(i),this._bootstrapComponents=An(n.bootstrap),this._r3Injector=Bo(t,e,[{provide:ne,useValue:this},{provide:Ls,useValue:this.componentFactoryResolver}],Ct(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Wo.THROW_IF_NOT_FOUND,n=ct.Default){return t===Wo||t===ne||t===jt?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Ou extends ie{constructor(t){super(),this.moduleType=t,null!==Oe(t)&&function t(e){if(null!==e.\u0275mod.id){const t=e.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${Ct(e)} vs ${Ct(e.name)}`)})(t,Pu.get(t),e),Pu.set(t,e)}let n=e.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(e=>t(e))}(t)}create(t){return new Mu(this.moduleType,t)}}function ku(t,e,n){const i=He()+t,r=Le();return r[i]===nr?oa(r,i,n?e.call(n):e()):aa(r,i)}function Eu(t,e,n,i){return Ru(Le(),He(),t,e,n,i)}function Su(t,e,n,i,r){return function(t,e,n,i,r,o,a){const s=e+n;return ua(t,s,r,o)?oa(t,s+2,a?i.call(a,r,o):i(r,o)):aa(t,s+2)}(Le(),He(),t,e,n,i,r)}function Tu(t,e,n,i,r,o){return Fu(Le(),He(),t,e,n,i,r,o)}function Au(t,e,n,i,r,o,a){return function(t,e,n,i,r,o,a,s,u){const l=e+n;return la(t,l,r,o,a,s)?oa(t,l+4,u?i.call(u,r,o,a,s):i(r,o,a,s)):aa(t,l+4)}(Le(),He(),t,e,n,i,r,o,a)}function Iu(t,e,n,i,r,o,a,s){const u=He()+t,l=Le(),c=la(l,u,n,i,r,o);return sa(l,u+4,a)||c?oa(l,u+5,s?e.call(s,n,i,r,o,a):e(n,i,r,o,a)):aa(l,u+5)}function Du(t,e,n,i,r,o,a,s,u){const l=He()+t,c=Le(),h=la(c,l,n,i,r,o);return ua(c,l+4,a,s)||h?oa(c,l+6,u?e.call(u,n,i,r,o,a,s):e(n,i,r,o,a,s)):aa(c,l+6)}function Ru(t,e,n,i,r,o){const a=e+n;return sa(t,a,r)?oa(t,a+1,o?i.call(o,r):i(r)):aa(t,a+1)}function Fu(t,e,n,i,r,o,a,s){const u=e+n;return function(t,e,n,i,r){const o=ua(t,e,n,i);return sa(t,e+2,r)||o}(t,u,r,o,a)?oa(t,u+3,s?i.call(s,r,o,a):i(r,o,a)):aa(t,u+3)}function Lu(t,e){const n=ze();let i;const r=t+19;n.firstCreatePass?(i=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const i=e[n];if(t===i.name)return i}throw new Error(`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(r,i.onDestroy)):i=n.data[r];const o=i.factory||(i.factory=Me(i.type)),a=Xt(fa),s=o();return Xt(a),function(t,e,n,i){const r=n+19;r>=t.data.length&&(t.data[r]=null,t.blueprint[r]=null),e[r]=i}(n,Le(),t,s),s}function zu(t,e,n,i,r){const o=Le(),a=Li(o,t);return Bu(o,Nu(o,t)?Fu(o,He(),e,a.transform,n,i,r,a):a.transform(n,i,r))}function Nu(t,e){return t[1].data[e+19].pure}function Bu(t,e){return na.isWrapped(e)&&(e=na.unwrap(e),t[Ze()]=nr),e}class Vu extends M{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let i,r=t=>null,o=()=>null;t&&"object"==typeof t?(i=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(r=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(o=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(i=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(r=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(i,r,o);return t instanceof h&&t.add(a),a}}function Uu(){return this._results[ta()]()}class ju{constructor(){this.dirty=!0,this._results=[],this.changes=new Vu,this.length=0;const t=ta(),e=ju.prototype;e[t]||(e[t]=Uu)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?(n===e&&(n=e.slice(0,i)),t(r,n)):n!==e&&n.push(r)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class qu{constructor(t){this.queryList=t,this.matches=null}clone(){return new qu(this.queryList)}setDirty(){this.queryList.setDirty()}}class Gu{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,i=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);i.push(this.queries[n.indexInDeclarationView].clone())}return new Gu(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==sl(t,e).matches&&this.queries[e].setDirty()}}class Hu{constructor(t,e,n,i=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=i}}class Zu{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const i=null!==e?e.length:0,r=this.getByIndex(n).embeddedTView(t,i);r&&(r.indexInDeclarationView=n,null!==e?e.push(r):e=[r])}return null!==e?new Zu(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Wu{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Wu(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&4===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){if(Array.isArray(this.metadata.predicate)){const n=this.metadata.predicate;for(let i=0;i<n.length;i++)this.matchTNodeWithReadOption(t,e,Ku(e,n[i]))}else{const n=this.metadata.predicate;n===su?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,qn(e,t,n,!1,!1))}}matchTNodeWithReadOption(t,e,n){if(null!==n){const i=this.metadata.read;if(null!==i)if(i===zs||i===lu||i===su&&0===e.type)this.addMatch(e.index,-2);else{const n=qn(e,t,i,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ku(t,e){const n=t.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1];return null}function Xu(t,e,n,i){return-1===n?function(t,e){return 3===t.type||4===t.type?Eo(zs,t,e):0===t.type?So(su,zs,t,e):null}(e,t):-2===n?function(t,e,n){return n===zs?Eo(zs,e,t):n===su?So(su,zs,e,t):n===lu?To(lu,zs,e,t):void 0}(t,e,i):Gn(t,t[1],n,e)}function $u(t,e,n,i){const r=e[5].queries[i];if(null===r.matches){const i=t.data,o=n.matches,a=[];for(let t=0;t<o.length;t+=2){const r=o[t];a.push(r<0?null:Xu(e,i[r],o[t+1],n.metadata.read))}r.matches=a}return r.matches}function Yu(t){const e=Le(),n=ze(),i=$e();Ye(i+1);const r=sl(n,i);if(t.dirty&&Bi(e)===r.metadata.isStatic){if(null===r.matches)t.reset([]);else{const o=r.crossesNgTemplate?function t(e,n,i,r){const o=e.queries.getByIndex(i),a=o.matches;if(null!==a){const s=$u(e,n,o,i);for(let e=0;e<a.length;e+=2){const i=a[e];if(i>0)r.push(s[e/2]);else{const o=a[e+1],s=n[-i];for(let e=9;e<s.length;e++){const n=s[e];n[17]===n[3]&&t(n[1],n,o,r)}if(null!==s[5]){const e=s[5];for(let n=0;n<e.length;n++){const i=e[n];t(i[1],i,o,r)}}}}}return r}(n,e,i,[]):$u(n,e,r,i);t.reset(o),t.notifyOnChanges()}return!0}return!1}function Qu(t,e,n){tl(ze(),Le(),t,e,n,!0)}function Ju(t,e,n){tl(ze(),Le(),t,e,n,!1)}function tl(t,e,n,i,r,o){t.firstCreatePass&&(al(t,new Hu(n,i,o,r),-1),o&&(t.staticViewQueries=!0)),ol(t,e)}function el(t,e,n,i){il(ze(),Le(),e,n,i,!1,Be(),t)}function nl(t,e,n,i){il(ze(),Le(),e,n,i,!0,Be(),t)}function il(t,e,n,i,r,o,a,s){t.firstCreatePass&&(al(t,new Hu(n,i,o,r),a.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,s),o&&(t.staticContentQueries=!0)),ol(t,e)}function rl(){return t=Le(),e=$e(),t[5].queries[e].queryList;var t,e}function ol(t,e){const n=new ju;!function(t,e,n,i){const r=$r(e);r.push(n),t.firstCreatePass&&Yr(t).push(i,r.length-1)}(t,e,n,n.destroy),null===e[5]&&(e[5]=new Gu),e[5].queries.push(new qu(n))}function al(t,e,n){null===t.queries&&(t.queries=new Zu),t.queries.track(new Wu(e,n))}function sl(t,e){return t.queries.getByIndex(e)}function ul(t,e){return So(su,zs,t,e)}const ll=ot("Input",t=>({bindingPropertyName:t})),cl=new Ut("Application Initializer");let hl=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Oa(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Yt(cl,8))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const dl=new Ut("AppId"),pl={provide:dl,useFactory:function(){return`${fl()}${fl()}${fl()}`},deps:[]};function fl(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gl=new Ut("Platform Initializer"),ml=new Ut("Platform ID"),yl=new Ut("appBootstrapListener");let _l=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const vl=new Ut("LocaleId"),bl=new Ut("DefaultCurrencyCode");class xl{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const wl=function(t){return new Ou(t)},Cl=wl,Pl=function(t){return Promise.resolve(wl(t))},Ml=function(t){const e=wl(t),n=An(Oe(t).declarations).reduce((t,e)=>{const n=Pe(e);return n&&t.push(new gu(n)),t},[]);return new xl(e,n)},Ol=Ml,kl=function(t){return Promise.resolve(Ml(t))};let El=(()=>{class t{constructor(){this.compileModuleSync=Cl,this.compileModuleAsync=Pl,this.compileModuleAndAllComponentsSync=Ol,this.compileModuleAndAllComponentsAsync=kl}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const Sl=new Ut("compilerOptions"),Tl=(()=>Promise.resolve(0))();function Al(t){"undefined"==typeof Zone?Tl.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Il{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Vu(!1),this.onMicrotaskEmpty=new Vu(!1),this.onStable=new Vu(!1),this.onError=new Vu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=e,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=Dt.requestAnimationFrame,e=Dt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Dt,()=>{t.lastRequestAnimationFrameId=-1,Ll(t),Fl(t)}),Ll(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,i,r,o,a,s)=>{try{return zl(t),n.invokeTask(r,o,a,s)}finally{e&&"eventTask"===o.type&&e(),Nl(t)}},onInvoke:(e,n,i,r,o,a,s)=>{try{return zl(t),e.invoke(i,r,o,a,s)}finally{Nl(t)}},onHasTask:(e,n,i,r)=>{e.hasTask(i,r),n===i&&("microTask"==r.change?(t._hasPendingMicrotasks=r.microTask,Ll(t),Fl(t)):"macroTask"==r.change&&(t.hasPendingMacrotasks=r.macroTask))},onHandleError:(e,n,i,r)=>(e.handleError(i,r),t.runOutsideAngular(()=>t.onError.emit(r)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Il.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Il.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,i){const r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+i,t,Rl,Dl,Dl);try{return r.runTask(o,e,n)}finally{r.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function Dl(){}const Rl={};function Fl(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ll(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function zl(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Nl(t){t._nesting--,Fl(t)}class Bl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Vu,this.onMicrotaskEmpty=new Vu,this.onStable=new Vu,this.onError=new Vu}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,i){return t.apply(e,n)}}let Vl=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Il.assertNotInAngularZone(),Al(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Al(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let i=-1;e&&e>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==i),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Yt(Il))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),Ul=(()=>{class t{constructor(){this._applications=new Map,Gl.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Gl.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class jl{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let ql,Gl=new jl,Hl=function(t,e,n){const i=new Ou(n);if(0===Xo.size)return Promise.resolve(i);const r=function(t){const e=[];return t.forEach(t=>t&&e.push(...t)),e}(t.get(Sl,[]).concat(e).map(t=>t.providers));if(0===r.length)return Promise.resolve(i);const o=function(){const t=Dt.ng;if(!t||!t.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return t.\u0275compilerFacade}(),a=Wo.create({providers:r}).get(o.ResourceLoader);return function(t){const e=[],n=new Map;function i(t){let e=n.get(t);if(!e){const i=(t=>Promise.resolve(a.get(t)))(t);n.set(t,e=i.then(Yo))}return e}return Xo.forEach((t,n)=>{const r=[];t.templateUrl&&r.push(i(t.templateUrl).then(e=>{t.template=e}));const o=t.styleUrls,a=t.styles||(t.styles=[]),s=t.styles.length;o&&o.forEach((e,n)=>{a.push(""),r.push(i(e).then(i=>{a[s+n]=i,o.splice(o.indexOf(e),1),0==o.length&&(t.styleUrls=void 0)}))});const u=Promise.all(r).then(()=>function(t){$o.delete(t)}(n));e.push(u)}),Xo=new Map,Promise.all(e).then(()=>{})}().then(()=>i)};const Zl=new Ut("AllowMultipleToken");class Wl{constructor(t,e){this.name=t,this.token=e}}function Kl(t,e,n=[]){const i=`Platform: ${e}`,r=new Ut(i);return(e=[])=>{let o=Xl();if(!o||o.injector.get(Zl,!1))if(t)t(n.concat(e).concat({provide:r,useValue:!0}));else{const t=n.concat(e).concat({provide:r,useValue:!0},{provide:Do,useValue:"platform"});!function(t){if(ql&&!ql.destroyed&&!ql.injector.get(Zl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ql=t.get($l);const e=t.get(gl,null);e&&e.forEach(t=>t())}(Wo.create({providers:t,name:i}))}return function(t){const e=Xl();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function Xl(){return ql&&!ql.destroyed?ql:null}let $l=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Bl:("zone.js"===t?void 0:t)||new Il({enableLongStackTrace:ri(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),i=[{provide:Il,useValue:n}];return n.run(()=>{const e=Wo.create({providers:i,parent:this.injector,name:t.moduleType.name}),r=t.create(e),o=r.injector.get(Qn,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return r.onDestroy(()=>Jl(this._modules,r)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const i=n();return Oa(i)?i.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}(o,n,()=>{const t=r.injector.get(hl);return t.runInitializers(),t.donePromise.then(()=>(Cu(r.injector.get(vl,"en-US")||"en-US"),this._moduleDoBootstrap(r),r))})})}bootstrapModule(t,e=[]){const n=Yl({},e);return Hl(this.injector,n,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Ql);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${Ct(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Yt(Wo))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function Yl(t,e){return Array.isArray(e)?e.reduce(Yl,t):Object.assign(Object.assign({},t),e)}let Ql=(()=>{class t{constructor(t,e,n,i,r,o){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=i,this._componentFactoryResolver=r,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=ri(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new b(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),s=new b(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Il.assertNotInAngularZone(),Al(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Il.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=K(a,s.pipe(t=>{return X()((e=et,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,J);return i.source=t,i.subjectFactory=n,i})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Rs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const i=n.isBoundToModule?void 0:this._injector.get(ne),r=n.create(Wo.NULL,[],e||n.selector,i);r.onDestroy(()=>{this._unloadComponent(r)});const o=r.injector.get(Vl,null);return o&&r.injector.get(Ul).registerApplication(r.location.nativeElement,o),this._loadComponent(r),ri()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),r}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Jl(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(yl,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),Jl(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Yt(Il),Yt(_l),Yt(Wo),Yt(Qn),Yt(Ls),Yt(hl))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function Jl(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class tc{}class ec{}const nc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let ic=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||nc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,i]=t.split("#");return void 0===i&&(i="default"),n("zn8P")(e).then(t=>t[i]).then(t=>rc(t,e,i)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,i]=t.split("#"),r="NgFactory";return void 0===i&&(i="default",r=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[i+r]).then(t=>rc(t,e,i))}}return t.\u0275fac=function(e){return new(e||t)(Yt(El),Yt(ec,8))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function rc(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const oc=Kl(null,"core",[{provide:ml,useValue:"unknown"},{provide:$l,deps:[Wo]},{provide:Ul,deps:[]},{provide:_l,deps:[]}]),ac=[{provide:Ql,useClass:Ql,deps:[Il,_l,Wo,Qn,Ls,hl]},{provide:fu,deps:[Il],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:hl,useClass:hl,deps:[[new st,cl]]},{provide:El,useClass:El,deps:[]},pl,{provide:nu,useFactory:function(){return ou},deps:[]},{provide:iu,useFactory:function(){return au},deps:[]},{provide:vl,useFactory:function(t){return Cu(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new at(vl),new st,new lt]]},{provide:bl,useValue:"USD"}];let sc=(()=>{class t{constructor(t){}}return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)(Yt(Ql))},providers:ac}),t})(),uc=null;function lc(){return uc}const cc=new Ut("DocumentToken");let hc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({factory:dc,token:t,providedIn:"platform"}),t})();function dc(){return Yt(fc)}const pc=new Ut("Location Initialized");let fc=(()=>{class t extends hc{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=lc().getLocation(),this._history=lc().getHistory()}getBaseHrefFromDOM(){return lc().getBaseHref(this._doc)}onPopState(t){lc().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){lc().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){gc()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){gc()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Yt(cc))},t.\u0275prov=pt({factory:mc,token:t,providedIn:"platform"}),t})();function gc(){return!!window.history.pushState}function mc(){return new fc(Yt(cc))}function yc(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function _c(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function vc(t){return t&&"?"!==t[0]?"?"+t:t}let bc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({factory:xc,token:t,providedIn:"root"}),t})();function xc(t){const e=Yt(cc).location;return new Cc(Yt(hc),e&&e.origin||"")}const wc=new Ut("appBaseHref");let Cc=(()=>{class t extends bc{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return yc(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+vc(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,i){const r=this.prepareExternalUrl(n+vc(i));this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,i){const r=this.prepareExternalUrl(n+vc(i));this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Yt(hc),Yt(wc,8))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),Pc=(()=>{class t extends bc{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=yc(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,i){let r=this.prepareExternalUrl(n+vc(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,i){let r=this.prepareExternalUrl(n+vc(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Yt(hc),Yt(wc,8))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),Mc=(()=>{class t{constructor(t,e){this._subject=new Vu,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=_c(kc(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+vc(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,kc(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+vc(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+vc(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)})}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(Yt(bc),Yt(hc))},t.normalizeQueryParams=vc,t.joinWithSlash=yc,t.stripTrailingSlash=_c,t.\u0275prov=pt({factory:Oc,token:t,providedIn:"root"}),t})();function Oc(){return new Mc(Yt(bc),Yt(hc))}function kc(t){return t.replace(/\/index.html$/,"")}const Ec=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}();class Sc{}let Tc=(()=>{class t extends Sc{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=bu(e);if(n)return n;const i=e.split("-")[0];if(n=bu(i),n)return n;if("en"===i)return _u;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[xu.PluralCase]}(e||this.locale)(t)){case Ec.Zero:return"zero";case Ec.One:return"one";case Ec.Two:return"two";case Ec.Few:return"few";case Ec.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Yt(vl))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function Ac(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[i,r]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(i.trim()===e)return decodeURIComponent(r)}return null}let Ic=(()=>{class t{constructor(t,e,n,i){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(ia(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Ct(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(fa(nu),fa(iu),fa(zs),fa(Us))},t.\u0275dir=we({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class Dc{constructor(t,e,n,i){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Rc=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){ri()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. `+"See https://angular.io/api/common/NgForOf#change-propagation for more information."),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,i)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Dc(null,this._ngForOf,-1,-1),null===i?void 0:i),r=new Fc(t,n);e.push(r)}else if(null==i)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const r=this._viewContainer.get(n);this._viewContainer.move(r,i);const o=new Fc(t,r);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,i=this._viewContainer.length;n<i;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=i,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(fa(lu),fa(su),fa(nu))},t.\u0275dir=we({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class Fc{constructor(t,e){this.record=t,this.view=e}}let Lc=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new zc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Nc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Nc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(fa(lu),fa(su))},t.\u0275dir=we({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class zc{constructor(){this.$implicit=null,this.ngIf=null}}function Nc(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Ct(e)}'.`)}let Bc=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,i]=t.split(".");null!=(e=null!=e&&i?`${e}${i}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(fa(zs),fa(iu),fa(Us))},t.\u0275dir=we({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})(),Vc=(()=>{class t{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(this._shouldRecreateView(t)){const t=this._viewContainerRef;this._viewRef&&t.remove(t.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?t.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}_shouldRecreateView(t){const e=t.ngTemplateOutletContext;return!!t.ngTemplateOutlet||e&&this._hasContextShapeChanged(e)}_hasContextShapeChanged(t){const e=Object.keys(t.previousValue||{}),n=Object.keys(t.currentValue||{});if(e.length===n.length){for(let t of n)if(-1===e.indexOf(t))return!0;return!1}return!0}_updateExistingContext(t){for(let e of Object.keys(t))this._viewRef.context[e]=this.ngTemplateOutletContext[e]}}return t.\u0275fac=function(e){return new(e||t)(fa(lu))},t.\u0275dir=we({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[Cs]}),t})();function Uc(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Ct(t)}'`)}const jc=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])\S*/g;let qc=(()=>{class t{transform(e){if(!e)return e;if("string"!=typeof e)throw Uc(t,e);return e.replace(jc,t=>t[0].toUpperCase()+t.substr(1).toLowerCase())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Ce({name:"titlecase",type:t,pure:!0}),t})(),Gc=(()=>{class t{transform(e,n,i){if(null==e)return e;if(!this.supports(e))throw Uc(t,e);return e.slice(n,i)}supports(t){return"string"==typeof t||Array.isArray(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Ce({name:"slice",type:t,pure:!1}),t})(),Hc=(()=>{class t{}return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},providers:[{provide:Sc,useClass:Tc}]}),t})(),Zc=(()=>{class t{}return t.\u0275prov=pt({token:t,providedIn:"root",factory:()=>new Wc(Yt(cc),window,Yt(Qn))}),t})();class Wc{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const e=this.document.querySelector(`#${t}`);if(e)return void this.scrollToElement(e);const n=this.document.querySelector(`[name='${t}']`);if(n)return void this.scrollToElement(n)}catch(e){this.errorHandler.handleError(e)}}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],i-r[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}}}class Kc{constructor(t,e){this._document=e;const n=this._textarea=this._document.createElement("textarea"),i=n.style;i.opacity="0",i.position="absolute",i.left=i.top="-999em",n.setAttribute("aria-hidden","true"),n.value=t,this._document.body.appendChild(n)}copy(){const t=this._textarea;let e=!1;try{if(t){const n=this._document.activeElement;t.select(),t.setSelectionRange(0,t.value.length),e=this._document.execCommand("copy"),n&&n instanceof HTMLElement&&n.focus()}}catch(n){}return e}destroy(){const t=this._textarea;t&&(t.parentNode&&t.parentNode.removeChild(t),this._textarea=void 0)}}let Xc=(()=>{class t{constructor(t){this._document=t}copy(t){const e=this.beginCopy(t),n=e.copy();return e.destroy(),n}beginCopy(t){return new Kc(t,this._document)}}return t.\u0275fac=function(e){return new(e||t)(Yt(cc))},t.\u0275prov=pt({factory:function(){return new t(Yt(cc))},token:t,providedIn:"root"}),t})(),$c=(()=>{class t{}return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)}}),t})();class Yc extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new Yc,uc||(uc=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=Jc||(Jc=document.querySelector("base"),Jc)?Jc.getAttribute("href"):null;return null==e?null:(n=e,Qc||(Qc=document.createElement("a")),Qc.setAttribute("href",n),"/"===Qc.pathname.charAt(0)?Qc.pathname:"/"+Qc.pathname);var n}resetBaseElement(){Jc=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return Ac(document.cookie,t)}}let Qc,Jc=null;const th=new Ut("TRANSITION_ID"),eh=[{provide:cl,useFactory:function(t,e,n){return()=>{n.get(hl).donePromise.then(()=>{const n=lc();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[th,cc,Wo],multi:!0}];class nh{static init(){var t;t=new nh,Gl=t}addToWindow(t){Dt.getAngularTestability=(e,n=!0)=>{const i=t.findTestabilityInTree(e,n);if(null==i)throw new Error("Could not find testability for element.");return i},Dt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Dt.getAllAngularRootElements=()=>t.getAllRootElements(),Dt.frameworkStabilizers||(Dt.frameworkStabilizers=[]),Dt.frameworkStabilizers.push(t=>{const e=Dt.getAllAngularTestabilities();let n=e.length,i=!1;const r=function(e){i=i||e,n--,0==n&&t(i)};e.forEach((function(t){t.whenStable(r)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:n?lc().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const ih=new Ut("EventManagerPlugins");let rh=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let i=0;i<n.length;i++){const e=n[i];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(Yt(ih),Yt(Il))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class oh{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const i=lc().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,n)}}let ah=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),sh=(()=>{class t extends ah{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>lc().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(Yt(cc))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const uh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},lh=/%COMP%/g;function ch(t,e,n){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?ch(t,r,n):(r=r.replace(lh,t),n.push(r))}return n}function hh(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let dh=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new ph(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case de.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new fh(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case de.Native:case de.ShadowDom:return new gh(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=ch(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Yt(rh),Yt(sh),Yt(dl))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class ph{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(uh[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,i){if(i){e=i+":"+e;const r=uh[i];r?t.setAttributeNS(r,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const i=uh[n];i?t.removeAttributeNS(i,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&Vs.DashCase?t.style.setProperty(e,n,i&Vs.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Vs.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,hh(n)):this.eventManager.addEventListener(t,e,hh(n))}}class fh extends ph{constructor(t,e,n,i){super(t),this.component=n;const r=ch(i+"-"+n.id,n.styles,[]);e.addStyles(r),this.contentAttr="_ngcontent-%COMP%".replace(lh,i+"-"+n.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(lh,t)}(i+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class gh extends ph{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===de.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const r=ch(i.id,i.styles,[]);for(let o=0;o<r.length;o++){const t=document.createElement("style");t.textContent=r[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let mh=(()=>{class t extends oh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(Yt(cc))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const yh=["alt","control","meta","shift"],_h={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vh={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},bh={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let xh=(()=>{class t extends oh{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,i){const r=t.parseEventName(n),o=t.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>lc().onAndCancel(e,r.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),i=n.shift();if(0===n.length||"keydown"!==i&&"keyup"!==i)return null;const r=t._normalizeKey(n.pop());let o="";if(yh.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=r,0!=n.length||0===r.length)return null;const a={};return a.domEventName=i,a.fullKey=o,a}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&vh.hasOwnProperty(e)&&(e=vh[e]))}return _h[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),yh.forEach(i=>{i!=n&&(0,bh[i])(t)&&(e+=i+".")}),e+=n,e}static eventCallback(e,n,i){return r=>{t.getEventFullKey(r)===e&&i.runGuarded(()=>n(r))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(Yt(cc))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const wh=Kl(oc,"browser",[{provide:ml,useValue:"browser"},{provide:gl,useValue:function(){Yc.makeCurrent(),nh.init()},multi:!0},{provide:cc,useFactory:function(){return function(t){gn=t}(document),document},deps:[]}]),Ch=[[],{provide:Do,useValue:"root"},{provide:Qn,useFactory:function(){return new Qn},deps:[]},{provide:ih,useClass:mh,multi:!0,deps:[cc,Il,ml]},{provide:ih,useClass:xh,multi:!0,deps:[cc]},[],{provide:dh,useClass:dh,deps:[rh,sh,dl]},{provide:Bs,useExisting:dh},{provide:ah,useExisting:sh},{provide:sh,useClass:sh,deps:[cc]},{provide:Vl,useClass:Vl,deps:[Il]},{provide:rh,useClass:rh,deps:[ih,Il]},[]];let Ph=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:dl,useValue:e.appId},{provide:th,useExisting:dl},eh]}}}return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)(Yt(t,12))},providers:Ch,imports:[Hc,sc]}),t})();"undefined"!=typeof window&&window;class Mh{}function Oh(t,e){return{type:7,name:t,definitions:e,options:{}}}function kh(t,e=null){return{type:4,styles:e,timings:t}}function Eh(t,e=null){return{type:2,steps:t,options:e}}function Sh(t){return{type:6,styles:t,offset:null}}function Th(t,e,n){return{type:0,name:t,styles:e,options:n}}function Ah(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function Ih(t){Promise.resolve(null).then(t)}class Dh{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Ih(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){}getPosition(){return 0}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Rh{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,i=0;const r=this.players.length;0==r?Ih(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==r&&this._onFinish()}),t.onDestroy(()=>{++n==r&&this._onDestroy()}),t.onStart(()=>{++i==r&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){let t=0;return this.players.forEach(e=>{const n=e.getPosition();t=Math.min(n,t)}),t}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function Fh(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Lh(t){switch(t.length){case 0:return new Dh;case 1:return t[0];default:return new Rh(t)}}function zh(t,e,n,i,r={},o={}){const a=[],s=[];let u=-1,l=null;if(i.forEach(t=>{const n=t.offset,i=n==u,c=i&&l||{};Object.keys(t).forEach(n=>{let i=n,s=t[n];if("offset"!==n)switch(i=e.normalizePropertyName(i,a),s){case"!":s=r[n];break;case"*":s=o[n];break;default:s=e.normalizeStyleValue(n,i,s,a)}c[i]=s}),i||s.push(c),l=c,u=n}),a.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${a.join(t)}`)}return s}function Nh(t,e,n,i){switch(e){case"start":t.onStart(()=>i(n&&Bh(n,"start",t)));break;case"done":t.onDone(()=>i(n&&Bh(n,"done",t)));break;case"destroy":t.onDestroy(()=>i(n&&Bh(n,"destroy",t)))}}function Bh(t,e,n){const i=n.totalTime,r=Vh(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==i?t.totalTime:i,!!n.disabled),o=t._data;return null!=o&&(r._data=o),r}function Vh(t,e,n,i,r="",o=0,a){return{element:t,triggerName:e,fromState:n,toState:i,phaseName:r,totalTime:o,disabled:!!a}}function Uh(t,e,n){let i;return t instanceof Map?(i=t.get(e),i||t.set(e,i=n)):(i=t[e],i||(i=t[e]=n)),i}function jh(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let qh=(t,e)=>!1,Gh=(t,e)=>!1,Hh=(t,e,n)=>[];const Zh=Fh();(Zh||"undefined"!=typeof Element)&&(qh=(t,e)=>t.contains(e),Gh=(()=>{if(Zh||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):Gh}})(),Hh=(t,e,n)=>{let i=[];if(n)i.push(...t.querySelectorAll(e));else{const n=t.querySelector(e);n&&i.push(n)}return i});let Wh=null,Kh=!1;function Xh(t){Wh||(Wh=("undefined"!=typeof document?document.body:null)||{},Kh=!!Wh.style&&"WebkitAppearance"in Wh.style);let e=!0;return Wh.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in Wh.style,!e&&Kh)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in Wh.style),e}const $h=Gh,Yh=qh,Qh=Hh;function Jh(t){const e={};return Object.keys(t).forEach(n=>{const i=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[i]=t[n]}),e}let td=(()=>{class t{validateStyleProperty(t){return Xh(t)}matchesElement(t,e){return $h(t,e)}containsElement(t,e){return Yh(t,e)}query(t,e,n){return Qh(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,i,r,o=[],a){return new Dh(n,i)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),ed=(()=>{class t{}return t.NOOP=new td,t})();function nd(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:id(parseFloat(e[1]),e[2])}function id(t,e){switch(e){case"s":return 1e3*t;default:return t}}function rd(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let i,r=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};i=id(parseFloat(n[1]),n[2]);const a=n[3];null!=a&&(r=id(parseFloat(a),n[4]));const s=n[5];s&&(o=s)}else i=t;if(!n){let n=!1,o=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),r<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:i,delay:r,easing:o}}(t,e,n)}function od(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function ad(t,e,n={}){if(e)for(let i in t)n[i]=t[i];else od(t,n);return n}function sd(t,e,n){return n?e+":"+n+";":""}function ud(t){let e="";for(let n=0;n<t.style.length;n++){const i=t.style.item(n);e+=sd(0,i,t.style.getPropertyValue(i))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=sd(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function ld(t,e,n){t.style&&(Object.keys(e).forEach(i=>{const r=yd(i);n&&!n.hasOwnProperty(i)&&(n[i]=t.style[r]),t.style[r]=e[i]}),Fh()&&ud(t))}function cd(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=yd(e);t.style[n]=""}),Fh()&&ud(t))}function hd(t){return Array.isArray(t)?1==t.length?t[0]:Eh(t):t}const dd=new RegExp("{{\\s*(.+?)\\s*}}","g");function pd(t){let e=[];if("string"==typeof t){let n;for(;n=dd.exec(t);)e.push(n[1]);dd.lastIndex=0}return e}function fd(t,e,n){const i=t.toString(),r=i.replace(dd,(t,i)=>{let r=e[i];return e.hasOwnProperty(i)||(n.push(`Please provide a value for the animation param ${i}`),r=""),r.toString()});return r==i?t:r}function gd(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const md=/-+([a-z0-9])/g;function yd(t){return t.replace(md,(...t)=>t[1].toUpperCase())}function _d(t,e){return 0===t||0===e}function vd(t,e,n){const i=Object.keys(n);if(i.length&&e.length){let o=e[0],a=[];if(i.forEach(t=>{o.hasOwnProperty(t)||a.push(t),o[t]=n[t]}),a.length)for(var r=1;r<e.length;r++){let n=e[r];a.forEach((function(e){n[e]=xd(t,e)}))}}return e}function bd(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function xd(t,e){return window.getComputedStyle(t)[e]}function wd(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const i=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof i)return void e.push(i);t=i}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const r=i[1],o=i[2],a=i[3];e.push(Md(r,a)),"<"!=o[0]||"*"==r&&"*"==a||e.push(Md(a,r))}(t,n,e)):n.push(t),n}const Cd=new Set(["true","1"]),Pd=new Set(["false","0"]);function Md(t,e){const n=Cd.has(t)||Pd.has(t),i=Cd.has(e)||Pd.has(e);return(r,o)=>{let a="*"==t||t==r,s="*"==e||e==o;return!a&&n&&"boolean"==typeof r&&(a=r?Cd.has(t):Pd.has(t)),!s&&i&&"boolean"==typeof o&&(s=o?Cd.has(e):Pd.has(e)),a&&s}}const Od=new RegExp("s*:selfs*,?","g");function kd(t,e,n){return new Ed(t).build(e,n)}class Ed{constructor(t){this._driver=t}build(t,e){const n=new Sd(e);return this._resetContextStyleTimingState(n),bd(this,hd(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,i=e.depCount=0;const r=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,i=n.name;i.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,r.push(this.visitState(n,e))}),n.name=i}else if(1==t.type){const r=this.visitTransition(t,e);n+=r.queryCount,i+=r.depCount,o.push(r)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:r,transitions:o,queryCount:n,depCount:i,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(n.containsDynamicStyles){const r=new Set,o=i||{};if(n.styles.forEach(t=>{if(Td(t)){const e=t;Object.keys(e).forEach(t=>{pd(e[t]).forEach(t=>{o.hasOwnProperty(t)||r.add(t)})})}}),r.size){const n=gd(r.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=bd(this,hd(t.animation),e);return{type:1,matchers:wd(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:Ad(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>bd(this,t,e)),options:Ad(t.options)}}visitGroup(t,e){const n=e.currentTime;let i=0;const r=t.steps.map(t=>{e.currentTime=n;const r=bd(this,t,e);return i=Math.max(i,e.currentTime),r});return e.currentTime=i,{type:3,steps:r,options:Ad(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return Id(rd(t,e).duration,0,"");const i=t;if(i.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=Id(0,0,"");return t.dynamic=!0,t.strValue=i,t}return n=n||rd(i,e),Id(n.duration,n.delay,n.easing)}(t.timings,e.errors);let i;e.currentAnimateTimings=n;let r=t.styles?t.styles:Sh({});if(5==r.type)i=this.visitKeyframes(r,e);else{let r=t.styles,o=!1;if(!r){o=!0;const t={};n.easing&&(t.easing=n.easing),r=Sh(t)}e.currentTime+=n.duration+n.delay;const a=this.visitStyle(r,e);a.isEmptyStep=o,i=a}return e.currentAnimateTimings=null,{type:4,timings:n,style:i,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?"*"==t?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let i=!1,r=null;return n.forEach(t=>{if(Td(t)){const e=t,n=e.easing;if(n&&(r=n,delete e.easing),!i)for(let t in e)if(e[t].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:n,easing:r,offset:t.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let i=e.currentTime,r=e.currentTime;n&&r>0&&(r-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],a=o[n];let s=!0;a&&(r!=i&&r>=a.startTime&&i<=a.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${a.startTime}ms" and "${a.endTime}ms" is also being animated in a parallel animation between the times of "${r}ms" and "${i}ms"`),s=!1),r=a.startTime),s&&(o[n]={startTime:r,endTime:i}),e.options&&function(t,e,n){const i=e.params||{},r=pd(t);r.length&&r.forEach(t=>{i.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let i=0;const r=[];let o=!1,a=!1,s=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(Td(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(Td(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),l=0;return null!=u&&(i++,l=n.offset=u),a=a||l<0||l>1,o=o||l<s,s=l,r.push(l),n});a&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const l=t.steps.length;let c=0;i>0&&i<l?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(c=1/(l-1));const h=l-1,d=e.currentTime,p=e.currentAnimateTimings,f=p.duration;return u.forEach((t,i)=>{const o=c>0?i==h?1:c*i:r[i],a=o*f;e.currentTime=d+p.delay+a,p.duration=a,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:bd(this,hd(t.animation),e),options:Ad(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Ad(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Ad(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;const[r,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(Od,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,".ng-animating"),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+r:r,Uh(e.collectedStyles,e.currentQuerySelector,{});const a=bd(this,hd(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:r,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:Ad(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:rd(t.timings,e.errors,!0);return{type:12,animation:bd(this,hd(t.animation),e),timings:n,options:null}}}class Sd{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Td(t){return!Array.isArray(t)&&"object"==typeof t}function Ad(t){var e;return t?(t=od(t)).params&&(t.params=(e=t.params)?od(e):null):t={},t}function Id(t,e,n){return{duration:t,delay:e,easing:n}}function Dd(t,e,n,i,r,o,a=null,s=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:a,subTimeline:s}}class Rd{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Fd=new RegExp(":enter","g"),Ld=new RegExp(":leave","g");function zd(t,e,n,i,r,o={},a={},s,u,l=[]){return(new Nd).buildKeyframes(t,e,n,i,r,o,a,s,u,l)}class Nd{buildKeyframes(t,e,n,i,r,o,a,s,u,l=[]){u=u||new Rd;const c=new Vd(t,e,u,i,r,l,[]);c.options=s,c.currentTimeline.setStyles([o],null,c.errors,s),bd(this,n,c);const h=c.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(a).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([a],null,c.errors,s)}return h.length?h.map(t=>t.buildKeyframes()):[Dd(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const i=e.createSubContext(t.options),r=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,i,i.options);r!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let i=e.currentTimeline.currentTime;const r=null!=n.duration?nd(n.duration):null,o=null!=n.delay?nd(n.delay):null;return 0!==r&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,r,o);i=Math.max(i,n.duration+n.delay)}),i}visitReference(t,e){e.updateOptions(t.options,!0),bd(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let i=e;const r=t.options;if(r&&(r.params||r.delay)&&(i=e.createSubContext(r),i.transformIntoNewTimeline(),null!=r.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Bd);const t=nd(r.delay);i.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>bd(this,t,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>n&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let i=e.currentTimeline.currentTime;const r=t.options&&t.options.delay?nd(t.options.delay):0;t.steps.forEach(o=>{const a=e.createSubContext(t.options);r&&a.delayNextStep(r),bd(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return rd(e.params?fd(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),i.snapshotCurrentStyles());const r=t.style;5==r.type?this.visitKeyframes(r,e):(e.incrementTime(n.duration),this.visitStyle(r,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,i=e.currentAnimateTimings;!i&&n.getCurrentStyleProperties().length&&n.forwardFrame();const r=i&&i.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(r):n.setStyles(t.styles,r,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,i=e.currentTimeline.duration,r=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*r),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(i+r),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,i=t.options||{},r=i.delay?nd(i.delay):0;r&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Bd);let o=n;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=a.length;let s=null;a.forEach((n,i)=>{e.currentQueryIndex=i;const a=e.createSubContext(t.options,n);r&&a.delayNextStep(r),n===e.element&&(s=a.currentTimeline),bd(this,t.animation,a),a.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,a.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),s&&(e.currentTimeline.mergeTimelineCollectedStyles(s),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,i=e.currentTimeline,r=t.timings,o=Math.abs(r.duration),a=o*(e.currentQueryTotal-1);let s=o*e.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":s=a-s;break;case"full":s=n.currentStaggerTime}const u=e.currentTimeline;s&&u.delayNextStep(s);const l=u.currentTime;bd(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=i.currentTime-l+(i.startTime-n.currentTimeline.startTime)}}const Bd={};class Vd{constructor(t,e,n,i,r,o,a,s){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=i,this._leaveClassName=r,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Bd,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=s||new Ud(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let i=this.options;null!=n.duration&&(i.duration=nd(n.duration)),null!=n.delay&&(i.delay=nd(n.delay));const r=n.params;if(r){let t=i.params;t||(t=this.options.params={}),Object.keys(r).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=fd(r[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const i=e||this.element,r=new Vd(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,n||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(t),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(t){return this.previousNode=Bd,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const i={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},r=new jd(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(r),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,i,r,o){let a=[];if(i&&a.push(this.element),t.length>0){t=(t=t.replace(Fd,"."+this._enterClassName)).replace(Ld,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),a.push(...e)}return r||0!=a.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),a}}class Ud{constructor(t,e,n,i){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Ud(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||"*",this._currentKeyframe[t]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,i){e&&(this._previousKeyframe.easing=e);const r=i&&i.params||{},o=function(t,e){const n={};let i;return t.forEach(t=>{"*"===t?(i=i||Object.keys(e),i.forEach(t=>{n[t]="*"})):ad(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=fd(o[t],r,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:"*"),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],i=t._styleSummary[e];(!n||i.time>n.time)&&this._updateStyle(e,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((r,o)=>{const a=ad(r,!0);Object.keys(a).forEach(n=>{const i=a[n];"!"==i?t.add(n):"*"==i&&e.add(n)}),n||(a.offset=o/this.duration),i.push(a)});const r=t.size?gd(t.values()):[],o=e.size?gd(e.values()):[];if(n){const t=i[0],e=od(t);t.offset=0,e.offset=1,i=[t,e]}return Dd(this.element,i,r,o,this.duration,this.startTime,this.easing,!1)}}class jd extends Ud{constructor(t,e,n,i,r,o,a=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=i,this.postStyleProps=r,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const r=[],o=n+e,a=e/o,s=ad(t[0],!1);s.offset=0,r.push(s);const u=ad(t[0],!1);u.offset=qd(a),r.push(u);const l=t.length-1;for(let i=1;i<=l;i++){let a=ad(t[i],!1);a.offset=qd((e+a.offset*n)/o),r.push(a)}n=o,e=0,i="",t=r}return Dd(this.element,t,this.preStyleProps,this.postStyleProps,n,e,i,!0)}}function qd(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class Gd{}class Hd extends Gd{normalizePropertyName(t,e){return yd(t)}normalizeStyleValue(t,e,n,i){let r="";const o=n.toString().trim();if(Zd[e]&&0!==n&&"0"!==n)if("number"==typeof n)r="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&i.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+r}}const Zd=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Wd(t,e,n,i,r,o,a,s,u,l,c,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:o,toState:i,toStyles:a,timelines:s,queriedElements:u,preStyleProps:l,postStyleProps:c,totalTime:h,errors:d}}const Kd={};class Xd{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,i){return function(t,e,n,i,r){return t.some(t=>t(e,n,i,r))}(this.ast.matchers,t,e,n,i)}buildStyles(t,e,n){const i=this._stateStyles["*"],r=this._stateStyles[t],o=i?i.buildStyles(e,n):{};return r?r.buildStyles(e,n):o}build(t,e,n,i,r,o,a,s,u,l){const c=[],h=this.ast.options&&this.ast.options.params||Kd,d=this.buildStyles(n,a&&a.params||Kd,c),p=s&&s.params||Kd,f=this.buildStyles(i,p,c),g=new Set,m=new Map,y=new Map,_="void"===i,v={params:Object.assign(Object.assign({},h),p)},b=l?[]:zd(t,e,this.ast.animation,r,o,d,f,v,u,c);let x=0;if(b.forEach(t=>{x=Math.max(t.duration+t.delay,x)}),c.length)return Wd(e,this._triggerName,n,i,_,d,f,[],[],m,y,x,c);b.forEach(t=>{const n=t.element,i=Uh(m,n,{});t.preStyleProps.forEach(t=>i[t]=!0);const r=Uh(y,n,{});t.postStyleProps.forEach(t=>r[t]=!0),n!==e&&g.add(n)});const w=gd(g.values());return Wd(e,this._triggerName,n,i,_,d,f,b,w,m,y,x)}}class $d{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},i=od(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(i[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const r=t;Object.keys(r).forEach(t=>{let o=r[t];o.length>1&&(o=fd(o,i,e)),n[t]=o})}}),n}}class Yd{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new $d(t.style,t.options&&t.options.params||{})}),Qd(this.states,"true","1"),Qd(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new Xd(t,e,this.states))}),this.fallbackTransition=new Xd(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,i){return this.transitionFactories.find(r=>r.match(t,e,n,i))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Qd(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const Jd=new Rd;class tp{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],i=kd(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=i}_buildPlayer(t,e,n){const i=t.element,r=zh(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(i,r,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const i=[],r=this._animations[t];let o;const a=new Map;if(r?(o=zd(this._driver,e,r,"ng-enter","ng-leave",{},{},n,Jd,i),o.forEach(t=>{const e=Uh(a,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),o=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);a.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,"*")})});const s=Lh(o.map(t=>{const e=a.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=s,s.onDestroy(()=>this.destroy(t)),this.players.push(s),s}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,i){const r=Vh(e,"","","");return Nh(this._getPlayer(t),n,r,i),()=>{}}command(t,e,n,i){if("register"==n)return void this.register(t,i[0]);if("create"==n)return void this.create(t,e,i[0]||{});const r=this._getPlayer(t);switch(n){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const ep=[],np={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ip={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class rp{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(i=n?t.value:t)?i:null,n){const e=od(t);delete e.value,this.options=e}else this.options={};var i;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const op=new rp("void");class ap{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,pp(e,this._hostClassName)}listen(t,e,n,i){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(r=n)&&"done"!=r)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var r;const o=Uh(this._elementListeners,t,[]),a={name:e,phase:n,callback:i};o.push(a);const s=Uh(this._engine.statesByElement,t,{});return s.hasOwnProperty(e)||(pp(t,"ng-trigger"),pp(t,"ng-trigger-"+e),s[e]=op),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(a);t>=0&&o.splice(t,1),this._triggers[e]||delete s[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,i=!0){const r=this._getTrigger(e),o=new up(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(pp(t,"ng-trigger"),pp(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,a={}));let s=a[e];const u=new rp(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&s&&u.absorbOptions(s.options),a[e]=u,s||(s=op),"void"!==u.value&&s.value===u.value){if(!function(t,e){const n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){const i=n[r];if(!e.hasOwnProperty(i)||t[i]!==e[i])return!1}return!0}(s.params,u.params)){const e=[],n=r.matchStyles(s.value,s.params,e),i=r.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{cd(t,n),ld(t,i)})}return}const l=Uh(this._engine.playersByElement,t,[]);l.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let c=r.matchTransition(s.value,u.value,t,u.params),h=!1;if(!c){if(!i)return;c=r.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:c,fromState:s,toState:u,player:o,isFallbackTransition:h}),h||(pp(t,"ng-animate-queued"),o.onStart(()=>{fp(t,"ng-animate-queued")})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),l.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,".ng-trigger",!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,i){const r=this._engine.statesByElement.get(t);if(r){const o=[];if(Object.keys(r).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,"void",i);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&Lh(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const i=e.name;if(n.has(i))return;n.add(i);const r=this._triggers[i].fallbackTransition,o=this._engine.statesByElement.get(t)[i]||op,a=new rp("void"),s=new up(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:r,fromState:o,toState:a,player:s,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)i=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)n.markElementAsRemoved(this.id,t,!1,e);else{const i=t.__ng_removed;i&&i!==np||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){pp(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const i=n.player;if(i.destroyed)return;const r=n.element,o=this._elementListeners.get(r);o&&o.forEach(e=>{if(e.name==n.triggerName){const i=Vh(r,n.triggerName,n.fromState.value,n.toState.value);i._data=t,Nh(n.player,e.phase,i,e.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,i=e.transition.ast.depCount;return 0==n||0==i?n-i:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class sp{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new ap(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let i=!1;for(let r=n;r>=0;r--)if(this.driver.containsElement(this._namespaceList[r].hostElement,e)){this._namespaceList.splice(r+1,0,t),i=!0;break}i||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let i=this._namespaceLookup[t];i&&i.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=n[t[i]].namespaceId;if(r){const t=this._fetchNamespace(r);t&&e.add(t)}}}return e}trigger(t,e,n,i){if(lp(e)){const r=this._fetchNamespace(t);if(r)return r.trigger(e,n,i),!0}return!1}insertNode(t,e,n,i){if(!lp(e))return;const r=e.__ng_removed;if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const i=this._fetchNamespace(t);i&&i.insertNode(e,n)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),pp(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),fp(t,"ng-animate-disabled"))}removeNode(t,e,n,i){if(lp(e)){const r=t?this._fetchNamespace(t):null;if(r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,i)}}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,n,i){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:i,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,i,r){return lp(e)?this._fetchNamespace(t).listen(e,n,i,r):()=>{}}_buildInstruction(t,e,n,i,r){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,i,t.fromState.options,t.toState.options,e,r)}destroyInnerAnimations(t){let e=this.driver.query(t,".ng-trigger",!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,".ng-animating",!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Lh(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=np,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)pp(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?Lh(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new Rd,i=[],r=new Map,o=[],a=new Map,s=new Map,u=new Map,l=new Set;this.disabledNodes.forEach(t=>{l.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)l.add(e[n])});const c=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=dp(h,this.collectedEnterElements),p=new Map;let f=0;d.forEach((t,e)=>{const n="ng-enter"+f++;p.set(e,n),t.forEach(t=>pp(t,n))});const g=[],m=new Set,y=new Set;for(let T=0;T<this.collectedLeaveElements.length;T++){const t=this.collectedLeaveElements[T],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):y.add(t))}const _=new Map,v=dp(h,Array.from(m));v.forEach((t,e)=>{const n="ng-leave"+f++;_.set(e,n),t.forEach(t=>pp(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=p.get(e);t.forEach(t=>fp(t,n))}),v.forEach((t,e)=>{const n=_.get(e);t.forEach(t=>fp(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const b=[],x=[];for(let T=this._namespaceList.length-1;T>=0;T--)this._namespaceList[T].drainQueuedTransitions(e).forEach(t=>{const e=t.player,r=t.element;if(b.push(e),this.collectedEnterElements.length){const t=r.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const l=!c||!this.driver.containsElement(c,r),h=_.get(r),d=p.get(r),f=this._buildInstruction(t,n,d,h,l);if(!f.errors||!f.errors.length)return l||t.isFallbackTransition?(e.onStart(()=>cd(r,f.fromStyles)),e.onDestroy(()=>ld(r,f.toStyles)),void i.push(e)):(f.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(r,f.timelines),o.push({instruction:f,player:e,element:r}),f.queriedElements.forEach(t=>Uh(a,t,[]).push(e)),f.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=s.get(e);t||s.set(e,t=new Set),n.forEach(e=>t.add(e))}}),void f.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let i=u.get(e);i||u.set(e,i=new Set),n.forEach(t=>i.add(t))}));x.push(f)});if(x.length){const t=[];x.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),b.forEach(t=>t.destroy()),this.reportError(t)}const w=new Map,C=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(C.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,w))}),i.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{Uh(w,e,[]).push(t),t.destroy()})});const P=g.filter(t=>mp(t,s,u)),M=new Map;hp(M,this.driver,y,u,"*").forEach(t=>{mp(t,s,u)&&P.push(t)});const O=new Map;d.forEach((t,e)=>{hp(O,this.driver,new Set(t),s,"!")}),P.forEach(t=>{const e=M.get(t),n=O.get(t);M.set(t,Object.assign(Object.assign({},e),n))});const k=[],E=[],S={};o.forEach(t=>{const{element:e,player:o,instruction:a}=t;if(n.has(e)){if(l.has(e))return o.onDestroy(()=>ld(e,a.toStyles)),o.disabled=!0,o.overrideTotalTime(a.totalTime),void i.push(o);let t=S;if(C.size>1){let n=e;const i=[];for(;n=n.parentNode;){const e=C.get(n);if(e){t=e;break}i.push(n)}i.forEach(e=>C.set(e,t))}const n=this._buildAnimation(o.namespaceId,a,w,r,O,M);if(o.setRealPlayer(n),t===S)k.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=Lh(e)),i.push(o)}}else cd(e,a.fromStyles),o.onDestroy(()=>ld(e,a.toStyles)),E.push(o),l.has(e)&&i.push(o)}),E.forEach(t=>{const e=r.get(t.element);if(e&&e.length){const n=Lh(e);t.setRealPlayer(n)}}),i.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let T=0;T<g.length;T++){const t=g[T],e=t.__ng_removed;if(fp(t,"ng-leave"),e&&e.hasAnimation)continue;let n=[];if(a.size){let e=a.get(t);e&&e.length&&n.push(...e);let i=this.driver.query(t,".ng-animating",!0);for(let t=0;t<i.length;t++){let e=a.get(i[t]);e&&e.length&&n.push(...e)}}const i=n.filter(t=>!t.destroyed);i.length?gp(this,t,i):this.processLeaveNode(t)}return g.length=0,k.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),k}elementContainsData(t,e){let n=!1;const i=e.__ng_removed;return i&&i.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,i,r){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!r||"void"==r;e.forEach(e=>{e.queued||(t||e.triggerName==i)&&o.push(e)})}}return(n||i)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||i&&i!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const i=e.element,r=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const a of e.timelines){const t=a.element,s=t!==i,u=Uh(n,t,[]);this._getPreviousPlayers(t,s,r,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}cd(i,e.fromStyles)}_buildAnimation(t,e,n,i,r,o){const a=e.triggerName,s=e.element,u=[],l=new Set,c=new Set,h=e.timelines.map(e=>{const h=e.element;l.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new Dh(e.duration,e.delay);const p=h!==s,f=function(t){const e=[];return function t(e,n){for(let i=0;i<e.length;i++){const r=e[i];r instanceof Rh?t(r.players,n):n.push(r)}}(t,e),e}((n.get(h)||ep).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=r.get(h),m=o.get(h),y=zh(0,this._normalizer,0,e.keyframes,g,m),_=this._buildPlayer(e,y,f);if(e.subTimeline&&i&&c.add(h),p){const e=new up(t,a,h);e.setRealPlayer(_),u.push(e)}return _});u.forEach(t=>{Uh(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let i;if(t instanceof Map){if(i=t.get(e),i){if(i.length){const t=i.indexOf(n);i.splice(t,1)}0==i.length&&t.delete(e)}}else if(i=t[e],i){if(i.length){const t=i.indexOf(n);i.splice(t,1)}0==i.length&&delete t[e]}return i}(this.playersByQueriedElement,t.element,t))}),l.forEach(t=>pp(t,"ng-animating"));const d=Lh(h);return d.onDestroy(()=>{l.forEach(t=>fp(t,"ng-animating")),ld(s,e.toStyles)}),c.forEach(t=>{Uh(i,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Dh(t.duration,t.delay)}}class up{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Dh,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>Nh(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Uh(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function lp(t){return t&&1===t.nodeType}function cp(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function hp(t,e,n,i,r){const o=[];n.forEach(t=>o.push(cp(t)));const a=[];i.forEach((n,i)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(i,t,r);n&&0!=n.length||(i.__ng_removed=ip,a.push(i))}),t.set(i,o)});let s=0;return n.forEach(t=>cp(t,o[s++])),a}function dp(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const i=new Set(e),r=new Map;return e.forEach(t=>{const e=function t(e){if(!e)return 1;let o=r.get(e);if(o)return o;const a=e.parentNode;return o=n.has(a)?a:i.has(a)?1:t(a),r.set(e,o),o}(t);1!==e&&n.get(e).push(t)}),n}function pp(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function fp(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function gp(t,e,n){Lh(n).onDone(()=>t.processLeaveNode(e))}function mp(t,e,n){const i=n.get(t);if(!i)return!1;let r=e.get(t);return r?i.forEach(t=>r.add(t)):e.set(t,i),n.delete(t),!0}class yp{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new sp(t,e,n),this._timelineEngine=new tp(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,i,r){const o=t+"-"+i;let a=this._triggerCache[o];if(!a){const t=[],e=kd(this._driver,r,t);if(t.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);a=function(t,e){return new Yd(t,e)}(i,e),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,i,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,i){this._transitionEngine.insertNode(t,e,n,i)}onRemove(t,e,n,i){this._transitionEngine.removeNode(t,e,i||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,i){if("@"==n.charAt(0)){const[t,r]=jh(n);this._timelineEngine.command(t,e,r,i)}else this._transitionEngine.trigger(t,e,n,i)}listen(t,e,n,i,r){if("@"==n.charAt(0)){const[t,i]=jh(n);return this._timelineEngine.listen(t,e,i,r)}return this._transitionEngine.listen(t,e,n,i,r)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function _p(t,e){let n=null,i=null;return Array.isArray(e)&&e.length?(n=bp(e[0]),e.length>1&&(i=bp(e[e.length-1]))):e&&(n=bp(e)),n||i?new vp(t,n,i):null}let vp=(()=>{class t{constructor(e,n,i){this._element=e,this._startStyles=n,this._endStyles=i,this._state=0;let r=t.initialStylesByElement.get(e);r||t.initialStylesByElement.set(e,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&ld(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ld(this._element,this._initialStyles),this._endStyles&&(ld(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(cd(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(cd(this._element,this._endStyles),this._endStyles=null),ld(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function bp(t){let e=null;const n=Object.keys(t);for(let i=0;i<n.length;i++){const r=n[i];xp(r)&&(e=e||{},e[r]=t[r])}return e}function xp(t){return"display"===t||"position"===t}class wp{constructor(t,e,n,i,r,o,a){this._element=t,this._name=e,this._duration=n,this._delay=i,this._easing=r,this._fillMode=o,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=Ep(t,"").trim();n.length&&(function(t,e){let n=0;for(let i=0;i<t.length;i++)","===t.charAt(i)&&n++}(n),e=`${n}, ${e}`),kp(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Op(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Cp(this._element,this._name,"paused")}resume(){Cp(this._element,this._name,"running")}setPosition(t){const e=Pp(this._element,this._name);this._position=t*this._duration,kp(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Op(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=Ep(t,"").split(","),i=Mp(n,e);i>=0&&(n.splice(i,1),kp(t,"",n.join(",")))}(this._element,this._name))}}function Cp(t,e,n){kp(t,"PlayState",n,Pp(t,e))}function Pp(t,e){const n=Ep(t,"");return n.indexOf(",")>0?Mp(n.split(","),e):Mp([n],e)}function Mp(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function Op(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function kp(t,e,n,i){const r="animation"+e;if(null!=i){const e=t.style[r];if(e.length){const t=e.split(",");t[i]=n,n=t.join(",")}}t.style[r]=n}function Ep(t,e){return t.style["animation"+e]}class Sp{constructor(t,e,n,i,r,o,a,s){this.element=t,this.keyframes=e,this.animationName=n,this._duration=i,this._delay=r,this._finalStyles=a,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=i+r,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new wp(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:xd(this.element,n))})}this.currentSnapshot=t}}class Tp extends Dh{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Jh(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class Ap{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(t){return Xh(t)}matchesElement(t,e){return $h(t,e)}containsElement(t,e){return Yh(t,e)}query(t,e,n){return Qh(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>Jh(t));let i=`@keyframes ${e} {\n`,r="";n.forEach(t=>{r=" ";const e=parseFloat(t.offset);i+=`${r}${100*e}% {\n`,r+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(i+=`${r}animation-timing-function: ${n};\n`));default:return void(i+=`${r}${e}: ${n};\n`)}}),i+=`${r}}\n`}),i+="}\n";const o=document.createElement("style");return o.innerHTML=i,o}animate(t,e,n,i,r,o=[],a){a&&this._notifyFaultyScrubber();const s=o.filter(t=>t instanceof Sp),u={};_d(n,i)&&s.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=vd(t,e,u));if(0==n)return new Tp(t,l);const c=`gen_css_kf_${this._count++}`,h=this.buildKeyframeElement(t,c,e);document.querySelector("head").appendChild(h);const d=_p(t,e),p=new Sp(t,e,c,n,i,r,l,d);return p.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),p}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class Ip{constructor(t,e,n,i){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:xd(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Dp{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Rp().toString()),this._cssKeyframesDriver=new Ap}validateStyleProperty(t){return Xh(t)}matchesElement(t,e){return $h(t,e)}containsElement(t,e){return Yh(t,e)}query(t,e,n){return Qh(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,i,r,o=[],a){if(!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,i,r,o);const s={duration:n,delay:i,fill:0==i?"both":"forwards"};r&&(s.easing=r);const u={},l=o.filter(t=>t instanceof Ip);_d(n,i)&&l.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=_p(t,e=vd(t,e=e.map(t=>ad(t,!1)),u));return new Ip(t,e,s,c)}}function Rp(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let Fp=(()=>{class t extends Mh{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:de.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Eh(t):t;return Np(this._renderer,null,e,"register",[n]),new Lp(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(Yt(Bs),Yt(cc))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class Lp extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new zp(this._id,t,e||{},this._renderer)}}class zp{constructor(t,e,n,i){this.id=t,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Np(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){return 0}}function Np(t,e,n,i,r){return t.setProperty(e,`@@${n}:${i}`,r)}let Bp=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new Vp("",n,this.engine),this._rendererCache.set(n,t)),t}const i=e.id,r=e.id+"-"+this._currentId;this._currentId++,this.engine.register(r,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(i,r,t,e.name,e)};return e.data.animation.forEach(o),new Up(this,r,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(Yt(Bs),Yt(yp),Yt(Il))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class Vp{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,i){this.delegate.setAttribute(t,e,n,i)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,i){this.delegate.setStyle(t,e,n,i)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Up extends Vp{constructor(t,e,n,i){super(e,n,i),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const i=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let r=e.substr(1),o="";return"@"!=r.charAt(0)&&([r,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(r)),this.engine.listen(this.namespaceId,i,r,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let jp=(()=>{class t extends yp{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(Yt(cc),Yt(ed),Yt(Gd))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const qp=[{provide:ed,useFactory:function(){return"function"==typeof Rp()?new Dp:new Ap}},{provide:new Ut("AnimationModuleType"),useValue:"BrowserAnimations"},{provide:Mh,useClass:Fp},{provide:Gd,useFactory:function(){return new Hd}},{provide:yp,useClass:jp},{provide:Bs,useFactory:function(t,e,n){return new Bp(t,e,n)},deps:[dh,yp,Il]}];let Gp=(()=>{class t{}return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},providers:qp,imports:[Ph]}),t})();function Hp(...t){let e=t[t.length-1];return k(e)?(t.pop(),V(t,e)):W(t)}class Zp extends M{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new w;return this._value}next(t){super.next(this._value=t)}}const Wp=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),Kp={};class Xp{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new $p(t,this.resultSelector))}}class $p extends L{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Kp),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(F(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,i,r){const o=this.values,a=this.toRespond?o[n]===Kp?--this.toRespond:this.toRespond:0;o[n]=e,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Yp=new b(t=>t.complete());function Qp(t){return t?function(t){return new b(e=>t.schedule(()=>e.complete()))}(t):Yp}function Jp(t){return new b(e=>{let n;try{n=t()}catch(i){return void e.error(i)}return(n?U(n):Qp()).subscribe(e)})}function tf(){return Z(1)}function ef(t,e){return function(n){return n.lift(new nf(t,e))}}class nf{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new rf(t,this.predicate,this.thisArg))}}class rf extends f{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const of=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function af(t){return function(e){return 0===t?Qp():e.lift(new sf(t))}}class sf{constructor(t){if(this.total=t,this.total<0)throw new of}call(t,e){return e.subscribe(new uf(t,this.total))}}class uf extends f{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,i=this.count++;e.length<n?e.push(t):e[i%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,i=this.ring;for(let r=0;r<n;r++){const r=e++%n;t.next(i[r])}}t.complete()}}function lf(t=df){return e=>e.lift(new cf(t))}class cf{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new hf(t,this.errorFactory))}}class hf extends f{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function df(){return new Wp}function pf(t=null){return e=>e.lift(new ff(t))}class ff{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new gf(t,this.defaultValue))}}class gf extends f{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function mf(t,e){const n=arguments.length>=2;return i=>i.pipe(t?ef((e,n)=>t(e,n,i)):H,af(1),n?pf(e):lf(()=>new Wp))}function yf(t){return function(e){const n=new _f(t),i=e.lift(n);return n.caught=i}}class _f{constructor(t){this.selector=t}call(t,e){return e.subscribe(new vf(t,this.selector,this.caught))}}class vf extends L{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const i=new E(this,void 0,void 0);this.add(i);const r=F(this,n,void 0,void 0,i);r!==i&&this.add(r)}}}function bf(t){return e=>0===t?Qp():e.lift(new xf(t))}class xf{constructor(t){if(this.total=t,this.total<0)throw new of}call(t,e){return e.subscribe(new wf(t,this.total))}}class wf extends f{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Cf(t,e){const n=arguments.length>=2;return i=>i.pipe(t?ef((e,n)=>t(e,n,i)):H,bf(1),n?pf(e):lf(()=>new Wp))}class Pf{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new Mf(t,this.predicate,this.thisArg,this.source))}}class Mf extends f{constructor(t,e,n,i){super(t),this.predicate=e,this.thisArg=n,this.source=i,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function Of(t,e){return"function"==typeof e?n=>n.pipe(Of((n,i)=>U(t(n,i)).pipe(z((t,r)=>e(n,t,i,r))))):e=>e.lift(new kf(t))}class kf{constructor(t){this.project=t}call(t,e){return e.subscribe(new Ef(t,this.project))}}class Ef extends L{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this._innerSub(e,t,n)}_innerSub(t,e,n){const i=this.innerSubscription;i&&i.unsubscribe();const r=new E(this,e,n),o=this.destination;o.add(r),this.innerSubscription=F(this,t,void 0,void 0,r),this.innerSubscription!==r&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,i,r){this.destination.next(e)}}function Sf(...t){return tf()(Hp(...t))}function Tf(...t){const e=t[t.length-1];return k(e)?(t.pop(),n=>Sf(t,n,e)):e=>Sf(t,e)}function Af(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new If(t,e,n))}}class If{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Df(t,this.accumulator,this.seed,this.hasSeed))}}class Df extends f{constructor(t,e,n,i){super(t),this.accumulator=e,this._seed=n,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(i){this.destination.error(i)}this.seed=n,this.destination.next(n)}}function Rf(t,e){return j(t,e,1)}function Ff(t,e,n){return function(i){return i.lift(new Lf(t,e,n))}}class Lf{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new zf(t,this.nextOrObserver,this.error,this.complete))}}class zf extends f{constructor(t,e,n,r){super(t),this._tapNext=y,this._tapError=y,this._tapComplete=y,this._tapError=n||y,this._tapComplete=r||y,i(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||y,this._tapError=e.error||y,this._tapComplete=e.complete||y)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class Nf{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Bf(t,this.callback))}}class Bf extends f{constructor(t,e){super(t),this.add(new h(e))}}class Vf{constructor(t,e){this.id=t,this.url=e}}class Uf extends Vf{constructor(t,e,n="imperative",i=null){super(t,e),this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class jf extends Vf{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qf extends Vf{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Gf extends Vf{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Hf extends Vf{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zf extends Vf{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wf extends Vf{constructor(t,e,n,i,r){super(t,e),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Kf extends Vf{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xf extends Vf{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $f{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Yf{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Qf{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jf{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tg{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eg{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ng{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let ig=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=me({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&xa(0,"router-outlet")},directives:function(){return[uy]},encapsulation:2}),t})();class rg{constructor(t){this.params=t||{}}has(t){return this.params.hasOwnProperty(t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function og(t){return new rg(t)}function ag(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function sg(t,e,n){const i=n.path.split("/");if(i.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||i.length<t.length))return null;const r={};for(let o=0;o<i.length;o++){const e=i[o],n=t[o];if(e.startsWith(":"))r[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}class ug{constructor(t,e){this.routes=t,this.module=e}}function lg(t,e=""){for(let n=0;n<t.length;n++){const i=t[n];cg(i,hg(e,i))}}function cg(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&lg(t.children,e)}function hg(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function dg(t){const e=t.children&&t.children.map(dg),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=ig),n}function pg(t,e){const n=Object.keys(t),i=Object.keys(e);if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!fg(t[r],e[r]))return!1;return!0}function fg(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length==e.length&&t.every(t=>e.indexOf(t)>-1):t===e}function gg(t){return Array.prototype.concat.apply([],t)}function mg(t){return t.length>0?t[t.length-1]:null}function yg(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function _g(t){return ka(t)?t:Oa(t)?U(Promise.resolve(t)):Hp(t)}function vg(t,e,n){return n?function(t,e){return pg(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Cg(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>fg(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,i,r){if(n.segments.length>r.length)return!!Cg(n.segments.slice(0,r.length),r)&&!i.hasChildren();if(n.segments.length===r.length){if(!Cg(n.segments,r))return!1;for(const e in i.children){if(!n.children[e])return!1;if(!t(n.children[e],i.children[e]))return!1}return!0}{const t=r.slice(0,n.segments.length),o=r.slice(n.segments.length);return!!Cg(n.segments,t)&&!!n.children.primary&&e(n.children.primary,i,o)}}(e,n,n.segments)}(t.root,e.root)}class bg{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=og(this.queryParams)),this._queryParamMap}toString(){return kg.serialize(this)}}class xg{constructor(t,e){this.segments=t,this.children=e,this.parent=null,yg(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Eg(this)}}class wg{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=og(this.parameters)),this._parameterMap}toString(){return Rg(this)}}function Cg(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function Pg(t,e){let n=[];return yg(t.children,(t,i)=>{"primary"===i&&(n=n.concat(e(t,i)))}),yg(t.children,(t,i)=>{"primary"!==i&&(n=n.concat(e(t,i)))}),n}class Mg{}class Og{parse(t){const e=new Bg(t);return new bg(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`${`/${function t(e,n){if(!e.hasChildren())return Eg(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",i=[];return yg(e.children,(e,n)=>{"primary"!==n&&i.push(`${n}:${t(e,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}{const n=Pg(e,(n,i)=>"primary"===i?[t(e.children.primary,!1)]:[`${i}:${t(n,!1)}`]);return`${Eg(e)}/(${n.join("//")})`}}(t.root,!0)}`}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Tg(e)}=${Tg(t)}`).join("&"):`${Tg(e)}=${Tg(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const kg=new Og;function Eg(t){return t.segments.map(t=>Rg(t)).join("/")}function Sg(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Tg(t){return Sg(t).replace(/%3B/gi,";")}function Ag(t){return Sg(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ig(t){return decodeURIComponent(t)}function Dg(t){return Ig(t.replace(/\+/g,"%20"))}function Rg(t){return`${Ag(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Ag(t)}=${Ag(e[t])}`).join("")}`;var e}const Fg=/^[^\/()?;=#]+/;function Lg(t){const e=t.match(Fg);return e?e[0]:""}const zg=/^[^=?&#]+/,Ng=/^[^?&#]+/;class Bg{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xg([],{}):new xg([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new xg(t,e)),n}parseSegment(){const t=Lg(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new wg(Ig(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Lg(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Lg(this.remaining);t&&(n=t,this.capture(n))}t[Ig(e)]=Ig(n)}parseQueryParam(t){const e=function(t){const e=t.match(zg);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Ng);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const i=Dg(e),r=Dg(n);if(t.hasOwnProperty(i)){let e=t[i];Array.isArray(e)||(e=[e],t[i]=e),e.push(r)}else t[i]=r}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Lg(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let r=void 0;n.indexOf(":")>-1?(r=n.substr(0,n.indexOf(":")),this.capture(r),this.capture(":")):t&&(r="primary");const o=this.parseChildren();e[r]=1===Object.keys(o).length?o.primary:new xg([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Vg{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Ug(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Ug(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=jg(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return jg(t,this._root).map(t=>t.value)}}function Ug(t,e){if(t===e.value)return e;for(const n of e.children){const e=Ug(t,n);if(e)return e}return null}function jg(t,e){if(t===e.value)return[e];for(const n of e.children){const i=jg(t,n);if(i.length)return i.unshift(e),i}return[]}class qg{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Gg(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Hg extends Vg{constructor(t,e){super(t),this.snapshot=e,Yg(this,t)}toString(){return this.snapshot.toString()}}function Zg(t,e){const n=function(t,e){const n=new Xg([],{},{},"",{},"primary",e,null,t.root,-1,{});return new $g("",new qg(n,[]))}(t,e),i=new Zp([new wg("",{})]),r=new Zp({}),o=new Zp({}),a=new Zp({}),s=new Zp(""),u=new Wg(i,r,a,s,o,"primary",e,n.root);return u.snapshot=n.root,new Hg(new qg(u,[]),n)}class Wg{constructor(t,e,n,i,r,o,a,s){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=o,this.component=a,this._futureSnapshot=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(z(t=>og(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(z(t=>og(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Kg(t,e="emptyOnly"){const n=t.pathFromRoot;let i=0;if("always"!==e)for(i=n.length-1;i>=1;){const t=n[i],e=n[i-1];if(t.routeConfig&&""===t.routeConfig.path)i--;else{if(e.component)break;i--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(i))}class Xg{constructor(t,e,n,i,r,o,a,s,u,l,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=o,this.component=a,this.routeConfig=s,this._urlSegment=u,this._lastPathIndex=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=og(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=og(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $g extends Vg{constructor(t,e){super(e),this.url=t,Yg(this,e)}toString(){return Qg(this._root)}}function Yg(t,e){e.value._routerState=t,e.children.forEach(e=>Yg(t,e))}function Qg(t){const e=t.children.length>0?` { ${t.children.map(Qg).join(", ")} } `:"";return`${t.value}${e}`}function Jg(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,pg(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),pg(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!pg(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),pg(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function tm(t,e){var n,i;return pg(t.params,e.params)&&Cg(n=t.url,i=e.url)&&n.every((t,e)=>pg(t.parameters,i[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||tm(t.parent,e.parent))}function em(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function nm(t,e,n,i,r){let o={};return i&&yg(i,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new bg(n.root===t?e:function t(e,n,i){const r={};return yg(e.children,(e,o)=>{r[o]=e===n?i:t(e,n,i)}),new xg(e.segments,r)}(n.root,t,e),o,r)}class im{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&em(n[0]))throw new Error("Root segment cannot have matrix parameters");const i=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(i&&i!==mg(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class rm{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function om(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:`${t}`}function am(t,e,n){if(t||(t=new xg([],{})),0===t.segments.length&&t.hasChildren())return sm(t,e,n);const i=function(t,e,n){let i=0,r=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;const e=t.segments[r],a=om(n[i]),s=i<n.length-1?n[i+1]:null;if(r>0&&void 0===a)break;if(a&&s&&"object"==typeof s&&void 0===s.outlets){if(!hm(a,s,e))return o;i+=2}else{if(!hm(a,{},e))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const e=new xg(t.segments.slice(0,i.pathIndex),{});return e.children.primary=new xg(t.segments.slice(i.pathIndex),t.children),sm(e,0,r)}return i.match&&0===r.length?new xg(t.segments,{}):i.match&&!t.hasChildren()?um(t,e,n):i.match?sm(t,0,r):um(t,e,n)}function sm(t,e,n){if(0===n.length)return new xg(t.segments,{});{const i=function(t){return"object"!=typeof t[0]||void 0===t[0].outlets?{primary:t}:t[0].outlets}(n),r={};return yg(i,(n,i)=>{null!==n&&(r[i]=am(t.children[i],e,n))}),yg(t.children,(t,e)=>{void 0===i[e]&&(r[e]=t)}),new xg(t.segments,r)}}function um(t,e,n){const i=t.segments.slice(0,e);let r=0;for(;r<n.length;){if("object"==typeof n[r]&&void 0!==n[r].outlets){const t=lm(n[r].outlets);return new xg(i,t)}if(0===r&&em(n[0])){i.push(new wg(t.segments[e].path,n[0])),r++;continue}const o=om(n[r]),a=r<n.length-1?n[r+1]:null;o&&a&&em(a)?(i.push(new wg(o,cm(a))),r+=2):(i.push(new wg(o,{})),r++)}return new xg(i,{})}function lm(t){const e={};return yg(t,(t,n)=>{null!==t&&(e[n]=um(new xg([],{}),0,t))}),e}function cm(t){const e={};return yg(t,(t,n)=>e[n]=`${t}`),e}function hm(t,e,n){return t==n.path&&pg(e,n.parameters)}class dm{constructor(t,e,n,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=i}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Jg(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const i=Gg(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,i[e],n),delete i[e]}),yg(i,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const i=t.value,r=e?e.value:null;if(i===r)if(i.component){const r=n.getContext(i.outlet);r&&this.deactivateChildRoutes(t,e,r.children)}else this.deactivateChildRoutes(t,e,n);else r&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:i})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const i=Gg(t),r=t.value.component?n.children:e;yg(i,(t,e)=>this.deactivateRouteAndItsChildren(t,r)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const i=Gg(e);t.children.forEach(t=>{this.activateRoutes(t,i[t.value.outlet],n),this.forwardEvent(new eg(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Jf(t.value.snapshot))}activateRoutes(t,e,n){const i=t.value,r=e?e.value:null;if(Jg(i),i===r)if(i.component){const r=n.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,r.children)}else this.activateChildRoutes(t,e,n);else if(i.component){const e=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const t=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),pm(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),r=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=i,e.resolver=r,e.outlet&&e.outlet.activateWith(i,r),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function pm(t){Jg(t.value),t.children.forEach(pm)}function fm(t){return"function"==typeof t}function gm(t){return t instanceof bg}class mm{constructor(t){this.segmentGroup=t||null}}class ym{constructor(t){this.urlTree=t}}function _m(t){return new b(e=>e.error(new mm(t)))}function vm(t){return new b(e=>e.error(new ym(t)))}function bm(t){return new b(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class xm{constructor(t,e,n,i,r){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=r,this.allowRedirects=!0,this.ngModule=t.get(ne)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(z(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(yf(t=>{if(t instanceof ym)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof mm)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(z(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(yf(t=>{if(t instanceof mm)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const i=t.segments.length>0?new xg([],{primary:t}):t;return new bg(i,e,n)}expandSegmentGroup(t,e,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(z(t=>new xg([],t))):this.expandSegment(t,n,e,n.segments,i,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Hp({});const n=[],i=[],r={};return yg(t,(t,o)=>{const a=e(o,t).pipe(z(t=>r[o]=t));"primary"===o?n.push(a):i.push(a)}),Hp.apply(null,n.concat(i)).pipe(tf(),mf(),z(()=>r))}(n.children,(n,i)=>this.expandSegmentGroup(t,e,i,n))}expandSegment(t,e,n,i,r,o){return Hp(...n).pipe(z(a=>this.expandSegmentAgainstRoute(t,e,n,a,i,r,o).pipe(yf(t=>{if(t instanceof mm)return Hp(null);throw t}))),tf(),Cf(t=>!!t),yf((t,n)=>{if(t instanceof Wp||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,i,r))return Hp(new xg([],{}));throw new mm(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,i,r,o,a){return Mm(i)!==o?_m(e):void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,r):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o):_m(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,i){const r=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?vm(r):this.lineralizeSegments(n,r).pipe(j(n=>{const r=new xg(n,{});return this.expandSegment(t,r,e,n,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o){const{matched:a,consumedSegments:s,lastChild:u,positionalParamSegments:l}=wm(e,i,r);if(!a)return _m(e);const c=this.applyRedirectCommands(s,i.redirectTo,l);return i.redirectTo.startsWith("/")?vm(c):this.lineralizeSegments(i,c).pipe(j(i=>this.expandSegment(t,e,n,i.concat(r.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,i){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(z(t=>(n._loadedConfig=t,new xg(i,{})))):Hp(new xg(i,{}));const{matched:r,consumedSegments:o,lastChild:a}=wm(e,n,i);if(!r)return _m(e);const s=i.slice(a);return this.getChildConfig(t,n,i).pipe(j(t=>{const n=t.module,i=t.routes,{segmentGroup:r,slicedSegments:a}=function(t,e,n,i){return n.length>0&&function(t,e,n){return n.some(n=>Pm(t,e,n)&&"primary"!==Mm(n))}(t,n,i)?{segmentGroup:Cm(new xg(e,function(t,e){const n={};n.primary=e;for(const i of t)""===i.path&&"primary"!==Mm(i)&&(n[Mm(i)]=new xg([],{}));return n}(i,new xg(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>Pm(t,e,n))}(t,n,i)?{segmentGroup:Cm(new xg(t.segments,function(t,e,n,i){const r={};for(const o of n)Pm(t,e,o)&&!i[Mm(o)]&&(r[Mm(o)]=new xg([],{}));return Object.assign(Object.assign({},i),r)}(t,n,i,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,s,i);return 0===a.length&&r.hasChildren()?this.expandChildren(n,i,r).pipe(z(t=>new xg(o,t))):0===i.length&&0===a.length?Hp(new xg(o,{})):this.expandSegment(n,r,i,a,"primary",!0).pipe(z(t=>new xg(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Hp(new ug(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Hp(e._loadedConfig):function(t,e,n){const i=e.canLoad;return i&&0!==i.length?U(i).pipe(z(i=>{const r=t.get(i);let o;if(function(t){return t&&fm(t.canLoad)}(r))o=r.canLoad(e,n);else{if(!fm(r))throw new Error("Invalid CanLoad guard");o=r(e,n)}return _g(o)})).pipe(tf(),(r=t=>!0===t,t=>t.lift(new Pf(r,void 0,t)))):Hp(!0);var r}(t.injector,e,n).pipe(j(n=>n?this.configLoader.load(t.injector,e).pipe(z(t=>(e._loadedConfig=t,t))):function(t){return new b(e=>e.error(ag(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Hp(new ug([],t))}lineralizeSegments(t,e){let n=[],i=e.root;for(;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return Hp(n);if(i.numberOfChildren>1||!i.children.primary)return bm(t.redirectTo);i=i.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,i){const r=this.createSegmentGroup(t,e.root,n,i);return new bg(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return yg(t,(t,i)=>{if("string"==typeof t&&t.startsWith(":")){const r=t.substring(1);n[i]=e[r]}else n[i]=t}),n}createSegmentGroup(t,e,n,i){const r=this.createSegments(t,e.segments,n,i);let o={};return yg(e.children,(e,r)=>{o[r]=this.createSegmentGroup(t,e,n,i)}),new xg(r,o)}createSegments(t,e,n,i){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,i):this.findOrReturn(e,n))}findPosParam(t,e,n){const i=n[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let n=0;for(const i of e){if(i.path===t.path)return e.splice(n),i;n++}return t}}function wm(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const i=(e.matcher||sg)(n,t,e);return i?{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,positionalParamSegments:i.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Cm(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new xg(t.segments.concat(e.segments),e.children)}return t}function Pm(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Mm(t){return t.outlet||"primary"}class Om{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class km{constructor(t,e){this.component=t,this.route=e}}function Em(t,e,n){const i=t._root;return function t(e,n,i,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const a=Gg(n);return e.children.forEach(e=>{!function(e,n,i,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const a=e.value,s=n?n.value:null,u=i?i.getContext(e.value.outlet):null;if(s&&a.routeConfig===s.routeConfig){const l=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Cg(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Cg(t.url,e.url)||!pg(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tm(t,e)||!pg(t.queryParams,e.queryParams);case"paramsChange":default:return!tm(t,e)}}(s,a,a.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new Om(r)):(a.data=s.data,a._resolvedData=s._resolvedData),t(e,n,a.component?u?u.children:null:i,r,o),l&&o.canDeactivateChecks.push(new km(u&&u.outlet&&u.outlet.component||null,s))}else s&&Tm(n,u,o),o.canActivateChecks.push(new Om(r)),t(e,null,a.component?u?u.children:null:i,r,o)}(e,a[e.value.outlet],i,r.concat([e.value]),o),delete a[e.value.outlet]}),yg(a,(t,e)=>Tm(t,i.getContext(e),o)),o}(i,e?e._root:null,n,[i.value])}function Sm(t,e,n){const i=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:n).get(t)}function Tm(t,e,n){const i=Gg(t),r=t.value;yg(i,(t,i)=>{Tm(t,r.component?e?e.children.getContext(i):null:e,n)}),n.canDeactivateChecks.push(new km(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}const Am=Symbol("INITIAL_VALUE");function Im(){return Of(t=>function(...t){let e=null,n=null;return k(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&u(t[0])&&(t=t[0]),W(t,n).lift(new Xp(e))}(...t.map(t=>t.pipe(bf(1),Tf(Am)))).pipe(Af((t,e)=>{let n=!1;return e.reduce((t,i,r)=>{if(t!==Am)return t;if(i===Am&&(n=!0),!n){if(!1===i)return i;if(r===e.length-1||gm(i))return i}return t},t)},Am),ef(t=>t!==Am),z(t=>gm(t)?t:!0===t),bf(1)))}function Dm(t,e){return null!==t&&e&&e(new tg(t)),Hp(!0)}function Rm(t,e){return null!==t&&e&&e(new Qf(t)),Hp(!0)}function Fm(t,e,n){const i=e.routeConfig?e.routeConfig.canActivate:null;return i&&0!==i.length?Hp(i.map(i=>Jp(()=>{const r=Sm(i,e,n);let o;if(function(t){return t&&fm(t.canActivate)}(r))o=_g(r.canActivate(e,t));else{if(!fm(r))throw new Error("Invalid CanActivate guard");o=_g(r(e,t))}return o.pipe(Cf())}))).pipe(Im()):Hp(!0)}function Lm(t,e,n){const i=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Jp(()=>Hp(e.guards.map(r=>{const o=Sm(r,e.node,n);let a;if(function(t){return t&&fm(t.canActivateChild)}(o))a=_g(o.canActivateChild(i,t));else{if(!fm(o))throw new Error("Invalid CanActivateChild guard");a=_g(o(i,t))}return a.pipe(Cf())})).pipe(Im())));return Hp(r).pipe(Im())}class zm{}class Nm{constructor(t,e,n,i,r,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=i,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=o}recognize(){try{const t=Um(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new Xg([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),i=new qg(n,e),r=new $g(this.url,i);return this.inheritParamsAndData(r._root),Hp(r)}catch(t){return new b(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=Kg(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=Pg(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),i=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${i}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,i){for(const o of t)try{return this.processSegmentAgainstRoute(o,e,n,i)}catch(r){if(!(r instanceof zm))throw r}if(this.noLeftoversInUrl(e,n,i))return[];throw new zm}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,i){if(t.redirectTo)throw new zm;if((t.outlet||"primary")!==i)throw new zm;let r,o=[],a=[];if("**"===t.path){const o=n.length>0?mg(n).parameters:{};r=new Xg(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Gm(t),i,t.component,t,Bm(e),Vm(e)+n.length,Hm(t))}else{const s=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new zm;return{consumedSegments:[],lastChild:0,parameters:{}}}const i=(e.matcher||sg)(n,t,e);if(!i)throw new zm;const r={};yg(i.posParams,(t,e)=>{r[e]=t.path});const o=i.consumed.length>0?Object.assign(Object.assign({},r),i.consumed[i.consumed.length-1].parameters):r;return{consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o}}(e,t,n);o=s.consumedSegments,a=n.slice(s.lastChild),r=new Xg(o,s.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Gm(t),i,t.component,t,Bm(e),Vm(e)+o.length,Hm(t))}const s=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:l}=Um(e,o,a,s,this.relativeLinkResolution);if(0===l.length&&u.hasChildren()){const t=this.processChildren(s,u);return[new qg(r,t)]}if(0===s.length&&0===l.length)return[new qg(r,[])];const c=this.processSegment(s,u,l,"primary");return[new qg(r,c)]}}function Bm(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Vm(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Um(t,e,n,i,r){if(n.length>0&&function(t,e,n){return n.some(n=>jm(t,e,n)&&"primary"!==qm(n))}(t,n,i)){const r=new xg(e,function(t,e,n,i){const r={};r.primary=i,i._sourceSegment=t,i._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&"primary"!==qm(o)){const n=new xg([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,r[qm(o)]=n}return r}(t,e,i,new xg(n,t.children)));return r._sourceSegment=t,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>jm(t,e,n))}(t,n,i)){const o=new xg(t.segments,function(t,e,n,i,r,o){const a={};for(const s of i)if(jm(t,n,s)&&!r[qm(s)]){const n=new xg([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,a[qm(s)]=n}return Object.assign(Object.assign({},r),a)}(t,e,n,i,t.children,r));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new xg(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function jm(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function qm(t){return t.outlet||"primary"}function Gm(t){return t.data||{}}function Hm(t){return t.resolve||{}}function Zm(t,e,n,i){const r=Sm(t,e,i);return _g(r.resolve?r.resolve(e,n):r(e,n))}function Wm(t){return function(e){return e.pipe(Of(e=>{const n=t(e);return n?U(n).pipe(z(()=>e)):U([e])}))}}class Km{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}const Xm=new Ut("ROUTES");class $m{constructor(t,e,n,i){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=i}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(z(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new ug(gg(i.injector.get(Xm)).map(dg),i)}))}loadModuleFactory(t){return"string"==typeof t?U(this.loader.load(t)):_g(t()).pipe(j(t=>t instanceof ie?Hp(t):U(this.compiler.compileModuleAsync(t))))}}class Ym{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Qm(t){throw t}function Jm(t,e,n){return e.parse("/")}function ty(t,e){return Hp(null)}let ey=(()=>{class t{constructor(t,e,n,i,r,o,a,s){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=s,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new M,this.errorHandler=Qm,this.malformedUriErrorHandler=Jm,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ty,afterPreactivation:ty},this.urlHandlingStrategy=new Ym,this.routeReuseStrategy=new Km,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=r.get(ne),this.console=r.get(_l);const u=r.get(Il);this.isNgZoneEnabled=u instanceof Il,this.resetConfig(s),this.currentUrlTree=new bg(new xg([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new $m(o,a,t=>this.triggerEvent(new $f(t)),t=>this.triggerEvent(new Yf(t))),this.routerState=Zg(this.currentUrlTree,this.rootComponentType),this.transitions=new Zp({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(ef(t=>0!==t.id),z(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Of(t=>{let n=!1,i=!1;return Hp(t).pipe(Ff(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Of(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Hp(t).pipe(Of(t=>{const n=this.transitions.getValue();return e.next(new Uf(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Yp:[t]}),Of(t=>Promise.resolve(t)),(i=this.ngModule.injector,r=this.configLoader,o=this.urlSerializer,a=this.config,function(t){return t.pipe(Of(t=>function(t,e,n,i,r){return new xm(t,e,n,i,r).apply()}(i,r,o,t.extractedUrl,a).pipe(z(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Ff(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,i,r){return function(o){return o.pipe(j(o=>function(t,e,n,i,r="emptyOnly",o="legacy"){return new Nm(t,e,n,i,r,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),i,r).pipe(z(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Ff(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Ff(t=>{const n=new Hf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var i,r,o,a;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:i,source:r,restoredState:o,extras:a}=t,s=new Uf(n,this.serializeUrl(i),r,o);e.next(s);const u=Zg(i,this.rootComponentType).snapshot;return Hp(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:i,extras:Object.assign(Object.assign({},a),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Yp}),Wm(t=>{const{targetSnapshot:e,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:o,replaceUrl:a}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!o,replaceUrl:!!a})}),Ff(t=>{const e=new Zf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),z(t=>Object.assign(Object.assign({},t),{guards:Em(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(j(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=n;return 0===a.length&&0===o.length?Hp(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,i){return U(t).pipe(j(t=>function(t,e,n,i,r){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Hp(o.map(o=>{const a=Sm(o,e,r);let s;if(function(t){return t&&fm(t.canDeactivate)}(a))s=_g(a.canDeactivate(t,e,n,i));else{if(!fm(a))throw new Error("Invalid CanDeactivate guard");s=_g(a(t,e,n,i))}return s.pipe(Cf())})).pipe(Im()):Hp(!0)}(t.component,t.route,n,e,i)),Cf(t=>!0!==t,!0))}(a,i,r,t).pipe(j(n=>n&&"boolean"==typeof n?function(t,e,n,i){return U(e).pipe(Rf(e=>U([Rm(e.route.parent,i),Dm(e.route,i),Lm(t,e.path,n),Fm(t,e.route,n)]).pipe(tf(),Cf(t=>!0!==t,!0))),Cf(t=>!0!==t,!0))}(i,o,t,e):Hp(n)),z(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Ff(t=>{if(gm(t.guardsResult)){const e=ag(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Ff(t=>{const e=new Wf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),ef(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new qf(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Wm(t=>{if(t.guards.canActivateChecks.length)return Hp(t).pipe(Ff(t=>{const e=new Kf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(e=this.paramsInheritanceStrategy,n=this.ngModule.injector,function(t){return t.pipe(j(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;return r.length?U(r).pipe(Rf(t=>function(t,e,n,i){return function(t,e,n,i){const r=Object.keys(t);if(0===r.length)return Hp({});if(1===r.length){const o=r[0];return Zm(t[o],e,n,i).pipe(z(t=>({[o]:t})))}const o={};return U(r).pipe(j(r=>Zm(t[r],e,n,i).pipe(z(t=>(o[r]=t,t))))).pipe(mf(),z(()=>o))}(t._resolve,t,e,i).pipe(z(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Kg(t,n).resolve),null)))}(t.route,i,e,n)),function(t,e){return arguments.length>=2?function(n){return _(Af(t,e),af(1),pf(e))(n)}:function(e){return _(Af((e,n,i)=>t(e,n,i+1)),af(1))(e)}}((t,e)=>t),z(e=>t)):Hp(t)}))}),Ff(t=>{const e=new Xf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}));var e,n}),Wm(t=>{const{targetSnapshot:e,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:o,replaceUrl:a}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!o,replaceUrl:!!a})}),z(t=>{const e=function(t,e,n){const i=function t(e,n,i){if(i&&e.shouldReuseRoute(n.value,i.value.snapshot)){const r=i.value;r._futureSnapshot=n.value;const o=function(e,n,i){return n.children.map(n=>{for(const r of i.children)if(e.shouldReuseRoute(r.value.snapshot,n.value))return t(e,n,r);return t(e,n)})}(e,n,i);return new qg(r,o)}{const i=e.retrieve(n.value);if(i){const t=i.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let i=0;i<e.children.length;++i)t(e.children[i],n.children[i])}(n,t),t}{const i=new Wg(new Zp((r=n.value).url),new Zp(r.params),new Zp(r.queryParams),new Zp(r.fragment),new Zp(r.data),r.outlet,r.component,r),o=n.children.map(n=>t(e,n));return new qg(i,o)}}var r}(t,e._root,n?n._root:void 0);return new Hg(i,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Ff(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,a=this.routeReuseStrategy,s=t=>this.triggerEvent(t),z(t=>(new dm(a,t.targetRouterState,t.currentRouterState,s).activate(o),t))),Ff({next(){n=!0},complete(){n=!0}}),(r=()=>{if(!n&&!i){this.resetUrlToCurrentUrlTree();const n=new qf(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Nf(r))),yf(n=>{if(i=!0,(r=n)&&r.ngNavigationCancelingError){const i=gm(n.url);i||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const r=new qf(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(r),i?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const i=new Gf(t.id,this.serializeUrl(t.extractedUrl),n);e.next(i);try{t.resolve(this.errorHandler(n))}catch(o){t.reject(o)}}var r;return Yp}));var r,o,a,s}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",i=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,i,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){lg(t),this.config=t.map(dg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:r,preserveQueryParams:o,queryParamsHandling:a,preserveFragment:s}=e;ri()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const u=n||this.routerState.root,l=s?this.currentUrlTree.fragment:r;let c=null;if(a)switch(a){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=i||null}else c=o?this.currentUrlTree.queryParams:i||null;return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,i,r){if(0===n.length)return nm(e.root,e.root,e,i,r);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new im(!0,0,t);let e=0,n=!1;const i=t.reduce((t,i,r)=>{if("object"==typeof i&&null!=i){if(i.outlets){const e={};return yg(i.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(i.segmentPath)return[...t,i.segmentPath]}return"string"!=typeof i?[...t,i]:0===r?(i.split("/").forEach((i,r)=>{0==r&&"."===i||(0==r&&""===i?n=!0:".."===i?e++:""!=i&&t.push(i))}),t):[...t,i]},[]);return new im(n,e,i)}(n);if(o.toRoot())return nm(e.root,new xg([],{}),e,i,r);const a=function(t,e,n){if(t.isAbsolute)return new rm(e.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new rm(n.snapshot._urlSegment,!0,0);const i=em(t.commands[0])?0:1;return function(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new rm(i,!1,r-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(o,e,t),s=a.processChildren?sm(a.segmentGroup,a.index,o.commands):am(a.segmentGroup,a.index,o.commands);return nm(a.segmentGroup,s,e,i,r)}(u,this.currentUrlTree,t,c,l)}navigateByUrl(t,e={skipLocationChange:!1}){ri()&&this.isNgZoneEnabled&&!Il.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=gm(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(gm(t))return vg(this.currentUrlTree,t,e);const n=this.parseUrl(t);return vg(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return null!=i&&(e[n]=i),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new jf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,i,r){const o=this.getTransition();if(o&&"imperative"!==e&&"imperative"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"hashchange"==e&&"popstate"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"popstate"==e&&"hashchange"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);let a,s,u;r?(a=r.resolve,s=r.reject,u=r.promise):u=new Promise((t,e)=>{a=t,s=e});const l=++this.navigationId;return this.setTransition({id:l,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:i,resolve:a,reject:s,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,i){const r=this.urlSerializer.serialize(t);i=i||{},this.location.isCurrentPathEqualTo(r)||e?this.location.replaceState(r,"",Object.assign(Object.assign({},i),{navigationId:n})):this.location.go(r,"",Object.assign(Object.assign({},i),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(t){ma()},t.\u0275dir=we({type:t}),t})(),ny=(()=>{class t{constructor(t,e,n,i,r){this.router=t,this.route=e,this.commands=[],null==n&&i.setAttribute(r.nativeElement,"tabindex","0")}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){ri()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}onClick(){const t={skipLocationChange:ry(this.skipLocationChange),replaceUrl:ry(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:ry(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:ry(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(fa(ey),fa(Wg),ga("tabindex"),fa(Us),fa(zs))},t.\u0275dir=we({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&Ea("click",(function(){return e.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"}}),t})(),iy=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.subscription=t.events.subscribe(t=>{t instanceof jf&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){ri()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}ngOnChanges(t){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,i){if(0!==t||e||n||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const r={skipLocationChange:ry(this.skipLocationChange),replaceUrl:ry(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,r),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:ry(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:ry(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(fa(ey),fa(Wg),fa(bc))},t.\u0275dir=we({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&Ea("click",(function(t){return e.onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)})),2&t&&(gs("href",e.href,Ti),ca("target",e.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[Cs]}),t})();function ry(t){return""===t||!!t}let oy=(()=>{class t{constructor(t,e,n,i,r){this.router=t,this.element=e,this.renderer=n,this.link=i,this.linkWithHref=r,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=t.events.subscribe(t=>{t instanceof jf&&this.update()})}ngAfterContentInit(){this.links.changes.subscribe(t=>this.update()),this.linksWithHrefs.changes.subscribe(t=>this.update()),this.update()}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){this.subscription.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(fa(ey),fa(zs),fa(Us),fa(ny,8),fa(iy,8))},t.\u0275dir=we({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){var i;1&t&&(el(n,ny,!0),el(n,iy,!0)),2&t&&(Yu(i=rl())&&(e.links=i),Yu(i=rl())&&(e.linksWithHrefs=i))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[Cs]}),t})();class ay{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new sy,this.attachRef=null}}class sy{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new ay,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let uy=(()=>{class t{constructor(t,e,n,i,r){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=r,this.activated=null,this._activatedRoute=null,this.activateEvents=new Vu,this.deactivateEvents=new Vu,this.name=i||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),i=this.parentContexts.getOrCreateContext(this.name).children,r=new ly(t,i,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(fa(sy),fa(lu),fa(Ls),ga("name"),fa(Ao))},t.\u0275dir=we({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class ly{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Wg?this.route:t===sy?this.childContexts:this.parent.get(t,e)}}class cy{}class hy{preload(t,e){return Hp(null)}}let dy=(()=>{class t{constructor(t,e,n,i,r){this.router=t,this.injector=i,this.preloadingStrategy=r,this.loader=new $m(e,n,e=>t.triggerEvent(new $f(e)),e=>t.triggerEvent(new Yf(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(ef(t=>t instanceof jf),Rf(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(ne);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const i of e)if(i.loadChildren&&!i.canLoad&&i._loadedConfig){const t=i._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else i.loadChildren&&!i.canLoad?n.push(this.preloadConfig(t,i)):i.children&&n.push(this.processRoutes(t,i.children));return U(n).pipe(Z(),z(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(j(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Yt(ey),Yt(tc),Yt(El),Yt(Wo),Yt(cy))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),py=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Uf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof jf&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ng&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new ng(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(t){ma()},t.\u0275dir=we({type:t}),t})();const fy=new Ut("ROUTER_CONFIGURATION"),gy=new Ut("ROUTER_FORROOT_GUARD"),my=[Mc,{provide:Mg,useClass:Og},{provide:ey,useFactory:function(t,e,n,i,r,o,a,s={},u,l){const c=new ey(null,t,e,n,i,r,o,gg(a));if(u&&(c.urlHandlingStrategy=u),l&&(c.routeReuseStrategy=l),s.errorHandler&&(c.errorHandler=s.errorHandler),s.malformedUriErrorHandler&&(c.malformedUriErrorHandler=s.malformedUriErrorHandler),s.enableTracing){const t=lc();c.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return s.onSameUrlNavigation&&(c.onSameUrlNavigation=s.onSameUrlNavigation),s.paramsInheritanceStrategy&&(c.paramsInheritanceStrategy=s.paramsInheritanceStrategy),s.urlUpdateStrategy&&(c.urlUpdateStrategy=s.urlUpdateStrategy),s.relativeLinkResolution&&(c.relativeLinkResolution=s.relativeLinkResolution),c},deps:[Mg,sy,Mc,Wo,tc,El,Xm,fy,[class{},new st],[class{},new st]]},sy,{provide:Wg,useFactory:function(t){return t.routerState.root},deps:[ey]},{provide:tc,useClass:ic},dy,hy,class{preload(t,e){return e().pipe(yf(()=>Hp(null)))}},{provide:fy,useValue:{enableTracing:!1}}];function yy(){return new Wl("Router",ey)}let _y=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[my,wy(e),{provide:gy,useFactory:xy,deps:[[ey,new st,new lt]]},{provide:fy,useValue:n||{}},{provide:bc,useFactory:by,deps:[hc,[new at(wc),new st],fy]},{provide:py,useFactory:vy,deps:[ey,Zc,fy]},{provide:cy,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:hy},{provide:Wl,multi:!0,useFactory:yy},[Cy,{provide:cl,multi:!0,useFactory:Py,deps:[Cy]},{provide:Oy,useFactory:My,deps:[Cy]},{provide:yl,multi:!0,useExisting:Oy}]]}}static forChild(e){return{ngModule:t,providers:[wy(e)]}}}return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)(Yt(gy,8),Yt(ey,8))}}),t})();function vy(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new py(t,e,n)}function by(t,e,n={}){return n.useHash?new Pc(t,e):new Cc(t,e)}function xy(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function wy(t){return[{provide:Ko,multi:!0,useValue:t},{provide:Xm,multi:!0,useValue:t}]}let Cy=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new M}appInitializer(){return this.injector.get(pc,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(ey),i=this.injector.get(fy);if(this.isLegacyDisabled(i)||this.isLegacyEnabled(i))t(!0);else if("disabled"===i.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==i.initialNavigation)throw new Error(`Invalid initialNavigation options: '${i.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Hp(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(fy),n=this.injector.get(dy),i=this.injector.get(py),r=this.injector.get(ey),o=this.injector.get(Ql);t===o.components[0]&&(this.isLegacyEnabled(e)?r.initialNavigation():this.isLegacyDisabled(e)&&r.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),r.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(Yt(Wo))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function Py(t){return t.appInitializer.bind(t)}function My(t){return t.bootstrapListener.bind(t)}const Oy=new Ut("Router Initializer"),ky=[];let Ey=(()=>{class t{}return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},imports:[[_y.forRoot(ky)],_y]}),t})();var Sy=n("ED5Z"),Ty=n.n(Sy),Ay=n("4ZJM");class Iy{}class Dy{}class Ry{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),i=n.toLowerCase(),r=t.slice(e+1).trim();this.maybeSetNormalizedName(n,i),this.headers.has(i)?this.headers.get(i).push(r):this.headers.set(i,[r])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const i=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(i,n),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Ry?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Ry;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Ry?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...n),this.headers.set(e,i);break;case"d":const r=t.value;if(r){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===r.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Fy{encodeKey(t){return Ly(t)}encodeValue(t){return Ly(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Ly(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class zy{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Fy,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const i=t.indexOf("="),[r,o]=-1==i?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,i)),e.decodeValue(t.slice(i+1))],a=n.get(r)||[];a.push(o),n.set(r,a)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new zy({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function Ny(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function By(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Vy(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Uy{constructor(t,e,n,i){let r;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,r=i):r=n,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.params&&(this.params=r.params)),this.headers||(this.headers=new Ry),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new zy,this.urlWithParams=e}serializeBody(){return null===this.body?null:Ny(this.body)||By(this.body)||Vy(this.body)||"string"==typeof this.body?this.body:this.body instanceof zy?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Vy(this.body)?null:By(this.body)?this.body.type||null:Ny(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof zy?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,i=t.responseType||this.responseType,r=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let s=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(s=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),s)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new Uy(e,n,r,{params:u,headers:s,reportProgress:a,responseType:i,withCredentials:o})}}const jy=function(){var t={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return t[t.Sent]="Sent",t[t.UploadProgress]="UploadProgress",t[t.ResponseHeader]="ResponseHeader",t[t.DownloadProgress]="DownloadProgress",t[t.Response]="Response",t[t.User]="User",t}();class qy{constructor(t,e=200,n="OK"){this.headers=t.headers||new Ry,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Gy extends qy{constructor(t={}){super(t),this.type=jy.ResponseHeader}clone(t={}){return new Gy({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Hy extends qy{constructor(t={}){super(t),this.type=jy.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Hy({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Zy extends qy{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Wy(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Ky=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let i;if(t instanceof Uy)i=t;else{let r=void 0;r=n.headers instanceof Ry?n.headers:new Ry(n.headers);let o=void 0;n.params&&(o=n.params instanceof zy?n.params:new zy({fromObject:n.params})),i=new Uy(t,e,void 0!==n.body?n.body:null,{headers:r,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const r=Hp(i).pipe(Rf(t=>this.handler.handle(t)));if(t instanceof Uy||"events"===n.observe)return r;const o=r.pipe(ef(t=>t instanceof Hy));switch(n.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return o.pipe(z(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(z(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(z(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(z(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new zy).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Wy(n,e))}post(t,e,n={}){return this.request("POST",t,Wy(n,e))}put(t,e,n={}){return this.request("PUT",t,Wy(n,e))}}return t.\u0275fac=function(e){return new(e||t)(Yt(Iy))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class Xy{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const $y=new Ut("HTTP_INTERCEPTORS");let Yy=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const Qy=/^\)\]\}',?\n/;class Jy{}let t_=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),e_=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new b(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const i=t.serializeBody();let r=null;const o=()=>{if(null!==r)return r;const e=1223===n.status?204:n.status,i=n.statusText||"OK",o=new Ry(n.getAllResponseHeaders()),a=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return r=new Gy({headers:o,status:e,statusText:i,url:a}),r},a=()=>{let{headers:i,status:r,statusText:a,url:s}=o(),u=null;204!==r&&(u=void 0===n.response?n.responseText:n.response),0===r&&(r=u?200:0);let l=r>=200&&r<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(Qy,"");try{u=""!==u?JSON.parse(u):null}catch(c){u=t,l&&(l=!1,u={error:c,text:u})}}l?(e.next(new Hy({body:u,headers:i,status:r,statusText:a,url:s||void 0})),e.complete()):e.error(new Zy({error:u,headers:i,status:r,statusText:a,url:s||void 0}))},s=t=>{const{url:i}=o(),r=new Zy({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:i||void 0});e.error(r)};let u=!1;const l=i=>{u||(e.next(o()),u=!0);let r={type:jy.DownloadProgress,loaded:i.loaded};i.lengthComputable&&(r.total=i.total),"text"===t.responseType&&n.responseText&&(r.partialText=n.responseText),e.next(r)},c=t=>{let n={type:jy.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",a),n.addEventListener("error",s),t.reportProgress&&(n.addEventListener("progress",l),null!==i&&n.upload&&n.upload.addEventListener("progress",c)),n.send(i),e.next({type:jy.Sent}),()=>{n.removeEventListener("error",s),n.removeEventListener("load",a),t.reportProgress&&(n.removeEventListener("progress",l),null!==i&&n.upload&&n.upload.removeEventListener("progress",c)),n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(Yt(Jy))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const n_=new Ut("XSRF_COOKIE_NAME"),i_=new Ut("XSRF_HEADER_NAME");class r_{}let o_=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ac(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(Yt(cc),Yt(ml),Yt(n_))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),a_=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const i=this.tokenService.getToken();return null===i||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,i)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(Yt(r_),Yt(i_))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),s_=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get($y,[]);this.chain=t.reduceRight((t,e)=>new Xy(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(Yt(Dy),Yt(Wo))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),u_=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:a_,useClass:Yy}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:n_,useValue:e.cookieName}:[],e.headerName?{provide:i_,useValue:e.headerName}:[]]}}}return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},providers:[a_,{provide:$y,useExisting:a_,multi:!0},{provide:r_,useClass:o_},{provide:n_,useValue:"XSRF-TOKEN"},{provide:i_,useValue:"X-XSRF-TOKEN"}]}),t})(),l_=(()=>{class t{}return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},providers:[Ky,{provide:Iy,useClass:s_},e_,{provide:Dy,useExisting:e_},t_,{provide:Jy,useExisting:t_}],imports:[[u_.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})(),c_=(()=>{class t{constructor(t){this.http=t,this.API_BASE_URL="https://nzlur.carto.com:443/api/v2/sql?q="}getZoning(t,e,n){return this.http.get(`${this.API_BASE_URL}${`select ${t} from public.zoning_2 where blocklot = '${e}-${n}'`}`)}}return t.\u0275fac=function(e){return new(e||t)(Yt(Ky))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),h_=(()=>{class t{getId(){return this.id}setId(t){this.id=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function d_(){return function(){throw new Error("Unimplemented abstract method.")}()}var p_=0;function f_(t){return t.ol_uid||(t.ol_uid=String(++p_))}var g_,m_=(g_=function(t,e){return(g_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}g_(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),y_=function(t){function e(e){var n=this,i="Assertion failed. See https://openlayers.org/en/v"+"6.2.1".split("-")[0]+"/doc/errors/#"+e+" for details.";return(n=t.call(this,i)||this).code=e,n.name="AssertionError",n.message=i,n}return m_(e,t),e}(Error),__="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),i=1,r=arguments.length;i<r;++i){var o=arguments[i];if(null!=o)for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])}return n};function v_(t){for(var e in t)delete t[e]}var b_="function"==typeof Object.values?Object.values:function(t){var e=[];for(var n in t)e.push(t[n]);return e};function x_(t,e,n,i,r){if(i&&i!==t&&(n=n.bind(i)),r){var o=n;n=function(){t.removeEventListener(e,n),o.apply(this,arguments)}}var a={target:t,type:e,listener:n};return t.addEventListener(e,n),a}function w_(t,e,n,i){return x_(t,e,n,i,!0)}function C_(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),v_(t))}var P_=function(){function t(){this.disposed_=!1}return t.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function M_(t,e){return t>e?1:t<e?-1:0}function O_(t,e,n){var i=t.length;if(t[0]<=e)return 0;if(e<=t[i-1])return i-1;var r=void 0;if(n>0){for(r=1;r<i;++r)if(t[r]<e)return r-1}else if(n<0){for(r=1;r<i;++r)if(t[r]<=e)return r}else for(r=1;r<i;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return i-1}function k_(t,e){var n=t.length;if(n!==e.length)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function E_(){return!0}function S_(){return!1}function T_(){}var A_=function(){function t(t){this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),I_=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),D_=function(t){function e(e){var n=t.call(this)||this;return n.eventTarget_=e,n.pendingRemovals_={},n.dispatching_={},n.listeners_={},n}return I_(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var n=this.listeners_[t];n||(this.listeners_[t]=n=[]),-1===n.indexOf(e)&&n.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new A_(t):t,n=e.type;e.target||(e.target=this.eventTarget_||this);var i,r=this.listeners_[n];if(r){n in this.dispatching_||(this.dispatching_[n]=0,this.pendingRemovals_[n]=0),++this.dispatching_[n];for(var o=0,a=r.length;o<a;++o)if(!1===r[o].call(this,e)||e.propagationStopped){i=!1;break}if(--this.dispatching_[n],0===this.dispatching_[n]){var s=this.pendingRemovals_[n];for(delete this.pendingRemovals_[n];s--;)this.removeEventListener(n,T_);delete this.dispatching_[n]}return i}},e.prototype.disposeInternal=function(){v_(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var n=this.listeners_[t];if(n){var i=n.indexOf(e);-1!==i&&(t in this.pendingRemovals_?(n[i]=T_,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t]))}},e}(P_),R_=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),F_=function(t){function e(){var e=t.call(this)||this;return e.revision_=0,e}return R_(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent("change")},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=x_(this,t[r],e);return i}return x_(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=w_(this,t[r],e);return i}return w_(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var n=0,i=t.length;n<i;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)},e}(D_),L_=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),z_=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.key=n,r.oldValue=i,r}return L_(e,t),e}(A_),N_=function(t){function e(e){var n=t.call(this)||this;return f_(n),n.values_={},void 0!==e&&n.setProperties(e),n}return L_(e,t),e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return __({},this.values_)},e.prototype.notify=function(t,e){var n;n=V_(t),this.dispatchEvent(new z_(n,t,e)),this.dispatchEvent(new z_(n="propertychange",t,e))},e.prototype.set=function(t,e,n){if(n)this.values_[t]=e;else{var i=this.values_[t];this.values_[t]=e,i!==e&&this.notify(t,i)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.unset=function(t,e){if(t in this.values_){var n=this.values_[t];delete this.values_[t],e||this.notify(t,n)}},e}(F_),B_={};function V_(t){return B_.hasOwnProperty(t)?B_[t]:B_[t]="change:"+t}var U_=N_,j_=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),q_=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.element=n,r.index=i,r}return j_(e,t),e}(A_),G_=function(t){function e(e,n){var i=t.call(this)||this;if(i.unique_=!!(n||{}).unique,i.array_=e||[],i.unique_)for(var r=0,o=i.array_.length;r<o;++r)i.assertUnique_(i.array_[r],r);return i.updateLength_(),i}return j_(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,n=t.length;e<n;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,n=0,i=e.length;n<i;++n)t(e[n],n,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get("length")},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new q_("add",e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new q_("remove",e,t)),e},e.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);var i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new q_("remove",i,t)),this.dispatchEvent(new q_("add",e,t))}else{for(var r=n;r<t;++r)this.insertAt(r,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set("length",this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===t&&n!==e)throw new y_(58)},e}(U_),H_=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Z_=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.map=n,r.frameState=void 0!==i?i:null,r}return H_(e,t),e}(A_),W_=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),K_=function(t){function e(e,n,i,r,o){var a=t.call(this,e,n,o)||this;return a.originalEvent=i,a.pixel_=null,a.coordinate_=null,a.dragging=void 0!==r&&r,a}return W_(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(Z_),X_=(n("pg82"),"undefined"!=typeof navigator?navigator.userAgent.toLowerCase():""),$_=-1!==X_.indexOf("firefox"),Y_=(-1!==X_.indexOf("safari")&&X_.indexOf("chrom"),-1!==X_.indexOf("webkit")&&-1==X_.indexOf("edge")),Q_=-1!==X_.indexOf("macintosh"),J_=window.devicePixelRatio||1,tv="undefined"!=typeof Image&&Image.prototype.decode,ev=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(n){}return t}(),nv={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},iv=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),rv=function(t){function e(e,n,i,r,o){var a=t.call(this,e,n,i,r,o)||this;return a.pointerEvent=i,a}return iv(e,t),e}(K_),ov=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),av=function(t){function e(e,n){var i=t.call(this,e)||this;i.map_=e,i.dragging_=!1,i.dragListenerKeys_=[],i.moveTolerance_=n?n*J_:J_,i.down_=null;var r=i.map_.getViewport();return i.activePointers_=0,i.trackedTouches_={},i.element_=r,i.pointerdownListenerKey_=x_(r,"pointerdown",i.handlePointerDown_,i),i.relayedListenerKey_=x_(r,"pointermove",i.relayEvent_,i),i.boundHandleTouchMove_=i.handleTouchMove_.bind(i),i.element_.addEventListener("touchmove",i.boundHandleTouchMove_,!!ev&&{passive:!1}),i}return ov(e,t),e.prototype.emulateClick_=function(t){var e=new rv(nv.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new rv(nv.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((function(){this.clickTimeoutId_=void 0;var e=new rv(nv.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}).bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==nv.POINTERUP||e.type==nv.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==nv.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new rv(nv.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(C_),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new rv(nv.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&this.dragListenerKeys_.push(x_(document,nv.POINTERMOVE,this.handlePointerMove_,this),x_(document,nv.POINTERUP,this.handlePointerUp_,this),x_(this.element_,nv.POINTERCANCEL,this.handlePointerUp_,this))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new rv(nv.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new rv(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){this.originalPointerMoveEvent_.defaultPrevented&&t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(C_(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(C_(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(C_),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(D_);function sv(t,e){if(!t)throw new y_(e)}var uv=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,v_(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var i=this.keyFunction_(n);return delete this.queuedElements_[i],n},t.prototype.enqueue=function(t){sv(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,i=e.length,r=e[t],o=n[t],a=t;t<i>>1;){var s=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),l=u<i&&n[u]<n[s]?u:s;e[t]=e[l],n[t]=n[l],t=l}e[t]=r,n[t]=o,this.siftDown_(a,t)},t.prototype.siftDown_=function(t,e){for(var n=this.elements_,i=this.priorities_,r=n[e],o=i[e];e>t;){var a=this.getParentIndex_(e);if(!(i[a]>o))break;n[e]=n[a],i[e]=i[a],e=a}n[e]=r,i[e]=o},t.prototype.reprioritize=function(){var t,e,n,i=this.priorityFunction_,r=this.elements_,o=this.priorities_,a=0,s=r.length;for(e=0;e<s;++e)(n=i(t=r[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(o[a]=n,r[a++]=t);r.length=a,o.length=a,this.heapify_()},t}(),lv=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),cv=function(t){function e(e,n){var i=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return i.boundHandleTileChange_=i.handleTileChange.bind(i),i.tileChangeCallback_=n,i.tilesLoading_=0,i.tilesLoadingKeys_={},i}return lv(e,t),e.prototype.enqueue=function(e){var n=t.prototype.enqueue.call(this,e);return n&&e[0].addEventListener("change",this.boundHandleTileChange_),n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,n=e.getState();if(e.hifi&&2===n||3===n||4===n){e.removeEventListener("change",this.boundHandleTileChange_);var i=e.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var n,i,r=0;this.tilesLoading_<t&&r<e&&this.getCount()>0;)i=(n=this.dequeue()[0]).getKey(),0!==n.getState()||i in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[i]=!0,++this.tilesLoading_,++r,n.load())},e}(uv);function hv(t,e,n){return Math.min(Math.max(t,e),n)}var dv="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function pv(t,e,n,i,r,o){var a=r-n,s=o-i;if(0!==a||0!==s){var u=((t-n)*a+(e-i)*s)/(a*a+s*s);u>1?(n=r,i=o):u>0&&(n+=a*u,i+=s*u)}return fv(t,e,n,i)}function fv(t,e,n,i){var r=n-t,o=i-e;return r*r+o*o}function gv(t,e){var n=t%e;return n*e<0?n+e:n}function mv(t,e,n){return t+n*(e-t)}function yv(t,e,n){return function(i,r,o,a){if(i){var s=e?0:o[0]*r,u=e?0:o[1]*r,l=t[0]+s/2,c=t[2]-s/2,h=t[1]+u/2,d=t[3]-u/2;l>c&&(c=l=(c+l)/2),h>d&&(d=h=(d+h)/2);var p=hv(i[0],l,c),f=hv(i[1],h,d),g=30*r;return a&&n&&(p+=-g*Math.log(1+Math.max(0,l-i[0])/g)+g*Math.log(1+Math.max(0,i[0]-c)/g),f+=-g*Math.log(1+Math.max(0,h-i[1])/g)+g*Math.log(1+Math.max(0,i[1]-d)/g)),[p,f]}}}function _v(t){return t}function vv(t,e,n){var i,r;return(i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*i+(r=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*r}function bv(t,e){var n=e[0],i=e[1],r=0;return n<t[0]?r|=16:n>t[2]&&(r|=4),i<t[1]?r|=8:i>t[3]&&(r|=2),0===r&&(r=1),r}function xv(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function wv(t){return xv(1/0,1/0,-1/0,-1/0,t)}function Cv(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Pv(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Mv(t,e,n,i,r){for(;n<i;n+=r)Ov(t,e[n],e[n+1]);return t}function Ov(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function kv(t){return[t[0],t[1]]}function Ev(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Sv(t,e,n,i,r){var o=e*i[0]/2,a=e*i[1]/2,s=Math.cos(n),u=Math.sin(n),l=o*s,c=o*u,h=a*s,d=a*u,p=t[0],f=t[1],g=p-l+d,m=p-l-d,y=p+l-d,_=p+l+d,v=f-c-h,b=f-c+h,x=f+c+h,w=f+c-h;return xv(Math.min(g,m,y,_),Math.min(v,b,x,w),Math.max(g,m,y,_),Math.max(v,b,x,w),r)}function Tv(t){return t[3]-t[1]}function Av(t){return[t[2],t[3]]}function Iv(t){return t[2]-t[0]}function Dv(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Rv(t){return t[2]<t[0]||t[3]<t[1]}function Fv(t,e,n,i){var r=Iv(e)/n[0],o=Tv(e)/n[1];return i?Math.min(t,Math.max(r,o)):Math.min(t,Math.min(r,o))}function Lv(t,e,n){var i=Math.min(t,e);return i*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(i=Math.max(i,n),i/=Math.log(1+50*Math.max(0,n/t-1))/50+1),hv(i,n/2,2*e)}function zv(t,e,n,i,r){return function(o,a,s,u){if(void 0!==o){var l=i?Fv(t,i,s,r):t;return(void 0===n||n)&&u?Lv(o,l,e):hv(o,e,l)}}}function Nv(t){return void 0!==t?0:void 0}function Bv(t){return void 0!==t?t:void 0}function Vv(t,e){for(var n=!0,i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function Uv(t,e){var n=Math.cos(e),i=Math.sin(e),r=t[1]*n+t[0]*i;return t[0]=t[0]*n-t[1]*i,t[1]=r,t}function jv(t){return 1-function(t){return Math.pow(t,3)}(1-t)}function qv(t){return 3*t*t-2*t*t*t}function Gv(t){return t}function Hv(t,e,n,i,r,o){for(var a=o||[],s=0,u=e;u<n;u+=i){var l=t[u],c=t[u+1];a[s++]=r[0]*l+r[2]*c+r[4],a[s++]=r[1]*l+r[3]*c+r[5]}return o&&a.length!=s&&(a.length=s),a}var Zv={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Wv={};Wv[Zv.DEGREES]=2*Math.PI*6370997/360,Wv[Zv.FEET]=.3048,Wv[Zv.METERS]=1,Wv[Zv.USFEET]=1200/3937;var Kv=Zv,Xv=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Wv[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}(),$v=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Yv=6378137*Math.PI,Qv=[-Yv,-Yv,Yv,Yv],Jv=[-180,-85,180,85],tb=function(t){function e(e){return t.call(this,{code:e,units:Kv.METERS,extent:Qv,global:!0,worldExtent:Jv,getPointResolution:function(t,e){return t/dv(e[1]/6378137)}})||this}return $v(e,t),e}(Xv),eb=[new tb("EPSG:3857"),new tb("EPSG:102100"),new tb("EPSG:102113"),new tb("EPSG:900913"),new tb("urn:ogc:def:crs:EPSG:6.18:3:3857"),new tb("urn:ogc:def:crs:EPSG::3857"),new tb("http://www.opengis.net/gml/srs/epsg.xml#3857")],nb=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ib=[-180,-90,180,90],rb=6378137*Math.PI/180,ob=function(t){function e(e,n){return t.call(this,{code:e,units:Kv.DEGREES,extent:ib,axisOrientation:n,global:!0,metersPerUnit:rb,worldExtent:ib})||this}return nb(e,t),e}(Xv),ab=[new ob("CRS:84"),new ob("EPSG:4326","neu"),new ob("urn:ogc:def:crs:EPSG::4326","neu"),new ob("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new ob("urn:ogc:def:crs:OGC:1.3:CRS84"),new ob("urn:ogc:def:crs:OGC:2:84"),new ob("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ob("urn:x-ogc:def:crs:EPSG:4326","neu")],sb={};function ub(t,e,n){var i=t.getCode(),r=e.getCode();i in sb||(sb[i]={}),sb[i][r]=n}var lb,cb,hb,db={};function pb(t,e,n){var i;if(void 0!==e){for(var r=0,o=t.length;r<o;++r)e[r]=t[r];i=e}else i=t.slice();return i}function fb(t,e,n){if(void 0!==e&&t!==e){for(var i=0,r=t.length;i<r;++i)e[i]=t[i];t=e}return t}function gb(t){!function(t,e){db[t]=e}(t.getCode(),t),ub(t,t,pb)}function mb(t){return"string"==typeof t?db[t]||null:t||null}function yb(t){!function(t){t.forEach(gb)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&ub(e,t,pb)}))}))}function _b(t,e){return t?"string"==typeof t?mb(t):t:mb(e)}function vb(t,e){return n=mb(t),i=mb(e),r=n.getCode(),o=i.getCode(),r in sb&&o in sb[r]&&(a=sb[r][o]),(s=a)||(s=fb),s;var n,i,r,o,a,s}function bb(t,e){return t}function xb(t,e){return t}function wb(t,e){return t}function Cb(t,e){var n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function Pb(t,e,n,i,r,o,a,s){var u=Math.sin(o),l=Math.cos(o);return t[0]=i*l,t[1]=r*u,t[2]=-i*u,t[3]=r*l,t[4]=a*i*l-s*i*u+e,t[5]=a*r*u+s*r*l+n,t}yb(eb),yb(ab),lb=eb,cb=function(t,e,n){var i=t.length,r=n>1?n:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(i));for(var a=Yv,s=0;s<i;s+=r){o[s]=a*t[s]/180;var u=6378137*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));u>a?u=a:u<-a&&(u=-a),o[s+1]=u}return o},hb=function(t,e,n){var i=t.length,r=n>1?n:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(i));for(var a=0;a<i;a+=r)o[a]=180*t[a]/Yv,o[a+1]=360*Math.atan(Math.exp(t[a+1]/6378137))/Math.PI-90;return o},ab.forEach((function(t){lb.forEach((function(e){ub(t,e,cb),ub(e,t,hb)}))})),new Array(6);var Mb=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ob=[1,0,0,1,0,0],kb=function(t){function e(){var e,n,i,r,o,a=t.call(this)||this;return a.extent_=[1/0,1/0,-1/0,-1/0],a.extentRevision_=-1,a.simplifiedGeometryMaxMinSquaredTolerance=0,a.simplifiedGeometryRevision=0,a.simplifyTransformedInternal=(e=function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);var i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(e)},o=!1,function(){var t=Array.prototype.slice.call(arguments);return o&&this===r&&k_(t,i)||(o=!0,r=this,i=t,n=e.apply(this,arguments)),n}),a}return Mb(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return d_()},e.prototype.closestPointXY=function(t,e,n,i){return d_()},e.prototype.containsXY=function(t,e){var n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e},e.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return d_()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){d_()},e.prototype.scale=function(t,e,n){d_()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return d_()},e.prototype.getType=function(){return d_()},e.prototype.applyTransform=function(t){d_()},e.prototype.intersectsExtent=function(t){return d_()},e.prototype.translate=function(t,e){d_()},e.prototype.transform=function(t,e){var n=mb(t),i=n.getUnits()==Kv.TILE_PIXELS?function(t,i,r){var o=n.getExtent(),a=n.getWorldExtent(),s=Tv(a)/Tv(o);return Pb(Ob,a[0],a[3],s,-s,0,0,0),Hv(t,0,t.length,r,Ob,i),vb(n,e)(t,i,r)}:vb(n,e);return this.applyTransform(i),this},e}(U_),Eb=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Sb(t){var e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}var Tb=function(t){function e(){var e=t.call(this)||this;return e.layout="XY",e.stride=2,e.flatCoordinates=null,e}return Eb(e,t),e.prototype.computeExtent=function(t){return e=this.flatCoordinates,n=this.flatCoordinates.length,i=this.stride,Mv(wv(t),e,0,n,i);var e,n,i},e.prototype.getCoordinates=function(){return d_()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=Sb(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){d_()},e.prototype.setLayout=function(t,e,n){var i;if(t)i=Sb(t);else{for(var r=0;r<n;++r){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}(i=e.length)}this.layout=t,this.stride=i},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var i=this.getStride();!function(t,e,n,i,r,o,a){for(var s=a||[],u=Math.cos(r),l=Math.sin(r),c=o[0],h=o[1],d=0,p=0;p<n;p+=i){var f=t[p]-c,g=t[p+1]-h;s[d++]=c+f*u-g*l,s[d++]=h+f*l+g*u;for(var m=p+2;m<p+i;++m)s[d++]=t[m]}a&&s.length!=d&&(s.length=d)}(n,0,n.length,i,t,e,n),this.changed()}},e.prototype.scale=function(t,e,n){var i=e;void 0===i&&(i=t);var r=n;r||(r=Ev(this.getExtent()));var o=this.getFlatCoordinates();if(o){var a=this.getStride();!function(t,e,n,i,r,o,a,s){for(var u=s||[],l=a[0],c=a[1],h=0,d=0;d<n;d+=i){var p=t[d+1]-c;u[h++]=l+r*(t[d]-l),u[h++]=c+o*p;for(var f=d+2;f<d+i;++f)u[h++]=t[f]}s&&u.length!=h&&(u.length=h)}(o,0,o.length,a,t,i,r,o),this.changed()}},e.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var i=this.getStride();!function(t,e,n,i,r,o,a){for(var s=a||[],u=0,l=0;l<n;l+=i){s[u++]=t[l]+r,s[u++]=t[l+1]+o;for(var c=l+2;c<l+i;++c)s[u++]=t[c]}a&&s.length!=u&&(s.length=u)}(n,0,n.length,i,t,e,n),this.changed()}},e}(kb);function Ab(t,e,n,i){for(var r=0,o=t[n-i],a=t[n-i+1];e<n;e+=i){var s=t[e],u=t[e+1];r+=a*s-o*u,o=s,a=u}return r/2}function Ib(t,e,n,i,r,o,a){var s,u=t[e],l=t[e+1],c=t[n]-u,h=t[n+1]-l;if(0===c&&0===h)s=e;else{var d=((r-u)*c+(o-l)*h)/(c*c+h*h);if(d>1)s=n;else{if(d>0){for(var p=0;p<i;++p)a[p]=mv(t[e+p],t[n+p],d);return void(a.length=i)}s=e}}for(p=0;p<i;++p)a[p]=t[s+p];a.length=i}function Db(t,e,n,i,r){var o=t[e],a=t[e+1];for(e+=i;e<n;e+=i){var s=t[e],u=t[e+1],l=fv(o,a,s,u);l>r&&(r=l),o=s,a=u}return r}function Rb(t,e,n,i,r,o,a,s,u,l,c){if(e==n)return l;var h,d;if(0===r){if((d=fv(a,s,t[e],t[e+1]))<l){for(h=0;h<i;++h)u[h]=t[e+h];return u.length=i,d}return l}for(var p=c||[NaN,NaN],f=e+i;f<n;)if(Ib(t,f-i,f,i,a,s,p),(d=fv(a,s,p[0],p[1]))<l){for(l=d,h=0;h<i;++h)u[h]=p[h];u.length=i,f+=i}else f+=i*Math.max((Math.sqrt(d)-Math.sqrt(l))/r|0,1);if(o&&(Ib(t,n-i,e,i,a,s,p),(d=fv(a,s,p[0],p[1]))<l)){for(l=d,h=0;h<i;++h)u[h]=p[h];u.length=i}return l}function Fb(t,e,n,i){for(var r=0,o=n.length;r<o;++r)for(var a=n[r],s=0;s<i;++s)t[e++]=a[s];return e}function Lb(t,e,n,i,r){for(var o=void 0!==r?r:[],a=0,s=e;s<n;s+=i)o[a++]=t.slice(s,s+i);return o.length=a,o}function zb(t,e){return e*Math.round(t/e)}function Nb(t,e,n,i,r,o,a){if(e==n)return a;var s,u,l=zb(t[e],r),c=zb(t[e+1],r);e+=i,o[a++]=l,o[a++]=c;do{if(s=zb(t[e],r),u=zb(t[e+1],r),(e+=i)==n)return o[a++]=s,o[a++]=u,a}while(s==l&&u==c);for(;e<n;){var h=zb(t[e],r),d=zb(t[e+1],r);if(e+=i,h!=s||d!=u){var p=s-l,f=u-c,g=h-l,m=d-c;p*m==f*g&&(p<0&&g<p||p==g||p>0&&g>p)&&(f<0&&m<f||f==m||f>0&&m>f)?(s=h,u=d):(o[a++]=s,o[a++]=u,l=s,c=u,s=h,u=d)}}return o[a++]=s,o[a++]=u,a}var Bb=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Vb=function(t){function e(e,n){var i=t.call(this)||this;return i.maxDelta_=-1,i.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?i.setCoordinates(e,n):i.setFlatCoordinates(n,e),i}return Bb(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,i){return i<vv(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Db(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Rb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))},e.prototype.getArea=function(){return Ab(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Lb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=function(t,e,n,i,r,o,a){var s=(n-e)/i;if(s<3){for(;e<n;e+=i)o[a++]=t[e],o[a++]=t[e+1];return a}var u=new Array(s);u[0]=1,u[s-1]=1;for(var l=[e,n-i],c=0;l.length>0;){for(var h=l.pop(),d=l.pop(),p=0,f=t[d],g=t[d+1],m=t[h],y=t[h+1],_=d+i;_<h;_+=i){var v=pv(t[_],t[_+1],f,g,m,y);v>p&&(c=_,p=v)}p>r&&(u[(c-e)/i]=1,d+i<c&&l.push(d,c),c+i<h&&l.push(c,h))}for(_=0;_<s;++_)u[_]&&(o[a++]=t[e+_*i],o[a++]=t[e+_*i+1]);return a}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,"XY")},e.prototype.getType=function(){return"LinearRing"},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Fb(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Tb),Ub=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),jb=function(t){function e(e,n){var i=t.call(this)||this;return i.setCoordinates(e,n),i}return Ub(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,i){var r=this.flatCoordinates,o=fv(t,e,r[0],r[1]);if(o<i){for(var a=this.stride,s=0;s<a;++s)n[s]=r[s];return n.length=a,o}return i},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return xv(n=(e=this.flatCoordinates)[0],i=e[1],n,i,t);var e,n,i},e.prototype.getType=function(){return"Point"},e.prototype.intersectsExtent=function(t){return function(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,n,i){for(var r=0,o=n.length;r<o;++r)t[e++]=n[r];return e}(this.flatCoordinates,0,t),this.changed()},e}(Tb);function qb(t,e,n,i,r){return!function(t,e){var n;return(n=e(kv(t)))||(n=e(function(t){return[t[2],t[1]]}(t)))||(n=e(Av(t)))?n:(n=e(function(t){return[t[0],t[3]]}(t)))||!1}(r,(function(r){return!Gb(t,e,n,i,r[0],r[1])}))}function Gb(t,e,n,i,r,o){for(var a=0,s=t[n-i],u=t[n-i+1];e<n;e+=i){var l=t[e],c=t[e+1];u<=o?c>o&&(l-s)*(o-u)-(r-s)*(c-u)>0&&a++:c<=o&&(l-s)*(o-u)-(r-s)*(c-u)<0&&a--,s=l,u=c}return 0!==a}function Hb(t,e,n,i,r,o){if(0===n.length)return!1;if(!Gb(t,e,n[0],i,r,o))return!1;for(var a=1,s=n.length;a<s;++a)if(Gb(t,n[a-1],n[a],i,r,o))return!1;return!0}function Zb(t,e,n,i,r){var o,a,s=Mv([1/0,1/0,-1/0,-1/0],t,e,n,i);return!!Dv(r,s)&&((o=r)[0]<=(a=s)[0]&&a[2]<=o[2]&&o[1]<=a[1]&&a[3]<=o[3]||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]||function(t,e,n,i,r){for(var o,a=[t[e],t[e+1]],s=[];e+i<n;e+=i){if(s[0]=t[e+i],s[1]=t[e+i+1],o=r(a,s))return o;a[0]=s[0],a[1]=s[1]}return!1}(t,e,n,i,(function(t,e){return function(t,e,n){var i=!1,r=bv(t,e),o=bv(t,n);if(1===r||1===o)i=!0;else{var a=t[0],s=t[1],u=t[2],l=t[3],c=n[0],h=n[1],d=(h-e[1])/(c-e[0]),p=void 0,f=void 0;2&o&&!(2&r)&&(i=(p=c-(h-l)/d)>=a&&p<=u),i||!(4&o)||4&r||(i=(f=h-(c-u)*d)>=s&&f<=l),i||!(8&o)||8&r||(i=(p=c-(h-s)/d)>=a&&p<=u),i||!(16&o)||16&r||(i=(f=h-(c-a)*d)>=s&&f<=l)}return i}(r,t,e)})))}function Wb(t,e,n,i){for(;e<n-i;){for(var r=0;r<i;++r){var o=t[e+r];t[e+r]=t[n-i+r],t[n-i+r]=o}e+=i,n-=i}}function Kb(t,e,n,i){for(var r=0,o=t[n-i],a=t[n-i+1];e<n;e+=i){var s=t[e],u=t[e+1];r+=(s-o)*(u+a),o=s,a=u}return r>0}function Xb(t,e,n,i,r){for(var o=void 0!==r&&r,a=0,s=n.length;a<s;++a){var u=n[a],l=Kb(t,e,u,i);(0===a?o&&l||!o&&!l:o&&!l||!o&&l)&&Wb(t,e,u,i),e=u}return e}var $b=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Yb=function(t){function e(e,n,i){var r=t.call(this)||this;return r.ends_=[],r.flatInteriorPointRevision_=-1,r.flatInteriorPoint_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,void 0!==n&&i?(r.setFlatCoordinates(n,e),r.ends_=i):r.setCoordinates(e,n),r}return $b(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?function(t,e){for(var n=Array.isArray(e)?e:[e],i=n.length,r=0;r<i;r++)t[t.length]=n[r]}(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,n,i){return i<vv(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,n,i,r){for(var o=0,a=n.length;o<a;++o){var s=n[o];r=Db(t,e,s,i,r),e=s}return r}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,n,i,r,o,a,s,u,l,c){for(var h=[NaN,NaN],d=0,p=n.length;d<p;++d){var f=n[d];l=Rb(t,e,f,i,r,!0,a,s,u,l,h),e=f}return l}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,0,t,e,n,i))},e.prototype.containsXY=function(t,e){return Hb(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,n,i){for(var r=0,o=0,a=n.length;o<a;++o){var s=n[o];r+=Ab(t,e,s,i),e=s}return r}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Xb(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,function(t,e,n,i,r){for(var o=[],a=0,s=0,u=n.length;s<u;++s){var l=n[s];o[a++]=Lb(t,e,l,i,o[a]),e=l}return o.length=a,o}(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Ev(this.getExtent());this.flatInteriorPoint_=function(t,e,n,i,r,o,a){for(var s,u,l,c,h,d,p,f=r[1],g=[],m=0,y=n.length;m<y;++m){var _=n[m];for(c=t[_-i],d=t[_-i+1],s=0;s<_;s+=i)h=t[s],p=t[s+1],(f<=d&&p<=f||d<=f&&f<=p)&&g.push(l=(f-d)/(p-d)*(h-c)+c),c=h,d=p}var v=NaN,b=-1/0;for(g.sort(M_),c=g[0],s=1,u=g.length;s<u;++s){h=g[s];var x=Math.abs(h-c);x>b&&Hb(t,0,n,i,l=(c+h)/2,f)&&(v=l,b=x),c=h}return isNaN(v)&&(v=r[0]),[v,f,b]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new jb(this.getFlatInteriorPoint(),"XYM")},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Vb(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[],r=0,o=0,a=n.length;o<a;++o){var s=n[o],u=new Vb(e.slice(r,s),t);i.push(u),r=s}return i},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,n,i,r){for(var o=0,a=n.length;o<a;++o){var s=n[o],u=Kb(t,e,s,i);if(0===o){if(!u)return!1}else if(u)return!1;e=s}return!0}(t,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Xb(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=function(t,e,n,i,r,o,a,s){for(var u=0,l=n.length;u<l;++u){var c=n[u];a=Nb(t,e,c,i,r,o,a),s.push(a),e=c}return a}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,i),new e(n,"XY",i)},e.prototype.getType=function(){return"Polygon"},e.prototype.intersectsExtent=function(t){return function(t,e,n,i,r){if(!function(t,e,n,i,r){return!!(Zb(t,0,n,i,r)||Gb(t,0,n,i,r[0],r[1])||Gb(t,0,n,i,r[0],r[3])||Gb(t,0,n,i,r[2],r[1])||Gb(t,0,n,i,r[2],r[3]))}(t,0,n[0],i,r))return!1;if(1===n.length)return!0;for(var o=1,a=n.length;o<a;++o)if(qb(t,n[o-1],n[o],i,r)&&!Zb(t,n[o-1],n[o],i,r))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=function(t,e,n,i,r){for(var o=r||[],a=0,s=0,u=n.length;s<u;++s){var l=Fb(t,e,n[s],i);o[a++]=l,e=l}return o.length=a,o}(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(Tb),Qb=Yb;function Jb(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=[e,n,e,r,i,r,i,n,e,n];return new Yb(o,"XY",[o.length])}var tx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function ex(t,e){setTimeout((function(){t(e)}),0)}function nx(t){return!(t.sourceCenter&&t.targetCenter&&!Vv(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}var ix=function(t){function e(e){var n=t.call(this)||this,i=__({},e);return n.hints_=[0,0],n.animations_=[],n.projection_=_b(i.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.cancelAnchor_=void 0,i.center&&(i.center=xb(i.center)),i.extent&&(i.extent=wb(i.extent)),n.applyOptions_(i),n}return tx(e,t),e.prototype.applyOptions_=function(t){var e=function(t){var e,n,i,r=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,s=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,l=void 0!==t.showFullExtent&&t.showFullExtent,c=_b(t.projection,"EPSG:3857"),h=c.getExtent(),d=t.constrainOnlyCenter,p=t.extent;if(s||p||!c.isGlobal()||(d=!1,p=h),void 0!==t.resolutions){var f=t.resolutions;n=f[r],i=void 0!==f[o]?f[o]:f[f.length-1],e=t.constrainResolution?function(t,e,n,i){return function(r,o,a,s){if(void 0!==r){var u=t[0],l=t[t.length-1],c=n?Fv(u,n,a,i):u;if(s)return void 0===e||e?Lv(r,c,l):hv(r,l,c);var h=Math.min(c,r),d=Math.floor(O_(t,h,o));return t[d]>c&&d<t.length-1?t[d+1]:t[d]}}}(f,u,!d&&p,l):zv(n,i,u,!d&&p,l)}else{var g=(h?Math.max(Iv(h),Tv(h)):360*Wv[Kv.DEGREES]/c.getMetersPerUnit())/256/Math.pow(2,0),m=g/Math.pow(2,28);void 0!==(n=t.maxResolution)?r=0:n=g/Math.pow(a,r),void 0===(i=t.minResolution)&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(a,o):g/Math.pow(a,o):m),o=r+Math.floor(Math.log(n/i)/Math.log(a)),i=n/Math.pow(a,o-r),e=t.constrainResolution?function(t,e,n,i,r,o){return function(a,s,u,l){if(void 0!==a){var c=r?Fv(e,r,u,o):e,h=void 0!==n?n:0;if(l)return void 0===i||i?Lv(a,c,h):hv(a,h,c);var d=Math.ceil(Math.log(e/c)/Math.log(t)-1e-9),p=-s*(.5-1e-9)+.5,f=Math.min(c,a),g=Math.floor(Math.log(e/f)/Math.log(t)+p),m=Math.max(d,g);return hv(e/Math.pow(t,m),h,c)}}}(a,n,i,u,!d&&p,l):zv(n,i,u,!d&&p,l)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:r,zoomFactor:a}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=e.minZoom;var n=function(t){if(void 0!==t.extent)return yv(t.extent,t.constrainOnlyCenter,void 0===t.smoothExtentConstraint||t.smoothExtentConstraint);var e=_b(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){var n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,yv(n,!1,!1)}return _v}(t),i=e.constraint,r=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(i=5*Math.PI/180,function(t,e){return e?t:void 0!==t?Math.abs(t)<=i?0:t:void 0}):!1===e?Bv:"number"==typeof e?(n=2*Math.PI/e,function(t,e){return e?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0}):Bv}var n,i;return Nv}(t);this.constraints_={center:n,resolution:i,rotation:r},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.resolveConstraints(0),this.setProperties({}),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=__({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),__({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var i=arguments[n];i.center&&((i=__({},i)).center=xb(i.center,this.getProjection())),i.anchor&&((i=__({},i)).anchor=xb(i.anchor,this.getProjection())),e[n]=i}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,n=arguments.length;if(n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n),!this.isDef()){var i=arguments[n-1];return i.center&&this.setCenterInternal(i.center),void 0!==i.zoom&&this.setZoom(i.zoom),void 0!==i.rotation&&this.setRotation(i.rotation),void(e&&ex(e,!0))}for(var r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,s=this.targetRotation_,u=[],l=0;l<n;++l){var c=arguments[l],h={start:r,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||qv,callback:e};if(c.center&&(h.sourceCenter=o,h.targetCenter=c.center.slice(),o=h.targetCenter),void 0!==c.zoom?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(c.zoom),a=h.targetResolution):c.resolution&&(h.sourceResolution=a,h.targetResolution=c.resolution,a=h.targetResolution),void 0!==c.rotation){h.sourceRotation=s;var d=gv(c.rotation-s+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=s+d,s=h.targetRotation}nx(h)?h.complete=!0:r+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(0,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[0]>0},e.prototype.getInteracting=function(){return this.hints_[1]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(0,-this.hints_[0]);for(var e=0,n=this.animations_.length;e<n;++e){var i=this.animations_[e];i[0].callback&&ex(i[0].callback,!1),t=t||i.filter((function(t){return!t.complete}))[0].anchor}this.animations_.length=0,this.cancelAnchor_=t},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;n>=0;--n){for(var i=this.animations_[n],r=!0,o=0,a=i.length;o<a;++o){var s=i[o];if(!s.complete){var u=s.duration>0?(t-s.start)/s.duration:1;u>=1?(s.complete=!0,u=1):r=!1;var l=s.easing(u);if(s.sourceCenter){var c=s.sourceCenter[0],h=s.sourceCenter[1];this.targetCenter_=[c+l*(s.targetCenter[0]-c),h+l*(s.targetCenter[1]-h)]}if(s.sourceResolution&&s.targetResolution){var d=1===l?s.targetResolution:s.sourceResolution+l*(s.targetResolution-s.sourceResolution);if(s.anchor){var p=this.getViewportSize_(this.getRotation()),f=this.constraints_.resolution(d,0,p,!0);this.targetCenter_=this.calculateCenterZoom(f,s.anchor)}this.targetResolution_=d,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var g=1===l?gv(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+l*(s.targetRotation-s.sourceRotation);if(s.anchor){var m=this.constraints_.rotation(g,!0);this.targetCenter_=this.calculateCenterRotate(m,s.anchor)}this.targetRotation_=g}if(this.applyTargetState_(!0),e=!0,!s.complete)break}}if(r){this.animations_[n]=null,this.setHint(0,-1);var y=i[0].callback;y&&ex(y,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var n,i,r,o=this.getCenterInternal();return void 0!==o&&(Uv(n=[o[0]-e[0],o[1]-e[1]],t-this.getRotation()),(i=n)[0]+=+(r=e)[0],i[1]+=+r[1]),n},e.prototype.calculateCenterZoom=function(t,e){var n,i=this.getCenterInternal(),r=this.getResolution();return void 0!==i&&void 0!==r&&(n=[e[0]-t*(e[0]-i[0])/r,e[1]-t*(e[1]-i[1])/r]),n},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var n=e[0],i=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100]},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?bb(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get("center")},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){return e=this.calculateExtentInternal(t),this.getProjection(),e;var e},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSize_(),n=this.getCenterInternal();sv(n,1);var i=this.getResolution();sv(void 0!==i,2);var r=this.getRotation();return sv(void 0!==r,3),Sv(n,i,r,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get("resolution")},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(wb(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var n=e||this.getViewportSize_(),i=Iv(t)/n[0],r=Tv(t)/n[1];return Math.max(i,r)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.getConstrainedResolution(this.maxResolution_),i=Math.log(n/this.minResolution_)/Math.log(e);return function(t){return n/Math.pow(e,t*i)}},e.prototype.getRotation=function(){return this.get("rotation")},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),i=Math.log(n/this.minResolution_)/e;return function(t){return Math.log(n/t)/e/i}},e.prototype.getState=function(){var t=this.getCenterInternal(),e=this.getProjection(),n=this.getResolution(),i=this.getRotation();return{center:t.slice(0),projection:void 0!==e?e:null,resolution:n,rotation:i,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,n,i=this.minZoom_||0;if(this.resolutions_){var r=O_(this.resolutions_,t,1);i=r,e=this.resolutions_[r],n=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=hv(Math.floor(t),0,this.resolutions_.length-2);return this.resolutions_[e]/Math.pow(this.resolutions_[e]/this.resolutions_[e+1],hv(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var n,i=__({size:this.getViewportSize_()},e||{});if(sv(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))sv(!Rv(t),25),n=Jb(r=wb(t,this.getProjection()));else if("Circle"===t.getType()){var r;(n=Jb(r=wb(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),Ev(r))}else n=t;this.fitInternal(n,i)},e.prototype.fitInternal=function(t,e){var n=e||{},i=n.size;i||(i=this.getViewportSize_());var r,o=void 0!==n.padding?n.padding:[0,0,0,0],a=void 0!==n.nearest&&n.nearest;r=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.getResolutionForZoom(n.maxZoom):0;for(var s=t.getFlatCoordinates(),u=this.getRotation(),l=Math.cos(-u),c=Math.sin(-u),h=1/0,d=1/0,p=-1/0,f=-1/0,g=t.getStride(),m=0,y=s.length;m<y;m+=g){var _=s[m]*l-s[m+1]*c,v=s[m]*c+s[m+1]*l;h=Math.min(h,_),d=Math.min(d,v),p=Math.max(p,_),f=Math.max(f,v)}var b=this.getResolutionForExtentInternal([h,d,p,f],[i[0]-o[1]-o[3],i[1]-o[0]-o[2]]);b=isNaN(b)?r:Math.max(b,r),b=this.getConstrainedResolution(b,a?0:1);var x=(h+p)/2,w=(d+f)/2,C=[(x+=(o[1]-o[3])/2*b)*l-(w+=(o[0]-o[2])/2*b)*(c=-c),w*l+x*c],P=n.callback?n.callback:T_;void 0!==n.duration?this.animateInternal({resolution:b,center:this.getConstrainedCenter(C,b),duration:n.duration,easing:n.easing},P):(this.targetResolution_=b,this.targetCenter_=C,this.applyTargetState_(!1,!0),ex(P,!0))},e.prototype.centerOn=function(t,e,n){this.centerOnInternal(xb(t,this.getProjection()),e,n)},e.prototype.centerOnInternal=function(t,e,n){var i=this.getRotation(),r=Math.cos(-i),o=Math.sin(-i),a=t[0]*r-t[1]*o,s=t[1]*r+t[0]*o,u=this.getResolution();this.setCenterInternal([(a+=(e[0]/2-n[0])*u)*r-(s+=(n[1]-e[1]/2)*u)*(o=-o),s*r+a*o])},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=bb(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var n=e&&xb(e,this.getProjection());this.adjustResolutionInternal(t,n)},e.prototype.adjustResolutionInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,i,n);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=xb(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(xb(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var n=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(i),o=this.constraints_.resolution(this.targetResolution_,0,r,n),a=this.constraints_.center(this.targetCenter_,o,r,n);this.get("rotation")!==i&&this.set("rotation",i),this.get("resolution")!==o&&this.set("resolution",o),this.get("center")&&Vv(this.get("center"),a)||this.set("center",a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,n){var i=void 0!==t?t:200,r=e||0,o=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(o),s=this.constraints_.resolution(this.targetResolution_,r,a),u=this.constraints_.center(this.targetCenter_,s,a);if(0===i&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=o,this.targetCenter_=u,void this.applyTargetState_();var l=n||(0===i?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===o&&this.getCenterInternal()&&Vv(this.getCenterInternal(),u)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:u,resolution:s,duration:i,easing:jv,anchor:l}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},e.prototype.endInteraction=function(t,e,n){var i=n&&xb(n,this.getProjection());this.endInteractionInternal(t,e,i)},e.prototype.endInteractionInternal=function(t,e,n){this.setHint(1,-1),this.resolveConstraints(t,e,n)},e.prototype.getConstrainedCenter=function(t,e){var n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)},e.prototype.getConstrainedZoom=function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))},e.prototype.getConstrainedResolution=function(t,e){var n=e||0,i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,i)},e}(U_);function rx(t,e){var n=e.parentNode;n&&n.replaceChild(t,e)}function ox(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}var ax=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),sx=function(t){function e(e){var n=t.call(this)||this,i=__({},e);return i.opacity=void 0!==e.opacity?e.opacity:1,sv("number"==typeof i.opacity,64),i.visible=void 0===e.visible||e.visible,i.zIndex=e.zIndex,i.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,i.minResolution=void 0!==e.minResolution?e.minResolution:0,i.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,i.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,n.className_=void 0!==i.className?e.className:"ol-layer",delete i.className,n.setProperties(i),n.state_=null,n}return ax(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=hv(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n?n:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return d_()},e.prototype.getLayerStatesArray=function(t){return d_()},e.prototype.getExtent=function(){return this.get("extent")},e.prototype.getMaxResolution=function(){return this.get("maxResolution")},e.prototype.getMinResolution=function(){return this.get("minResolution")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.getOpacity=function(){return this.get("opacity")},e.prototype.getSourceState=function(){return d_()},e.prototype.getVisible=function(){return this.get("visible")},e.prototype.getZIndex=function(){return this.get("zIndex")},e.prototype.setExtent=function(t){this.set("extent",t)},e.prototype.setMaxResolution=function(t){this.set("maxResolution",t)},e.prototype.setMinResolution=function(t){this.set("minResolution",t)},e.prototype.setMaxZoom=function(t){this.set("maxZoom",t)},e.prototype.setMinZoom=function(t){this.set("minZoom",t)},e.prototype.setOpacity=function(t){sv("number"==typeof t,64),this.set("opacity",t)},e.prototype.setVisible=function(t){this.set("visible",t)},e.prototype.setZIndex=function(t){this.set("zIndex",t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(U_),ux=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),lx=function(t){function e(e){var n=this,i=e||{},r=__({},i);delete r.layers;var o=i.layers;return(n=t.call(this,r)||this).layersListenerKeys_=[],n.listenerKeys_={},n.addEventListener(V_("layers"),n.handleLayersChanged_),o?Array.isArray(o)?o=new G_(o.slice(),{unique:!0}):sv("function"==typeof o.getArray,43):o=new G_(void 0,{unique:!0}),n.setLayers(o),n}return ux(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(C_),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(x_(t,"add",this.handleLayersAdd_,this),x_(t,"remove",this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(C_);v_(this.listenerKeys_);for(var n=t.getArray(),i=0,r=n.length;i<r;i++){var o=n[i];this.listenerKeys_[f_(o)]=[x_(o,"propertychange",this.handleLayerChange_,this),x_(o,"change",this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[f_(e)]=[x_(e,"propertychange",this.handleLayerChange_,this),x_(e,"change",this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=f_(t.element);this.listenerKeys_[e].forEach(C_),delete this.listenerKeys_[e],this.changed()},e.prototype.getLayers=function(){return this.get("layers")},e.prototype.setLayers=function(t){this.set("layers",t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e,n,i,r=void 0!==t?t:[],o=r.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(r)}));for(var a=this.getLayerState(),s=o,u=r.length;s<u;s++){var l=r[s];l.opacity*=a.opacity,l.visible=l.visible&&a.visible,l.maxResolution=Math.min(l.maxResolution,a.maxResolution),l.minResolution=Math.max(l.minResolution,a.minResolution),l.minZoom=Math.max(l.minZoom,a.minZoom),l.maxZoom=Math.min(l.maxZoom,a.maxZoom),void 0!==a.extent&&(l.extent=void 0!==l.extent?(i=void 0,i=[1/0,1/0,-1/0,-1/0],Dv(e=l.extent,n=a.extent)?(i[0]=e[0]>n[0]?e[0]:n[0],i[1]=e[1]>n[1]?e[1]:n[1],i[2]=e[2]<n[2]?e[2]:n[2],i[3]=e[3]<n[3]?e[3]:n[3]):wv(i),i):a.extent)}return r},e.prototype.getSourceState=function(){return"ready"},e}(sx),cx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),hx=function(t){function e(e){var n=t.call(this)||this,i=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,i,r,o={},a=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new lx({layers:t.layers});return o.layergroup=a,o.target=t.target,o.view=void 0!==t.view?t.view:new ix,void 0!==t.controls&&(Array.isArray(t.controls)?n=new G_(t.controls.slice()):(sv("function"==typeof t.controls.getArray,47),n=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?i=new G_(t.interactions.slice()):(sv("function"==typeof t.interactions.getArray,48),i=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?r=new G_(t.overlays.slice()):(sv("function"==typeof t.overlays.getArray,49),r=t.overlays):r=new G_,{controls:n,interactions:i,keyboardEventTarget:e,overlays:r,values:o}}(e);n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,n.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:J_,n.animationDelay_=(function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}).bind(n),n.coordinateToPixelTransform_=[1,0,0,1,0,0],n.pixelToCoordinateTransform_=[1,0,0,1,0,0],n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=new av(n,e.moveTolerance);var r=n.handleMapBrowserEvent.bind(n);for(var o in nv)n.mapBrowserEventHandler_.addEventListener(nv[o],r);n.keyboardEventTarget_=i.keyboardEventTarget,n.keyHandlerKeys_=null;var a=n.handleBrowserEvent.bind(n);return n.viewport_.addEventListener("contextmenu",a,!1),n.viewport_.addEventListener("wheel",a,!!ev&&{passive:!1}),n.controls=i.controls||new G_,n.interactions=i.interactions||new G_,n.overlays_=i.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new cv(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addEventListener(V_("layergroup"),n.handleLayerGroupChanged_),n.addEventListener(V_("view"),n.handleViewChanged_),n.addEventListener(V_("size"),n.handleSizeChanged_),n.addEventListener(V_("target"),n.handleTargetChanged_),n.setProperties(i.values),n.controls.forEach((function(t){t.setMap(this)}).bind(n)),n.controls.addEventListener("add",(function(t){t.element.setMap(this)}).bind(n)),n.controls.addEventListener("remove",(function(t){t.element.setMap(null)}).bind(n)),n.interactions.forEach((function(t){t.setMap(this)}).bind(n)),n.interactions.addEventListener("add",(function(t){t.element.setMap(this)}).bind(n)),n.interactions.addEventListener("remove",(function(t){t.element.setMap(null)}).bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n.overlays_.addEventListener("add",(function(t){this.addOverlayInternal_(t.element)}).bind(n)),n.overlays_.addEventListener("remove",(function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}).bind(n)),n}return cx(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener("resize",this.handleResize_,!1),this.handleResize_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.frameState_){var i=this.getCoordinateFromPixelInternal(t);return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,!1!==n.checkWrapped,e,null,void 0!==n.layerFilter?n.layerFilter:E_,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n},e.prototype.forEachLayerAtPixel=function(t,e,n){if(this.frameState_){var i=n||{};return this.renderer_.forEachLayerAtPixel(t,this.frameState_,void 0!==i.hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,e,i.layerFilter||E_)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixelInternal(t);return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,void 0!==(e=void 0!==e?e:{}).hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0,!1!==e.checkWrapped,void 0!==e.layerFilter?e.layerFilter:E_,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},e.prototype.getTarget=function(){return this.get("target")},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return bb(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?Cb(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get("layergroup")},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var i=t[e].layer.getSource();if(i&&i.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=xb(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?Cb(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get("size")},e.prototype.getView=function(){return this.get("view")},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,n,i){var r=this.frameState_;if(!(r&&e in r.wantedTiles))return 1/0;if(!r.wantedTiles[e][t.getKey()])return 1/0;var o=r.viewState.center,a=n[0]-o[0],s=n[1]-o[1];return 65536*Math.log(i)+Math.sqrt(a*a+s*s)/i},e.prototype.handleBrowserEvent=function(t,e){var n=new K_(e||t.type,this,t);this.handleMapBrowserEvent(n)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent.target;if(t.dragging||!this.overlayContainerStopEvent_.contains(e)&&document.body.contains(e)){t.frameState=this.frameState_;var n=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var i=n.length-1;i>=0;i--){var r=n[i];if(r.getActive()&&!r.handleEvent(t))break}}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var n=this.maxTilesLoading_,i=n;if(t){var r=t.viewHints;if(r[0]||r[1]){var o=!tv&&Date.now()-t.time>8;n=o?0:8,i=o?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}!t||!this.hasListener("rendercomplete")||t.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent("rendercomplete",t);for(var a=this.postRenderFunctions_,s=0,u=a.length;s<u;++s)a[s](this,t);a.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,n=this.keyHandlerKeys_.length;e<n;++e)C_(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer());var i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[x_(i,"keydown",this.handleBrowserEvent,this),x_(i,"keypress",this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener("resize",this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),ox(this.viewport_),void 0!==this.handleResize_&&(removeEventListener("resize",this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(C_(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(C_(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=x_(t,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=x_(t,"change",this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(C_),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[x_(t,"propertychange",this.render,this),x_(t,"change",this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var i=t[e].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e,n,i=this.getSize(),r=this.getView(),o=this.frameState_,a=null;if(void 0!==i&&function(t){return t[0]>0&&t[1]>0}(i)&&r&&r.isDef()){var s=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=r.getState();a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterItems:o?o.declutterItems:[],extent:Sv(u.center,u.resolution,u.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:u,viewHints:s,wantedTiles:{}}}this.frameState_=a,this.renderer_.renderFrame(a),a&&(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),o&&(!this.previousExtent_||!Rv(this.previousExtent_)&&!Cv(a.extent,this.previousExtent_))&&(this.dispatchEvent(new Z_("movestart",this,o)),this.previousExtent_=wv(this.previousExtent_)),this.previousExtent_&&!a.viewHints[0]&&!a.viewHints[1]&&!Cv(a.extent,this.previousExtent_)&&(this.dispatchEvent(new Z_("moveend",this,a)),e=a.extent,(n=this.previousExtent_)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3]):e.slice())),this.dispatchEvent(new Z_("postrender",this,a)),this.postRenderTimeoutHandle_=setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set("layergroup",t)},e.prototype.setSize=function(t){this.set("size",t)},e.prototype.setTarget=function(t){this.set("target",t)},e.prototype.setView=function(t){this.set("view",t)},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0);this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}},e}(U_),dx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),px=function(t){function e(e){var n=t.call(this)||this;return n.element=e.element?e.element:null,n.target_=null,n.map_=null,n.listenerKeys=[],n.render_=e.render?e.render:T_,e.target&&n.setTarget(e.target),n}return dx(e,t),e.prototype.disposeInternal=function(){ox(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&ox(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)C_(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==T_&&this.listenerKeys.push(x_(t,"postrender",this.render,this)),t.render())},e.prototype.render=function(t){this.render_.call(this,t)},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(U_),fx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function gx(t,e){if(!t.visible)return!1;var n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;var i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}!function(t){function e(e){var n=this,i=__({},e);return delete i.source,(n=t.call(this,i)||this).mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,e.render&&(n.render=e.render),e.map&&n.setMap(e.map),n.addEventListener(V_("source"),n.handleSourcePropertyChange_),n.setSource(e.source?e.source:null),n}fx(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get("source")||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():"undefined"},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(C_(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=x_(t,"change",this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_.getFeatures(t)},e.prototype.render=function(t,e){var n=this.getRenderer();if(n.prepareFrame(t))return n.renderFrame(t,e)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(C_(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(C_(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=x_(t,"precompose",(function(t){var e=t.frameState.layerStatesArray,n=this.getLayerState(!1);sv(!e.some((function(t){return t.layer===n.layer})),67),e.push(n)}),this),this.mapRenderKey_=x_(this,"change",t.render,t),this.changed())},e.prototype.setSource=function(t){this.set("source",t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.setSource(null),t.prototype.disposeInternal.call(this)}}(sx);var mx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function yx(t){this.updateElement_(t.frameState)}var _x=function(t){function e(e){var n=this,i=e||{};(n=t.call(this,{element:document.createElement("div"),render:i.render||yx,target:i.target})||this).ulElement_=document.createElement("ul"),n.collapsed_=void 0===i.collapsed||i.collapsed,n.overrideCollapsible_=void 0!==i.collapsible,n.collapsible_=void 0===i.collapsible||i.collapsible,n.collapsible_||(n.collapsed_=!1);var r=void 0!==i.className?i.className:"ol-attribution",o=void 0!==i.tipLabel?i.tipLabel:"Attributions",a=void 0!==i.collapseLabel?i.collapseLabel:"\xbb";"string"==typeof a?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=a):n.collapseLabel_=a;var s=void 0!==i.label?i.label:"i";"string"==typeof s?(n.label_=document.createElement("span"),n.label_.textContent=s):n.label_=s;var u=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_,l=document.createElement("button");l.setAttribute("type","button"),l.title=o,l.appendChild(u),l.addEventListener("click",n.handleClick_.bind(n),!1);var c=n.element;return c.className=r+" ol-unselectable ol-control"+(n.collapsed_&&n.collapsible_?" ol-collapsed":"")+(n.collapsible_?"":" ol-uncollapsible"),c.appendChild(n.ulElement_),c.appendChild(l),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return mx(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},n=[],i=t.layerStatesArray,r=0,o=i.length;r<o;++r){var a=i[r];if(gx(a,t.viewState)){var s=a.layer.getSource();if(s){var u=s.getAttributions();if(u){var l=u(t);if(l)if(this.overrideCollapsible_||!1!==s.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(l))for(var c=0,h=l.length;c<h;++c)l[c]in e||(n.push(l[c]),e[l[c]]=!0);else l in e||(n.push(l),e[l]=!0)}}}}return n},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!k_(e,this.renderedAttributions_)){!function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.ulElement_);for(var i=0,r=e.length;i<r;++i){var o=document.createElement("li");o.innerHTML=e[i],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?rx(this.collapseLabel_,this.label_):rx(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(px),vx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function bx(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.rotation_){var i="rotate("+n+"rad)";if(this.autoHide_){var r=this.element.classList.contains("ol-hidden");r||0!==n?r&&0!==n&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.label_.style.transform=i}this.rotation_=n}}var xx=function(t){function e(e){var n=this,i=e||{};n=t.call(this,{element:document.createElement("div"),render:i.render||bx,target:i.target})||this;var r=void 0!==i.className?i.className:"ol-rotate",o=void 0!==i.label?i.label:"\u21e7";n.label_=null,"string"==typeof o?(n.label_=document.createElement("span"),n.label_.className="ol-compass",n.label_.textContent=o):(n.label_=o,n.label_.classList.add("ol-compass"));var a=i.tipLabel?i.tipLabel:"Reset rotation",s=document.createElement("button");s.className=r+"-reset",s.setAttribute("type","button"),s.title=a,s.appendChild(n.label_),s.addEventListener("click",n.handleClick_.bind(n),!1);var u=n.element;return u.className=r+" ol-unselectable ol-control",u.appendChild(s),n.callResetNorth_=i.resetNorth?i.resetNorth:void 0,n.duration_=void 0!==i.duration?i.duration:250,n.autoHide_=void 0===i.autoHide||i.autoHide,n.rotation_=void 0,n.autoHide_&&n.element.classList.add("ol-hidden"),n}return vx(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:jv}):t.setRotation(0))}},e}(px),wx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Cx=function(t){function e(e){var n=this,i=e||{};n=t.call(this,{element:document.createElement("div"),target:i.target})||this;var r=void 0!==i.className?i.className:"ol-zoom",o=void 0!==i.delta?i.delta:1,a=void 0!==i.zoomInLabel?i.zoomInLabel:"+",s=void 0!==i.zoomOutLabel?i.zoomOutLabel:"\u2212",u=void 0!==i.zoomInTipLabel?i.zoomInTipLabel:"Zoom in",l=void 0!==i.zoomOutTipLabel?i.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=r+"-in",c.setAttribute("type","button"),c.title=u,c.appendChild("string"==typeof a?document.createTextNode(a):a),c.addEventListener("click",n.handleClick_.bind(n,o),!1);var h=document.createElement("button");h.className=r+"-out",h.setAttribute("type","button"),h.title=l,h.appendChild("string"==typeof s?document.createTextNode(s):s),h.addEventListener("click",n.handleClick_.bind(n,-o),!1);var d=n.element;return d.className=r+" ol-unselectable ol-control",d.appendChild(c),d.appendChild(h),n.duration_=void 0!==i.duration?i.duration:250,n}return wx(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var n=e.getZoom();if(void 0!==n){var i=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:i,duration:this.duration_,easing:jv})):e.setZoom(i)}}},e}(px),Px=function(){function t(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var n=e-3;n>0&&this.points_[n+2]>t;)n-=3;var i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;var r=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/i,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}(),Mx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Ox(t,e,n,i){var r=t.getZoom();if(void 0!==r){var o=t.getConstrainedZoom(r+e),a=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:n,duration:void 0!==i?i:250,easing:jv})}}var kx=function(t){function e(e){var n=t.call(this)||this;return e.handleEvent&&(n.handleEvent=e.handleEvent),n.map_=null,n.setActive(!0),n}return Mx(e,t),e.prototype.getActive=function(){return this.get("active")},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set("active",t)},e.prototype.setMap=function(t){this.map_=t},e}(U_),Ex=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Sx(t){var e=!1;if(t.type==nv.DBLCLICK){var n=t.coordinate,i=t.originalEvent.shiftKey?-this.delta_:this.delta_;Ox(t.map.getView(),i,n,this.duration_),t.preventDefault(),e=!0}return!e}var Tx=function(t){function e(e){var n=t.call(this,{handleEvent:Sx})||this,i=e||{};return n.delta_=i.delta?i.delta:1,n.duration_=void 0!==i.duration?i.duration:250,n}return Ex(e,t),e}(kx),Ax=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Ix=function(t){return t.target.getTargetElement()===document.activeElement},Dx=E_,Rx=function(t){var e=t.originalEvent;return 0==e.button&&!(Y_&&Q_&&e.ctrlKey)},Fx=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Lx=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},zx=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},Nx=function(t){var e=t.pointerEvent;return sv(void 0!==e,56),"mouse"==e.pointerType},Bx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Vx(t){for(var e=t.length,n=0,i=0,r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY;return[n/e,i/e]}var Ux=function(t){function e(e){var n=this,i=e||{};return n=t.call(this,i)||this,i.handleDownEvent&&(n.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(n.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(n.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(n.handleUpEvent=i.handleUpEvent),i.stopDown&&(n.stopDown=i.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return Bx(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==nv.POINTERDRAG)this.handleDragEvent(t);else if(t.type==nv.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==nv.POINTERDOWN){var i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==nv.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===nv.POINTERDOWN||e===nv.POINTERDRAG||e===nv.POINTERUP}(t)){var e=t.pointerEvent,n=e.pointerId.toString();t.type==nv.POINTERUP?delete this.trackedPointers_[n]:(t.type==nv.POINTERDOWN||n in this.trackedPointers_)&&(this.trackedPointers_[n]=e),this.targetPointers=b_(this.trackedPointers_)}},e}(kx),jx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function qx(t){return Fx(t)&&function(t){var e=t.pointerEvent;return sv(void 0!==e,56),e.isPrimary&&0===e.button}(t)}var Gx=function(t){function e(e){var n=t.call(this,{stopDown:S_})||this,i=e||{};return n.kinetic_=i.kinetic,n.lastCentroid=null,n.panning_=!1,n.condition_=i.condition?i.condition:qx,n.noKinetic_=!1,n}return jx(e,t),e.prototype.conditionInternal_=function(t){var e=!0;return t.map.getTargetElement().hasAttribute("tabindex")&&(e=Ix(t)),e&&this.condition_(t)},e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e,n,i=this.targetPointers,r=Vx(i);if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){var o=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=t.map.getView();e=o,n=a.getResolution(),e[0]*=n,e[1]*=n,Uv(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var i=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),s=e.getCoordinateFromPixelInternal([a[0]-i*Math.cos(r),a[1]-i*Math.sin(r)]);n.animateInternal({center:n.getConstrainedCenter(s),duration:500,easing:jv})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.conditionInternal_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(Ux),Hx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Zx=function(t){function e(e){var n=this,i=e||{};return(n=t.call(this,{stopDown:S_})||this).condition_=i.condition?i.condition:Ax,n.lastAngle_=void 0,n.duration_=void 0!==i.duration?i.duration:250,n}return Hx(e,t),e.prototype.handleDragEvent=function(t){if(Nx(t)){var e=t.map,n=e.getView();if(n.getConstraints().rotation!==Nv){var i=e.getSize(),r=t.pixel,o=Math.atan2(i[1]/2-r[1],r[0]-i[0]/2);void 0!==this.lastAngle_&&n.adjustRotationInternal(-(o-this.lastAngle_)),this.lastAngle_=o}}},e.prototype.handleUpEvent=function(t){return!Nx(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!(!Nx(t)||!Rx(t)||!this.condition_(t)||(t.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},e}(Ux),Wx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Kx=function(t){function e(e){var n=t.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.className="ol-box "+e,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return Wx(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,n=this.element_.style;n.left=Math.min(t[0],e[0])+"px",n.top=Math.min(t[1],e[1])+"px",n.width=Math.abs(e[0]-t[0])+"px",n.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Qb([n])},e.prototype.getGeometry=function(){return this.geometry_},e}(P_),Xx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),$x=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.coordinate=n,r.mapBrowserEvent=i,r}return Xx(e,t),e}(A_),Yx=function(t){function e(e){var n=t.call(this)||this,i=e||{};return n.box_=new Kx(i.className||"ol-dragbox"),n.minArea_=void 0!==i.minArea?i.minArea:64,n.onBoxEnd_=i.onBoxEnd?i.onBoxEnd:T_,n.startPixel_=null,n.condition_=i.condition?i.condition:Rx,n.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:n.defaultBoxEndCondition,n}return Xx(e,t),e.prototype.defaultBoxEndCondition=function(t,e,n){var i=n[0]-e[0],r=n[1]-e[1];return i*i+r*r>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new $x("boxdrag",t.coordinate,t))},e.prototype.handleUpEvent=function(t){return this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new $x("boxend",t.coordinate,t))),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new $x("boxstart",t.coordinate,t)),!0)},e}(Ux),Qx=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Jx(){var t,e=this.getMap(),n=e.getView(),i=e.getSize(),r=this.getGeometry().getExtent();if(this.out_){var o=n.calculateExtentInternal(i),a=(t=[e.getPixelFromCoordinateInternal(kv(r)),e.getPixelFromCoordinateInternal(Av(r))],function(t,e){for(var n=0,i=e.length;n<i;++n)Pv(t,e[n]);return t}(wv(void 0),t));!function(t,e){var n=(t[2]-t[0])/2*(e-1),i=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=i,t[3]+=i}(o,1/n.getResolutionForExtentInternal(a,i)),r=o}var s=n.getConstrainedResolution(n.getResolutionForExtentInternal(r,i)),u=n.getConstrainedCenter(Ev(r),s);n.animateInternal({resolution:s,center:u,duration:this.duration_,easing:jv})}var tw=function(t){function e(e){var n=this,i=e||{};return(n=t.call(this,{condition:i.condition?i.condition:Lx,className:i.className||"ol-dragzoom",minArea:i.minArea,onBoxEnd:Jx})||this).duration_=void 0!==i.duration?i.duration:200,n.out_=void 0!==i.out&&i.out,n}return Qx(e,t),e}(Yx),ew=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function nw(t){var e=!1;if("keydown"==t.type){var n=t.originalEvent.keyCode;if(this.condition_(t)&&(40==n||37==n||39==n||38==n)){var i=t.map.getView(),r=i.getResolution()*this.pixelDelta_,o=0,a=0;40==n?a=-r:37==n?o=-r:39==n?o=r:a=r;var s=[o,a];Uv(s,i.getRotation()),function(t,e,n){var i=t.getCenterInternal();i&&t.animateInternal({duration:void 0!==n?n:250,easing:Gv,center:t.getConstrainedCenter([i[0]+e[0],i[1]+e[1]])})}(i,s,this.duration_),t.preventDefault(),e=!0}}return!e}var iw=function(t){function e(e){var n=t.call(this,{handleEvent:nw})||this,i=e||{};return n.defaultCondition_=function(t){return Fx(t)&&zx(t)},n.condition_=void 0!==i.condition?i.condition:n.defaultCondition_,n.duration_=void 0!==i.duration?i.duration:100,n.pixelDelta_=void 0!==i.pixelDelta?i.pixelDelta:128,n}return ew(e,t),e}(kx),rw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function ow(t){var e=!1;if("keydown"==t.type||"keypress"==t.type){var n=t.originalEvent.charCode;if(this.condition_(t)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){var i=t.map,r=n=="+".charCodeAt(0)?this.delta_:-this.delta_;Ox(i.getView(),r,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var aw=function(t){function e(e){var n=t.call(this,{handleEvent:ow})||this,i=e||{};return n.condition_=i.condition?i.condition:zx,n.delta_=i.delta?i.delta:1,n.duration_=void 0!==i.duration?i.duration:100,n}return rw(e,t),e}(kx),sw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),uw=function(t){function e(e){var n=this,i=e||{};return(n=t.call(this,i)||this).totalDelta_=0,n.lastDelta_=0,n.maxDelta_=void 0!==i.maxDelta?i.maxDelta:1,n.duration_=void 0!==i.duration?i.duration:250,n.timeout_=void 0!==i.timeout?i.timeout:80,n.useAnchor_=void 0===i.useAnchor||i.useAnchor,n.condition_=i.condition?i.condition:Dx,n.lastAnchor_=null,n.startTime_=void 0,n.eventGap_=400,n.deltaPerZoom_=300,n}return sw(e,t),e.prototype.conditionInternal_=function(t){var e=!0;return t.map.getTargetElement().hasAttribute("tabindex")&&(e=Ix(t)),e&&this.condition_(t)},e.prototype.endInteraction_=function(){this.timeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.conditionInternal_(t))return!0;if("wheel"!==t.type)return!0;t.preventDefault();var e,n=t.map,i=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),"wheel"==t.type&&(e=i.deltaY,$_&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=J_),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var r=Date.now();void 0===this.startTime_&&(this.startTime_=r);var o=n.getView();return this.timeoutId_?clearTimeout(this.timeoutId_):o.beginInteraction(),this.timeoutId_=setTimeout(this.endInteraction_.bind(this),this.eventGap_),o.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=r,!1},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(kx),lw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),cw=function(t){function e(e){var n=this,i=e||{},r=i;return r.stopDown||(r.stopDown=S_),(n=t.call(this,r)||this).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==i.threshold?i.threshold:.3,n.duration_=void 0!==i.duration?i.duration:250,n}return lw(e,t),e.prototype.handleDragEvent=function(t){var e=0,n=this.targetPointers[0],i=this.targetPointers[1],r=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(void 0!==this.lastAngle_){var o=r-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=r;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==Nv){var u=a.getViewport().getBoundingClientRect(),l=Vx(this.targetPointers);l[0]-=u.left,l[1]-=u.top,this.anchor_=a.getCoordinateFromPixelInternal(l),this.rotating_&&(a.render(),s.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(Ux),hw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),dw=function(t){function e(e){var n=this,i=e||{},r=i;return r.stopDown||(r.stopDown=S_),(n=t.call(this,r)||this).anchor_=null,n.duration_=void 0!==i.duration?i.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return hw(e,t),e.prototype.handleDragEvent=function(t){var e=1,n=this.targetPointers[0],i=this.targetPointers[1],r=n.clientX-i.clientX,o=n.clientY-i.clientY,a=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,u=s.getView();1!=e&&(this.lastScaleDelta_=e);var l=s.getViewport().getBoundingClientRect(),c=Vx(this.targetPointers);c[0]-=l.left,c[1]-=l.top,this.anchor_=s.getCoordinateFromPixelInternal(c),s.render(),u.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),1))},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(Ux),pw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),fw=function(t){function e(e,n,i,r){var o=t.call(this,e)||this;return o.inversePixelTransform=n,o.frameState=i,o.context=r,o}return pw(e,t),e}(A_);function gw(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var n=t[1];n!=(0|n)&&(n=n+.5|0);var i=t[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+e+","+n+","+i+","+(void 0===t[3]?1:t[3])+")"}function mw(t,e,n){return e+":"+t+":"+(n?function(t){return"string"==typeof t?t:gw(t)}(n):"null")}var yw=new(function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_)0!=(3&t++)||this.cache_[e].hasListener()||(delete this.cache_[e],--this.cacheSize_)}},t.prototype.get=function(t,e,n){var i=mw(t,e,n);return i in this.cache_?this.cache_[i]:null},t.prototype.set=function(t,e,n,i){var r=mw(t,e,n);this.cache_[r]=i,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}());function _w(t){return Array.isArray(t)?gw(t):t}var vw=function(){function t(){}return t.prototype.drawCustom=function(t,e,n){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}(),bw=[],xw=new U_;(new D_).setSize=function(){console.warn("labelCache is deprecated.")};var ww=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();!function(t){function e(e,n,i,r,o,a,s){var u=t.call(this)||this;return u.context_=e,u.pixelRatio_=n,u.extent_=i,u.transform_=r,u.viewRotation_=o,u.squaredTolerance_=a,u.userTransform_=s,u.contextFillState_=null,u.contextStrokeState_=null,u.contextTextState_=null,u.fillState_=null,u.strokeState_=null,u.image_=null,u.imageAnchorX_=0,u.imageAnchorY_=0,u.imageHeight_=0,u.imageOpacity_=0,u.imageOriginX_=0,u.imageOriginY_=0,u.imageRotateWithView_=!1,u.imageRotation_=0,u.imageScale_=0,u.imageWidth_=0,u.text_="",u.textOffsetX_=0,u.textOffsetY_=0,u.textRotateWithView_=!1,u.textRotation_=0,u.textScale_=0,u.textFillState_=null,u.textStrokeState_=null,u.textState_=null,u.pixelCoordinates_=[],u.tmpLocalTransform_=[1,0,0,1,0,0],u}ww(e,t),e.prototype.drawImages_=function(t,e,n,i){if(this.image_){var r=Hv(t,e,n,2,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,s=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=s*this.imageOpacity_);var u=this.imageRotation_;this.imageRotateWithView_&&(u+=this.viewRotation_);for(var l=0,c=r.length;l<c;l+=2){var h=r[l]-this.imageAnchorX_,d=r[l+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_){var p=h+this.imageAnchorX_,f=d+this.imageAnchorY_;Pb(a,p,f,this.imageScale_,this.imageScale_,u,-p,-f),o.setTransform.apply(o,a)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,d,this.imageWidth_,this.imageHeight_)}0===u&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=s)}},e.prototype.drawText_=function(t,e,n,i){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=Hv(t,e,n,i,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<n;e+=i){var s=r[e]+this.textOffsetX_,u=r[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_){var l=Pb(this.tmpLocalTransform_,s,u,this.textScale_,this.textScale_,a,-s,-u);o.setTransform.apply(o,l)}this.textStrokeState_&&o.strokeText(this.text_,s,u),this.textFillState_&&o.fillText(this.text_,s,u)}0===a&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,n,i,r){var o=this.context_,a=Hv(t,e,n,i,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);var s=a.length;r&&(s-=2);for(var u=2;u<s;u+=2)o.lineTo(a[u],a[u+1]);return r&&o.closePath(),n},e.prototype.drawRings_=function(t,e,n,i){for(var r=0,o=n.length;r<o;++r)e=this.moveToLineTo_(t,e,n[r],i,!0);return e},e.prototype.drawCircle=function(t){if(Dv(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,n){var i=t.getFlatCoordinates();if(i){var r=t.getStride();return Hv(i,0,i.length,r,e,n)}return null}(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],i=e[3]-e[1],r=Math.sqrt(n*n+i*i),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var n=e.getGeometryFunction()(t);n&&Dv(this.extent_,n.getExtent())&&(this.setStyle(e),this.drawGeometry(n))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),n=0,i=e.length;n<i;++n)this.drawGeometry(e[n])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Dv(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var i=t.getFlatMidpoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(Dv(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,i=t.getFlatCoordinates(),r=0,o=t.getEnds(),a=t.getStride();n.beginPath();for(var s=0,u=o.length;s<u;++s)r=this.moveToLineTo_(i,r,o[s],a,!1);n.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Dv(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Dv(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getOrientedFlatCoordinates(),i=0,r=t.getEndss(),o=t.getStride();e.beginPath();for(var a=0,s=r.length;a<s;++a)i=this.drawRings_(n,i,r[a],o);this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var u=t.getFlatInteriorPoints();this.drawText_(u,0,u.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(k_(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,n=this.contextTextState_,i=t.textAlign?t.textAlign:"center";n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=i&&(n.textAlign=i,e.textAlign=i),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var n=t.getColor();this.fillState_={fillStyle:_w(n||"#000")}}else this.fillState_=null;if(e){var i=e.getColor(),r=e.getLineCap(),o=e.getLineDash(),a=e.getLineDashOffset(),s=e.getLineJoin(),u=e.getWidth(),l=e.getMiterLimit();this.strokeState_={lineCap:void 0!==r?r:"round",lineDash:o||bw,lineDashOffset:a||0,lineJoin:void 0!==s?s:"round",lineWidth:this.pixelRatio_*(void 0!==u?u:1),miterLimit:void 0!==l?l:10,strokeStyle:_w(i||"#000")}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),n=t.getImage(1),i=t.getOrigin(),r=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=r[1],this.image_=n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=i[0],this.imageOriginY_=i[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=r[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var n=e.getColor();this.textFillState_={fillStyle:_w(n||"#000")}}else this.textFillState_=null;var i=t.getStroke();if(i){var r=i.getColor(),o=i.getLineCap(),a=i.getLineDash(),s=i.getLineDashOffset(),u=i.getLineJoin(),l=i.getWidth(),c=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:"round",lineDash:a||bw,lineDashOffset:s||0,lineJoin:void 0!==u?u:"round",lineWidth:void 0!==l?l:1,miterLimit:void 0!==c?c:10,strokeStyle:_w(r||"#000")}}else this.textStrokeState_=null;var h=t.getFont(),d=t.getOffsetX(),p=t.getOffsetY(),f=t.getRotateWithView(),g=t.getRotation(),m=t.getScale(),y=t.getText(),_=t.getTextAlign(),v=t.getTextBaseline();this.textState_={font:void 0!==h?h:"10px sans-serif",textAlign:void 0!==_?_:"center",textBaseline:void 0!==v?v:"middle"},this.text_=void 0!==y?y:"",this.textOffsetX_=void 0!==d?this.pixelRatio_*d:0,this.textOffsetY_=void 0!==p?this.pixelRatio_*p:0,this.textRotateWithView_=void 0!==f&&f,this.textRotation_=void 0!==g?g:0,this.textScale_=this.pixelRatio_*(void 0!==m?m:1)}else this.text_=""}}(vw);var Cw=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Pw(t,e){yw.expire()}var Mw=function(t){function e(e){var n=t.call(this)||this;return n.map_=e,n.declutterTree_=null,n}return Cw(e,t),e.prototype.dispatchRenderEvent=function(t,e){d_()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;Pb(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),function(t,e){var n,i=(n=e)[0]*n[3]-n[1]*n[2];sv(0!==i,32);var r=e[0],o=e[1],a=e[2],s=e[3],u=e[4],l=e[5];t[0]=s/i,t[1]=-o/i,t[2]=-a/i,t[3]=r/i,t[4]=(a*l-s*u)/i,t[5]=-(r*l-o*u)/i}(i,n)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r,o,a,s){var u,l=e.viewState;function c(t,e,n){return r.call(o,e,t?n:null)}var h=l.projection,d=t,p=[[0,0]];if(h.canWrapX()){var f=h.getExtent(),g=Iv(f),m=t[0];(m<f[0]||m>f[2])&&(d=[m+g*Math.ceil((f[0]-m)/g),t[1]]),i&&p.push([-g,0],[g,0])}var y,_=e.layerStatesArray,v=_.length;this.declutterTree_&&(y=this.declutterTree_.all().map((function(t){return t.value})));for(var b=[],x=0;x<p.length;x++)for(var w=v-1;w>=0;--w){var C=_[w],P=C.layer;if(P.hasRenderer()&&gx(C,l)&&a.call(s,P)){var M=P.getRenderer(),O=P.getSource();if(M&&O){var k=O.getWrapX()?d:t,E=c.bind(null,C.managed);b[0]=k[0]+p[x][0],b[1]=k[1]+p[x][1],u=M.forEachFeatureAtCoordinate(b,e,n,E,y)}if(u)return u}}},e.prototype.forEachLayerAtPixel=function(t,e,n,i,r){return d_()},e.prototype.hasFeatureAtCoordinate=function(t,e,n,i,r,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,i,E_,this,r,o)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){this.declutterTree_=function(t,e){e&&e.clear();for(var n=t.declutterItems,i=n.length-1;i>=0;--i)for(var r=n[i],o=r.items,a=0,s=o.length;a<s;a+=3)e=o[a].renderDeclutter(o[a+1],o[a+2],r.opacity,e);return n.length=0,e}(t,this.declutterTree_)},e.prototype.scheduleExpireIconCache=function(t){yw.canExpireCache()&&t.postRenderFunctions.push(Pw)},e}(P_),Ow=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),kw=function(t){function e(e){var n=t.call(this,e)||this;n.fontChangeListenerKey_=x_(xw,"propertychange",e.redrawText.bind(e)),n.element_=document.createElement("div");var i=n.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",n.element_.className="ol-unselectable ol-layers";var r=e.getViewport();return r.insertBefore(n.element_,r.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return Ow(e,t),e.prototype.dispatchRenderEvent=function(t,e){var n=this.getMap();if(n.hasListener(t)){var i=new fw(t,void 0,e);n.dispatchEvent(i)}},e.prototype.disposeInternal=function(){C_(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent("precompose",e);var n=e.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),i=e.viewState;this.children_.length=0;for(var r=null,o=0,a=n.length;o<a;++o){var s=n[o];if(e.layerIndex=o,gx(s,i)&&("ready"==s.sourceState||"undefined"==s.sourceState)){var u=s.layer.render(e,r);u&&u!==r&&(this.children_.push(u),r=u)}}t.prototype.renderFrame.call(this,e),function(t,e){for(var n=t.childNodes,i=0;;++i){var r=n[i],o=e[i];if(!r&&!o)break;r!==o&&(r?o?t.insertBefore(o,r):(t.removeChild(r),--i):t.appendChild(o))}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,n,i,r){for(var o=e.viewState,a=e.layerStatesArray,s=a.length-1;s>=0;--s){var u=a[s],l=u.layer;if(l.hasRenderer()&&gx(u,o)&&r(l)){var c=l.getRenderer().getDataAtPixel(t,e,n);if(c){var h=i(l,c);if(h)return h}}}},e}(Mw),Ew=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Sw=function(t){function e(e){return(e=__({},e)).controls||(e.controls=function(t){var e={},n=new G_;return(void 0===e.zoom||e.zoom)&&n.push(new Cx(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&n.push(new xx(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&n.push(new _x(e.attributionOptions)),n}()),e.interactions||(e.interactions=function(t){var e={},n=new G_,i=new Px(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new Zx),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new Tx({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new Gx({condition:e.onFocusOnly?Ix:void 0,kinetic:i})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new cw),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new dw({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new iw),n.push(new aw({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new uw({condition:e.onFocusOnly?Ix:void 0,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new tw({duration:e.zoomDuration})),n}()),t.call(this,e)||this}return Ew(e,t),e.prototype.createRenderer=function(){return new kw(this)},e}(hx);let Tw=(()=>{class t{constructor(){this.map={}}createMap(t){return new Sw({target:t,view:new ix({center:[-74.1723667,40.735657],projection:"EPSG:3857",zoom:12})})}getMap(t){return t=(t&&t.getId?t.getId():t)||"map",this.map[t]||(this.map[t]=this.createMap(t)),this.map[t]}getMaps(){return this.map}getArrayMaps(){return Object.values(this.map)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Aw=[c_,h_,Tw];Sy.setDefaultAuth({apiKey:"0c3e2b7cbff1b34a35e1f2ce3ff94114493bd681",user:"nzlur"});const Iw=new Sy.Viz("\n        @v_features: viewportFeatures($NAME)\n        color: rgba(0,0,0,0)\n        strokeWidth: scaled(1, 12)\n        strokeColor: #627BC1\n      "),Dw=new Sy.source.Dataset("\n        public.zoning_2\n      "),Rw=new Sy.Viz('\n        @code: $code\n        @proploc: $proploc\n        @blocklot: $blocklot\n        color: opacity(ramp(buckets($code,\n        [\n          "R-1",\n          "R-2",\n          "R-3",\n          "R-4",\n          "C-1",\n          "C-2",\n          "C-3",\n          "MX-1",\n          "MX-2",\n          "MX-3",\n          "I-1",\n          "I-2",\n          "I-3",\n          "RDV",\n          "PARK",\n          "INST",\n          "CEM",\n          "PORT",\n          "EWR"\n        ]), [\n          #fffaca,\n          #fff68f,\n          #fff100,\n          #ebd417,\n          #a18aad,\n          #da2028,\n          #850204,\n          #e4a024,\n          #f37520,\n          #FF2900,\n          #e1c3dd,\n          #A53ED5,\n          #c0188c,\n          #dddddd,\n          #229A00,\n          #0063ff,\n          #561818,\n          #B81609,\n          #820c0c\n        ]),0.7)\n        strokeWidth: scaled(.1, 12)\n        strokeColor: rgb(200, 200, 200)\n      '),Fw=new Sy.source.Dataset("\n        public.zoning_2\n      "),Lw=new Sy.Viz('\n        @propclass: $propclass\n        @proploc: $proploc\n        color: opacity(ramp(buckets($propclass,\n        [\n            "1",\n            "2",\n            "4A",\n            "4B",\n            "4C",\n            "5A",\n            "5B",\n            "15A",\n            "15B",\n            "15C",\n            "15D",\n            "15E",\n            "15F"\n        ]), [\n            #686868,\n            #FFEBAF,\n            #FF7F7F,\n            #E8BEFF,\n            #FFAA00,\n            #B5E6B9,\n            #B5E6B9,\n            #BED2FF,\n            #BED2FF,\n            #BEFFE8,\n            #73B2FF,\n            #fff,\n            #00C5FF\n        ]),0.7)\n        strokeWidth: scaled(.1, 12)\n        strokeColor: rgb(200, 200, 200)\n      '),zw=new Sy.Viz("\n        @proploc: $proploc\n        @blocklot: $blocklot\n        color: opacity(#fff, .25)\n        strokeWidth: scaled(.1, 12)\n        strokeColor: rgb(200, 200, 200)\n      ");let Nw=(()=>{class t{static addClass(t,e){t.classList?t.classList.add(e):t.className+=" "+e}static addMultipleClasses(t,e){if(t.classList){let n=e.split(" ");for(let e=0;e<n.length;e++)t.classList.add(n[e])}else{let n=e.split(" ");for(let e=0;e<n.length;e++)t.className+=" "+n[e]}}static removeClass(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}static hasClass(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)}static siblings(t){return Array.prototype.filter.call(t.parentNode.children,(function(e){return e!==t}))}static find(t,e){return Array.from(t.querySelectorAll(e))}static findSingle(t,e){return t?t.querySelector(e):null}static index(t){let e=t.parentNode.childNodes,n=0;for(var i=0;i<e.length;i++){if(e[i]==t)return n;1==e[i].nodeType&&n++}return-1}static indexWithinGroup(t,e){let n=t.parentNode?t.parentNode.childNodes:[],i=0;for(var r=0;r<n.length;r++){if(n[r]==t)return i;n[r].attributes&&n[r].attributes[e]&&1==n[r].nodeType&&i++}return-1}static relativePosition(t,e){let n=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t);const i=e.offsetHeight,r=e.getBoundingClientRect(),o=this.getViewport();let a,s;r.top+i+n.height>o.height?(a=-1*n.height,r.top+a<0&&(a=-1*r.top)):a=i,s=n.width>o.width?-1*r.left:r.left+n.width>o.width?-1*(r.left+n.width-o.width):0,t.style.top=a+"px",t.style.left=s+"px"}static absolutePosition(t,e){let n,i,r=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),o=r.height,a=r.width,s=e.offsetHeight,u=e.offsetWidth,l=e.getBoundingClientRect(),c=this.getWindowScrollTop(),h=this.getWindowScrollLeft(),d=this.getViewport();l.top+s+o>d.height?(n=l.top+c-o,n<0&&(n=c)):n=s+l.top+c,i=l.left+a>d.width?Math.max(0,l.left+h+u-a):l.left+h,t.style.top=n+"px",t.style.left=i+"px"}static getHiddenElementOuterHeight(t){t.style.visibility="hidden",t.style.display="block";let e=t.offsetHeight;return t.style.display="none",t.style.visibility="visible",e}static getHiddenElementOuterWidth(t){t.style.visibility="hidden",t.style.display="block";let e=t.offsetWidth;return t.style.display="none",t.style.visibility="visible",e}static getHiddenElementDimensions(t){let e={};return t.style.visibility="hidden",t.style.display="block",e.width=t.offsetWidth,e.height=t.offsetHeight,t.style.display="none",t.style.visibility="visible",e}static scrollInView(t,e){let n=getComputedStyle(t).getPropertyValue("borderTopWidth"),i=n?parseFloat(n):0,r=getComputedStyle(t).getPropertyValue("paddingTop"),o=r?parseFloat(r):0,a=t.getBoundingClientRect(),s=e.getBoundingClientRect().top+document.body.scrollTop-(a.top+document.body.scrollTop)-i-o,u=t.scrollTop,l=t.clientHeight,c=this.getOuterHeight(e);s<0?t.scrollTop=u+s:s+c>l&&(t.scrollTop=u+s-l+c)}static fadeIn(t,e){t.style.opacity=0;let n=+new Date,i=0,r=function(){i=+t.style.opacity.replace(",",".")+((new Date).getTime()-n)/e,t.style.opacity=i,n=+new Date,+i<1&&(window.requestAnimationFrame&&requestAnimationFrame(r)||setTimeout(r,16))};r()}static fadeOut(t,e){var n=1,i=50/e;let r=setInterval(()=>{(n-=i)<=0&&(n=0,clearInterval(r)),t.style.opacity=n},50)}static getWindowScrollTop(){let t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}static getWindowScrollLeft(){let t=document.documentElement;return(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}static matches(t,e){var n=Element.prototype;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(t){return-1!==[].indexOf.call(document.querySelectorAll(t),this)}).call(t,e)}static getOuterWidth(t,e){let n=t.offsetWidth;if(e){let e=getComputedStyle(t);n+=parseFloat(e.marginLeft)+parseFloat(e.marginRight)}return n}static getHorizontalPadding(t){let e=getComputedStyle(t);return parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)}static getHorizontalMargin(t){let e=getComputedStyle(t);return parseFloat(e.marginLeft)+parseFloat(e.marginRight)}static innerWidth(t){let e=t.offsetWidth,n=getComputedStyle(t);return e+=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight),e}static width(t){let e=t.offsetWidth,n=getComputedStyle(t);return e-=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight),e}static getInnerHeight(t){let e=t.offsetHeight,n=getComputedStyle(t);return e+=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom),e}static getOuterHeight(t,e){let n=t.offsetHeight;if(e){let e=getComputedStyle(t);n+=parseFloat(e.marginTop)+parseFloat(e.marginBottom)}return n}static getHeight(t){let e=t.offsetHeight,n=getComputedStyle(t);return e-=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)+parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth),e}static getWidth(t){let e=t.offsetWidth,n=getComputedStyle(t);return e-=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)+parseFloat(n.borderLeftWidth)+parseFloat(n.borderRightWidth),e}static getViewport(){let t=window,e=document,n=e.documentElement,i=e.getElementsByTagName("body")[0];return{width:t.innerWidth||n.clientWidth||i.clientWidth,height:t.innerHeight||n.clientHeight||i.clientHeight}}static getOffset(t){let e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}}static replaceElementWith(t,e){let n=t.parentNode;if(!n)throw"Can't replace element";return n.replaceChild(e,t)}static getUserAgent(){return navigator.userAgent}static isIE(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>0||(t.indexOf("Trident/")>0?(t.indexOf("rv:"),!0):t.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static appendChild(t,e){if(this.isElement(e))e.appendChild(t);else{if(!e.el||!e.el.nativeElement)throw"Cannot append "+e+" to "+t;e.el.nativeElement.appendChild(t)}}static removeChild(t,e){if(this.isElement(e))e.removeChild(t);else{if(!e.el||!e.el.nativeElement)throw"Cannot remove "+t+" from "+e;e.el.nativeElement.removeChild(t)}}static isElement(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}static calculateScrollbarWidth(t){if(t){let e=getComputedStyle(t);return t.offsetWidth-t.clientWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let t=document.createElement("div");t.className="ui-scrollbar-measure",document.body.appendChild(t);let e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),this.calculatedScrollbarWidth=e,e}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let t=document.createElement("div");t.className="ui-scrollbar-measure",document.body.appendChild(t);let e=t.offsetHeight-t.clientHeight;return document.body.removeChild(t),this.calculatedScrollbarWidth=e,e}static invokeElementMethod(t,e,n){t[e].apply(t,n)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(t){}}static getBrowser(){if(!this.browser){let t=this.resolveUserAgent();this.browser={},t.browser&&(this.browser[t.browser]=!0,this.browser.version=t.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let t=navigator.userAgent.toLowerCase(),e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}}static isInteger(t){return Number.isInteger?Number.isInteger(t):"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}static isHidden(t){return null===t.offsetParent}static getFocusableElements(e){let n=t.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), \n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), \n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), \n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), \n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])'),i=[];for(let t of n)"none"!=getComputedStyle(t).display&&"hidden"!=getComputedStyle(t).visibility&&i.push(t);return i}}return t.zindex=1e3,t.calculatedScrollbarWidth=null,t.calculatedScrollbarHeight=null,t})();const Bw=function(t){return{"ui-helper-hidden":t}};function Vw(t,e){if(1&t&&xa(0,"li",4),2&t){const t=Aa().$implicit;ya("ngClass",Eu(1,Bw,!1===t.visible))}}function Uw(t,e){1&t&&xa(0,"span",14)}function jw(t,e){1&t&&xa(0,"span",15),2&t&&ya("ngClass",Aa(3).$implicit.icon)}const qw=function(t){return{"ui-menuitem-link ui-corner-all":!0,"ui-state-disabled":t}};function Gw(t,e){if(1&t){const t=Ma();va(0,"a",10),Ea("click",(function(e){Ne(t);const n=Aa(2).$implicit;return Aa().itemClick(e,n)})),da(1,Uw,1,0,"span",11),da(2,jw,1,1,"span",12),va(3,"span",13),ds(4),ba(),ba()}if(2&t){Aa();const t=pa(1),e=Aa().$implicit,n=Aa();Ja(e.styleClass),ya("href",e.url||"#",Ti)("ngClass",Eu(14,qw,e.disabled))("ngStyle",e.style),ca("target",e.target)("title",e.title)("id",e.id)("tabindex",e.tabindex?e.tabindex:"0")("aria-haspopup",null!=t.items)("aria-expanded",t===n.activeItem),rr(1),ya("ngIf",e.items),rr(1),ya("ngIf",e.icon),rr(2),ps(e.label)}}function Hw(t,e){1&t&&xa(0,"span",14)}function Zw(t,e){1&t&&xa(0,"span",15),2&t&&ya("ngClass",Aa(3).$implicit.icon)}const Ww=function(){return{exact:!1}};function Kw(t,e){if(1&t){const t=Ma();va(0,"a",16),Ea("click",(function(e){Ne(t);const n=Aa(2).$implicit;return Aa().itemClick(e,n)})),da(1,Hw,1,0,"span",11),da(2,Zw,1,1,"span",12),va(3,"span",13),ds(4),ba(),ba()}if(2&t){const t=Aa(2).$implicit;Ja(t.styleClass),ya("routerLink",t.routerLink)("queryParams",t.queryParams)("routerLinkActive","ui-state-active")("routerLinkActiveOptions",t.routerLinkActiveOptions||ku(15,Ww))("ngClass",Eu(16,qw,t.disabled))("ngStyle",t.style),ca("target",t.target)("title",t.title)("id",t.id)("tabindex",t.tabindex?t.tabindex:"0"),rr(1),ya("ngIf",t.items),rr(1),ya("ngIf",t.icon),rr(2),ps(t.label)}}function Xw(t,e){if(1&t&&xa(0,"p-contextMenuSub",17),2&t){Aa();const t=pa(1),e=Aa().$implicit;ya("parentActive",t==Aa().activeItem)("item",e)}}const $w=function(t,e){return{"ui-menuitem ui-corner-all":!0,"ui-menuitem-active":t,"ui-helper-hidden":e}};function Yw(t,e){if(1&t){const t=Ma();va(0,"li",5,6),Ea("mouseenter",(function(e){Ne(t);const n=pa(1),i=Aa().$implicit;return Aa().onItemMouseEnter(e,n,i)})),da(2,Gw,5,16,"a",7),da(3,Kw,5,18,"a",8),da(4,Xw,1,2,"p-contextMenuSub",9),ba()}if(2&t){const t=pa(1),e=Aa().$implicit,n=Aa();ya("ngClass",Su(4,$w,t==n.activeItem,!1===e.visible)),rr(2),ya("ngIf",!e.routerLink),rr(1),ya("ngIf",e.routerLink),rr(1),ya("ngIf",e.items)}}function Qw(t,e){if(1&t&&(da(0,Vw,1,3,"li",2),da(1,Yw,5,7,"li",3)),2&t){const t=e.$implicit;ya("ngIf",t.separator),rr(1),ya("ngIf",!t.separator)}}const Jw=function(t){return{"ui-widget-content ui-corner-all ui-submenu-list ui-shadow":t}},tC=["container"];let eC=(()=>{let t=class{constructor(t){this.contextMenu=t}get parentActive(){return this._parentActive}set parentActive(t){this._parentActive=t,t||(this.activeItem=null)}onItemMouseEnter(t,e,n){if(this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null),this.activeItem=e,n.disabled)return;let i=e.children[0].nextElementSibling;if(i){let t=i.children[0];t.style.zIndex=++Nw.zindex,this.position(t,e)}}itemClick(t,e){e.disabled?t.preventDefault():(e.url||t.preventDefault(),e.command&&e.command({originalEvent:t,item:e}))}listClick(t){this.activeItem=null}position(t,e){this.containerOffset=Nw.getOffset(e.parentElement);let n=Nw.getViewport(),i=t.offsetParent?t.offsetWidth:Nw.getHiddenElementOuterWidth(t),r=Nw.getOuterWidth(e.children[0]),o=Nw.getOuterHeight(e.children[0]),a=t.offsetHeight?t.offsetHeight:Nw.getHiddenElementOuterHeight(t);parseInt(this.containerOffset.top)+o+a>n.height-Nw.calculateScrollbarHeight()?t.style.bottom="0px":t.style.top="0px",t.style.left=parseInt(this.containerOffset.left)+r+i>n.width-Nw.calculateScrollbarWidth()?-i+"px":r+"px"}};return t.\u0275fac=function(e){return new(e||t)(fa(Ot(()=>nC)))},t.\u0275cmp=me({type:t,selectors:[["p-contextMenuSub"]],inputs:{parentActive:"parentActive",item:"item",root:"root"},decls:2,vars:4,consts:[[1,"ui-menu-list",3,"ngClass","click"],["ngFor","",3,"ngForOf"],["class","ui-menu-separator ui-widget-content","role","separator",3,"ngClass",4,"ngIf"],["role","none",3,"ngClass","mouseenter",4,"ngIf"],["role","separator",1,"ui-menu-separator","ui-widget-content",3,"ngClass"],["role","none",3,"ngClass","mouseenter"],["item",""],[3,"href","ngClass","ngStyle","class","click",4,"ngIf"],["role","menuitem",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","ngClass","ngStyle","class","click",4,"ngIf"],["class","ui-submenu",3,"parentActive","item",4,"ngIf"],[3,"href","ngClass","ngStyle","click"],["class","ui-submenu-icon pi pi-fw pi-caret-right",4,"ngIf"],["class","ui-menuitem-icon",3,"ngClass",4,"ngIf"],[1,"ui-menuitem-text"],[1,"ui-submenu-icon","pi","pi-fw","pi-caret-right"],[1,"ui-menuitem-icon",3,"ngClass"],["role","menuitem",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","ngClass","ngStyle","click"],[1,"ui-submenu",3,"parentActive","item"]],template:function(t,e){1&t&&(va(0,"ul",0),Ea("click",(function(t){return e.listClick(t)})),da(1,Qw,2,2,"ng-template",1),ba()),2&t&&(ya("ngClass",Eu(2,Jw,!e.root)),rr(1),ya("ngForOf",e.root?e.item:e.item.items))},directives:[Ic,Rc,Lc,Bc,iy,oy,t],encapsulation:2}),t})(),nC=(()=>{let t=class{constructor(t,e,n){this.el=t,this.renderer=e,this.zone=n,this.autoZIndex=!0,this.baseZIndex=0,this.triggerEvent="contextmenu",this.onShow=new Vu,this.onHide=new Vu}ngAfterViewInit(){this.global?this.triggerEventListener=this.renderer.listen("document",this.triggerEvent,t=>{this.show(t),t.preventDefault()}):this.target&&(this.triggerEventListener=this.renderer.listen(this.target,this.triggerEvent,t=>{this.show(t),t.preventDefault(),t.stopPropagation()})),this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.containerViewChild.nativeElement):Nw.appendChild(this.containerViewChild.nativeElement,this.appendTo))}show(t){this.position(t),this.moveOnTop(),this.containerViewChild.nativeElement.style.display="block",this.parentActive=!0,Nw.fadeIn(this.containerViewChild.nativeElement,250),this.bindGlobalListeners(),t&&t.preventDefault(),this.onShow.emit()}hide(){this.containerViewChild.nativeElement.style.display="none",this.parentActive=!1,this.unbindGlobalListeners(),this.onHide.emit()}moveOnTop(){this.autoZIndex&&(this.containerViewChild.nativeElement.style.zIndex=String(this.baseZIndex+ ++Nw.zindex))}toggle(t){this.containerViewChild.nativeElement.offsetParent?this.hide():this.show(t)}position(t){if(t){let e=t.pageX+1,n=t.pageY+1,i=this.containerViewChild.nativeElement.offsetParent?this.containerViewChild.nativeElement.offsetWidth:Nw.getHiddenElementOuterWidth(this.containerViewChild.nativeElement),r=this.containerViewChild.nativeElement.offsetParent?this.containerViewChild.nativeElement.offsetHeight:Nw.getHiddenElementOuterHeight(this.containerViewChild.nativeElement),o=Nw.getViewport();e+i-document.body.scrollLeft>o.width&&(e-=i),n+r-document.body.scrollTop>o.height&&(n-=r),e<document.body.scrollLeft&&(e=document.body.scrollLeft),n<document.body.scrollTop&&(n=document.body.scrollTop),this.containerViewChild.nativeElement.style.left=e+"px",this.containerViewChild.nativeElement.style.top=n+"px"}}bindGlobalListeners(){this.documentClickListener||(this.documentClickListener=this.renderer.listen("document","click",t=>{this.containerViewChild.nativeElement.offsetParent&&2!==t.button&&this.hide()})),this.zone.runOutsideAngular(()=>{this.windowResizeListener||(this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener))})}unbindGlobalListeners(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null),this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),this.windowResizeListener=null)}onWindowResize(t){this.containerViewChild.nativeElement.offsetParent&&this.hide()}ngOnDestroy(){this.unbindGlobalListeners(),this.triggerEventListener&&this.triggerEventListener(),this.appendTo&&this.el.nativeElement.appendChild(this.containerViewChild.nativeElement)}};return t.\u0275fac=function(e){return new(e||t)(fa(zs),fa(Us),fa(Il))},t.\u0275cmp=me({type:t,selectors:[["p-contextMenu"]],viewQuery:function(t,e){var n;1&t&&Qu(tC,!0),2&t&&Yu(n=rl())&&(e.containerViewChild=n.first)},inputs:{autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",triggerEvent:"triggerEvent",model:"model",global:"global",target:"target",style:"style",styleClass:"styleClass",appendTo:"appendTo"},outputs:{onShow:"onShow",onHide:"onHide"},decls:3,vars:6,consts:[[3,"ngClass","ngStyle"],["container",""],["root","root",3,"item","parentActive"]],template:function(t,e){1&t&&(va(0,"div",0,1),xa(2,"p-contextMenuSub",2),ba()),2&t&&(Ja(e.styleClass),ya("ngClass","ui-contextmenu ui-widget ui-widget-content ui-corner-all ui-shadow")("ngStyle",e.style),rr(2),ya("item",e.model)("parentActive",e.parentActive))},directives:[Ic,Bc,eC],encapsulation:2}),t})(),iC=(()=>{let t=class{};return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},imports:[[Hc,_y],_y]}),t})();const rC=["container"],oC=function(){return{"ui-sidebar-close ui-corner-all":!0}};function aC(t,e){if(1&t){const t=Ma();va(0,"a",3),Ea("click",(function(e){return Ne(t),Aa().close(e)}))("keydown.enter",(function(e){return Ne(t),Aa().close(e)})),xa(1,"span",4),ba()}if(2&t){const t=Aa();ya("ngClass",ku(2,oC)),ca("aria-label",t.ariaCloseLabel)}}const sC=function(t,e,n,i,r,o){return{"ui-sidebar ui-widget ui-widget-content ui-shadow":!0,"ui-sidebar-active":t,"ui-sidebar-left":e,"ui-sidebar-right":n,"ui-sidebar-top":i,"ui-sidebar-bottom":r,"ui-sidebar-full":o}},uC=["*"];let lC=(()=>{let t=class{constructor(t,e){this.el=t,this.renderer=e,this.position="left",this.blockScroll=!1,this.autoZIndex=!0,this.baseZIndex=0,this.modal=!0,this.dismissible=!0,this.showCloseIcon=!0,this.closeOnEscape=!0,this.onShow=new Vu,this.onHide=new Vu,this.visibleChange=new Vu}ngAfterViewInit(){this.initialized=!0,this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.containerViewChild.nativeElement):Nw.appendChild(this.containerViewChild.nativeElement,this.appendTo)),this.visible&&this.show()}get visible(){return this._visible}set visible(t){this._visible=t,this.initialized&&this.containerViewChild&&this.containerViewChild.nativeElement&&(this._visible?this.show():this.preventVisibleChangePropagation?this.preventVisibleChangePropagation=!1:this.hide())}ngAfterViewChecked(){this.executePostDisplayActions&&(this.onShow.emit({}),this.executePostDisplayActions=!1)}show(){this.executePostDisplayActions=!0,this.autoZIndex&&(this.containerViewChild.nativeElement.style.zIndex=String(this.baseZIndex+ ++Nw.zindex)),this.modal&&this.enableModality()}hide(){this.onHide.emit({}),this.modal&&this.disableModality()}close(t){this.preventVisibleChangePropagation=!0,this.hide(),this.visibleChange.emit(!1),t.preventDefault()}enableModality(){this.mask||(this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(this.containerViewChild.nativeElement.style.zIndex)-1),Nw.addMultipleClasses(this.mask,"ui-widget-overlay ui-sidebar-mask"),this.dismissible&&(this.maskClickListener=this.renderer.listen(this.mask,"click",t=>{this.dismissible&&this.close(t)})),document.body.appendChild(this.mask),this.blockScroll&&Nw.addClass(document.body,"ui-overflow-hidden"))}disableModality(){this.mask&&(this.unbindMaskClickListener(),document.body.removeChild(this.mask),this.blockScroll&&Nw.removeClass(document.body,"ui-overflow-hidden"),this.mask=null)}onAnimationStart(t){switch(t.toState){case"visible":this.closeOnEscape&&this.bindDocumentEscapeListener();break;case"hidden":this.unbindGlobalListeners()}}bindDocumentEscapeListener(){this.documentEscapeListener=this.renderer.listen("document","keydown",t=>{27==t.which&&parseInt(this.containerViewChild.nativeElement.style.zIndex)===Nw.zindex+this.baseZIndex&&this.close(t)})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindGlobalListeners(){this.unbindMaskClickListener(),this.unbindDocumentEscapeListener()}ngOnDestroy(){this.initialized=!1,this.visible&&this.hide(),this.appendTo&&this.el.nativeElement.appendChild(this.containerViewChild.nativeElement),this.unbindGlobalListeners()}};return t.\u0275fac=function(e){return new(e||t)(fa(zs),fa(Us))},t.\u0275cmp=me({type:t,selectors:[["p-sidebar"]],viewQuery:function(t,e){var n;1&t&&Qu(rC,!0),2&t&&Yu(n=rl())&&(e.containerViewChild=n.first)},inputs:{position:"position",blockScroll:"blockScroll",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",modal:"modal",dismissible:"dismissible",showCloseIcon:"showCloseIcon",closeOnEscape:"closeOnEscape",visible:"visible",fullScreen:"fullScreen",appendTo:"appendTo",style:"style",styleClass:"styleClass",ariaCloseLabel:"ariaCloseLabel"},outputs:{onShow:"onShow",onHide:"onHide",visibleChange:"visibleChange"},ngContentSelectors:uC,decls:4,vars:14,consts:[["role","complementary",3,"ngClass","ngStyle"],["container",""],["tabindex","0","role","button",3,"ngClass","click","keydown.enter",4,"ngIf"],["tabindex","0","role","button",3,"ngClass","click","keydown.enter"],[1,"pi","pi-times"]],template:function(t,e){1&t&&(Da(),va(0,"div",0,1),Ea("@panelState.start",(function(t){return e.onAnimationStart(t)})),da(2,aC,2,3,"a",2),Ra(3),ba()),2&t&&(Ja(e.styleClass),ya("ngClass",Du(7,sC,e.visible,"left"===e.position,"right"===e.position,"top"===e.position,"bottom"===e.position,e.fullScreen))("@panelState",e.visible?"visible":"hidden")("ngStyle",e.style),ca("aria-modal",e.modal),rr(2),ya("ngIf",e.showCloseIcon))},directives:[Ic,Bc,Lc],encapsulation:2,data:{animation:[Oh("panelState",[Th("hidden",Sh({opacity:0})),Th("visible",Sh({opacity:1})),Ah("visible => hidden",kh("300ms ease-in")),Ah("hidden => visible",kh("300ms ease-out"))])]}}),t})(),cC=(()=>{let t=class{};return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},imports:[[Hc]]}),t})();const hC=["*"];var dC=function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a};let pC=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=me({type:t,selectors:[["p-header"]],ngContentSelectors:hC,decls:1,vars:0,template:function(t,e){1&t&&(Da(),Ra(0))},encapsulation:2}),t})(),fC=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=me({type:t,selectors:[["p-footer"]],ngContentSelectors:hC,decls:1,vars:0,template:function(t,e){1&t&&(Da(),Ra(0))},encapsulation:2}),t})(),gC=(()=>{let t=class{constructor(t){this.template=t}getType(){return this.name}};return t.\u0275fac=function(e){return new(e||t)(fa(su))},t.\u0275dir=we({type:t,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),dC([ll()],t.prototype,"type",void 0),dC([ll("pTemplate")],t.prototype,"name",void 0),t})(),mC=(()=>{let t=class{};return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},imports:[[Hc]]}),t})();function yC(t,e){1&t&&(va(0,"div",7),Ra(1,1),ba())}function _C(t,e){if(1&t&&(va(0,"div",8),ds(1),ba()),2&t){const t=Aa();rr(1),ps(t.header)}}function vC(t,e){if(1&t&&(va(0,"div",9),ds(1),ba()),2&t){const t=Aa();rr(1),ps(t.subheader)}}function bC(t,e){1&t&&(va(0,"div",10),Ra(1,2),ba())}const xC=["*",[["p-header"]],[["p-footer"]]],wC=["*","p-header","p-footer"];let CC=(()=>{let t=class{constructor(t){this.el=t}getBlockableElement(){return this.el.nativeElement.children[0]}};return t.\u0275fac=function(e){return new(e||t)(fa(zs))},t.\u0275cmp=me({type:t,selectors:[["p-card"]],contentQueries:function(t,e,n){var i;1&t&&(nl(n,pC,!0),nl(n,fC,!0)),2&t&&(Yu(i=rl())&&(e.headerFacet=i.first),Yu(i=rl())&&(e.footerFacet=i.first))},inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},ngContentSelectors:wC,decls:8,vars:8,consts:[[3,"ngClass","ngStyle"],["class","ui-card-header",4,"ngIf"],[1,"ui-card-body"],["class","ui-card-title",4,"ngIf"],["class","ui-card-subtitle",4,"ngIf"],[1,"ui-card-content"],["class","ui-card-footer",4,"ngIf"],[1,"ui-card-header"],[1,"ui-card-title"],[1,"ui-card-subtitle"],[1,"ui-card-footer"]],template:function(t,e){1&t&&(Da(xC),va(0,"div",0),da(1,yC,2,0,"div",1),va(2,"div",2),da(3,_C,2,1,"div",3),da(4,vC,2,1,"div",4),va(5,"div",5),Ra(6),ba(),da(7,bC,2,0,"div",6),ba(),ba()),2&t&&(Ja(e.styleClass),ya("ngClass","ui-card ui-widget ui-widget-content ui-corner-all")("ngStyle",e.style),rr(1),ya("ngIf",e.headerFacet),rr(2),ya("ngIf",e.header),rr(1),ya("ngIf",e.subheader),rr(3),ya("ngIf",e.footerFacet))},directives:[Ic,Bc,Lc],encapsulation:2}),t})(),PC=(()=>{let t=class{};return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},imports:[[Hc],mC]}),t})();function MC(t,e){return new b(n=>{const i=t.length;if(0===i)return void n.complete();const r=new Array(i);let o=0,a=0;for(let s=0;s<i;s++){const u=U(t[s]);let l=!1;n.add(u.subscribe({next:t=>{l||(l=!0,a++),r[s]=t},error:t=>n.error(t),complete:()=>{o++,o!==i&&l||(a===i&&n.next(e?e.reduce((t,e,n)=>(t[e]=r[n],t),{}):r),n.complete())}}))}})}const OC=new Ut("NgValueAccessor"),kC={provide:OC,useExisting:Ot(()=>EC),multi:!0};let EC=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(fa(Us),fa(zs))},t.\u0275dir=we({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&Ea("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[Ds([kC])]}),t})();const SC={provide:OC,useExisting:Ot(()=>AC),multi:!0},TC=new Ut("CompositionEventMode");let AC=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=lc()?lc().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(fa(Us),fa(zs),fa(TC,8))},t.\u0275dir=we({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&Ea("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[Ds([SC])]}),t})(),IC=(()=>{class t{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=we({type:t}),t})(),DC=(()=>{class t extends IC{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return RC(e||t)},t.\u0275dir=we({type:t,features:[ys]}),t})();const RC=Kn(DC);function FC(){throw new Error("unimplemented")}class LC extends IC{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return FC()}get asyncValidator(){return FC()}}let zC=(()=>{class t extends class{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(fa(LC,2))},t.\u0275dir=we({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&Ya("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[ys]}),t})();function NC(t){return null==t||0===t.length}const BC=new Ut("NgValidators"),VC=new Ut("NgAsyncValidators"),UC=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class jC{static min(t){return e=>{if(NC(e.value)||NC(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(NC(e.value)||NC(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return NC(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return NC(t.value)||UC.test(t.value)?null:{email:!0}}static minLength(t){return e=>{if(NC(e.value))return null;const n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}static maxLength(t){return e=>{const n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}static pattern(t){if(!t)return jC.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(NC(t.value))return null;const i=t.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(qC);return 0==e.length?null:function(t){return HC(function(t,e){return e.map(e=>e(t))}(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(qC);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(u(e))return MC(e,null);if(l(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return MC(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return MC(t=1===t.length&&u(t[0])?t[0]:t,null).pipe(z(t=>e(...t)))}return MC(t,null)}(function(t,e){return e.map(e=>e(t))}(t,e).map(GC)).pipe(z(HC))}}}function qC(t){return null!=t}function GC(t){const e=Oa(t)?U(t):t;if(!ka(e))throw new Error("Expected validator to return Promise or Observable.");return e}function HC(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function ZC(t){return t.validate?e=>t.validate(e):t}function WC(t){return t.validate?e=>t.validate(e):t}const KC={provide:OC,useExisting:Ot(()=>XC),multi:!0};let XC=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(fa(Us),fa(zs))},t.\u0275dir=we({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&Ea("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[Ds([KC])]}),t})();const $C={provide:OC,useExisting:Ot(()=>QC),multi:!0};let YC=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),QC=(()=>{class t{constructor(t,e,n,i){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=i,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(LC),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}return t.\u0275fac=function(e){return new(e||t)(fa(Us),fa(zs),fa(YC),fa(Wo))},t.\u0275dir=we({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&Ea("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Ds([$C])]}),t})();const JC={provide:OC,useExisting:Ot(()=>tP),multi:!0};let tP=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(fa(Us),fa(zs))},t.\u0275dir=we({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&Ea("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[Ds([JC])]}),t})();const eP='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',nP='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',iP={provide:OC,useExisting:Ot(()=>rP),multi:!0};let rP=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=ea}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(fa(Us),fa(zs))},t.\u0275dir=we({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&Ea("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Ds([iP])]}),t})();const oP={provide:OC,useExisting:Ot(()=>aP),multi:!0};let aP=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=ea}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(e.hasOwnProperty("selectedOptions")){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const i=t.item(e),r=this._getOptionValue(i.value);n.push(r)}}else{const t=e.options;for(let e=0;e<t.length;e++){const i=t.item(e);if(i.selected){const t=this._getOptionValue(i.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(fa(Us),fa(zs))},t.\u0275dir=we({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&Ea("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Ds([oP])]}),t})();function sP(t,e){return[...e.path,t]}function uP(t,e){t||cP(e,"Cannot find control with"),e.valueAccessor||cP(e,"No value accessor for form control with"),t.validator=jC.compose([t.validator,e.validator]),t.asyncValidator=jC.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&lP(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&lP(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function lP(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function cP(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function hP(t){return null!=t?jC.compose(t.map(ZC)):null}function dP(t){return null!=t?jC.composeAsync(t.map(WC)):null}const pP=[EC,tP,XC,rP,aP,QC];function fP(t){const e=mP(t)?t.validators:t;return Array.isArray(e)?hP(e):e||null}function gP(t,e){const n=mP(e)?e.asyncValidators:t;return Array.isArray(n)?dP(n):n||null}function mP(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class yP{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=fP(t)}setAsyncValidators(t){this.asyncValidator=gP(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status="PENDING";const e=GC(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let i=t;return e.forEach(t=>{i=i instanceof vP?i.controls.hasOwnProperty(t)?i.controls[t]:null:i instanceof bP&&i.at(t)||null}),i}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Vu,this.statusChanges=new Vu}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){mP(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class _P extends yP{constructor(t=null,e,n){super(fP(e),gP(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class vP extends yP{constructor(t,e,n){super(fP(e),gP(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof _P?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){let e=!1;return this._forEachChild((n,i)=>{e=e||this.contains(i)&&t(n)}),e}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,i)=>{n=e(n,t,i)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class bP extends yP{constructor(t,e,n){super(fP(e),gP(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof _P?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const xP={provide:DC,useExisting:Ot(()=>CP)},wP=(()=>Promise.resolve(null))();let CP=(()=>{class t extends DC{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Vu,this.form=new vP({},hP(t),dP(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){wP.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),uP(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){wP.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),function(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this._directives,t)})}addFormGroup(t){wP.then(()=>{const e=this._findContainer(t.path),n=new vP({});(function(t,e){null==t&&cP(e,"Cannot find control with"),t.validator=jC.compose([t.validator,e.validator]),t.asyncValidator=jC.composeAsync([t.asyncValidator,e.asyncValidator])})(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){wP.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){wP.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(fa(BC,10),fa(VC,10))},t.\u0275dir=we({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&Ea("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ds([xP]),ys]}),t})(),PP=(()=>{class t extends DC{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return sP(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return hP(this._validators)}get asyncValidator(){return dP(this._asyncValidators)}_checkParentType(){}}return t.\u0275fac=function(e){return MP(e||t)},t.\u0275dir=we({type:t,features:[ys]}),t})();const MP=Kn(PP);class OP{static modelParentException(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      \n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${eP}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${nP}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${eP}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${nP}`)}}const kP={provide:DC,useExisting:Ot(()=>EP)};let EP=(()=>{class t extends PP{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){this._parent instanceof t||this._parent instanceof CP||OP.modelGroupParentException()}}return t.\u0275fac=function(e){return new(e||t)(fa(DC,5),fa(BC,10),fa(VC,10))},t.\u0275dir=we({type:t,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[Ds([kP]),ys]}),t})();const SP={provide:LC,useExisting:Ot(()=>AP)},TP=(()=>Promise.resolve(null))();let AP=(()=>{class t extends LC{constructor(t,e,n,i){super(),this.control=new _P,this._registered=!1,this.update=new Vu,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e)||cP(t,"Value accessor was not provided as an array for form control with");let n=void 0,i=void 0,r=void 0;return e.forEach(e=>{var o;e.constructor===AC?n=e:(o=e,pP.some(t=>o.constructor===t)?(i&&cP(t,"More than one built-in value accessor matches form control with"),i=e):(r&&cP(t,"More than one custom value accessor matches form control with"),r=e))}),r||i||n||(cP(t,"No valid value accessor for form control with"),null)}(this,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!ea(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?sP(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return hP(this._rawValidators)}get asyncValidator(){return dP(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){uP(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof EP)&&this._parent instanceof PP?OP.formGroupNameException():this._parent instanceof EP||this._parent instanceof CP||OP.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||OP.missingNameException()}_updateValue(t){TP.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;TP.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(fa(DC,9),fa(BC,10),fa(VC,10),fa(OC,10))},t.\u0275dir=we({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ds([SP]),ys,Cs]}),t})(),IP=(()=>{class t{}return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)}}),t})(),DP=(()=>{class t{}return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},providers:[YC],imports:[IP]}),t})();const RP=function(t,e){return{"ui-clickable":!0,"ui-button-icon-left":t,"ui-button-icon-right":e}};function FP(t,e){if(1&t&&xa(0,"span",3),2&t){const t=Aa();Ja(t.icon),ya("ngClass",Su(3,RP,"left"===t.iconPos,"right"===t.iconPos))}}const LP=function(t,e,n,i,r,o){return{"ui-button ui-widget ui-state-default ui-corner-all":!0,"ui-button-icon-only":t,"ui-button-text-icon-left":e,"ui-button-text-icon-right":n,"ui-button-text-only":i,"ui-button-text-empty":r,"ui-state-disabled":o}},zP=["*"];let NP=(()=>{let t=class{constructor(){this.iconPos="left",this.onClick=new Vu,this.onFocus=new Vu,this.onBlur=new Vu}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=me({type:t,selectors:[["p-button"]],inputs:{iconPos:"iconPos",type:"type",icon:"icon",label:"label",disabled:"disabled",style:"style",styleClass:"styleClass"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},ngContentSelectors:zP,decls:5,vars:15,consts:[[3,"ngStyle","disabled","ngClass","click","focus","blur"],[3,"ngClass","class",4,"ngIf"],[1,"ui-button-text","ui-clickable"],[3,"ngClass"]],template:function(t,e){1&t&&(Da(),va(0,"button",0),Ea("click",(function(t){return e.onClick.emit(t)}))("focus",(function(t){return e.onFocus.emit(t)}))("blur",(function(t){return e.onBlur.emit(t)})),Ra(1),da(2,FP,1,6,"span",1),va(3,"span",2),ds(4),ba(),ba()),2&t&&(Ja(e.styleClass),ya("ngStyle",e.style)("disabled",e.disabled)("ngClass",Du(8,LP,e.icon&&!e.label,e.icon&&e.label&&"left"===e.iconPos,e.icon&&e.label&&"right"===e.iconPos,!e.icon&&e.label,!e.icon&&!e.label,e.disabled)),ca("type",e.type),rr(2),ya("ngIf",e.icon),rr(2),ps(e.label||"ui-btn"))},directives:[Bc,Ic,Lc],encapsulation:2}),t})(),BP=(()=>{let t=class{};return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},imports:[[Hc]]}),t})();function VP(t,e){1&t&&Pa(0)}function UP(t,e){if(1&t){const t=Ma();wa(0),va(1,"a",6),Ea("click",(function(e){return Ne(t),Aa().toggle(e)}))("keydown.enter",(function(e){return Ne(t),Aa().toggle(e)})),da(2,VP,1,0,"ng-container",7),ba(),Ca()}if(2&t){const t=Aa(),e=pa(4);rr(1),ca("aria-controls",t.id+"-content")("aria-expanded",!t.collapsed),rr(1),ya("ngTemplateOutlet",e)}}const jP=function(t,e){return{"pi-minus":t,"pi-plus":e}};function qP(t,e){if(1&t&&xa(0,"span",10),2&t){const t=Aa(2);ya("ngClass",Su(1,jP,!t.collapsed,t.collapsed))}}function GP(t,e){if(1&t&&(da(0,qP,1,4,"span",8),va(1,"span",9),ds(2),ba(),Ra(3,1)),2&t){const t=Aa();ya("ngIf",t.toggleable),rr(2),ps(t.legend)}}const HP=["*",[["p-header"]]],ZP=function(t){return{"ui-fieldset ui-widget ui-widget-content ui-corner-all":!0,"ui-fieldset-toggleable":t}},WP=function(t){return{transitionParams:t,height:"0"}},KP=function(t){return{value:"hidden",params:t}},XP=function(t){return{transitionParams:t,height:"*"}},$P=function(t){return{value:"visible",params:t}},YP=function(t){return{"ui-fieldset-content-wrapper-overflown":t}},QP=["*","p-header"];let JP=0,tM=(()=>{let t=class{constructor(t){this.el=t,this.collapsed=!1,this.collapsedChange=new Vu,this.onBeforeToggle=new Vu,this.onAfterToggle=new Vu,this.transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)",this.id=`ui-fieldset-${JP++}`}toggle(t){if(this.animating)return!1;this.animating=!0,this.onBeforeToggle.emit({originalEvent:t,collapsed:this.collapsed}),this.collapsed?this.expand(t):this.collapse(t),this.onAfterToggle.emit({originalEvent:t,collapsed:this.collapsed}),t.preventDefault()}expand(t){this.collapsed=!1,this.collapsedChange.emit(this.collapsed)}collapse(t){this.collapsed=!0,this.collapsedChange.emit(this.collapsed)}getBlockableElement(){return this.el.nativeElement.children[0]}onToggleDone(t){this.animating=!1}};return t.\u0275fac=function(e){return new(e||t)(fa(zs))},t.\u0275cmp=me({type:t,selectors:[["p-fieldset"]],inputs:{collapsed:"collapsed",transitionOptions:"transitionOptions",legend:"legend",toggleable:"toggleable",style:"style",styleClass:"styleClass"},outputs:{collapsedChange:"collapsedChange",onBeforeToggle:"onBeforeToggle",onAfterToggle:"onAfterToggle"},ngContentSelectors:QP,decls:8,vars:24,consts:[[3,"ngClass","ngStyle"],[1,"ui-fieldset-legend","ui-corner-all","ui-state-default","ui-unselectable-text"],[4,"ngIf","ngIfElse"],["legendContent",""],["role","region",1,"ui-fieldset-content-wrapper",3,"ngClass"],[1,"ui-fieldset-content"],["tabindex","0",3,"click","keydown.enter"],[4,"ngTemplateOutlet"],["class","ui-fieldset-toggler pi",3,"ngClass",4,"ngIf"],[1,"ui-fieldset-legend-text"],[1,"ui-fieldset-toggler","pi",3,"ngClass"]],template:function(t,e){if(1&t&&(Da(HP),va(0,"fieldset",0),va(1,"legend",1),da(2,UP,3,3,"ng-container",2),da(3,GP,4,2,"ng-template",null,3,ul),ba(),va(5,"div",4),Ea("@fieldsetContent.done",(function(t){return e.onToggleDone(t)})),va(6,"div",5),Ra(7),ba(),ba(),ba()),2&t){const t=pa(4);Ja(e.styleClass),ya("ngClass",Eu(12,ZP,e.toggleable))("ngStyle",e.style),ca("id",e.id),rr(2),ya("ngIf",e.toggleable)("ngIfElse",t),rr(3),ya("@fieldsetContent",e.collapsed?Eu(16,KP,Eu(14,WP,e.transitionOptions)):Eu(20,$P,Eu(18,XP,e.animating?e.transitionOptions:"0ms")))("ngClass",Eu(22,YP,e.collapsed||e.animating)),ca("id",e.id+"-content")("aria-labelledby",e.id)("aria-hidden",e.collapsed)}},directives:[Ic,Bc,Lc,Vc],encapsulation:2,data:{animation:[Oh("fieldsetContent",[Th("hidden",Sh({height:"0"})),Th("void",Sh({height:"{{height}}"}),{params:{height:"0"}}),Th("visible",Sh({height:"*"})),Ah("visible => hidden",kh("{{transitionParams}}")),Ah("hidden => visible",kh("{{transitionParams}}")),Ah("void => hidden",kh("{{transitionParams}}")),Ah("void => visible",kh("{{transitionParams}}"))])]}}),t})(),eM=(()=>{let t=class{};return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},imports:[[Hc],mC]}),t})();function nM(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function iM(t,e,n,r){return i(n)&&(r=n,n=void 0),r?iM(t,e,n).pipe(z(t=>u(t)?r(...t):r(t))):new b(i=>{!function t(e,n,i,r,o){let a;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){const t=e;e.addEventListener(n,i,o),a=()=>t.removeEventListener(n,i,o)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){const t=e;e.on(n,i),a=()=>t.off(n,i)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){const t=e;e.addListener(n,i),a=()=>t.removeListener(n,i)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let a=0,s=e.length;a<s;a++)t(e[a],n,i,r,o)}r.add(a)}(t,e,(function(t){i.next(arguments.length>1?Array.prototype.slice.call(arguments):t)}),i,n)})}class rM extends h{constructor(t,e){super()}schedule(t,e=0){return this}}class oM extends rM{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(i,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,i=void 0;try{this.work(t)}catch(r){n=!0,i=!!r&&r||new Error(r)}if(n)return this.unsubscribe(),i}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}class aM extends oM{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(()=>t.flush(null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)}}let sM=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class uM extends sM{constructor(t,e=sM.now){super(t,()=>uM.delegate&&uM.delegate!==this?uM.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return uM.delegate&&uM.delegate!==this?uM.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}class lM extends uM{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,i=-1,r=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++i<r&&(t=e.shift()));if(this.active=!1,n){for(;++i<r&&(t=e.shift());)t.unsubscribe();throw n}}}const cM=new lM(aM);let hM=1;const dM=(()=>Promise.resolve())(),pM={};function fM(t){return t in pM&&(delete pM[t],!0)}const gM={setImmediate(t){const e=hM++;return pM[e]=!0,dM.then(()=>fM(e)&&t()),e},clearImmediate(t){fM(t)}};class mM extends oM{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=gM.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(gM.clearImmediate(e),t.scheduled=void 0)}}class yM extends uM{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,i=-1,r=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++i<r&&(t=e.shift()));if(this.active=!1,n){for(;++i<r&&(t=e.shift());)t.unsubscribe();throw n}}}const _M=new yM(mM);function vM(t){return!!t&&(t instanceof b||"function"==typeof t.lift&&"function"==typeof t.subscribe)}class bM{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new xM(t,this.compare,this.keySelector))}}class xM extends f{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(i){return this.destination.error(i)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}const wM=new uM(oM);class CM{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new PM(t,this.durationSelector))}}class PM extends L{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const i=F(this,n);!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))}notifyNext(t,e,n,i){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function MM(t){return!u(t)&&t-parseFloat(t)+1>=0}function OM(t){const{index:e,period:n,subscriber:i}=t;if(i.next(e),!i.closed){if(-1===n)return i.complete();t.index=e+1,this.schedule(t,n)}}function kM(t,e=wM){return n=()=>function(t=0,e,n){let i=-1;return MM(e)?i=Number(e)<1?1:Number(e):k(e)&&(n=e),k(n)||(n=wM),new b(e=>{const r=MM(t)?t:+t-n.now();return n.schedule(OM,r,{index:0,period:i,subscriber:e})})}(t,e),function(t){return t.lift(new CM(n))};var n}function EM(t){return e=>e.lift(new SM(t))}class SM{constructor(t){this.notifier=t}call(t,e){const n=new TM(t),i=F(n,this.notifier);return i&&!n.seenValue?(n.add(i),e.subscribe(n)):n}}class TM extends L{constructor(t){super(t),this.seenValue=!1}notifyNext(t,e,n,i,r){this.seenValue=!0,this.complete()}notifyComplete(){}}class AM{call(t,e){return e.subscribe(new IM(t))}}class IM extends f{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}class DM extends oM{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}class RM extends uM{}const FM=new RM(DM);let LM,zM=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Hp(this.value);case"E":return t=this.error,new b(e=>e.error(t));case"C":return Qp()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();class NM extends f{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(NM.dispatch,this.delay,new BM(t,this.destination)))}_next(t){this.scheduleMessage(zM.createNext(t))}_error(t){this.scheduleMessage(zM.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(zM.createComplete()),this.unsubscribe()}}class BM{constructor(t,e){this.notification=t,this.destination=e}}class VM extends M{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift(),super.next(t)}nextTimeWindow(t){this._events.push(new UM(this._getNow(),t)),this._trimBufferThenGetEvents(),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,r=n.length;let o;if(this.closed)throw new w;if(this.isStopped||this.hasError?o=h.EMPTY:(this.observers.push(t),o=new C(this,t)),i&&t.add(t=new NM(t,i)),e)for(let a=0;a<r&&!t.closed;a++)t.next(n[a]);else for(let a=0;a<r&&!t.closed;a++)t.next(n[a].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||FM).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,i=this._events,r=i.length;let o=0;for(;o<r&&!(t-i[o].time<n);)o++;return r>e&&(o=Math.max(o,r-e)),o>0&&i.splice(0,o),i}}class UM{constructor(t,e){this.time=t,this.value=e}}try{LM="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(fS){LM=!1}let jM,qM=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!LM)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(Yt(ml,8))},t.\u0275prov=pt({factory:function(){return new t(Yt(ml,8))},token:t,providedIn:"root"}),t})(),GM=(()=>{class t{}return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)}}),t})();function HM(){if("object"!=typeof document||!document)return 0;if(null==jM){const t=document.createElement("div"),e=t.style;t.dir="rtl",e.height="1px",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const n=document.createElement("div"),i=n.style;i.width="2px",i.height="1px",t.appendChild(n),document.body.appendChild(t),jM=0,0===t.scrollLeft&&(t.scrollLeft=1,jM=0===t.scrollLeft?1:2),t.parentNode.removeChild(t)}return jM}const ZM=new Ut("cdk-dir-doc",{providedIn:"root",factory:function(){return Qt(cc)}});let WM=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new Vu,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(Yt(ZM,8))},t.\u0275prov=pt({factory:function(){return new t(Yt(ZM,8))},token:t,providedIn:"root"}),t})(),KM=(()=>{class t{}return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)}}),t})();class XM extends class{}{constructor(t){super(),this._data=t}connect(){return vM(this._data)?this._data:Hp(this._data)}disconnect(){}}const $M=["contentWrapper"],YM=["*"],QM=new Ut("VIRTUAL_SCROLL_STRATEGY");class JM{constructor(t,e,n){this._scrolledIndexChange=new M,this.scrolledIndexChange=this._scrolledIndexChange.pipe(t=>t.lift(new bM(void 0,void 0))),this._viewport=null,this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=n}attach(t){this._viewport=t,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(t,e,n){if(n<e)throw Error("CDK virtual scroll: maxBufferPx must be greater than or equal to minBufferPx");this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=n,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(t,e){this._viewport&&this._viewport.scrollToOffset(t*this._itemSize,e)}_updateTotalContentSize(){this._viewport&&this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;const t=this._viewport.measureScrollOffset(),e=t/this._itemSize,n=this._viewport.getRenderedRange(),i={start:n.start,end:n.end},r=this._viewport.getViewportSize(),o=this._viewport.getDataLength(),a=t-i.start*this._itemSize;if(a<this._minBufferPx&&0!=i.start){const t=Math.ceil((this._maxBufferPx-a)/this._itemSize);i.start=Math.max(0,i.start-t),i.end=Math.min(o,Math.ceil(e+(r+this._minBufferPx)/this._itemSize))}else{const n=i.end*this._itemSize-(t+r);if(n<this._minBufferPx&&i.end!=o){const t=Math.ceil((this._maxBufferPx-n)/this._itemSize);t>0&&(i.end=Math.min(o,i.end+t),i.start=Math.max(0,Math.floor(e-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(i),this._viewport.setRenderedContentOffset(this._itemSize*i.start),this._scrolledIndexChange.next(Math.floor(e))}}function tO(t){return t._scrollStrategy}let eO=(()=>{class t{constructor(){this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new JM(this.itemSize,this.minBufferPx,this.maxBufferPx)}get itemSize(){return this._itemSize}set itemSize(t){this._itemSize=nM(t)}get minBufferPx(){return this._minBufferPx}set minBufferPx(t){this._minBufferPx=nM(t)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(t){this._maxBufferPx=nM(t)}ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=we({type:t,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[Ds([{provide:QM,useFactory:tO,deps:[Ot(()=>t)]}]),Cs]}),t})(),nO=(()=>{class t{constructor(t,e){this._ngZone=t,this._platform=e,this._scrolled=new M,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new b(e=>{this._globalSubscription||this._addGlobalListener();const n=t>0?this._scrolled.pipe(kM(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Hp()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(ef(t=>!t||n.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((n,i)=>{this._scrollableContainsElement(i,t)&&e.push(i)}),e}_scrollableContainsElement(t,e){let n=e.nativeElement,i=t.getElementRef().nativeElement;do{if(n==i)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>iM(window.document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(Yt(Il),Yt(qM))},t.\u0275prov=pt({factory:function(){return new t(Yt(Il),Yt(qM))},token:t,providedIn:"root"}),t})(),iO=(()=>{class t{constructor(t,e,n,i){this.elementRef=t,this.scrollDispatcher=e,this.ngZone=n,this.dir=i,this._destroyed=new M,this._elementScrolled=new b(t=>this.ngZone.runOutsideAngular(()=>iM(this.elementRef.nativeElement,"scroll").pipe(EM(this._destroyed)).subscribe(t)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const e=this.elementRef.nativeElement,n=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=n?t.end:t.start),null==t.right&&(t.right=n?t.start:t.end),null!=t.bottom&&(t.top=e.scrollHeight-e.clientHeight-t.bottom),n&&0!=HM()?(null!=t.left&&(t.right=e.scrollWidth-e.clientWidth-t.left),2==HM()?t.left=t.right:1==HM()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=e.scrollWidth-e.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const e=this.elementRef.nativeElement;"object"==typeof document&&"scrollBehavior"in document.documentElement.style?e.scrollTo(t):(null!=t.top&&(e.scrollTop=t.top),null!=t.left&&(e.scrollLeft=t.left))}measureScrollOffset(t){const e=this.elementRef.nativeElement;if("top"==t)return e.scrollTop;if("bottom"==t)return e.scrollHeight-e.clientHeight-e.scrollTop;const n=this.dir&&"rtl"==this.dir.value;return"start"==t?t=n?"right":"left":"end"==t&&(t=n?"left":"right"),n&&2==HM()?"left"==t?e.scrollWidth-e.clientWidth-e.scrollLeft:e.scrollLeft:n&&1==HM()?"left"==t?e.scrollLeft+e.scrollWidth-e.clientWidth:-e.scrollLeft:"left"==t?e.scrollLeft:e.scrollWidth-e.clientWidth-e.scrollLeft}}return t.\u0275fac=function(e){return new(e||t)(fa(zs),fa(nO),fa(Il),fa(WM,8))},t.\u0275dir=we({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),t})(),rO=(()=>{class t{constructor(t,e){this._platform=t,e.runOutsideAngular(()=>{this._change=t.isBrowser?K(iM(window,"resize"),iM(window,"orientationchange")):Hp(),this._invalidateCache=this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){this._invalidateCache.unsubscribe()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+e,height:n,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=document.documentElement,e=t.getBoundingClientRect();return{top:-e.top||document.body.scrollTop||window.scrollY||t.scrollTop||0,left:-e.left||document.body.scrollLeft||window.scrollX||t.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(kM(t)):this._change}_updateViewportSize(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(Yt(qM),Yt(Il))},t.\u0275prov=pt({factory:function(){return new t(Yt(qM),Yt(Il))},token:t,providedIn:"root"}),t})();const oO="undefined"!=typeof requestAnimationFrame?cM:_M;let aO=(()=>{class t extends iO{constructor(t,e,n,i,r,o,a){if(super(t,o,n,r),this.elementRef=t,this._changeDetectorRef=e,this._scrollStrategy=i,this._detachedSubject=new M,this._renderedRangeSubject=new M,this._orientation="vertical",this.scrolledIndexChange=new b(t=>this._scrollStrategy.scrolledIndexChange.subscribe(e=>Promise.resolve().then(()=>this.ngZone.run(()=>t.next(e))))),this.renderedRangeStream=this._renderedRangeSubject.asObservable(),this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=h.EMPTY,!i)throw Error('Error: cdk-virtual-scroll-viewport requires the "itemSize" property to be set.');a&&(this._viewportChanges=a.change().subscribe(()=>{this.checkViewportSize()}))}get orientation(){return this._orientation}set orientation(t){this._orientation!==t&&(this._orientation=t,this._calculateSpacerSize())}ngOnInit(){super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.elementScrolled().pipe(Tf(null),kM(0,oO)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()}))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(t){if(this._forOf)throw Error("CdkVirtualScrollViewport is already attached.");this.ngZone.runOutsideAngular(()=>{this._forOf=t,this._forOf.dataStream.pipe(EM(this._detachedSubject)).subscribe(t=>{const e=t.length;e!==this._dataLength&&(this._dataLength=e,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}setTotalContentSize(t){this._totalContentSize!==t&&(this._totalContentSize=t,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(t){var e,n;((e=this._renderedRange).start!=(n=t).start||e.end!=n.end)&&(this._renderedRangeSubject.next(this._renderedRange=t),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(t,e="to-start"){const n="horizontal"==this.orientation,i=n?"X":"Y";let r=`translate${i}(${Number((n&&this.dir&&"rtl"==this.dir.value?-1:1)*t)}px)`;this._renderedContentOffset=t,"to-end"===e&&(r+=` translate${i}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=r&&(this._renderedContentTransform=r,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(t,e="auto"){const n={behavior:e};"horizontal"===this.orientation?n.start=t:n.top=t,this.scrollTo(n)}scrollToIndex(t,e="auto"){this._scrollStrategy.scrollToIndex(t,e)}measureScrollOffset(t){return super.measureScrollOffset(t||("horizontal"===this.orientation?"start":"top"))}measureRenderedContentSize(){const t=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?t.offsetWidth:t.offsetHeight}measureRangeSize(t){return this._forOf?this._forOf.measureRangeSize(t,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){const t=this.elementRef.nativeElement;this._viewportSize="horizontal"===this.orientation?t.clientWidth:t.clientHeight}_markChangeDetectionNeeded(t){t&&this._runAfterChangeDetection.push(t),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const t=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const e of t)e()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return t.\u0275fac=function(e){return new(e||t)(fa(zs),fa(Ao),fa(Il),fa(QM,8),fa(WM,8),fa(nO),fa(rO,8))},t.\u0275cmp=me({type:t,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(t,e){var n;1&t&&Qu($M,!0),2&t&&Yu(n=rl())&&(e._contentWrapper=n.first)},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(t,e){2&t&&Ya("cdk-virtual-scroll-orientation-horizontal","horizontal"===e.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==e.orientation)},inputs:{orientation:"orientation"},outputs:{scrolledIndexChange:"scrolledIndexChange"},features:[Ds([{provide:iO,useExisting:t}]),ys],ngContentSelectors:YM,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(t,e){1&t&&(Da(),va(0,"div",0,1),Ra(2),ba(),xa(3,"div",2)),2&t&&(rr(3),$a("width",e._totalContentWidth)("height",e._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0}[dir=rtl] .cdk-virtual-scroll-spacer{right:0;left:auto;transform-origin:100% 0}\n"],encapsulation:2,changeDetection:0}),t})();function sO(t,e){if(!e.getBoundingClientRect)return 0;const n=e.getBoundingClientRect();return"horizontal"==t?n.width:n.height}let uO=(()=>{class t{constructor(t,e,n,i,r){this._viewContainerRef=t,this._template=e,this._differs=n,this._viewport=i,this.viewChange=new M,this._dataSourceChanges=new M,this.cdkVirtualForTemplateCacheSize=20,this.dataStream=this._dataSourceChanges.pipe(Tf(null),t=>t.lift(new AM),Of(([t,e])=>this._changeDataSource(t,e)),function(t,e,n){let i;return i={bufferSize:1,windowTime:void 0,refCount:!1,scheduler:void 0},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:i}){let r,o,a=0,s=!1,u=!1;return function(l){a++,r&&!s||(s=!1,r=new VM(t,e,i),o=l.subscribe({next(t){r.next(t)},error(t){s=!0,r.error(t)},complete(){u=!0,o=void 0,r.complete()}}));const c=r.subscribe(this);this.add(()=>{a--,c.unsubscribe(),o&&!u&&n&&0===a&&(o.unsubscribe(),o=void 0,r=void 0)})}}(i))}()),this._differ=null,this._templateCache=[],this._needsUpdate=!1,this._destroyed=new M,this.dataStream.subscribe(t=>{this._data=t,this._onRenderedDataChange()}),this._viewport.renderedRangeStream.pipe(EM(this._destroyed)).subscribe(t=>{this._renderedRange=t,r.run(()=>this.viewChange.next(this._renderedRange)),this._onRenderedDataChange()}),this._viewport.attach(this)}get cdkVirtualForOf(){return this._cdkVirtualForOf}set cdkVirtualForOf(t){this._cdkVirtualForOf=t,function(t){return t&&"function"==typeof t.connect}(t)?this._dataSourceChanges.next(t):this._dataSourceChanges.next(new XM(vM(t)?t:Array.prototype.slice.call(t||[])))}get cdkVirtualForTrackBy(){return this._cdkVirtualForTrackBy}set cdkVirtualForTrackBy(t){this._needsUpdate=!0,this._cdkVirtualForTrackBy=t?(e,n)=>t(e+(this._renderedRange?this._renderedRange.start:0),n):void 0}set cdkVirtualForTemplate(t){t&&(this._needsUpdate=!0,this._template=t)}measureRangeSize(t,e){if(t.start>=t.end)return 0;if(t.start<this._renderedRange.start||t.end>this._renderedRange.end)throw Error("Error: attempted to measure an item that isn't rendered.");const n=t.start-this._renderedRange.start;let i=0,r=t.end-t.start;for(;r--;){const t=this._viewContainerRef.get(r+n);let o=t?t.rootNodes.length:0;for(;o--;)i+=sO(e,t.rootNodes[o])}return i}ngDoCheck(){if(this._differ&&this._needsUpdate){const t=this._differ.diff(this._renderedItems);t?this._applyChanges(t):this._updateContext(),this._needsUpdate=!1}}ngOnDestroy(){this._viewport.detach(),this._dataSourceChanges.next(),this._dataSourceChanges.complete(),this.viewChange.complete(),this._destroyed.next(),this._destroyed.complete();for(let t of this._templateCache)t.destroy()}_onRenderedDataChange(){this._renderedRange&&(this._renderedItems=this._data.slice(this._renderedRange.start,this._renderedRange.end),this._differ||(this._differ=this._differs.find(this._renderedItems).create(this.cdkVirtualForTrackBy)),this._needsUpdate=!0)}_changeDataSource(t,e){return t&&t.disconnect(this),this._needsUpdate=!0,e?e.connect(this):Hp()}_updateContext(){const t=this._data.length;let e=this._viewContainerRef.length;for(;e--;){let n=this._viewContainerRef.get(e);n.context.index=this._renderedRange.start+e,n.context.count=t,this._updateComputedContextProperties(n.context),n.detectChanges()}}_applyChanges(t){t.forEachOperation((t,e,n)=>{if(null==t.previousIndex)this._insertViewForNewItem(n).context.$implicit=t.item;else if(null==n)this._cacheView(this._detachView(e));else{const i=this._viewContainerRef.get(e);this._viewContainerRef.move(i,n),i.context.$implicit=t.item}}),t.forEachIdentityChange(t=>{this._viewContainerRef.get(t.currentIndex).context.$implicit=t.item});const e=this._data.length;let n=this._viewContainerRef.length;for(;n--;){const t=this._viewContainerRef.get(n);t.context.index=this._renderedRange.start+n,t.context.count=e,this._updateComputedContextProperties(t.context)}}_cacheView(t){if(this._templateCache.length<this.cdkVirtualForTemplateCacheSize)this._templateCache.push(t);else{const e=this._viewContainerRef.indexOf(t);-1===e?t.destroy():this._viewContainerRef.remove(e)}}_insertViewForNewItem(t){return this._insertViewFromCache(t)||this._createEmbeddedViewAt(t)}_updateComputedContextProperties(t){t.first=0===t.index,t.last=t.index===t.count-1,t.even=t.index%2==0,t.odd=!t.even}_createEmbeddedViewAt(t){return this._viewContainerRef.createEmbeddedView(this._template,{$implicit:null,cdkVirtualForOf:this._cdkVirtualForOf,index:-1,count:-1,first:!1,last:!1,odd:!1,even:!1},t)}_insertViewFromCache(t){const e=this._templateCache.pop();return e&&this._viewContainerRef.insert(e,t),e||null}_detachView(t){return this._viewContainerRef.detach(t)}}return t.\u0275fac=function(e){return new(e||t)(fa(lu),fa(su),fa(nu),fa(aO,4),fa(Il))},t.\u0275dir=we({type:t,selectors:[["","cdkVirtualFor","","cdkVirtualForOf",""]],inputs:{cdkVirtualForTemplateCacheSize:"cdkVirtualForTemplateCacheSize",cdkVirtualForOf:"cdkVirtualForOf",cdkVirtualForTrackBy:"cdkVirtualForTrackBy",cdkVirtualForTemplate:"cdkVirtualForTemplate"}}),t})(),lO=(()=>{class t{}return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},imports:[[KM,GM],KM]}),t})();class cO{static equals(t,e,n){return n?this.resolveFieldData(t,n)===this.resolveFieldData(e,n):this.equalsByValue(t,e)}static equalsByValue(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var n,i,r,o=Array.isArray(t),a=Array.isArray(e);if(o&&a){if((i=t.length)!=e.length)return!1;for(n=i;0!=n--;)if(!this.equalsByValue(t[n],e[n]))return!1;return!0}if(o!=a)return!1;var s=t instanceof Date,u=e instanceof Date;if(s!=u)return!1;if(s&&u)return t.getTime()==e.getTime();var l=t instanceof RegExp,c=e instanceof RegExp;if(l!=c)return!1;if(l&&c)return t.toString()==e.toString();var h=Object.keys(t);if((i=h.length)!==Object.keys(e).length)return!1;for(n=i;0!=n--;)if(!Object.prototype.hasOwnProperty.call(e,h[n]))return!1;for(n=i;0!=n--;)if(!this.equalsByValue(t[r=h[n]],e[r]))return!1;return!0}return t!=t&&e!=e}static resolveFieldData(t,e){if(t&&e){if(this.isFunction(e))return e(t);if(-1==e.indexOf("."))return t[e];{let n=e.split("."),i=t;for(let t=0,e=n.length;t<e;++t){if(null==i)return null;i=i[n[t]]}return i}}return null}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static reorderArray(t,e,n){t&&e!==n&&(n>=t.length&&(n%=t.length,e%=t.length),t.splice(n,0,t.splice(e,1)[0]))}static generateSelectItems(t,e){let n;if(t&&t.length){n=[];for(let i of t)n.push({label:this.resolveFieldData(i,e),value:i})}return n}static insertIntoOrderedArray(t,e,n,i){if(n.length>0){let r=!1;for(let o=0;o<n.length;o++)if(this.findIndexInList(n[o],i)>e){n.splice(o,0,t),r=!0;break}r||n.push(t)}else n.push(t)}static findIndexInList(t,e){let n=-1;if(e)for(let i=0;i<e.length;i++)if(e[i]==t){n=i;break}return n}static removeAccents(t){return t&&t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}}class hO{static filter(t,e,n,i){let r=[],o=cO.removeAccents(n).toLowerCase();if(t)for(let a of t)for(let t of e){let e=cO.removeAccents(String(cO.resolveFieldData(a,t))).toLowerCase();if(hO[i](e,o)){r.push(a);break}}return r}static startsWith(t,e){if(null==e||""===e.trim())return!0;if(null==t)return!1;let n=cO.removeAccents(e.toString()).toLowerCase();return cO.removeAccents(t.toString()).toLowerCase().slice(0,n.length)===n}static contains(t,e){if(null==e||"string"==typeof e&&""===e.trim())return!0;if(null==t)return!1;let n=cO.removeAccents(e.toString()).toLowerCase();return-1!==cO.removeAccents(t.toString()).toLowerCase().indexOf(n)}static endsWith(t,e){if(null==e||""===e.trim())return!0;if(null==t)return!1;let n=cO.removeAccents(e.toString()).toLowerCase(),i=cO.removeAccents(t.toString()).toLowerCase();return-1!==i.indexOf(n,i.length-n.length)}static equals(t,e){return null==e||"string"==typeof e&&""===e.trim()||null!=t&&(t.getTime&&e.getTime?t.getTime()===e.getTime():cO.removeAccents(t.toString()).toLowerCase()==cO.removeAccents(e.toString()).toLowerCase())}static notEquals(t,e){return!(null==e||"string"==typeof e&&""===e.trim()||null!=t&&(t.getTime&&e.getTime?t.getTime()===e.getTime():cO.removeAccents(t.toString()).toLowerCase()==cO.removeAccents(e.toString()).toLowerCase()))}static in(t,e){if(null==e||0===e.length)return!0;if(null==t)return!1;for(let n=0;n<e.length;n++)if(e[n]===t||t.getTime&&e[n].getTime&&t.getTime()===e[n].getTime())return!0;return!1}static lt(t,e){return null==e||null!=t&&(t.getTime&&e.getTime?t.getTime()<e.getTime():t<e)}static lte(t,e){return null==e||null!=t&&(t.getTime&&e.getTime?t.getTime()<=e.getTime():t<=e)}static gt(t,e){return null==e||null!=t&&(t.getTime&&e.getTime?t.getTime()>e.getTime():t>e)}static gte(t,e){return null==e||null!=t&&(t.getTime&&e.getTime?t.getTime()>=e.getTime():t>=e)}}let dO=(()=>{let t=class{constructor(t,e){this.el=t,this.zone=e,this.tooltipPosition="right",this.tooltipEvent="hover",this.appendTo="body",this.tooltipZIndex="auto",this.escape=!0}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{"hover"===this.tooltipEvent?(this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener)):"focus"===this.tooltipEvent&&(this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this),this.el.nativeElement.addEventListener("focus",this.focusListener),this.el.nativeElement.addEventListener("blur",this.blurListener))})}onMouseEnter(t){this.container||this.showTimeout||this.activate()}onMouseLeave(t){this.deactivate()}onFocus(t){this.activate()}onBlur(t){this.deactivate()}onClick(t){this.deactivate()}activate(){this.active=!0,this.clearHideTimeout(),this.showDelay?this.showTimeout=setTimeout(()=>{this.show()},this.showDelay):this.show(),this.life&&(this.hideTimeout=setTimeout(()=>{this.hide()},this.showDelay?this.life+this.showDelay:this.life))}deactivate(){this.active=!1,this.clearShowTimeout(),this.hideDelay?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.hideDelay)):this.hide()}get text(){return this._text}set text(t){this._text=t,this.active&&(this._text?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())}create(){this.container=document.createElement("div");let t=document.createElement("div");t.className="ui-tooltip-arrow",this.container.appendChild(t),this.tooltipText=document.createElement("div"),this.tooltipText.className="ui-tooltip-text ui-shadow ui-corner-all",this.updateText(),this.positionStyle&&(this.container.style.position=this.positionStyle),this.container.appendChild(this.tooltipText),"body"===this.appendTo?document.body.appendChild(this.container):Nw.appendChild(this.container,"target"===this.appendTo?this.el.nativeElement:this.appendTo),this.container.style.display="inline-block"}show(){this.text&&!this.disabled&&(this.create(),this.align(),Nw.fadeIn(this.container,250),this.container.style.zIndex="auto"===this.tooltipZIndex?++Nw.zindex:this.tooltipZIndex,this.bindDocumentResizeListener())}hide(){this.remove()}updateText(){this.escape?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this._text))):this.tooltipText.innerHTML=this._text}align(){switch(this.tooltipPosition){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.appendTo||"target"===this.appendTo){let t=this.el.nativeElement.getBoundingClientRect();return{left:t.left+Nw.getWindowScrollLeft(),top:t.top+Nw.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let t=this.getHostOffset(),e=t.left+Nw.getOuterWidth(this.el.nativeElement),n=t.top+(Nw.getOuterHeight(this.el.nativeElement)-Nw.getOuterHeight(this.container))/2;this.container.style.left=e+"px",this.container.style.top=n+"px"}alignLeft(){this.preAlign("left");let t=this.getHostOffset(),e=t.left-Nw.getOuterWidth(this.container),n=t.top+(Nw.getOuterHeight(this.el.nativeElement)-Nw.getOuterHeight(this.container))/2;this.container.style.left=e+"px",this.container.style.top=n+"px"}alignTop(){this.preAlign("top");let t=this.getHostOffset(),e=t.left+(Nw.getOuterWidth(this.el.nativeElement)-Nw.getOuterWidth(this.container))/2,n=t.top-Nw.getOuterHeight(this.container);this.container.style.left=e+"px",this.container.style.top=n+"px"}alignBottom(){this.preAlign("bottom");let t=this.getHostOffset(),e=t.left+(Nw.getOuterWidth(this.el.nativeElement)-Nw.getOuterWidth(this.container))/2,n=t.top+Nw.getOuterHeight(this.el.nativeElement);this.container.style.left=e+"px",this.container.style.top=n+"px"}preAlign(t){this.container.style.left="-999px",this.container.style.top="-999px";let e="ui-tooltip ui-widget ui-tooltip-"+t;this.container.className=this.tooltipStyleClass?e+" "+this.tooltipStyleClass:e}isOutOfBounds(){let t=this.container.getBoundingClientRect(),e=t.top,n=t.left,i=Nw.getOuterWidth(this.container),r=Nw.getOuterHeight(this.container),o=Nw.getViewport();return n+i>o.width||n<0||e<0||e+r>o.height}onWindowResize(t){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}unbindEvents(){"hover"===this.tooltipEvent?(this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener)):"focus"===this.tooltipEvent&&(this.el.nativeElement.removeEventListener("focus",this.focusListener),this.el.nativeElement.removeEventListener("blur",this.blurListener)),this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.appendTo?document.body.removeChild(this.container):"target"===this.appendTo?this.el.nativeElement.removeChild(this.container):Nw.removeChild(this.container,this.appendTo)),this.unbindDocumentResizeListener(),this.clearTimeouts(),this.container=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.remove()}};return t.\u0275fac=function(e){return new(e||t)(fa(zs),fa(Il))},t.\u0275dir=we({type:t,selectors:[["","pTooltip",""]],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",tooltipZIndex:"tooltipZIndex",escape:"escape",text:["pTooltip","text"],positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",disabled:["tooltipDisabled","disabled"],showDelay:"showDelay",hideDelay:"hideDelay",life:"life"}}),t})(),pO=(()=>{let t=class{};return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},imports:[[Hc]]}),t})();function fO(t,e){if(1&t&&(va(0,"span"),ds(1),ba()),2&t){const t=Aa();rr(1),ps(t.option.label||"empty")}}function gO(t,e){1&t&&Pa(0)}const mO=function(t){return{height:t}},yO=function(t,e,n){return{"ui-dropdown-item ui-corner-all":!0,"ui-state-highlight":t,"ui-state-disabled":e,"ui-dropdown-item-empty":n}},_O=function(t){return{$implicit:t}},vO=["container"],bO=["filter"],xO=["in"],wO=["editableInput"];function CO(t,e){if(1&t&&(va(0,"option",16),ds(1),ba()),2&t){const t=Aa();rr(1),ps(t.placeholder)}}function PO(t,e){if(1&t&&(va(0,"option",17),ds(1),ba()),2&t){const t=Aa();ya("value",t.selectedOption.value)("selected",!0),rr(1),ps(t.selectedOption.label)}}function MO(t,e){if(1&t&&(wa(0),ds(1),Ca()),2&t){const t=Aa(2);rr(1),ps(t.label||"empty")}}function OO(t,e){1&t&&Pa(0)}const kO=function(t){return{"ui-dropdown-label ui-inputtext ui-corner-all":!0,"ui-dropdown-label-empty":t}};function EO(t,e){if(1&t&&(va(0,"label",18),da(1,MO,2,1,"ng-container",19),da(2,OO,1,0,"ng-container",20),ba()),2&t){const t=Aa();ya("ngClass",Eu(4,kO,null==t.label||0===t.label.length)),rr(1),ya("ngIf",!t.selectedItemTemplate),rr(1),ya("ngTemplateOutlet",t.selectedItemTemplate)("ngTemplateOutletContext",Eu(6,_O,t.selectedOption))}}const SO=function(t){return{"ui-dropdown-label ui-inputtext ui-corner-all ui-placeholder":!0,"ui-dropdown-label-empty":t}};function TO(t,e){if(1&t&&(va(0,"label",18),ds(1),ba()),2&t){const t=Aa();ya("ngClass",Eu(2,SO,null==t.placeholder||0===t.placeholder.length)),rr(1),ps(t.placeholder||"empty")}}function AO(t,e){if(1&t){const t=Ma();va(0,"input",21,22),Ea("click",(function(e){return Ne(t),Aa().onEditableInputClick(e)}))("input",(function(e){return Ne(t),Aa().onEditableInputChange(e)}))("focus",(function(e){return Ne(t),Aa().onEditableInputFocus(e)}))("blur",(function(e){return Ne(t),Aa().onInputBlur(e)})),ba()}if(2&t){const t=Aa();ya("disabled",t.disabled),ca("maxlength",t.maxlength)("aria-label",t.selectedOption?t.selectedOption.label:" ")("placeholder",t.placeholder)("aria-expanded",t.overlayVisible)}}function IO(t,e){if(1&t){const t=Ma();va(0,"i",23),Ea("click",(function(e){return Ne(t),Aa().clear(e)})),ba()}}function DO(t,e){if(1&t){const t=Ma();va(0,"div",30),Ea("click",(function(e){return Ne(t),e.stopPropagation()})),va(1,"input",31,32),Ea("keydown.enter",(function(e){return Ne(t),e.preventDefault()}))("keydown",(function(e){return Ne(t),Aa(2).onKeydown(e,!1)}))("input",(function(e){return Ne(t),Aa(2).onFilter(e)})),ba(),xa(3,"span",33),ba()}if(2&t){const t=Aa(2);rr(1),ya("value",t.filterValue||""),ca("placeholder",t.filterPlaceholder)("aria-label",t.ariaFilterLabel)}}function RO(t,e){if(1&t&&(va(0,"span"),ds(1),ba()),2&t){const t=Aa().$implicit;rr(1),ps(t.label||"empty")}}function FO(t,e){1&t&&Pa(0)}function LO(t,e){1&t&&Pa(0)}const zO=function(t,e){return{$implicit:t,selectedOption:e}};function NO(t,e){if(1&t&&(va(0,"li",35),da(1,RO,2,1,"span",19),da(2,FO,1,0,"ng-container",20),ba(),da(3,LO,1,0,"ng-container",20)),2&t){const t=e.$implicit;Aa(2);const n=pa(7),i=Aa();rr(1),ya("ngIf",!i.groupTemplate),rr(1),ya("ngTemplateOutlet",i.groupTemplate)("ngTemplateOutletContext",Eu(5,_O,t)),rr(1),ya("ngTemplateOutlet",n)("ngTemplateOutletContext",Su(7,zO,t.items,i.selectedOption))}}function BO(t,e){if(1&t&&(wa(0),da(1,NO,4,10,"ng-template",34),Ca()),2&t){const t=Aa(2);rr(1),ya("ngForOf",t.optionsToDisplay)}}function VO(t,e){1&t&&Pa(0)}function UO(t,e){if(1&t&&(wa(0),da(1,VO,1,0,"ng-container",20),Ca()),2&t){Aa();const t=pa(7),e=Aa();rr(1),ya("ngTemplateOutlet",t)("ngTemplateOutletContext",Su(2,zO,e.optionsToDisplay,e.selectedOption))}}function jO(t,e){if(1&t){const t=Ma();va(0,"p-dropdownItem",38),Ea("onClick",(function(e){return Ne(t),Aa(4).onItemClick(e)})),ba()}if(2&t){const t=e.$implicit,n=Aa(2).selectedOption,i=Aa(2);ya("option",t)("selected",n==t)("template",i.itemTemplate)}}function qO(t,e){if(1&t&&(wa(0),da(1,jO,1,3,"ng-template",34),Ca()),2&t){const t=Aa().$implicit;rr(1),ya("ngForOf",t)}}function GO(t,e){if(1&t){const t=Ma();wa(0),va(1,"p-dropdownItem",38),Ea("onClick",(function(e){return Ne(t),Aa(5).onItemClick(e)})),ba(),Ca()}if(2&t){const t=e.$implicit,n=Aa(3).selectedOption,i=Aa(2);rr(1),ya("option",t)("selected",n==t)("template",i.itemTemplate)}}function HO(t,e){if(1&t){const t=Ma();va(0,"cdk-virtual-scroll-viewport",40,41),Ea("scrolledIndexChange",(function(){return Ne(t),Aa(4).scrollToSelectedVirtualScrollElement()})),da(2,GO,2,3,"ng-container",42),ba()}if(2&t){const t=Aa(2).$implicit,e=Aa(2);ya("ngStyle",Eu(3,mO,e.scrollHeight))("itemSize",e.itemSize),rr(2),ya("cdkVirtualForOf",t)}}function ZO(t,e){if(1&t&&da(0,HO,3,5,"cdk-virtual-scroll-viewport",39),2&t){const t=Aa(3);ya("ngIf",t.virtualScroll&&t.optionsToDisplay&&t.optionsToDisplay.length)}}function WO(t,e){if(1&t&&(da(0,qO,2,1,"ng-container",36),da(1,ZO,1,1,"ng-template",null,37,ul)),2&t){const t=pa(2);ya("ngIf",!Aa(2).virtualScroll)("ngIfElse",t)}}function KO(t,e){if(1&t&&(va(0,"li",43),ds(1),ba()),2&t){const t=Aa(2);rr(1),ps(t.emptyFilterMessage)}}const XO=function(t,e){return{showTransitionParams:t,hideTransitionParams:e}},$O=function(t){return{value:"visible",params:t}};function YO(t,e){if(1&t){const t=Ma();va(0,"div",24),Ea("@overlayAnimation.start",(function(e){return Ne(t),Aa().onOverlayAnimationStart(e)})),da(1,DO,4,3,"div",25),va(2,"div",26),va(3,"ul",27),da(4,BO,2,1,"ng-container",19),da(5,UO,2,5,"ng-container",19),da(6,WO,3,2,"ng-template",null,28,ul),da(8,KO,2,1,"li",29),ba(),ba(),ba()}if(2&t){const t=Aa();Ja(t.panelStyleClass),ya("ngClass","ui-dropdown-panel  ui-widget ui-widget-content ui-corner-all ui-shadow")("@overlayAnimation",Eu(14,$O,Su(11,XO,t.showTransitionOptions,t.hideTransitionOptions)))("ngStyle",t.panelStyle),rr(1),ya("ngIf",t.filter),rr(1),$a("max-height",t.virtualScroll?"auto":t.scrollHeight||"auto"),rr(2),ya("ngIf",t.group),rr(1),ya("ngIf",!t.group),rr(3),ya("ngIf",t.filter&&(!t.optionsToDisplay||t.optionsToDisplay&&0===t.optionsToDisplay.length))}}const QO=function(t,e,n,i){return{"ui-dropdown ui-widget ui-state-default ui-corner-all ui-helper-clearfix":!0,"ui-state-disabled":t,"ui-dropdown-open":e,"ui-state-focus":n,"ui-dropdown-clearable":i}},JO={provide:OC,useExisting:Ot(()=>ek),multi:!0};let tk=(()=>{let t=class{constructor(){this.onClick=new Vu}onOptionClick(t){this.onClick.emit({originalEvent:t,option:this.option})}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=me({type:t,selectors:[["p-dropdownItem"]],inputs:{option:"option",selected:"selected",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:15,consts:[["role","option",3,"ngStyle","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(va(0,"li",0),Ea("click",(function(t){return e.onOptionClick(t)})),da(1,fO,2,1,"span",1),da(2,gO,1,0,"ng-container",2),ba()),2&t&&(ya("ngStyle",Eu(7,mO,e.itemSize+"px"))("ngClass",Tu(9,yO,e.selected,e.option.disabled,!e.option.label||0===e.option.label.length)),ca("aria-label",e.option.label)("aria-selected",e.selected),rr(1),ya("ngIf",!e.template),rr(1),ya("ngTemplateOutlet",e.template)("ngTemplateOutletContext",Eu(13,_O,e.option)))},directives:[Bc,Ic,Lc,Vc],encapsulation:2}),t})(),ek=(()=>{let t=class{constructor(t,e,n,i){this.el=t,this.renderer=e,this.cd=n,this.zone=i,this.scrollHeight="200px",this.filterBy="label",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.autoDisplayFirst=!0,this.emptyFilterMessage="No results found",this.autoZIndex=!0,this.baseZIndex=0,this.showTransitionOptions="225ms ease-out",this.hideTransitionOptions="195ms ease-in",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.onChange=new Vu,this.onFocus=new Vu,this.onBlur=new Vu,this.onClick=new Vu,this.onShow=new Vu,this.onHide=new Vu,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.viewPortOffsetTop=0}get disabled(){return this._disabled}set disabled(t){t&&(this.focused=!1),this._disabled=t,this.cd.destroyed||this.cd.detectChanges()}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"item":this.itemTemplate=t.template;break;case"selectedItem":this.selectedItemTemplate=t.template;break;case"group":this.groupTemplate=t.template;break;default:this.itemTemplate=t.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null)}get options(){return this._options}set options(t){let e=this.optionLabel?cO.generateSelectItems(t,this.optionLabel):t;this._options=e,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.optionsChanged=!0,this.filterValue&&this.filterValue.length&&this.activateFilter()}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return this.selectedOption?this.selectedOption.label:null}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.selectedOption.label:this.value||"")}onItemClick(t){const e=t.option;this.itemClick=!0,e.disabled||(this.selectItem(t,e),this.focusViewChild.nativeElement.focus()),setTimeout(()=>{this.hide(t)},150)}selectItem(t,e){this.selectedOption!=e&&(this.selectedOption=e,this.value=e.value,this.filled=!0,this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:t.originalEvent,value:this.value}),this.virtualScroll&&setTimeout(()=>{this.viewPortOffsetTop=this.viewPort.measureScrollOffset()},1))}ngAfterViewChecked(){if(this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.virtualScroll&&this.updateVirtualScrollSelectedIndex(!0),this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper){if(this.virtualScroll&&this.viewPort){let t=this.viewPort.getRenderedRange();this.updateVirtualScrollSelectedIndex(!1),(t.start>this.virtualScrollSelectedIndex||t.end<this.virtualScrollSelectedIndex)&&this.viewPort.scrollToIndex(this.virtualScrollSelectedIndex)}Nw.findSingle(this.overlay,"li.ui-state-highlight")&&Nw.scrollInView(this.itemsWrapper,Nw.findSingle(this.overlay,"li.ui-state-highlight")),this.selectedOptionUpdated=!1}}writeValue(t){this.filter&&this.resetFilter(),this.value=t,this.updateSelectedOption(t),this.updateEditableLabel(),this.updateFilledState(),this.cd.markForCheck()}resetFilter(){this.filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(t){this.selectedOption=this.findOption(t,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.optionsToDisplay[0]),this.selectedOptionUpdated=!0}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t}onMouseclick(t){this.disabled||this.readonly||(this.onClick.emit(t),this.selfClick=!0,this.clearClick=Nw.hasClass(t.target,"ui-dropdown-clear-icon"),this.itemClick||this.clearClick||(this.focusViewChild.nativeElement.focus(),this.overlayVisible?this.hide(t):this.show(),this.cd.detectChanges()))}onEditableInputClick(t){this.itemClick=!0,this.bindDocumentClickListener()}onEditableInputFocus(t){this.focused=!0,this.hide(t),this.onFocus.emit(t)}onEditableInputChange(t){this.value=t.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value})}show(){this.overlayVisible=!0}onOverlayAnimationStart(t){switch(t.toState){case"visible":if(this.overlay=t.element,this.itemsWrapper=Nw.findSingle(this.overlay,this.virtualScroll?".cdk-virtual-scroll-viewport":".ui-dropdown-items-wrapper"),this.appendOverlay(),this.autoZIndex&&(this.overlay.style.zIndex=String(this.baseZIndex+ ++Nw.zindex)),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.options&&this.options.length&&!this.virtualScroll){let t=Nw.findSingle(this.itemsWrapper,".ui-dropdown-item.ui-state-highlight");t&&Nw.scrollInView(this.itemsWrapper,t)}this.filterViewChild&&this.filterViewChild.nativeElement&&this.filterViewChild.nativeElement.focus(),this.onShow.emit(t);break;case"void":this.onOverlayHide()}}scrollToSelectedVirtualScrollElement(){this.virtualAutoScrolled||(this.viewPortOffsetTop?this.viewPort.scrollToOffset(this.viewPortOffsetTop):this.virtualScrollSelectedIndex>-1&&this.viewPort.scrollToIndex(this.virtualScrollSelectedIndex)),this.virtualAutoScrolled=!0}updateVirtualScrollSelectedIndex(t){this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&(t&&(this.viewPortOffsetTop=0),this.virtualScrollSelectedIndex=this.findOptionIndex(this.selectedOption.value,this.optionsToDisplay))}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):Nw.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth=Nw.getWidth(this.containerViewChild.nativeElement)+"px")}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}hide(t){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.virtualScroll&&(this.virtualAutoScrolled=!1),this.cd.markForCheck(),this.onHide.emit(t)}alignOverlay(){this.overlay&&(this.appendTo?Nw.absolutePosition(this.overlay,this.containerViewChild.nativeElement):Nw.relativePosition(this.overlay,this.containerViewChild.nativeElement))}onInputFocus(t){this.focused=!0,this.onFocus.emit(t)}onInputBlur(t){this.focused=!1,this.onModelTouched(),this.onBlur.emit(t)}findPrevEnabledOption(t){let e;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let n=t-1;0<=n;n--){let t=this.optionsToDisplay[n];if(!t.disabled){e=t;break}}if(!e)for(let n=this.optionsToDisplay.length-1;n>=t;n--){let t=this.optionsToDisplay[n];if(!t.disabled){e=t;break}}}return e}findNextEnabledOption(t){let e;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let n=t+1;t<this.optionsToDisplay.length-1;n++){let t=this.optionsToDisplay[n];if(!t.disabled){e=t;break}}if(!e)for(let n=0;n<t;n++){let t=this.optionsToDisplay[n];if(!t.disabled){e=t;break}}}return e}onKeydown(t,e){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(t.which){case 40:if(!this.overlayVisible&&t.altKey)this.show();else if(this.group){let e=this.selectedOption?this.findOptionGroupIndex(this.selectedOption.value,this.optionsToDisplay):-1;if(-1!==e){let n=e.itemIndex+1;n<this.optionsToDisplay[e.groupIndex].items.length?(this.selectItem(t,this.optionsToDisplay[e.groupIndex].items[n]),this.selectedOptionUpdated=!0):this.optionsToDisplay[e.groupIndex+1]&&(this.selectItem(t,this.optionsToDisplay[e.groupIndex+1].items[0]),this.selectedOptionUpdated=!0)}else this.selectItem(t,this.optionsToDisplay[0].items[0])}else{let e=this.selectedOption?this.findOptionIndex(this.selectedOption.value,this.optionsToDisplay):-1,n=this.findNextEnabledOption(e);n&&(this.selectItem(t,n),this.selectedOptionUpdated=!0)}t.preventDefault();break;case 38:if(this.group){let e=this.selectedOption?this.findOptionGroupIndex(this.selectedOption.value,this.optionsToDisplay):-1;if(-1!==e){let n=e.itemIndex-1;if(n>=0)this.selectItem(t,this.optionsToDisplay[e.groupIndex].items[n]),this.selectedOptionUpdated=!0;else if(n<0){let n=this.optionsToDisplay[e.groupIndex-1];n&&(this.selectItem(t,n.items[n.items.length-1]),this.selectedOptionUpdated=!0)}}}else{let e=this.selectedOption?this.findOptionIndex(this.selectedOption.value,this.optionsToDisplay):-1,n=this.findPrevEnabledOption(e);n&&(this.selectItem(t,n),this.selectedOptionUpdated=!0)}t.preventDefault();break;case 32:case 32:this.overlayVisible||(this.show(),t.preventDefault());break;case 13:(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)&&this.hide(t),t.preventDefault();break;case 27:case 9:this.hide(t);break;default:e&&this.search(t)}}search(t){this.searchTimeout&&clearTimeout(this.searchTimeout);const e=t.key;let n;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=e,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+e:e,this.group){let t=this.selectedOption?this.findOptionGroupIndex(this.selectedOption.value,this.optionsToDisplay):{groupIndex:0,itemIndex:0};n=this.searchOptionWithinGroup(t)}else{let t=this.selectedOption?this.findOptionIndex(this.selectedOption.value,this.optionsToDisplay):-1;n=this.searchOption(++t)}n&&(this.selectItem(t,n),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(t){let e;return this.searchValue&&(e=this.searchOptionInRange(t,this.optionsToDisplay.length),e||(e=this.searchOptionInRange(0,t))),e}searchOptionInRange(t,e){for(let n=t;n<e;n++){let t=this.optionsToDisplay[n];if(t.label.toLowerCase().startsWith(this.searchValue.toLowerCase()))return t}return null}searchOptionWithinGroup(t){if(this.searchValue){for(let e=t.groupIndex;e<this.optionsToDisplay.length;e++)for(let n=t.groupIndex===e?t.itemIndex+1:0;n<this.optionsToDisplay[e].items.length;n++){let t=this.optionsToDisplay[e].items[n];if(t.label.toLowerCase().startsWith(this.searchValue.toLowerCase()))return t}for(let e=0;e<=t.groupIndex;e++)for(let n=0;n<(t.groupIndex===e?t.itemIndex:this.optionsToDisplay[e].items.length);n++){let t=this.optionsToDisplay[e].items[n];if(t.label.toLowerCase().startsWith(this.searchValue.toLowerCase()))return t}}return null}findOptionIndex(t,e){let n=-1;if(e)for(let i=0;i<e.length;i++)if(null==t&&null==e[i].value||cO.equals(t,e[i].value,this.dataKey)){n=i;break}return n}findOptionGroupIndex(t,e){let n,i;if(e)for(let r=0;r<e.length&&(n=r,i=this.findOptionIndex(t,e[r].items),-1===i);r++);return-1!==i?{groupIndex:n,itemIndex:i}:-1}findOption(t,e,n){if(this.group&&!n){let n;if(e&&e.length)for(let i of e)if(n=this.findOption(t,i.items,!0),n)break;return n}{let n=this.findOptionIndex(t,e);return-1!=n?e[n]:null}}onFilter(t){let e=t.target.value;e&&e.length?(this.filterValue=e,this.activateFilter()):(this.filterValue=null,this.optionsToDisplay=this.options),this.optionsChanged=!0}activateFilter(){let t=this.filterBy.split(",");if(this.options&&this.options.length){if(this.group){let e=[];for(let n of this.options){let i=hO.filter(n.items,t,this.filterValue,this.filterMatchMode);i&&i.length&&e.push({label:n.label,value:n.value,items:i})}this.optionsToDisplay=e}else this.optionsToDisplay=hO.filter(this.options,t,this.filterValue,this.filterMatchMode);this.optionsChanged=!0}}applyFocus(){this.editable?Nw.findSingle(this.el.nativeElement,".ui-dropdown-label.ui-inputtext").focus():Nw.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen("document","click",t=>{this.selfClick||this.itemClick||(this.hide(t),this.unbindDocumentClickListener()),this.clearClickState(),this.cd.markForCheck()}))}clearClickState(){this.selfClick=!1,this.itemClick=!1}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){Nw.isAndroid()||this.hide(event)}updateFilledState(){this.filled=null!=this.selectedOption}clear(t){this.clearClick=!0,this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel(),this.updateFilledState()}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.overlay=null,this.itemsWrapper=null}ngOnDestroy(){this.restoreOverlayAppend(),this.onOverlayHide()}};return t.\u0275fac=function(e){return new(e||t)(fa(zs),fa(Us),fa(Ao),fa(Il))},t.\u0275cmp=me({type:t,selectors:[["p-dropdown"]],contentQueries:function(t,e,n){var i;1&t&&el(n,gC,!1),2&t&&Yu(i=rl())&&(e.templates=i)},viewQuery:function(t,e){var n;1&t&&(Qu(vO,!0),Ju(bO,!0),Qu(xO,!0),Ju(aO,!0),Ju(wO,!0)),2&t&&(Yu(n=rl())&&(e.containerViewChild=n.first),Yu(n=rl())&&(e.filterViewChild=n.first),Yu(n=rl())&&(e.focusViewChild=n.first),Yu(n=rl())&&(e.viewPort=n.first),Yu(n=rl())&&(e.editableInputViewChild=n.first))},hostVars:4,hostBindings:function(t,e){2&t&&Ya("ui-inputwrapper-filled",e.filled)("ui-inputwrapper-focus",e.focused)},inputs:{scrollHeight:"scrollHeight",filterBy:"filterBy",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",autoDisplayFirst:"autoDisplayFirst",emptyFilterMessage:"emptyFilterMessage",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",filterMatchMode:"filterMatchMode",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",disabled:"disabled",options:"options",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",inputId:"inputId",selectId:"selectId",dataKey:"dataKey",autofocus:"autofocus",optionLabel:"optionLabel",group:"group",showClear:"showClear",virtualScroll:"virtualScroll",itemSize:"itemSize",ariaFilterLabel:"ariaFilterLabel",ariaLabelledBy:"ariaLabelledBy",maxlength:"maxlength",tooltipStyleClass:"tooltipStyleClass"},outputs:{onChange:"onChange",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide"},features:[Ds([JO])],decls:17,vars:31,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"ui-helper-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox",3,"disabled","focus","blur","keydown"],["in",""],[1,"ui-helper-hidden-accessible","ui-dropdown-hidden-select"],["tabindex","-1","aria-hidden","true"],["value","",4,"ngIf"],[3,"value","selected",4,"ngIf"],[1,"ui-dropdown-label-container",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[3,"ngClass",4,"ngIf"],["type","text","class","ui-dropdown-label ui-inputtext ui-corner-all","aria-haspopup","listbox",3,"disabled","click","input","focus","blur",4,"ngIf"],["class","ui-dropdown-clear-icon pi pi-times",3,"click",4,"ngIf"],["role","button","aria-haspopup","listbox",1,"ui-dropdown-trigger","ui-state-default","ui-corner-right"],[1,"ui-dropdown-trigger-icon","ui-clickable",3,"ngClass"],[3,"ngClass","ngStyle","class",4,"ngIf"],["value",""],[3,"value","selected"],[3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","text","aria-haspopup","listbox",1,"ui-dropdown-label","ui-inputtext","ui-corner-all",3,"disabled","click","input","focus","blur"],["editableInput",""],[1,"ui-dropdown-clear-icon","pi","pi-times",3,"click"],[3,"ngClass","ngStyle"],["class","ui-dropdown-filter-container",3,"click",4,"ngIf"],[1,"ui-dropdown-items-wrapper"],["role","listbox",1,"ui-dropdown-items","ui-dropdown-list","ui-widget-content","ui-widget","ui-corner-all","ui-helper-reset"],["itemslist",""],["class","ui-dropdown-empty-message",4,"ngIf"],[1,"ui-dropdown-filter-container",3,"click"],["type","text","autocomplete","off",1,"ui-dropdown-filter","ui-inputtext","ui-widget","ui-state-default","ui-corner-all",3,"value","keydown.enter","keydown","input"],["filter",""],[1,"ui-dropdown-filter-icon","pi","pi-search"],["ngFor","",3,"ngForOf"],[1,"ui-dropdown-item-group"],[4,"ngIf","ngIfElse"],["virtualScrollList",""],[3,"option","selected","template","onClick"],[3,"ngStyle","itemSize","scrolledIndexChange",4,"ngIf"],[3,"ngStyle","itemSize","scrolledIndexChange"],["viewport",""],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"ui-dropdown-empty-message"]],template:function(t,e){1&t&&(va(0,"div",0,1),Ea("click",(function(t){return e.onMouseclick(t)})),va(2,"div",2),va(3,"input",3,4),Ea("focus",(function(t){return e.onInputFocus(t)}))("blur",(function(t){return e.onInputBlur(t)}))("keydown",(function(t){return e.onKeydown(t,!0)})),ba(),ba(),va(5,"div",5),va(6,"select",6),da(7,CO,2,1,"option",7),da(8,PO,2,3,"option",8),ba(),ba(),va(9,"div",9),da(10,EO,3,8,"label",10),da(11,TO,2,4,"label",10),da(12,AO,2,5,"input",11),da(13,IO,1,0,"i",12),ba(),va(14,"div",13),xa(15,"span",14),ba(),da(16,YO,9,16,"div",15),ba()),2&t&&(Ja(e.styleClass),ya("ngClass",Au(26,QO,e.disabled,e.overlayVisible,e.focused,e.showClear&&!e.disabled))("ngStyle",e.style),rr(3),ya("disabled",e.disabled),ca("id",e.inputId)("aria-label",e.selectedOption?e.selectedOption.label:" ")("aria-expanded",e.overlayVisible)("aria-labelledby",e.ariaLabelledBy)("tabindex",e.tabindex)("autofocus",e.autofocus),rr(3),ca("required",e.required)("name",e.name),rr(1),ya("ngIf",e.placeholder),rr(1),ya("ngIf",e.selectedOption),rr(1),ya("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),rr(1),ya("ngIf",!e.editable&&null!=e.label),rr(1),ya("ngIf",!e.editable&&null==e.label),rr(1),ya("ngIf",e.editable),rr(1),ya("ngIf",null!=e.value&&e.showClear&&!e.disabled),rr(1),ca("aria-expanded",e.overlayVisible),rr(1),ya("ngClass",e.dropdownIcon),rr(1),ya("ngIf",e.overlayVisible))},directives:[Ic,Bc,Lc,dO,Vc,Rc,tk,aO,eO,uO],encapsulation:2,data:{animation:[Oh("overlayAnimation",[Th("void",Sh({transform:"translateY(5%)",opacity:0})),Th("visible",Sh({transform:"translateY(0)",opacity:1})),Ah("void => visible",kh("{{showTransitionParams}}")),Ah("visible => void",kh("{{hideTransitionParams}}"))])]}}),t})(),nk=(()=>{let t=class{};return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},imports:[[Hc,mC,lO,pO],mC,lO]}),t})();function ik(t,e){1&t&&Pa(0)}const rk=function(t){return{$implicit:t}};function ok(t,e){if(1&t&&(va(0,"div",16),da(1,ik,1,0,"ng-container",17),ba()),2&t){const t=Aa(2);rr(1),ya("ngTemplateOutlet",t.templateLeft)("ngTemplateOutletContext",Eu(2,rk,t.paginatorState))}}function ak(t,e){if(1&t&&(va(0,"span",18),ds(1),ba()),2&t){const t=Aa(2);rr(1),ps(t.currentPageReport)}}const sk=function(t){return{"ui-state-active":t}};function uk(t,e){if(1&t){const t=Ma();va(0,"a",19),Ea("click",(function(n){Ne(t);const i=e.$implicit;return Aa(2).onPageLinkClick(n,i-1)}))("keydown.enter",(function(n){Ne(t);const i=e.$implicit;return Aa(2).onPageLinkClick(n,i-1)})),ds(1),ba()}if(2&t){const t=e.$implicit,n=Aa(2);ya("ngClass",Eu(2,sk,t-1==n.getPage())),rr(1),ps(t)}}function lk(t,e){if(1&t){const t=Ma();va(0,"p-dropdown",20),Ea("ngModelChange",(function(e){return Ne(t),Aa(2).rows=e}))("onChange",(function(e){return Ne(t),Aa(2).onRppChange(e)})),ba()}if(2&t){const t=Aa(2);ya("options",t.rowsPerPageItems)("ngModel",t.rows)("appendTo",t.dropdownAppendTo)("scrollHeight",t.dropdownScrollHeight)}}function ck(t,e){1&t&&Pa(0)}function hk(t,e){if(1&t&&(va(0,"div",21),da(1,ck,1,0,"ng-container",17),ba()),2&t){const t=Aa(2);rr(1),ya("ngTemplateOutlet",t.templateRight)("ngTemplateOutletContext",Eu(2,rk,t.paginatorState))}}const dk=function(t){return{"ui-state-disabled":t}};function pk(t,e){if(1&t){const t=Ma();va(0,"div",1),da(1,ok,2,4,"div",2),da(2,ak,2,1,"span",3),va(3,"a",4),Ea("click",(function(e){return Ne(t),Aa().changePageToFirst(e)}))("keydown.enter",(function(e){return Ne(t),Aa().changePageToFirst(e)})),xa(4,"span",5),ba(),va(5,"a",6),Ea("click",(function(e){return Ne(t),Aa().changePageToPrev(e)}))("keydown.enter",(function(e){return Ne(t),Aa().changePageToPrev(e)})),xa(6,"span",7),ba(),va(7,"span",8),da(8,uk,2,4,"a",9),ba(),va(9,"a",10),Ea("click",(function(e){return Ne(t),Aa().changePageToNext(e)}))("keydown.enter",(function(e){return Ne(t),Aa().changePageToNext(e)})),xa(10,"span",11),ba(),va(11,"a",12),Ea("click",(function(e){return Ne(t),Aa().changePageToLast(e)}))("keydown.enter",(function(e){return Ne(t),Aa().changePageToLast(e)})),xa(12,"span",13),ba(),da(13,lk,1,4,"p-dropdown",14),da(14,hk,2,4,"div",15),ba()}if(2&t){const t=Aa();Ja(t.styleClass),ya("ngStyle",t.style)("ngClass","ui-paginator ui-widget ui-widget-header ui-unselectable-text ui-helper-clearfix"),rr(1),ya("ngIf",t.templateLeft),rr(1),ya("ngIf",t.showCurrentPageReport),rr(1),ya("ngClass",Eu(21,dk,t.isFirstPage()))("tabindex",t.isFirstPage()?-1:null),ca("tabindex",t.isFirstPage()?null:"0"),rr(2),ya("ngClass",Eu(23,dk,t.isFirstPage()))("tabindex",t.isFirstPage()?-1:null),ca("tabindex",t.isFirstPage()?null:"0"),rr(3),ya("ngForOf",t.pageLinks),rr(1),ya("ngClass",Eu(25,dk,t.isLastPage()))("tabindex",t.isLastPage()?-1:null),ca("tabindex",t.isLastPage()?null:"0"),rr(2),ya("ngClass",Eu(27,dk,t.isLastPage()))("tabindex",t.isLastPage()?-1:null),ca("tabindex",t.isLastPage()?null:"0"),rr(2),ya("ngIf",t.rowsPerPageOptions),rr(1),ya("ngIf",t.templateRight)}}let fk=(()=>{let t=class{constructor(t){this.cd=t,this.pageLinkSize=5,this.onPageChange=new Vu,this.alwaysShow=!0,this.dropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.totalRecords=0,this.rows=0,this._first=0}ngOnInit(){this.updatePaginatorState()}ngOnChanges(t){t.totalRecords&&(this.updatePageLinks(),this.updatePaginatorState(),this.updateFirst(),this.updateRowsPerPageOptions()),t.first&&(this._first=t.first.currentValue,this.updatePageLinks(),this.updatePaginatorState()),t.rows&&(this.updatePageLinks(),this.updatePaginatorState()),t.rowsPerPageOptions&&this.updateRowsPerPageOptions()}get first(){return this._first}set first(t){this._first=t}updateRowsPerPageOptions(){if(this.rowsPerPageOptions){this.rowsPerPageItems=[];for(let t of this.rowsPerPageOptions)this.rowsPerPageItems.push("object"==typeof t&&t.showAll?{label:t.showAll,value:this.totalRecords}:{label:String(t),value:t})}}isFirstPage(){return 0===this.getPage()}isLastPage(){return this.getPage()===this.getPageCount()-1}getPageCount(){return Math.ceil(this.totalRecords/this.rows)||1}calculatePageLinkBoundaries(){let t=this.getPageCount(),e=Math.min(this.pageLinkSize,t),n=Math.max(0,Math.ceil(this.getPage()-e/2)),i=Math.min(t-1,n+e-1);return n=Math.max(0,n-(this.pageLinkSize-(i-n+1))),[n,i]}updatePageLinks(){this.pageLinks=[];let t=this.calculatePageLinkBoundaries(),e=t[1];for(let n=t[0];n<=e;n++)this.pageLinks.push(n+1)}changePage(t){var e=this.getPageCount();if(t>=0&&t<e){this._first=this.rows*t;var n={page:t,first:this.first,rows:this.rows,pageCount:e};this.updatePageLinks(),this.onPageChange.emit(n),this.updatePaginatorState()}}updateFirst(){const t=this.getPage();t>0&&this.totalRecords&&this.first>=this.totalRecords&&Promise.resolve(null).then(()=>this.changePage(t-1))}getPage(){return Math.floor(this.first/this.rows)}changePageToFirst(t){this.isFirstPage()||this.changePage(0),t.preventDefault()}changePageToPrev(t){this.changePage(this.getPage()-1),t.preventDefault()}changePageToNext(t){this.changePage(this.getPage()+1),t.preventDefault()}changePageToLast(t){this.isLastPage()||this.changePage(this.getPageCount()-1),t.preventDefault()}onPageLinkClick(t,e){this.changePage(e),t.preventDefault()}onRppChange(t){this.changePage(this.getPage())}updatePaginatorState(){this.paginatorState={page:this.getPage(),pageCount:this.getPageCount(),rows:this.rows,first:this.first,totalRecords:this.totalRecords}}get currentPageReport(){return this.currentPageReportTemplate.replace("{currentPage}",(this.getPage()+1).toString()).replace("{totalPages}",this.getPageCount().toString())}};return t.\u0275fac=function(e){return new(e||t)(fa(Ao))},t.\u0275cmp=me({type:t,selectors:[["p-paginator"]],inputs:{pageLinkSize:"pageLinkSize",alwaysShow:"alwaysShow",dropdownScrollHeight:"dropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",totalRecords:"totalRecords",rows:"rows",first:"first",style:"style",styleClass:"styleClass",templateLeft:"templateLeft",templateRight:"templateRight",dropdownAppendTo:"dropdownAppendTo",showCurrentPageReport:"showCurrentPageReport",rowsPerPageOptions:"rowsPerPageOptions"},outputs:{onPageChange:"onPageChange"},features:[Cs],decls:1,vars:1,consts:[[3,"class","ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],["class","ui-paginator-left-content",4,"ngIf"],["class","ui-paginator-current",4,"ngIf"],[1,"ui-paginator-first","ui-paginator-element","ui-state-default","ui-corner-all",3,"ngClass","tabindex","click","keydown.enter"],[1,"ui-paginator-icon","pi","pi-step-backward"],["tabindex","0",1,"ui-paginator-prev","ui-paginator-element","ui-state-default","ui-corner-all",3,"ngClass","tabindex","click","keydown.enter"],[1,"ui-paginator-icon","pi","pi-caret-left"],[1,"ui-paginator-pages"],["tabindex","0","class","ui-paginator-page ui-paginator-element ui-state-default ui-corner-all",3,"ngClass","click","keydown.enter",4,"ngFor","ngForOf"],[1,"ui-paginator-next","ui-paginator-element","ui-state-default","ui-corner-all",3,"ngClass","tabindex","click","keydown.enter"],[1,"ui-paginator-icon","pi","pi-caret-right"],[1,"ui-paginator-last","ui-paginator-element","ui-state-default","ui-corner-all",3,"ngClass","tabindex","click","keydown.enter"],[1,"ui-paginator-icon","pi","pi-step-forward"],[3,"options","ngModel","appendTo","scrollHeight","ngModelChange","onChange",4,"ngIf"],["class","ui-paginator-right-content",4,"ngIf"],[1,"ui-paginator-left-content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ui-paginator-current"],["tabindex","0",1,"ui-paginator-page","ui-paginator-element","ui-state-default","ui-corner-all",3,"ngClass","click","keydown.enter"],[3,"options","ngModel","appendTo","scrollHeight","ngModelChange","onChange"],[1,"ui-paginator-right-content"]],template:function(t,e){1&t&&da(0,pk,15,29,"div",0),2&t&&ya("ngIf",!!e.alwaysShow||e.pageLinks&&e.pageLinks.length>1)},directives:[Lc,Bc,Ic,Rc,Vc,ek,zC,AP],encapsulation:2}),t})(),gk=(()=>{let t=class{};return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},imports:[[Hc,nk,DP,mC],nk,DP,mC]}),t})();const mk=["container"],yk=["resizeHelper"],_k=["reorderIndicatorUp"],vk=["reorderIndicatorDown"],bk=["table"];function xk(t,e){1&t&&xa(0,"div",13)}function wk(t,e){if(1&t&&(va(0,"div",14),xa(1,"i"),ba()),2&t){const t=Aa();rr(1),Ja("ui-table-loading-icon pi-spin "+t.loadingIcon)}}function Ck(t,e){1&t&&Pa(0)}function Pk(t,e){if(1&t&&(va(0,"div",15),da(1,Ck,1,0,"ng-container",16),ba()),2&t){const t=Aa();rr(1),ya("ngTemplateOutlet",t.captionTemplate)}}function Mk(t,e){if(1&t){const t=Ma();va(0,"p-paginator",17),Ea("onPageChange",(function(e){return Ne(t),Aa().onPageChange(e)})),ba()}if(2&t){const t=Aa();ya("rows",t.rows)("first",t.first)("totalRecords",t.totalRecords)("pageLinkSize",t.pageLinks)("alwaysShow",t.alwaysShowPaginator)("rowsPerPageOptions",t.rowsPerPageOptions)("templateLeft",t.paginatorLeftTemplate)("templateRight",t.paginatorRightTemplate)("dropdownAppendTo",t.paginatorDropdownAppendTo)("dropdownScrollHeight",t.paginatorDropdownScrollHeight)("currentPageReportTemplate",t.currentPageReportTemplate)("showCurrentPageReport",t.showCurrentPageReport)}}function Ok(t,e){1&t&&Pa(0)}function kk(t,e){1&t&&Pa(0)}function Ek(t,e){1&t&&Pa(0)}const Sk=function(t){return{$implicit:t}};function Tk(t,e){if(1&t&&(va(0,"tfoot",25),da(1,Ek,1,0,"ng-container",21),ba()),2&t){const t=Aa(2);rr(1),ya("ngTemplateOutlet",t.footerTemplate)("ngTemplateOutletContext",Eu(2,Sk,t.columns))}}function Ak(t,e){if(1&t&&(va(0,"div",18),va(1,"table",19,20),da(3,Ok,1,0,"ng-container",21),va(4,"thead",22),da(5,kk,1,0,"ng-container",21),ba(),xa(6,"tbody",23),da(7,Tk,2,4,"tfoot",24),ba(),ba()),2&t){const t=Aa();rr(1),ya("ngClass",t.tableStyleClass)("ngStyle",t.tableStyle),rr(2),ya("ngTemplateOutlet",t.colGroupTemplate)("ngTemplateOutletContext",Eu(9,Sk,t.columns)),rr(2),ya("ngTemplateOutlet",t.headerTemplate)("ngTemplateOutletContext",Eu(11,Sk,t.columns)),rr(1),ya("pTableBody",t.columns)("pTableBodyTemplate",t.bodyTemplate),rr(1),ya("ngIf",t.footerTemplate)}}const Ik=function(t){return{width:t}};function Dk(t,e){if(1&t&&xa(0,"div",29),2&t){const t=Aa(2);ya("pScrollableView",t.frozenColumns)("frozen",!0)("ngStyle",Eu(4,Ik,t.frozenWidth))("scrollHeight",t.scrollHeight)}}const Rk=function(t,e){return{left:t,width:e}};function Fk(t,e){if(1&t&&(va(0,"div",26),da(1,Dk,1,6,"div",27),xa(2,"div",28),ba()),2&t){const t=Aa();rr(1),ya("ngIf",t.frozenColumns||t.frozenBodyTemplate),rr(1),ya("pScrollableView",t.columns)("frozen",!1)("scrollHeight",t.scrollHeight)("ngStyle",Su(5,Rk,t.frozenWidth,"calc(100% - "+t.frozenWidth+")"))}}function Lk(t,e){if(1&t){const t=Ma();va(0,"p-paginator",30),Ea("onPageChange",(function(e){return Ne(t),Aa().onPageChange(e)})),ba()}if(2&t){const t=Aa();ya("rows",t.rows)("first",t.first)("totalRecords",t.totalRecords)("pageLinkSize",t.pageLinks)("alwaysShow",t.alwaysShowPaginator)("rowsPerPageOptions",t.rowsPerPageOptions)("templateLeft",t.paginatorLeftTemplate)("templateRight",t.paginatorRightTemplate)("dropdownAppendTo",t.paginatorDropdownAppendTo)("dropdownScrollHeight",t.paginatorDropdownScrollHeight)("currentPageReportTemplate",t.currentPageReportTemplate)("showCurrentPageReport",t.showCurrentPageReport)}}function zk(t,e){1&t&&Pa(0)}function Nk(t,e){if(1&t&&(va(0,"div",31),da(1,zk,1,0,"ng-container",16),ba()),2&t){const t=Aa();rr(1),ya("ngTemplateOutlet",t.summaryTemplate)}}function Bk(t,e){1&t&&xa(0,"div",32,33)}function Vk(t,e){1&t&&xa(0,"span",34,35)}function Uk(t,e){1&t&&xa(0,"span",36,37)}const jk=function(t,e,n,i,r){return{"ui-table ui-widget":!0,"ui-table-responsive":t,"ui-table-resizable":e,"ui-table-resizable-fit":n,"ui-table-hoverable-rows":i,"ui-table-auto-layout":r}},qk=["pTableBody",""];function Gk(t,e){1&t&&Pa(0)}const Hk=function(t,e,n,i){return{$implicit:t,rowIndex:e,columns:n,editing:i}};function Zk(t,e){if(1&t&&da(0,Gk,1,0,"ng-container",2),2&t){const t=e.$implicit,n=e.index,i=Aa(2);ya("ngTemplateOutlet",i.template)("ngTemplateOutletContext",Au(2,Hk,t,i.dt.paginator?i.dt.first+n:n,i.columns,"row"===i.dt.editMode&&i.dt.isRowEditing(t)))}}function Wk(t,e){if(1&t&&(wa(0),da(1,Zk,1,7,"ng-template",1),Lu(2,"slice"),Ca()),2&t){const t=Aa();rr(1),ya("ngForOf",t.dt.paginator&&!t.dt.lazy?zu(2,2,t.dt.filteredValue||t.dt.value,t.dt.first,t.dt.first+t.dt.rows):t.dt.filteredValue||t.dt.value)("ngForTrackBy",t.dt.rowTrackBy)}}function Kk(t,e){1&t&&Pa(0)}function Xk(t,e){1&t&&Pa(0)}const $k=function(t,e,n){return{$implicit:t,rowIndex:e,columns:n}};function Yk(t,e){if(1&t&&(wa(0),da(1,Xk,1,0,"ng-container",2),Ca()),2&t){const t=Aa(),e=t.$implicit,n=t.index,i=Aa(2);rr(1),ya("ngTemplateOutlet",i.dt.expandedRowTemplate)("ngTemplateOutletContext",Tu(2,$k,e,i.dt.paginator?i.dt.first+n:n,i.columns))}}const Qk=function(t,e,n,i,r){return{$implicit:t,rowIndex:e,columns:n,expanded:i,editing:r}};function Jk(t,e){if(1&t&&(da(0,Kk,1,0,"ng-container",2),da(1,Yk,2,6,"ng-container",0)),2&t){const t=e.$implicit,n=e.index,i=Aa(2);ya("ngTemplateOutlet",i.template)("ngTemplateOutletContext",Iu(3,Qk,t,i.dt.paginator?i.dt.first+n:n,i.columns,i.dt.isRowExpanded(t),"row"===i.dt.editMode&&i.dt.isRowEditing(t))),rr(1),ya("ngIf",i.dt.isRowExpanded(t))}}function tE(t,e){if(1&t&&(wa(0),da(1,Jk,2,9,"ng-template",1),Lu(2,"slice"),Ca()),2&t){const t=Aa();rr(1),ya("ngForOf",t.dt.paginator&&!t.dt.lazy?zu(2,2,t.dt.filteredValue||t.dt.value,t.dt.first,t.dt.first+t.dt.rows):t.dt.filteredValue||t.dt.value)("ngForTrackBy",t.dt.rowTrackBy)}}function eE(t,e){1&t&&Pa(0)}const nE=function(t,e){return{$implicit:t,frozen:e}};function iE(t,e){if(1&t&&(wa(0),da(1,eE,1,0,"ng-container",2),Ca()),2&t){const t=Aa();rr(1),ya("ngTemplateOutlet",t.dt.emptyMessageTemplate)("ngTemplateOutletContext",Su(2,nE,t.columns,t.frozen))}}const rE=["scrollHeader"],oE=["scrollHeaderBox"],aE=["scrollBody"],sE=["scrollTable"],uE=["loadingTable"],lE=["scrollFooter"],cE=["scrollFooterBox"],hE=["virtualScroller"],dE=["scrollableAligner"],pE=["pScrollableView",""];function fE(t,e){1&t&&Pa(0)}function gE(t,e){1&t&&Pa(0)}function mE(t,e){1&t&&Pa(0)}function yE(t,e){if(1&t&&da(0,mE,1,0,"ng-container",5),2&t){const t=e.$implicit,n=e.index,i=Aa();ya("ngTemplateOutlet",i.dt.frozenRowsTemplate)("ngTemplateOutletContext",Tu(2,$k,t,n,i.columns))}}function _E(t,e){1&t&&Pa(0)}function vE(t,e){1&t&&Pa(0)}const bE=function(t){return{columns:t}};function xE(t,e){if(1&t&&da(0,vE,1,0,"ng-container",5),2&t){const t=Aa(2);ya("ngTemplateOutlet",t.dt.loadingBodyTemplate)("ngTemplateOutletContext",Eu(2,bE,t.columns))}}const wE=function(t){return{"ui-table-scrollable-body-table ui-table-loading-virtual-table":!0,"ui-table-virtual-table":t}};function CE(t,e){if(1&t&&(va(0,"table",23,24),va(2,"tbody",7),da(3,xE,1,4,"ng-template",25),ba(),ba()),2&t){const t=Aa();ya("ngClass",Eu(2,wE,t.dt.virtualScroll)),rr(3),ya("ngForOf",t.loadingArray)}}function PE(t,e){1&t&&xa(0,"div",26,27)}function ME(t,e){1&t&&xa(0,"div",28,29)}function OE(t,e){1&t&&Pa(0)}function kE(t,e){1&t&&Pa(0)}const EE=function(t){return{"ui-table-scrollable-body-table":!0,"ui-table-virtual-table":t}};let SE=(()=>{let t=class{constructor(){this.sortSource=new M,this.selectionSource=new M,this.contextMenuSource=new M,this.valueSource=new M,this.totalRecordsSource=new M,this.columnsSource=new M,this.sortSource$=this.sortSource.asObservable(),this.selectionSource$=this.selectionSource.asObservable(),this.contextMenuSource$=this.contextMenuSource.asObservable(),this.valueSource$=this.valueSource.asObservable(),this.totalRecordsSource$=this.totalRecordsSource.asObservable(),this.columnsSource$=this.columnsSource.asObservable()}onSort(t){this.sortSource.next(t)}onSelectionChange(){this.selectionSource.next()}onContextMenu(t){this.contextMenuSource.next(t)}onValueChange(t){this.valueSource.next(t)}onTotalRecordsChange(t){this.totalRecordsSource.next(t)}onColumnsChange(t){this.columnsSource.next(t)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),TE=(()=>{let t=class{constructor(t,e,n,i){this.el=t,this.zone=e,this.tableService=n,this.cd=i,this.pageLinks=5,this.alwaysShowPaginator=!0,this.paginatorPosition="bottom",this.paginatorDropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.defaultSortOrder=1,this.sortMode="single",this.resetPageOnSort=!0,this.selectionChange=new Vu,this.contextMenuSelectionChange=new Vu,this.contextMenuSelectionMode="separate",this.rowTrackBy=(t,e)=>e,this.lazy=!1,this.lazyLoadOnInit=!0,this.compareSelectionBy="deepEquals",this.csvSeparator=",",this.exportFilename="download",this.filters={},this.filterDelay=300,this.expandedRowKeys={},this.editingRowKeys={},this.rowExpandMode="multiple",this.virtualScrollDelay=150,this.virtualRowHeight=28,this.columnResizeMode="fit",this.loadingIcon="pi pi-spinner",this.showLoader=!0,this.stateStorage="session",this.editMode="cell",this.onRowSelect=new Vu,this.onRowUnselect=new Vu,this.onPage=new Vu,this.onSort=new Vu,this.onFilter=new Vu,this.onLazyLoad=new Vu,this.onRowExpand=new Vu,this.onRowCollapse=new Vu,this.onContextMenuSelect=new Vu,this.onColResize=new Vu,this.onColReorder=new Vu,this.onRowReorder=new Vu,this.onEditInit=new Vu,this.onEditComplete=new Vu,this.onEditCancel=new Vu,this.onHeaderCheckboxToggle=new Vu,this.sortFunction=new Vu,this.firstChange=new Vu,this.rowsChange=new Vu,this.onStateSave=new Vu,this.onStateRestore=new Vu,this._value=[],this._totalRecords=0,this._first=0,this.selectionKeys={},this._sortOrder=1}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&(this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.restoringFilter&&(this.restoringFilter=!1)),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"caption":this.captionTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"body":this.bodyTemplate=t.template;break;case"loadingbody":this.loadingBodyTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;case"summary":this.summaryTemplate=t.template;break;case"colgroup":this.colGroupTemplate=t.template;break;case"rowexpansion":this.expandedRowTemplate=t.template;break;case"frozenrows":this.frozenRowsTemplate=t.template;break;case"frozenheader":this.frozenHeaderTemplate=t.template;break;case"frozenbody":this.frozenBodyTemplate=t.template;break;case"frozenfooter":this.frozenFooterTemplate=t.template;break;case"frozencolgroup":this.frozenColGroupTemplate=t.template;break;case"emptymessage":this.emptyMessageTemplate=t.template;break;case"paginatorleft":this.paginatorLeftTemplate=t.template;break;case"paginatorright":this.paginatorRightTemplate=t.template}})}ngAfterViewInit(){this.isStateful()&&this.resizableColumns&&this.restoreColumnWidths()}ngOnChanges(t){t.value&&(this.isStateful()&&!this.stateRestored&&this.restoreState(),this._value=t.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,"single"==this.sortMode&&this.sortField?this.sortSingle():"multiple"==this.sortMode&&this.multiSortMeta?this.sortMultiple():this.hasFilter()&&this._filter()),this.virtualScroll&&this.virtualScrollCallback&&this.virtualScrollCallback(),this.tableService.onValueChange(t.value.currentValue)),t.columns&&(this._columns=t.columns.currentValue,this.tableService.onColumnsChange(t.columns.currentValue),this._columns&&this.isStateful()&&this.reorderableColumns&&!this.columnOrderStateRestored&&this.restoreColumnOrder()),t.sortField&&(this._sortField=t.sortField.currentValue,this.lazy&&!this.initialized||"single"===this.sortMode&&this.sortSingle()),t.sortOrder&&(this._sortOrder=t.sortOrder.currentValue,this.lazy&&!this.initialized||"single"===this.sortMode&&this.sortSingle()),t.multiSortMeta&&(this._multiSortMeta=t.multiSortMeta.currentValue,"multiple"===this.sortMode&&this.sortMultiple()),t.selection&&(this._selection=t.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1)}get value(){return this._value}set value(t){this._value=t}get columns(){return this._columns}set columns(t){this._columns=t}get first(){return this._first}set first(t){this._first=t}get rows(){return this._rows}set rows(t){this._rows=t}get totalRecords(){return this._totalRecords}set totalRecords(t){this._totalRecords=t,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(t){this._sortField=t}get sortOrder(){return this._sortOrder}set sortOrder(t){this._sortOrder=t}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(t){this._multiSortMeta=t}get selection(){return this._selection}set selection(t){this._selection=t}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let t of this._selection)this.selectionKeys[String(cO.resolveFieldData(t,this.dataKey))]=1;else this.selectionKeys[String(cO.resolveFieldData(this._selection,this.dataKey))]=1}onPageChange(t){this.first=t.first,this.rows=t.rows,this.lazy&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.onPage.emit({first:this.first,rows:this.rows}),this.firstChange.emit(this.first),this.rowsChange.emit(this.rows),this.tableService.onValueChange(this.value),this.isStateful()&&this.saveState(),this.anchorRowIndex=null}sort(t){let e=t.originalEvent;if("single"===this.sortMode&&(this._sortOrder=this.sortField===t.field?-1*this.sortOrder:this.defaultSortOrder,this._sortField=t.field,this.sortSingle(),this.resetPageOnSort&&(this.first=0,this.firstChange.emit(this.first))),"multiple"===this.sortMode){let n=e.metaKey||e.ctrlKey,i=this.getSortMeta(t.field);i?n?i.order=-1*i.order:this._multiSortMeta=[{field:t.field,order:-1*i.order}]:(n&&this.multiSortMeta||(this._multiSortMeta=[]),this._multiSortMeta.push({field:t.field,order:this.defaultSortOrder})),this.sortMultiple()}this.isStateful()&&this.saveState(),this.anchorRowIndex=null}sortSingle(){if(this.sortField&&this.sortOrder){this.restoringSort&&(this.restoringSort=!1),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,field:this.sortField,order:this.sortOrder}):this.value.sort((t,e)=>{let n=cO.resolveFieldData(t,this.sortField),i=cO.resolveFieldData(e,this.sortField),r=null;return r=null==n&&null!=i?-1:null!=n&&null==i?1:null==n&&null==i?0:"string"==typeof n&&"string"==typeof i?n.localeCompare(i):n<i?-1:n>i?1:0,this.sortOrder*r}),this.hasFilter()&&this._filter());let t={field:this.sortField,order:this.sortOrder};this.onSort.emit(t),this.tableService.onSort(t)}}sortMultiple(){this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):this.value.sort((t,e)=>this.multisortField(t,e,this.multiSortMeta,0)),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.tableService.onSort(this.multiSortMeta))}multisortField(t,e,n,i){let r=cO.resolveFieldData(t,n[i].field),o=cO.resolveFieldData(e,n[i].field),a=null;if(null==r&&null!=o)a=-1;else if(null!=r&&null==o)a=1;else if(null==r&&null==o)a=0;else if("string"==typeof r||r instanceof String){if(r.localeCompare&&r!=o)return n[i].order*r.localeCompare(o)}else a=r<o?-1:1;return r==o?n.length-1>i?this.multisortField(t,e,n,i+1):0:n[i].order*a}getSortMeta(t){if(this.multiSortMeta&&this.multiSortMeta.length)for(let e=0;e<this.multiSortMeta.length;e++)if(this.multiSortMeta[e].field===t)return this.multiSortMeta[e];return null}isSorted(t){if("single"===this.sortMode)return this.sortField&&this.sortField===t;if("multiple"===this.sortMode){let e=!1;if(this.multiSortMeta)for(let n=0;n<this.multiSortMeta.length;n++)if(this.multiSortMeta[n].field==t){e=!0;break}return e}}handleRowClick(t){let e=t.originalEvent.target,n=e.nodeName,i=e.parentElement&&e.parentElement.nodeName;if("INPUT"!=n&&"BUTTON"!=n&&"A"!=n&&"INPUT"!=i&&"BUTTON"!=i&&"A"!=i&&!Nw.hasClass(t.originalEvent.target,"ui-clickable")){if(this.selectionMode){if(this.preventSelectionSetterPropagation=!0,this.isMultipleSelectionMode()&&t.originalEvent.shiftKey&&null!=this.anchorRowIndex)Nw.clearSelection(),null!=this.rangeRowIndex&&this.clearSelectionRange(t.originalEvent),this.rangeRowIndex=t.rowIndex,this.selectRange(t.originalEvent,t.rowIndex);else{let e=t.rowData,n=this.isSelected(e),i=!this.rowTouched&&this.metaKeySelection,r=this.dataKey?String(cO.resolveFieldData(e,this.dataKey)):null;if(this.anchorRowIndex=t.rowIndex,this.rangeRowIndex=t.rowIndex,i){let i=t.originalEvent.metaKey||t.originalEvent.ctrlKey;if(n&&i){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let t=this.findIndexInSelection(e);this._selection=this.selection.filter((e,n)=>n!=t),this.selectionChange.emit(this.selection),r&&delete this.selectionKeys[r]}this.onRowUnselect.emit({originalEvent:t.originalEvent,data:e,type:"row"})}else this.isSingleSelectionMode()?(this._selection=e,this.selectionChange.emit(e),r&&(this.selectionKeys={},this.selectionKeys[r]=1)):this.isMultipleSelectionMode()&&(i?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,e],this.selectionChange.emit(this.selection),r&&(this.selectionKeys[r]=1)),this.onRowSelect.emit({originalEvent:t.originalEvent,data:e,type:"row",index:t.rowIndex})}else if("single"===this.selectionMode)n?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:t.originalEvent,data:e,type:"row"})):(this._selection=e,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:t.originalEvent,data:e,type:"row",index:t.rowIndex}),r&&(this.selectionKeys={},this.selectionKeys[r]=1));else if("multiple"===this.selectionMode)if(n){let n=this.findIndexInSelection(e);this._selection=this.selection.filter((t,e)=>e!=n),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:t.originalEvent,data:e,type:"row"}),r&&delete this.selectionKeys[r]}else this._selection=this.selection?[...this.selection,e]:[e],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:t.originalEvent,data:e,type:"row",index:t.rowIndex}),r&&(this.selectionKeys[r]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}this.rowTouched=!1}}handleRowTouchEnd(t){this.rowTouched=!0}handleRowRightClick(t){if(this.contextMenu){const e=t.rowData;if("separate"===this.contextMenuSelectionMode)this.contextMenuSelection=e,this.contextMenuSelectionChange.emit(e),this.onContextMenuSelect.emit({originalEvent:t.originalEvent,data:e,index:t.rowIndex}),this.contextMenu.show(t.originalEvent),this.tableService.onContextMenu(e);else if("joint"===this.contextMenuSelectionMode){this.preventSelectionSetterPropagation=!0;let n=this.isSelected(e),i=this.dataKey?String(cO.resolveFieldData(e,this.dataKey)):null;n||(this.isSingleSelectionMode()?(this.selection=e,this.selectionChange.emit(e)):this.isMultipleSelectionMode()&&(this.selection=[e],this.selectionChange.emit(this.selection)),i&&(this.selectionKeys[i]=1)),this.contextMenu.show(t.originalEvent),this.onContextMenuSelect.emit({originalEvent:t,data:e,index:t.rowIndex})}}}selectRange(t,e){let n,i;this.anchorRowIndex>e?(n=e,i=this.anchorRowIndex):this.anchorRowIndex<e?(n=this.anchorRowIndex,i=e):(n=e,i=e),this.lazy&&this.paginator&&(n-=this.first,i-=this.first);for(let r=n;r<=i;r++){let e=this.filteredValue?this.filteredValue[r]:this.value[r];if(!this.isSelected(e)){this._selection=[...this.selection,e];let n=this.dataKey?String(cO.resolveFieldData(e,this.dataKey)):null;n&&(this.selectionKeys[n]=1),this.onRowSelect.emit({originalEvent:t,data:e,type:"row"})}}this.selectionChange.emit(this.selection)}clearSelectionRange(t){let e,n;this.rangeRowIndex>this.anchorRowIndex?(e=this.anchorRowIndex,n=this.rangeRowIndex):this.rangeRowIndex<this.anchorRowIndex?(e=this.rangeRowIndex,n=this.anchorRowIndex):(e=this.rangeRowIndex,n=this.rangeRowIndex);for(let i=e;i<=n;i++){let e=this.value[i],n=this.findIndexInSelection(e);this._selection=this.selection.filter((t,e)=>e!=n);let r=this.dataKey?String(cO.resolveFieldData(e,this.dataKey)):null;r&&delete this.selectionKeys[r],this.onRowUnselect.emit({originalEvent:t,data:e,type:"row"})}}isSelected(t){return!(!t||!this.selection)&&(this.dataKey?void 0!==this.selectionKeys[cO.resolveFieldData(t,this.dataKey)]:this.selection instanceof Array?this.findIndexInSelection(t)>-1:this.equals(t,this.selection))}findIndexInSelection(t){let e=-1;if(this.selection&&this.selection.length)for(let n=0;n<this.selection.length;n++)if(this.equals(t,this.selection[n])){e=n;break}return e}toggleRowWithRadio(t,e){this.preventSelectionSetterPropagation=!0,this.selection!=e?(this._selection=e,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:t.originalEvent,index:t.rowIndex,data:e,type:"radiobutton"}),this.dataKey&&(this.selectionKeys={},this.selectionKeys[String(cO.resolveFieldData(e,this.dataKey))]=1)):(this._selection=null,this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:t.originalEvent,index:t.rowIndex,data:e,type:"radiobutton"})),this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowWithCheckbox(t,e){this.selection=this.selection||[];let n=this.isSelected(e),i=this.dataKey?String(cO.resolveFieldData(e,this.dataKey)):null;if(this.preventSelectionSetterPropagation=!0,n){let n=this.findIndexInSelection(e);this._selection=this.selection.filter((t,e)=>e!=n),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:t.originalEvent,index:t.rowIndex,data:e,type:"checkbox"}),i&&delete this.selectionKeys[i]}else this._selection=this.selection?[...this.selection,e]:[e],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:t.originalEvent,index:t.rowIndex,data:e,type:"checkbox"}),i&&(this.selectionKeys[i]=1);this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowsWithCheckbox(t,e){this._selection=e?this.filteredValue?this.filteredValue.slice():this.value.slice():[],this.preventSelectionSetterPropagation=!0,this.updateSelectionKeys(),this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:t,checked:e}),this.isStateful()&&this.saveState()}equals(t,e){return"equals"===this.compareSelectionBy?t===e:cO.equals(t,e,this.dataKey)}filter(t,e,n){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(t)?this.filters[e]&&delete this.filters[e]:this.filters[e]={value:t,matchMode:n},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay),this.anchorRowIndex=null}filterGlobal(t,e){this.filter(t,"global",e)}isFilterBlank(t){return null==t||"string"==typeof t&&0==t.trim().length||t instanceof Array&&0==t.length}_filter(){if(this.restoringFilter||(this.first=0,this.firstChange.emit(this.first)),this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(this.hasFilter()){let t;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");t=this.globalFilterFields||this.columns}this.filteredValue=[];for(let e=0;e<this.value.length;e++){let n,i=!0,r=!1,o=!1;for(let t in this.filters)if(this.filters.hasOwnProperty(t)&&"global"!==t){o=!0;let n=this.filters[t],r=n.value,a=n.matchMode||"startsWith",s=cO.resolveFieldData(this.value[e],t);if((0,hO[a])(s,r)||(i=!1),!i)break}if(this.filters.global&&!r&&t)for(let a=0;a<t.length&&(r=hO[this.filters.global.matchMode](cO.resolveFieldData(this.value[e],t[a].field||t[a]),this.filters.global.value),!r);a++);n=this.filters.global?o?o&&i&&r:r:o&&i,n&&this.filteredValue.push(this.value[e])}this.filteredValue.length===this.value.length&&(this.filteredValue=null),this.paginator&&(this.totalRecords=this.filteredValue?this.filteredValue.length:this.value?this.value.length:0)}else this.filteredValue=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0)}this.onFilter.emit({filters:this.filters,filteredValue:this.filteredValue||this.value}),this.tableService.onValueChange(this.value),this.isStateful()&&!this.restoringFilter&&this.saveState(),this.restoringFilter&&(this.restoringFilter=!1),this.cd.detectChanges()}hasFilter(){let t=!0;for(let e in this.filters)if(this.filters.hasOwnProperty(e)){t=!1;break}return!t}createLazyLoadMetadata(){return{first:this.first,rows:this.virtualScroll?2*this.rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta}}reset(){this._sortField=null,this._sortOrder=this.defaultSortOrder,this._multiSortMeta=null,this.tableService.onSort(null),this.filteredValue=null,this.filters={},this.first=0,this.firstChange.emit(this.first),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}exportCSV(t){let e=this.filteredValue||this.value,n="";t&&t.selectionOnly&&(e=this.selection||[]);for(let r=0;r<this.columns.length;r++){let t=this.columns[r];!1!==t.exportable&&t.field&&(n+='"'+(t.header||t.field)+'"',r<this.columns.length-1&&(n+=this.csvSeparator))}e.forEach((t,e)=>{n+="\n";for(let i=0;i<this.columns.length;i++){let e=this.columns[i];if(!1!==e.exportable&&e.field){let r=cO.resolveFieldData(t,e.field);r=null!=r?this.exportFunction?this.exportFunction({data:r,field:e.field}):String(r).replace(/"/g,'""'):"",n+='"'+r+'"',i<this.columns.length-1&&(n+=this.csvSeparator)}}});let i=new Blob([n],{type:"text/csv;charset=utf-8;"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(i,this.exportFilename+".csv");else{let t=document.createElement("a");t.style.display="none",document.body.appendChild(t),void 0!==t.download?(t.setAttribute("href",URL.createObjectURL(i)),t.setAttribute("download",this.exportFilename+".csv"),t.click()):(n="data:text/csv;charset=utf-8,"+n,window.open(encodeURI(n))),document.body.removeChild(t)}}updateEditingCell(t,e,n){this.editingCell=t,this.editingCellData=e,this.editingCellField=n,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&0===Nw.find(this.editingCell,".ng-invalid.ng-dirty").length}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=t=>{this.editingCell&&!this.editingCellClick&&this.isEditingCellValid()&&(Nw.removeClass(this.editingCell,"ui-editing-cell"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData,originalEvent:t}),this.editingCellField=null,this.editingCellData=null,this.unbindDocumentEditListener()),this.editingCellClick=!1},document.addEventListener("click",this.documentEditListener))}unbindDocumentEditListener(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null)}initRowEdit(t){let e=String(cO.resolveFieldData(t,this.dataKey));this.editingRowKeys[e]=!0}saveRowEdit(t,e){if(0===Nw.find(e,".ng-invalid.ng-dirty").length){let e=String(cO.resolveFieldData(t,this.dataKey));delete this.editingRowKeys[e]}}cancelRowEdit(t){let e=String(cO.resolveFieldData(t,this.dataKey));delete this.editingRowKeys[e]}toggleRow(t,e){if(!this.dataKey)throw new Error("dataKey must be defined to use row expansion");let n=String(cO.resolveFieldData(t,this.dataKey));null!=this.expandedRowKeys[n]?(delete this.expandedRowKeys[n],this.onRowCollapse.emit({originalEvent:e,data:t})):("single"===this.rowExpandMode&&(this.expandedRowKeys={}),this.expandedRowKeys[n]=!0,this.onRowExpand.emit({originalEvent:e,data:t})),e&&e.preventDefault(),this.isStateful()&&this.saveState()}isRowExpanded(t){return!0===this.expandedRowKeys[String(cO.resolveFieldData(t,this.dataKey))]}isRowEditing(t){return!0===this.editingRowKeys[String(cO.resolveFieldData(t,this.dataKey))]}isSingleSelectionMode(){return"single"===this.selectionMode}isMultipleSelectionMode(){return"multiple"===this.selectionMode}onColumnResizeBegin(t){let e=Nw.getOffset(this.containerViewChild.nativeElement).left;this.lastResizerHelperX=t.pageX-e+this.containerViewChild.nativeElement.scrollLeft,t.preventDefault()}onColumnResize(t){let e=Nw.getOffset(this.containerViewChild.nativeElement).left;Nw.addClass(this.containerViewChild.nativeElement,"ui-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=t.pageX-e+this.containerViewChild.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(t,e){let n=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,i=e.offsetWidth,r=parseInt(e.style.minWidth||15);i+n<r&&(n=r-i);const o=i+n;if(o>=r){if("fit"===this.columnResizeMode){let t=e.nextElementSibling;for(;!t.offsetParent;)t=t.nextElementSibling;if(t){let i=t.offsetWidth-n,r=t.style.minWidth||15;if(o>15&&i>parseInt(r))if(this.scrollable){let t=this.findParentScrollableView(e),n=Nw.findSingle(t,"table.ui-table-scrollable-body-table"),r=Nw.findSingle(t,"table.ui-table-scrollable-header-table"),a=Nw.findSingle(t,"table.ui-table-scrollable-footer-table"),s=Nw.index(e);this.resizeColGroup(r,s,o,i),this.resizeColGroup(n,s,o,i),this.resizeColGroup(a,s,o,i)}else e.style.width=o+"px",t&&(t.style.width=i+"px")}}else"expand"===this.columnResizeMode&&o>r&&(this.scrollable?this.setScrollableItemsWidthOnExpandResize(e,o,n):(this.tableViewChild.nativeElement.style.width=this.tableViewChild.nativeElement.offsetWidth+n+"px",e.style.width=o+"px",this.containerViewChild.nativeElement.style.width=this.tableViewChild.nativeElement.style.width+"px"));this.onColResize.emit({element:e,delta:n}),this.isStateful()&&this.saveState()}this.resizeHelperViewChild.nativeElement.style.display="none",Nw.removeClass(this.containerViewChild.nativeElement,"ui-unselectable-text")}setScrollableItemsWidthOnExpandResize(t,e,n){let i=t?this.findParentScrollableView(t):this.containerViewChild.nativeElement,r=Nw.findSingle(i,".ui-table-scrollable-body"),o=Nw.findSingle(i,".ui-table-scrollable-header"),a=Nw.findSingle(i,".ui-table-scrollable-footer"),s=Nw.findSingle(r,"table.ui-table-scrollable-body-table"),u=Nw.findSingle(o,"table.ui-table-scrollable-header-table"),l=Nw.findSingle(a,"table.ui-table-scrollable-footer-table");const c=t?s.offsetWidth+n:e,h=t?u.offsetWidth+n:e,d=this.containerViewChild.nativeElement.offsetWidth>=c;let p=(t,e,n,i)=>{t&&e&&(t.style.width=i?n+Nw.calculateScrollbarWidth(r)+"px":"auto",e.style.width=n+"px")};if(p(r,s,c,d),p(o,u,h,d),p(a,l,h,d),t){let n=Nw.index(t);this.resizeColGroup(u,n,e,null),this.resizeColGroup(s,n,e,null),this.resizeColGroup(l,n,e,null)}}findParentScrollableView(t){if(t){let e=t.parentElement;for(;e&&!Nw.hasClass(e,"ui-table-scrollable-view");)e=e.parentElement;return e}return null}resizeColGroup(t,e,n,i){if(t){let r="COLGROUP"===t.children[0].nodeName?t.children[0]:null;if(!r)throw"Scrollable tables require a colgroup to support resizable columns";{let t=r.children[e],o=t.nextElementSibling;t.style.width=n+"px",o&&i&&(o.style.width=i+"px")}}}onColumnDragStart(t,e){this.reorderIconWidth=Nw.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild.nativeElement),this.reorderIconHeight=Nw.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild.nativeElement),this.draggedColumn=e,t.dataTransfer.setData("text","b")}onColumnDragEnter(t,e){if(this.reorderableColumns&&this.draggedColumn&&e){t.preventDefault();let n=Nw.getOffset(this.containerViewChild.nativeElement),i=Nw.getOffset(e);if(this.draggedColumn!=e){let r=Nw.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),o=Nw.indexWithinGroup(e,"preorderablecolumn"),a=i.left-n.left,s=i.left+e.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=i.top-n.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=i.top-n.top+e.offsetHeight+"px",t.pageX>s?(this.reorderIndicatorUpViewChild.nativeElement.style.left=a+e.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=a+e.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=a-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=a-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),o-r==1&&-1===this.dropPosition||o-r==-1&&1===this.dropPosition?(this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none"):(this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block")}else t.dataTransfer.dropEffect="none"}}onColumnDragLeave(t){this.reorderableColumns&&this.draggedColumn&&(t.preventDefault(),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none")}onColumnDrop(t,e){if(t.preventDefault(),this.draggedColumn){let t=Nw.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),n=Nw.indexWithinGroup(e,"preorderablecolumn"),i=t!=n;i&&(n-t==1&&-1===this.dropPosition||t-n==1&&1===this.dropPosition)&&(i=!1),i&&n<t&&1===this.dropPosition&&(n+=1),i&&n>t&&-1===this.dropPosition&&(n-=1),i&&(cO.reorderArray(this.columns,t,n),this.onColReorder.emit({dragIndex:t,dropIndex:n,columns:this.columns}),this.isStateful()&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.saveState()})})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}onRowDragStart(t,e){this.rowDragging=!0,this.draggedRowIndex=e,t.dataTransfer.setData("text","b")}onRowDragOver(t,e,n){if(this.rowDragging&&this.draggedRowIndex!==e){let i=Nw.getOffset(n).top+Nw.getWindowScrollTop(),r=t.pageY,o=i+Nw.getOuterHeight(n)/2,a=n.previousElementSibling;r<o?(Nw.removeClass(n,"ui-table-dragpoint-bottom"),this.droppedRowIndex=e,a?Nw.addClass(a,"ui-table-dragpoint-bottom"):Nw.addClass(n,"ui-table-dragpoint-top")):(a?Nw.removeClass(a,"ui-table-dragpoint-bottom"):Nw.addClass(n,"ui-table-dragpoint-top"),this.droppedRowIndex=e+1,Nw.addClass(n,"ui-table-dragpoint-bottom"))}}onRowDragLeave(t,e){let n=e.previousElementSibling;n&&Nw.removeClass(n,"ui-table-dragpoint-bottom"),Nw.removeClass(e,"ui-table-dragpoint-bottom"),Nw.removeClass(e,"ui-table-dragpoint-top")}onRowDragEnd(t){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null}onRowDrop(t,e){if(null!=this.droppedRowIndex){let t=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:0===this.droppedRowIndex?0:this.droppedRowIndex-1;cO.reorderArray(this.value,this.draggedRowIndex,t),this.onRowReorder.emit({dragIndex:this.draggedRowIndex,dropIndex:t})}this.onRowDragLeave(t,e),this.onRowDragEnd(t)}handleVirtualScroll(t){this.first=(t.page-1)*this.rows,this.firstChange.emit(this.first),this.virtualScrollCallback=t.callback,this.zone.run(()=>{this.virtualScrollTimer&&clearTimeout(this.virtualScrollTimer),this.virtualScrollTimer=setTimeout(()=>{this.onLazyLoad.emit(this.createLazyLoadMetadata())},this.virtualScrollDelay)})}isEmpty(){let t=this.filteredValue||this.value;return null==t||0==t.length}getBlockableElement(){return this.el.nativeElement.children[0]}getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}isStateful(){return null!=this.stateKey}saveState(){const t=this.getStorage();let e={};this.paginator&&(e.first=this.first,e.rows=this.rows),this.sortField&&(e.sortField=this.sortField,e.sortOrder=this.sortOrder),this.multiSortMeta&&(e.multiSortMeta=this.multiSortMeta),this.hasFilter()&&(e.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(e),this.reorderableColumns&&this.saveColumnOrder(e),this.selection&&(e.selection=this.selection),Object.keys(this.expandedRowKeys).length&&(e.expandedRowKeys=this.expandedRowKeys),Object.keys(e).length&&t.setItem(this.stateKey,JSON.stringify(e)),this.onStateSave.emit(e)}clearState(){const t=this.getStorage();this.stateKey&&t.removeItem(this.stateKey)}restoreState(){const t=this.getStorage().getItem(this.stateKey);if(t){let e=JSON.parse(t);this.paginator&&(this.first=e.first,this.rows=e.rows,this.firstChange.emit(this.first),this.rowsChange.emit(this.rows)),e.sortField&&(this.restoringSort=!0,this._sortField=e.sortField,this._sortOrder=e.sortOrder),e.multiSortMeta&&(this.restoringSort=!0,this._multiSortMeta=e.multiSortMeta),e.filters&&(this.restoringFilter=!0,this.filters=e.filters),this.resizableColumns&&(this.columnWidthsState=e.columnWidths,this.tableWidthState=e.tableWidth),e.expandedRowKeys&&(this.expandedRowKeys=e.expandedRowKeys),e.selection&&Promise.resolve(null).then(()=>this.selectionChange.emit(e.selection)),this.stateRestored=!0,this.onStateRestore.emit(e)}}saveColumnWidths(t){let e=[];Nw.find(this.containerViewChild.nativeElement,".ui-table-thead > tr:first-child > th").map(t=>e.push(Nw.getOuterWidth(t))),t.columnWidths=e.join(","),"expand"===this.columnResizeMode&&(t.tableWidth=this.scrollable?Nw.findSingle(this.containerViewChild.nativeElement,".ui-table-scrollable-header-table").style.width:Nw.getOuterWidth(this.tableViewChild.nativeElement)+"px")}restoreColumnWidths(){if(this.columnWidthsState){let t=this.columnWidthsState.split(",");if("expand"===this.columnResizeMode&&this.tableWidthState&&(this.scrollable?this.setScrollableItemsWidthOnExpandResize(null,this.tableWidthState,0):(this.tableViewChild.nativeElement.style.width=this.tableWidthState,this.containerViewChild.nativeElement.style.width=this.tableWidthState)),this.scrollable){let e=Nw.find(this.containerViewChild.nativeElement,".ui-table-scrollable-header-table > colgroup > col"),n=Nw.find(this.containerViewChild.nativeElement,".ui-table-scrollable-body-table > colgroup > col");e.map((e,n)=>e.style.width=t[n]+"px"),n.map((e,n)=>e.style.width=t[n]+"px")}else Nw.find(this.tableViewChild.nativeElement,".ui-table-thead > tr:first-child > th").map((e,n)=>e.style.width=t[n]+"px")}}saveColumnOrder(t){if(this.columns){let e=[];this.columns.map(t=>{e.push(t.field||t.key)}),t.columnOrder=e}}restoreColumnOrder(){const t=this.getStorage().getItem(this.stateKey);if(t){let e=JSON.parse(t).columnOrder;if(e){let t=[];e.map(e=>t.push(this.findColumnByKey(e))),this.columnOrderStateRestored=!0,this.columns=t}}}findColumnByKey(t){if(!this.columns)return null;for(let e of this.columns)if(e.key===t||e.field===t)return e}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.initialized=null}};return t.\u0275fac=function(e){return new(e||t)(fa(zs),fa(Il),fa(SE),fa(Ao))},t.\u0275cmp=me({type:t,selectors:[["p-table"]],contentQueries:function(t,e,n){var i;1&t&&el(n,gC,!1),2&t&&Yu(i=rl())&&(e.templates=i)},viewQuery:function(t,e){var n;1&t&&(Ju(mk,!0),Ju(yk,!0),Ju(_k,!0),Ju(vk,!0),Ju(bk,!0)),2&t&&(Yu(n=rl())&&(e.containerViewChild=n.first),Yu(n=rl())&&(e.resizeHelperViewChild=n.first),Yu(n=rl())&&(e.reorderIndicatorUpViewChild=n.first),Yu(n=rl())&&(e.reorderIndicatorDownViewChild=n.first),Yu(n=rl())&&(e.tableViewChild=n.first))},inputs:{pageLinks:"pageLinks",alwaysShowPaginator:"alwaysShowPaginator",paginatorPosition:"paginatorPosition",paginatorDropdownScrollHeight:"paginatorDropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",defaultSortOrder:"defaultSortOrder",sortMode:"sortMode",resetPageOnSort:"resetPageOnSort",contextMenuSelectionMode:"contextMenuSelectionMode",rowTrackBy:"rowTrackBy",lazy:"lazy",lazyLoadOnInit:"lazyLoadOnInit",compareSelectionBy:"compareSelectionBy",csvSeparator:"csvSeparator",exportFilename:"exportFilename",filters:"filters",filterDelay:"filterDelay",expandedRowKeys:"expandedRowKeys",editingRowKeys:"editingRowKeys",rowExpandMode:"rowExpandMode",virtualScrollDelay:"virtualScrollDelay",virtualRowHeight:"virtualRowHeight",columnResizeMode:"columnResizeMode",loadingIcon:"loadingIcon",showLoader:"showLoader",stateStorage:"stateStorage",editMode:"editMode",totalRecords:"totalRecords",value:"value",columns:"columns",first:"first",rows:"rows",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection",contextMenuSelection:"contextMenuSelection",frozenColumns:"frozenColumns",frozenValue:"frozenValue",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",paginator:"paginator",rowsPerPageOptions:"rowsPerPageOptions",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",showCurrentPageReport:"showCurrentPageReport",selectionMode:"selectionMode",dataKey:"dataKey",metaKeySelection:"metaKeySelection",globalFilterFields:"globalFilterFields",scrollable:"scrollable",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",frozenWidth:"frozenWidth",responsive:"responsive",contextMenu:"contextMenu",resizableColumns:"resizableColumns",reorderableColumns:"reorderableColumns",loading:"loading",rowHover:"rowHover",customSort:"customSort",autoLayout:"autoLayout",exportFunction:"exportFunction",stateKey:"stateKey"},outputs:{selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onRowSelect:"onRowSelect",onRowUnselect:"onRowUnselect",onPage:"onPage",onSort:"onSort",onFilter:"onFilter",onLazyLoad:"onLazyLoad",onRowExpand:"onRowExpand",onRowCollapse:"onRowCollapse",onContextMenuSelect:"onContextMenuSelect",onColResize:"onColResize",onColReorder:"onColReorder",onRowReorder:"onRowReorder",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",sortFunction:"sortFunction",firstChange:"firstChange",rowsChange:"rowsChange",onStateSave:"onStateSave",onStateRestore:"onStateRestore"},features:[Ds([SE]),Cs],decls:13,vars:21,consts:[[3,"ngStyle","ngClass"],["container",""],["class","ui-table-loading ui-widget-overlay",4,"ngIf"],["class","ui-table-loading-content",4,"ngIf"],["class","ui-table-caption ui-widget-header",4,"ngIf"],["styleClass","ui-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showCurrentPageReport","onPageChange",4,"ngIf"],["class","ui-table-wrapper",4,"ngIf"],["class","ui-table-scrollable-wrapper",4,"ngIf"],["styleClass","ui-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showCurrentPageReport","onPageChange",4,"ngIf"],["class","ui-table-summary ui-widget-header",4,"ngIf"],["class","ui-column-resizer-helper ui-state-highlight","style","display:none",4,"ngIf"],["class","pi pi-arrow-down ui-table-reorder-indicator-up","style","display:none",4,"ngIf"],["class","pi pi-arrow-up ui-table-reorder-indicator-down","style","display:none",4,"ngIf"],[1,"ui-table-loading","ui-widget-overlay"],[1,"ui-table-loading-content"],[1,"ui-table-caption","ui-widget-header"],[4,"ngTemplateOutlet"],["styleClass","ui-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showCurrentPageReport","onPageChange"],[1,"ui-table-wrapper"],["role","grid",3,"ngClass","ngStyle"],["table",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ui-table-thead"],[1,"ui-table-tbody",3,"pTableBody","pTableBodyTemplate"],["class","ui-table-tfoot",4,"ngIf"],[1,"ui-table-tfoot"],[1,"ui-table-scrollable-wrapper"],["class","ui-table-scrollable-view ui-table-frozen-view",3,"pScrollableView","frozen","ngStyle","scrollHeight",4,"ngIf"],[1,"ui-table-scrollable-view",3,"pScrollableView","frozen","scrollHeight","ngStyle"],[1,"ui-table-scrollable-view","ui-table-frozen-view",3,"pScrollableView","frozen","ngStyle","scrollHeight"],["styleClass","ui-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showCurrentPageReport","onPageChange"],[1,"ui-table-summary","ui-widget-header"],[1,"ui-column-resizer-helper","ui-state-highlight",2,"display","none"],["resizeHelper",""],[1,"pi","pi-arrow-down","ui-table-reorder-indicator-up",2,"display","none"],["reorderIndicatorUp",""],[1,"pi","pi-arrow-up","ui-table-reorder-indicator-down",2,"display","none"],["reorderIndicatorDown",""]],template:function(t,e){1&t&&(va(0,"div",0,1),da(2,xk,1,0,"div",2),da(3,wk,2,2,"div",3),da(4,Pk,2,1,"div",4),da(5,Mk,1,12,"p-paginator",5),da(6,Ak,8,13,"div",6),da(7,Fk,3,8,"div",7),da(8,Lk,1,12,"p-paginator",8),da(9,Nk,2,1,"div",9),da(10,Bk,2,0,"div",10),da(11,Vk,2,0,"span",11),da(12,Uk,2,0,"span",12),ba()),2&t&&(Ja(e.styleClass),ya("ngStyle",e.style)("ngClass",Iu(15,jk,e.responsive,e.resizableColumns,e.resizableColumns&&"fit"===e.columnResizeMode,e.rowHover||e.selectionMode,e.autoLayout)),rr(2),ya("ngIf",e.loading&&e.showLoader),rr(1),ya("ngIf",e.loading&&e.showLoader),rr(1),ya("ngIf",e.captionTemplate),rr(1),ya("ngIf",e.paginator&&("top"===e.paginatorPosition||"both"==e.paginatorPosition)),rr(1),ya("ngIf",!e.scrollable),rr(1),ya("ngIf",e.scrollable),rr(1),ya("ngIf",e.paginator&&("bottom"===e.paginatorPosition||"both"==e.paginatorPosition)),rr(1),ya("ngIf",e.summaryTemplate),rr(1),ya("ngIf",e.resizableColumns),rr(1),ya("ngIf",e.reorderableColumns),rr(1),ya("ngIf",e.reorderableColumns))},directives:function(){return[Bc,Ic,Lc,Vc,fk,AE,IE]},encapsulation:2}),t})(),AE=(()=>{let t=class{constructor(t){this.dt=t}};return t.\u0275fac=function(e){return new(e||t)(fa(TE))},t.\u0275cmp=me({type:t,selectors:[["","pTableBody",""]],inputs:{columns:["pTableBody","columns"],template:["pTableBodyTemplate","template"],frozen:"frozen"},attrs:qk,decls:3,vars:3,consts:[[4,"ngIf"],["ngFor","",3,"ngForOf","ngForTrackBy"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(da(0,Wk,3,6,"ng-container",0),da(1,tE,3,6,"ng-container",0),da(2,iE,2,5,"ng-container",0)),2&t&&(ya("ngIf",!e.dt.expandedRowTemplate),rr(1),ya("ngIf",e.dt.expandedRowTemplate),rr(1),ya("ngIf",e.dt.isEmpty()))},directives:[Lc,Rc,Vc],pipes:[Gc],encapsulation:2}),t})(),IE=(()=>{let t=class{constructor(t,e,n){this.dt=t,this.el=e,this.zone=n,this.loadingArray=[],this.subscription=this.dt.tableService.valueSource$.subscribe(()=>{this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.alignScrollBar(),this.scrollLoadingTableViewChild&&this.scrollLoadingTableViewChild.nativeElement&&(this.scrollLoadingTableViewChild.nativeElement.style.display="none")},50)})}),this.dt.virtualScroll&&(this.totalRecordsSubscription=this.dt.tableService.totalRecordsSource$.subscribe(()=>{this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.setVirtualScrollerHeight()},50)})})),this.loadingArray=Array(this.dt.rows).fill(1),this.initialized=!1}get scrollHeight(){return this._scrollHeight}set scrollHeight(t){this._scrollHeight=t,this.setScrollHeight()}ngAfterViewChecked(){!this.initialized&&this.el.nativeElement.offsetParent&&(this.alignScrollBar(),this.setScrollHeight(),this.initialized=!0)}ngAfterViewInit(){if(this.frozen){this.scrollableAlignerViewChild&&this.scrollableAlignerViewChild.nativeElement&&(this.scrollableAlignerViewChild.nativeElement.style.height=Nw.calculateScrollbarHeight()+"px");let t=this.el.nativeElement.nextElementSibling;t&&(this.scrollableSiblingBody=Nw.findSingle(t,".ui-table-scrollable-body"))}else{(this.dt.frozenColumns||this.dt.frozenBodyTemplate)&&Nw.addClass(this.el.nativeElement,"ui-table-unfrozen-view");let t=this.el.nativeElement.previousElementSibling;t&&(this.frozenSiblingBody=Nw.findSingle(t,".ui-table-scrollable-body"))}this.bindEvents(),this.setScrollHeight(),this.alignScrollBar(),this.frozen&&(this.columnsSubscription=this.dt.tableService.columnsSource$.subscribe(()=>{this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.setScrollHeight()},50)})})),this.dt.virtualScroll&&(this.setVirtualScrollerHeight(),this.scrollLoadingTableViewChild&&this.scrollLoadingTableViewChild.nativeElement&&(this.scrollLoadingTableViewChild.nativeElement.style.display="table"))}bindEvents(){this.zone.runOutsideAngular(()=>{Nw.calculateScrollbarWidth(),this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.headerScrollListener=this.onHeaderScroll.bind(this),this.scrollHeaderViewChild.nativeElement.addEventListener("scroll",this.headerScrollListener)),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.footerScrollListener=this.onFooterScroll.bind(this),this.scrollFooterViewChild.nativeElement.addEventListener("scroll",this.footerScrollListener)),this.frozen||(this.bodyScrollListener=this.onBodyScroll.bind(this),this.scrollBodyViewChild.nativeElement.addEventListener("scroll",this.bodyScrollListener))})}unbindEvents(){this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&this.scrollHeaderViewChild.nativeElement.removeEventListener("scroll",this.headerScrollListener),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&this.scrollFooterViewChild.nativeElement.removeEventListener("scroll",this.footerScrollListener),this.scrollBodyViewChild.nativeElement.removeEventListener("scroll",this.bodyScrollListener)}onHeaderScroll(t){const e=this.scrollHeaderViewChild.nativeElement.scrollLeft;this.scrollBodyViewChild.nativeElement.scrollLeft=e,this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.scrollFooterViewChild.nativeElement.scrollLeft=e),this.preventBodyScrollPropagation=!0}onFooterScroll(t){const e=this.scrollFooterViewChild.nativeElement.scrollLeft;this.scrollBodyViewChild.nativeElement.scrollLeft=e,this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.scrollHeaderViewChild.nativeElement.scrollLeft=e),this.preventBodyScrollPropagation=!0}onBodyScroll(t){if(this.preventBodyScrollPropagation)this.preventBodyScrollPropagation=!1;else if(this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.scrollHeaderBoxViewChild.nativeElement.style.marginLeft=-1*this.scrollBodyViewChild.nativeElement.scrollLeft+"px"),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.scrollFooterBoxViewChild.nativeElement.style.marginLeft=-1*this.scrollBodyViewChild.nativeElement.scrollLeft+"px"),this.frozenSiblingBody&&(this.frozenSiblingBody.scrollTop=this.scrollBodyViewChild.nativeElement.scrollTop),this.dt.virtualScroll){let t=Nw.getOuterHeight(this.scrollBodyViewChild.nativeElement),e=Nw.getOuterHeight(this.scrollTableViewChild.nativeElement),n=this.dt.virtualRowHeight*this.dt.rows,i=Nw.getOuterHeight(this.virtualScrollerViewChild.nativeElement)/n||1,r=this.scrollTableViewChild.nativeElement.style.top||"0";if(this.scrollBodyViewChild.nativeElement.scrollTop+t>parseFloat(r)+e||this.scrollBodyViewChild.nativeElement.scrollTop<parseFloat(r)){this.scrollLoadingTableViewChild&&this.scrollLoadingTableViewChild.nativeElement&&(this.scrollLoadingTableViewChild.nativeElement.style.display="table",this.scrollLoadingTableViewChild.nativeElement.style.top=this.scrollBodyViewChild.nativeElement.scrollTop+"px");let t=Math.floor(this.scrollBodyViewChild.nativeElement.scrollTop*i/this.scrollBodyViewChild.nativeElement.scrollHeight)+1;this.dt.handleVirtualScroll({page:t,callback:()=>{this.scrollLoadingTableViewChild&&this.scrollLoadingTableViewChild.nativeElement&&(this.scrollLoadingTableViewChild.nativeElement.style.display="none"),this.scrollTableViewChild.nativeElement.style.top=(t-1)*n+"px",this.frozenSiblingBody&&(this.frozenSiblingBody.children[0].style.top=this.scrollTableViewChild.nativeElement.style.top),this.dt.anchorRowIndex=null}})}}}setScrollHeight(){if(this.scrollHeight&&this.scrollBodyViewChild&&this.scrollBodyViewChild.nativeElement)if(-1!==this.scrollHeight.indexOf("%")){let t;this.scrollBodyViewChild.nativeElement.style.visibility="hidden",this.scrollBodyViewChild.nativeElement.style.height="100px";let e=Nw.getOuterHeight(this.dt.el.nativeElement.children[0]);if(this.scrollHeight.includes("calc")){let e=parseInt(this.scrollHeight.slice(this.scrollHeight.indexOf("(")+1,this.scrollHeight.indexOf("%"))),n=parseInt(this.scrollHeight.slice(this.scrollHeight.indexOf("-")+1,this.scrollHeight.indexOf(")")));t=Nw.getOuterHeight(this.dt.el.nativeElement.parentElement)*e/100-n}else t=Nw.getOuterHeight(this.dt.el.nativeElement.parentElement)*parseInt(this.scrollHeight)/100;let n=t-(e-100);this.frozen&&(n-=Nw.calculateScrollbarWidth()),this.scrollBodyViewChild.nativeElement.style.height="auto",this.scrollBodyViewChild.nativeElement.style.maxHeight=n+"px",this.scrollBodyViewChild.nativeElement.style.visibility="visible"}else this.scrollBodyViewChild.nativeElement.style.maxHeight=this.scrollHeight}setVirtualScrollerHeight(){this.virtualScrollerViewChild.nativeElement&&(this.virtualScrollerViewChild.nativeElement.style.height=this.dt.totalRecords*this.dt.virtualRowHeight+"px")}hasVerticalOverflow(){return Nw.getOuterHeight(this.scrollTableViewChild.nativeElement)>Nw.getOuterHeight(this.scrollBodyViewChild.nativeElement)}alignScrollBar(){if(!this.frozen){let t=this.hasVerticalOverflow()?Nw.calculateScrollbarWidth():0;this.scrollHeaderBoxViewChild.nativeElement.style.marginRight=t+"px",this.scrollFooterBoxViewChild&&this.scrollFooterBoxViewChild.nativeElement&&(this.scrollFooterBoxViewChild.nativeElement.style.marginRight=t+"px")}this.initialized=!1}ngOnDestroy(){this.unbindEvents(),this.frozenSiblingBody=null,this.subscription&&this.subscription.unsubscribe(),this.totalRecordsSubscription&&this.totalRecordsSubscription.unsubscribe(),this.columnsSubscription&&this.columnsSubscription.unsubscribe(),this.initialized=!1}};return t.\u0275fac=function(e){return new(e||t)(fa(TE),fa(zs),fa(Il))},t.\u0275cmp=me({type:t,selectors:[["","pScrollableView",""]],viewQuery:function(t,e){var n;1&t&&(Qu(rE,!0),Qu(oE,!0),Qu(aE,!0),Qu(sE,!0),Ju(uE,!0),Qu(lE,!0),Qu(cE,!0),Ju(hE,!0),Ju(dE,!0)),2&t&&(Yu(n=rl())&&(e.scrollHeaderViewChild=n.first),Yu(n=rl())&&(e.scrollHeaderBoxViewChild=n.first),Yu(n=rl())&&(e.scrollBodyViewChild=n.first),Yu(n=rl())&&(e.scrollTableViewChild=n.first),Yu(n=rl())&&(e.scrollLoadingTableViewChild=n.first),Yu(n=rl())&&(e.scrollFooterViewChild=n.first),Yu(n=rl())&&(e.scrollFooterBoxViewChild=n.first),Yu(n=rl())&&(e.virtualScrollerViewChild=n.first),Yu(n=rl())&&(e.scrollableAlignerViewChild=n.first))},inputs:{scrollHeight:"scrollHeight",columns:["pScrollableView","columns"],frozen:"frozen"},attrs:pE,decls:27,vars:38,consts:[[1,"ui-table-scrollable-header","ui-widget-header"],["scrollHeader",""],[1,"ui-table-scrollable-header-box"],["scrollHeaderBox",""],[1,"ui-table-scrollable-header-table",3,"ngClass","ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ui-table-thead"],[1,"ui-table-tbody"],["ngFor","",3,"ngForOf","ngForTrackBy"],[1,"ui-table-scrollable-body"],["scrollBody",""],[3,"ngClass","ngStyle"],["scrollTable",""],[1,"ui-table-tbody",3,"pTableBody","pTableBodyTemplate","frozen"],[3,"ngClass",4,"ngIf"],["style","background-color:transparent",4,"ngIf"],["class","ui-table-virtual-scroller",4,"ngIf"],[1,"ui-table-scrollable-footer","ui-widget-header"],["scrollFooter",""],[1,"ui-table-scrollable-footer-box"],["scrollFooterBox",""],[1,"ui-table-scrollable-footer-table",3,"ngClass","ngStyle"],[1,"ui-table-tfoot"],[3,"ngClass"],["loadingTable",""],["ngFor","",3,"ngForOf"],[2,"background-color","transparent"],["scrollableAligner",""],[1,"ui-table-virtual-scroller"],["virtualScroller",""]],template:function(t,e){1&t&&(va(0,"div",0,1),va(2,"div",2,3),va(4,"table",4),da(5,fE,1,0,"ng-container",5),va(6,"thead",6),da(7,gE,1,0,"ng-container",5),ba(),va(8,"tbody",7),da(9,yE,1,6,"ng-template",8),ba(),ba(),ba(),ba(),va(10,"div",9,10),va(12,"table",11,12),da(14,_E,1,0,"ng-container",5),xa(15,"tbody",13),ba(),da(16,CE,4,4,"table",14),da(17,PE,2,0,"div",15),da(18,ME,2,0,"div",16),ba(),va(19,"div",17,18),va(21,"div",19,20),va(23,"table",21),da(24,OE,1,0,"ng-container",5),va(25,"tfoot",22),da(26,kE,1,0,"ng-container",5),ba(),ba(),ba(),ba()),2&t&&(rr(4),ya("ngClass",e.dt.tableStyleClass)("ngStyle",e.dt.tableStyle),rr(1),ya("ngTemplateOutlet",e.frozen&&e.dt.frozenColGroupTemplate||e.dt.colGroupTemplate)("ngTemplateOutletContext",Eu(26,Sk,e.columns)),rr(2),ya("ngTemplateOutlet",e.frozen&&e.dt.frozenHeaderTemplate||e.dt.headerTemplate)("ngTemplateOutletContext",Eu(28,Sk,e.columns)),rr(2),ya("ngForOf",e.dt.frozenValue)("ngForTrackBy",e.dt.rowTrackBy),rr(3),Ja(e.dt.tableStyleClass),ya("ngClass",Eu(30,EE,e.dt.virtualScroll))("ngStyle",e.dt.tableStyle),rr(2),ya("ngTemplateOutlet",e.frozen&&e.dt.frozenColGroupTemplate||e.dt.colGroupTemplate)("ngTemplateOutletContext",Eu(32,Sk,e.columns)),rr(1),ya("pTableBody",e.columns)("pTableBodyTemplate",e.frozen&&e.dt.frozenBodyTemplate||e.dt.bodyTemplate)("frozen",e.frozen),rr(1),ya("ngIf",e.dt.virtualScroll&&null!=e.dt.loadingBodyTemplate),rr(1),ya("ngIf",e.frozen),rr(1),ya("ngIf",e.dt.virtualScroll),rr(5),ya("ngClass",e.dt.tableStyleClass)("ngStyle",e.dt.tableStyle),rr(1),ya("ngTemplateOutlet",e.frozen&&e.dt.frozenColGroupTemplate||e.dt.colGroupTemplate)("ngTemplateOutletContext",Eu(34,Sk,e.columns)),rr(2),ya("ngTemplateOutlet",e.frozen&&e.dt.frozenFooterTemplate||e.dt.footerTemplate)("ngTemplateOutletContext",Eu(36,Sk,e.columns)))},directives:[Ic,Bc,Vc,Rc,AE,Lc],encapsulation:2}),t})(),DE=(()=>{let t=class{};return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},imports:[[Hc,gk],mC]}),t})();function RE(t,e){if(1&t&&(va(0,"p-fieldset",9),va(1,"p-header"),ds(2,"Redevelopment Area"),ba(),va(3,"p",9),xa(4,"span",3),ba(),ba()),2&t){const t=Aa(2);rr(4),Fa("innerHTML",t.propInfo.redevelopm,Si)}}function FE(t,e){if(1&t&&(va(0,"p",9),xa(1,"span",3),ba()),2&t){const t=Aa(3);rr(1),La("innerHTML","",t.propInfo.historic_d," Historic District",Si)}}function LE(t,e){if(1&t&&(va(0,"p",9),xa(1,"span",3),ba()),2&t){const t=Aa(3);rr(1),Fa("innerHTML",t.propInfo.landmark,Si)}}function zE(t,e){if(1&t&&(va(0,"p-fieldset",9),va(1,"p-header"),ds(2,"Historic Designations"),ba(),da(3,FE,2,1,"p",8),da(4,LE,2,1,"p",8),ba()),2&t){const t=Aa(2);rr(3),ya("ngIf","N/A"!=t.propInfo.historic_d),rr(1),ya("ngIf","N/A"!=t.propInfo.landmark)}}function NE(t,e){1&t&&(va(0,"tr"),va(1,"th"),ds(2,"Accessory Use"),ba(),ba())}function BE(t,e){if(1&t&&(va(0,"tr"),va(1,"td"),ds(2),ba(),ba()),2&t){const t=e.$implicit;rr(2),ps(t)}}const VE=function(){return{"text-align":"left",margin:".85rem .85rem 0 1.85rem"}};function UE(t,e){if(1&t){const t=Ma();va(0,"p-card",2),va(1,"p-header"),xa(2,"h2",3),Lu(3,"titlecase"),ba(),va(4,"p-subheader",4),xa(5,"p-button",5),xa(6,"br"),va(7,"p-button",6),Ea("onClick",(function(){Ne(t);const e=Aa();return e.copyVal(e.mapInput)})),ba(),ba(),va(8,"div",7),da(9,RE,5,1,"p-fieldset",8),da(10,zE,5,2,"p-fieldset",8),va(11,"p-fieldset",9),va(12,"p-header"),ds(13,"Description"),ba(),xa(14,"p",10),ba(),va(15,"p-fieldset",11),va(16,"p-header"),ds(17," Allowed Building Types"),ba(),xa(18,"p",10),ba(),va(19,"p-fieldset",12),va(20,"p-header"),ds(21," Allowed Primary Uses"),ba(),xa(22,"p",10),ba(),va(23,"p-fieldset",12),va(24,"p-header"),ds(25," Allowed Accessory Uses"),ba(),va(26,"p-table",13),da(27,NE,3,0,"ng-template",14),da(28,BE,3,1,"ng-template",15),ba(),ba(),ba(),ba()}if(2&t){const t=Aa();rr(2),ns(ss,Qa,ku(18,VE),!1),Fa("innerHTML",t.propInfo.proploc?t.propInfo.proploc:function(t,e,n){const i=Le(),r=Li(i,3);return Bu(i,Nu(i,3)?Ru(i,He(),16,r.transform,n,r):r.transform(n))}(0,0,t.propInfo.blocklot),Si),rr(3),La("label","Zone ",t.propInfo.code,""),Fa("styleClass",t.propInfo.code),rr(2),za("label","Block ",t.mapInput.block," |  Lot ",t.mapInput.lot,""),rr(2),ya("ngIf","N/A"!=t.propInfo.redevelopm),rr(1),ya("ngIf","N/A"!=t.propInfo.historic_d||"N/A"!=t.propInfo.landmark),rr(4),Fa("innerHTML",t.propInfo.property_d,Si),rr(1),ya("toggleable",!0),rr(3),Fa("innerHTML",t.propInfo.building_t,Si),rr(1),ya("toggleable",!0),rr(3),Fa("innerHTML",t.propInfo.primary_us,Si),rr(1),ya("toggleable",!0),rr(3),ya("value",t.propInfo.accessory)}}let jE=(()=>{class t{constructor(t,e){this.blocklot=t,this.clipboard=e,this.mapInput={hood:"Click on a neighborhood to learn about it",zoneColor:"black"}}copyVal(t){this.clipboard.copy(`Block ${t.block}, Lot ${t.lot}`)}}return t.\u0275fac=function(e){return new(e||t)(fa(c_),fa(Xc))},t.\u0275cmp=me({type:t,selectors:[["app-sidepanel"]],inputs:{mapInput:"mapInput",propInfo:"propInfo"},decls:3,vars:3,consts:[["ngDefaultControl","",1,"p-md-6","p-col-12",3,"header"],["class","p-md-6 p-col-12","ngDefaultControl","",4,"ngIf"],["ngDefaultControl","",1,"p-md-6","p-col-12"],[3,"innerHTML"],[1,"p-grid"],["icon","pi pi-copy",1,"p-col-12",3,"label","styleClass"],["icon","pi pi-copy","styleClass","ui-button-info",1,"p-col-12",3,"label","onClick"],[1,"p-grid","p-justify-center"],["class","p-col-12",4,"ngIf"],[1,"p-col-12"],[1,"p-col-12",3,"innerHTML"],["collapsed","false",1,"p-col-12",3,"toggleable"],["collapsed","true",1,"p-col-12",3,"toggleable"],[1,"p-col-12",3,"value"],["pTemplate","header"],["pTemplate","body"]],template:function(t,e){1&t&&(va(0,"p-card",0),ds(1),ba(),da(2,UE,29,19,"p-card",1)),2&t&&(Fa("header",e.mapInput.hood),rr(1),fs(" ",e.mapInput.hood,"\n"),rr(1),ya("ngIf",e.mapInput.block&&e.mapInput.lot))},directives:[CC,AC,Lc,pC,NP,tM,TE,gC],pipes:[qc],styles:['@charset "UTF-8";.p-grid{display:flex;flex-wrap:wrap;margin-right:-.5em;margin-left:-.5em;margin-top:-.5em}.p-grid>.p-col,.p-grid>[class*=p-col]{box-sizing:border-box}.p-nogutter{margin-right:0;margin-left:0;margin-top:0}.p-nogutter>.p-col,.p-nogutter>[class*=p-col-]{padding:0}.p-dir-row{flex-direction:row}.p-dir-rev{flex-direction:row-reverse}.p-dir-col{flex-direction:column}.p-dir-col-rev{flex-direction:column-reverse}.p-justify-start{justify-content:flex-start}.p-justify-end{justify-content:flex-end}.p-justify-center{justify-content:center}.p-justify-between{justify-content:space-between}.p-justify-around{justify-content:space-around}.p-justify-even{justify-content:space-evenly}.p-align-start{align-items:flex-start}.p-align-end{align-items:flex-end}.p-align-center{align-items:center}.p-align-baseline{align-items:baseline}.p-align-stretch{align-items:stretch}.p-col{flex-grow:1;flex-basis:0;padding:.5em}.p-col-fixed{flex:0 0 auto;padding:.5em}.p-col-align-start{align-self:flex-start}.p-col-align-end{align-self:flex-end}.p-col-align-center{align-self:center}.p-col-align-baseline{align-self:baseline}.p-col-align-stretch{align-self:stretch}.p-dir-col-rev>.p-col,.p-dir-col>.p-col{flex-basis:auto}.p-col-1,.p-col-2,.p-col-3,.p-col-4,.p-col-5,.p-col-6,.p-col-7,.p-col-8,.p-col-9,.p-col-10,.p-col-11,.p-col-12{flex:0 0 auto;padding:.5em}.p-col-1{width:8.3333%}.p-col-2{width:16.6667%}.p-col-3{width:25%}.p-col-4{width:33.3333%}.p-col-5{width:41.6667%}.p-col-6{width:50%}.p-col-7{width:58.3333%}.p-col-8{width:66.6667%}.p-col-9{width:75%}.p-col-10{width:83.3333%}.p-col-11{width:91.6667%}.p-col-12{width:100%}.p-col-order-first{order:-1}.p-col-order-last{order:13}.p-col-order-0{order:0}.p-col-order-1{order:1}.p-col-order-2{order:2}.p-col-order-3{order:3}.p-col-order-4{order:4}.p-col-order-5{order:5}.p-col-order-6{order:6}.p-col-order-7{order:7}.p-col-order-8{order:8}.p-col-order-9{order:9}.p-col-order-10{order:10}.p-col-order-11{order:11}.p-col-order-12{order:12}.p-offset-12{margin-left:100%}.p-offset-11{margin-left:91.66666667%}.p-offset-10{margin-left:83.33333333%}.p-offset-9{margin-left:75%}.p-offset-8{margin-left:66.66666667%}.p-offset-7{margin-left:58.33333333%}.p-offset-6{margin-left:50%}.p-offset-5{margin-left:41.66666667%}.p-offset-4{margin-left:33.33333333%}.p-offset-3{margin-left:25%}.p-offset-2{margin-left:16.66666667%}.p-offset-1{margin-left:8.33333333%}.p-offset-0{margin-left:0}.p-lg-1,.p-lg-2,.p-lg-3,.p-lg-4,.p-lg-5,.p-lg-6,.p-lg-7,.p-lg-8,.p-lg-9,.p-lg-10,.p-lg-11,.p-lg-12,.p-md-1,.p-md-2,.p-md-3,.p-md-4,.p-md-5,.p-md-6,.p-md-7,.p-md-8,.p-md-9,.p-md-10,.p-md-11,.p-md-12,.p-sm-1,.p-sm-2,.p-sm-3,.p-sm-4,.p-sm-5,.p-sm-6,.p-sm-7,.p-sm-8,.p-sm-9,.p-sm-10,.p-sm-11,.p-sm-12,.p-xl-1,.p-xl-2,.p-xl-3,.p-xl-4,.p-xl-5,.p-xl-6,.p-xl-7,.p-xl-8,.p-xl-9,.p-xl-10,.p-xl-11,.p-xl-12{padding:.5em}.p-col-nogutter{padding:0}@media screen and (min-width:576px){.p-sm-1,.p-sm-2,.p-sm-3,.p-sm-4,.p-sm-5,.p-sm-6,.p-sm-7,.p-sm-8,.p-sm-9,.p-sm-10,.p-sm-11,.p-sm-12{flex:0 0 auto}.p-sm-1{width:8.3333%}.p-sm-2{width:16.6667%}.p-sm-3{width:25%}.p-sm-4{width:33.3333%}.p-sm-5{width:41.6667%}.p-sm-6{width:50%}.p-sm-7{width:58.3333%}.p-sm-8{width:66.6667%}.p-sm-9{width:75%}.p-sm-10{width:83.3333%}.p-sm-11{width:91.6667%}.p-sm-12{width:100%}.p-sm-offset-12{margin-left:100%}.p-sm-offset-11{margin-left:91.66666667%}.p-sm-offset-10{margin-left:83.33333333%}.p-sm-offset-9{margin-left:75%}.p-sm-offset-8{margin-left:66.66666667%}.p-sm-offset-7{margin-left:58.33333333%}.p-sm-offset-6{margin-left:50%}.p-sm-offset-5{margin-left:41.66666667%}.p-sm-offset-4{margin-left:33.33333333%}.p-sm-offset-3{margin-left:25%}.p-sm-offset-2{margin-left:16.66666667%}.p-sm-offset-1{margin-left:8.33333333%}.p-sm-offset-0{margin-left:0}.p-sm-order-first{order:-1}.p-sm-order-last{order:13}.p-sm-order-0{order:0}.p-sm-order-1{order:1}.p-sm-order-2{order:2}.p-sm-order-3{order:3}.p-sm-order-4{order:4}.p-sm-order-5{order:5}.p-sm-order-6{order:6}.p-sm-order-7{order:7}.p-sm-order-8{order:8}.p-sm-order-9{order:9}.p-sm-order-10{order:10}.p-sm-order-11{order:11}.p-sm-order-12{order:12}}@media screen and (min-width:768px){.p-md-1,.p-md-2,.p-md-3,.p-md-4,.p-md-5,.p-md-6,.p-md-7,.p-md-8,.p-md-9,.p-md-10,.p-md-11,.p-md-12{flex:0 0 auto}.p-md-1{width:8.3333%}.p-md-2{width:16.6667%}.p-md-3{width:25%}.p-md-4{width:33.3333%}.p-md-5{width:41.6667%}.p-md-6{width:50%}.p-md-7{width:58.3333%}.p-md-8{width:66.6667%}.p-md-9{width:75%}.p-md-10{width:83.3333%}.p-md-11{width:91.6667%}.p-md-12{width:100%}.p-md-offset-12{margin-left:100%}.p-md-offset-11{margin-left:91.66666667%}.p-md-offset-10{margin-left:83.33333333%}.p-md-offset-9{margin-left:75%}.p-md-offset-8{margin-left:66.66666667%}.p-md-offset-7{margin-left:58.33333333%}.p-md-offset-6{margin-left:50%}.p-md-offset-5{margin-left:41.66666667%}.p-md-offset-4{margin-left:33.33333333%}.p-md-offset-3{margin-left:25%}.p-md-offset-2{margin-left:16.66666667%}.p-md-offset-1{margin-left:8.33333333%}.p-md-offset-0{margin-left:0}.p-md-order-first{order:-1}.p-md-order-last{order:13}.p-md-order-0{order:0}.p-md-order-1{order:1}.p-md-order-2{order:2}.p-md-order-3{order:3}.p-md-order-4{order:4}.p-md-order-5{order:5}.p-md-order-6{order:6}.p-md-order-7{order:7}.p-md-order-8{order:8}.p-md-order-9{order:9}.p-md-order-10{order:10}.p-md-order-11{order:11}.p-md-order-12{order:12}}@media screen and (min-width:992px){.p-lg-1,.p-lg-2,.p-lg-3,.p-lg-4,.p-lg-5,.p-lg-6,.p-lg-7,.p-lg-8,.p-lg-9,.p-lg-10,.p-lg-11,.p-lg-12{flex:0 0 auto}.p-lg-1{width:8.3333%}.p-lg-2{width:16.6667%}.p-lg-3{width:25%}.p-lg-4{width:33.3333%}.p-lg-5{width:41.6667%}.p-lg-6{width:50%}.p-lg-7{width:58.3333%}.p-lg-8{width:66.6667%}.p-lg-9{width:75%}.p-lg-10{width:83.3333%}.p-lg-11{width:91.6667%}.p-lg-12{width:100%}.p-lg-offset-12{margin-left:100%}.p-lg-offset-11{margin-left:91.66666667%}.p-lg-offset-10{margin-left:83.33333333%}.p-lg-offset-9{margin-left:75%}.p-lg-offset-8{margin-left:66.66666667%}.p-lg-offset-7{margin-left:58.33333333%}.p-lg-offset-6{margin-left:50%}.p-lg-offset-5{margin-left:41.66666667%}.p-lg-offset-4{margin-left:33.33333333%}.p-lg-offset-3{margin-left:25%}.p-lg-offset-2{margin-left:16.66666667%}.p-lg-offset-1{margin-left:8.33333333%}.p-lg-offset-0{margin-left:0}.p-lg-order-first{order:-1}.p-lg-order-last{order:13}.p-lg-order-0{order:0}.p-lg-order-1{order:1}.p-lg-order-2{order:2}.p-lg-order-3{order:3}.p-lg-order-4{order:4}.p-lg-order-5{order:5}.p-lg-order-6{order:6}.p-lg-order-7{order:7}.p-lg-order-8{order:8}.p-lg-order-9{order:9}.p-lg-order-10{order:10}.p-lg-order-11{order:11}.p-lg-order-12{order:12}}@media screen and (min-width:1200px){.p-xl-1,.p-xl-2,.p-xl-3,.p-xl-4,.p-xl-5,.p-xl-6,.p-xl-7,.p-xl-8,.p-xl-9,.p-xl-10,.p-xl-11,.p-xl-12{flex:0 0 auto}.p-xl-1{width:8.3333%}.p-xl-2{width:16.6667%}.p-xl-3{width:25%}.p-xl-4{width:33.3333%}.p-xl-5{width:41.6667%}.p-xl-6{width:50%}.p-xl-7{width:58.3333%}.p-xl-8{width:66.6667%}.p-xl-9{width:75%}.p-xl-10{width:83.3333%}.p-xl-11{width:91.6667%}.p-xl-12{width:100%}.p-xl-offset-12{margin-left:100%}.p-xl-offset-11{margin-left:91.66666667%}.p-xl-offset-10{margin-left:83.33333333%}.p-xl-offset-9{margin-left:75%}.p-xl-offset-8{margin-left:66.66666667%}.p-xl-offset-7{margin-left:58.33333333%}.p-xl-offset-6{margin-left:50%}.p-xl-offset-5{margin-left:41.66666667%}.p-xl-offset-4{margin-left:33.33333333%}.p-xl-offset-3{margin-left:25%}.p-xl-offset-2{margin-left:16.66666667%}.p-xl-offset-1{margin-left:8.33333333%}.p-xl-offset-0{margin-left:0}.p-xl-order-first{order:-1}.p-xl-order-last{order:13}.p-xl-order-0{order:0}.p-xl-order-1{order:1}.p-xl-order-2{order:2}.p-xl-order-3{order:3}.p-xl-order-4{order:4}.p-xl-order-5{order:5}.p-xl-order-6{order:6}.p-xl-order-7{order:7}.p-xl-order-8{order:8}.p-xl-order-9{order:9}.p-xl-order-10{order:10}.p-xl-order-11{order:11}.p-xl-order-12{order:12}}*{box-sizing:border-box}body .ui-widget{font-family:Open Sans,Helvetica Neue,sans-serif;font-size:14px;text-decoration:none}body .ui-corner-all{border-radius:2px}body .ui-corner-top{border-top-left-radius:2px;border-top-right-radius:2px}body .ui-corner-bottom{border-bottom-left-radius:2px;border-bottom-right-radius:2px}body .ui-corner-left{border-top-left-radius:2px;border-bottom-left-radius:2px}body .ui-corner-right{border-top-right-radius:2px;border-bottom-right-radius:2px}body a{color:#7b95a3;text-decoration:none}body a:hover{color:#6c8999}body a:active{color:#617c8a}body .ui-helper-reset{line-height:normal}body .ui-state-disabled,body .ui-widget:disabled{opacity:.5;filter:alpha(opacity=50)}body .pi{font-size:1.25em}body .ui-inputtext{font-size:14px;color:#666;background:#f4f4f4;padding:.429em;border:1px solid #dadada;transition:border-color .2s,box-shadow .2s;-webkit-appearance:none;-moz-appearance:none;appearance:none}body .ui-inputtext:enabled:hover:not(.ui-state-error){border-color:#a6a6a6}body .ui-inputtext:enabled:focus:not(.ui-state-error){outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7;border-color:#dadada}body .ui-chkbox{display:inline-block;vertical-align:middle;margin:0;width:20px;height:20px}body .ui-chkbox .ui-chkbox-box{border:1px solid #dadada;background-color:#f4f4f4;width:20px;height:20px;text-align:center;border-radius:2px;transition:background-color .2s,border-color .2s,box-shadow .2s}body .ui-chkbox .ui-chkbox-box:not(.ui-state-disabled):hover{border-color:#a6a6a6}body .ui-chkbox .ui-chkbox-box.ui-state-focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7;border-color:#dadada}body .ui-chkbox .ui-chkbox-box.ui-state-active{border-color:#7b95a3;background-color:#7b95a3;color:#fff}body .ui-chkbox .ui-chkbox-box.ui-state-active:not(.ui-state-disabled):hover{border-color:#617c8a;background-color:#617c8a;color:#fff}body .ui-chkbox .ui-chkbox-box .ui-chkbox-icon{overflow:hidden;position:relative;font-size:18px}body .ui-chkbox-label{margin:0 0 0 .5em}body .ui-radiobutton{display:inline-block;vertical-align:middle;margin:0;width:20px;height:20px}body .ui-radiobutton .ui-radiobutton-box{border:1px solid #dadada;background-color:#f4f4f4;width:20px;height:20px;text-align:center;position:relative;transition:background-color .2s,border-color .2s,box-shadow .2s;border-radius:50%}body .ui-radiobutton .ui-radiobutton-box:not(.ui-state-disabled):not(.ui-state-active):hover{border-color:#a6a6a6}body .ui-radiobutton .ui-radiobutton-box.ui-state-focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7;border-color:#dadada}body .ui-radiobutton .ui-radiobutton-box.ui-state-active{border-color:#7b95a3;background-color:#7b95a3;color:#fff}body .ui-radiobutton .ui-radiobutton-box.ui-state-active .ui-radiobutton-icon{background-color:#fff}body .ui-radiobutton .ui-radiobutton-box.ui-state-active:not(.ui-state-disabled):hover{border-color:#617c8a;background-color:#617c8a;color:#fff}body .ui-radiobutton .ui-radiobutton-box .ui-radiobutton-icon{background:transparent;width:10px;height:10px;display:inline-block;position:absolute;left:50%;top:50%;margin-left:-5px;margin-top:-5px;transition:background-color .2s;border-radius:50%}body .ui-radiobutton .ui-radiobutton-box .ui-radiobutton-icon:before{display:none}body .ui-radiobutton-label{margin:0 0 0 .5em}body .ui-inputswitch{width:3em;height:1.75em}body .ui-inputswitch .ui-inputswitch-slider{transition:background-color .2s,box-shadow .2s;border-radius:30px;background:#f4f4f4}body .ui-inputswitch .ui-inputswitch-slider:before{background-color:#7b95a3;height:1.25em;width:1.25em;left:.25em;bottom:.25em;border-radius:50%;transition:.2s}body .ui-inputswitch.ui-inputswitch-checked .ui-inputswitch-slider:before{transform:translateX(1.25em)}body .ui-inputswitch.ui-inputswitch-focus .ui-inputswitch-slider{background:#d8dae2;outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-inputswitch:not(.ui-state-disabled):hover .ui-inputswitch-slider{background-color:#d8dae2}body .ui-inputswitch.ui-inputswitch-checked .ui-inputswitch-slider,body .ui-inputswitch.ui-inputswitch-checked:not(.ui-state-disabled):hover .ui-inputswitch-slider{background-color:#afd3c8}body .ui-inputswitch.ui-inputswitch-checked.ui-inputswitch-focus .ui-inputswitch-slider{background:#afd3c8}body .ui-autocomplete .ui-autocomplete-input{padding:.429em}body .ui-autocomplete.ui-autocomplete-multiple .ui-autocomplete-multiple-container{padding:.2145em .429em}body .ui-autocomplete.ui-autocomplete-multiple .ui-autocomplete-multiple-container:not(.ui-state-disabled):hover{border-color:#a6a6a6}body .ui-autocomplete.ui-autocomplete-multiple .ui-autocomplete-multiple-container:not(.ui-state-disabled).ui-state-focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7;border-color:#dadada}body .ui-autocomplete.ui-autocomplete-multiple .ui-autocomplete-multiple-container .ui-autocomplete-input-token{margin:0;padding:.2145em 0;color:#666}body .ui-autocomplete.ui-autocomplete-multiple .ui-autocomplete-multiple-container .ui-autocomplete-input-token input{font-family:Open Sans,Helvetica Neue,sans-serif;font-size:14px;padding:0;margin:0}body .ui-autocomplete.ui-autocomplete-multiple .ui-autocomplete-multiple-container .ui-autocomplete-token{font-size:14px;padding:.2145em .429em;margin:0 .286em 0 0;background:#afd3c8;color:#385048}body .ui-autocomplete-panel{padding:0;border:1px solid #eaeaea;background-color:#fff;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body .ui-autocomplete-panel .ui-autocomplete-items{padding:0}body .ui-autocomplete-panel .ui-autocomplete-items .ui-autocomplete-list-item{margin:0;padding:.429em .857em;border:0;color:#666;background-color:transparent;border-radius:0}body .ui-autocomplete-panel .ui-autocomplete-items .ui-autocomplete-list-item.ui-state-highlight{color:#385048;background-color:#afd3c8}body .ui-autocomplete-panel .ui-autocomplete-items .ui-autocomplete-group{padding:.429em .857em;background-color:#dadada;color:#666}body .ui-fluid .ui-autocomplete .ui-autocomplete-dropdown.ui-button{width:2.357em}body .ui-fluid .ui-autocomplete.ui-autocomplete-dd .ui-inputtext,body .ui-fluid .ui-autocomplete.ui-autocomplete-multiple.ui-autocomplete-dd .ui-autocomplete-multiple-container{border-right:0;width:calc(100% - 2.357em)}body .ui-chips>ul.ui-inputtext{padding:.2145em .429em;display:inline-block}body .ui-chips>ul.ui-inputtext:not(.ui-state-disabled):hover{border-color:#a6a6a6}body .ui-chips>ul.ui-inputtext:not(.ui-state-disabled).ui-state-focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7;border-color:#dadada}body .ui-chips>ul.ui-inputtext .ui-chips-input-token{padding:.2145em 0}body .ui-chips>ul.ui-inputtext .ui-chips-input-token input{font-family:Open Sans,Helvetica Neue,sans-serif;font-size:14px;padding:0;margin:0;color:#666}body .ui-chips>ul.ui-inputtext .ui-chips-input-token input:focus,body .ui-chips>ul.ui-inputtext .ui-chips-input-token input:hover{border:0}body .ui-chips>ul.ui-inputtext .ui-chips-token{font-size:14px;padding:.2145em .429em;margin:0 .286em 0 0;background:#afd3c8;color:#385048}body .ui-dropdown{background:#f4f4f4;border:1px solid #dadada;transition:border-color .2s,box-shadow .2s}body .ui-dropdown:not(.ui-state-disabled):hover{border-color:#a6a6a6}body .ui-dropdown:not(.ui-state-disabled).ui-state-focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7;border-color:#dadada}body .ui-dropdown .ui-dropdown-label{padding-right:2em}body .ui-dropdown .ui-dropdown-trigger{background-color:#f4f4f4;width:2em;line-height:2em;text-align:center;padding:0;color:#666}body .ui-dropdown .ui-dropdown-clear-icon{color:#666}body .ui-dropdown.ui-dropdown-clearable .ui-dropdown-label{padding-right:4em}body .ui-dropdown-panel{padding:0;border:1px solid #eaeaea;background-color:#fff;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body .ui-dropdown-panel .ui-dropdown-filter-container{padding:.429em .857em;border-bottom:1px solid #eaeaea;color:#666;background-color:#fff;margin:0}body .ui-dropdown-panel .ui-dropdown-filter-container .ui-dropdown-filter{width:100%;padding-right:2em}body .ui-dropdown-panel .ui-dropdown-filter-container .ui-dropdown-filter-icon{top:50%;margin-top:-.5em;right:1.357em;color:#a6a6a6}body .ui-dropdown-panel .ui-dropdown-items{padding:0}body .ui-dropdown-panel .ui-dropdown-items .ui-dropdown-item,body .ui-dropdown-panel .ui-dropdown-items .ui-dropdown-item-group{margin:0;padding:.429em .857em;border:0;color:#666;background-color:transparent;border-radius:0}body .ui-dropdown-panel .ui-dropdown-items .ui-dropdown-item-group.ui-state-highlight,body .ui-dropdown-panel .ui-dropdown-items .ui-dropdown-item.ui-state-highlight{color:#385048;background-color:#afd3c8}body .ui-dropdown-panel .ui-dropdown-items .ui-dropdown-item-group:not(.ui-state-highlight):not(.ui-state-disabled):hover,body .ui-dropdown-panel .ui-dropdown-items .ui-dropdown-item:not(.ui-state-highlight):not(.ui-state-disabled):hover{color:#666;background-color:#f4f4f4}body .ui-multiselect{background:#f4f4f4;border:1px solid #dadada;transition:border-color .2s,box-shadow .2s}body .ui-multiselect:not(.ui-state-disabled):hover{border-color:#a6a6a6}body .ui-multiselect:not(.ui-state-disabled).ui-state-focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7;border-color:#dadada}body .ui-multiselect .ui-multiselect-label{padding:.429em 2em .429em .429em;color:#666}body .ui-multiselect .ui-multiselect-trigger{background-color:#f4f4f4;width:2em;line-height:2em;text-align:center;padding:0;color:#666}body .ui-multiselect-panel{padding:0;border:1px solid #eaeaea;background-color:#fff;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body .ui-multiselect-panel .ui-multiselect-header{padding:.429em .857em;border-bottom:1px solid #eaeaea;color:#666;background-color:#fff;margin:0}body .ui-multiselect-panel .ui-multiselect-header .ui-multiselect-filter-container{float:none;width:70%;display:inline-block;vertical-align:middle;margin-left:0}body .ui-multiselect-panel .ui-multiselect-header .ui-multiselect-filter-container .ui-inputtext{padding:.429em 2em .429em .429em}body .ui-multiselect-panel .ui-multiselect-header .ui-multiselect-filter-container .ui-multiselect-filter-icon{color:#a6a6a6;top:50%;margin-top:-.5em;right:.5em;left:auto}body .ui-multiselect-panel .ui-multiselect-header .ui-chkbox{margin-right:.5em;float:none;vertical-align:middle}body .ui-multiselect-panel .ui-multiselect-header .ui-multiselect-close{color:#666;top:50%;margin-top:-.5em;line-height:1;transition:color .2s,background-color .2s,box-shadow .2s}body .ui-multiselect-panel .ui-multiselect-header .ui-multiselect-close:hover{color:#7b95a3}body .ui-multiselect-panel .ui-multiselect-header .ui-multiselect-close:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-multiselect-panel .ui-multiselect-items{padding:0}body .ui-multiselect-panel .ui-multiselect-items .ui-multiselect-item{margin:0;padding:.429em .857em;border:0;color:#666;background-color:transparent;transition:background-color .2s,box-shadow .2s;border-radius:0}body .ui-multiselect-panel .ui-multiselect-items .ui-multiselect-item.ui-state-highlight{color:#385048;background-color:#afd3c8}body .ui-multiselect-panel .ui-multiselect-items .ui-multiselect-item:not(.ui-state-highlight):not(.ui-state-disabled):hover{color:#666;background-color:#f4f4f4}body .ui-multiselect-panel .ui-multiselect-items .ui-multiselect-item.ui-state-disabled .ui-chkbox-box{cursor:auto}body .ui-multiselect-panel .ui-multiselect-items .ui-multiselect-item.ui-state-disabled .ui-chkbox-box:hover{border:1px solid #dadada}body .ui-multiselect-panel .ui-multiselect-items .ui-multiselect-item.ui-state-disabled .ui-chkbox-box.ui-state-active:hover{border-color:#7b95a3}body .ui-multiselect-panel .ui-multiselect-items .ui-multiselect-item:focus{outline:0 none;outline-offset:0;box-shadow:inset 0 0 0 .2em #e4e9ec}body .ui-multiselect-panel .ui-multiselect-items .ui-multiselect-item .ui-chkbox{position:static;display:inline-block;vertical-align:middle;margin:0 .5em 0 0}body .ui-multiselect-panel .ui-multiselect-items .ui-multiselect-item label{display:inline-block;vertical-align:middle}body .ui-listbox{padding:0;min-width:12em;background:#fff;border:1px solid #eaeaea}body .ui-listbox .ui-chkbox{margin:0 .5em 0 0}body .ui-listbox .ui-listbox-header{padding:.429em .857em;border-bottom:1px solid #eaeaea;color:#666;background-color:#fff;margin:0}body .ui-listbox .ui-listbox-header .ui-listbox-filter-container{width:calc(100% - 2.214em)}body .ui-listbox .ui-listbox-header .ui-listbox-filter-container input{padding:.429em 2em .429em .429em}body .ui-listbox .ui-listbox-header .ui-listbox-filter-container .ui-listbox-filter-icon{top:50%;left:auto;margin-top:-.5em;right:.5em;color:#a6a6a6}body .ui-listbox .ui-listbox-list{background-color:#fff}body .ui-listbox .ui-listbox-list .ui-listbox-item{margin:0;padding:.429em .857em;border:0;color:#666;background-color:transparent;transition:background-color .2s,box-shadow .2s;border-radius:0}body .ui-listbox .ui-listbox-list .ui-listbox-item.ui-state-highlight{color:#385048;background-color:#afd3c8}body .ui-listbox .ui-listbox-list .ui-listbox-item:focus{outline:0 none;outline-offset:0;box-shadow:inset 0 0 0 .2em #e4e9ec}body .ui-listbox .ui-listbox-list .ui-listbox-item .ui-chkbox{position:static;display:inline-block;vertical-align:middle;margin:0 .5em 0 0}body .ui-listbox .ui-listbox-list .ui-listbox-item label{display:inline-block;vertical-align:middle}body .ui-listbox:not(.ui-state-disabled) .ui-listbox-item:not(.ui-state-highlight):not(.ui-state-disabled):hover{color:#666;background-color:#f4f4f4}body .ui-listbox.ui-state-disabled .ui-chkbox-box:not(.ui-state-disabled):not(.ui-state-active):hover{border:1px solid #dadada}body .ui-listbox .ui-listbox-footer{padding:.429em .857em;border-top:1px solid #eaeaea;color:#666;background-color:#fff}body .ui-editor-container .ui-editor-toolbar{border:1px solid #7b95a3;background-color:#7b95a3}body .ui-editor-container .ui-editor-content{border:1px solid #dadada}body .ui-editor-container .ui-editor-content .ql-editor{background-color:#f4f4f4;color:#666}body .ui-editor-container .ql-picker.ql-expanded .ql-picker-label{color:#fff}body .ui-editor-container .ql-stroke{stroke:#fff}body .ui-editor-container .ql-picker-label{color:#fff}body .ui-editor-container .ql-snow.ql-toolbar .ql-picker-item.ql-selected,body .ui-editor-container .ql-snow .ql-toolbar .ql-picker-item.ql-selected,body .ui-editor-container .ql-snow.ql-toolbar .ql-picker-item:hover,body .ui-editor-container .ql-snow .ql-toolbar .ql-picker-item:hover,body .ui-editor-container .ql-snow.ql-toolbar .ql-picker-label.ql-active,body .ui-editor-container .ql-snow .ql-toolbar .ql-picker-label.ql-active,body .ui-editor-container .ql-snow.ql-toolbar .ql-picker-label:hover,body .ui-editor-container .ql-snow .ql-toolbar .ql-picker-label:hover,body .ui-editor-container .ql-snow.ql-toolbar button.ql-active,body .ui-editor-container .ql-snow .ql-toolbar button.ql-active,body .ui-editor-container .ql-snow.ql-toolbar button:hover,body .ui-editor-container .ql-snow .ql-toolbar button:hover{color:#afd3c8}body .ui-editor-container .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,body .ui-editor-container .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,body .ui-editor-container .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,body .ui-editor-container .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,body .ui-editor-container .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke,body .ui-editor-container .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke,body .ui-editor-container .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,body .ui-editor-container .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,body .ui-editor-container .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke,body .ui-editor-container .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke,body .ui-editor-container .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,body .ui-editor-container .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,body .ui-editor-container .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke,body .ui-editor-container .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke,body .ui-editor-container .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,body .ui-editor-container .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,body .ui-editor-container .ql-snow.ql-toolbar button.ql-active .ql-stroke,body .ui-editor-container .ql-snow .ql-toolbar button.ql-active .ql-stroke,body .ui-editor-container .ql-snow.ql-toolbar button.ql-active .ql-stroke-miter,body .ui-editor-container .ql-snow .ql-toolbar button.ql-active .ql-stroke-miter,body .ui-editor-container .ql-snow.ql-toolbar button:hover .ql-stroke,body .ui-editor-container .ql-snow .ql-toolbar button:hover .ql-stroke,body .ui-editor-container .ql-snow.ql-toolbar button:hover .ql-stroke-miter,body .ui-editor-container .ql-snow .ql-toolbar button:hover .ql-stroke-miter{stroke:#afd3c8}body .ui-rating a{text-align:center;display:inline-block;color:#666;border-radius:2px;line-height:1;transition:color .2s,box-shadow .2s}body .ui-rating a.ui-rating-cancel{color:#f3b9b9}body .ui-rating a .ui-rating-icon{font-size:1.429em}body .ui-rating:not(.ui-state-disabled):not(.ui-rating-readonly) a:hover{color:#7b95a3}body .ui-rating:not(.ui-state-disabled):not(.ui-rating-readonly) a.ui-rating-cancel:hover{color:#d66161}body .ui-rating:not(.ui-state-disabled):not(.ui-rating-readonly) a:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-spinner .ui-spinner-input{padding-right:1.858em}body .ui-spinner .ui-spinner-button{width:1.429em}body .ui-spinner .ui-spinner-button.ui-spinner-up{border-top-right-radius:2px}body .ui-spinner .ui-spinner-button.ui-spinner-down{border-bottom-right-radius:2px}body .ui-spinner .ui-spinner-button .ui-spinner-button-icon{position:absolute;top:50%;left:50%;margin-top:-.5em;margin-left:-.5em;width:1em}body .ui-fluid .ui-spinner .ui-spinner-input{padding-right:1.858em}body .ui-fluid .ui-spinner .ui-spinner-button{width:1.429em}body .ui-fluid .ui-spinner .ui-spinner-button .ui-spinner-button-icon{left:50%}body .ui-slider{background-color:#c4c4c4;border:0}body .ui-slider.ui-slider-horizontal{height:.286em}body .ui-slider.ui-slider-horizontal .ui-slider-handle{top:50%;margin-top:-.7145em}body .ui-slider.ui-slider-vertical{width:.286em}body .ui-slider.ui-slider-vertical .ui-slider-handle{left:50%;margin-left:-.7145em}body .ui-slider .ui-slider-handle{height:1.429em;width:1.429em;background-color:#fff;border:2px solid #7f7f7f;border-radius:50%;transition:box-shadow .2s}body .ui-slider .ui-slider-handle:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-slider .ui-slider-range{background-color:#7b95a3}body .ui-slider:not(.ui-state-disabled) .ui-slider-handle:hover{background-color:2px solid #7f7f7f;border:2px solid #7b95a3}body .ui-datepicker{padding:.857em;min-width:18.571em;background-color:#fff;color:#666;border:1px solid #eaeaea}body .ui-datepicker:not(.ui-datepicker-inline){border:1px solid #eaeaea;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body .ui-datepicker:not(.ui-state-disabled) .ui-datepicker-header .ui-datepicker-next:hover,body .ui-datepicker:not(.ui-state-disabled) .ui-datepicker-header .ui-datepicker-prev:hover{color:#666}body .ui-datepicker:not(.ui-state-disabled) .ui-datepicker-header .ui-datepicker-next:focus,body .ui-datepicker:not(.ui-state-disabled) .ui-datepicker-header .ui-datepicker-prev:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-datepicker:not(.ui-state-disabled) .ui-monthpicker a.ui-monthpicker-month:not(.ui-state-active):hover,body .ui-datepicker:not(.ui-state-disabled) table td a:not(.ui-state-active):not(.ui-state-highlight):hover{background-color:#f4f4f4}body .ui-datepicker .ui-datepicker-header{padding:.429em .857em;background-color:#fff;color:#666;border-radius:0}body .ui-datepicker .ui-datepicker-header .ui-datepicker-next,body .ui-datepicker .ui-datepicker-header .ui-datepicker-prev{cursor:pointer;top:0;color:#a6a6a6;transition:color .2s,box-shadow .2s}body .ui-datepicker .ui-datepicker-header .ui-datepicker-title{margin:0;padding:0;line-height:1}body .ui-datepicker .ui-datepicker-header .ui-datepicker-title select{margin-top:-.35em;margin-bottom:0;transition:color .2s,box-shadow .2s}body .ui-datepicker .ui-datepicker-header .ui-datepicker-title select:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-datepicker table{font-size:14px;margin:.857em 0 0}body .ui-datepicker table th{padding:.5em}body .ui-datepicker table th.ui-datepicker-weekheader{border-right:1px solid #eaeaea}body .ui-datepicker table td{padding:.5em}body .ui-datepicker table td>a,body .ui-datepicker table td>span{display:block;text-align:center;color:#666;padding:.5em;transition:box-shadow .2s;border-radius:2px}body .ui-datepicker table td>a.ui-state-active,body .ui-datepicker table td>span.ui-state-active{color:#fff;background-color:#7b95a3}body .ui-datepicker table td>a{cursor:pointer}body .ui-datepicker table td>a:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-datepicker table td.ui-datepicker-today>a,body .ui-datepicker table td.ui-datepicker-today>span{background-color:#d0d0d0;color:#666}body .ui-datepicker table td.ui-datepicker-today>a.ui-state-active,body .ui-datepicker table td.ui-datepicker-today>span.ui-state-active{color:#fff;background-color:#7b95a3}body .ui-datepicker table td.ui-datepicker-weeknumber{border-right:1px solid #eaeaea}body .ui-datepicker .ui-datepicker-buttonbar{border-top:1px solid #d8dae2}body .ui-datepicker .ui-timepicker{border:0;border-top:1px solid #a6a6a6;padding:.857em}body .ui-datepicker .ui-timepicker a{color:#666;font-size:1.286em}body .ui-datepicker .ui-timepicker a:hover{color:#666}body .ui-datepicker .ui-timepicker span{font-size:1.286em}body .ui-datepicker .ui-monthpicker .ui-monthpicker-month{color:#666}body .ui-datepicker .ui-monthpicker .ui-monthpicker-month.ui-state-active{color:#fff;background-color:#7b95a3}body .ui-datepicker.ui-datepicker-timeonly{padding:0}body .ui-datepicker.ui-datepicker-timeonly .ui-timepicker{border-top:0}body .ui-datepicker.ui-datepicker-multiple-month .ui-datepicker-group{border-right:1px solid #d8dae2;padding:0 .857em}body .ui-datepicker.ui-datepicker-multiple-month .ui-datepicker-group:first-child{padding-left:0}body .ui-datepicker.ui-datepicker-multiple-month .ui-datepicker-group:last-child{padding-right:0;border-right:0}body .ui-calendar.ui-calendar-w-btn .ui-inputtext{border-top-right-radius:0;border-bottom-right-radius:0;border-right:0}body .ui-calendar.ui-calendar-w-btn .ui-inputtext:enabled:focus:not(.ui-state-error),body .ui-calendar.ui-calendar-w-btn .ui-inputtext:enabled:hover:not(.ui-state-error){border-right:0}body .ui-calendar.ui-calendar-w-btn .ui-datepicker-trigger.ui-button{width:2.357em;border-top-left-radius:0;border-bottom-left-radius:0}body .ui-fluid .ui-calendar.ui-calendar-w-btn input.ui-inputtext{width:calc(100% - 2.357em)}body .ui-fileupload .ui-fileupload-buttonbar{background-color:#7b95a3;padding:.571em 1em;color:#fff;border:1px solid #7b95a3;border-bottom:0}body .ui-fileupload .ui-fileupload-buttonbar .ui-button{margin-right:8px}body .ui-fileupload .ui-fileupload-content{background-color:#fff;padding:.571em 1em;border:1px solid #dadada;color:#666}body .ui-fileupload .ui-progressbar{top:0}body .ui-fileupload-choose:not(.ui-state-disabled):hover{background-color:#6c8999;color:#fff;border-color:#6c8999}body .ui-fileupload-choose:not(.ui-state-disabled):active{background-color:#617c8a;color:#fff;border-color:#617c8a}body .ui-fileupload-choose.ui-state-focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-password-panel{padding:12px;background-color:#fff;color:#666;border:1px solid #eaeaea;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body .ui-inputgroup .ui-inputgroup-addon{border-color:#dadada;background-color:#dbdbdb;color:#666;padding:.429em;min-width:2em}body .ui-inputgroup .ui-inputgroup-addon:first-child{border-top-left-radius:2px;border-bottom-left-radius:2px}body .ui-inputgroup .ui-inputgroup-addon:last-child{border-top-right-radius:2px;border-bottom-right-radius:2px}body .ui-inputgroup .ui-inputgroup-addon.ui-inputgroup-addon-checkbox{position:relative}body .ui-inputgroup .ui-inputgroup-addon.ui-inputgroup-addon-checkbox .ui-chkbox{position:absolute;top:50%;left:50%;margin-left:-10px;margin-top:-10px}body .ui-inputgroup .ui-inputgroup-addon.ui-inputgroup-addon-radiobutton{position:relative}body .ui-inputgroup .ui-inputgroup-addon.ui-inputgroup-addon-radiobutton .ui-radiobutton{position:absolute;top:50%;left:50%;margin-left:-10px;margin-top:-10px}body .ui-inputgroup .ui-button:first-child{border-top-left-radius:2px;border-bottom-left-radius:2px}body .ui-inputgroup .ui-button:last-child{border-top-right-radius:2px;border-bottom-right-radius:2px}body .ui-fluid .ui-inputgroup .ui-button{width:auto}body .ui-fluid .ui-inputgroup .ui-button.ui-button-icon-only{width:2.357em}body ::-webkit-input-placeholder{color:#a6a6a6}body :-moz-placeholder,body ::-moz-placeholder{color:#a6a6a6}body :-ms-input-placeholder{color:#a6a6a6}body .ui-inputtext.ng-dirty.ng-invalid,body p-autocomplete.ng-dirty.ng-invalid>.ui-autocomplete>.ui-inputtext,body p-calendar.ng-dirty.ng-invalid>.ui-calendar>.ui-inputtext,body p-checkbox.ng-dirty.ng-invalid .ui-chkbox-box,body p-chips.ng-dirty.ng-invalid>.ui-inputtext,body p-dropdown.ng-dirty.ng-invalid>.ui-dropdown,body p-inputmask.ng-dirty.ng-invalid>.ui-inputtext,body p-inputswitch.ng-dirty.ng-invalid .ui-inputswitch,body p-listbox.ng-dirty.ng-invalid .ui-inputtext,body p-multiselect.ng-dirty.ng-invalid>.ui-multiselect,body p-radiobutton.ng-dirty.ng-invalid .ui-radiobutton-box,body p-selectbutton.ng-dirty.ng-invalid .ui-button,body p-spinner.ng-dirty.ng-invalid>.ui-inputtext,body p-togglebutton.ng-dirty.ng-invalid .ui-button{border:1px solid #e7a3a3}body .ui-button{margin:0;color:#fff;background-color:#7b95a3;border:1px solid #617c8a;font-size:14px;transition:background-color .2s,box-shadow .2s}body .ui-button:enabled:hover{background-color:#6c8999;color:#fff;border-color:#6c8999}body .ui-button:enabled:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-button:enabled:active{background-color:#617c8a;color:#fff;border-color:#617c8a}body .ui-button.ui-button-text-only .ui-button-text{padding:.429em 1em}body .ui-button.ui-button-text-icon-left .ui-button-text{padding:.429em 1em .429em 2em}body .ui-button.ui-button-text-icon-right .ui-button-text{padding:.429em 2em .429em 1em}body .ui-button.ui-button-icon-only{width:2.357em}body .ui-button.ui-button-icon-only .ui-button-text{padding:.429em}body .ui-button.ui-button-raised{box-shadow:0 2px 4px 0 rgba(0,0,0,.1)}body .ui-button.ui-button-rounded{border-radius:15px}body .ui-fluid .ui-button-icon-only{width:2.357em}body .ui-togglebutton{background-color:#eaeaea;border:1px solid #eaeaea;color:#333;transition:background-color .2s,box-shadow .2s}body .ui-togglebutton .ui-button-icon-left{color:#666}body .ui-togglebutton:not(.ui-state-disabled):not(.ui-state-active):hover{background-color:#c8c8c8;border-color:#c8c8c8;color:#333}body .ui-togglebutton:not(.ui-state-disabled):not(.ui-state-active):hover .ui-button-icon-left{color:#666}body .ui-togglebutton:not(.ui-state-disabled):not(.ui-state-active).ui-state-focus{box-shadow:0 0 0 .2em #c6d1d7}body .ui-togglebutton.ui-state-active{background-color:#afd3c8;border-color:#afd3c8;color:#385048}body .ui-togglebutton.ui-state-active .ui-button-icon-left{color:#385048}body .ui-togglebutton.ui-state-active:hover{background-color:#8dc8b5;border-color:#8dc8b5;color:#385048}body .ui-togglebutton.ui-state-active:hover .ui-button-icon-left{color:#385048}body .ui-selectbutton .ui-button{background-color:#eaeaea;border:1px solid #eaeaea;color:#333;overflow:hidden;transition:background-color .2s,box-shadow .2s}body .ui-selectbutton .ui-button .ui-button-icon-left{color:#666}body .ui-selectbutton .ui-button:not(.ui-state-disabled):not(.ui-state-active):hover{background-color:#c8c8c8;border-color:#c8c8c8;color:#333}body .ui-selectbutton .ui-button:not(.ui-state-disabled):not(.ui-state-active):hover .ui-button-icon-left{color:#666}body .ui-selectbutton .ui-button:not(.ui-state-disabled):not(.ui-state-active).ui-state-focus{box-shadow:0 0 0 .2em #c6d1d7;z-index:1}body .ui-selectbutton .ui-button.ui-state-active{background-color:#afd3c8;border-color:#afd3c8;color:#385048}body .ui-selectbutton .ui-button.ui-state-active .ui-button-icon-left{color:#385048}body .ui-selectbutton .ui-button.ui-state-active:not(.ui-state-disabled):hover{background-color:#8dc8b5;border-color:#8dc8b5;color:#385048}body .ui-selectbutton .ui-button.ui-state-active:not(.ui-state-disabled):hover .ui-button-icon-left{color:#385048}body .ui-selectbutton .ui-button:first-child{border-top-left-radius:2px;border-bottom-left-radius:2px}body .ui-selectbutton .ui-button:last-child{border-top-right-radius:2px;border-bottom-right-radius:2px}@media (max-width:640px){body .ui-buttonset:not(.ui-splitbutton) .ui-button{margin-bottom:1px;border-radius:2px}}body .ui-splitbutton.ui-buttonset .ui-button{border:1px solid transparent}body .ui-splitbutton.ui-buttonset .ui-menu{min-width:100%}body .ui-button.ui-state-default.ui-button-secondary,body .ui-buttonset.ui-button-secondary>.ui-button.ui-state-default{color:#333;background-color:#f3f3f3;border:1px solid #f3f3f3}body .ui-button.ui-state-default.ui-button-secondary:enabled:hover,body .ui-buttonset.ui-button-secondary>.ui-button.ui-state-default:enabled:hover{background-color:#d1d1d1;color:#212121;border-color:#d1d1d1}body .ui-button.ui-state-default.ui-button-secondary:enabled:focus,body .ui-buttonset.ui-button-secondary>.ui-button.ui-state-default:enabled:focus{box-shadow:0 0 0 .2em #99adb8}body .ui-button.ui-state-default.ui-button-secondary:enabled:active,body .ui-buttonset.ui-button-secondary>.ui-button.ui-state-default:enabled:active{background-color:#7b95a3;color:#fff;border-color:#7b95a3}body .ui-button.ui-state-default.ui-button-info,body .ui-buttonset.ui-button-info>.ui-button.ui-state-default{color:#3d4447;background-color:#a3def8;border:1px solid #79c8eb}body .ui-button.ui-state-default.ui-button-info:enabled:hover,body .ui-buttonset.ui-button-info>.ui-button.ui-state-default:enabled:hover{background-color:#81cbec;color:#3d4447;border-color:#60b7de}body .ui-button.ui-state-default.ui-button-info:enabled:focus,body .ui-buttonset.ui-button-info>.ui-button.ui-state-default:enabled:focus{box-shadow:0 0 0 .2em #d2effc}body .ui-button.ui-state-default.ui-button-info:enabled:active,body .ui-buttonset.ui-button-info>.ui-button.ui-state-default:enabled:active{background-color:#3ea9db;color:#3d4447;border-color:#2987b1}body .ui-button.ui-state-default.ui-button-success,body .ui-buttonset.ui-button-success>.ui-button.ui-state-default{color:#323e39;background-color:#a3e2c6;border:1px solid #80caaa}body .ui-button.ui-state-default.ui-button-success:enabled:hover,body .ui-buttonset.ui-button-success>.ui-button.ui-state-default:enabled:hover{background-color:#80caaa;color:#323e39;border-color:#5ea285}body .ui-button.ui-state-default.ui-button-success:enabled:focus,body .ui-buttonset.ui-button-success>.ui-button.ui-state-default:enabled:focus{box-shadow:0 0 0 .2em #caeede}body .ui-button.ui-state-default.ui-button-success:enabled:active,body .ui-buttonset.ui-button-success>.ui-button.ui-state-default:enabled:active{background-color:#31b57c;color:#323e39;border-color:#5ea285}body .ui-button.ui-state-default.ui-button-warning,body .ui-buttonset.ui-button-warning>.ui-button.ui-state-default{color:#333;background-color:#feedbc;border:1px solid #f7db8a}body .ui-button.ui-state-default.ui-button-warning:enabled:hover,body .ui-buttonset.ui-button-warning>.ui-button.ui-state-default:enabled:hover{background-color:#ffde87;color:#333;border-color:#f3ce61}body .ui-button.ui-state-default.ui-button-warning:enabled:focus,body .ui-buttonset.ui-button-warning>.ui-button.ui-state-default:enabled:focus{box-shadow:0 0 0 .2em #fef4d5}body .ui-button.ui-state-default.ui-button-warning:enabled:active,body .ui-buttonset.ui-button-warning>.ui-button.ui-state-default:enabled:active{background-color:#fdc328;color:#333;border-color:#dea818}body .ui-button.ui-state-default.ui-button-danger,body .ui-buttonset.ui-button-danger>.ui-button.ui-state-default{color:#262222;background-color:#f4b6b6;border:1px solid #e38787}body .ui-button.ui-state-default.ui-button-danger:enabled:hover,body .ui-buttonset.ui-button-danger>.ui-button.ui-state-default:enabled:hover{background-color:#ef9999;color:#262222;border-color:#cb5858}body .ui-button.ui-state-default.ui-button-danger:enabled:focus,body .ui-buttonset.ui-button-danger>.ui-button.ui-state-default:enabled:focus{box-shadow:0 0 0 .2em #fbe2e2}body .ui-button.ui-state-default.ui-button-danger:enabled:active,body .ui-buttonset.ui-button-danger>.ui-button.ui-state-default:enabled:active{background-color:#eb5656;color:#262222;border-color:#b73737}body .ui-widget-content p{line-height:1.5;margin:0}body .ui-panel{padding:0;border:0}body .ui-panel .ui-panel-titlebar{border:1px solid #7b95a3;padding:.571em 1em;background-color:#7b95a3;color:#fff;border-top-left-radius:2px;border-top-right-radius:2px;border-bottom-left-radius:0;border-bottom-right-radius:0}body .ui-panel .ui-panel-titlebar .ui-panel-title{vertical-align:middle;font-weight:700}body .ui-panel .ui-panel-titlebar .ui-panel-titlebar-icon{margin:0;position:relative;font-size:14px;color:#fff;border:1px solid transparent;line-height:1;transition:color .2s,background-color .2s,box-shadow .2s}body .ui-panel .ui-panel-titlebar .ui-panel-titlebar-icon:hover{color:#fff}body .ui-panel .ui-panel-titlebar .ui-panel-titlebar-icon:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-panel .ui-panel-content,body .ui-panel .ui-panel-footer{background-color:#fff;color:#666;padding:.571em 1em;border:1px solid #dadada;border-top:0}body .ui-panel .ui-panel-footer{margin:0}body .ui-fieldset{border:1px solid #dadada;background-color:#fff;color:#666}body .ui-fieldset .ui-fieldset-legend a{padding:.571em 1em;border:1px solid #7b95a3;color:#fff;background-color:#7b95a3;border-radius:2px;transition:background-color .2s,box-shadow .2s}body .ui-fieldset .ui-fieldset-legend a .ui-fieldset-toggler{float:none;display:inline-block;vertical-align:middle;margin-right:.5em;color:#fff}body .ui-fieldset .ui-fieldset-legend a .ui-fieldset-legend-text{padding:0}body .ui-fieldset .ui-fieldset-legend a:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-fieldset.ui-fieldset-toggleable .ui-fieldset-legend a:hover{background-color:#617c8a;border:1px solid #617c8a;color:#fff}body .ui-fieldset.ui-fieldset-toggleable .ui-fieldset-legend a:hover .ui-fieldset-toggler{color:#fff}body .ui-fieldset .ui-fieldset-content{padding:0}body .ui-accordion .ui-accordion-header{margin-bottom:2px}body .ui-accordion .ui-accordion-header a{padding:.571em 1em;border:1px solid #7b95a3;background-color:#7b95a3;color:#fff;font-weight:700;border-radius:2px;transition:background-color .2s,box-shadow .2s}body .ui-accordion .ui-accordion-header a .ui-accordion-toggle-icon{color:#fff}body .ui-accordion .ui-accordion-header a:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-accordion .ui-accordion-header:not(.ui-state-active):not(.ui-state-disabled):hover a{background-color:#617c8a;border:1px solid #617c8a;color:#fff}body .ui-accordion .ui-accordion-header:not(.ui-state-active):not(.ui-state-disabled):hover a .ui-accordion-toggle-icon{color:#fff}body .ui-accordion .ui-accordion-header:not(.ui-state-disabled).ui-state-active a{background-color:#afd3c8;border:1px solid #dadada;color:#385048}body .ui-accordion .ui-accordion-header:not(.ui-state-disabled).ui-state-active a .ui-accordion-toggle-icon{color:#385048}body .ui-accordion .ui-accordion-header:not(.ui-state-disabled).ui-state-active:hover a{border:1px solid #8dc8b5;background-color:#8dc8b5;color:#385048}body .ui-accordion .ui-accordion-header:not(.ui-state-disabled).ui-state-active:hover a .ui-accordion-toggle-icon{color:#385048}body .ui-accordion .ui-accordion-content{border:1px solid #dadada;background-color:#fff;color:#666;padding:.571em 1em}body .ui-tabview.ui-tabview-bottom,body .ui-tabview.ui-tabview-left,body .ui-tabview.ui-tabview-right,body .ui-tabview.ui-tabview-top{border:0}body .ui-tabview.ui-tabview-bottom .ui-tabview-nav,body .ui-tabview.ui-tabview-left .ui-tabview-nav,body .ui-tabview.ui-tabview-right .ui-tabview-nav,body .ui-tabview.ui-tabview-top .ui-tabview-nav{padding:0;background:#fff;border:0}body .ui-tabview.ui-tabview-bottom .ui-tabview-nav li,body .ui-tabview.ui-tabview-left .ui-tabview-nav li,body .ui-tabview.ui-tabview-right .ui-tabview-nav li,body .ui-tabview.ui-tabview-top .ui-tabview-nav li{border:1px solid #7b95a3;background-color:#7b95a3;transition:background-color .2s,box-shadow .2s}body .ui-tabview.ui-tabview-bottom .ui-tabview-nav li a,body .ui-tabview.ui-tabview-left .ui-tabview-nav li a,body .ui-tabview.ui-tabview-right .ui-tabview-nav li a,body .ui-tabview.ui-tabview-top .ui-tabview-nav li a{float:none;display:inline-block;color:#fff;padding:.571em 1em;font-weight:700}body .ui-tabview.ui-tabview-bottom .ui-tabview-nav li a .ui-tabview-left-icon,body .ui-tabview.ui-tabview-left .ui-tabview-nav li a .ui-tabview-left-icon,body .ui-tabview.ui-tabview-right .ui-tabview-nav li a .ui-tabview-left-icon,body .ui-tabview.ui-tabview-top .ui-tabview-nav li a .ui-tabview-left-icon{margin-right:.5em}body .ui-tabview.ui-tabview-bottom .ui-tabview-nav li a .ui-tabview-right-icon,body .ui-tabview.ui-tabview-left .ui-tabview-nav li a .ui-tabview-right-icon,body .ui-tabview.ui-tabview-right .ui-tabview-nav li a .ui-tabview-right-icon,body .ui-tabview.ui-tabview-top .ui-tabview-nav li a .ui-tabview-right-icon{margin-left:.5em}body .ui-tabview.ui-tabview-bottom .ui-tabview-nav li .ui-tabview-close,body .ui-tabview.ui-tabview-left .ui-tabview-nav li .ui-tabview-close,body .ui-tabview.ui-tabview-right .ui-tabview-nav li .ui-tabview-close,body .ui-tabview.ui-tabview-top .ui-tabview-nav li .ui-tabview-close{color:#fff;margin:0 .5em 0 0;vertical-align:middle}body .ui-tabview.ui-tabview-bottom .ui-tabview-nav li .ui-tabview-close:focus,body .ui-tabview.ui-tabview-left .ui-tabview-nav li .ui-tabview-close:focus,body .ui-tabview.ui-tabview-right .ui-tabview-nav li .ui-tabview-close:focus,body .ui-tabview.ui-tabview-top .ui-tabview-nav li .ui-tabview-close:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-tabview.ui-tabview-bottom .ui-tabview-nav li:not(.ui-state-active):not(.ui-state-disabled):hover,body .ui-tabview.ui-tabview-left .ui-tabview-nav li:not(.ui-state-active):not(.ui-state-disabled):hover,body .ui-tabview.ui-tabview-right .ui-tabview-nav li:not(.ui-state-active):not(.ui-state-disabled):hover,body .ui-tabview.ui-tabview-top .ui-tabview-nav li:not(.ui-state-active):not(.ui-state-disabled):hover{background-color:#617c8a;border:1px solid #617c8a}body .ui-tabview.ui-tabview-bottom .ui-tabview-nav li:not(.ui-state-active):not(.ui-state-disabled):hover .ui-tabview-close,body .ui-tabview.ui-tabview-bottom .ui-tabview-nav li:not(.ui-state-active):not(.ui-state-disabled):hover a,body .ui-tabview.ui-tabview-left .ui-tabview-nav li:not(.ui-state-active):not(.ui-state-disabled):hover .ui-tabview-close,body .ui-tabview.ui-tabview-left .ui-tabview-nav li:not(.ui-state-active):not(.ui-state-disabled):hover a,body .ui-tabview.ui-tabview-right .ui-tabview-nav li:not(.ui-state-active):not(.ui-state-disabled):hover .ui-tabview-close,body .ui-tabview.ui-tabview-right .ui-tabview-nav li:not(.ui-state-active):not(.ui-state-disabled):hover a,body .ui-tabview.ui-tabview-top .ui-tabview-nav li:not(.ui-state-active):not(.ui-state-disabled):hover .ui-tabview-close,body .ui-tabview.ui-tabview-top .ui-tabview-nav li:not(.ui-state-active):not(.ui-state-disabled):hover a{color:#fff}body .ui-tabview.ui-tabview-bottom .ui-tabview-nav li.ui-state-active,body .ui-tabview.ui-tabview-left .ui-tabview-nav li.ui-state-active,body .ui-tabview.ui-tabview-right .ui-tabview-nav li.ui-state-active,body .ui-tabview.ui-tabview-top .ui-tabview-nav li.ui-state-active{background-color:#afd3c8;border:1px solid #dadada}body .ui-tabview.ui-tabview-bottom .ui-tabview-nav li.ui-state-active .ui-tabview-close,body .ui-tabview.ui-tabview-bottom .ui-tabview-nav li.ui-state-active a,body .ui-tabview.ui-tabview-left .ui-tabview-nav li.ui-state-active .ui-tabview-close,body .ui-tabview.ui-tabview-left .ui-tabview-nav li.ui-state-active a,body .ui-tabview.ui-tabview-right .ui-tabview-nav li.ui-state-active .ui-tabview-close,body .ui-tabview.ui-tabview-right .ui-tabview-nav li.ui-state-active a,body .ui-tabview.ui-tabview-top .ui-tabview-nav li.ui-state-active .ui-tabview-close,body .ui-tabview.ui-tabview-top .ui-tabview-nav li.ui-state-active a{color:#385048}body .ui-tabview.ui-tabview-bottom .ui-tabview-nav li.ui-state-active:hover,body .ui-tabview.ui-tabview-left .ui-tabview-nav li.ui-state-active:hover,body .ui-tabview.ui-tabview-right .ui-tabview-nav li.ui-state-active:hover,body .ui-tabview.ui-tabview-top .ui-tabview-nav li.ui-state-active:hover{border:1px solid #8dc8b5;background-color:#8dc8b5}body .ui-tabview.ui-tabview-bottom .ui-tabview-nav li.ui-state-active:hover a,body .ui-tabview.ui-tabview-bottom .ui-tabview-nav li.ui-state-active:hover a .ui-tabview-left-icon,body .ui-tabview.ui-tabview-bottom .ui-tabview-nav li.ui-state-active:hover a .ui-tabview-right-icon,body .ui-tabview.ui-tabview-left .ui-tabview-nav li.ui-state-active:hover a,body .ui-tabview.ui-tabview-left .ui-tabview-nav li.ui-state-active:hover a .ui-tabview-left-icon,body .ui-tabview.ui-tabview-left .ui-tabview-nav li.ui-state-active:hover a .ui-tabview-right-icon,body .ui-tabview.ui-tabview-right .ui-tabview-nav li.ui-state-active:hover a,body .ui-tabview.ui-tabview-right .ui-tabview-nav li.ui-state-active:hover a .ui-tabview-left-icon,body .ui-tabview.ui-tabview-right .ui-tabview-nav li.ui-state-active:hover a .ui-tabview-right-icon,body .ui-tabview.ui-tabview-top .ui-tabview-nav li.ui-state-active:hover a,body .ui-tabview.ui-tabview-top .ui-tabview-nav li.ui-state-active:hover a .ui-tabview-left-icon,body .ui-tabview.ui-tabview-top .ui-tabview-nav li.ui-state-active:hover a .ui-tabview-right-icon{color:#385048}body .ui-tabview.ui-tabview-bottom .ui-tabview-nav li.ui-tabview-selected a,body .ui-tabview.ui-tabview-left .ui-tabview-nav li.ui-tabview-selected a,body .ui-tabview.ui-tabview-right .ui-tabview-nav li.ui-tabview-selected a,body .ui-tabview.ui-tabview-top .ui-tabview-nav li.ui-tabview-selected a{cursor:pointer}body .ui-tabview.ui-tabview-bottom .ui-tabview-nav li:focus,body .ui-tabview.ui-tabview-left .ui-tabview-nav li:focus,body .ui-tabview.ui-tabview-right .ui-tabview-nav li:focus,body .ui-tabview.ui-tabview-top .ui-tabview-nav li:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-tabview.ui-tabview-top .ui-tabview-nav{margin-bottom:-1px}body .ui-tabview.ui-tabview-top .ui-tabview-nav li{margin-right:.214em}body .ui-tabview.ui-tabview-bottom .ui-tabview-nav{margin-top:-1px}body .ui-tabview.ui-tabview-bottom .ui-tabview-nav li{margin-right:.214em}body .ui-tabview.ui-tabview-left .ui-tabview-nav{margin-right:-px}body .ui-tabview.ui-tabview-left .ui-tabview-nav li{margin-bottom:.214em}body .ui-tabview.ui-tabview-right .ui-tabview-nav{margin-right:-1px}body .ui-tabview.ui-tabview-right .ui-tabview-nav li{margin-bottom:.214em}body .ui-tabview .ui-tabview-panels{background-color:#fff;padding:.571em 1em;border:1px solid #dadada;color:#666}body .ui-tabview .ui-tabview-panels .ui-tabview-panel{padding:0}body .ui-toolbar{background-color:#7b95a3;border:1px solid #7b95a3;padding:.571em 1em}body .ui-toolbar button{vertical-align:middle}body .ui-toolbar .ui-toolbar-separator{vertical-align:middle;color:#fff;margin:0 .5em}body .ui-card{background-color:#fff;color:#666;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body .ui-paginator{background-color:#fff;border:1px solid #dadada;padding:0}body .ui-paginator .ui-paginator-first,body .ui-paginator .ui-paginator-last,body .ui-paginator .ui-paginator-next,body .ui-paginator .ui-paginator-prev{color:#666;height:2.286em;min-width:2.286em;border:0;line-height:2.286em;padding:0;margin:0;vertical-align:top;transition:box-shadow .2s;border-radius:0}body .ui-paginator .ui-paginator-first:not(.ui-state-disabled):not(.ui-state-active):hover,body .ui-paginator .ui-paginator-last:not(.ui-state-disabled):not(.ui-state-active):hover,body .ui-paginator .ui-paginator-next:not(.ui-state-disabled):not(.ui-state-active):hover,body .ui-paginator .ui-paginator-prev:not(.ui-state-disabled):not(.ui-state-active):hover{background-color:#f4f4f4;color:#666}body .ui-paginator .ui-paginator-first:focus,body .ui-paginator .ui-paginator-last:focus,body .ui-paginator .ui-paginator-next:focus,body .ui-paginator .ui-paginator-prev:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-paginator .ui-paginator-current{color:#666;height:2.286em;min-width:2.286em;line-height:2.286em}body .ui-paginator .ui-dropdown{border:0}body .ui-paginator .ui-dropdown .ui-dropdown-label,body .ui-paginator .ui-dropdown .ui-dropdown-trigger,body .ui-paginator .ui-dropdown:hover .ui-dropdown-label,body .ui-paginator .ui-dropdown:hover .ui-dropdown-trigger{color:#666}body .ui-paginator .ui-paginator-first:before{position:relative;top:1px}body .ui-paginator .ui-paginator-prev:before{position:relative}body .ui-paginator .ui-paginator-last:before,body .ui-paginator .ui-paginator-next:before{position:relative;top:1px}body .ui-paginator .ui-paginator-pages{vertical-align:top;display:inline-block;padding:0}body .ui-paginator .ui-paginator-pages .ui-paginator-page{color:#666;height:2.286em;min-width:2.286em;border:0;line-height:2.286em;padding:0;margin:0;vertical-align:top;transition:box-shadow .2s;border-radius:0}body .ui-paginator .ui-paginator-pages .ui-paginator-page.ui-state-active{background-color:#afd3c8;color:#385048}body .ui-paginator .ui-paginator-pages .ui-paginator-page:not(.ui-state-active):hover{background-color:#f4f4f4;color:#666}body .ui-paginator .ui-paginator-pages .ui-paginator-page:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-paginator .ui-dropdown{margin-left:.5em;height:2.286em;min-width:auto}body .ui-table .ui-table-caption,body .ui-table .ui-table-summary{background-color:#7b95a3;color:#fff;border:1px solid #7b95a3;padding:.571em 1em;text-align:center}body .ui-table .ui-table-caption{border-bottom:0;font-weight:700}body .ui-table .ui-table-summary{border-top:0;font-weight:700}body .ui-table .ui-table-thead>tr>th{padding:.571em .857em;border:1px solid #dadada;font-weight:700;color:#666;background-color:#fff}body .ui-table .ui-table-tbody>tr>td{padding:.571em .857em}body .ui-table .ui-table-tfoot>tr>td{padding:.571em .857em;border:1px solid #dadada;font-weight:700;color:#666;background-color:#fff}body .ui-table .ui-sortable-column{transition:box-shadow .2s}body .ui-table .ui-sortable-column:focus{outline:0 none;outline-offset:0;box-shadow:inset 0 0 0 .2em #e4e9ec}body .ui-table .ui-sortable-column .ui-sortable-column-icon{color:#666}body .ui-table .ui-sortable-column:not(.ui-state-highlight):hover{background-color:#eaeaea;color:#666}body .ui-table .ui-sortable-column:not(.ui-state-highlight):hover .ui-sortable-column-icon{color:#666}body .ui-table .ui-sortable-column.ui-state-highlight{background-color:#afd3c8;color:#385048}body .ui-table .ui-sortable-column.ui-state-highlight .ui-sortable-column-icon{color:#385048}body .ui-table .ui-editable-column input{font-size:14px;font-family:Open Sans,Helvetica Neue,sans-serif}body .ui-table .ui-editable-column input:focus{outline:1px solid #dadada;outline-offset:2px}body .ui-table .ui-table-tbody>tr{background-color:#fff;color:#666}body .ui-table .ui-table-tbody>tr>td{background-color:inherit;border:1px solid #dadada}body .ui-table .ui-table-tbody>tr.ui-state-highlight{background-color:#afd3c8;color:#385048}body .ui-table .ui-table-tbody>tr.ui-state-highlight a{color:#385048}body .ui-table .ui-table-tbody>tr.ui-contextmenu-selected{background-color:#afd3c8;color:#385048}body .ui-table .ui-table-tbody>tr.ui-table-dragpoint-top>td{box-shadow:inset 0 2px 0 0 #afd3c8}body .ui-table .ui-table-tbody>tr.ui-table-dragpoint-bottom>td{box-shadow:inset 0 -2px 0 0 #afd3c8}body .ui-table .ui-table-tbody>tr:nth-child(2n){background-color:#f8f8f8}body .ui-table .ui-table-tbody>tr:nth-child(2n).ui-state-highlight{background-color:#afd3c8;color:#385048}body .ui-table .ui-table-tbody>tr:nth-child(2n).ui-state-highlight a{color:#385048}body .ui-table .ui-table-tbody>tr:nth-child(2n).ui-contextmenu-selected{background-color:#afd3c8;color:#385048}body .ui-table.ui-table-hoverable-rows .ui-table-tbody>tr.ui-selectable-row:not(.ui-state-highlight):not(.ui-contextmenu-selected):hover{cursor:pointer;background-color:#eaeaea;color:#333}body .ui-table .ui-column-resizer-helper{background-color:#7b95a3}@media screen and (max-width:40em){body .ui-table.ui-table-responsive .ui-paginator-top{border-bottom:1px solid #dadada}body .ui-table.ui-table-responsive .ui-paginator-bottom{border-top:1px solid #dadada}body .ui-table.ui-table-responsive .ui-table-tbody>tr>td{border:0}}body .ui-datagrid .ui-datagrid-header{background-color:#7b95a3;color:#fff;padding:.571em 1em;font-weight:700;border:1px solid #7b95a3;border-bottom:0}body .ui-datagrid .ui-datagrid-content,body .ui-datagrid .ui-datagrid-footer{border:1px solid #dadada;background-color:#fff;color:#666;padding:.571em 1em}body .ui-datagrid .ui-datagrid-footer{border-top:0}body .ui-datalist .ui-datalist-header{background-color:#7b95a3;color:#fff;padding:.571em 1em;font-weight:700;border:1px solid #7b95a3;border-bottom:0}body .ui-datalist .ui-datalist-content,body .ui-datalist .ui-datalist-footer{border:1px solid #dadada;background-color:#fff;color:#666;padding:.571em 1em}body .ui-datalist .ui-datalist-footer{border-top:0}body .ui-datascroller .ui-datascroller-header{background-color:#7b95a3;color:#fff;padding:.571em 1em;font-weight:700;border:1px solid #7b95a3;border-bottom:0}body .ui-datascroller .ui-datascroller-content,body .ui-datascroller .ui-datascroller-footer{border:1px solid #dadada;background-color:#fff;color:#666;padding:.571em 1em}body .ui-datascroller .ui-datascroller-footer{border-top:0}body .ui-virtualscroller .ui-virtualscroller-header{background-color:#7b95a3;color:#fff;padding:.571em 1em;font-weight:700;border:1px solid #7b95a3;border-bottom:0}body .ui-virtualscroller .ui-virtualscroller-content{border:1px solid #dadada;background-color:#fff;color:#666}body .ui-virtualscroller .ui-virtualscroller-content .ui-virtualscroller-list li{border-bottom:1px solid #7b95a3}body .ui-virtualscroller .ui-virtualscroller-footer{background-color:#fff;color:#666;padding:.571em 1em;border:1px solid #dadada;border-top:0}body .ui-dataview .ui-dataview-header{background-color:#7b95a3;color:#fff;padding:.571em 1em;font-weight:700;border:1px solid #7b95a3;border-bottom:0}body .ui-dataview .ui-dataview-content,body .ui-dataview .ui-dataview-footer{border:1px solid #dadada;background-color:#fff;color:#666;padding:.571em 1em}body .ui-dataview .ui-dataview-footer{border-top:0}body .ui-dataview .ui-dataview-layout-options .ui-button{transition:background-color .2s,box-shadow .2s}body .ui-dataview .ui-dataview-layout-options .ui-button:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7;z-index:1}body .fc th{background-color:#7b95a3;border:1px solid #7b95a3;color:#fff;padding:.571em 1em}body .fc td.ui-widget-content{background-color:#fff;border:1px solid #dadada;color:#666}body .fc td.fc-head-container{border:1px solid #7b95a3}body .fc .fc-row{border-right:1px solid #7b95a3}body .fc .fc-event{background-color:#afd3c8;border:1px solid #6c8999;color:#385048;transition:box-shadow .2s}body .fc .fc-event:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .fc .fc-toolbar .fc-button{color:#fff;background-color:#7b95a3;border:1px solid #617c8a;font-size:14px;transition:background-color .2s,box-shadow .2s;border-radius:2px}body .fc .fc-toolbar .fc-button:enabled:hover{background-color:#6c8999;color:#fff;border-color:#6c8999}body .fc .fc-toolbar .fc-button .fc-icon-chevron-left{font-family:PrimeIcons!important;text-indent:0}body .fc .fc-toolbar .fc-button .fc-icon-chevron-left:before{content:"\ue900"}body .fc .fc-toolbar .fc-button .fc-icon-chevron-right{font-family:PrimeIcons!important;text-indent:0}body .fc .fc-toolbar .fc-button .fc-icon-chevron-right:before{content:"\ue901"}body .fc .fc-toolbar .fc-button:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .fc .fc-toolbar .fc-button-group .fc-button{border-radius:0}body .fc .fc-toolbar .fc-button-group .fc-button:first-child{border-top-left-radius:2px;border-bottom-left-radius:2px}body .fc .fc-toolbar .fc-button-group .fc-button:last-child{border-top-right-radius:2px;border-bottom-right-radius:2px}body .fc .fc-divider{background-color:#7b95a3;border:1px solid #7b95a3}body .ui-fluid .fc .fc-toolbar .fc-button{width:auto}body .ui-picklist .ui-picklist-buttons button{font-size:16px}body .ui-picklist .ui-picklist-caption{background-color:#7b95a3;color:#fff;padding:.571em 1em;font-weight:700;border:1px solid #7b95a3;border-bottom:0;border-top-left-radius:2px;border-top-right-radius:2px}body .ui-picklist .ui-picklist-filter-container{padding:.429em .857em;color:#666;background-color:#fff;margin:0;border:1px solid #7b95a3;border-bottom:0}body .ui-picklist .ui-picklist-filter-container input.ui-picklist-filter{width:100%;padding-right:2em;text-indent:0}body .ui-picklist .ui-picklist-filter-container .ui-picklist-filter-icon{top:50%;margin-top:-.5em;left:auto;right:1.357em;color:#a6a6a6}body .ui-picklist .ui-picklist-buttons{padding:.571em 1em}body .ui-picklist .ui-picklist-list{border:1px solid #dadada;background-color:#fff;color:#666;padding:0}body .ui-picklist .ui-picklist-list .ui-picklist-item{padding:.429em .857em;margin:0;border:0;color:#666;background-color:transparent;transition:background-color .2s,box-shadow .2s}body .ui-picklist .ui-picklist-list .ui-picklist-item:not(.ui-state-highlight):hover{background-color:#f4f4f4;color:#666}body .ui-picklist .ui-picklist-list .ui-picklist-item.ui-state-highlight{background-color:#afd3c8;color:#385048}body .ui-picklist .ui-picklist-list .ui-picklist-item:focus{outline:0 none;outline-offset:0;box-shadow:inset 0 0 0 .2em #e4e9ec}body .ui-picklist .ui-picklist-list .ui-picklist-droppoint-highlight{background-color:#afd3c8}@media (max-width:40em){body .ui-picklist.ui-picklist-responsive .ui-picklist-buttons{padding:.571em 1em}}body .ui-orderlist .ui-orderlist-controls{padding:.571em 1em}body .ui-orderlist .ui-orderlist-controls button{font-size:16px}body .ui-orderlist .ui-orderlist-caption{background-color:#7b95a3;color:#fff;padding:.571em 1em;font-weight:700;border:1px solid #7b95a3;border-bottom:0;border-top-left-radius:2px;border-top-right-radius:2px}body .ui-orderlist .ui-orderlist-filter-container{padding:.429em .857em;color:#666;background-color:#fff;margin:0;border:1px solid #7b95a3;border-bottom:0}body .ui-orderlist .ui-orderlist-filter-container input.ui-inputtext{width:100%;padding-right:2em;text-indent:0}body .ui-orderlist .ui-orderlist-filter-container .ui-orderlist-filter-icon{top:50%;margin-top:-.5em;left:auto;right:1.357em;color:#a6a6a6}body .ui-orderlist .ui-orderlist-list{border:1px solid #dadada;background-color:#fff;color:#666;padding:0}body .ui-orderlist .ui-orderlist-list .ui-orderlist-item{padding:.429em .857em;margin:0;border:0;color:#666;background-color:transparent;transition:background-color .2s,box-shadow .2s}body .ui-orderlist .ui-orderlist-list .ui-orderlist-item:not(.ui-state-highlight):hover{background-color:#f4f4f4;color:#666}body .ui-orderlist .ui-orderlist-list .ui-orderlist-item.ui-state-highlight{background-color:#afd3c8;color:#385048}body .ui-orderlist .ui-orderlist-list .ui-orderlist-item:focus{outline:0 none;outline-offset:0;box-shadow:inset 0 0 0 .2em #e4e9ec}body .ui-orderlist .ui-orderlist-list .ui-orderlist-droppoint-highlight{background-color:#afd3c8}body .ui-tree{border:1px solid #dadada;background-color:#fff;color:#666;padding:.571em 1em}body .ui-tree .ui-tree-container{padding:.286em;margin:0}body .ui-tree .ui-tree-container .ui-treenode{padding:.143em 0}body .ui-tree .ui-tree-container .ui-treenode .ui-treenode-content{padding:0;border:1px solid transparent;transition:background-color .2s,box-shadow .2s;border-radius:2px}body .ui-tree .ui-tree-container .ui-treenode .ui-treenode-content .ui-tree-toggler{vertical-align:middle;display:inline-block;float:none;margin:0 .143em 0 0;color:#a6a6a6}body .ui-tree .ui-tree-container .ui-treenode .ui-treenode-content .ui-treenode-icon{vertical-align:middle;display:inline-block;margin:0 .143em 0 0;color:#a6a6a6}body .ui-tree .ui-tree-container .ui-treenode .ui-treenode-content .ui-treenode-label{margin:0;vertical-align:middle;display:inline-block;padding:.286em}body .ui-tree .ui-tree-container .ui-treenode .ui-treenode-content .ui-treenode-label.ui-state-highlight{background-color:#afd3c8;color:#385048}body .ui-tree .ui-tree-container .ui-treenode .ui-treenode-content .ui-chkbox{margin:0 .5em 0 0}body .ui-tree .ui-tree-container .ui-treenode .ui-treenode-content .ui-chkbox .ui-chkbox-icon{margin:1px 0 0}body .ui-tree .ui-tree-container .ui-treenode .ui-treenode-content.ui-treenode-selectable .ui-treenode-label:not(.ui-state-highlight):hover{background-color:#f4f4f4;color:#666}body .ui-tree .ui-tree-container .ui-treenode .ui-treenode-content>span{line-height:inherit}body .ui-tree .ui-tree-container .ui-treenode .ui-treenode-content.ui-treenode-dragover{background-color:#f4f4f4;color:#666}body .ui-tree .ui-tree-container .ui-treenode .ui-treenode-content:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-tree .ui-tree-container .ui-treenode-droppoint.ui-treenode-droppoint-active{background-color:#afd3c8}body .ui-tree.ui-tree-horizontal{padding-left:0;padding-right:0}body .ui-tree.ui-tree-horizontal .ui-treenode .ui-treenode-content{border:1px solid #dadada;background-color:#fff;color:#666;padding:.571em 1em;transition:background-color .2s,box-shadow .2s}body .ui-tree.ui-tree-horizontal .ui-treenode .ui-treenode-content.ui-state-highlight{background-color:#afd3c8;color:#385048}body .ui-tree.ui-tree-horizontal .ui-treenode .ui-treenode-content .ui-chkbox .ui-icon{color:#7b95a3}body .ui-tree.ui-tree-horizontal .ui-treenode .ui-treenode-content .ui-treenode-label:not(.ui-state-highlight):hover{background-color:inherit;color:inherit}body .ui-tree.ui-tree-horizontal .ui-treenode .ui-treenode-content.ui-treenode-selectable:not(.ui-state-highlight):hover{background-color:#f4f4f4;color:#666}body .ui-tree.ui-tree-horizontal .ui-treenode .ui-treenode-content:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-tree .ui-tree-filter-container .ui-tree-filter{width:100%;padding-right:2em}body .ui-tree .ui-tree-filter-container .ui-tree-filter-icon{top:50%;left:auto;margin-top:-.5em;right:.8em;color:#a6a6a6}body .ui-organizationchart .ui-organizationchart-node-content.ui-organizationchart-selectable-node:not(.ui-state-highlight):hover{background-color:#f4f4f4;color:#666}body .ui-organizationchart .ui-organizationchart-node-content.ui-state-highlight{background-color:#afd3c8;color:#385048}body .ui-organizationchart .ui-organizationchart-node-content.ui-state-highlight .ui-node-toggler i{color:#5da68f}body .ui-organizationchart .ui-organizationchart-line-down{background-color:#c8c8c8}body .ui-organizationchart .ui-organizationchart-line-left{border-right:1px solid;border-color:#c8c8c8}body .ui-organizationchart .ui-organizationchart-line-top{border-color:#dadada #c8c8c8 #c8c8c8;border-top:1px solid #c8c8c8}body .ui-organizationchart .ui-organizationchart-node-content{border:1px solid #dadada;background-color:#fff;color:#666;padding:.571em 1em}body .ui-organizationchart .ui-organizationchart-node-content .ui-node-toggler{bottom:-.7em;margin-left:-.46em;color:#a6a6a6;overflow:hidden;line-height:1;border-radius:2px;transition:box-shadow .2s}body .ui-organizationchart .ui-organizationchart-node-content .ui-node-toggler:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-treetable .ui-treetable-caption,body .ui-treetable .ui-treetable-summary{background-color:#7b95a3;color:#fff;border:1px solid #7b95a3;padding:.571em 1em;text-align:center}body .ui-treetable .ui-treetable-caption{border-bottom:0;font-weight:700}body .ui-treetable .ui-treetable-summary{border-top:0;font-weight:700}body .ui-treetable .ui-treetable-thead>tr>th{padding:.571em .857em;border:1px solid #dadada;font-weight:700;color:#666;background-color:#fff}body .ui-treetable .ui-treetable-tbody>tr>td{padding:.571em .857em}body .ui-treetable .ui-treetable-tfoot>tr>td{padding:.571em .857em;border:1px solid #dadada;font-weight:700;color:#666;background-color:#fff}body .ui-treetable .ui-sortable-column{transition:box-shadow .2s}body .ui-treetable .ui-sortable-column:focus{outline:0 none;outline-offset:0;box-shadow:inset 0 0 0 .2em #e4e9ec}body .ui-treetable .ui-sortable-column .ui-sortable-column-icon{color:#666}body .ui-treetable .ui-sortable-column:not(.ui-state-highlight):hover{background-color:#eaeaea;color:#666}body .ui-treetable .ui-sortable-column:not(.ui-state-highlight):hover .ui-sortable-column-icon{color:#666}body .ui-treetable .ui-sortable-column.ui-state-highlight{background-color:#afd3c8;color:#385048}body .ui-treetable .ui-sortable-column.ui-state-highlight .ui-sortable-column-icon{color:#385048}body .ui-treetable .ui-editable-column input{font-size:14px;font-family:Open Sans,Helvetica Neue,sans-serif}body .ui-treetable .ui-editable-column input:focus{outline:1px solid #dadada;outline-offset:2px}body .ui-treetable .ui-treetable-tbody>tr{background-color:#fff;color:#666}body .ui-treetable .ui-treetable-tbody>tr>td{background-color:inherit;border:1px solid #dadada}body .ui-treetable .ui-treetable-tbody>tr>td .ui-treetable-toggler{color:#a6a6a6;vertical-align:middle}body .ui-treetable .ui-treetable-tbody>tr>td .ui-treetable-chkbox{vertical-align:middle;margin-right:.5em}body .ui-treetable .ui-treetable-tbody>tr.ui-state-highlight{background-color:#afd3c8;color:#385048}body .ui-treetable .ui-treetable-tbody>tr.ui-state-highlight>td{background-color:inherit;border:1px solid #dadada}body .ui-treetable .ui-treetable-tbody>tr.ui-state-highlight>td .ui-treetable-toggler{color:#385048}body .ui-treetable .ui-treetable-tbody>tr.ui-contextmenu-selected{background-color:#afd3c8;color:#385048}body .ui-treetable .ui-treetable-tbody>tr.ui-contextmenu-selected>td{background-color:inherit;border:1px solid #dadada}body .ui-treetable .ui-treetable-tbody>tr.ui-contextmenu-selected>td .ui-treetable-toggler{color:#385048}body .ui-treetable.ui-treetable-hoverable-rows .ui-treetable-tbody>tr:not(.ui-state-highlight):not(.ui-contextmenu-selected):hover{cursor:pointer;background-color:#eaeaea;color:#333}body .ui-treetable .ui-column-resizer-helper{background-color:#7b95a3}body .ui-carousel .ui-carousel-content .ui-carousel-next,body .ui-carousel .ui-carousel-content .ui-carousel-prev{background-color:#7b95a3;border:1px solid #617c8a;border-radius:50%;margin:.2em;color:#fff;transition:background-color .2s,box-shadow .2s}body .ui-carousel .ui-carousel-content .ui-carousel-next:not(.ui-state-disabled):hover,body .ui-carousel .ui-carousel-content .ui-carousel-prev:not(.ui-state-disabled):hover{background-color:#6c8999;color:#fff;border-color:#6c8999}body .ui-carousel .ui-carousel-dots-container .ui-carousel-dot-item>.ui-button{border-color:transparent;background-color:transparent}body .ui-carousel .ui-carousel-dots-container .ui-carousel-dot-item .ui-carousel-dot-icon{width:20px;height:6px;background-color:#b2c1cd;margin:0 .2em}body .ui-carousel .ui-carousel-dots-container .ui-carousel-dot-item .ui-carousel-dot-icon:before{content:" "}body .ui-carousel .ui-carousel-dots-container .ui-carousel-dot-item.ui-state-highlight .ui-carousel-dot-icon{background-color:#7b95a3}body .ui-messages{padding:1em;margin:1em 0}body .ui-messages.ui-messages-info{background-color:#a3def8;border:1px solid #79c8eb;color:#212121}body .ui-messages.ui-messages-info .ui-messages-close,body .ui-messages.ui-messages-info .ui-messages-icon{color:#212121}body .ui-messages.ui-messages-success{background-color:#a3e2c6;border:1px solid #a3e2c6;color:#212121}body .ui-messages.ui-messages-success .ui-messages-close,body .ui-messages.ui-messages-success .ui-messages-icon{color:#212121}body .ui-messages.ui-messages-warn{background-color:#ffe277;border:1px solid #ffe277;color:#212121}body .ui-messages.ui-messages-warn .ui-messages-close,body .ui-messages.ui-messages-warn .ui-messages-icon{color:#212121}body .ui-messages.ui-messages-error{background-color:#ff8b8b;border:1px solid #ff8b8b;color:#212121}body .ui-messages.ui-messages-error .ui-messages-close,body .ui-messages.ui-messages-error .ui-messages-icon{color:#212121}body .ui-messages .ui-messages-close{top:.25em;right:.5em;font-size:1.5em;overflow:hidden;line-height:1;border-radius:2px;transition:box-shadow .2s}body .ui-messages .ui-messages-close:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-messages .ui-messages-icon{font-size:2em}body .ui-message{padding:.429em;margin:0}body .ui-message.ui-message-info{background-color:#a3def8;border:1px solid #79c8eb;color:#212121}body .ui-message.ui-message-info .ui-message-icon{color:#212121}body .ui-message.ui-message-success{background-color:#a3e2c6;border:1px solid #a3e2c6;color:#212121}body .ui-message.ui-message-success .ui-message-icon{color:#212121}body .ui-message.ui-message-warn{background-color:#ffe277;border:1px solid #ffe277;color:#212121}body .ui-message.ui-message-warn .ui-message-icon{color:#212121}body .ui-message.ui-message-error{background-color:#ff8b8b;border:1px solid #ff8b8b;color:#212121}body .ui-message.ui-message-error .ui-message-icon{color:#212121}body .ui-message .ui-message-icon{font-size:1.714em}body .ui-message .ui-message-text{font-size:14px}body .ui-growl{top:120px}body .ui-growl .ui-growl-item-container{margin:0 0 1em;opacity:.9;filter:alpha(opacity=90);box-shadow:0 3px 6px 0 rgba(0,0,0,.16)}body .ui-growl .ui-growl-item-container .ui-growl-item{padding:1em}body .ui-growl .ui-growl-item-container .ui-growl-item .ui-growl-message{margin:0 0 0 4em}body .ui-growl .ui-growl-item-container .ui-growl-item .ui-growl-image{font-size:3.429em}body .ui-growl .ui-growl-item-container.ui-growl-message-info{background-color:#a3def8;border:1px solid #79c8eb;color:#212121}body .ui-growl .ui-growl-item-container.ui-growl-message-info .ui-growl-image{color:#212121}body .ui-growl .ui-growl-item-container.ui-growl-message-success{background-color:#a3e2c6;border:1px solid #a3e2c6;color:#212121}body .ui-growl .ui-growl-item-container.ui-growl-message-success .ui-growl-image{color:#212121}body .ui-growl .ui-growl-item-container.ui-growl-message-warn{background-color:#ffe277;border:1px solid #ffe277;color:#212121}body .ui-growl .ui-growl-item-container.ui-growl-message-warn .ui-growl-image{color:#212121}body .ui-growl .ui-growl-item-container.ui-growl-message-error{background-color:#ff8b8b;border:1px solid #ff8b8b;color:#212121}body .ui-growl .ui-growl-item-container.ui-growl-message-error .ui-growl-image{color:#212121}body .ui-toast .ui-toast-message{box-shadow:0 3px .429em 0 rgba(0,0,0,.16);margin:0 0 1em}body .ui-toast .ui-toast-message.ui-toast-message-info{background-color:#a3def8;border:1px solid #79c8eb;color:#212121}body .ui-toast .ui-toast-message.ui-toast-message-info .ui-toast-close-icon{color:#212121}body .ui-toast .ui-toast-message.ui-toast-message-success{background-color:#a3e2c6;border:1px solid #a3e2c6;color:#212121}body .ui-toast .ui-toast-message.ui-toast-message-success .ui-toast-close-icon{color:#212121}body .ui-toast .ui-toast-message.ui-toast-message-warn{background-color:#ffe277;border:1px solid #ffe277;color:#212121}body .ui-toast .ui-toast-message.ui-toast-message-warn .ui-toast-close-icon{color:#212121}body .ui-toast .ui-toast-message.ui-toast-message-error{background-color:#ff8b8b;border:1px solid #ff8b8b;color:#212121}body .ui-toast .ui-toast-message.ui-toast-message-error .ui-toast-close-icon{color:#212121}body .ui-widget-overlay{background-color:rgba(0,0,0,.4)}body .ui-overlaypanel{background-color:#fff;color:#666;padding:0;border:1px solid #f1f1f1;border-radius:0}body .ui-overlaypanel .ui-overlaypanel-content{padding:.571em 1em}body .ui-overlaypanel .ui-overlaypanel-close{background-color:#7b95a3;color:#fff;width:1.538em;height:1.538em;line-height:1.538em;text-align:center;position:absolute;top:-.769em;right:-.769em;transition:color .2s,background-color .2s,box-shadow .2s}body .ui-overlaypanel .ui-overlaypanel-close .ui-overlaypanel-close-icon{line-height:inherit}body .ui-overlaypanel .ui-overlaypanel-close:hover{background-color:#617c8a;color:#fff}body .ui-overlaypanel .ui-overlaypanel-close:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-overlaypanel:after{border-color:hsla(0,0%,100%,0) hsla(0,0%,100%,0) #fff}body .ui-overlaypanel:before{border-color:hsla(0,0%,94.5%,0) hsla(0,0%,94.5%,0) #f1f1f1}body .ui-overlaypanel.ui-overlaypanel-flipped:after{border-top-color:#fff}body .ui-overlaypanel.ui-overlaypanel-flipped:before{border-top-color:#f1f1f1}body .ui-dialog{padding:0;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body .ui-dialog .ui-dialog-titlebar{background-color:#7b95a3;color:#fff;padding:1em;font-weight:700;border:1px solid #7b95a3;border-bottom:0}body .ui-dialog .ui-dialog-titlebar .ui-dialog-title{margin:0;float:none}body .ui-dialog .ui-dialog-titlebar .ui-dialog-titlebar-icon{color:#fff;border:0;padding:0;margin-left:.5em;transition:color .2s,background-color .2s,box-shadow .2s}body .ui-dialog .ui-dialog-titlebar .ui-dialog-titlebar-icon span{width:auto}body .ui-dialog .ui-dialog-titlebar .ui-dialog-titlebar-icon:hover{color:#fff}body .ui-dialog .ui-dialog-titlebar .ui-dialog-titlebar-icon:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-dialog .ui-dialog-content{background-color:#fff;color:#666;border:1px solid #f1f1f1;padding:.571em 1em}body .ui-dialog .ui-dialog-footer{border:1px solid #dadada;background-color:#fff;color:#666;padding:.571em 1em;margin:0;text-align:right;position:relative;top:-1px}body .ui-dialog .ui-dialog-footer button{margin:0 .5em 0 0;width:auto}body .ui-dialog.ui-confirm-dialog .ui-dialog-content{padding:1.5em}body .ui-dialog.ui-confirm-dialog .ui-dialog-content>span{float:none;display:inline-block;vertical-align:middle;line-height:14px;margin:0}body .ui-dialog.ui-confirm-dialog .ui-dialog-content>span.ui-icon{margin-right:.35em;font-size:16px}body .ui-sidebar{background-color:#fff;color:#666;padding:.571em 1em;border:1px solid #f1f1f1;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body .ui-sidebar .ui-sidebar-close{color:#a6a6a6}body .ui-sidebar .ui-sidebar-close:hover{color:#666}body .ui-tooltip .ui-tooltip-text{background-color:#afd3c8;color:#385048;padding:.429em;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body .ui-tooltip.ui-tooltip-right .ui-tooltip-arrow{border-right-color:#afd3c8}body .ui-tooltip.ui-tooltip-left .ui-tooltip-arrow{border-left-color:#afd3c8}body .ui-tooltip.ui-tooltip-top .ui-tooltip-arrow{border-top-color:#afd3c8}body .ui-tooltip.ui-tooltip-bottom .ui-tooltip-arrow{border-bottom-color:#afd3c8}body .ui-lightbox{box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body .ui-lightbox .ui-lightbox-caption{border:1px solid #7b95a3;background-color:#7b95a3;color:#fff;padding:.571em 1em;font-weight:700}body .ui-lightbox .ui-lightbox-caption .ui-lightbox-caption-text{color:#fff;margin:0}body .ui-lightbox .ui-lightbox-caption .ui-lightbox-close{padding:0;color:#fff;overflow:hidden;line-height:1;transition:color .2s,background-color .2s,box-shadow .2s}body .ui-lightbox .ui-lightbox-caption .ui-lightbox-close:hover{color:#fff}body .ui-lightbox .ui-lightbox-caption .ui-lightbox-close:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-lightbox .ui-lightbox-content-wrapper{overflow:hidden;background-color:#fff;color:#666;border:0;padding:0;border-radius:0}body .ui-lightbox .ui-lightbox-content-wrapper .ui-lightbox-nav-left,body .ui-lightbox .ui-lightbox-content-wrapper .ui-lightbox-nav-right{transition:all .2s;font-size:3em;color:#fff;margin-top:-.5em}body .ui-lightbox .ui-lightbox-content-wrapper .ui-lightbox-nav-left:hover,body .ui-lightbox .ui-lightbox-content-wrapper .ui-lightbox-nav-right:hover{transform:scale(1.2)}body .ui-lightbox .ui-lightbox-content-wrapper .ui-lightbox-content.ui-lightbox-loading~a{display:none}body .ui-breadcrumb{background-color:#fff;border:1px solid #dadada;padding:.571em 1em}body .ui-breadcrumb ul li .ui-menuitem-link{color:#666;margin:0;border-radius:2px;transition:box-shadow .2s}body .ui-breadcrumb ul li .ui-menuitem-link:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-breadcrumb ul li.ui-breadcrumb-chevron{margin:0 .5em;color:#a6a6a6}body .ui-breadcrumb ul li:first-child a{color:#a6a6a6;margin:0}body .ui-breadcrumb ul li .ui-menuitem-icon{color:#a6a6a6}body .ui-steps{position:relative}body .ui-steps .ui-steps-item{background-color:transparent;text-align:center}body .ui-steps .ui-steps-item .ui-menuitem-link{display:inline-block;text-align:center;background-color:transparent;overflow:hidden;border-radius:2px;transition:box-shadow .2s}body .ui-steps .ui-steps-item .ui-menuitem-link:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-steps .ui-steps-item .ui-menuitem-link .ui-steps-number{border-radius:50%;display:inline-block;color:#a6a6a6;background-color:#fff;border:1px solid #c8c8c8;position:relative;top:16px;margin-bottom:14px;width:28px;height:28px;font-size:16px;line-height:24px;text-align:center}body .ui-steps .ui-steps-item .ui-menuitem-link .ui-steps-title{display:block;margin-top:6px;color:#a6a6a6}body .ui-steps .ui-steps-item.ui-state-highlight .ui-steps-number{background:#afd3c8;color:#385048}body .ui-steps .ui-steps-item.ui-state-highlight .ui-steps-title{font-weight:700;color:#666}body .ui-steps:before{content:" ";border-top:1px solid #dadada;width:100%;top:45%;left:0;display:block;position:absolute}body .ui-contextmenu .ui-menuitem-link,body .ui-megamenu .ui-menuitem-link,body .ui-menu .ui-menuitem-link,body .ui-menubar .ui-menuitem-link,body .ui-slidemenu .ui-menuitem-link,body .ui-tieredmenu .ui-menuitem-link{padding:.714em .857em;color:#666;font-weight:400;border-radius:0;transition:box-shadow .2s}body .ui-contextmenu .ui-menuitem-link .ui-menuitem-text,body .ui-megamenu .ui-menuitem-link .ui-menuitem-text,body .ui-menu .ui-menuitem-link .ui-menuitem-text,body .ui-menubar .ui-menuitem-link .ui-menuitem-text,body .ui-slidemenu .ui-menuitem-link .ui-menuitem-text,body .ui-tieredmenu .ui-menuitem-link .ui-menuitem-text{color:#666}body .ui-contextmenu .ui-menuitem-link .ui-menuitem-icon,body .ui-megamenu .ui-menuitem-link .ui-menuitem-icon,body .ui-menu .ui-menuitem-link .ui-menuitem-icon,body .ui-menubar .ui-menuitem-link .ui-menuitem-icon,body .ui-slidemenu .ui-menuitem-link .ui-menuitem-icon,body .ui-tieredmenu .ui-menuitem-link .ui-menuitem-icon{color:#666;margin-right:.5em}body .ui-contextmenu .ui-menuitem-link:hover,body .ui-megamenu .ui-menuitem-link:hover,body .ui-menu .ui-menuitem-link:hover,body .ui-menubar .ui-menuitem-link:hover,body .ui-slidemenu .ui-menuitem-link:hover,body .ui-tieredmenu .ui-menuitem-link:hover{background-color:#eaeaea}body .ui-contextmenu .ui-menuitem-link:hover .ui-menuitem-icon,body .ui-contextmenu .ui-menuitem-link:hover .ui-menuitem-text,body .ui-megamenu .ui-menuitem-link:hover .ui-menuitem-icon,body .ui-megamenu .ui-menuitem-link:hover .ui-menuitem-text,body .ui-menu .ui-menuitem-link:hover .ui-menuitem-icon,body .ui-menu .ui-menuitem-link:hover .ui-menuitem-text,body .ui-menubar .ui-menuitem-link:hover .ui-menuitem-icon,body .ui-menubar .ui-menuitem-link:hover .ui-menuitem-text,body .ui-slidemenu .ui-menuitem-link:hover .ui-menuitem-icon,body .ui-slidemenu .ui-menuitem-link:hover .ui-menuitem-text,body .ui-tieredmenu .ui-menuitem-link:hover .ui-menuitem-icon,body .ui-tieredmenu .ui-menuitem-link:hover .ui-menuitem-text{color:#666}body .ui-contextmenu .ui-menuitem-link:focus,body .ui-megamenu .ui-menuitem-link:focus,body .ui-menu .ui-menuitem-link:focus,body .ui-menubar .ui-menuitem-link:focus,body .ui-slidemenu .ui-menuitem-link:focus,body .ui-tieredmenu .ui-menuitem-link:focus{outline:0 none;outline-offset:0;box-shadow:inset 0 0 0 .2em #e4e9ec}body .ui-menu{padding:0;background-color:#fff;border:1px solid #c8c8c8}body .ui-menu .ui-menuitem{margin:0}body .ui-menu.ui-shadow{border:1px solid #c8c8c8;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body .ui-menu .ui-submenu-header{margin:0;padding:.714em .857em;color:#fff;background-color:#7b95a3;font-weight:700;border:0}body .ui-menu .ui-menu-separator{border:solid #c8c8c8;border-width:1px 0 0}body .ui-menubar{padding:0;background-color:#fff;border:1px solid #c8c8c8}body .ui-menubar .ui-menubar-root-list>.ui-menuitem>.ui-menuitem-link{padding:.714em .857em}body .ui-menubar .ui-menubar-root-list>.ui-menu-separator{border:solid #c8c8c8;border-width:0 0 0 1px}body .ui-menubar .ui-submenu-list{padding:0;background-color:#fff;border:1px solid #c8c8c8;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body .ui-menubar .ui-submenu-list .ui-menuitem{margin:0}body .ui-menubar .ui-submenu-list .ui-menu-separator{border:solid #c8c8c8;border-width:1px 0 0}body .ui-menubar .ui-menuitem{margin:0}body .ui-menubar .ui-menuitem.ui-menuitem-active>.ui-menuitem-link{background-color:#eaeaea}body .ui-menubar .ui-menuitem.ui-menuitem-active>.ui-menuitem-link .ui-menuitem-icon,body .ui-menubar .ui-menuitem.ui-menuitem-active>.ui-menuitem-link .ui-menuitem-text,body .ui-menubar .ui-menuitem.ui-menuitem-active>.ui-menuitem-link .ui-submenu-icon{color:#666}body .ui-contextmenu,body .ui-contextmenu .ui-submenu-list{padding:0;background-color:#fff;border:1px solid #c8c8c8;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body .ui-contextmenu .ui-menuitem{margin:0}body .ui-contextmenu .ui-menuitem .ui-menuitem-link .ui-submenu-icon{right:.429em}body .ui-contextmenu .ui-menuitem.ui-menuitem-active>.ui-menuitem-link{background-color:#eaeaea}body .ui-contextmenu .ui-menuitem.ui-menuitem-active>.ui-menuitem-link .ui-menuitem-icon,body .ui-contextmenu .ui-menuitem.ui-menuitem-active>.ui-menuitem-link .ui-menuitem-text,body .ui-contextmenu .ui-menuitem.ui-menuitem-active>.ui-menuitem-link .ui-submenu-icon{color:#666}body .ui-contextmenu .ui-menu-separator{border:solid #c8c8c8;border-width:1px 0 0}body .ui-tieredmenu,body .ui-tieredmenu .ui-submenu-list{padding:0;background-color:#fff;border:1px solid #c8c8c8}body .ui-tieredmenu .ui-submenu-list{box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body .ui-tieredmenu .ui-menuitem{margin:0}body .ui-tieredmenu .ui-menuitem .ui-menuitem-link .ui-submenu-icon{right:.429em}body .ui-tieredmenu .ui-menuitem.ui-menuitem-active>.ui-menuitem-link{background-color:#eaeaea}body .ui-tieredmenu .ui-menuitem.ui-menuitem-active>.ui-menuitem-link .ui-menuitem-icon,body .ui-tieredmenu .ui-menuitem.ui-menuitem-active>.ui-menuitem-link .ui-menuitem-text,body .ui-tieredmenu .ui-menuitem.ui-menuitem-active>.ui-menuitem-link .ui-submenu-icon{color:#666}body .ui-tieredmenu .ui-menu-separator{border:solid #c8c8c8;border-width:1px 0 0}body .ui-slidemenu{padding:0;background-color:#fff;border:1px solid #c8c8c8}body .ui-slidemenu .ui-submenu-list{padding:0;background-color:#fff;border:0}body .ui-slidemenu .ui-menuitem{margin:0}body .ui-slidemenu .ui-menuitem .ui-menuitem-link .ui-submenu-icon{right:.429em}body .ui-slidemenu .ui-menuitem.ui-menuitem-active>.ui-menuitem-link{background-color:#eaeaea}body .ui-slidemenu .ui-menuitem.ui-menuitem-active>.ui-menuitem-link .ui-menuitem-icon,body .ui-slidemenu .ui-menuitem.ui-menuitem-active>.ui-menuitem-link .ui-menuitem-text,body .ui-slidemenu .ui-menuitem.ui-menuitem-active>.ui-menuitem-link .ui-submenu-icon{color:#666}body .ui-slidemenu .ui-slidemenu-backward{margin:0;padding:.571em 1em;color:#fff;background-color:#7b95a3;font-weight:700;border:0}body .ui-slidemenu .ui-slidemenu-backward:hover{background-color:#617c8a;color:#fff}body .ui-slidemenu .ui-menu-separator{border:solid #c8c8c8;border-width:1px 0 0}body .ui-tabmenu{border:0}body .ui-tabmenu .ui-tabmenu-nav{padding:0;background:#fff;border-bottom:1px solid #7b95a3}body .ui-tabmenu .ui-tabmenu-nav .ui-tabmenuitem{position:static;border:1px solid #7b95a3;background-color:#7b95a3;margin-right:.214em;margin-bottom:-1px;transition:background-color .2s,box-shadow .2s}body .ui-tabmenu .ui-tabmenu-nav .ui-tabmenuitem .ui-menuitem-link{color:#fff;padding:.571em 1em;transition:background-color .2s,box-shadow .2s}body .ui-tabmenu .ui-tabmenu-nav .ui-tabmenuitem .ui-menuitem-link .ui-menuitem-icon,body .ui-tabmenu .ui-tabmenu-nav .ui-tabmenuitem .ui-menuitem-link .ui-menuitem-text{color:#fff;margin-right:.5em}body .ui-tabmenu .ui-tabmenu-nav .ui-tabmenuitem .ui-menuitem-link:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-tabmenu .ui-tabmenu-nav .ui-tabmenuitem:not(.ui-state-active):not(.ui-state-disabled):hover{background-color:#617c8a;border:1px solid #617c8a}body .ui-tabmenu .ui-tabmenu-nav .ui-tabmenuitem:not(.ui-state-active):not(.ui-state-disabled):hover .ui-menuitem-link .ui-menuitem-icon,body .ui-tabmenu .ui-tabmenu-nav .ui-tabmenuitem:not(.ui-state-active):not(.ui-state-disabled):hover .ui-menuitem-link .ui-menuitem-text{color:#fff}body .ui-tabmenu .ui-tabmenu-nav .ui-tabmenuitem.ui-state-active{background-color:#afd3c8;border:1px solid #dadada}body .ui-tabmenu .ui-tabmenu-nav .ui-tabmenuitem.ui-state-active .ui-menuitem-link .ui-menuitem-icon,body .ui-tabmenu .ui-tabmenu-nav .ui-tabmenuitem.ui-state-active .ui-menuitem-link .ui-menuitem-text{color:#385048}body .ui-megamenu{padding:0;background-color:#fff;border:1px solid #c8c8c8}body .ui-megamenu .ui-megamenu-submenu-header{margin:0;padding:.571em 1em;color:#fff;background-color:#7b95a3;font-weight:700;border:0}body .ui-megamenu .ui-megamenu-panel{padding:0;background-color:#fff;border:1px solid #c8c8c8;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body .ui-megamenu .ui-menuitem{margin:0}body .ui-megamenu .ui-menuitem .ui-menuitem-link .ui-submenu-icon{right:.429em}body .ui-megamenu .ui-menuitem.ui-menuitem-active>.ui-menuitem-link{background-color:#eaeaea}body .ui-megamenu .ui-menuitem.ui-menuitem-active>.ui-menuitem-link .ui-menuitem-icon,body .ui-megamenu .ui-menuitem.ui-menuitem-active>.ui-menuitem-link .ui-menuitem-text,body .ui-megamenu .ui-menuitem.ui-menuitem-active>.ui-menuitem-link .ui-submenu-icon{color:#666}body .ui-megamenu.ui-megamenu-vertical .ui-megamenu-root-list>.ui-menuitem>.ui-menuitem-link>.ui-submenu-icon{right:.429em}body .ui-panelmenu .ui-icon{position:static}body .ui-panelmenu .ui-panelmenu-header{padding:0}body .ui-panelmenu .ui-panelmenu-header>a{border:1px solid #7b95a3;background-color:#7b95a3;color:#fff;padding:.714em .857em;font-weight:700;position:static;font-size:14px;border-radius:2px;transition:background-color .2s,box-shadow .2s}body .ui-panelmenu .ui-panelmenu-header>a .ui-panelmenu-icon{color:#fff}body .ui-panelmenu .ui-panelmenu-header>a:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-panelmenu .ui-panelmenu-header:not(.ui-state-active)>a:hover{outline:0 none;border:1px solid #617c8a;background-color:#617c8a;color:#fff}body .ui-panelmenu .ui-panelmenu-header:not(.ui-state-active)>a:hover .ui-panelmenu-icon{color:#fff}body .ui-panelmenu .ui-panelmenu-header.ui-state-active>a{border:1px solid #dadada;background-color:#afd3c8;color:#385048;border-bottom-left-radius:0;border-bottom-right-radius:0}body .ui-panelmenu .ui-panelmenu-header.ui-state-active>a .ui-panelmenu-icon{color:#385048}body .ui-panelmenu .ui-panelmenu-header.ui-state-active>a:hover{outline:0 none;border:1px solid #8dc8b5;background-color:#8dc8b5;color:#385048}body .ui-panelmenu .ui-panelmenu-header.ui-state-active>a:hover .ui-panelmenu-icon{color:#385048}body .ui-panelmenu .ui-panelmenu-panel{margin-top:2px}body .ui-panelmenu .ui-panelmenu-panel:first-child{margin-top:0}body .ui-panelmenu .ui-panelmenu-content{padding:0;background-color:#fff;margin-top:0;position:static;border:1px solid #c8c8c8;border-top:0}body .ui-panelmenu .ui-panelmenu-content .ui-menuitem{margin:0}body .ui-panelmenu .ui-panelmenu-content .ui-menuitem .ui-menuitem-link{padding:.714em .857em;color:#666}body .ui-panelmenu .ui-panelmenu-content .ui-menuitem .ui-menuitem-link:hover{background-color:#eaeaea}body .ui-panelmenu .ui-panelmenu-content .ui-menuitem .ui-menuitem-link:hover .ui-menuitem-icon,body .ui-panelmenu .ui-panelmenu-content .ui-menuitem .ui-menuitem-link:hover .ui-menuitem-text,body .ui-panelmenu .ui-panelmenu-content .ui-menuitem .ui-menuitem-link:hover .ui-panelmenu-icon{color:#666}body .ui-progressbar{border:0;height:1.714em;background-color:#efefef}body .ui-progressbar .ui-progressbar-value{border:0;margin:0;background:#7b95a3}body .ui-progressbar .ui-progressbar-label{margin-top:0;color:#666;line-height:1.714em}body .ui-galleria .ui-galleria-nav-next,body .ui-galleria .ui-galleria-nav-prev{transition:all .2s;position:absolute;color:#a6a6a6}body .ui-galleria .ui-galleria-nav-next:hover,body .ui-galleria .ui-galleria-nav-prev:hover{transform:scale(1.2)}body .ui-galleria .ui-galleria-nav-next,body .ui-galleria .ui-galleria-nav-prev{font-size:16px}body .ui-terminal{background-color:#fff;color:#666;border:1px solid #dadada;padding:.571em 1em}body .ui-terminal .ui-terminal-input{font-size:14px;font-family:Open Sans,Helvetica Neue,sans-serif;height:16px}body .ui-terminal .ui-terminal-command{height:16px}body .ui-inplace{min-height:2.357em}body .ui-inplace .ui-inplace-display{padding:.429em;border-radius:2px;transition:background-color .2s,box-shadow .2s}body .ui-inplace .ui-inplace-display:not(.ui-state-disabled):hover{background-color:#f4f4f4;color:#666}body .ui-inplace .ui-inplace-display:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body .ui-fluid .ui-inplace.ui-inplace-closable .ui-inplace-content>:first-child{display:inline-block;width:calc(100% - 2.357em)}.mapboxgl-canvas-container{height:100vh;color:#fff}#map{border-radius:.5rem;display:flex;height:75vh;margin:auto;position:relative}.mapboxgl-popup-tip{border-top-color:rgba(0,0,0,.5)!important}.mapboxgl-popup-content{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 .1rem;color:#fff;background-color:rgba(0,0,0,.5)}.mapboxgl-popup-content .map-popup{text-align:center;margin:auto}.mapboxgl-popup-content .map-popup h3{padding:0;margin:.25rem;line-height:normal}.mapboxgl-popup-content .map-popup p{line-height:normal;padding:.25rem;margin:auto}.ui-button.R-1{color:#000;background-color:#fffaca!important}.ui-button.R-2{color:#000;background-color:#fff68f!important}.ui-button.R-3{color:#000;background-color:#fff100!important}.ui-button.R-4{color:#000;background-color:#ebd417!important}.ui-button.C-1{color:#000;background-color:#a18aad!important}.ui-button.C-2{color:#fff;background-color:#da2028!important}.ui-button.C-3{background-color:#850204!important;color:#fff!important;-webkit-text-fill-color:#fff!important}.ui-button.MX-1{color:#000;background-color:#e4a024!important}.ui-button.MX-2{color:#000;background-color:#f37520!important}.ui-button.MX-3{color:#fff;background-color:#ff2900!important}.ui-button.I-1{color:#000;background-color:#e1c3dd!important}.ui-button.I-2{color:#fff;background-color:#a53ed5!important}.ui-button.I-3{color:#fff;background-color:#c0188c!important}.ui-button.RDV{color:#000;background-color:#ddd!important}.ui-button.PARK{color:#fff;background-color:#229a00!important}.ui-button.INST{color:#fff;background-color:#0063ff!important}.ui-button.CEM{background-color:#561818!important;color:#fff!important;-webkit-text-fill-color:#fff!important}.ui-button.PORT{color:#fff;background-color:#b81609!important}.ui-button.EWR{background-color:#820c0c!important;color:#fff!important;-webkit-text-fill-color:#fff!important}'],encapsulation:2}),t})(),qE=(()=>{class t{constructor(t,e){this.cartodata=t,this.mapper=e,this.mapStyle={"border-radius":".5rem",display:"flex",height:"75vh",margin:"auto",position:"relative"},this.hoodClicked="",this.lotClicked="",this.clicked={hood:"",lot:""},this.propInfo={code:""},this.mainLayer=new Ty.a.Layer("mainLayer",Dw,zw),this.sideBarDisplay=!1,this.contextMenu=[{icon:"pi pi-info-circle",label:"info"},{icon:"pi pi-download",label:"download"}],this.zoneLabel=t=>`<a class="btn ${t}">${t}</a>`}ngOnInit(){fetch("assets/data/NwkNeighborhoods.geojson").then(t=>t.json()).then(t=>this.addGeoLayer(t)),this.map=new Ay.Map({center:[-74.1723667,40.735657],container:"map",dragRotate:!1,maxZoom:18,style:Ty.a.basemaps.positron,touchZoomRotate:!1,zoom:12});const t=new Ay.NavigationControl({showCompass:!1,showZoom:!0});this.map.addControl(t,"top-left"),Ty.a.setDefaultAuth({apiKey:"0c3e2b7cbff1b34a35e1f2ce3ff94114493bd681",user:"nzlur"});const e=new Ty.a.Interactivity(this.mainLayer);this.popup=new Ay.Popup({closeButton:!1,closeOnClick:!1}),e.on("featureEnter",t=>{if(t.features.forEach(t=>{t.color.blendTo("opacity(DeepPink, 0.5)")}),t.features.length>0){const e=t.features[0].variables;this.popup.setHTML(`\n                  <div class="map-popup">\n                    <h3>${e.proploc.value}</h3>\n                    <p>Block ${e.blocklot.value.split("-")[0]}, Lot ${e.blocklot.value.split("-")[1]}</p>\n                  </div>\n                `),this.popup.setLngLat([t.coordinates.lng,t.coordinates.lat]),this.popup.isOpen()||this.popup.addTo(this.map)}else this.popup.remove()}),e.on("featureLeave",t=>{t.features.forEach(t=>{t.color.reset()})}),e.on("featureClick",t=>{t.features.length>0?(this.lotClicked=t.features[0].variables.blocklot.value,this.clicked.block=this.lotClicked.split("-")[0],this.clicked.lot=this.lotClicked.split("-")[1],this.getPropInfo(this.clicked),this.sideBarDisplay=!0):this.sideBarDisplay=!1}),this.mainLayer.addTo(this.map,"watername_ocean")}updateViz(t){switch(t){case"landuse":this.mainLayer.update(Fw,Lw);break;case"zoning":this.mainLayer.update(Dw,Rw);break;default:return this.mainLayer.update(Dw,zw)}}addGeoLayer(t){const e=new Ty.a.source.GeoJSON(t);this.geoLayer=new Ty.a.Layer("geoLayer",e,Iw),this.geoLayer.addTo(this.map,"watername_ocean"),this.map.on("load",()=>{this.map.addSource("GeoLabelSource",{type:"geojson",data:t}),this.map.addLayer({id:"geoLabels",layout:{"text-field":["get","NAME"],"text-letter-spacing":.1,"text-max-width":4.5,"text-transform":"uppercase"},source:"GeoLabelSource",type:"symbol"})}),this.map.resize()}changeGeo(t){fetch(`assets/data/${t}.geojson`).then(t=>t.json()).then(t=>{const e=new Ty.a.source.GeoJSON(t);this.geoLayer.update(e,Iw),this.map.getSource("GeoLabelSource").setData(t)})}getPropInfo(t){this.cartodata.getZoning("*",t.block,t.lot).subscribe(t=>{this.propInfo=t.rows[0],this.clicked.labelStyle=this.zoneLabel(this.propInfo.code?this.propInfo.code:"")})}}return t.\u0275fac=function(e){return new(e||t)(fa(c_),fa(Tw))},t.\u0275cmp=me({type:t,selectors:[["app-map"]],inputs:{parcelView:"parcelView"},decls:5,vars:6,consts:[["id","map",3,"ngStyle"],["map",""],[3,"target","model"],["position","right","styleClass","p-col-12 p-md-10 p-lg-8 p-xl-6",3,"visible","visibleChange"],[3,"mapInput","propInfo"]],template:function(t,e){if(1&t&&(xa(0,"div",0,1),xa(2,"p-contextMenu",2),va(3,"p-sidebar",3),Ea("visibleChange",(function(t){return e.sideBarDisplay=t})),xa(4,"app-sidepanel",4),ba()),2&t){const t=pa(1);ya("ngStyle",e.mapStyle),rr(2),ya("target",t)("model",e.contextMenu),rr(1),ya("visible",e.sideBarDisplay),rr(1),ya("mapInput",e.clicked)("propInfo",e.propInfo)}},directives:[Bc,nC,lC,jE],encapsulation:2}),t})();const GE=function(t){return{"ui-helper-hidden":t}};function HE(t,e){if(1&t&&xa(0,"li",4),2&t){const t=Aa().$implicit;ya("ngClass",Eu(1,GE,!1===t.visible))}}function ZE(t,e){1&t&&xa(0,"span",14),2&t&&ya("ngClass",Aa(3).$implicit.icon)}const WE=function(t,e){return{"pi-caret-down":t,"pi-caret-right":e}};function KE(t,e){if(1&t&&xa(0,"span",15),2&t){const t=Aa(4);ya("ngClass",Su(1,WE,t.root,!t.root))}}const XE=function(t){return{"ui-menuitem-link ui-corner-all":!0,"ui-state-disabled":t}};function $E(t,e){if(1&t){const t=Ma();va(0,"a",10),Ea("click",(function(e){Ne(t);const n=Aa(2).$implicit;return Aa().itemClick(e,n)})),da(1,ZE,1,1,"span",11),va(2,"span",12),ds(3),ba(),da(4,KE,1,4,"span",13),ba()}if(2&t){const t=Aa(2).$implicit,e=Aa();Ja(t.styleClass),ya("href",t.url||"#",Ti)("ngClass",Eu(15,XE,t.disabled))("ngStyle",t.style),ca("data-automationid",t.automationId)("target",t.target)("title",t.title)("id",t.id)("tabindex",t.tabindex?t.tabindex:"0")("aria-haspopup",null!=e.item.items)("aria-expanded",e.item===e.activeItem),rr(1),ya("ngIf",t.icon),rr(2),ps(t.label),rr(1),ya("ngIf",t.items)}}function YE(t,e){1&t&&xa(0,"span",14),2&t&&ya("ngClass",Aa(3).$implicit.icon)}function QE(t,e){if(1&t&&xa(0,"span",15),2&t){const t=Aa(4);ya("ngClass",Su(1,WE,t.root,!t.root))}}const JE=function(){return{exact:!1}};function tS(t,e){if(1&t){const t=Ma();va(0,"a",16),Ea("click",(function(e){Ne(t);const n=Aa(2).$implicit;return Aa().itemClick(e,n)})),da(1,YE,1,1,"span",11),va(2,"span",12),ds(3),ba(),da(4,QE,1,4,"span",13),ba()}if(2&t){const t=Aa(2).$implicit;Ja(t.styleClass),ya("routerLink",t.routerLink)("queryParams",t.queryParams)("routerLinkActive","ui-state-active")("routerLinkActiveOptions",t.routerLinkActiveOptions||ku(16,JE))("ngClass",Eu(17,XE,t.disabled))("ngStyle",t.style),ca("data-automationid",t.automationId)("target",t.target)("title",t.title)("id",t.id)("tabindex",t.tabindex?t.tabindex:"0"),rr(1),ya("ngIf",t.icon),rr(2),ps(t.label),rr(1),ya("ngIf",t.items)}}function eS(t,e){if(1&t&&xa(0,"p-menubarSub",17),2&t){Aa();const t=pa(1),e=Aa().$implicit;ya("parentActive",t==Aa().activeItem)("item",e)("autoDisplay",!0)}}const nS=function(t,e,n){return{"ui-menuitem ui-corner-all":!0,"ui-menu-parent":t,"ui-menuitem-active":e,"ui-helper-hidden":n}};function iS(t,e){if(1&t){const t=Ma();va(0,"li",5,6),Ea("mouseenter",(function(e){Ne(t);const n=pa(1),i=Aa().$implicit;return Aa().onItemMouseEnter(e,n,i)}))("click",(function(e){Ne(t);const n=pa(1),i=Aa().$implicit;return Aa().onItemMenuClick(e,n,i)})),da(2,$E,5,17,"a",7),da(3,tS,5,19,"a",8),da(4,eS,1,3,"p-menubarSub",9),ba()}if(2&t){const t=pa(1),e=Aa().$implicit,n=Aa();ya("ngClass",Tu(4,nS,e.items,t==n.activeItem,!1===e.visible)),rr(2),ya("ngIf",!e.routerLink),rr(1),ya("ngIf",e.routerLink),rr(1),ya("ngIf",e.items)}}function rS(t,e){if(1&t&&(da(0,HE,1,3,"li",2),da(1,iS,5,8,"li",3)),2&t){const t=e.$implicit;ya("ngIf",t.separator),rr(1),ya("ngIf",!t.separator)}}const oS=function(t,e){return{"ui-menubar-root-list":t,"ui-widget-content ui-corner-all ui-submenu-list ui-shadow":e}},aS=["*","*"],sS=function(){return{"ui-menubar ui-widget ui-widget-content ui-corner-all":!0}};let uS=(()=>{let t=class{constructor(t,e){this.renderer=t,this.cd=e,this.autoZIndex=!0,this.baseZIndex=0,this.menuHoverActive=!1}get parentActive(){return this._parentActive}set parentActive(t){this.root||(this._parentActive=t,t||(this.activeItem=null))}onItemMenuClick(t,e,n){if(!this.autoDisplay){if(n.disabled)return;this.activeItem=this.activeMenu&&this.activeMenu.isEqualNode(e)?null:e;let t=e.children[0].nextElementSibling;if(t){let n=t.children[0];this.autoZIndex&&(n.style.zIndex=String(this.baseZIndex+ ++Nw.zindex)),this.root?(n.style.top=Nw.getOuterHeight(e.children[0])+"px",n.style.left="0px"):(n.style.top="0px",n.style.left=Nw.getOuterWidth(e.children[0])+"px")}this.menuClick=!0,this.menuHoverActive=!this.activeMenu||!this.activeMenu.isEqualNode(e),this.activeMenu=this.activeMenu&&this.activeMenu.isEqualNode(e)?null:e,this.bindEventListener()}}bindEventListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen("document","click",t=>{this.menuClick||(this.activeItem=null,this.menuHoverActive=!1,this.activeMenu=!1),this.menuClick=!1}))}onItemMouseEnter(t,e,n){if(this.autoDisplay||!this.autoDisplay&&this.root&&this.menuHoverActive){if(n.disabled)return;if(this.activeItem&&!this.activeItem.isEqualNode(e)||!this.activeItem){this.activeItem=e;let t=e.children[0].nextElementSibling;if(t){let n=t.children[0];n.style.zIndex=String(++Nw.zindex),this.root?(n.style.top=Nw.getOuterHeight(e.children[0])+"px",n.style.left="0px"):(n.style.top="0px",n.style.left=Nw.getOuterWidth(e.children[0])+"px")}this.activeMenu=e}}}itemClick(t,e){e.disabled?t.preventDefault():(e.url||t.preventDefault(),e.command&&e.command({originalEvent:t,item:e}),this.activeItem=null)}listClick(t){this.autoDisplay&&(this.activeItem=null)}ngOnDestroy(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}};return t.\u0275fac=function(e){return new(e||t)(fa(Us),fa(Ao))},t.\u0275cmp=me({type:t,selectors:[["p-menubarSub"]],inputs:{autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",parentActive:"parentActive",item:"item",root:"root",autoDisplay:"autoDisplay"},decls:2,vars:5,consts:[[3,"ngClass","click"],["ngFor","",3,"ngForOf"],["class","ui-menu-separator ui-widget-content",3,"ngClass",4,"ngIf"],[3,"ngClass","mouseenter","click",4,"ngIf"],[1,"ui-menu-separator","ui-widget-content",3,"ngClass"],[3,"ngClass","mouseenter","click"],["listItem",""],[3,"href","ngClass","ngStyle","class","click",4,"ngIf"],["role","menuitem",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","ngClass","ngStyle","class","click",4,"ngIf"],["class","ui-submenu",3,"parentActive","item","autoDisplay",4,"ngIf"],[3,"href","ngClass","ngStyle","click"],["class","ui-menuitem-icon",3,"ngClass",4,"ngIf"],[1,"ui-menuitem-text"],["class","ui-submenu-icon pi pi-fw",3,"ngClass",4,"ngIf"],[1,"ui-menuitem-icon",3,"ngClass"],[1,"ui-submenu-icon","pi","pi-fw",3,"ngClass"],["role","menuitem",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","ngClass","ngStyle","click"],[1,"ui-submenu",3,"parentActive","item","autoDisplay"]],template:function(t,e){1&t&&(va(0,"ul",0),Ea("click",(function(t){return e.listClick(t)})),da(1,rS,2,2,"ng-template",1),ba()),2&t&&(ya("ngClass",Su(2,oS,e.root,!e.root)),rr(1),ya("ngForOf",e.root?e.item:e.item.items))},directives:[Ic,Rc,Lc,Bc,iy,oy,t],encapsulation:2}),t})(),lS=(()=>{let t=class{constructor(t,e){this.el=t,this.renderer=e,this.autoZIndex=!0,this.baseZIndex=0}get autoDisplay(){return this._autoDisplay}set utc(t){console.log("AutoDisplay property is deprecated and functionality is not available.")}};return t.\u0275fac=function(e){return new(e||t)(fa(zs),fa(Us))},t.\u0275cmp=me({type:t,selectors:[["p-menubar"]],inputs:{autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",autoDisplay:"autoDisplay",model:"model",style:"style",styleClass:"styleClass"},ngContentSelectors:aS,decls:5,vars:8,consts:[[3,"ngClass","ngStyle"],["root","root",3,"item","baseZIndex","autoZIndex"],[1,"ui-menubar-custom"]],template:function(t,e){1&t&&(Da(aS),va(0,"div",0),va(1,"p-menubarSub",1),Ra(2),ba(),va(3,"div",2),Ra(4,1),ba(),ba()),2&t&&(Ja(e.styleClass),ya("ngClass",ku(7,sS))("ngStyle",e.style),rr(1),ya("item",e.model)("baseZIndex",e.baseZIndex)("autoZIndex",e.autoZIndex))},directives:[Ic,Bc,uS],encapsulation:2}),t})(),cS=(()=>{let t=class{};return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},imports:[[Hc,_y],_y]}),t})(),hS=(()=>{class t{constructor(){this.collapsed=!0,this.mapNavStyle={"border-radius":".25rem",top:"1rem"}}ngOnInit(){this.menu=[{items:[{command:()=>{this.changeGeo("NwkNeighborhoods")},label:"Neighborhoods"},{command:()=>{this.changeGeo("NwkWards")},label:"Wards"}],label:"Geographies"},{items:[{command:()=>{this.changeLayer("base")},id:"base",label:"Base"},{command:()=>{this.changeLayer("zoning")},id:"zoning",label:"Zoning"},{command:()=>{this.changeLayer("landuse")},id:"landuse",label:"Land Use"}],label:"Parcel Style"}]}changeLayer(t){this.map.updateViz(t)}changeGeo(t){this.map.changeGeo(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=me({type:t,selectors:[["app-root"]],viewQuery:function(t,e){var n;1&t&&Ju(qE,!0),2&t&&Yu(n=rl())&&(e.map=n.first)},decls:2,vars:1,consts:[[3,"model"]],template:function(t,e){1&t&&(xa(0,"p-menubar",0),xa(1,"app-map")),2&t&&ya("model",e.menu)},directives:[lS,qE],styles:['@charset "UTF-8";.p-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-right:-.5em;margin-left:-.5em;margin-top:-.5em}.p-grid[_ngcontent-%COMP%] > .p-col[_ngcontent-%COMP%], .p-grid[_ngcontent-%COMP%] > [class*=p-col][_ngcontent-%COMP%]{box-sizing:border-box}.p-nogutter[_ngcontent-%COMP%]{margin-right:0;margin-left:0;margin-top:0}.p-nogutter[_ngcontent-%COMP%] > .p-col[_ngcontent-%COMP%], .p-nogutter[_ngcontent-%COMP%] > [class*=p-col-][_ngcontent-%COMP%]{padding:0}.p-dir-row[_ngcontent-%COMP%]{flex-direction:row}.p-dir-rev[_ngcontent-%COMP%]{flex-direction:row-reverse}.p-dir-col[_ngcontent-%COMP%]{flex-direction:column}.p-dir-col-rev[_ngcontent-%COMP%]{flex-direction:column-reverse}.p-justify-start[_ngcontent-%COMP%]{justify-content:flex-start}.p-justify-end[_ngcontent-%COMP%]{justify-content:flex-end}.p-justify-center[_ngcontent-%COMP%]{justify-content:center}.p-justify-between[_ngcontent-%COMP%]{justify-content:space-between}.p-justify-around[_ngcontent-%COMP%]{justify-content:space-around}.p-justify-even[_ngcontent-%COMP%]{justify-content:space-evenly}.p-align-start[_ngcontent-%COMP%]{align-items:flex-start}.p-align-end[_ngcontent-%COMP%]{align-items:flex-end}.p-align-center[_ngcontent-%COMP%]{align-items:center}.p-align-baseline[_ngcontent-%COMP%]{align-items:baseline}.p-align-stretch[_ngcontent-%COMP%]{align-items:stretch}.p-col[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0;padding:.5em}.p-col-fixed[_ngcontent-%COMP%]{flex:0 0 auto;padding:.5em}.p-col-align-start[_ngcontent-%COMP%]{align-self:flex-start}.p-col-align-end[_ngcontent-%COMP%]{align-self:flex-end}.p-col-align-center[_ngcontent-%COMP%]{align-self:center}.p-col-align-baseline[_ngcontent-%COMP%]{align-self:baseline}.p-col-align-stretch[_ngcontent-%COMP%]{align-self:stretch}.p-dir-col-rev[_ngcontent-%COMP%] > .p-col[_ngcontent-%COMP%], .p-dir-col[_ngcontent-%COMP%] > .p-col[_ngcontent-%COMP%]{flex-basis:auto}.p-col-1[_ngcontent-%COMP%], .p-col-2[_ngcontent-%COMP%], .p-col-3[_ngcontent-%COMP%], .p-col-4[_ngcontent-%COMP%], .p-col-5[_ngcontent-%COMP%], .p-col-6[_ngcontent-%COMP%], .p-col-7[_ngcontent-%COMP%], .p-col-8[_ngcontent-%COMP%], .p-col-9[_ngcontent-%COMP%], .p-col-10[_ngcontent-%COMP%], .p-col-11[_ngcontent-%COMP%], .p-col-12[_ngcontent-%COMP%]{flex:0 0 auto;padding:.5em}.p-col-1[_ngcontent-%COMP%]{width:8.3333%}.p-col-2[_ngcontent-%COMP%]{width:16.6667%}.p-col-3[_ngcontent-%COMP%]{width:25%}.p-col-4[_ngcontent-%COMP%]{width:33.3333%}.p-col-5[_ngcontent-%COMP%]{width:41.6667%}.p-col-6[_ngcontent-%COMP%]{width:50%}.p-col-7[_ngcontent-%COMP%]{width:58.3333%}.p-col-8[_ngcontent-%COMP%]{width:66.6667%}.p-col-9[_ngcontent-%COMP%]{width:75%}.p-col-10[_ngcontent-%COMP%]{width:83.3333%}.p-col-11[_ngcontent-%COMP%]{width:91.6667%}.p-col-12[_ngcontent-%COMP%]{width:100%}.p-col-order-first[_ngcontent-%COMP%]{order:-1}.p-col-order-last[_ngcontent-%COMP%]{order:13}.p-col-order-0[_ngcontent-%COMP%]{order:0}.p-col-order-1[_ngcontent-%COMP%]{order:1}.p-col-order-2[_ngcontent-%COMP%]{order:2}.p-col-order-3[_ngcontent-%COMP%]{order:3}.p-col-order-4[_ngcontent-%COMP%]{order:4}.p-col-order-5[_ngcontent-%COMP%]{order:5}.p-col-order-6[_ngcontent-%COMP%]{order:6}.p-col-order-7[_ngcontent-%COMP%]{order:7}.p-col-order-8[_ngcontent-%COMP%]{order:8}.p-col-order-9[_ngcontent-%COMP%]{order:9}.p-col-order-10[_ngcontent-%COMP%]{order:10}.p-col-order-11[_ngcontent-%COMP%]{order:11}.p-col-order-12[_ngcontent-%COMP%]{order:12}.p-offset-12[_ngcontent-%COMP%]{margin-left:100%}.p-offset-11[_ngcontent-%COMP%]{margin-left:91.66666667%}.p-offset-10[_ngcontent-%COMP%]{margin-left:83.33333333%}.p-offset-9[_ngcontent-%COMP%]{margin-left:75%}.p-offset-8[_ngcontent-%COMP%]{margin-left:66.66666667%}.p-offset-7[_ngcontent-%COMP%]{margin-left:58.33333333%}.p-offset-6[_ngcontent-%COMP%]{margin-left:50%}.p-offset-5[_ngcontent-%COMP%]{margin-left:41.66666667%}.p-offset-4[_ngcontent-%COMP%]{margin-left:33.33333333%}.p-offset-3[_ngcontent-%COMP%]{margin-left:25%}.p-offset-2[_ngcontent-%COMP%]{margin-left:16.66666667%}.p-offset-1[_ngcontent-%COMP%]{margin-left:8.33333333%}.p-offset-0[_ngcontent-%COMP%]{margin-left:0}.p-lg-1[_ngcontent-%COMP%], .p-lg-2[_ngcontent-%COMP%], .p-lg-3[_ngcontent-%COMP%], .p-lg-4[_ngcontent-%COMP%], .p-lg-5[_ngcontent-%COMP%], .p-lg-6[_ngcontent-%COMP%], .p-lg-7[_ngcontent-%COMP%], .p-lg-8[_ngcontent-%COMP%], .p-lg-9[_ngcontent-%COMP%], .p-lg-10[_ngcontent-%COMP%], .p-lg-11[_ngcontent-%COMP%], .p-lg-12[_ngcontent-%COMP%], .p-md-1[_ngcontent-%COMP%], .p-md-2[_ngcontent-%COMP%], .p-md-3[_ngcontent-%COMP%], .p-md-4[_ngcontent-%COMP%], .p-md-5[_ngcontent-%COMP%], .p-md-6[_ngcontent-%COMP%], .p-md-7[_ngcontent-%COMP%], .p-md-8[_ngcontent-%COMP%], .p-md-9[_ngcontent-%COMP%], .p-md-10[_ngcontent-%COMP%], .p-md-11[_ngcontent-%COMP%], .p-md-12[_ngcontent-%COMP%], .p-sm-1[_ngcontent-%COMP%], .p-sm-2[_ngcontent-%COMP%], .p-sm-3[_ngcontent-%COMP%], .p-sm-4[_ngcontent-%COMP%], .p-sm-5[_ngcontent-%COMP%], .p-sm-6[_ngcontent-%COMP%], .p-sm-7[_ngcontent-%COMP%], .p-sm-8[_ngcontent-%COMP%], .p-sm-9[_ngcontent-%COMP%], .p-sm-10[_ngcontent-%COMP%], .p-sm-11[_ngcontent-%COMP%], .p-sm-12[_ngcontent-%COMP%], .p-xl-1[_ngcontent-%COMP%], .p-xl-2[_ngcontent-%COMP%], .p-xl-3[_ngcontent-%COMP%], .p-xl-4[_ngcontent-%COMP%], .p-xl-5[_ngcontent-%COMP%], .p-xl-6[_ngcontent-%COMP%], .p-xl-7[_ngcontent-%COMP%], .p-xl-8[_ngcontent-%COMP%], .p-xl-9[_ngcontent-%COMP%], .p-xl-10[_ngcontent-%COMP%], .p-xl-11[_ngcontent-%COMP%], .p-xl-12[_ngcontent-%COMP%]{padding:.5em}.p-col-nogutter[_ngcontent-%COMP%]{padding:0}@media screen and (min-width:576px){.p-sm-1[_ngcontent-%COMP%], .p-sm-2[_ngcontent-%COMP%], .p-sm-3[_ngcontent-%COMP%], .p-sm-4[_ngcontent-%COMP%], .p-sm-5[_ngcontent-%COMP%], .p-sm-6[_ngcontent-%COMP%], .p-sm-7[_ngcontent-%COMP%], .p-sm-8[_ngcontent-%COMP%], .p-sm-9[_ngcontent-%COMP%], .p-sm-10[_ngcontent-%COMP%], .p-sm-11[_ngcontent-%COMP%], .p-sm-12[_ngcontent-%COMP%]{flex:0 0 auto}.p-sm-1[_ngcontent-%COMP%]{width:8.3333%}.p-sm-2[_ngcontent-%COMP%]{width:16.6667%}.p-sm-3[_ngcontent-%COMP%]{width:25%}.p-sm-4[_ngcontent-%COMP%]{width:33.3333%}.p-sm-5[_ngcontent-%COMP%]{width:41.6667%}.p-sm-6[_ngcontent-%COMP%]{width:50%}.p-sm-7[_ngcontent-%COMP%]{width:58.3333%}.p-sm-8[_ngcontent-%COMP%]{width:66.6667%}.p-sm-9[_ngcontent-%COMP%]{width:75%}.p-sm-10[_ngcontent-%COMP%]{width:83.3333%}.p-sm-11[_ngcontent-%COMP%]{width:91.6667%}.p-sm-12[_ngcontent-%COMP%]{width:100%}.p-sm-offset-12[_ngcontent-%COMP%]{margin-left:100%}.p-sm-offset-11[_ngcontent-%COMP%]{margin-left:91.66666667%}.p-sm-offset-10[_ngcontent-%COMP%]{margin-left:83.33333333%}.p-sm-offset-9[_ngcontent-%COMP%]{margin-left:75%}.p-sm-offset-8[_ngcontent-%COMP%]{margin-left:66.66666667%}.p-sm-offset-7[_ngcontent-%COMP%]{margin-left:58.33333333%}.p-sm-offset-6[_ngcontent-%COMP%]{margin-left:50%}.p-sm-offset-5[_ngcontent-%COMP%]{margin-left:41.66666667%}.p-sm-offset-4[_ngcontent-%COMP%]{margin-left:33.33333333%}.p-sm-offset-3[_ngcontent-%COMP%]{margin-left:25%}.p-sm-offset-2[_ngcontent-%COMP%]{margin-left:16.66666667%}.p-sm-offset-1[_ngcontent-%COMP%]{margin-left:8.33333333%}.p-sm-offset-0[_ngcontent-%COMP%]{margin-left:0}.p-sm-order-first[_ngcontent-%COMP%]{order:-1}.p-sm-order-last[_ngcontent-%COMP%]{order:13}.p-sm-order-0[_ngcontent-%COMP%]{order:0}.p-sm-order-1[_ngcontent-%COMP%]{order:1}.p-sm-order-2[_ngcontent-%COMP%]{order:2}.p-sm-order-3[_ngcontent-%COMP%]{order:3}.p-sm-order-4[_ngcontent-%COMP%]{order:4}.p-sm-order-5[_ngcontent-%COMP%]{order:5}.p-sm-order-6[_ngcontent-%COMP%]{order:6}.p-sm-order-7[_ngcontent-%COMP%]{order:7}.p-sm-order-8[_ngcontent-%COMP%]{order:8}.p-sm-order-9[_ngcontent-%COMP%]{order:9}.p-sm-order-10[_ngcontent-%COMP%]{order:10}.p-sm-order-11[_ngcontent-%COMP%]{order:11}.p-sm-order-12[_ngcontent-%COMP%]{order:12}}@media screen and (min-width:768px){.p-md-1[_ngcontent-%COMP%], .p-md-2[_ngcontent-%COMP%], .p-md-3[_ngcontent-%COMP%], .p-md-4[_ngcontent-%COMP%], .p-md-5[_ngcontent-%COMP%], .p-md-6[_ngcontent-%COMP%], .p-md-7[_ngcontent-%COMP%], .p-md-8[_ngcontent-%COMP%], .p-md-9[_ngcontent-%COMP%], .p-md-10[_ngcontent-%COMP%], .p-md-11[_ngcontent-%COMP%], .p-md-12[_ngcontent-%COMP%]{flex:0 0 auto}.p-md-1[_ngcontent-%COMP%]{width:8.3333%}.p-md-2[_ngcontent-%COMP%]{width:16.6667%}.p-md-3[_ngcontent-%COMP%]{width:25%}.p-md-4[_ngcontent-%COMP%]{width:33.3333%}.p-md-5[_ngcontent-%COMP%]{width:41.6667%}.p-md-6[_ngcontent-%COMP%]{width:50%}.p-md-7[_ngcontent-%COMP%]{width:58.3333%}.p-md-8[_ngcontent-%COMP%]{width:66.6667%}.p-md-9[_ngcontent-%COMP%]{width:75%}.p-md-10[_ngcontent-%COMP%]{width:83.3333%}.p-md-11[_ngcontent-%COMP%]{width:91.6667%}.p-md-12[_ngcontent-%COMP%]{width:100%}.p-md-offset-12[_ngcontent-%COMP%]{margin-left:100%}.p-md-offset-11[_ngcontent-%COMP%]{margin-left:91.66666667%}.p-md-offset-10[_ngcontent-%COMP%]{margin-left:83.33333333%}.p-md-offset-9[_ngcontent-%COMP%]{margin-left:75%}.p-md-offset-8[_ngcontent-%COMP%]{margin-left:66.66666667%}.p-md-offset-7[_ngcontent-%COMP%]{margin-left:58.33333333%}.p-md-offset-6[_ngcontent-%COMP%]{margin-left:50%}.p-md-offset-5[_ngcontent-%COMP%]{margin-left:41.66666667%}.p-md-offset-4[_ngcontent-%COMP%]{margin-left:33.33333333%}.p-md-offset-3[_ngcontent-%COMP%]{margin-left:25%}.p-md-offset-2[_ngcontent-%COMP%]{margin-left:16.66666667%}.p-md-offset-1[_ngcontent-%COMP%]{margin-left:8.33333333%}.p-md-offset-0[_ngcontent-%COMP%]{margin-left:0}.p-md-order-first[_ngcontent-%COMP%]{order:-1}.p-md-order-last[_ngcontent-%COMP%]{order:13}.p-md-order-0[_ngcontent-%COMP%]{order:0}.p-md-order-1[_ngcontent-%COMP%]{order:1}.p-md-order-2[_ngcontent-%COMP%]{order:2}.p-md-order-3[_ngcontent-%COMP%]{order:3}.p-md-order-4[_ngcontent-%COMP%]{order:4}.p-md-order-5[_ngcontent-%COMP%]{order:5}.p-md-order-6[_ngcontent-%COMP%]{order:6}.p-md-order-7[_ngcontent-%COMP%]{order:7}.p-md-order-8[_ngcontent-%COMP%]{order:8}.p-md-order-9[_ngcontent-%COMP%]{order:9}.p-md-order-10[_ngcontent-%COMP%]{order:10}.p-md-order-11[_ngcontent-%COMP%]{order:11}.p-md-order-12[_ngcontent-%COMP%]{order:12}}@media screen and (min-width:992px){.p-lg-1[_ngcontent-%COMP%], .p-lg-2[_ngcontent-%COMP%], .p-lg-3[_ngcontent-%COMP%], .p-lg-4[_ngcontent-%COMP%], .p-lg-5[_ngcontent-%COMP%], .p-lg-6[_ngcontent-%COMP%], .p-lg-7[_ngcontent-%COMP%], .p-lg-8[_ngcontent-%COMP%], .p-lg-9[_ngcontent-%COMP%], .p-lg-10[_ngcontent-%COMP%], .p-lg-11[_ngcontent-%COMP%], .p-lg-12[_ngcontent-%COMP%]{flex:0 0 auto}.p-lg-1[_ngcontent-%COMP%]{width:8.3333%}.p-lg-2[_ngcontent-%COMP%]{width:16.6667%}.p-lg-3[_ngcontent-%COMP%]{width:25%}.p-lg-4[_ngcontent-%COMP%]{width:33.3333%}.p-lg-5[_ngcontent-%COMP%]{width:41.6667%}.p-lg-6[_ngcontent-%COMP%]{width:50%}.p-lg-7[_ngcontent-%COMP%]{width:58.3333%}.p-lg-8[_ngcontent-%COMP%]{width:66.6667%}.p-lg-9[_ngcontent-%COMP%]{width:75%}.p-lg-10[_ngcontent-%COMP%]{width:83.3333%}.p-lg-11[_ngcontent-%COMP%]{width:91.6667%}.p-lg-12[_ngcontent-%COMP%]{width:100%}.p-lg-offset-12[_ngcontent-%COMP%]{margin-left:100%}.p-lg-offset-11[_ngcontent-%COMP%]{margin-left:91.66666667%}.p-lg-offset-10[_ngcontent-%COMP%]{margin-left:83.33333333%}.p-lg-offset-9[_ngcontent-%COMP%]{margin-left:75%}.p-lg-offset-8[_ngcontent-%COMP%]{margin-left:66.66666667%}.p-lg-offset-7[_ngcontent-%COMP%]{margin-left:58.33333333%}.p-lg-offset-6[_ngcontent-%COMP%]{margin-left:50%}.p-lg-offset-5[_ngcontent-%COMP%]{margin-left:41.66666667%}.p-lg-offset-4[_ngcontent-%COMP%]{margin-left:33.33333333%}.p-lg-offset-3[_ngcontent-%COMP%]{margin-left:25%}.p-lg-offset-2[_ngcontent-%COMP%]{margin-left:16.66666667%}.p-lg-offset-1[_ngcontent-%COMP%]{margin-left:8.33333333%}.p-lg-offset-0[_ngcontent-%COMP%]{margin-left:0}.p-lg-order-first[_ngcontent-%COMP%]{order:-1}.p-lg-order-last[_ngcontent-%COMP%]{order:13}.p-lg-order-0[_ngcontent-%COMP%]{order:0}.p-lg-order-1[_ngcontent-%COMP%]{order:1}.p-lg-order-2[_ngcontent-%COMP%]{order:2}.p-lg-order-3[_ngcontent-%COMP%]{order:3}.p-lg-order-4[_ngcontent-%COMP%]{order:4}.p-lg-order-5[_ngcontent-%COMP%]{order:5}.p-lg-order-6[_ngcontent-%COMP%]{order:6}.p-lg-order-7[_ngcontent-%COMP%]{order:7}.p-lg-order-8[_ngcontent-%COMP%]{order:8}.p-lg-order-9[_ngcontent-%COMP%]{order:9}.p-lg-order-10[_ngcontent-%COMP%]{order:10}.p-lg-order-11[_ngcontent-%COMP%]{order:11}.p-lg-order-12[_ngcontent-%COMP%]{order:12}}@media screen and (min-width:1200px){.p-xl-1[_ngcontent-%COMP%], .p-xl-2[_ngcontent-%COMP%], .p-xl-3[_ngcontent-%COMP%], .p-xl-4[_ngcontent-%COMP%], .p-xl-5[_ngcontent-%COMP%], .p-xl-6[_ngcontent-%COMP%], .p-xl-7[_ngcontent-%COMP%], .p-xl-8[_ngcontent-%COMP%], .p-xl-9[_ngcontent-%COMP%], .p-xl-10[_ngcontent-%COMP%], .p-xl-11[_ngcontent-%COMP%], .p-xl-12[_ngcontent-%COMP%]{flex:0 0 auto}.p-xl-1[_ngcontent-%COMP%]{width:8.3333%}.p-xl-2[_ngcontent-%COMP%]{width:16.6667%}.p-xl-3[_ngcontent-%COMP%]{width:25%}.p-xl-4[_ngcontent-%COMP%]{width:33.3333%}.p-xl-5[_ngcontent-%COMP%]{width:41.6667%}.p-xl-6[_ngcontent-%COMP%]{width:50%}.p-xl-7[_ngcontent-%COMP%]{width:58.3333%}.p-xl-8[_ngcontent-%COMP%]{width:66.6667%}.p-xl-9[_ngcontent-%COMP%]{width:75%}.p-xl-10[_ngcontent-%COMP%]{width:83.3333%}.p-xl-11[_ngcontent-%COMP%]{width:91.6667%}.p-xl-12[_ngcontent-%COMP%]{width:100%}.p-xl-offset-12[_ngcontent-%COMP%]{margin-left:100%}.p-xl-offset-11[_ngcontent-%COMP%]{margin-left:91.66666667%}.p-xl-offset-10[_ngcontent-%COMP%]{margin-left:83.33333333%}.p-xl-offset-9[_ngcontent-%COMP%]{margin-left:75%}.p-xl-offset-8[_ngcontent-%COMP%]{margin-left:66.66666667%}.p-xl-offset-7[_ngcontent-%COMP%]{margin-left:58.33333333%}.p-xl-offset-6[_ngcontent-%COMP%]{margin-left:50%}.p-xl-offset-5[_ngcontent-%COMP%]{margin-left:41.66666667%}.p-xl-offset-4[_ngcontent-%COMP%]{margin-left:33.33333333%}.p-xl-offset-3[_ngcontent-%COMP%]{margin-left:25%}.p-xl-offset-2[_ngcontent-%COMP%]{margin-left:16.66666667%}.p-xl-offset-1[_ngcontent-%COMP%]{margin-left:8.33333333%}.p-xl-offset-0[_ngcontent-%COMP%]{margin-left:0}.p-xl-order-first[_ngcontent-%COMP%]{order:-1}.p-xl-order-last[_ngcontent-%COMP%]{order:13}.p-xl-order-0[_ngcontent-%COMP%]{order:0}.p-xl-order-1[_ngcontent-%COMP%]{order:1}.p-xl-order-2[_ngcontent-%COMP%]{order:2}.p-xl-order-3[_ngcontent-%COMP%]{order:3}.p-xl-order-4[_ngcontent-%COMP%]{order:4}.p-xl-order-5[_ngcontent-%COMP%]{order:5}.p-xl-order-6[_ngcontent-%COMP%]{order:6}.p-xl-order-7[_ngcontent-%COMP%]{order:7}.p-xl-order-8[_ngcontent-%COMP%]{order:8}.p-xl-order-9[_ngcontent-%COMP%]{order:9}.p-xl-order-10[_ngcontent-%COMP%]{order:10}.p-xl-order-11[_ngcontent-%COMP%]{order:11}.p-xl-order-12[_ngcontent-%COMP%]{order:12}}*[_ngcontent-%COMP%]{box-sizing:border-box}body[_ngcontent-%COMP%]   .ui-widget[_ngcontent-%COMP%]{font-family:Open Sans,Helvetica Neue,sans-serif;font-size:14px;text-decoration:none}body[_ngcontent-%COMP%]   .ui-corner-all[_ngcontent-%COMP%]{border-radius:2px}body[_ngcontent-%COMP%]   .ui-corner-top[_ngcontent-%COMP%]{border-top-left-radius:2px;border-top-right-radius:2px}body[_ngcontent-%COMP%]   .ui-corner-bottom[_ngcontent-%COMP%]{border-bottom-left-radius:2px;border-bottom-right-radius:2px}body[_ngcontent-%COMP%]   .ui-corner-left[_ngcontent-%COMP%]{border-top-left-radius:2px;border-bottom-left-radius:2px}body[_ngcontent-%COMP%]   .ui-corner-right[_ngcontent-%COMP%]{border-top-right-radius:2px;border-bottom-right-radius:2px}body[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#7b95a3;text-decoration:none}body[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#6c8999}body[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#617c8a}body[_ngcontent-%COMP%]   .ui-helper-reset[_ngcontent-%COMP%]{line-height:normal}body[_ngcontent-%COMP%]   .ui-state-disabled[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-widget[_ngcontent-%COMP%]:disabled{opacity:.5;filter:alpha(opacity=50)}body[_ngcontent-%COMP%]   .pi[_ngcontent-%COMP%]{font-size:1.25em}body[_ngcontent-%COMP%]   .ui-inputtext[_ngcontent-%COMP%]{font-size:14px;color:#666;background:#f4f4f4;padding:.429em;border:1px solid #dadada;transition:border-color .2s,box-shadow .2s;-webkit-appearance:none;-moz-appearance:none;appearance:none}body[_ngcontent-%COMP%]   .ui-inputtext[_ngcontent-%COMP%]:enabled:hover:not(.ui-state-error){border-color:#a6a6a6}body[_ngcontent-%COMP%]   .ui-inputtext[_ngcontent-%COMP%]:enabled:focus:not(.ui-state-error){outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7;border-color:#dadada}body[_ngcontent-%COMP%]   .ui-chkbox[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin:0;width:20px;height:20px}body[_ngcontent-%COMP%]   .ui-chkbox[_ngcontent-%COMP%]   .ui-chkbox-box[_ngcontent-%COMP%]{border:1px solid #dadada;background-color:#f4f4f4;width:20px;height:20px;text-align:center;border-radius:2px;transition:background-color .2s,border-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-chkbox[_ngcontent-%COMP%]   .ui-chkbox-box[_ngcontent-%COMP%]:not(.ui-state-disabled):hover{border-color:#a6a6a6}body[_ngcontent-%COMP%]   .ui-chkbox[_ngcontent-%COMP%]   .ui-chkbox-box.ui-state-focus[_ngcontent-%COMP%]{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7;border-color:#dadada}body[_ngcontent-%COMP%]   .ui-chkbox[_ngcontent-%COMP%]   .ui-chkbox-box.ui-state-active[_ngcontent-%COMP%]{border-color:#7b95a3;background-color:#7b95a3;color:#fff}body[_ngcontent-%COMP%]   .ui-chkbox[_ngcontent-%COMP%]   .ui-chkbox-box.ui-state-active[_ngcontent-%COMP%]:not(.ui-state-disabled):hover{border-color:#617c8a;background-color:#617c8a;color:#fff}body[_ngcontent-%COMP%]   .ui-chkbox[_ngcontent-%COMP%]   .ui-chkbox-box[_ngcontent-%COMP%]   .ui-chkbox-icon[_ngcontent-%COMP%]{overflow:hidden;position:relative;font-size:18px}body[_ngcontent-%COMP%]   .ui-chkbox-label[_ngcontent-%COMP%]{margin:0 0 0 .5em}body[_ngcontent-%COMP%]   .ui-radiobutton[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin:0;width:20px;height:20px}body[_ngcontent-%COMP%]   .ui-radiobutton[_ngcontent-%COMP%]   .ui-radiobutton-box[_ngcontent-%COMP%]{border:1px solid #dadada;background-color:#f4f4f4;width:20px;height:20px;text-align:center;position:relative;transition:background-color .2s,border-color .2s,box-shadow .2s;border-radius:50%}body[_ngcontent-%COMP%]   .ui-radiobutton[_ngcontent-%COMP%]   .ui-radiobutton-box[_ngcontent-%COMP%]:not(.ui-state-disabled):not(.ui-state-active):hover{border-color:#a6a6a6}body[_ngcontent-%COMP%]   .ui-radiobutton[_ngcontent-%COMP%]   .ui-radiobutton-box.ui-state-focus[_ngcontent-%COMP%]{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7;border-color:#dadada}body[_ngcontent-%COMP%]   .ui-radiobutton[_ngcontent-%COMP%]   .ui-radiobutton-box.ui-state-active[_ngcontent-%COMP%]{border-color:#7b95a3;background-color:#7b95a3;color:#fff}body[_ngcontent-%COMP%]   .ui-radiobutton[_ngcontent-%COMP%]   .ui-radiobutton-box.ui-state-active[_ngcontent-%COMP%]   .ui-radiobutton-icon[_ngcontent-%COMP%]{background-color:#fff}body[_ngcontent-%COMP%]   .ui-radiobutton[_ngcontent-%COMP%]   .ui-radiobutton-box.ui-state-active[_ngcontent-%COMP%]:not(.ui-state-disabled):hover{border-color:#617c8a;background-color:#617c8a;color:#fff}body[_ngcontent-%COMP%]   .ui-radiobutton[_ngcontent-%COMP%]   .ui-radiobutton-box[_ngcontent-%COMP%]   .ui-radiobutton-icon[_ngcontent-%COMP%]{background:transparent;width:10px;height:10px;display:inline-block;position:absolute;left:50%;top:50%;margin-left:-5px;margin-top:-5px;transition:background-color .2s;border-radius:50%}body[_ngcontent-%COMP%]   .ui-radiobutton[_ngcontent-%COMP%]   .ui-radiobutton-box[_ngcontent-%COMP%]   .ui-radiobutton-icon[_ngcontent-%COMP%]:before{display:none}body[_ngcontent-%COMP%]   .ui-radiobutton-label[_ngcontent-%COMP%]{margin:0 0 0 .5em}body[_ngcontent-%COMP%]   .ui-inputswitch[_ngcontent-%COMP%]{width:3em;height:1.75em}body[_ngcontent-%COMP%]   .ui-inputswitch[_ngcontent-%COMP%]   .ui-inputswitch-slider[_ngcontent-%COMP%]{transition:background-color .2s,box-shadow .2s;border-radius:30px;background:#f4f4f4}body[_ngcontent-%COMP%]   .ui-inputswitch[_ngcontent-%COMP%]   .ui-inputswitch-slider[_ngcontent-%COMP%]:before{background-color:#7b95a3;height:1.25em;width:1.25em;left:.25em;bottom:.25em;border-radius:50%;transition:.2s}body[_ngcontent-%COMP%]   .ui-inputswitch.ui-inputswitch-checked[_ngcontent-%COMP%]   .ui-inputswitch-slider[_ngcontent-%COMP%]:before{transform:translateX(1.25em)}body[_ngcontent-%COMP%]   .ui-inputswitch.ui-inputswitch-focus[_ngcontent-%COMP%]   .ui-inputswitch-slider[_ngcontent-%COMP%]{background:#d8dae2;outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-inputswitch[_ngcontent-%COMP%]:not(.ui-state-disabled):hover   .ui-inputswitch-slider[_ngcontent-%COMP%]{background-color:#d8dae2}body[_ngcontent-%COMP%]   .ui-inputswitch.ui-inputswitch-checked[_ngcontent-%COMP%]   .ui-inputswitch-slider[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-inputswitch.ui-inputswitch-checked[_ngcontent-%COMP%]:not(.ui-state-disabled):hover   .ui-inputswitch-slider[_ngcontent-%COMP%]{background-color:#afd3c8}body[_ngcontent-%COMP%]   .ui-inputswitch.ui-inputswitch-checked.ui-inputswitch-focus[_ngcontent-%COMP%]   .ui-inputswitch-slider[_ngcontent-%COMP%]{background:#afd3c8}body[_ngcontent-%COMP%]   .ui-autocomplete[_ngcontent-%COMP%]   .ui-autocomplete-input[_ngcontent-%COMP%]{padding:.429em}body[_ngcontent-%COMP%]   .ui-autocomplete.ui-autocomplete-multiple[_ngcontent-%COMP%]   .ui-autocomplete-multiple-container[_ngcontent-%COMP%]{padding:.2145em .429em}body[_ngcontent-%COMP%]   .ui-autocomplete.ui-autocomplete-multiple[_ngcontent-%COMP%]   .ui-autocomplete-multiple-container[_ngcontent-%COMP%]:not(.ui-state-disabled):hover{border-color:#a6a6a6}body[_ngcontent-%COMP%]   .ui-autocomplete.ui-autocomplete-multiple[_ngcontent-%COMP%]   .ui-autocomplete-multiple-container[_ngcontent-%COMP%]:not(.ui-state-disabled).ui-state-focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7;border-color:#dadada}body[_ngcontent-%COMP%]   .ui-autocomplete.ui-autocomplete-multiple[_ngcontent-%COMP%]   .ui-autocomplete-multiple-container[_ngcontent-%COMP%]   .ui-autocomplete-input-token[_ngcontent-%COMP%]{margin:0;padding:.2145em 0;color:#666}body[_ngcontent-%COMP%]   .ui-autocomplete.ui-autocomplete-multiple[_ngcontent-%COMP%]   .ui-autocomplete-multiple-container[_ngcontent-%COMP%]   .ui-autocomplete-input-token[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:Open Sans,Helvetica Neue,sans-serif;font-size:14px;padding:0;margin:0}body[_ngcontent-%COMP%]   .ui-autocomplete.ui-autocomplete-multiple[_ngcontent-%COMP%]   .ui-autocomplete-multiple-container[_ngcontent-%COMP%]   .ui-autocomplete-token[_ngcontent-%COMP%]{font-size:14px;padding:.2145em .429em;margin:0 .286em 0 0;background:#afd3c8;color:#385048}body[_ngcontent-%COMP%]   .ui-autocomplete-panel[_ngcontent-%COMP%]{padding:0;border:1px solid #eaeaea;background-color:#fff;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body[_ngcontent-%COMP%]   .ui-autocomplete-panel[_ngcontent-%COMP%]   .ui-autocomplete-items[_ngcontent-%COMP%]{padding:0}body[_ngcontent-%COMP%]   .ui-autocomplete-panel[_ngcontent-%COMP%]   .ui-autocomplete-items[_ngcontent-%COMP%]   .ui-autocomplete-list-item[_ngcontent-%COMP%]{margin:0;padding:.429em .857em;border:0;color:#666;background-color:transparent;border-radius:0}body[_ngcontent-%COMP%]   .ui-autocomplete-panel[_ngcontent-%COMP%]   .ui-autocomplete-items[_ngcontent-%COMP%]   .ui-autocomplete-list-item.ui-state-highlight[_ngcontent-%COMP%]{color:#385048;background-color:#afd3c8}body[_ngcontent-%COMP%]   .ui-autocomplete-panel[_ngcontent-%COMP%]   .ui-autocomplete-items[_ngcontent-%COMP%]   .ui-autocomplete-group[_ngcontent-%COMP%]{padding:.429em .857em;background-color:#dadada;color:#666}body[_ngcontent-%COMP%]   .ui-fluid[_ngcontent-%COMP%]   .ui-autocomplete[_ngcontent-%COMP%]   .ui-autocomplete-dropdown.ui-button[_ngcontent-%COMP%]{width:2.357em}body[_ngcontent-%COMP%]   .ui-fluid[_ngcontent-%COMP%]   .ui-autocomplete.ui-autocomplete-dd[_ngcontent-%COMP%]   .ui-inputtext[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-fluid[_ngcontent-%COMP%]   .ui-autocomplete.ui-autocomplete-multiple.ui-autocomplete-dd[_ngcontent-%COMP%]   .ui-autocomplete-multiple-container[_ngcontent-%COMP%]{border-right:0;width:calc(100% - 2.357em)}body[_ngcontent-%COMP%]   .ui-chips[_ngcontent-%COMP%] > ul.ui-inputtext[_ngcontent-%COMP%]{padding:.2145em .429em;display:inline-block}body[_ngcontent-%COMP%]   .ui-chips[_ngcontent-%COMP%] > ul.ui-inputtext[_ngcontent-%COMP%]:not(.ui-state-disabled):hover{border-color:#a6a6a6}body[_ngcontent-%COMP%]   .ui-chips[_ngcontent-%COMP%] > ul.ui-inputtext[_ngcontent-%COMP%]:not(.ui-state-disabled).ui-state-focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7;border-color:#dadada}body[_ngcontent-%COMP%]   .ui-chips[_ngcontent-%COMP%] > ul.ui-inputtext[_ngcontent-%COMP%]   .ui-chips-input-token[_ngcontent-%COMP%]{padding:.2145em 0}body[_ngcontent-%COMP%]   .ui-chips[_ngcontent-%COMP%] > ul.ui-inputtext[_ngcontent-%COMP%]   .ui-chips-input-token[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:Open Sans,Helvetica Neue,sans-serif;font-size:14px;padding:0;margin:0;color:#666}body[_ngcontent-%COMP%]   .ui-chips[_ngcontent-%COMP%] > ul.ui-inputtext[_ngcontent-%COMP%]   .ui-chips-input-token[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, body[_ngcontent-%COMP%]   .ui-chips[_ngcontent-%COMP%] > ul.ui-inputtext[_ngcontent-%COMP%]   .ui-chips-input-token[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{border:0}body[_ngcontent-%COMP%]   .ui-chips[_ngcontent-%COMP%] > ul.ui-inputtext[_ngcontent-%COMP%]   .ui-chips-token[_ngcontent-%COMP%]{font-size:14px;padding:.2145em .429em;margin:0 .286em 0 0;background:#afd3c8;color:#385048}body[_ngcontent-%COMP%]   .ui-dropdown[_ngcontent-%COMP%]{background:#f4f4f4;border:1px solid #dadada;transition:border-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-dropdown[_ngcontent-%COMP%]:not(.ui-state-disabled):hover{border-color:#a6a6a6}body[_ngcontent-%COMP%]   .ui-dropdown[_ngcontent-%COMP%]:not(.ui-state-disabled).ui-state-focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7;border-color:#dadada}body[_ngcontent-%COMP%]   .ui-dropdown[_ngcontent-%COMP%]   .ui-dropdown-label[_ngcontent-%COMP%]{padding-right:2em}body[_ngcontent-%COMP%]   .ui-dropdown[_ngcontent-%COMP%]   .ui-dropdown-trigger[_ngcontent-%COMP%]{background-color:#f4f4f4;width:2em;line-height:2em;text-align:center;padding:0;color:#666}body[_ngcontent-%COMP%]   .ui-dropdown[_ngcontent-%COMP%]   .ui-dropdown-clear-icon[_ngcontent-%COMP%]{color:#666}body[_ngcontent-%COMP%]   .ui-dropdown.ui-dropdown-clearable[_ngcontent-%COMP%]   .ui-dropdown-label[_ngcontent-%COMP%]{padding-right:4em}body[_ngcontent-%COMP%]   .ui-dropdown-panel[_ngcontent-%COMP%]{padding:0;border:1px solid #eaeaea;background-color:#fff;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body[_ngcontent-%COMP%]   .ui-dropdown-panel[_ngcontent-%COMP%]   .ui-dropdown-filter-container[_ngcontent-%COMP%]{padding:.429em .857em;border-bottom:1px solid #eaeaea;color:#666;background-color:#fff;margin:0}body[_ngcontent-%COMP%]   .ui-dropdown-panel[_ngcontent-%COMP%]   .ui-dropdown-filter-container[_ngcontent-%COMP%]   .ui-dropdown-filter[_ngcontent-%COMP%]{width:100%;padding-right:2em}body[_ngcontent-%COMP%]   .ui-dropdown-panel[_ngcontent-%COMP%]   .ui-dropdown-filter-container[_ngcontent-%COMP%]   .ui-dropdown-filter-icon[_ngcontent-%COMP%]{top:50%;margin-top:-.5em;right:1.357em;color:#a6a6a6}body[_ngcontent-%COMP%]   .ui-dropdown-panel[_ngcontent-%COMP%]   .ui-dropdown-items[_ngcontent-%COMP%]{padding:0}body[_ngcontent-%COMP%]   .ui-dropdown-panel[_ngcontent-%COMP%]   .ui-dropdown-items[_ngcontent-%COMP%]   .ui-dropdown-item[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-dropdown-panel[_ngcontent-%COMP%]   .ui-dropdown-items[_ngcontent-%COMP%]   .ui-dropdown-item-group[_ngcontent-%COMP%]{margin:0;padding:.429em .857em;border:0;color:#666;background-color:transparent;border-radius:0}body[_ngcontent-%COMP%]   .ui-dropdown-panel[_ngcontent-%COMP%]   .ui-dropdown-items[_ngcontent-%COMP%]   .ui-dropdown-item-group.ui-state-highlight[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-dropdown-panel[_ngcontent-%COMP%]   .ui-dropdown-items[_ngcontent-%COMP%]   .ui-dropdown-item.ui-state-highlight[_ngcontent-%COMP%]{color:#385048;background-color:#afd3c8}body[_ngcontent-%COMP%]   .ui-dropdown-panel[_ngcontent-%COMP%]   .ui-dropdown-items[_ngcontent-%COMP%]   .ui-dropdown-item-group[_ngcontent-%COMP%]:not(.ui-state-highlight):not(.ui-state-disabled):hover, body[_ngcontent-%COMP%]   .ui-dropdown-panel[_ngcontent-%COMP%]   .ui-dropdown-items[_ngcontent-%COMP%]   .ui-dropdown-item[_ngcontent-%COMP%]:not(.ui-state-highlight):not(.ui-state-disabled):hover{color:#666;background-color:#f4f4f4}body[_ngcontent-%COMP%]   .ui-multiselect[_ngcontent-%COMP%]{background:#f4f4f4;border:1px solid #dadada;transition:border-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-multiselect[_ngcontent-%COMP%]:not(.ui-state-disabled):hover{border-color:#a6a6a6}body[_ngcontent-%COMP%]   .ui-multiselect[_ngcontent-%COMP%]:not(.ui-state-disabled).ui-state-focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7;border-color:#dadada}body[_ngcontent-%COMP%]   .ui-multiselect[_ngcontent-%COMP%]   .ui-multiselect-label[_ngcontent-%COMP%]{padding:.429em 2em .429em .429em;color:#666}body[_ngcontent-%COMP%]   .ui-multiselect[_ngcontent-%COMP%]   .ui-multiselect-trigger[_ngcontent-%COMP%]{background-color:#f4f4f4;width:2em;line-height:2em;text-align:center;padding:0;color:#666}body[_ngcontent-%COMP%]   .ui-multiselect-panel[_ngcontent-%COMP%]{padding:0;border:1px solid #eaeaea;background-color:#fff;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body[_ngcontent-%COMP%]   .ui-multiselect-panel[_ngcontent-%COMP%]   .ui-multiselect-header[_ngcontent-%COMP%]{padding:.429em .857em;border-bottom:1px solid #eaeaea;color:#666;background-color:#fff;margin:0}body[_ngcontent-%COMP%]   .ui-multiselect-panel[_ngcontent-%COMP%]   .ui-multiselect-header[_ngcontent-%COMP%]   .ui-multiselect-filter-container[_ngcontent-%COMP%]{float:none;width:70%;display:inline-block;vertical-align:middle;margin-left:0}body[_ngcontent-%COMP%]   .ui-multiselect-panel[_ngcontent-%COMP%]   .ui-multiselect-header[_ngcontent-%COMP%]   .ui-multiselect-filter-container[_ngcontent-%COMP%]   .ui-inputtext[_ngcontent-%COMP%]{padding:.429em 2em .429em .429em}body[_ngcontent-%COMP%]   .ui-multiselect-panel[_ngcontent-%COMP%]   .ui-multiselect-header[_ngcontent-%COMP%]   .ui-multiselect-filter-container[_ngcontent-%COMP%]   .ui-multiselect-filter-icon[_ngcontent-%COMP%]{color:#a6a6a6;top:50%;margin-top:-.5em;right:.5em;left:auto}body[_ngcontent-%COMP%]   .ui-multiselect-panel[_ngcontent-%COMP%]   .ui-multiselect-header[_ngcontent-%COMP%]   .ui-chkbox[_ngcontent-%COMP%]{margin-right:.5em;float:none;vertical-align:middle}body[_ngcontent-%COMP%]   .ui-multiselect-panel[_ngcontent-%COMP%]   .ui-multiselect-header[_ngcontent-%COMP%]   .ui-multiselect-close[_ngcontent-%COMP%]{color:#666;top:50%;margin-top:-.5em;line-height:1;transition:color .2s,background-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-multiselect-panel[_ngcontent-%COMP%]   .ui-multiselect-header[_ngcontent-%COMP%]   .ui-multiselect-close[_ngcontent-%COMP%]:hover{color:#7b95a3}body[_ngcontent-%COMP%]   .ui-multiselect-panel[_ngcontent-%COMP%]   .ui-multiselect-header[_ngcontent-%COMP%]   .ui-multiselect-close[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-multiselect-panel[_ngcontent-%COMP%]   .ui-multiselect-items[_ngcontent-%COMP%]{padding:0}body[_ngcontent-%COMP%]   .ui-multiselect-panel[_ngcontent-%COMP%]   .ui-multiselect-items[_ngcontent-%COMP%]   .ui-multiselect-item[_ngcontent-%COMP%]{margin:0;padding:.429em .857em;border:0;color:#666;background-color:transparent;transition:background-color .2s,box-shadow .2s;border-radius:0}body[_ngcontent-%COMP%]   .ui-multiselect-panel[_ngcontent-%COMP%]   .ui-multiselect-items[_ngcontent-%COMP%]   .ui-multiselect-item.ui-state-highlight[_ngcontent-%COMP%]{color:#385048;background-color:#afd3c8}body[_ngcontent-%COMP%]   .ui-multiselect-panel[_ngcontent-%COMP%]   .ui-multiselect-items[_ngcontent-%COMP%]   .ui-multiselect-item[_ngcontent-%COMP%]:not(.ui-state-highlight):not(.ui-state-disabled):hover{color:#666;background-color:#f4f4f4}body[_ngcontent-%COMP%]   .ui-multiselect-panel[_ngcontent-%COMP%]   .ui-multiselect-items[_ngcontent-%COMP%]   .ui-multiselect-item.ui-state-disabled[_ngcontent-%COMP%]   .ui-chkbox-box[_ngcontent-%COMP%]{cursor:auto}body[_ngcontent-%COMP%]   .ui-multiselect-panel[_ngcontent-%COMP%]   .ui-multiselect-items[_ngcontent-%COMP%]   .ui-multiselect-item.ui-state-disabled[_ngcontent-%COMP%]   .ui-chkbox-box[_ngcontent-%COMP%]:hover{border:1px solid #dadada}body[_ngcontent-%COMP%]   .ui-multiselect-panel[_ngcontent-%COMP%]   .ui-multiselect-items[_ngcontent-%COMP%]   .ui-multiselect-item.ui-state-disabled[_ngcontent-%COMP%]   .ui-chkbox-box.ui-state-active[_ngcontent-%COMP%]:hover{border-color:#7b95a3}body[_ngcontent-%COMP%]   .ui-multiselect-panel[_ngcontent-%COMP%]   .ui-multiselect-items[_ngcontent-%COMP%]   .ui-multiselect-item[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:inset 0 0 0 .2em #e4e9ec}body[_ngcontent-%COMP%]   .ui-multiselect-panel[_ngcontent-%COMP%]   .ui-multiselect-items[_ngcontent-%COMP%]   .ui-multiselect-item[_ngcontent-%COMP%]   .ui-chkbox[_ngcontent-%COMP%]{position:static;display:inline-block;vertical-align:middle;margin:0 .5em 0 0}body[_ngcontent-%COMP%]   .ui-multiselect-panel[_ngcontent-%COMP%]   .ui-multiselect-items[_ngcontent-%COMP%]   .ui-multiselect-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}body[_ngcontent-%COMP%]   .ui-listbox[_ngcontent-%COMP%]{padding:0;min-width:12em;background:#fff;border:1px solid #eaeaea}body[_ngcontent-%COMP%]   .ui-listbox[_ngcontent-%COMP%]   .ui-chkbox[_ngcontent-%COMP%]{margin:0 .5em 0 0}body[_ngcontent-%COMP%]   .ui-listbox[_ngcontent-%COMP%]   .ui-listbox-header[_ngcontent-%COMP%]{padding:.429em .857em;border-bottom:1px solid #eaeaea;color:#666;background-color:#fff;margin:0}body[_ngcontent-%COMP%]   .ui-listbox[_ngcontent-%COMP%]   .ui-listbox-header[_ngcontent-%COMP%]   .ui-listbox-filter-container[_ngcontent-%COMP%]{width:calc(100% - 2.214em)}body[_ngcontent-%COMP%]   .ui-listbox[_ngcontent-%COMP%]   .ui-listbox-header[_ngcontent-%COMP%]   .ui-listbox-filter-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.429em 2em .429em .429em}body[_ngcontent-%COMP%]   .ui-listbox[_ngcontent-%COMP%]   .ui-listbox-header[_ngcontent-%COMP%]   .ui-listbox-filter-container[_ngcontent-%COMP%]   .ui-listbox-filter-icon[_ngcontent-%COMP%]{top:50%;left:auto;margin-top:-.5em;right:.5em;color:#a6a6a6}body[_ngcontent-%COMP%]   .ui-listbox[_ngcontent-%COMP%]   .ui-listbox-list[_ngcontent-%COMP%]{background-color:#fff}body[_ngcontent-%COMP%]   .ui-listbox[_ngcontent-%COMP%]   .ui-listbox-list[_ngcontent-%COMP%]   .ui-listbox-item[_ngcontent-%COMP%]{margin:0;padding:.429em .857em;border:0;color:#666;background-color:transparent;transition:background-color .2s,box-shadow .2s;border-radius:0}body[_ngcontent-%COMP%]   .ui-listbox[_ngcontent-%COMP%]   .ui-listbox-list[_ngcontent-%COMP%]   .ui-listbox-item.ui-state-highlight[_ngcontent-%COMP%]{color:#385048;background-color:#afd3c8}body[_ngcontent-%COMP%]   .ui-listbox[_ngcontent-%COMP%]   .ui-listbox-list[_ngcontent-%COMP%]   .ui-listbox-item[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:inset 0 0 0 .2em #e4e9ec}body[_ngcontent-%COMP%]   .ui-listbox[_ngcontent-%COMP%]   .ui-listbox-list[_ngcontent-%COMP%]   .ui-listbox-item[_ngcontent-%COMP%]   .ui-chkbox[_ngcontent-%COMP%]{position:static;display:inline-block;vertical-align:middle;margin:0 .5em 0 0}body[_ngcontent-%COMP%]   .ui-listbox[_ngcontent-%COMP%]   .ui-listbox-list[_ngcontent-%COMP%]   .ui-listbox-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}body[_ngcontent-%COMP%]   .ui-listbox[_ngcontent-%COMP%]:not(.ui-state-disabled)   .ui-listbox-item[_ngcontent-%COMP%]:not(.ui-state-highlight):not(.ui-state-disabled):hover{color:#666;background-color:#f4f4f4}body[_ngcontent-%COMP%]   .ui-listbox.ui-state-disabled[_ngcontent-%COMP%]   .ui-chkbox-box[_ngcontent-%COMP%]:not(.ui-state-disabled):not(.ui-state-active):hover{border:1px solid #dadada}body[_ngcontent-%COMP%]   .ui-listbox[_ngcontent-%COMP%]   .ui-listbox-footer[_ngcontent-%COMP%]{padding:.429em .857em;border-top:1px solid #eaeaea;color:#666;background-color:#fff}body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ui-editor-toolbar[_ngcontent-%COMP%]{border:1px solid #7b95a3;background-color:#7b95a3}body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ui-editor-content[_ngcontent-%COMP%]{border:1px solid #dadada}body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ui-editor-content[_ngcontent-%COMP%]   .ql-editor[_ngcontent-%COMP%]{background-color:#f4f4f4;color:#666}body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-picker.ql-expanded[_ngcontent-%COMP%]   .ql-picker-label[_ngcontent-%COMP%]{color:#fff}body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-stroke[_ngcontent-%COMP%]{stroke:#fff}body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-picker-label[_ngcontent-%COMP%]{color:#fff}body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow.ql-toolbar[_ngcontent-%COMP%]   .ql-picker-item.ql-selected[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow[_ngcontent-%COMP%]   .ql-toolbar[_ngcontent-%COMP%]   .ql-picker-item.ql-selected[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow.ql-toolbar[_ngcontent-%COMP%]   .ql-picker-item[_ngcontent-%COMP%]:hover, body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow[_ngcontent-%COMP%]   .ql-toolbar[_ngcontent-%COMP%]   .ql-picker-item[_ngcontent-%COMP%]:hover, body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow.ql-toolbar[_ngcontent-%COMP%]   .ql-picker-label.ql-active[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow[_ngcontent-%COMP%]   .ql-toolbar[_ngcontent-%COMP%]   .ql-picker-label.ql-active[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow.ql-toolbar[_ngcontent-%COMP%]   .ql-picker-label[_ngcontent-%COMP%]:hover, body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow[_ngcontent-%COMP%]   .ql-toolbar[_ngcontent-%COMP%]   .ql-picker-label[_ngcontent-%COMP%]:hover, body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow.ql-toolbar[_ngcontent-%COMP%]   button.ql-active[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow[_ngcontent-%COMP%]   .ql-toolbar[_ngcontent-%COMP%]   button.ql-active[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow.ql-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow[_ngcontent-%COMP%]   .ql-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#afd3c8}body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow.ql-toolbar[_ngcontent-%COMP%]   .ql-picker-item.ql-selected[_ngcontent-%COMP%]   .ql-stroke[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow[_ngcontent-%COMP%]   .ql-toolbar[_ngcontent-%COMP%]   .ql-picker-item.ql-selected[_ngcontent-%COMP%]   .ql-stroke[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow.ql-toolbar[_ngcontent-%COMP%]   .ql-picker-item.ql-selected[_ngcontent-%COMP%]   .ql-stroke-miter[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow[_ngcontent-%COMP%]   .ql-toolbar[_ngcontent-%COMP%]   .ql-picker-item.ql-selected[_ngcontent-%COMP%]   .ql-stroke-miter[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow.ql-toolbar[_ngcontent-%COMP%]   .ql-picker-item[_ngcontent-%COMP%]:hover   .ql-stroke[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow[_ngcontent-%COMP%]   .ql-toolbar[_ngcontent-%COMP%]   .ql-picker-item[_ngcontent-%COMP%]:hover   .ql-stroke[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow.ql-toolbar[_ngcontent-%COMP%]   .ql-picker-item[_ngcontent-%COMP%]:hover   .ql-stroke-miter[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow[_ngcontent-%COMP%]   .ql-toolbar[_ngcontent-%COMP%]   .ql-picker-item[_ngcontent-%COMP%]:hover   .ql-stroke-miter[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow.ql-toolbar[_ngcontent-%COMP%]   .ql-picker-label.ql-active[_ngcontent-%COMP%]   .ql-stroke[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow[_ngcontent-%COMP%]   .ql-toolbar[_ngcontent-%COMP%]   .ql-picker-label.ql-active[_ngcontent-%COMP%]   .ql-stroke[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow.ql-toolbar[_ngcontent-%COMP%]   .ql-picker-label.ql-active[_ngcontent-%COMP%]   .ql-stroke-miter[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow[_ngcontent-%COMP%]   .ql-toolbar[_ngcontent-%COMP%]   .ql-picker-label.ql-active[_ngcontent-%COMP%]   .ql-stroke-miter[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow.ql-toolbar[_ngcontent-%COMP%]   .ql-picker-label[_ngcontent-%COMP%]:hover   .ql-stroke[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow[_ngcontent-%COMP%]   .ql-toolbar[_ngcontent-%COMP%]   .ql-picker-label[_ngcontent-%COMP%]:hover   .ql-stroke[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow.ql-toolbar[_ngcontent-%COMP%]   .ql-picker-label[_ngcontent-%COMP%]:hover   .ql-stroke-miter[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow[_ngcontent-%COMP%]   .ql-toolbar[_ngcontent-%COMP%]   .ql-picker-label[_ngcontent-%COMP%]:hover   .ql-stroke-miter[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow.ql-toolbar[_ngcontent-%COMP%]   button.ql-active[_ngcontent-%COMP%]   .ql-stroke[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow[_ngcontent-%COMP%]   .ql-toolbar[_ngcontent-%COMP%]   button.ql-active[_ngcontent-%COMP%]   .ql-stroke[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow.ql-toolbar[_ngcontent-%COMP%]   button.ql-active[_ngcontent-%COMP%]   .ql-stroke-miter[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow[_ngcontent-%COMP%]   .ql-toolbar[_ngcontent-%COMP%]   button.ql-active[_ngcontent-%COMP%]   .ql-stroke-miter[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow.ql-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   .ql-stroke[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow[_ngcontent-%COMP%]   .ql-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   .ql-stroke[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow.ql-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   .ql-stroke-miter[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-editor-container[_ngcontent-%COMP%]   .ql-snow[_ngcontent-%COMP%]   .ql-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   .ql-stroke-miter[_ngcontent-%COMP%]{stroke:#afd3c8}body[_ngcontent-%COMP%]   .ui-rating[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-align:center;display:inline-block;color:#666;border-radius:2px;line-height:1;transition:color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-rating[_ngcontent-%COMP%]   a.ui-rating-cancel[_ngcontent-%COMP%]{color:#f3b9b9}body[_ngcontent-%COMP%]   .ui-rating[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .ui-rating-icon[_ngcontent-%COMP%]{font-size:1.429em}body[_ngcontent-%COMP%]   .ui-rating[_ngcontent-%COMP%]:not(.ui-state-disabled):not(.ui-rating-readonly)   a[_ngcontent-%COMP%]:hover{color:#7b95a3}body[_ngcontent-%COMP%]   .ui-rating[_ngcontent-%COMP%]:not(.ui-state-disabled):not(.ui-rating-readonly)   a.ui-rating-cancel[_ngcontent-%COMP%]:hover{color:#d66161}body[_ngcontent-%COMP%]   .ui-rating[_ngcontent-%COMP%]:not(.ui-state-disabled):not(.ui-rating-readonly)   a[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-spinner[_ngcontent-%COMP%]   .ui-spinner-input[_ngcontent-%COMP%]{padding-right:1.858em}body[_ngcontent-%COMP%]   .ui-spinner[_ngcontent-%COMP%]   .ui-spinner-button[_ngcontent-%COMP%]{width:1.429em}body[_ngcontent-%COMP%]   .ui-spinner[_ngcontent-%COMP%]   .ui-spinner-button.ui-spinner-up[_ngcontent-%COMP%]{border-top-right-radius:2px}body[_ngcontent-%COMP%]   .ui-spinner[_ngcontent-%COMP%]   .ui-spinner-button.ui-spinner-down[_ngcontent-%COMP%]{border-bottom-right-radius:2px}body[_ngcontent-%COMP%]   .ui-spinner[_ngcontent-%COMP%]   .ui-spinner-button[_ngcontent-%COMP%]   .ui-spinner-button-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;margin-top:-.5em;margin-left:-.5em;width:1em}body[_ngcontent-%COMP%]   .ui-fluid[_ngcontent-%COMP%]   .ui-spinner[_ngcontent-%COMP%]   .ui-spinner-input[_ngcontent-%COMP%]{padding-right:1.858em}body[_ngcontent-%COMP%]   .ui-fluid[_ngcontent-%COMP%]   .ui-spinner[_ngcontent-%COMP%]   .ui-spinner-button[_ngcontent-%COMP%]{width:1.429em}body[_ngcontent-%COMP%]   .ui-fluid[_ngcontent-%COMP%]   .ui-spinner[_ngcontent-%COMP%]   .ui-spinner-button[_ngcontent-%COMP%]   .ui-spinner-button-icon[_ngcontent-%COMP%]{left:50%}body[_ngcontent-%COMP%]   .ui-slider[_ngcontent-%COMP%]{background-color:#c4c4c4;border:0}body[_ngcontent-%COMP%]   .ui-slider.ui-slider-horizontal[_ngcontent-%COMP%]{height:.286em}body[_ngcontent-%COMP%]   .ui-slider.ui-slider-horizontal[_ngcontent-%COMP%]   .ui-slider-handle[_ngcontent-%COMP%]{top:50%;margin-top:-.7145em}body[_ngcontent-%COMP%]   .ui-slider.ui-slider-vertical[_ngcontent-%COMP%]{width:.286em}body[_ngcontent-%COMP%]   .ui-slider.ui-slider-vertical[_ngcontent-%COMP%]   .ui-slider-handle[_ngcontent-%COMP%]{left:50%;margin-left:-.7145em}body[_ngcontent-%COMP%]   .ui-slider[_ngcontent-%COMP%]   .ui-slider-handle[_ngcontent-%COMP%]{height:1.429em;width:1.429em;background-color:#fff;border:2px solid #7f7f7f;border-radius:50%;transition:box-shadow .2s}body[_ngcontent-%COMP%]   .ui-slider[_ngcontent-%COMP%]   .ui-slider-handle[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-slider[_ngcontent-%COMP%]   .ui-slider-range[_ngcontent-%COMP%]{background-color:#7b95a3}body[_ngcontent-%COMP%]   .ui-slider[_ngcontent-%COMP%]:not(.ui-state-disabled)   .ui-slider-handle[_ngcontent-%COMP%]:hover{background-color:2px solid #7f7f7f;border:2px solid #7b95a3}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]{padding:.857em;min-width:18.571em;background-color:#fff;color:#666;border:1px solid #eaeaea}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]:not(.ui-datepicker-inline){border:1px solid #eaeaea;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]:not(.ui-state-disabled)   .ui-datepicker-header[_ngcontent-%COMP%]   .ui-datepicker-next[_ngcontent-%COMP%]:hover, body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]:not(.ui-state-disabled)   .ui-datepicker-header[_ngcontent-%COMP%]   .ui-datepicker-prev[_ngcontent-%COMP%]:hover{color:#666}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]:not(.ui-state-disabled)   .ui-datepicker-header[_ngcontent-%COMP%]   .ui-datepicker-next[_ngcontent-%COMP%]:focus, body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]:not(.ui-state-disabled)   .ui-datepicker-header[_ngcontent-%COMP%]   .ui-datepicker-prev[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]:not(.ui-state-disabled)   .ui-monthpicker[_ngcontent-%COMP%]   a.ui-monthpicker-month[_ngcontent-%COMP%]:not(.ui-state-active):hover, body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]:not(.ui-state-disabled)   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:not(.ui-state-active):not(.ui-state-highlight):hover{background-color:#f4f4f4}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   .ui-datepicker-header[_ngcontent-%COMP%]{padding:.429em .857em;background-color:#fff;color:#666;border-radius:0}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   .ui-datepicker-header[_ngcontent-%COMP%]   .ui-datepicker-next[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   .ui-datepicker-header[_ngcontent-%COMP%]   .ui-datepicker-prev[_ngcontent-%COMP%]{cursor:pointer;top:0;color:#a6a6a6;transition:color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   .ui-datepicker-header[_ngcontent-%COMP%]   .ui-datepicker-title[_ngcontent-%COMP%]{margin:0;padding:0;line-height:1}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   .ui-datepicker-header[_ngcontent-%COMP%]   .ui-datepicker-title[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-top:-.35em;margin-bottom:0;transition:color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   .ui-datepicker-header[_ngcontent-%COMP%]   .ui-datepicker-title[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{font-size:14px;margin:.857em 0 0}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.5em}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.ui-datepicker-weekheader[_ngcontent-%COMP%]{border-right:1px solid #eaeaea}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5em}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;text-align:center;color:#666;padding:.5em;transition:box-shadow .2s;border-radius:2px}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] > a.ui-state-active[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] > span.ui-state-active[_ngcontent-%COMP%]{color:#fff;background-color:#7b95a3}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{cursor:pointer}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.ui-datepicker-today[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.ui-datepicker-today[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{background-color:#d0d0d0;color:#666}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.ui-datepicker-today[_ngcontent-%COMP%] > a.ui-state-active[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.ui-datepicker-today[_ngcontent-%COMP%] > span.ui-state-active[_ngcontent-%COMP%]{color:#fff;background-color:#7b95a3}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.ui-datepicker-weeknumber[_ngcontent-%COMP%]{border-right:1px solid #eaeaea}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   .ui-datepicker-buttonbar[_ngcontent-%COMP%]{border-top:1px solid #d8dae2}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   .ui-timepicker[_ngcontent-%COMP%]{border:0;border-top:1px solid #a6a6a6;padding:.857em}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   .ui-timepicker[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#666;font-size:1.286em}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   .ui-timepicker[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#666}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   .ui-timepicker[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.286em}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   .ui-monthpicker[_ngcontent-%COMP%]   .ui-monthpicker-month[_ngcontent-%COMP%]{color:#666}body[_ngcontent-%COMP%]   .ui-datepicker[_ngcontent-%COMP%]   .ui-monthpicker[_ngcontent-%COMP%]   .ui-monthpicker-month.ui-state-active[_ngcontent-%COMP%]{color:#fff;background-color:#7b95a3}body[_ngcontent-%COMP%]   .ui-datepicker.ui-datepicker-timeonly[_ngcontent-%COMP%]{padding:0}body[_ngcontent-%COMP%]   .ui-datepicker.ui-datepicker-timeonly[_ngcontent-%COMP%]   .ui-timepicker[_ngcontent-%COMP%]{border-top:0}body[_ngcontent-%COMP%]   .ui-datepicker.ui-datepicker-multiple-month[_ngcontent-%COMP%]   .ui-datepicker-group[_ngcontent-%COMP%]{border-right:1px solid #d8dae2;padding:0 .857em}body[_ngcontent-%COMP%]   .ui-datepicker.ui-datepicker-multiple-month[_ngcontent-%COMP%]   .ui-datepicker-group[_ngcontent-%COMP%]:first-child{padding-left:0}body[_ngcontent-%COMP%]   .ui-datepicker.ui-datepicker-multiple-month[_ngcontent-%COMP%]   .ui-datepicker-group[_ngcontent-%COMP%]:last-child{padding-right:0;border-right:0}body[_ngcontent-%COMP%]   .ui-calendar.ui-calendar-w-btn[_ngcontent-%COMP%]   .ui-inputtext[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0;border-right:0}body[_ngcontent-%COMP%]   .ui-calendar.ui-calendar-w-btn[_ngcontent-%COMP%]   .ui-inputtext[_ngcontent-%COMP%]:enabled:focus:not(.ui-state-error), body[_ngcontent-%COMP%]   .ui-calendar.ui-calendar-w-btn[_ngcontent-%COMP%]   .ui-inputtext[_ngcontent-%COMP%]:enabled:hover:not(.ui-state-error){border-right:0}body[_ngcontent-%COMP%]   .ui-calendar.ui-calendar-w-btn[_ngcontent-%COMP%]   .ui-datepicker-trigger.ui-button[_ngcontent-%COMP%]{width:2.357em;border-top-left-radius:0;border-bottom-left-radius:0}body[_ngcontent-%COMP%]   .ui-fluid[_ngcontent-%COMP%]   .ui-calendar.ui-calendar-w-btn[_ngcontent-%COMP%]   input.ui-inputtext[_ngcontent-%COMP%]{width:calc(100% - 2.357em)}body[_ngcontent-%COMP%]   .ui-fileupload[_ngcontent-%COMP%]   .ui-fileupload-buttonbar[_ngcontent-%COMP%]{background-color:#7b95a3;padding:.571em 1em;color:#fff;border:1px solid #7b95a3;border-bottom:0}body[_ngcontent-%COMP%]   .ui-fileupload[_ngcontent-%COMP%]   .ui-fileupload-buttonbar[_ngcontent-%COMP%]   .ui-button[_ngcontent-%COMP%]{margin-right:8px}body[_ngcontent-%COMP%]   .ui-fileupload[_ngcontent-%COMP%]   .ui-fileupload-content[_ngcontent-%COMP%]{background-color:#fff;padding:.571em 1em;border:1px solid #dadada;color:#666}body[_ngcontent-%COMP%]   .ui-fileupload[_ngcontent-%COMP%]   .ui-progressbar[_ngcontent-%COMP%]{top:0}body[_ngcontent-%COMP%]   .ui-fileupload-choose[_ngcontent-%COMP%]:not(.ui-state-disabled):hover{background-color:#6c8999;color:#fff;border-color:#6c8999}body[_ngcontent-%COMP%]   .ui-fileupload-choose[_ngcontent-%COMP%]:not(.ui-state-disabled):active{background-color:#617c8a;color:#fff;border-color:#617c8a}body[_ngcontent-%COMP%]   .ui-fileupload-choose.ui-state-focus[_ngcontent-%COMP%]{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-password-panel[_ngcontent-%COMP%]{padding:12px;background-color:#fff;color:#666;border:1px solid #eaeaea;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body[_ngcontent-%COMP%]   .ui-inputgroup[_ngcontent-%COMP%]   .ui-inputgroup-addon[_ngcontent-%COMP%]{border-color:#dadada;background-color:#dbdbdb;color:#666;padding:.429em;min-width:2em}body[_ngcontent-%COMP%]   .ui-inputgroup[_ngcontent-%COMP%]   .ui-inputgroup-addon[_ngcontent-%COMP%]:first-child{border-top-left-radius:2px;border-bottom-left-radius:2px}body[_ngcontent-%COMP%]   .ui-inputgroup[_ngcontent-%COMP%]   .ui-inputgroup-addon[_ngcontent-%COMP%]:last-child{border-top-right-radius:2px;border-bottom-right-radius:2px}body[_ngcontent-%COMP%]   .ui-inputgroup[_ngcontent-%COMP%]   .ui-inputgroup-addon.ui-inputgroup-addon-checkbox[_ngcontent-%COMP%]{position:relative}body[_ngcontent-%COMP%]   .ui-inputgroup[_ngcontent-%COMP%]   .ui-inputgroup-addon.ui-inputgroup-addon-checkbox[_ngcontent-%COMP%]   .ui-chkbox[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;margin-left:-10px;margin-top:-10px}body[_ngcontent-%COMP%]   .ui-inputgroup[_ngcontent-%COMP%]   .ui-inputgroup-addon.ui-inputgroup-addon-radiobutton[_ngcontent-%COMP%]{position:relative}body[_ngcontent-%COMP%]   .ui-inputgroup[_ngcontent-%COMP%]   .ui-inputgroup-addon.ui-inputgroup-addon-radiobutton[_ngcontent-%COMP%]   .ui-radiobutton[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;margin-left:-10px;margin-top:-10px}body[_ngcontent-%COMP%]   .ui-inputgroup[_ngcontent-%COMP%]   .ui-button[_ngcontent-%COMP%]:first-child{border-top-left-radius:2px;border-bottom-left-radius:2px}body[_ngcontent-%COMP%]   .ui-inputgroup[_ngcontent-%COMP%]   .ui-button[_ngcontent-%COMP%]:last-child{border-top-right-radius:2px;border-bottom-right-radius:2px}body[_ngcontent-%COMP%]   .ui-fluid[_ngcontent-%COMP%]   .ui-inputgroup[_ngcontent-%COMP%]   .ui-button[_ngcontent-%COMP%]{width:auto}body[_ngcontent-%COMP%]   .ui-fluid[_ngcontent-%COMP%]   .ui-inputgroup[_ngcontent-%COMP%]   .ui-button.ui-button-icon-only[_ngcontent-%COMP%]{width:2.357em}body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-input-placeholder{color:#a6a6a6}body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:-moz-placeholder, body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-moz-placeholder{color:#a6a6a6}body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:-ms-input-placeholder{color:#a6a6a6}body[_ngcontent-%COMP%]   .ui-inputtext.ng-dirty.ng-invalid[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   p-autocomplete.ng-dirty.ng-invalid[_ngcontent-%COMP%] > .ui-autocomplete[_ngcontent-%COMP%] > .ui-inputtext[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   p-calendar.ng-dirty.ng-invalid[_ngcontent-%COMP%] > .ui-calendar[_ngcontent-%COMP%] > .ui-inputtext[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   p-checkbox.ng-dirty.ng-invalid[_ngcontent-%COMP%]   .ui-chkbox-box[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   p-chips.ng-dirty.ng-invalid[_ngcontent-%COMP%] > .ui-inputtext[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   p-dropdown.ng-dirty.ng-invalid[_ngcontent-%COMP%] > .ui-dropdown[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   p-inputmask.ng-dirty.ng-invalid[_ngcontent-%COMP%] > .ui-inputtext[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   p-inputswitch.ng-dirty.ng-invalid[_ngcontent-%COMP%]   .ui-inputswitch[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   p-listbox.ng-dirty.ng-invalid[_ngcontent-%COMP%]   .ui-inputtext[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   p-multiselect.ng-dirty.ng-invalid[_ngcontent-%COMP%] > .ui-multiselect[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   p-radiobutton.ng-dirty.ng-invalid[_ngcontent-%COMP%]   .ui-radiobutton-box[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   p-selectbutton.ng-dirty.ng-invalid[_ngcontent-%COMP%]   .ui-button[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   p-spinner.ng-dirty.ng-invalid[_ngcontent-%COMP%] > .ui-inputtext[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   p-togglebutton.ng-dirty.ng-invalid[_ngcontent-%COMP%]   .ui-button[_ngcontent-%COMP%]{border:1px solid #e7a3a3}body[_ngcontent-%COMP%]   .ui-button[_ngcontent-%COMP%]{margin:0;color:#fff;background-color:#7b95a3;border:1px solid #617c8a;font-size:14px;transition:background-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-button[_ngcontent-%COMP%]:enabled:hover{background-color:#6c8999;color:#fff;border-color:#6c8999}body[_ngcontent-%COMP%]   .ui-button[_ngcontent-%COMP%]:enabled:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-button[_ngcontent-%COMP%]:enabled:active{background-color:#617c8a;color:#fff;border-color:#617c8a}body[_ngcontent-%COMP%]   .ui-button.ui-button-text-only[_ngcontent-%COMP%]   .ui-button-text[_ngcontent-%COMP%]{padding:.429em 1em}body[_ngcontent-%COMP%]   .ui-button.ui-button-text-icon-left[_ngcontent-%COMP%]   .ui-button-text[_ngcontent-%COMP%]{padding:.429em 1em .429em 2em}body[_ngcontent-%COMP%]   .ui-button.ui-button-text-icon-right[_ngcontent-%COMP%]   .ui-button-text[_ngcontent-%COMP%]{padding:.429em 2em .429em 1em}body[_ngcontent-%COMP%]   .ui-button.ui-button-icon-only[_ngcontent-%COMP%]{width:2.357em}body[_ngcontent-%COMP%]   .ui-button.ui-button-icon-only[_ngcontent-%COMP%]   .ui-button-text[_ngcontent-%COMP%]{padding:.429em}body[_ngcontent-%COMP%]   .ui-button.ui-button-raised[_ngcontent-%COMP%]{box-shadow:0 2px 4px 0 rgba(0,0,0,.1)}body[_ngcontent-%COMP%]   .ui-button.ui-button-rounded[_ngcontent-%COMP%]{border-radius:15px}body[_ngcontent-%COMP%]   .ui-fluid[_ngcontent-%COMP%]   .ui-button-icon-only[_ngcontent-%COMP%]{width:2.357em}body[_ngcontent-%COMP%]   .ui-togglebutton[_ngcontent-%COMP%]{background-color:#eaeaea;border:1px solid #eaeaea;color:#333;transition:background-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-togglebutton[_ngcontent-%COMP%]   .ui-button-icon-left[_ngcontent-%COMP%]{color:#666}body[_ngcontent-%COMP%]   .ui-togglebutton[_ngcontent-%COMP%]:not(.ui-state-disabled):not(.ui-state-active):hover{background-color:#c8c8c8;border-color:#c8c8c8;color:#333}body[_ngcontent-%COMP%]   .ui-togglebutton[_ngcontent-%COMP%]:not(.ui-state-disabled):not(.ui-state-active):hover   .ui-button-icon-left[_ngcontent-%COMP%]{color:#666}body[_ngcontent-%COMP%]   .ui-togglebutton[_ngcontent-%COMP%]:not(.ui-state-disabled):not(.ui-state-active).ui-state-focus{box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-togglebutton.ui-state-active[_ngcontent-%COMP%]{background-color:#afd3c8;border-color:#afd3c8;color:#385048}body[_ngcontent-%COMP%]   .ui-togglebutton.ui-state-active[_ngcontent-%COMP%]   .ui-button-icon-left[_ngcontent-%COMP%]{color:#385048}body[_ngcontent-%COMP%]   .ui-togglebutton.ui-state-active[_ngcontent-%COMP%]:hover{background-color:#8dc8b5;border-color:#8dc8b5;color:#385048}body[_ngcontent-%COMP%]   .ui-togglebutton.ui-state-active[_ngcontent-%COMP%]:hover   .ui-button-icon-left[_ngcontent-%COMP%]{color:#385048}body[_ngcontent-%COMP%]   .ui-selectbutton[_ngcontent-%COMP%]   .ui-button[_ngcontent-%COMP%]{background-color:#eaeaea;border:1px solid #eaeaea;color:#333;overflow:hidden;transition:background-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-selectbutton[_ngcontent-%COMP%]   .ui-button[_ngcontent-%COMP%]   .ui-button-icon-left[_ngcontent-%COMP%]{color:#666}body[_ngcontent-%COMP%]   .ui-selectbutton[_ngcontent-%COMP%]   .ui-button[_ngcontent-%COMP%]:not(.ui-state-disabled):not(.ui-state-active):hover{background-color:#c8c8c8;border-color:#c8c8c8;color:#333}body[_ngcontent-%COMP%]   .ui-selectbutton[_ngcontent-%COMP%]   .ui-button[_ngcontent-%COMP%]:not(.ui-state-disabled):not(.ui-state-active):hover   .ui-button-icon-left[_ngcontent-%COMP%]{color:#666}body[_ngcontent-%COMP%]   .ui-selectbutton[_ngcontent-%COMP%]   .ui-button[_ngcontent-%COMP%]:not(.ui-state-disabled):not(.ui-state-active).ui-state-focus{box-shadow:0 0 0 .2em #c6d1d7;z-index:1}body[_ngcontent-%COMP%]   .ui-selectbutton[_ngcontent-%COMP%]   .ui-button.ui-state-active[_ngcontent-%COMP%]{background-color:#afd3c8;border-color:#afd3c8;color:#385048}body[_ngcontent-%COMP%]   .ui-selectbutton[_ngcontent-%COMP%]   .ui-button.ui-state-active[_ngcontent-%COMP%]   .ui-button-icon-left[_ngcontent-%COMP%]{color:#385048}body[_ngcontent-%COMP%]   .ui-selectbutton[_ngcontent-%COMP%]   .ui-button.ui-state-active[_ngcontent-%COMP%]:not(.ui-state-disabled):hover{background-color:#8dc8b5;border-color:#8dc8b5;color:#385048}body[_ngcontent-%COMP%]   .ui-selectbutton[_ngcontent-%COMP%]   .ui-button.ui-state-active[_ngcontent-%COMP%]:not(.ui-state-disabled):hover   .ui-button-icon-left[_ngcontent-%COMP%]{color:#385048}body[_ngcontent-%COMP%]   .ui-selectbutton[_ngcontent-%COMP%]   .ui-button[_ngcontent-%COMP%]:first-child{border-top-left-radius:2px;border-bottom-left-radius:2px}body[_ngcontent-%COMP%]   .ui-selectbutton[_ngcontent-%COMP%]   .ui-button[_ngcontent-%COMP%]:last-child{border-top-right-radius:2px;border-bottom-right-radius:2px}@media (max-width:640px){body[_ngcontent-%COMP%]   .ui-buttonset[_ngcontent-%COMP%]:not(.ui-splitbutton)   .ui-button[_ngcontent-%COMP%]{margin-bottom:1px;border-radius:2px}}body[_ngcontent-%COMP%]   .ui-splitbutton.ui-buttonset[_ngcontent-%COMP%]   .ui-button[_ngcontent-%COMP%]{border:1px solid transparent}body[_ngcontent-%COMP%]   .ui-splitbutton.ui-buttonset[_ngcontent-%COMP%]   .ui-menu[_ngcontent-%COMP%]{min-width:100%}body[_ngcontent-%COMP%]   .ui-button.ui-state-default.ui-button-secondary[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-buttonset.ui-button-secondary[_ngcontent-%COMP%] > .ui-button.ui-state-default[_ngcontent-%COMP%]{color:#333;background-color:#f3f3f3;border:1px solid #f3f3f3}body[_ngcontent-%COMP%]   .ui-button.ui-state-default.ui-button-secondary[_ngcontent-%COMP%]:enabled:hover, body[_ngcontent-%COMP%]   .ui-buttonset.ui-button-secondary[_ngcontent-%COMP%] > .ui-button.ui-state-default[_ngcontent-%COMP%]:enabled:hover{background-color:#d1d1d1;color:#212121;border-color:#d1d1d1}body[_ngcontent-%COMP%]   .ui-button.ui-state-default.ui-button-secondary[_ngcontent-%COMP%]:enabled:focus, body[_ngcontent-%COMP%]   .ui-buttonset.ui-button-secondary[_ngcontent-%COMP%] > .ui-button.ui-state-default[_ngcontent-%COMP%]:enabled:focus{box-shadow:0 0 0 .2em #99adb8}body[_ngcontent-%COMP%]   .ui-button.ui-state-default.ui-button-secondary[_ngcontent-%COMP%]:enabled:active, body[_ngcontent-%COMP%]   .ui-buttonset.ui-button-secondary[_ngcontent-%COMP%] > .ui-button.ui-state-default[_ngcontent-%COMP%]:enabled:active{background-color:#7b95a3;color:#fff;border-color:#7b95a3}body[_ngcontent-%COMP%]   .ui-button.ui-state-default.ui-button-info[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-buttonset.ui-button-info[_ngcontent-%COMP%] > .ui-button.ui-state-default[_ngcontent-%COMP%]{color:#3d4447;background-color:#a3def8;border:1px solid #79c8eb}body[_ngcontent-%COMP%]   .ui-button.ui-state-default.ui-button-info[_ngcontent-%COMP%]:enabled:hover, body[_ngcontent-%COMP%]   .ui-buttonset.ui-button-info[_ngcontent-%COMP%] > .ui-button.ui-state-default[_ngcontent-%COMP%]:enabled:hover{background-color:#81cbec;color:#3d4447;border-color:#60b7de}body[_ngcontent-%COMP%]   .ui-button.ui-state-default.ui-button-info[_ngcontent-%COMP%]:enabled:focus, body[_ngcontent-%COMP%]   .ui-buttonset.ui-button-info[_ngcontent-%COMP%] > .ui-button.ui-state-default[_ngcontent-%COMP%]:enabled:focus{box-shadow:0 0 0 .2em #d2effc}body[_ngcontent-%COMP%]   .ui-button.ui-state-default.ui-button-info[_ngcontent-%COMP%]:enabled:active, body[_ngcontent-%COMP%]   .ui-buttonset.ui-button-info[_ngcontent-%COMP%] > .ui-button.ui-state-default[_ngcontent-%COMP%]:enabled:active{background-color:#3ea9db;color:#3d4447;border-color:#2987b1}body[_ngcontent-%COMP%]   .ui-button.ui-state-default.ui-button-success[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-buttonset.ui-button-success[_ngcontent-%COMP%] > .ui-button.ui-state-default[_ngcontent-%COMP%]{color:#323e39;background-color:#a3e2c6;border:1px solid #80caaa}body[_ngcontent-%COMP%]   .ui-button.ui-state-default.ui-button-success[_ngcontent-%COMP%]:enabled:hover, body[_ngcontent-%COMP%]   .ui-buttonset.ui-button-success[_ngcontent-%COMP%] > .ui-button.ui-state-default[_ngcontent-%COMP%]:enabled:hover{background-color:#80caaa;color:#323e39;border-color:#5ea285}body[_ngcontent-%COMP%]   .ui-button.ui-state-default.ui-button-success[_ngcontent-%COMP%]:enabled:focus, body[_ngcontent-%COMP%]   .ui-buttonset.ui-button-success[_ngcontent-%COMP%] > .ui-button.ui-state-default[_ngcontent-%COMP%]:enabled:focus{box-shadow:0 0 0 .2em #caeede}body[_ngcontent-%COMP%]   .ui-button.ui-state-default.ui-button-success[_ngcontent-%COMP%]:enabled:active, body[_ngcontent-%COMP%]   .ui-buttonset.ui-button-success[_ngcontent-%COMP%] > .ui-button.ui-state-default[_ngcontent-%COMP%]:enabled:active{background-color:#31b57c;color:#323e39;border-color:#5ea285}body[_ngcontent-%COMP%]   .ui-button.ui-state-default.ui-button-warning[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-buttonset.ui-button-warning[_ngcontent-%COMP%] > .ui-button.ui-state-default[_ngcontent-%COMP%]{color:#333;background-color:#feedbc;border:1px solid #f7db8a}body[_ngcontent-%COMP%]   .ui-button.ui-state-default.ui-button-warning[_ngcontent-%COMP%]:enabled:hover, body[_ngcontent-%COMP%]   .ui-buttonset.ui-button-warning[_ngcontent-%COMP%] > .ui-button.ui-state-default[_ngcontent-%COMP%]:enabled:hover{background-color:#ffde87;color:#333;border-color:#f3ce61}body[_ngcontent-%COMP%]   .ui-button.ui-state-default.ui-button-warning[_ngcontent-%COMP%]:enabled:focus, body[_ngcontent-%COMP%]   .ui-buttonset.ui-button-warning[_ngcontent-%COMP%] > .ui-button.ui-state-default[_ngcontent-%COMP%]:enabled:focus{box-shadow:0 0 0 .2em #fef4d5}body[_ngcontent-%COMP%]   .ui-button.ui-state-default.ui-button-warning[_ngcontent-%COMP%]:enabled:active, body[_ngcontent-%COMP%]   .ui-buttonset.ui-button-warning[_ngcontent-%COMP%] > .ui-button.ui-state-default[_ngcontent-%COMP%]:enabled:active{background-color:#fdc328;color:#333;border-color:#dea818}body[_ngcontent-%COMP%]   .ui-button.ui-state-default.ui-button-danger[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-buttonset.ui-button-danger[_ngcontent-%COMP%] > .ui-button.ui-state-default[_ngcontent-%COMP%]{color:#262222;background-color:#f4b6b6;border:1px solid #e38787}body[_ngcontent-%COMP%]   .ui-button.ui-state-default.ui-button-danger[_ngcontent-%COMP%]:enabled:hover, body[_ngcontent-%COMP%]   .ui-buttonset.ui-button-danger[_ngcontent-%COMP%] > .ui-button.ui-state-default[_ngcontent-%COMP%]:enabled:hover{background-color:#ef9999;color:#262222;border-color:#cb5858}body[_ngcontent-%COMP%]   .ui-button.ui-state-default.ui-button-danger[_ngcontent-%COMP%]:enabled:focus, body[_ngcontent-%COMP%]   .ui-buttonset.ui-button-danger[_ngcontent-%COMP%] > .ui-button.ui-state-default[_ngcontent-%COMP%]:enabled:focus{box-shadow:0 0 0 .2em #fbe2e2}body[_ngcontent-%COMP%]   .ui-button.ui-state-default.ui-button-danger[_ngcontent-%COMP%]:enabled:active, body[_ngcontent-%COMP%]   .ui-buttonset.ui-button-danger[_ngcontent-%COMP%] > .ui-button.ui-state-default[_ngcontent-%COMP%]:enabled:active{background-color:#eb5656;color:#262222;border-color:#b73737}body[_ngcontent-%COMP%]   .ui-widget-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.5;margin:0}body[_ngcontent-%COMP%]   .ui-panel[_ngcontent-%COMP%]{padding:0;border:0}body[_ngcontent-%COMP%]   .ui-panel[_ngcontent-%COMP%]   .ui-panel-titlebar[_ngcontent-%COMP%]{border:1px solid #7b95a3;padding:.571em 1em;background-color:#7b95a3;color:#fff;border-top-left-radius:2px;border-top-right-radius:2px;border-bottom-left-radius:0;border-bottom-right-radius:0}body[_ngcontent-%COMP%]   .ui-panel[_ngcontent-%COMP%]   .ui-panel-titlebar[_ngcontent-%COMP%]   .ui-panel-title[_ngcontent-%COMP%]{vertical-align:middle;font-weight:700}body[_ngcontent-%COMP%]   .ui-panel[_ngcontent-%COMP%]   .ui-panel-titlebar[_ngcontent-%COMP%]   .ui-panel-titlebar-icon[_ngcontent-%COMP%]{margin:0;position:relative;font-size:14px;color:#fff;border:1px solid transparent;line-height:1;transition:color .2s,background-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-panel[_ngcontent-%COMP%]   .ui-panel-titlebar[_ngcontent-%COMP%]   .ui-panel-titlebar-icon[_ngcontent-%COMP%]:hover{color:#fff}body[_ngcontent-%COMP%]   .ui-panel[_ngcontent-%COMP%]   .ui-panel-titlebar[_ngcontent-%COMP%]   .ui-panel-titlebar-icon[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-panel[_ngcontent-%COMP%]   .ui-panel-content[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-panel[_ngcontent-%COMP%]   .ui-panel-footer[_ngcontent-%COMP%]{background-color:#fff;color:#666;padding:.571em 1em;border:1px solid #dadada;border-top:0}body[_ngcontent-%COMP%]   .ui-panel[_ngcontent-%COMP%]   .ui-panel-footer[_ngcontent-%COMP%]{margin:0}body[_ngcontent-%COMP%]   .ui-fieldset[_ngcontent-%COMP%]{border:1px solid #dadada;background-color:#fff;color:#666}body[_ngcontent-%COMP%]   .ui-fieldset[_ngcontent-%COMP%]   .ui-fieldset-legend[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:.571em 1em;border:1px solid #7b95a3;color:#fff;background-color:#7b95a3;border-radius:2px;transition:background-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-fieldset[_ngcontent-%COMP%]   .ui-fieldset-legend[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .ui-fieldset-toggler[_ngcontent-%COMP%]{float:none;display:inline-block;vertical-align:middle;margin-right:.5em;color:#fff}body[_ngcontent-%COMP%]   .ui-fieldset[_ngcontent-%COMP%]   .ui-fieldset-legend[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .ui-fieldset-legend-text[_ngcontent-%COMP%]{padding:0}body[_ngcontent-%COMP%]   .ui-fieldset[_ngcontent-%COMP%]   .ui-fieldset-legend[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-fieldset.ui-fieldset-toggleable[_ngcontent-%COMP%]   .ui-fieldset-legend[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#617c8a;border:1px solid #617c8a;color:#fff}body[_ngcontent-%COMP%]   .ui-fieldset.ui-fieldset-toggleable[_ngcontent-%COMP%]   .ui-fieldset-legend[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .ui-fieldset-toggler[_ngcontent-%COMP%]{color:#fff}body[_ngcontent-%COMP%]   .ui-fieldset[_ngcontent-%COMP%]   .ui-fieldset-content[_ngcontent-%COMP%]{padding:0}body[_ngcontent-%COMP%]   .ui-accordion[_ngcontent-%COMP%]   .ui-accordion-header[_ngcontent-%COMP%]{margin-bottom:2px}body[_ngcontent-%COMP%]   .ui-accordion[_ngcontent-%COMP%]   .ui-accordion-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:.571em 1em;border:1px solid #7b95a3;background-color:#7b95a3;color:#fff;font-weight:700;border-radius:2px;transition:background-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-accordion[_ngcontent-%COMP%]   .ui-accordion-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .ui-accordion-toggle-icon[_ngcontent-%COMP%]{color:#fff}body[_ngcontent-%COMP%]   .ui-accordion[_ngcontent-%COMP%]   .ui-accordion-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-accordion[_ngcontent-%COMP%]   .ui-accordion-header[_ngcontent-%COMP%]:not(.ui-state-active):not(.ui-state-disabled):hover   a[_ngcontent-%COMP%]{background-color:#617c8a;border:1px solid #617c8a;color:#fff}body[_ngcontent-%COMP%]   .ui-accordion[_ngcontent-%COMP%]   .ui-accordion-header[_ngcontent-%COMP%]:not(.ui-state-active):not(.ui-state-disabled):hover   a[_ngcontent-%COMP%]   .ui-accordion-toggle-icon[_ngcontent-%COMP%]{color:#fff}body[_ngcontent-%COMP%]   .ui-accordion[_ngcontent-%COMP%]   .ui-accordion-header[_ngcontent-%COMP%]:not(.ui-state-disabled).ui-state-active   a[_ngcontent-%COMP%]{background-color:#afd3c8;border:1px solid #dadada;color:#385048}body[_ngcontent-%COMP%]   .ui-accordion[_ngcontent-%COMP%]   .ui-accordion-header[_ngcontent-%COMP%]:not(.ui-state-disabled).ui-state-active   a[_ngcontent-%COMP%]   .ui-accordion-toggle-icon[_ngcontent-%COMP%]{color:#385048}body[_ngcontent-%COMP%]   .ui-accordion[_ngcontent-%COMP%]   .ui-accordion-header[_ngcontent-%COMP%]:not(.ui-state-disabled).ui-state-active:hover   a[_ngcontent-%COMP%]{border:1px solid #8dc8b5;background-color:#8dc8b5;color:#385048}body[_ngcontent-%COMP%]   .ui-accordion[_ngcontent-%COMP%]   .ui-accordion-header[_ngcontent-%COMP%]:not(.ui-state-disabled).ui-state-active:hover   a[_ngcontent-%COMP%]   .ui-accordion-toggle-icon[_ngcontent-%COMP%]{color:#385048}body[_ngcontent-%COMP%]   .ui-accordion[_ngcontent-%COMP%]   .ui-accordion-content[_ngcontent-%COMP%]{border:1px solid #dadada;background-color:#fff;color:#666;padding:.571em 1em}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]{border:0}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]{padding:0;background:#fff;border:0}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border:1px solid #7b95a3;background-color:#7b95a3;transition:background-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{float:none;display:inline-block;color:#fff;padding:.571em 1em;font-weight:700}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .ui-tabview-left-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .ui-tabview-left-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .ui-tabview-left-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .ui-tabview-left-icon[_ngcontent-%COMP%]{margin-right:.5em}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .ui-tabview-right-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .ui-tabview-right-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .ui-tabview-right-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .ui-tabview-right-icon[_ngcontent-%COMP%]{margin-left:.5em}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .ui-tabview-close[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .ui-tabview-close[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .ui-tabview-close[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .ui-tabview-close[_ngcontent-%COMP%]{color:#fff;margin:0 .5em 0 0;vertical-align:middle}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .ui-tabview-close[_ngcontent-%COMP%]:focus, body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .ui-tabview-close[_ngcontent-%COMP%]:focus, body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .ui-tabview-close[_ngcontent-%COMP%]:focus, body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .ui-tabview-close[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.ui-state-active):not(.ui-state-disabled):hover, body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.ui-state-active):not(.ui-state-disabled):hover, body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.ui-state-active):not(.ui-state-disabled):hover, body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.ui-state-active):not(.ui-state-disabled):hover{background-color:#617c8a;border:1px solid #617c8a}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.ui-state-active):not(.ui-state-disabled):hover   .ui-tabview-close[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.ui-state-active):not(.ui-state-disabled):hover   a[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.ui-state-active):not(.ui-state-disabled):hover   .ui-tabview-close[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.ui-state-active):not(.ui-state-disabled):hover   a[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.ui-state-active):not(.ui-state-disabled):hover   .ui-tabview-close[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.ui-state-active):not(.ui-state-disabled):hover   a[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.ui-state-active):not(.ui-state-disabled):hover   .ui-tabview-close[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.ui-state-active):not(.ui-state-disabled):hover   a[_ngcontent-%COMP%]{color:#fff}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]{background-color:#afd3c8;border:1px solid #dadada}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]   .ui-tabview-close[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]   .ui-tabview-close[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]   .ui-tabview-close[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]   .ui-tabview-close[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#385048}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]:hover, body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]:hover, body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]:hover, body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]:hover{border:1px solid #8dc8b5;background-color:#8dc8b5}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]   .ui-tabview-left-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]   .ui-tabview-right-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]   .ui-tabview-left-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]   .ui-tabview-right-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]   .ui-tabview-left-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]   .ui-tabview-right-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]   .ui-tabview-left-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-state-active[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]   .ui-tabview-right-icon[_ngcontent-%COMP%]{color:#385048}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-tabview-selected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-tabview-selected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-tabview-selected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li.ui-tabview-selected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus, body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus, body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus, body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]{margin-bottom:-1px}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-top[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:.214em}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]{margin-top:-1px}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-bottom[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:.214em}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]{margin-right:-px}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-left[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.214em}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]{margin-right:-1px}body[_ngcontent-%COMP%]   .ui-tabview.ui-tabview-right[_ngcontent-%COMP%]   .ui-tabview-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.214em}body[_ngcontent-%COMP%]   .ui-tabview[_ngcontent-%COMP%]   .ui-tabview-panels[_ngcontent-%COMP%]{background-color:#fff;padding:.571em 1em;border:1px solid #dadada;color:#666}body[_ngcontent-%COMP%]   .ui-tabview[_ngcontent-%COMP%]   .ui-tabview-panels[_ngcontent-%COMP%]   .ui-tabview-panel[_ngcontent-%COMP%]{padding:0}body[_ngcontent-%COMP%]   .ui-toolbar[_ngcontent-%COMP%]{background-color:#7b95a3;border:1px solid #7b95a3;padding:.571em 1em}body[_ngcontent-%COMP%]   .ui-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{vertical-align:middle}body[_ngcontent-%COMP%]   .ui-toolbar[_ngcontent-%COMP%]   .ui-toolbar-separator[_ngcontent-%COMP%]{vertical-align:middle;color:#fff;margin:0 .5em}body[_ngcontent-%COMP%]   .ui-card[_ngcontent-%COMP%]{background-color:#fff;color:#666;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #dadada;padding:0}body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-first[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-last[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-next[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-prev[_ngcontent-%COMP%]{color:#666;height:2.286em;min-width:2.286em;border:0;line-height:2.286em;padding:0;margin:0;vertical-align:top;transition:box-shadow .2s;border-radius:0}body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-first[_ngcontent-%COMP%]:not(.ui-state-disabled):not(.ui-state-active):hover, body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-last[_ngcontent-%COMP%]:not(.ui-state-disabled):not(.ui-state-active):hover, body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-next[_ngcontent-%COMP%]:not(.ui-state-disabled):not(.ui-state-active):hover, body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-prev[_ngcontent-%COMP%]:not(.ui-state-disabled):not(.ui-state-active):hover{background-color:#f4f4f4;color:#666}body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-first[_ngcontent-%COMP%]:focus, body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-last[_ngcontent-%COMP%]:focus, body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-next[_ngcontent-%COMP%]:focus, body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-prev[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-current[_ngcontent-%COMP%]{color:#666;height:2.286em;min-width:2.286em;line-height:2.286em}body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-dropdown[_ngcontent-%COMP%]{border:0}body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-dropdown[_ngcontent-%COMP%]   .ui-dropdown-label[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-dropdown[_ngcontent-%COMP%]   .ui-dropdown-trigger[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-dropdown[_ngcontent-%COMP%]:hover   .ui-dropdown-label[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-dropdown[_ngcontent-%COMP%]:hover   .ui-dropdown-trigger[_ngcontent-%COMP%]{color:#666}body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-first[_ngcontent-%COMP%]:before{position:relative;top:1px}body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-prev[_ngcontent-%COMP%]:before{position:relative}body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-last[_ngcontent-%COMP%]:before, body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-next[_ngcontent-%COMP%]:before{position:relative;top:1px}body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-pages[_ngcontent-%COMP%]{vertical-align:top;display:inline-block;padding:0}body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-pages[_ngcontent-%COMP%]   .ui-paginator-page[_ngcontent-%COMP%]{color:#666;height:2.286em;min-width:2.286em;border:0;line-height:2.286em;padding:0;margin:0;vertical-align:top;transition:box-shadow .2s;border-radius:0}body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-pages[_ngcontent-%COMP%]   .ui-paginator-page.ui-state-active[_ngcontent-%COMP%]{background-color:#afd3c8;color:#385048}body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-pages[_ngcontent-%COMP%]   .ui-paginator-page[_ngcontent-%COMP%]:not(.ui-state-active):hover{background-color:#f4f4f4;color:#666}body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-paginator-pages[_ngcontent-%COMP%]   .ui-paginator-page[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-paginator[_ngcontent-%COMP%]   .ui-dropdown[_ngcontent-%COMP%]{margin-left:.5em;height:2.286em;min-width:auto}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-table-caption[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-table-summary[_ngcontent-%COMP%]{background-color:#7b95a3;color:#fff;border:1px solid #7b95a3;padding:.571em 1em;text-align:center}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-table-caption[_ngcontent-%COMP%]{border-bottom:0;font-weight:700}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-table-summary[_ngcontent-%COMP%]{border-top:0;font-weight:700}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-table-thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{padding:.571em .857em;border:1px solid #dadada;font-weight:700;color:#666;background-color:#fff}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-table-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:.571em .857em}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-table-tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:.571em .857em;border:1px solid #dadada;font-weight:700;color:#666;background-color:#fff}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-sortable-column[_ngcontent-%COMP%]{transition:box-shadow .2s}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-sortable-column[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:inset 0 0 0 .2em #e4e9ec}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-sortable-column[_ngcontent-%COMP%]   .ui-sortable-column-icon[_ngcontent-%COMP%]{color:#666}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-sortable-column[_ngcontent-%COMP%]:not(.ui-state-highlight):hover{background-color:#eaeaea;color:#666}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-sortable-column[_ngcontent-%COMP%]:not(.ui-state-highlight):hover   .ui-sortable-column-icon[_ngcontent-%COMP%]{color:#666}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-sortable-column.ui-state-highlight[_ngcontent-%COMP%]{background-color:#afd3c8;color:#385048}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-sortable-column.ui-state-highlight[_ngcontent-%COMP%]   .ui-sortable-column-icon[_ngcontent-%COMP%]{color:#385048}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-editable-column[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:14px;font-family:Open Sans,Helvetica Neue,sans-serif}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-editable-column[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:1px solid #dadada;outline-offset:2px}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-table-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{background-color:#fff;color:#666}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-table-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{background-color:inherit;border:1px solid #dadada}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-table-tbody[_ngcontent-%COMP%] > tr.ui-state-highlight[_ngcontent-%COMP%]{background-color:#afd3c8;color:#385048}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-table-tbody[_ngcontent-%COMP%] > tr.ui-state-highlight[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#385048}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-table-tbody[_ngcontent-%COMP%] > tr.ui-contextmenu-selected[_ngcontent-%COMP%]{background-color:#afd3c8;color:#385048}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-table-tbody[_ngcontent-%COMP%] > tr.ui-table-dragpoint-top[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{box-shadow:inset 0 2px 0 0 #afd3c8}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-table-tbody[_ngcontent-%COMP%] > tr.ui-table-dragpoint-bottom[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{box-shadow:inset 0 -2px 0 0 #afd3c8}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-table-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f8f8f8}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-table-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(2n).ui-state-highlight{background-color:#afd3c8;color:#385048}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-table-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(2n).ui-state-highlight   a[_ngcontent-%COMP%]{color:#385048}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-table-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(2n).ui-contextmenu-selected{background-color:#afd3c8;color:#385048}body[_ngcontent-%COMP%]   .ui-table.ui-table-hoverable-rows[_ngcontent-%COMP%]   .ui-table-tbody[_ngcontent-%COMP%] > tr.ui-selectable-row[_ngcontent-%COMP%]:not(.ui-state-highlight):not(.ui-contextmenu-selected):hover{cursor:pointer;background-color:#eaeaea;color:#333}body[_ngcontent-%COMP%]   .ui-table[_ngcontent-%COMP%]   .ui-column-resizer-helper[_ngcontent-%COMP%]{background-color:#7b95a3}@media screen and (max-width:40em){body[_ngcontent-%COMP%]   .ui-table.ui-table-responsive[_ngcontent-%COMP%]   .ui-paginator-top[_ngcontent-%COMP%]{border-bottom:1px solid #dadada}body[_ngcontent-%COMP%]   .ui-table.ui-table-responsive[_ngcontent-%COMP%]   .ui-paginator-bottom[_ngcontent-%COMP%]{border-top:1px solid #dadada}body[_ngcontent-%COMP%]   .ui-table.ui-table-responsive[_ngcontent-%COMP%]   .ui-table-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border:0}}body[_ngcontent-%COMP%]   .ui-datagrid[_ngcontent-%COMP%]   .ui-datagrid-header[_ngcontent-%COMP%]{background-color:#7b95a3;color:#fff;padding:.571em 1em;font-weight:700;border:1px solid #7b95a3;border-bottom:0}body[_ngcontent-%COMP%]   .ui-datagrid[_ngcontent-%COMP%]   .ui-datagrid-content[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-datagrid[_ngcontent-%COMP%]   .ui-datagrid-footer[_ngcontent-%COMP%]{border:1px solid #dadada;background-color:#fff;color:#666;padding:.571em 1em}body[_ngcontent-%COMP%]   .ui-datagrid[_ngcontent-%COMP%]   .ui-datagrid-footer[_ngcontent-%COMP%]{border-top:0}body[_ngcontent-%COMP%]   .ui-datalist[_ngcontent-%COMP%]   .ui-datalist-header[_ngcontent-%COMP%]{background-color:#7b95a3;color:#fff;padding:.571em 1em;font-weight:700;border:1px solid #7b95a3;border-bottom:0}body[_ngcontent-%COMP%]   .ui-datalist[_ngcontent-%COMP%]   .ui-datalist-content[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-datalist[_ngcontent-%COMP%]   .ui-datalist-footer[_ngcontent-%COMP%]{border:1px solid #dadada;background-color:#fff;color:#666;padding:.571em 1em}body[_ngcontent-%COMP%]   .ui-datalist[_ngcontent-%COMP%]   .ui-datalist-footer[_ngcontent-%COMP%]{border-top:0}body[_ngcontent-%COMP%]   .ui-datascroller[_ngcontent-%COMP%]   .ui-datascroller-header[_ngcontent-%COMP%]{background-color:#7b95a3;color:#fff;padding:.571em 1em;font-weight:700;border:1px solid #7b95a3;border-bottom:0}body[_ngcontent-%COMP%]   .ui-datascroller[_ngcontent-%COMP%]   .ui-datascroller-content[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-datascroller[_ngcontent-%COMP%]   .ui-datascroller-footer[_ngcontent-%COMP%]{border:1px solid #dadada;background-color:#fff;color:#666;padding:.571em 1em}body[_ngcontent-%COMP%]   .ui-datascroller[_ngcontent-%COMP%]   .ui-datascroller-footer[_ngcontent-%COMP%]{border-top:0}body[_ngcontent-%COMP%]   .ui-virtualscroller[_ngcontent-%COMP%]   .ui-virtualscroller-header[_ngcontent-%COMP%]{background-color:#7b95a3;color:#fff;padding:.571em 1em;font-weight:700;border:1px solid #7b95a3;border-bottom:0}body[_ngcontent-%COMP%]   .ui-virtualscroller[_ngcontent-%COMP%]   .ui-virtualscroller-content[_ngcontent-%COMP%]{border:1px solid #dadada;background-color:#fff;color:#666}body[_ngcontent-%COMP%]   .ui-virtualscroller[_ngcontent-%COMP%]   .ui-virtualscroller-content[_ngcontent-%COMP%]   .ui-virtualscroller-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-bottom:1px solid #7b95a3}body[_ngcontent-%COMP%]   .ui-virtualscroller[_ngcontent-%COMP%]   .ui-virtualscroller-footer[_ngcontent-%COMP%]{background-color:#fff;color:#666;padding:.571em 1em;border:1px solid #dadada;border-top:0}body[_ngcontent-%COMP%]   .ui-dataview[_ngcontent-%COMP%]   .ui-dataview-header[_ngcontent-%COMP%]{background-color:#7b95a3;color:#fff;padding:.571em 1em;font-weight:700;border:1px solid #7b95a3;border-bottom:0}body[_ngcontent-%COMP%]   .ui-dataview[_ngcontent-%COMP%]   .ui-dataview-content[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-dataview[_ngcontent-%COMP%]   .ui-dataview-footer[_ngcontent-%COMP%]{border:1px solid #dadada;background-color:#fff;color:#666;padding:.571em 1em}body[_ngcontent-%COMP%]   .ui-dataview[_ngcontent-%COMP%]   .ui-dataview-footer[_ngcontent-%COMP%]{border-top:0}body[_ngcontent-%COMP%]   .ui-dataview[_ngcontent-%COMP%]   .ui-dataview-layout-options[_ngcontent-%COMP%]   .ui-button[_ngcontent-%COMP%]{transition:background-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-dataview[_ngcontent-%COMP%]   .ui-dataview-layout-options[_ngcontent-%COMP%]   .ui-button[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7;z-index:1}body[_ngcontent-%COMP%]   .fc[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#7b95a3;border:1px solid #7b95a3;color:#fff;padding:.571em 1em}body[_ngcontent-%COMP%]   .fc[_ngcontent-%COMP%]   td.ui-widget-content[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #dadada;color:#666}body[_ngcontent-%COMP%]   .fc[_ngcontent-%COMP%]   td.fc-head-container[_ngcontent-%COMP%]{border:1px solid #7b95a3}body[_ngcontent-%COMP%]   .fc[_ngcontent-%COMP%]   .fc-row[_ngcontent-%COMP%]{border-right:1px solid #7b95a3}body[_ngcontent-%COMP%]   .fc[_ngcontent-%COMP%]   .fc-event[_ngcontent-%COMP%]{background-color:#afd3c8;border:1px solid #6c8999;color:#385048;transition:box-shadow .2s}body[_ngcontent-%COMP%]   .fc[_ngcontent-%COMP%]   .fc-event[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .fc[_ngcontent-%COMP%]   .fc-toolbar[_ngcontent-%COMP%]   .fc-button[_ngcontent-%COMP%]{color:#fff;background-color:#7b95a3;border:1px solid #617c8a;font-size:14px;transition:background-color .2s,box-shadow .2s;border-radius:2px}body[_ngcontent-%COMP%]   .fc[_ngcontent-%COMP%]   .fc-toolbar[_ngcontent-%COMP%]   .fc-button[_ngcontent-%COMP%]:enabled:hover{background-color:#6c8999;color:#fff;border-color:#6c8999}body[_ngcontent-%COMP%]   .fc[_ngcontent-%COMP%]   .fc-toolbar[_ngcontent-%COMP%]   .fc-button[_ngcontent-%COMP%]   .fc-icon-chevron-left[_ngcontent-%COMP%]{font-family:PrimeIcons!important;text-indent:0}body[_ngcontent-%COMP%]   .fc[_ngcontent-%COMP%]   .fc-toolbar[_ngcontent-%COMP%]   .fc-button[_ngcontent-%COMP%]   .fc-icon-chevron-left[_ngcontent-%COMP%]:before{content:"\ue900"}body[_ngcontent-%COMP%]   .fc[_ngcontent-%COMP%]   .fc-toolbar[_ngcontent-%COMP%]   .fc-button[_ngcontent-%COMP%]   .fc-icon-chevron-right[_ngcontent-%COMP%]{font-family:PrimeIcons!important;text-indent:0}body[_ngcontent-%COMP%]   .fc[_ngcontent-%COMP%]   .fc-toolbar[_ngcontent-%COMP%]   .fc-button[_ngcontent-%COMP%]   .fc-icon-chevron-right[_ngcontent-%COMP%]:before{content:"\ue901"}body[_ngcontent-%COMP%]   .fc[_ngcontent-%COMP%]   .fc-toolbar[_ngcontent-%COMP%]   .fc-button[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .fc[_ngcontent-%COMP%]   .fc-toolbar[_ngcontent-%COMP%]   .fc-button-group[_ngcontent-%COMP%]   .fc-button[_ngcontent-%COMP%]{border-radius:0}body[_ngcontent-%COMP%]   .fc[_ngcontent-%COMP%]   .fc-toolbar[_ngcontent-%COMP%]   .fc-button-group[_ngcontent-%COMP%]   .fc-button[_ngcontent-%COMP%]:first-child{border-top-left-radius:2px;border-bottom-left-radius:2px}body[_ngcontent-%COMP%]   .fc[_ngcontent-%COMP%]   .fc-toolbar[_ngcontent-%COMP%]   .fc-button-group[_ngcontent-%COMP%]   .fc-button[_ngcontent-%COMP%]:last-child{border-top-right-radius:2px;border-bottom-right-radius:2px}body[_ngcontent-%COMP%]   .fc[_ngcontent-%COMP%]   .fc-divider[_ngcontent-%COMP%]{background-color:#7b95a3;border:1px solid #7b95a3}body[_ngcontent-%COMP%]   .ui-fluid[_ngcontent-%COMP%]   .fc[_ngcontent-%COMP%]   .fc-toolbar[_ngcontent-%COMP%]   .fc-button[_ngcontent-%COMP%]{width:auto}body[_ngcontent-%COMP%]   .ui-picklist[_ngcontent-%COMP%]   .ui-picklist-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px}body[_ngcontent-%COMP%]   .ui-picklist[_ngcontent-%COMP%]   .ui-picklist-caption[_ngcontent-%COMP%]{background-color:#7b95a3;color:#fff;padding:.571em 1em;font-weight:700;border:1px solid #7b95a3;border-bottom:0;border-top-left-radius:2px;border-top-right-radius:2px}body[_ngcontent-%COMP%]   .ui-picklist[_ngcontent-%COMP%]   .ui-picklist-filter-container[_ngcontent-%COMP%]{padding:.429em .857em;color:#666;background-color:#fff;margin:0;border:1px solid #7b95a3;border-bottom:0}body[_ngcontent-%COMP%]   .ui-picklist[_ngcontent-%COMP%]   .ui-picklist-filter-container[_ngcontent-%COMP%]   input.ui-picklist-filter[_ngcontent-%COMP%]{width:100%;padding-right:2em;text-indent:0}body[_ngcontent-%COMP%]   .ui-picklist[_ngcontent-%COMP%]   .ui-picklist-filter-container[_ngcontent-%COMP%]   .ui-picklist-filter-icon[_ngcontent-%COMP%]{top:50%;margin-top:-.5em;left:auto;right:1.357em;color:#a6a6a6}body[_ngcontent-%COMP%]   .ui-picklist[_ngcontent-%COMP%]   .ui-picklist-buttons[_ngcontent-%COMP%]{padding:.571em 1em}body[_ngcontent-%COMP%]   .ui-picklist[_ngcontent-%COMP%]   .ui-picklist-list[_ngcontent-%COMP%]{border:1px solid #dadada;background-color:#fff;color:#666;padding:0}body[_ngcontent-%COMP%]   .ui-picklist[_ngcontent-%COMP%]   .ui-picklist-list[_ngcontent-%COMP%]   .ui-picklist-item[_ngcontent-%COMP%]{padding:.429em .857em;margin:0;border:0;color:#666;background-color:transparent;transition:background-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-picklist[_ngcontent-%COMP%]   .ui-picklist-list[_ngcontent-%COMP%]   .ui-picklist-item[_ngcontent-%COMP%]:not(.ui-state-highlight):hover{background-color:#f4f4f4;color:#666}body[_ngcontent-%COMP%]   .ui-picklist[_ngcontent-%COMP%]   .ui-picklist-list[_ngcontent-%COMP%]   .ui-picklist-item.ui-state-highlight[_ngcontent-%COMP%]{background-color:#afd3c8;color:#385048}body[_ngcontent-%COMP%]   .ui-picklist[_ngcontent-%COMP%]   .ui-picklist-list[_ngcontent-%COMP%]   .ui-picklist-item[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:inset 0 0 0 .2em #e4e9ec}body[_ngcontent-%COMP%]   .ui-picklist[_ngcontent-%COMP%]   .ui-picklist-list[_ngcontent-%COMP%]   .ui-picklist-droppoint-highlight[_ngcontent-%COMP%]{background-color:#afd3c8}@media (max-width:40em){body[_ngcontent-%COMP%]   .ui-picklist.ui-picklist-responsive[_ngcontent-%COMP%]   .ui-picklist-buttons[_ngcontent-%COMP%]{padding:.571em 1em}}body[_ngcontent-%COMP%]   .ui-orderlist[_ngcontent-%COMP%]   .ui-orderlist-controls[_ngcontent-%COMP%]{padding:.571em 1em}body[_ngcontent-%COMP%]   .ui-orderlist[_ngcontent-%COMP%]   .ui-orderlist-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px}body[_ngcontent-%COMP%]   .ui-orderlist[_ngcontent-%COMP%]   .ui-orderlist-caption[_ngcontent-%COMP%]{background-color:#7b95a3;color:#fff;padding:.571em 1em;font-weight:700;border:1px solid #7b95a3;border-bottom:0;border-top-left-radius:2px;border-top-right-radius:2px}body[_ngcontent-%COMP%]   .ui-orderlist[_ngcontent-%COMP%]   .ui-orderlist-filter-container[_ngcontent-%COMP%]{padding:.429em .857em;color:#666;background-color:#fff;margin:0;border:1px solid #7b95a3;border-bottom:0}body[_ngcontent-%COMP%]   .ui-orderlist[_ngcontent-%COMP%]   .ui-orderlist-filter-container[_ngcontent-%COMP%]   input.ui-inputtext[_ngcontent-%COMP%]{width:100%;padding-right:2em;text-indent:0}body[_ngcontent-%COMP%]   .ui-orderlist[_ngcontent-%COMP%]   .ui-orderlist-filter-container[_ngcontent-%COMP%]   .ui-orderlist-filter-icon[_ngcontent-%COMP%]{top:50%;margin-top:-.5em;left:auto;right:1.357em;color:#a6a6a6}body[_ngcontent-%COMP%]   .ui-orderlist[_ngcontent-%COMP%]   .ui-orderlist-list[_ngcontent-%COMP%]{border:1px solid #dadada;background-color:#fff;color:#666;padding:0}body[_ngcontent-%COMP%]   .ui-orderlist[_ngcontent-%COMP%]   .ui-orderlist-list[_ngcontent-%COMP%]   .ui-orderlist-item[_ngcontent-%COMP%]{padding:.429em .857em;margin:0;border:0;color:#666;background-color:transparent;transition:background-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-orderlist[_ngcontent-%COMP%]   .ui-orderlist-list[_ngcontent-%COMP%]   .ui-orderlist-item[_ngcontent-%COMP%]:not(.ui-state-highlight):hover{background-color:#f4f4f4;color:#666}body[_ngcontent-%COMP%]   .ui-orderlist[_ngcontent-%COMP%]   .ui-orderlist-list[_ngcontent-%COMP%]   .ui-orderlist-item.ui-state-highlight[_ngcontent-%COMP%]{background-color:#afd3c8;color:#385048}body[_ngcontent-%COMP%]   .ui-orderlist[_ngcontent-%COMP%]   .ui-orderlist-list[_ngcontent-%COMP%]   .ui-orderlist-item[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:inset 0 0 0 .2em #e4e9ec}body[_ngcontent-%COMP%]   .ui-orderlist[_ngcontent-%COMP%]   .ui-orderlist-list[_ngcontent-%COMP%]   .ui-orderlist-droppoint-highlight[_ngcontent-%COMP%]{background-color:#afd3c8}body[_ngcontent-%COMP%]   .ui-tree[_ngcontent-%COMP%]{border:1px solid #dadada;background-color:#fff;color:#666;padding:.571em 1em}body[_ngcontent-%COMP%]   .ui-tree[_ngcontent-%COMP%]   .ui-tree-container[_ngcontent-%COMP%]{padding:.286em;margin:0}body[_ngcontent-%COMP%]   .ui-tree[_ngcontent-%COMP%]   .ui-tree-container[_ngcontent-%COMP%]   .ui-treenode[_ngcontent-%COMP%]{padding:.143em 0}body[_ngcontent-%COMP%]   .ui-tree[_ngcontent-%COMP%]   .ui-tree-container[_ngcontent-%COMP%]   .ui-treenode[_ngcontent-%COMP%]   .ui-treenode-content[_ngcontent-%COMP%]{padding:0;border:1px solid transparent;transition:background-color .2s,box-shadow .2s;border-radius:2px}body[_ngcontent-%COMP%]   .ui-tree[_ngcontent-%COMP%]   .ui-tree-container[_ngcontent-%COMP%]   .ui-treenode[_ngcontent-%COMP%]   .ui-treenode-content[_ngcontent-%COMP%]   .ui-tree-toggler[_ngcontent-%COMP%]{vertical-align:middle;display:inline-block;float:none;margin:0 .143em 0 0;color:#a6a6a6}body[_ngcontent-%COMP%]   .ui-tree[_ngcontent-%COMP%]   .ui-tree-container[_ngcontent-%COMP%]   .ui-treenode[_ngcontent-%COMP%]   .ui-treenode-content[_ngcontent-%COMP%]   .ui-treenode-icon[_ngcontent-%COMP%]{vertical-align:middle;display:inline-block;margin:0 .143em 0 0;color:#a6a6a6}body[_ngcontent-%COMP%]   .ui-tree[_ngcontent-%COMP%]   .ui-tree-container[_ngcontent-%COMP%]   .ui-treenode[_ngcontent-%COMP%]   .ui-treenode-content[_ngcontent-%COMP%]   .ui-treenode-label[_ngcontent-%COMP%]{margin:0;vertical-align:middle;display:inline-block;padding:.286em}body[_ngcontent-%COMP%]   .ui-tree[_ngcontent-%COMP%]   .ui-tree-container[_ngcontent-%COMP%]   .ui-treenode[_ngcontent-%COMP%]   .ui-treenode-content[_ngcontent-%COMP%]   .ui-treenode-label.ui-state-highlight[_ngcontent-%COMP%]{background-color:#afd3c8;color:#385048}body[_ngcontent-%COMP%]   .ui-tree[_ngcontent-%COMP%]   .ui-tree-container[_ngcontent-%COMP%]   .ui-treenode[_ngcontent-%COMP%]   .ui-treenode-content[_ngcontent-%COMP%]   .ui-chkbox[_ngcontent-%COMP%]{margin:0 .5em 0 0}body[_ngcontent-%COMP%]   .ui-tree[_ngcontent-%COMP%]   .ui-tree-container[_ngcontent-%COMP%]   .ui-treenode[_ngcontent-%COMP%]   .ui-treenode-content[_ngcontent-%COMP%]   .ui-chkbox[_ngcontent-%COMP%]   .ui-chkbox-icon[_ngcontent-%COMP%]{margin:1px 0 0}body[_ngcontent-%COMP%]   .ui-tree[_ngcontent-%COMP%]   .ui-tree-container[_ngcontent-%COMP%]   .ui-treenode[_ngcontent-%COMP%]   .ui-treenode-content.ui-treenode-selectable[_ngcontent-%COMP%]   .ui-treenode-label[_ngcontent-%COMP%]:not(.ui-state-highlight):hover{background-color:#f4f4f4;color:#666}body[_ngcontent-%COMP%]   .ui-tree[_ngcontent-%COMP%]   .ui-tree-container[_ngcontent-%COMP%]   .ui-treenode[_ngcontent-%COMP%]   .ui-treenode-content[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{line-height:inherit}body[_ngcontent-%COMP%]   .ui-tree[_ngcontent-%COMP%]   .ui-tree-container[_ngcontent-%COMP%]   .ui-treenode[_ngcontent-%COMP%]   .ui-treenode-content.ui-treenode-dragover[_ngcontent-%COMP%]{background-color:#f4f4f4;color:#666}body[_ngcontent-%COMP%]   .ui-tree[_ngcontent-%COMP%]   .ui-tree-container[_ngcontent-%COMP%]   .ui-treenode[_ngcontent-%COMP%]   .ui-treenode-content[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-tree[_ngcontent-%COMP%]   .ui-tree-container[_ngcontent-%COMP%]   .ui-treenode-droppoint.ui-treenode-droppoint-active[_ngcontent-%COMP%]{background-color:#afd3c8}body[_ngcontent-%COMP%]   .ui-tree.ui-tree-horizontal[_ngcontent-%COMP%]{padding-left:0;padding-right:0}body[_ngcontent-%COMP%]   .ui-tree.ui-tree-horizontal[_ngcontent-%COMP%]   .ui-treenode[_ngcontent-%COMP%]   .ui-treenode-content[_ngcontent-%COMP%]{border:1px solid #dadada;background-color:#fff;color:#666;padding:.571em 1em;transition:background-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-tree.ui-tree-horizontal[_ngcontent-%COMP%]   .ui-treenode[_ngcontent-%COMP%]   .ui-treenode-content.ui-state-highlight[_ngcontent-%COMP%]{background-color:#afd3c8;color:#385048}body[_ngcontent-%COMP%]   .ui-tree.ui-tree-horizontal[_ngcontent-%COMP%]   .ui-treenode[_ngcontent-%COMP%]   .ui-treenode-content[_ngcontent-%COMP%]   .ui-chkbox[_ngcontent-%COMP%]   .ui-icon[_ngcontent-%COMP%]{color:#7b95a3}body[_ngcontent-%COMP%]   .ui-tree.ui-tree-horizontal[_ngcontent-%COMP%]   .ui-treenode[_ngcontent-%COMP%]   .ui-treenode-content[_ngcontent-%COMP%]   .ui-treenode-label[_ngcontent-%COMP%]:not(.ui-state-highlight):hover{background-color:inherit;color:inherit}body[_ngcontent-%COMP%]   .ui-tree.ui-tree-horizontal[_ngcontent-%COMP%]   .ui-treenode[_ngcontent-%COMP%]   .ui-treenode-content.ui-treenode-selectable[_ngcontent-%COMP%]:not(.ui-state-highlight):hover{background-color:#f4f4f4;color:#666}body[_ngcontent-%COMP%]   .ui-tree.ui-tree-horizontal[_ngcontent-%COMP%]   .ui-treenode[_ngcontent-%COMP%]   .ui-treenode-content[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-tree[_ngcontent-%COMP%]   .ui-tree-filter-container[_ngcontent-%COMP%]   .ui-tree-filter[_ngcontent-%COMP%]{width:100%;padding-right:2em}body[_ngcontent-%COMP%]   .ui-tree[_ngcontent-%COMP%]   .ui-tree-filter-container[_ngcontent-%COMP%]   .ui-tree-filter-icon[_ngcontent-%COMP%]{top:50%;left:auto;margin-top:-.5em;right:.8em;color:#a6a6a6}body[_ngcontent-%COMP%]   .ui-organizationchart[_ngcontent-%COMP%]   .ui-organizationchart-node-content.ui-organizationchart-selectable-node[_ngcontent-%COMP%]:not(.ui-state-highlight):hover{background-color:#f4f4f4;color:#666}body[_ngcontent-%COMP%]   .ui-organizationchart[_ngcontent-%COMP%]   .ui-organizationchart-node-content.ui-state-highlight[_ngcontent-%COMP%]{background-color:#afd3c8;color:#385048}body[_ngcontent-%COMP%]   .ui-organizationchart[_ngcontent-%COMP%]   .ui-organizationchart-node-content.ui-state-highlight[_ngcontent-%COMP%]   .ui-node-toggler[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#5da68f}body[_ngcontent-%COMP%]   .ui-organizationchart[_ngcontent-%COMP%]   .ui-organizationchart-line-down[_ngcontent-%COMP%]{background-color:#c8c8c8}body[_ngcontent-%COMP%]   .ui-organizationchart[_ngcontent-%COMP%]   .ui-organizationchart-line-left[_ngcontent-%COMP%]{border-right:1px solid;border-color:#c8c8c8}body[_ngcontent-%COMP%]   .ui-organizationchart[_ngcontent-%COMP%]   .ui-organizationchart-line-top[_ngcontent-%COMP%]{border-color:#dadada #c8c8c8 #c8c8c8;border-top:1px solid #c8c8c8}body[_ngcontent-%COMP%]   .ui-organizationchart[_ngcontent-%COMP%]   .ui-organizationchart-node-content[_ngcontent-%COMP%]{border:1px solid #dadada;background-color:#fff;color:#666;padding:.571em 1em}body[_ngcontent-%COMP%]   .ui-organizationchart[_ngcontent-%COMP%]   .ui-organizationchart-node-content[_ngcontent-%COMP%]   .ui-node-toggler[_ngcontent-%COMP%]{bottom:-.7em;margin-left:-.46em;color:#a6a6a6;overflow:hidden;line-height:1;border-radius:2px;transition:box-shadow .2s}body[_ngcontent-%COMP%]   .ui-organizationchart[_ngcontent-%COMP%]   .ui-organizationchart-node-content[_ngcontent-%COMP%]   .ui-node-toggler[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-treetable-caption[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-treetable-summary[_ngcontent-%COMP%]{background-color:#7b95a3;color:#fff;border:1px solid #7b95a3;padding:.571em 1em;text-align:center}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-treetable-caption[_ngcontent-%COMP%]{border-bottom:0;font-weight:700}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-treetable-summary[_ngcontent-%COMP%]{border-top:0;font-weight:700}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-treetable-thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{padding:.571em .857em;border:1px solid #dadada;font-weight:700;color:#666;background-color:#fff}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-treetable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:.571em .857em}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-treetable-tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:.571em .857em;border:1px solid #dadada;font-weight:700;color:#666;background-color:#fff}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-sortable-column[_ngcontent-%COMP%]{transition:box-shadow .2s}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-sortable-column[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:inset 0 0 0 .2em #e4e9ec}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-sortable-column[_ngcontent-%COMP%]   .ui-sortable-column-icon[_ngcontent-%COMP%]{color:#666}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-sortable-column[_ngcontent-%COMP%]:not(.ui-state-highlight):hover{background-color:#eaeaea;color:#666}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-sortable-column[_ngcontent-%COMP%]:not(.ui-state-highlight):hover   .ui-sortable-column-icon[_ngcontent-%COMP%]{color:#666}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-sortable-column.ui-state-highlight[_ngcontent-%COMP%]{background-color:#afd3c8;color:#385048}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-sortable-column.ui-state-highlight[_ngcontent-%COMP%]   .ui-sortable-column-icon[_ngcontent-%COMP%]{color:#385048}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-editable-column[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:14px;font-family:Open Sans,Helvetica Neue,sans-serif}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-editable-column[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:1px solid #dadada;outline-offset:2px}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-treetable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{background-color:#fff;color:#666}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-treetable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{background-color:inherit;border:1px solid #dadada}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-treetable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   .ui-treetable-toggler[_ngcontent-%COMP%]{color:#a6a6a6;vertical-align:middle}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-treetable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   .ui-treetable-chkbox[_ngcontent-%COMP%]{vertical-align:middle;margin-right:.5em}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-treetable-tbody[_ngcontent-%COMP%] > tr.ui-state-highlight[_ngcontent-%COMP%]{background-color:#afd3c8;color:#385048}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-treetable-tbody[_ngcontent-%COMP%] > tr.ui-state-highlight[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{background-color:inherit;border:1px solid #dadada}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-treetable-tbody[_ngcontent-%COMP%] > tr.ui-state-highlight[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   .ui-treetable-toggler[_ngcontent-%COMP%]{color:#385048}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-treetable-tbody[_ngcontent-%COMP%] > tr.ui-contextmenu-selected[_ngcontent-%COMP%]{background-color:#afd3c8;color:#385048}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-treetable-tbody[_ngcontent-%COMP%] > tr.ui-contextmenu-selected[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{background-color:inherit;border:1px solid #dadada}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-treetable-tbody[_ngcontent-%COMP%] > tr.ui-contextmenu-selected[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   .ui-treetable-toggler[_ngcontent-%COMP%]{color:#385048}body[_ngcontent-%COMP%]   .ui-treetable.ui-treetable-hoverable-rows[_ngcontent-%COMP%]   .ui-treetable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:not(.ui-state-highlight):not(.ui-contextmenu-selected):hover{cursor:pointer;background-color:#eaeaea;color:#333}body[_ngcontent-%COMP%]   .ui-treetable[_ngcontent-%COMP%]   .ui-column-resizer-helper[_ngcontent-%COMP%]{background-color:#7b95a3}body[_ngcontent-%COMP%]   .ui-carousel[_ngcontent-%COMP%]   .ui-carousel-content[_ngcontent-%COMP%]   .ui-carousel-next[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-carousel[_ngcontent-%COMP%]   .ui-carousel-content[_ngcontent-%COMP%]   .ui-carousel-prev[_ngcontent-%COMP%]{background-color:#7b95a3;border:1px solid #617c8a;border-radius:50%;margin:.2em;color:#fff;transition:background-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-carousel[_ngcontent-%COMP%]   .ui-carousel-content[_ngcontent-%COMP%]   .ui-carousel-next[_ngcontent-%COMP%]:not(.ui-state-disabled):hover, body[_ngcontent-%COMP%]   .ui-carousel[_ngcontent-%COMP%]   .ui-carousel-content[_ngcontent-%COMP%]   .ui-carousel-prev[_ngcontent-%COMP%]:not(.ui-state-disabled):hover{background-color:#6c8999;color:#fff;border-color:#6c8999}body[_ngcontent-%COMP%]   .ui-carousel[_ngcontent-%COMP%]   .ui-carousel-dots-container[_ngcontent-%COMP%]   .ui-carousel-dot-item[_ngcontent-%COMP%] > .ui-button[_ngcontent-%COMP%]{border-color:transparent;background-color:transparent}body[_ngcontent-%COMP%]   .ui-carousel[_ngcontent-%COMP%]   .ui-carousel-dots-container[_ngcontent-%COMP%]   .ui-carousel-dot-item[_ngcontent-%COMP%]   .ui-carousel-dot-icon[_ngcontent-%COMP%]{width:20px;height:6px;background-color:#b2c1cd;margin:0 .2em}body[_ngcontent-%COMP%]   .ui-carousel[_ngcontent-%COMP%]   .ui-carousel-dots-container[_ngcontent-%COMP%]   .ui-carousel-dot-item[_ngcontent-%COMP%]   .ui-carousel-dot-icon[_ngcontent-%COMP%]:before{content:" "}body[_ngcontent-%COMP%]   .ui-carousel[_ngcontent-%COMP%]   .ui-carousel-dots-container[_ngcontent-%COMP%]   .ui-carousel-dot-item.ui-state-highlight[_ngcontent-%COMP%]   .ui-carousel-dot-icon[_ngcontent-%COMP%]{background-color:#7b95a3}body[_ngcontent-%COMP%]   .ui-messages[_ngcontent-%COMP%]{padding:1em;margin:1em 0}body[_ngcontent-%COMP%]   .ui-messages.ui-messages-info[_ngcontent-%COMP%]{background-color:#a3def8;border:1px solid #79c8eb;color:#212121}body[_ngcontent-%COMP%]   .ui-messages.ui-messages-info[_ngcontent-%COMP%]   .ui-messages-close[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-messages.ui-messages-info[_ngcontent-%COMP%]   .ui-messages-icon[_ngcontent-%COMP%]{color:#212121}body[_ngcontent-%COMP%]   .ui-messages.ui-messages-success[_ngcontent-%COMP%]{background-color:#a3e2c6;border:1px solid #a3e2c6;color:#212121}body[_ngcontent-%COMP%]   .ui-messages.ui-messages-success[_ngcontent-%COMP%]   .ui-messages-close[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-messages.ui-messages-success[_ngcontent-%COMP%]   .ui-messages-icon[_ngcontent-%COMP%]{color:#212121}body[_ngcontent-%COMP%]   .ui-messages.ui-messages-warn[_ngcontent-%COMP%]{background-color:#ffe277;border:1px solid #ffe277;color:#212121}body[_ngcontent-%COMP%]   .ui-messages.ui-messages-warn[_ngcontent-%COMP%]   .ui-messages-close[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-messages.ui-messages-warn[_ngcontent-%COMP%]   .ui-messages-icon[_ngcontent-%COMP%]{color:#212121}body[_ngcontent-%COMP%]   .ui-messages.ui-messages-error[_ngcontent-%COMP%]{background-color:#ff8b8b;border:1px solid #ff8b8b;color:#212121}body[_ngcontent-%COMP%]   .ui-messages.ui-messages-error[_ngcontent-%COMP%]   .ui-messages-close[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-messages.ui-messages-error[_ngcontent-%COMP%]   .ui-messages-icon[_ngcontent-%COMP%]{color:#212121}body[_ngcontent-%COMP%]   .ui-messages[_ngcontent-%COMP%]   .ui-messages-close[_ngcontent-%COMP%]{top:.25em;right:.5em;font-size:1.5em;overflow:hidden;line-height:1;border-radius:2px;transition:box-shadow .2s}body[_ngcontent-%COMP%]   .ui-messages[_ngcontent-%COMP%]   .ui-messages-close[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-messages[_ngcontent-%COMP%]   .ui-messages-icon[_ngcontent-%COMP%]{font-size:2em}body[_ngcontent-%COMP%]   .ui-message[_ngcontent-%COMP%]{padding:.429em;margin:0}body[_ngcontent-%COMP%]   .ui-message.ui-message-info[_ngcontent-%COMP%]{background-color:#a3def8;border:1px solid #79c8eb;color:#212121}body[_ngcontent-%COMP%]   .ui-message.ui-message-info[_ngcontent-%COMP%]   .ui-message-icon[_ngcontent-%COMP%]{color:#212121}body[_ngcontent-%COMP%]   .ui-message.ui-message-success[_ngcontent-%COMP%]{background-color:#a3e2c6;border:1px solid #a3e2c6;color:#212121}body[_ngcontent-%COMP%]   .ui-message.ui-message-success[_ngcontent-%COMP%]   .ui-message-icon[_ngcontent-%COMP%]{color:#212121}body[_ngcontent-%COMP%]   .ui-message.ui-message-warn[_ngcontent-%COMP%]{background-color:#ffe277;border:1px solid #ffe277;color:#212121}body[_ngcontent-%COMP%]   .ui-message.ui-message-warn[_ngcontent-%COMP%]   .ui-message-icon[_ngcontent-%COMP%]{color:#212121}body[_ngcontent-%COMP%]   .ui-message.ui-message-error[_ngcontent-%COMP%]{background-color:#ff8b8b;border:1px solid #ff8b8b;color:#212121}body[_ngcontent-%COMP%]   .ui-message.ui-message-error[_ngcontent-%COMP%]   .ui-message-icon[_ngcontent-%COMP%]{color:#212121}body[_ngcontent-%COMP%]   .ui-message[_ngcontent-%COMP%]   .ui-message-icon[_ngcontent-%COMP%]{font-size:1.714em}body[_ngcontent-%COMP%]   .ui-message[_ngcontent-%COMP%]   .ui-message-text[_ngcontent-%COMP%]{font-size:14px}body[_ngcontent-%COMP%]   .ui-growl[_ngcontent-%COMP%]{top:120px}body[_ngcontent-%COMP%]   .ui-growl[_ngcontent-%COMP%]   .ui-growl-item-container[_ngcontent-%COMP%]{margin:0 0 1em;opacity:.9;filter:alpha(opacity=90);box-shadow:0 3px 6px 0 rgba(0,0,0,.16)}body[_ngcontent-%COMP%]   .ui-growl[_ngcontent-%COMP%]   .ui-growl-item-container[_ngcontent-%COMP%]   .ui-growl-item[_ngcontent-%COMP%]{padding:1em}body[_ngcontent-%COMP%]   .ui-growl[_ngcontent-%COMP%]   .ui-growl-item-container[_ngcontent-%COMP%]   .ui-growl-item[_ngcontent-%COMP%]   .ui-growl-message[_ngcontent-%COMP%]{margin:0 0 0 4em}body[_ngcontent-%COMP%]   .ui-growl[_ngcontent-%COMP%]   .ui-growl-item-container[_ngcontent-%COMP%]   .ui-growl-item[_ngcontent-%COMP%]   .ui-growl-image[_ngcontent-%COMP%]{font-size:3.429em}body[_ngcontent-%COMP%]   .ui-growl[_ngcontent-%COMP%]   .ui-growl-item-container.ui-growl-message-info[_ngcontent-%COMP%]{background-color:#a3def8;border:1px solid #79c8eb;color:#212121}body[_ngcontent-%COMP%]   .ui-growl[_ngcontent-%COMP%]   .ui-growl-item-container.ui-growl-message-info[_ngcontent-%COMP%]   .ui-growl-image[_ngcontent-%COMP%]{color:#212121}body[_ngcontent-%COMP%]   .ui-growl[_ngcontent-%COMP%]   .ui-growl-item-container.ui-growl-message-success[_ngcontent-%COMP%]{background-color:#a3e2c6;border:1px solid #a3e2c6;color:#212121}body[_ngcontent-%COMP%]   .ui-growl[_ngcontent-%COMP%]   .ui-growl-item-container.ui-growl-message-success[_ngcontent-%COMP%]   .ui-growl-image[_ngcontent-%COMP%]{color:#212121}body[_ngcontent-%COMP%]   .ui-growl[_ngcontent-%COMP%]   .ui-growl-item-container.ui-growl-message-warn[_ngcontent-%COMP%]{background-color:#ffe277;border:1px solid #ffe277;color:#212121}body[_ngcontent-%COMP%]   .ui-growl[_ngcontent-%COMP%]   .ui-growl-item-container.ui-growl-message-warn[_ngcontent-%COMP%]   .ui-growl-image[_ngcontent-%COMP%]{color:#212121}body[_ngcontent-%COMP%]   .ui-growl[_ngcontent-%COMP%]   .ui-growl-item-container.ui-growl-message-error[_ngcontent-%COMP%]{background-color:#ff8b8b;border:1px solid #ff8b8b;color:#212121}body[_ngcontent-%COMP%]   .ui-growl[_ngcontent-%COMP%]   .ui-growl-item-container.ui-growl-message-error[_ngcontent-%COMP%]   .ui-growl-image[_ngcontent-%COMP%]{color:#212121}body[_ngcontent-%COMP%]   .ui-toast[_ngcontent-%COMP%]   .ui-toast-message[_ngcontent-%COMP%]{box-shadow:0 3px .429em 0 rgba(0,0,0,.16);margin:0 0 1em}body[_ngcontent-%COMP%]   .ui-toast[_ngcontent-%COMP%]   .ui-toast-message.ui-toast-message-info[_ngcontent-%COMP%]{background-color:#a3def8;border:1px solid #79c8eb;color:#212121}body[_ngcontent-%COMP%]   .ui-toast[_ngcontent-%COMP%]   .ui-toast-message.ui-toast-message-info[_ngcontent-%COMP%]   .ui-toast-close-icon[_ngcontent-%COMP%]{color:#212121}body[_ngcontent-%COMP%]   .ui-toast[_ngcontent-%COMP%]   .ui-toast-message.ui-toast-message-success[_ngcontent-%COMP%]{background-color:#a3e2c6;border:1px solid #a3e2c6;color:#212121}body[_ngcontent-%COMP%]   .ui-toast[_ngcontent-%COMP%]   .ui-toast-message.ui-toast-message-success[_ngcontent-%COMP%]   .ui-toast-close-icon[_ngcontent-%COMP%]{color:#212121}body[_ngcontent-%COMP%]   .ui-toast[_ngcontent-%COMP%]   .ui-toast-message.ui-toast-message-warn[_ngcontent-%COMP%]{background-color:#ffe277;border:1px solid #ffe277;color:#212121}body[_ngcontent-%COMP%]   .ui-toast[_ngcontent-%COMP%]   .ui-toast-message.ui-toast-message-warn[_ngcontent-%COMP%]   .ui-toast-close-icon[_ngcontent-%COMP%]{color:#212121}body[_ngcontent-%COMP%]   .ui-toast[_ngcontent-%COMP%]   .ui-toast-message.ui-toast-message-error[_ngcontent-%COMP%]{background-color:#ff8b8b;border:1px solid #ff8b8b;color:#212121}body[_ngcontent-%COMP%]   .ui-toast[_ngcontent-%COMP%]   .ui-toast-message.ui-toast-message-error[_ngcontent-%COMP%]   .ui-toast-close-icon[_ngcontent-%COMP%]{color:#212121}body[_ngcontent-%COMP%]   .ui-widget-overlay[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.4)}body[_ngcontent-%COMP%]   .ui-overlaypanel[_ngcontent-%COMP%]{background-color:#fff;color:#666;padding:0;border:1px solid #f1f1f1;border-radius:0}body[_ngcontent-%COMP%]   .ui-overlaypanel[_ngcontent-%COMP%]   .ui-overlaypanel-content[_ngcontent-%COMP%]{padding:.571em 1em}body[_ngcontent-%COMP%]   .ui-overlaypanel[_ngcontent-%COMP%]   .ui-overlaypanel-close[_ngcontent-%COMP%]{background-color:#7b95a3;color:#fff;width:1.538em;height:1.538em;line-height:1.538em;text-align:center;position:absolute;top:-.769em;right:-.769em;transition:color .2s,background-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-overlaypanel[_ngcontent-%COMP%]   .ui-overlaypanel-close[_ngcontent-%COMP%]   .ui-overlaypanel-close-icon[_ngcontent-%COMP%]{line-height:inherit}body[_ngcontent-%COMP%]   .ui-overlaypanel[_ngcontent-%COMP%]   .ui-overlaypanel-close[_ngcontent-%COMP%]:hover{background-color:#617c8a;color:#fff}body[_ngcontent-%COMP%]   .ui-overlaypanel[_ngcontent-%COMP%]   .ui-overlaypanel-close[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-overlaypanel[_ngcontent-%COMP%]:after{border-color:hsla(0,0%,100%,0) hsla(0,0%,100%,0) #fff}body[_ngcontent-%COMP%]   .ui-overlaypanel[_ngcontent-%COMP%]:before{border-color:hsla(0,0%,94.5%,0) hsla(0,0%,94.5%,0) #f1f1f1}body[_ngcontent-%COMP%]   .ui-overlaypanel.ui-overlaypanel-flipped[_ngcontent-%COMP%]:after{border-top-color:#fff}body[_ngcontent-%COMP%]   .ui-overlaypanel.ui-overlaypanel-flipped[_ngcontent-%COMP%]:before{border-top-color:#f1f1f1}body[_ngcontent-%COMP%]   .ui-dialog[_ngcontent-%COMP%]{padding:0;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body[_ngcontent-%COMP%]   .ui-dialog[_ngcontent-%COMP%]   .ui-dialog-titlebar[_ngcontent-%COMP%]{background-color:#7b95a3;color:#fff;padding:1em;font-weight:700;border:1px solid #7b95a3;border-bottom:0}body[_ngcontent-%COMP%]   .ui-dialog[_ngcontent-%COMP%]   .ui-dialog-titlebar[_ngcontent-%COMP%]   .ui-dialog-title[_ngcontent-%COMP%]{margin:0;float:none}body[_ngcontent-%COMP%]   .ui-dialog[_ngcontent-%COMP%]   .ui-dialog-titlebar[_ngcontent-%COMP%]   .ui-dialog-titlebar-icon[_ngcontent-%COMP%]{color:#fff;border:0;padding:0;margin-left:.5em;transition:color .2s,background-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-dialog[_ngcontent-%COMP%]   .ui-dialog-titlebar[_ngcontent-%COMP%]   .ui-dialog-titlebar-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:auto}body[_ngcontent-%COMP%]   .ui-dialog[_ngcontent-%COMP%]   .ui-dialog-titlebar[_ngcontent-%COMP%]   .ui-dialog-titlebar-icon[_ngcontent-%COMP%]:hover{color:#fff}body[_ngcontent-%COMP%]   .ui-dialog[_ngcontent-%COMP%]   .ui-dialog-titlebar[_ngcontent-%COMP%]   .ui-dialog-titlebar-icon[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-dialog[_ngcontent-%COMP%]   .ui-dialog-content[_ngcontent-%COMP%]{background-color:#fff;color:#666;border:1px solid #f1f1f1;padding:.571em 1em}body[_ngcontent-%COMP%]   .ui-dialog[_ngcontent-%COMP%]   .ui-dialog-footer[_ngcontent-%COMP%]{border:1px solid #dadada;background-color:#fff;color:#666;padding:.571em 1em;margin:0;text-align:right;position:relative;top:-1px}body[_ngcontent-%COMP%]   .ui-dialog[_ngcontent-%COMP%]   .ui-dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 .5em 0 0;width:auto}body[_ngcontent-%COMP%]   .ui-dialog.ui-confirm-dialog[_ngcontent-%COMP%]   .ui-dialog-content[_ngcontent-%COMP%]{padding:1.5em}body[_ngcontent-%COMP%]   .ui-dialog.ui-confirm-dialog[_ngcontent-%COMP%]   .ui-dialog-content[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{float:none;display:inline-block;vertical-align:middle;line-height:14px;margin:0}body[_ngcontent-%COMP%]   .ui-dialog.ui-confirm-dialog[_ngcontent-%COMP%]   .ui-dialog-content[_ngcontent-%COMP%] > span.ui-icon[_ngcontent-%COMP%]{margin-right:.35em;font-size:16px}body[_ngcontent-%COMP%]   .ui-sidebar[_ngcontent-%COMP%]{background-color:#fff;color:#666;padding:.571em 1em;border:1px solid #f1f1f1;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body[_ngcontent-%COMP%]   .ui-sidebar[_ngcontent-%COMP%]   .ui-sidebar-close[_ngcontent-%COMP%]{color:#a6a6a6}body[_ngcontent-%COMP%]   .ui-sidebar[_ngcontent-%COMP%]   .ui-sidebar-close[_ngcontent-%COMP%]:hover{color:#666}body[_ngcontent-%COMP%]   .ui-tooltip[_ngcontent-%COMP%]   .ui-tooltip-text[_ngcontent-%COMP%]{background-color:#afd3c8;color:#385048;padding:.429em;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body[_ngcontent-%COMP%]   .ui-tooltip.ui-tooltip-right[_ngcontent-%COMP%]   .ui-tooltip-arrow[_ngcontent-%COMP%]{border-right-color:#afd3c8}body[_ngcontent-%COMP%]   .ui-tooltip.ui-tooltip-left[_ngcontent-%COMP%]   .ui-tooltip-arrow[_ngcontent-%COMP%]{border-left-color:#afd3c8}body[_ngcontent-%COMP%]   .ui-tooltip.ui-tooltip-top[_ngcontent-%COMP%]   .ui-tooltip-arrow[_ngcontent-%COMP%]{border-top-color:#afd3c8}body[_ngcontent-%COMP%]   .ui-tooltip.ui-tooltip-bottom[_ngcontent-%COMP%]   .ui-tooltip-arrow[_ngcontent-%COMP%]{border-bottom-color:#afd3c8}body[_ngcontent-%COMP%]   .ui-lightbox[_ngcontent-%COMP%]{box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body[_ngcontent-%COMP%]   .ui-lightbox[_ngcontent-%COMP%]   .ui-lightbox-caption[_ngcontent-%COMP%]{border:1px solid #7b95a3;background-color:#7b95a3;color:#fff;padding:.571em 1em;font-weight:700}body[_ngcontent-%COMP%]   .ui-lightbox[_ngcontent-%COMP%]   .ui-lightbox-caption[_ngcontent-%COMP%]   .ui-lightbox-caption-text[_ngcontent-%COMP%]{color:#fff;margin:0}body[_ngcontent-%COMP%]   .ui-lightbox[_ngcontent-%COMP%]   .ui-lightbox-caption[_ngcontent-%COMP%]   .ui-lightbox-close[_ngcontent-%COMP%]{padding:0;color:#fff;overflow:hidden;line-height:1;transition:color .2s,background-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-lightbox[_ngcontent-%COMP%]   .ui-lightbox-caption[_ngcontent-%COMP%]   .ui-lightbox-close[_ngcontent-%COMP%]:hover{color:#fff}body[_ngcontent-%COMP%]   .ui-lightbox[_ngcontent-%COMP%]   .ui-lightbox-caption[_ngcontent-%COMP%]   .ui-lightbox-close[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-lightbox[_ngcontent-%COMP%]   .ui-lightbox-content-wrapper[_ngcontent-%COMP%]{overflow:hidden;background-color:#fff;color:#666;border:0;padding:0;border-radius:0}body[_ngcontent-%COMP%]   .ui-lightbox[_ngcontent-%COMP%]   .ui-lightbox-content-wrapper[_ngcontent-%COMP%]   .ui-lightbox-nav-left[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-lightbox[_ngcontent-%COMP%]   .ui-lightbox-content-wrapper[_ngcontent-%COMP%]   .ui-lightbox-nav-right[_ngcontent-%COMP%]{transition:all .2s;font-size:3em;color:#fff;margin-top:-.5em}body[_ngcontent-%COMP%]   .ui-lightbox[_ngcontent-%COMP%]   .ui-lightbox-content-wrapper[_ngcontent-%COMP%]   .ui-lightbox-nav-left[_ngcontent-%COMP%]:hover, body[_ngcontent-%COMP%]   .ui-lightbox[_ngcontent-%COMP%]   .ui-lightbox-content-wrapper[_ngcontent-%COMP%]   .ui-lightbox-nav-right[_ngcontent-%COMP%]:hover{transform:scale(1.2)}body[_ngcontent-%COMP%]   .ui-lightbox[_ngcontent-%COMP%]   .ui-lightbox-content-wrapper[_ngcontent-%COMP%]   .ui-lightbox-content.ui-lightbox-loading[_ngcontent-%COMP%] ~ a[_ngcontent-%COMP%]{display:none}body[_ngcontent-%COMP%]   .ui-breadcrumb[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #dadada;padding:.571em 1em}body[_ngcontent-%COMP%]   .ui-breadcrumb[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]{color:#666;margin:0;border-radius:2px;transition:box-shadow .2s}body[_ngcontent-%COMP%]   .ui-breadcrumb[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-breadcrumb[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.ui-breadcrumb-chevron[_ngcontent-%COMP%]{margin:0 .5em;color:#a6a6a6}body[_ngcontent-%COMP%]   .ui-breadcrumb[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   a[_ngcontent-%COMP%]{color:#a6a6a6;margin:0}body[_ngcontent-%COMP%]   .ui-breadcrumb[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .ui-menuitem-icon[_ngcontent-%COMP%]{color:#a6a6a6}body[_ngcontent-%COMP%]   .ui-steps[_ngcontent-%COMP%]{position:relative}body[_ngcontent-%COMP%]   .ui-steps[_ngcontent-%COMP%]   .ui-steps-item[_ngcontent-%COMP%]{background-color:transparent;text-align:center}body[_ngcontent-%COMP%]   .ui-steps[_ngcontent-%COMP%]   .ui-steps-item[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]{display:inline-block;text-align:center;background-color:transparent;overflow:hidden;border-radius:2px;transition:box-shadow .2s}body[_ngcontent-%COMP%]   .ui-steps[_ngcontent-%COMP%]   .ui-steps-item[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-steps[_ngcontent-%COMP%]   .ui-steps-item[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-steps-number[_ngcontent-%COMP%]{border-radius:50%;display:inline-block;color:#a6a6a6;background-color:#fff;border:1px solid #c8c8c8;position:relative;top:16px;margin-bottom:14px;width:28px;height:28px;font-size:16px;line-height:24px;text-align:center}body[_ngcontent-%COMP%]   .ui-steps[_ngcontent-%COMP%]   .ui-steps-item[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-steps-title[_ngcontent-%COMP%]{display:block;margin-top:6px;color:#a6a6a6}body[_ngcontent-%COMP%]   .ui-steps[_ngcontent-%COMP%]   .ui-steps-item.ui-state-highlight[_ngcontent-%COMP%]   .ui-steps-number[_ngcontent-%COMP%]{background:#afd3c8;color:#385048}body[_ngcontent-%COMP%]   .ui-steps[_ngcontent-%COMP%]   .ui-steps-item.ui-state-highlight[_ngcontent-%COMP%]   .ui-steps-title[_ngcontent-%COMP%]{font-weight:700;color:#666}body[_ngcontent-%COMP%]   .ui-steps[_ngcontent-%COMP%]:before{content:" ";border-top:1px solid #dadada;width:100%;top:45%;left:0;display:block;position:absolute}body[_ngcontent-%COMP%]   .ui-contextmenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-megamenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-menu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-menubar[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-slidemenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tieredmenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]{padding:.714em .857em;color:#666;font-weight:400;border-radius:0;transition:box-shadow .2s}body[_ngcontent-%COMP%]   .ui-contextmenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-text[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-megamenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-text[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-menu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-text[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-menubar[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-text[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-slidemenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-text[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tieredmenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-text[_ngcontent-%COMP%]{color:#666}body[_ngcontent-%COMP%]   .ui-contextmenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-megamenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-menu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-menubar[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-slidemenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tieredmenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-icon[_ngcontent-%COMP%]{color:#666;margin-right:.5em}body[_ngcontent-%COMP%]   .ui-contextmenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover, body[_ngcontent-%COMP%]   .ui-megamenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover, body[_ngcontent-%COMP%]   .ui-menu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover, body[_ngcontent-%COMP%]   .ui-menubar[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover, body[_ngcontent-%COMP%]   .ui-slidemenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover, body[_ngcontent-%COMP%]   .ui-tieredmenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover{background-color:#eaeaea}body[_ngcontent-%COMP%]   .ui-contextmenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover   .ui-menuitem-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-contextmenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover   .ui-menuitem-text[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-megamenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover   .ui-menuitem-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-megamenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover   .ui-menuitem-text[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-menu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover   .ui-menuitem-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-menu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover   .ui-menuitem-text[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-menubar[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover   .ui-menuitem-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-menubar[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover   .ui-menuitem-text[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-slidemenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover   .ui-menuitem-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-slidemenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover   .ui-menuitem-text[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tieredmenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover   .ui-menuitem-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tieredmenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover   .ui-menuitem-text[_ngcontent-%COMP%]{color:#666}body[_ngcontent-%COMP%]   .ui-contextmenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:focus, body[_ngcontent-%COMP%]   .ui-megamenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:focus, body[_ngcontent-%COMP%]   .ui-menu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:focus, body[_ngcontent-%COMP%]   .ui-menubar[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:focus, body[_ngcontent-%COMP%]   .ui-slidemenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:focus, body[_ngcontent-%COMP%]   .ui-tieredmenu[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:inset 0 0 0 .2em #e4e9ec}body[_ngcontent-%COMP%]   .ui-menu[_ngcontent-%COMP%]{padding:0;background-color:#fff;border:1px solid #c8c8c8}body[_ngcontent-%COMP%]   .ui-menu[_ngcontent-%COMP%]   .ui-menuitem[_ngcontent-%COMP%]{margin:0}body[_ngcontent-%COMP%]   .ui-menu.ui-shadow[_ngcontent-%COMP%]{border:1px solid #c8c8c8;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body[_ngcontent-%COMP%]   .ui-menu[_ngcontent-%COMP%]   .ui-submenu-header[_ngcontent-%COMP%]{margin:0;padding:.714em .857em;color:#fff;background-color:#7b95a3;font-weight:700;border:0}body[_ngcontent-%COMP%]   .ui-menu[_ngcontent-%COMP%]   .ui-menu-separator[_ngcontent-%COMP%]{border:solid #c8c8c8;border-width:1px 0 0}body[_ngcontent-%COMP%]   .ui-menubar[_ngcontent-%COMP%]{padding:0;background-color:#fff;border:1px solid #c8c8c8}body[_ngcontent-%COMP%]   .ui-menubar[_ngcontent-%COMP%]   .ui-menubar-root-list[_ngcontent-%COMP%] > .ui-menuitem[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%]{padding:.714em .857em}body[_ngcontent-%COMP%]   .ui-menubar[_ngcontent-%COMP%]   .ui-menubar-root-list[_ngcontent-%COMP%] > .ui-menu-separator[_ngcontent-%COMP%]{border:solid #c8c8c8;border-width:0 0 0 1px}body[_ngcontent-%COMP%]   .ui-menubar[_ngcontent-%COMP%]   .ui-submenu-list[_ngcontent-%COMP%]{padding:0;background-color:#fff;border:1px solid #c8c8c8;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body[_ngcontent-%COMP%]   .ui-menubar[_ngcontent-%COMP%]   .ui-submenu-list[_ngcontent-%COMP%]   .ui-menuitem[_ngcontent-%COMP%]{margin:0}body[_ngcontent-%COMP%]   .ui-menubar[_ngcontent-%COMP%]   .ui-submenu-list[_ngcontent-%COMP%]   .ui-menu-separator[_ngcontent-%COMP%]{border:solid #c8c8c8;border-width:1px 0 0}body[_ngcontent-%COMP%]   .ui-menubar[_ngcontent-%COMP%]   .ui-menuitem[_ngcontent-%COMP%]{margin:0}body[_ngcontent-%COMP%]   .ui-menubar[_ngcontent-%COMP%]   .ui-menuitem.ui-menuitem-active[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%]{background-color:#eaeaea}body[_ngcontent-%COMP%]   .ui-menubar[_ngcontent-%COMP%]   .ui-menuitem.ui-menuitem-active[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-menubar[_ngcontent-%COMP%]   .ui-menuitem.ui-menuitem-active[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-text[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-menubar[_ngcontent-%COMP%]   .ui-menuitem.ui-menuitem-active[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%]   .ui-submenu-icon[_ngcontent-%COMP%]{color:#666}body[_ngcontent-%COMP%]   .ui-contextmenu[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-contextmenu[_ngcontent-%COMP%]   .ui-submenu-list[_ngcontent-%COMP%]{padding:0;background-color:#fff;border:1px solid #c8c8c8;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body[_ngcontent-%COMP%]   .ui-contextmenu[_ngcontent-%COMP%]   .ui-menuitem[_ngcontent-%COMP%]{margin:0}body[_ngcontent-%COMP%]   .ui-contextmenu[_ngcontent-%COMP%]   .ui-menuitem[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-submenu-icon[_ngcontent-%COMP%]{right:.429em}body[_ngcontent-%COMP%]   .ui-contextmenu[_ngcontent-%COMP%]   .ui-menuitem.ui-menuitem-active[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%]{background-color:#eaeaea}body[_ngcontent-%COMP%]   .ui-contextmenu[_ngcontent-%COMP%]   .ui-menuitem.ui-menuitem-active[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-contextmenu[_ngcontent-%COMP%]   .ui-menuitem.ui-menuitem-active[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-text[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-contextmenu[_ngcontent-%COMP%]   .ui-menuitem.ui-menuitem-active[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%]   .ui-submenu-icon[_ngcontent-%COMP%]{color:#666}body[_ngcontent-%COMP%]   .ui-contextmenu[_ngcontent-%COMP%]   .ui-menu-separator[_ngcontent-%COMP%]{border:solid #c8c8c8;border-width:1px 0 0}body[_ngcontent-%COMP%]   .ui-tieredmenu[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tieredmenu[_ngcontent-%COMP%]   .ui-submenu-list[_ngcontent-%COMP%]{padding:0;background-color:#fff;border:1px solid #c8c8c8}body[_ngcontent-%COMP%]   .ui-tieredmenu[_ngcontent-%COMP%]   .ui-submenu-list[_ngcontent-%COMP%]{box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body[_ngcontent-%COMP%]   .ui-tieredmenu[_ngcontent-%COMP%]   .ui-menuitem[_ngcontent-%COMP%]{margin:0}body[_ngcontent-%COMP%]   .ui-tieredmenu[_ngcontent-%COMP%]   .ui-menuitem[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-submenu-icon[_ngcontent-%COMP%]{right:.429em}body[_ngcontent-%COMP%]   .ui-tieredmenu[_ngcontent-%COMP%]   .ui-menuitem.ui-menuitem-active[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%]{background-color:#eaeaea}body[_ngcontent-%COMP%]   .ui-tieredmenu[_ngcontent-%COMP%]   .ui-menuitem.ui-menuitem-active[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tieredmenu[_ngcontent-%COMP%]   .ui-menuitem.ui-menuitem-active[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-text[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tieredmenu[_ngcontent-%COMP%]   .ui-menuitem.ui-menuitem-active[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%]   .ui-submenu-icon[_ngcontent-%COMP%]{color:#666}body[_ngcontent-%COMP%]   .ui-tieredmenu[_ngcontent-%COMP%]   .ui-menu-separator[_ngcontent-%COMP%]{border:solid #c8c8c8;border-width:1px 0 0}body[_ngcontent-%COMP%]   .ui-slidemenu[_ngcontent-%COMP%]{padding:0;background-color:#fff;border:1px solid #c8c8c8}body[_ngcontent-%COMP%]   .ui-slidemenu[_ngcontent-%COMP%]   .ui-submenu-list[_ngcontent-%COMP%]{padding:0;background-color:#fff;border:0}body[_ngcontent-%COMP%]   .ui-slidemenu[_ngcontent-%COMP%]   .ui-menuitem[_ngcontent-%COMP%]{margin:0}body[_ngcontent-%COMP%]   .ui-slidemenu[_ngcontent-%COMP%]   .ui-menuitem[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-submenu-icon[_ngcontent-%COMP%]{right:.429em}body[_ngcontent-%COMP%]   .ui-slidemenu[_ngcontent-%COMP%]   .ui-menuitem.ui-menuitem-active[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%]{background-color:#eaeaea}body[_ngcontent-%COMP%]   .ui-slidemenu[_ngcontent-%COMP%]   .ui-menuitem.ui-menuitem-active[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-slidemenu[_ngcontent-%COMP%]   .ui-menuitem.ui-menuitem-active[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-text[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-slidemenu[_ngcontent-%COMP%]   .ui-menuitem.ui-menuitem-active[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%]   .ui-submenu-icon[_ngcontent-%COMP%]{color:#666}body[_ngcontent-%COMP%]   .ui-slidemenu[_ngcontent-%COMP%]   .ui-slidemenu-backward[_ngcontent-%COMP%]{margin:0;padding:.571em 1em;color:#fff;background-color:#7b95a3;font-weight:700;border:0}body[_ngcontent-%COMP%]   .ui-slidemenu[_ngcontent-%COMP%]   .ui-slidemenu-backward[_ngcontent-%COMP%]:hover{background-color:#617c8a;color:#fff}body[_ngcontent-%COMP%]   .ui-slidemenu[_ngcontent-%COMP%]   .ui-menu-separator[_ngcontent-%COMP%]{border:solid #c8c8c8;border-width:1px 0 0}body[_ngcontent-%COMP%]   .ui-tabmenu[_ngcontent-%COMP%]{border:0}body[_ngcontent-%COMP%]   .ui-tabmenu[_ngcontent-%COMP%]   .ui-tabmenu-nav[_ngcontent-%COMP%]{padding:0;background:#fff;border-bottom:1px solid #7b95a3}body[_ngcontent-%COMP%]   .ui-tabmenu[_ngcontent-%COMP%]   .ui-tabmenu-nav[_ngcontent-%COMP%]   .ui-tabmenuitem[_ngcontent-%COMP%]{position:static;border:1px solid #7b95a3;background-color:#7b95a3;margin-right:.214em;margin-bottom:-1px;transition:background-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-tabmenu[_ngcontent-%COMP%]   .ui-tabmenu-nav[_ngcontent-%COMP%]   .ui-tabmenuitem[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]{color:#fff;padding:.571em 1em;transition:background-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-tabmenu[_ngcontent-%COMP%]   .ui-tabmenu-nav[_ngcontent-%COMP%]   .ui-tabmenuitem[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabmenu[_ngcontent-%COMP%]   .ui-tabmenu-nav[_ngcontent-%COMP%]   .ui-tabmenuitem[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-text[_ngcontent-%COMP%]{color:#fff;margin-right:.5em}body[_ngcontent-%COMP%]   .ui-tabmenu[_ngcontent-%COMP%]   .ui-tabmenu-nav[_ngcontent-%COMP%]   .ui-tabmenuitem[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-tabmenu[_ngcontent-%COMP%]   .ui-tabmenu-nav[_ngcontent-%COMP%]   .ui-tabmenuitem[_ngcontent-%COMP%]:not(.ui-state-active):not(.ui-state-disabled):hover{background-color:#617c8a;border:1px solid #617c8a}body[_ngcontent-%COMP%]   .ui-tabmenu[_ngcontent-%COMP%]   .ui-tabmenu-nav[_ngcontent-%COMP%]   .ui-tabmenuitem[_ngcontent-%COMP%]:not(.ui-state-active):not(.ui-state-disabled):hover   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabmenu[_ngcontent-%COMP%]   .ui-tabmenu-nav[_ngcontent-%COMP%]   .ui-tabmenuitem[_ngcontent-%COMP%]:not(.ui-state-active):not(.ui-state-disabled):hover   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-text[_ngcontent-%COMP%]{color:#fff}body[_ngcontent-%COMP%]   .ui-tabmenu[_ngcontent-%COMP%]   .ui-tabmenu-nav[_ngcontent-%COMP%]   .ui-tabmenuitem.ui-state-active[_ngcontent-%COMP%]{background-color:#afd3c8;border:1px solid #dadada}body[_ngcontent-%COMP%]   .ui-tabmenu[_ngcontent-%COMP%]   .ui-tabmenu-nav[_ngcontent-%COMP%]   .ui-tabmenuitem.ui-state-active[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-tabmenu[_ngcontent-%COMP%]   .ui-tabmenu-nav[_ngcontent-%COMP%]   .ui-tabmenuitem.ui-state-active[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-text[_ngcontent-%COMP%]{color:#385048}body[_ngcontent-%COMP%]   .ui-megamenu[_ngcontent-%COMP%]{padding:0;background-color:#fff;border:1px solid #c8c8c8}body[_ngcontent-%COMP%]   .ui-megamenu[_ngcontent-%COMP%]   .ui-megamenu-submenu-header[_ngcontent-%COMP%]{margin:0;padding:.571em 1em;color:#fff;background-color:#7b95a3;font-weight:700;border:0}body[_ngcontent-%COMP%]   .ui-megamenu[_ngcontent-%COMP%]   .ui-megamenu-panel[_ngcontent-%COMP%]{padding:0;background-color:#fff;border:1px solid #c8c8c8;box-shadow:0 0 6px 0 rgba(0,0,0,.16)}body[_ngcontent-%COMP%]   .ui-megamenu[_ngcontent-%COMP%]   .ui-menuitem[_ngcontent-%COMP%]{margin:0}body[_ngcontent-%COMP%]   .ui-megamenu[_ngcontent-%COMP%]   .ui-menuitem[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]   .ui-submenu-icon[_ngcontent-%COMP%]{right:.429em}body[_ngcontent-%COMP%]   .ui-megamenu[_ngcontent-%COMP%]   .ui-menuitem.ui-menuitem-active[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%]{background-color:#eaeaea}body[_ngcontent-%COMP%]   .ui-megamenu[_ngcontent-%COMP%]   .ui-menuitem.ui-menuitem-active[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-megamenu[_ngcontent-%COMP%]   .ui-menuitem.ui-menuitem-active[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%]   .ui-menuitem-text[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-megamenu[_ngcontent-%COMP%]   .ui-menuitem.ui-menuitem-active[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%]   .ui-submenu-icon[_ngcontent-%COMP%]{color:#666}body[_ngcontent-%COMP%]   .ui-megamenu.ui-megamenu-vertical[_ngcontent-%COMP%]   .ui-megamenu-root-list[_ngcontent-%COMP%] > .ui-menuitem[_ngcontent-%COMP%] > .ui-menuitem-link[_ngcontent-%COMP%] > .ui-submenu-icon[_ngcontent-%COMP%]{right:.429em}body[_ngcontent-%COMP%]   .ui-panelmenu[_ngcontent-%COMP%]   .ui-icon[_ngcontent-%COMP%]{position:static}body[_ngcontent-%COMP%]   .ui-panelmenu[_ngcontent-%COMP%]   .ui-panelmenu-header[_ngcontent-%COMP%]{padding:0}body[_ngcontent-%COMP%]   .ui-panelmenu[_ngcontent-%COMP%]   .ui-panelmenu-header[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{border:1px solid #7b95a3;background-color:#7b95a3;color:#fff;padding:.714em .857em;font-weight:700;position:static;font-size:14px;border-radius:2px;transition:background-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-panelmenu[_ngcontent-%COMP%]   .ui-panelmenu-header[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   .ui-panelmenu-icon[_ngcontent-%COMP%]{color:#fff}body[_ngcontent-%COMP%]   .ui-panelmenu[_ngcontent-%COMP%]   .ui-panelmenu-header[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-panelmenu[_ngcontent-%COMP%]   .ui-panelmenu-header[_ngcontent-%COMP%]:not(.ui-state-active) > a[_ngcontent-%COMP%]:hover{outline:0 none;border:1px solid #617c8a;background-color:#617c8a;color:#fff}body[_ngcontent-%COMP%]   .ui-panelmenu[_ngcontent-%COMP%]   .ui-panelmenu-header[_ngcontent-%COMP%]:not(.ui-state-active) > a[_ngcontent-%COMP%]:hover   .ui-panelmenu-icon[_ngcontent-%COMP%]{color:#fff}body[_ngcontent-%COMP%]   .ui-panelmenu[_ngcontent-%COMP%]   .ui-panelmenu-header.ui-state-active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{border:1px solid #dadada;background-color:#afd3c8;color:#385048;border-bottom-left-radius:0;border-bottom-right-radius:0}body[_ngcontent-%COMP%]   .ui-panelmenu[_ngcontent-%COMP%]   .ui-panelmenu-header.ui-state-active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   .ui-panelmenu-icon[_ngcontent-%COMP%]{color:#385048}body[_ngcontent-%COMP%]   .ui-panelmenu[_ngcontent-%COMP%]   .ui-panelmenu-header.ui-state-active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{outline:0 none;border:1px solid #8dc8b5;background-color:#8dc8b5;color:#385048}body[_ngcontent-%COMP%]   .ui-panelmenu[_ngcontent-%COMP%]   .ui-panelmenu-header.ui-state-active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover   .ui-panelmenu-icon[_ngcontent-%COMP%]{color:#385048}body[_ngcontent-%COMP%]   .ui-panelmenu[_ngcontent-%COMP%]   .ui-panelmenu-panel[_ngcontent-%COMP%]{margin-top:2px}body[_ngcontent-%COMP%]   .ui-panelmenu[_ngcontent-%COMP%]   .ui-panelmenu-panel[_ngcontent-%COMP%]:first-child{margin-top:0}body[_ngcontent-%COMP%]   .ui-panelmenu[_ngcontent-%COMP%]   .ui-panelmenu-content[_ngcontent-%COMP%]{padding:0;background-color:#fff;margin-top:0;position:static;border:1px solid #c8c8c8;border-top:0}body[_ngcontent-%COMP%]   .ui-panelmenu[_ngcontent-%COMP%]   .ui-panelmenu-content[_ngcontent-%COMP%]   .ui-menuitem[_ngcontent-%COMP%]{margin:0}body[_ngcontent-%COMP%]   .ui-panelmenu[_ngcontent-%COMP%]   .ui-panelmenu-content[_ngcontent-%COMP%]   .ui-menuitem[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]{padding:.714em .857em;color:#666}body[_ngcontent-%COMP%]   .ui-panelmenu[_ngcontent-%COMP%]   .ui-panelmenu-content[_ngcontent-%COMP%]   .ui-menuitem[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover{background-color:#eaeaea}body[_ngcontent-%COMP%]   .ui-panelmenu[_ngcontent-%COMP%]   .ui-panelmenu-content[_ngcontent-%COMP%]   .ui-menuitem[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover   .ui-menuitem-icon[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-panelmenu[_ngcontent-%COMP%]   .ui-panelmenu-content[_ngcontent-%COMP%]   .ui-menuitem[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover   .ui-menuitem-text[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-panelmenu[_ngcontent-%COMP%]   .ui-panelmenu-content[_ngcontent-%COMP%]   .ui-menuitem[_ngcontent-%COMP%]   .ui-menuitem-link[_ngcontent-%COMP%]:hover   .ui-panelmenu-icon[_ngcontent-%COMP%]{color:#666}body[_ngcontent-%COMP%]   .ui-progressbar[_ngcontent-%COMP%]{border:0;height:1.714em;background-color:#efefef}body[_ngcontent-%COMP%]   .ui-progressbar[_ngcontent-%COMP%]   .ui-progressbar-value[_ngcontent-%COMP%]{border:0;margin:0;background:#7b95a3}body[_ngcontent-%COMP%]   .ui-progressbar[_ngcontent-%COMP%]   .ui-progressbar-label[_ngcontent-%COMP%]{margin-top:0;color:#666;line-height:1.714em}body[_ngcontent-%COMP%]   .ui-galleria[_ngcontent-%COMP%]   .ui-galleria-nav-next[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-galleria[_ngcontent-%COMP%]   .ui-galleria-nav-prev[_ngcontent-%COMP%]{transition:all .2s;position:absolute;color:#a6a6a6}body[_ngcontent-%COMP%]   .ui-galleria[_ngcontent-%COMP%]   .ui-galleria-nav-next[_ngcontent-%COMP%]:hover, body[_ngcontent-%COMP%]   .ui-galleria[_ngcontent-%COMP%]   .ui-galleria-nav-prev[_ngcontent-%COMP%]:hover{transform:scale(1.2)}body[_ngcontent-%COMP%]   .ui-galleria[_ngcontent-%COMP%]   .ui-galleria-nav-next[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-galleria[_ngcontent-%COMP%]   .ui-galleria-nav-prev[_ngcontent-%COMP%]{font-size:16px}body[_ngcontent-%COMP%]   .ui-terminal[_ngcontent-%COMP%]{background-color:#fff;color:#666;border:1px solid #dadada;padding:.571em 1em}body[_ngcontent-%COMP%]   .ui-terminal[_ngcontent-%COMP%]   .ui-terminal-input[_ngcontent-%COMP%]{font-size:14px;font-family:Open Sans,Helvetica Neue,sans-serif;height:16px}body[_ngcontent-%COMP%]   .ui-terminal[_ngcontent-%COMP%]   .ui-terminal-command[_ngcontent-%COMP%]{height:16px}body[_ngcontent-%COMP%]   .ui-inplace[_ngcontent-%COMP%]{min-height:2.357em}body[_ngcontent-%COMP%]   .ui-inplace[_ngcontent-%COMP%]   .ui-inplace-display[_ngcontent-%COMP%]{padding:.429em;border-radius:2px;transition:background-color .2s,box-shadow .2s}body[_ngcontent-%COMP%]   .ui-inplace[_ngcontent-%COMP%]   .ui-inplace-display[_ngcontent-%COMP%]:not(.ui-state-disabled):hover{background-color:#f4f4f4;color:#666}body[_ngcontent-%COMP%]   .ui-inplace[_ngcontent-%COMP%]   .ui-inplace-display[_ngcontent-%COMP%]:focus{outline:0 none;outline-offset:0;box-shadow:0 0 0 .2em #c6d1d7}body[_ngcontent-%COMP%]   .ui-fluid[_ngcontent-%COMP%]   .ui-inplace.ui-inplace-closable[_ngcontent-%COMP%]   .ui-inplace-content[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{display:inline-block;width:calc(100% - 2.357em)}.mapboxgl-canvas-container[_ngcontent-%COMP%]{height:100vh;color:#fff}#map[_ngcontent-%COMP%]{border-radius:.5rem;display:flex;height:75vh;margin:auto;position:relative}.mapboxgl-popup-tip[_ngcontent-%COMP%]{border-top-color:rgba(0,0,0,.5)!important}.mapboxgl-popup-content[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 .1rem;color:#fff;background-color:rgba(0,0,0,.5)}.mapboxgl-popup-content[_ngcontent-%COMP%]   .map-popup[_ngcontent-%COMP%]{text-align:center;margin:auto}.mapboxgl-popup-content[_ngcontent-%COMP%]   .map-popup[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding:0;margin:.25rem;line-height:normal}.mapboxgl-popup-content[_ngcontent-%COMP%]   .map-popup[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:normal;padding:.25rem;margin:auto}.ui-button.R-1[_ngcontent-%COMP%]{color:#000;background-color:#fffaca!important}.ui-button.R-2[_ngcontent-%COMP%]{color:#000;background-color:#fff68f!important}.ui-button.R-3[_ngcontent-%COMP%]{color:#000;background-color:#fff100!important}.ui-button.R-4[_ngcontent-%COMP%]{color:#000;background-color:#ebd417!important}.ui-button.C-1[_ngcontent-%COMP%]{color:#000;background-color:#a18aad!important}.ui-button.C-2[_ngcontent-%COMP%]{color:#fff;background-color:#da2028!important}.ui-button.C-3[_ngcontent-%COMP%]{background-color:#850204!important;color:#fff!important;-webkit-text-fill-color:#fff!important}.ui-button.MX-1[_ngcontent-%COMP%]{color:#000;background-color:#e4a024!important}.ui-button.MX-2[_ngcontent-%COMP%]{color:#000;background-color:#f37520!important}.ui-button.MX-3[_ngcontent-%COMP%]{color:#fff;background-color:#ff2900!important}.ui-button.I-1[_ngcontent-%COMP%]{color:#000;background-color:#e1c3dd!important}.ui-button.I-2[_ngcontent-%COMP%]{color:#fff;background-color:#a53ed5!important}.ui-button.I-3[_ngcontent-%COMP%]{color:#fff;background-color:#c0188c!important}.ui-button.RDV[_ngcontent-%COMP%]{color:#000;background-color:#ddd!important}.ui-button.PARK[_ngcontent-%COMP%]{color:#fff;background-color:#229a00!important}.ui-button.INST[_ngcontent-%COMP%]{color:#fff;background-color:#0063ff!important}.ui-button.CEM[_ngcontent-%COMP%]{background-color:#561818!important;color:#fff!important;-webkit-text-fill-color:#fff!important}.ui-button.PORT[_ngcontent-%COMP%]{color:#fff;background-color:#b81609!important}.ui-button.EWR[_ngcontent-%COMP%]{background-color:#820c0c!important;color:#fff!important;-webkit-text-fill-color:#fff!important}']}),t})();const dS=[BP,PC,iC,nk,cS,(()=>{let t=class{};return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},imports:[[Hc,_y],_y]}),t})(),eM,(()=>{let t=class{};return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},imports:[[Hc]]}),t})(),cC,(()=>{let t=class{};return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},imports:[[Hc,BP,_y],BP,_y]}),t})(),(()=>{let t=class{};return t.\u0275mod=be({type:t}),t.\u0275inj=ft({factory:function(e){return new(e||t)},imports:[[Hc,_y],_y]}),t})(),DE];let pS=(()=>{class t{}return t.\u0275mod=be({type:t,bootstrap:[hS]}),t.\u0275inj=ft({factory:function(e){return new(e||t)},providers:[Aw],imports:[[Ph,Gp,Hc,DP,l_,$c,dS,Ey]]}),t})();(function(){if(ii)throw new Error("Cannot enable prod mode after platform setup.");ni=!1})(),wh().bootstrapModule(pS).then(t=>{window.ngRef&&window.ngRef.destroy(),window.ngRef=t}).catch(t=>{console.error(t)})},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);